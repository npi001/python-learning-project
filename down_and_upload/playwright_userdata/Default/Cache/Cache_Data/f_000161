"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["97198"],{5537:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQzSURBVHgBzVk9aBxHFP52rSaQ+K5JIBDZ16QziQSpHIxO6RICOlcpUkhpQkgRqUgRAkGCgCE/xRFICG4kF8a4uhMYy92d8E9l0Mk/lYs7/4AtubiTZXBje/2+HZ9uZ3Z2ds+3sv3B43ZnZ2a//ebNm5l3wFsOz1q6+7AML5hBEJQRoAjPKwJBEfm+uif996TvjrBoIfBW8d77zVgt7e7J/RKeHlgWMmW8CXheCweeHcc7H3b2ivYePt6eELUa+Ss1NKjqNN79oMUbRVApt7Gv5G7fVb+Hx7PU7mHs+SSV9MPbp35tX8hdvAJ8dRz46GPgyGfKeP3DT8Cdu66WReVqVHD3fhnwG8gbv/wG/Hsy+fkhUXKtpn4T4U+Lgl4FeSONHEEFqaQTzypC0P8UeeL02XRyfdAFXPD8KV9iUQl54sRfe5elUgntdhvLy8uoVCooFi1uftvli0HRV0E4J1CRiPNPTEyEJOfm5lCr1dDtdsOyzJBFws919l7Sh2xmZgYjougjTxg+VS6X09tcv+F8PIZhsPMIuCYdnltTQ7mzo8oLBeDYUSF4ea9qf3hNkHSr1RoUUPWvv0QydreCVLt3K8CvPwcoHAxAz8hg4neBDY1GQ69bKKj+E96dPsQctqNfyOz8WymYEUn+RwUXFhYGBRyFE386enIp9/8/mRUzTWZs4IKQ1NvwXTYOieTOnLK+WBQIJGRoBDY2NgKJdVqdLGAb8dVB/3SjTARvXo35mzh86D9JiPrW0tJS7LkEbGu7arWqi3BoXKlJDokEv/0mRi7pBX2QVL+++SFsm9QH1U50lU+OWAiSeaSSLE+p5KIvYn0T/eEnyZWVFe0Z67t8OR4H/9MX+vn5eWs8azabWF9fD685Y3lP2ILz6upq+NvpdMJlj3VnZ2fDsl6vBzdMBUNZB18w7LDQp0ykqeS22KwZPOQMMxH1NZtxRkcRC8xDmh6ojW24bWjr9TqSwPrmbmVzcxOjwLmS2PZvLp+x+Z/rg7JAJ1g4qN3SqU249nNTU1PaPT+mP3leHaYPHh7XQoy5ZHHS2Jze5q+i3kj+h5gPEsc+1xTQtkZQfiYTIQwXvKYtLi5CJkOsq1GHV8FU8HwttoqkLfw2UGmMqB6sYcYYZhp3HsOS44flRHC7m6YizbYB2H9y6AKPttpWFX/8PtbAtpb2QTfgR4y2asSsLamPLUkawR47ePLnQdwA42P0zMGJZE6mnNCUIX5Qde6qLUq+RqvyXOyOBX/8DtlAZk2b5Y26yg/ubjeQJavK4+a5C3JUvJySssgF9JlJRbArCcyxIROYPB/zTEvCkfNwTuCCPynWyS8FfPHKQN1rNzACSG4aSkEjiR4qyWwrhsjwWMDzM1Ud3h2aYt+JdfoFCX9DMOvKxKbkDpmeG/VvCO4zQ4XXFOFemADoRYxnh/pLghpeAKra17jyXmwUAAAAAElFTkSuQmCC"},965775:function(e,i,l){l.r(i),l.d(i,{Helmet:function(){return t}});let t=l(429719).Head},962850:function(e,i,l){l.d(i,{A:function(){return g}}),l("874386");var t=l("88648"),n=l("520739"),o=l("878389");l("250440"),l("675373");var a=l("496349"),r=l("738363"),s=l("622995");let{COMMON_SEARCH_PARAMS:d,DISABLE_SECRET_VIDEO_PARAMS:u,WHALE_CUT_HEADER:c}=a,{ERROR_CODE:v}=r;async function f(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{result:l}=await (0,s.g8)("/aweme/v1/web/user/dashboard",(0,o._)((0,n._)({},d,u),{UserId:e}),i,e=>!!(null==e?void 0:e.HaveDashBoard));return l}function g(e,i){let[l,n]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{if(!e||!i)return;let l=!1;return(async()=>{try{await f(i)&&!l&&n(!0)}catch(e){}})(),()=>{l=!0}},[e,i]),l}},468742:function(e,i,l){l.d(i,{o:function(){return R}});var t=l("563097"),n=l("88648"),o=l("301061");l("874386");var a=l("116253"),r=l("702726"),s=l("32167"),d=l("363325"),u=l("665067"),c=l("713097"),v=l.n(c),f=l("746864"),g=l("14108"),m=l("55426"),h=l("325430"),p="V580yPnQ",_="n7Pb56ub",x="kxyPOJy5",w="iRAKMigF",y="xFFEHglE",C="kLeDUD_m",I=l("304036"),j=l("473677"),S=e=>{let{style:i,className:l,iconWidth:n}=e;return(0,t.jsxs)("div",{style:i,className:v()(p,l),children:[(0,t.jsx)("div",{className:v()(x),children:(0,t.jsx)("div",{className:v()(w),children:(0,t.jsx)(j.Z,{width:n,height:120,viewBox:"0 0 105 120",src:I.Z,className:_})})}),(0,t.jsxs)("div",{className:v()(y),children:[(0,t.jsx)("div",{style:{width:"100px"},className:v()(C)}),(0,t.jsx)("div",{className:v()(C)})]})]})},N={container:"pNCs3rPl",videoCard:"FnUdEVM5",mask:"lAhLwUwD",countDown:"rUxFOE3Z",next:"f0NxXzbR"};function b(e){let{awemeList:i,skeletonNumber:l,classNames:o,countDownEneded:a,onVideoCardClick:d}=e,[u,c]=(0,n.useState)(5);(0,n.useEffect)(()=>{let e=u>0&&setInterval(()=>c(u-1),1e3);return()=>void(e&&clearInterval(e))},[u]),(0,n.useEffect)(()=>{(null==i?void 0:i.length)>0&&c(5)},[null==i?void 0:i.length]),(0,n.useEffect)(()=>{0===u&&a(null==i?void 0:i[0])},[u]);let p=(0,n.useMemo)(()=>(0,t.jsxs)("div",{className:N.mask,children:[(0,t.jsx)("p",{className:N.countDown,children:u}),(0,t.jsx)("p",{className:N.next,children:"接下来播放"})]}),[u]);return(0,t.jsxs)("div",{className:v()(N.container,o),children:[!(null==i?void 0:i.length)&&[...Array(l).keys()].map(e=>(0,t.jsx)(S,{className:N.videoCard,iconWidth:"38%"},e)),i.map((e,i)=>{var l,n,o,a,u,c,v;return(0,t.jsx)(h.Z,{className:N.videoCard,coverMask:0===i?p:void 0,showHighLightTag:!0,awemeInfo:e,url:(null==e?void 0:e.awemeType)===f.e.Note?(0,g.Wr)(e.awemeId):(0,g.JF)(e.awemeId),description:e.desc,imgUrl:e.video.cover,userName:e.authorInfo.nickname,userHref:(0,g.HC)(null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.secUid),userHrefTarget:"_self",likesCount:(0,m.qe)(e.stats.diggCount),videoTime:(0,m.$y)(e.video.duration),width:null==e?void 0:null===(n=e.video)||void 0===n?void 0:n.width,height:null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.height,previewUrlList:(null==e?void 0:null===(u=e.video)||void 0===u?void 0:null===(a=u.playAddr)||void 0===a?void 0:a.map(e=>e.src||""))||[],isHorizontal:(null==e?void 0:null===(c=e.video)||void 0===c?void 0:c.width)>(null==e?void 0:null===(v=e.video)||void 0===v?void 0:v.height),fakeHorizontalInfo:null==e?void 0:e.fakeHorizontalInfo,onShow:()=>{var l;r.logInstance.sendLog("videoCoverShow",{author_id:null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.uid,enter_from:(0,s.vM)(),type:"item_non_existent",group_id:null==e?void 0:e.groupId,rank:i,page_url:window.location.href})},onClick:()=>{var l;r.logInstance.sendLog("videoCoverClick",{author_id:null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.uid,enter_from:(0,s.vM)(),type:"item_non_existent",group_id:null==e?void 0:e.groupId,rank:i,page_url:window.location.href}),null==d||d(e)},isShowCreateTime:!0},e.awemeId)})]})}var T="TzONiiRi",E="IODnWoHY",P="GOsGnYBI",L="SH2M6kBc",k="i44zXTmm";function M(e){let{title:i,desc:l}=e;(0,u.U)();let[o,c]=(0,n.useState)([]),v=e=>{let{vid:i,enterMethod:l}=e;return window.open(`/?previous_page=web_video_404_link&enter_recommend_method=${l}&page_url=${location.href}${i?`&vid=${i}`:""}`,"_self")};return(0,a.b)(async e=>{var i,l,t;let n=await (0,d.Nu)({tagId:"",count:10,refreshIndex:1,useProtobuf:!1,usePassThrough:!1},null);e.current&&c(null!==(t=null==n?void 0:null===(l=n.awemeList)||void 0===l?void 0:null===(i=l.filter)||void 0===i?void 0:i.call(l,e=>null==e?void 0:e.createTime).slice(0,5))&&void 0!==t?t:[])},[]),(0,n.useEffect)(()=>{r.logInstance.sendLog("itemNonExistent",{enter_from:(0,s.vM)(),page_url:window.location.href})},[]),(0,t.jsxs)("div",{className:T,children:[(0,t.jsx)("p",{className:E,"data-e2e":"error-page",children:i}),(0,t.jsx)("p",{className:P,children:l}),(0,t.jsx)("div",{className:L,children:o&&(0,t.jsx)(b,{countDownEneded:()=>{var e;return v({vid:null==o?void 0:null===(e=o[0])||void 0===e?void 0:e.awemeId,enterMethod:"item_non_existent_recommend_auto"})},skeletonNumber:5,onVideoCardClick:e=>v({vid:null==e?void 0:e.awemeId,enterMethod:"item_non_existent_recommend_click"}),awemeList:o})}),(0,t.jsx)("p",{className:k,onClick:()=>v({enterMethod:"item_non_existent_button"}),children:"去推荐页查看更多视频"})]})}var A={loadingVideoDetailContainer:"PppPzI3J",loadingVideoDetail:"ZlBaQJma"};let R=e=>{let{invisibleDesc:i,invisibleTitle:l,isLoading:n}=e;return n?(0,t.jsx)("div",{className:A.loadingVideoDetailContainer,children:(0,t.jsx)(o.gb,{text:"视频数据加载中",className:A.loadingVideoDetail})}):(0,t.jsx)(M,{title:l,desc:i})}},792060:function(e,i,l){var t=l(563097);l(88648);var n=l(501981),o=l(700662);i.Z=e=>{let{children:i,mobileUrl:l,applicableDevice:a}=e,r=(0,n.Yr)();return(0,t.jsx)(o.$,{mobileUrl:l,nonce:r,applicableDevice:a,children:i})}},936681:function(e,i,l){l.d(i,{R:function(){return f}}),l("874386"),l("250440");var t=l("563097");l("88648");var n=l("713097"),o=l.n(n),a=l("55426"),r=l("421885"),s=l("956428"),d=l("180962"),u=l("555679"),c={tagContainer:"MuOMBG7w",tagText:"j0NhDonV",yellow:"cnXJYqGj",green:"XyANTGWL",recommended:"HiCadb44"};r.Z,s.Z,d.Z,u.Z;let v=new Map([["follow",{text:"你的关注"}],["recommended",{text:"为你推荐"}],["collect",{text:"收藏"}],["digg",{text:"点赞"}],["comment",{text:"评论"}]]),f=e=>{let{count:i,type:l,className:n,abTestData:r}=e,s=v.get("recommended"===l?"recommended":"follow");return(0,t.jsx)(t.Fragment,{children:s&&(0,t.jsx)("span",{className:o()(c.tagContainer,n,{[c.yellow]:"collect"===l,[c.green]:"comment"===l,[c.green]:"follow"===l,[c.recommended]:"recommended"===l}),children:(0,t.jsx)("span",{className:o()(c.tagText),children:`${["follow","recommended"].includes(l)?"":(0,a.qe)(i||0)}${s.text}`})})})}},325430:function(e,i,l){l.d(i,{Z:function(){return eD}});var t=l("520739"),n=l("878389");l("675373"),l("602157"),l("874386"),l("698295"),l("630833");var o=l("563097"),a=l("88648"),r=l("713097"),s=l.n(r),d=l("222406"),u=l("465571"),c=l("338426"),v=l("149250"),f=l("948375"),g=l("567754"),m=l("410665"),h=l("702726"),p=l("234048"),_=l("597334"),x=l("105600"),w=l("598467"),y=l("828564"),C=l("417069"),I=l("901414"),j=l("473677"),S=l("906499"),N=l("128505"),b=l("903868"),T=l("317914"),E=l("782442"),P=l("55426"),L=l("32167"),k=l("637005"),M=l("577786"),A=l("658065"),R=l("807939"),D=l("330746"),B=l("782563"),O=l("273329"),H={more:"okbbldWm",videoCard:"Ety_VxKJ",cardInfo:"aQ9_t9OG",bgChange:"Ggrj06si",videoImg:"Lcu93pLN",imgAspectRatio:"tIDxbbb0",hover:"MXa_Fvst",hotMask:"ZNnEuoIx",hotBottomInfo:"DzD5gTdY",hotCount:"PI_YRTgM",hotText:"_FSjEjz0",hotDuration:"bDPIenef",coverBg:"yCZK873D",coverMask:"HS_xtX97",cardInfoContainer:"eHJ6sWzB",transparent:"N6iRTJrK",decs:"bWzvoR9D",userText:"cFBFnzvk",userTextContent:"v2EXCtbT",userName:"i1udsuGn",text:"H0ZV35Qb",marginRight:"kGiKw5ui",highlightTag:"fNbKQpbC",highlightTagWithoutMarginRight:"L9x6LbYL",divider:"TGGwK4S0",interactiveBox:"uvLZJzu_",contents:"uvbktBRs",icon:"os6QELZF",barContainer:"jOEMaHXF",barIcon:"t3FiK6uZ",barText:"JrUsR5HS",barDivide:"fbxmM1V3",barDesc:"JoNaf7Md",createTime:"RIr_dcq4",hasMarginRight:"a9pGU2CK",flexColumn:"K7AQ1qf_",needScale:"qitm_ReH",imageChange:"nG23Syh1",at:"usZ3A4ca",report:"WSk_EDgD",bottom:"UN0kFYlU",bigCard:"MOOYT7l5",isBigCardCutVideo:"l3knLhM1",jxThemeColor:"Cy3BHAAt",moreBtnBgChange:"Ozj4cge_"},F=l("784492"),V=l("746864"),U=l("516599"),W=l("456128"),z=l("288867"),Z=l("85599"),G=l("667557"),K={videoImage:"aEPe5XR7",videoBox:"_mZtzTNG",videoBoxUnsetBg:"RnLdibGs",img:"FzTzDfM8",gaosi:"MHUGVJJ0",imgCover:"arVEnqPE",videoInfo:"nxtM_NY2",discoverWatchLaterToast:"K1TmrJVT",inVisible:"kteHsmP9"},Y=l("689021"),$={playingCover:"ap8bVGAY",safari:"puRNIeSZ",playingCoverInner:"ZkyW_Mff"};let q=()=>(0,o.jsx)("div",{className:s()($.playingCover,{[$.safari]:(0,D.G6)()}),onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsxs)("div",{className:$.playingCoverInner,children:[(0,o.jsx)(Y.WaveLineAnimation,{className:$.icon}),(0,o.jsx)("span",{children:"播放中"})]})});var Q=l("916956");let X=e=>{let{previewUrlList:i,onVideoEnded:l,onVideoStopped:t,onVideoPlaying:n,topAwemeId:o,isTopCard:r=!1}=e,s=(0,b.Iq)(e=>{let{pipWindow:i}=e;return{pipWindow:i}}),[d,u]=(0,a.useState)(!1),[c,v]=(0,a.useState)(!1),[g,m]=(0,a.useState)(!1),h=(0,a.useRef)(),p=(0,a.useRef)(0);(0,a.useEffect)(()=>{c&&(null==n||n())},[c]);let _=(0,f.Z)(e=>{v(e)}),x=(0,f.Z)(()=>{v(!0)}),w=(0,f.Z)(()=>{_(!1)}),y=(0,a.useMemo)(()=>{let e=i.length>0,l=!!(null==s?void 0:s.pipWindow);return e&&(r?d:c&&!l)},[i,c,r,d]),C=(0,a.useRef)(y);(0,a.useLayoutEffect)(()=>{!y&&C.current&&(m(!1),null==t||t(Date.now()-p.current))},[y,t]),(0,Q.C)(()=>{u(!0)},[]),(0,F.Z)(()=>{if(!r){if(k.emit(k.EVENT.JingxuanTopCard,{action:c?"pause":"play",awemeId:o,from:c?"hover_other_cover":"cancel_hover_other_cover"}),c)return k.listen(k.EVENT.JingxuanTopCard,e=>{let{action:i}=e;"pauseOtherCard"===i&&v(!1)})}},[c,r]),(0,a.useEffect)(()=>{C.current=y},[y]);let I=(0,f.Z)(()=>{null==l||l()});return{onMouseEnter:x,onMouseLeave:w,isPlay:y,isHovered:c,setIsHovered:_,onEnded:I,onPlaying:(0,f.Z)(()=>{m(!0)}),isReady:g,previewImageRef:h}},J=e=>{let{awemeInfo:i,useOuterProgress:l=!1}=e,[t,n]=(0,a.useState)(!1),[o,r]=(0,a.useState)(0),[s,d]=(0,a.useState)(0),[u,c]=(0,a.useState)(0);return(0,a.useEffect)(()=>{if(!l||!i.awemeId)return;let e=e=>{let{awemeId:l}=e;if(l!==i.awemeId)return;let t=E.Le.getConfig(E.gI.JxOuterProgress),o=(null==t?void 0:t[l])||{};(null==o?void 0:o.isWatchedEnd)||(null==o?void 0:o.progress)?(n(!0),r((null==o?void 0:o.progress)||0),d((null==o?void 0:o.startTime)||0),c((null==o?void 0:o.duration)||0)):(n(!1),r(0),d(0))};e({awemeId:i.awemeId});let t=k.listen(k.EVENT.UpdateJxOuterProgress,e);return()=>{null==t||t()}},[l,i]),{showOuterProgress:t,outerProgress:o,outerStartTime:s,outerDuration:u}};var ee="hRlVOg7l",ei="PRUt1wQg";let el=e=>{let{progress:i,outerClassName:l,onShow:t}=e,n=(0,m.x)(()=>{null==t||t()});return(0,o.jsx)("div",{ref:n,className:s()(ee,l),children:(0,o.jsx)("div",{className:ei,style:{width:`${i}%`}})})};var et=l("794593");let en=a.lazy(()=>Promise.all([l.e("42562"),l.e("5405"),l.e("47730")]).then(l.bind(l,405430)));var eo={OutSide:0,0:"OutSide",Inner:1,1:"Inner"};let ea=e=>{U.F.info(e)};var er=(0,a.forwardRef)((e,i)=>{var l;let{style:r,className:u,imageClassName:c,imgClass:v,imageSkeletonClass:f="",imgUrl:g="",children:m,onClick:h,defaultImageColor:p,onVideoStopped:x,onVideoPlaying:w,previewUrlList:y=[],width:C,height:I,fakeHorizontalInfo:j,onVideoEnded:S,isHorizontal:N=!1,isSpider:T,debugInfo:P,appendPlayerConfig:L,alt:M,awemeInfo:B,onMouseEnter:H,onMouseLeave:U,showProgressBar:Y,onPreviewChange:$,logParams:Q,showImageInSSR:ee,forceContainerCover:ei=!1,renderExtension:eo,onImgLoad:er,onLoadedData:es,priority:ed,videoImageWidth:eu,videoImageHeight:ec,decoding:ev,scene:ef,user:eg,onRef:em,disablePreview:eh=!1,disableByMoreAction:ep=!1,enableNotePreview:e_=!1,blurLightCover:ex=!1,needOperateHidden:ew=!1,isBigCard:ey=!1,isTopCard:eC=!1,isTopCardActive:eI,topAwemeId:ej,showWatchLater:eS=!1,imageReady:eN,tab:eb,enableCardHoverPreview:eT,canCancleWatchLaterOnPreview:eE,withBlurBg:eP,withBlurBgPerf:eL,enableImageX:ek,scrollContainerRef:eM,reuseConfig:eA,showAiEntry:eR,onClickAiEntry:eD,abTestData:eB,onClickPipIcon:eO,isPipPlaying:eH,dislikeCoverVisible:eF,useOuterProgress:eV=!1,forceHiddenOuterProgress:eU=!1}=e,eW=(0,a.useRef)(!1),ez=(0,b.Iq)(e=>{let{pipWindow:i,isWebMiniWin:l}=e;return{pipWindow:i,isWebMiniWin:l}}),[eZ,eG]=(0,a.useState)(null),[eK,eY]=(0,a.useState)(null),e$=(null==B?void 0:B.awemeType)===V.e.Note,{showOuterProgress:eq,outerProgress:eQ,outerStartTime:eX,outerDuration:eJ}=J({awemeInfo:B,useOuterProgress:eV}),{setIsHovered:e0,isPlay:e1,onMouseEnter:e2,onMouseLeave:e3,onEnded:e7,onPlaying:e4,isReady:e5,previewImageRef:e6,isHovered:e8}=X({previewUrlList:y,onVideoStopped:x,onVideoEnded:S,onVideoPlaying:w,isTopCard:eC,topAwemeId:ej}),[e9,ie]=(0,a.useState)(e1),ii=(0,a.useCallback)(()=>{if(null==h||h(),(null==y?void 0:y.length)!==0)e0(!1)},[e0,h,y]);(0,a.useEffect)(()=>{var e,i,l;let t=(null===(e=E.Le.getConfig(E.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1;(null===(l=window)||void 0===l?void 0:null===(i=l.__QUICK_PLAYER)||void 0===i?void 0:i.player)||t?ie(!1):ie(e1)},[e1]),(0,F.Z)(()=>{if(eC){var e,i,l;let t=(null===(e=E.Le.getConfig(E.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,n=null===(l=window)||void 0===l?void 0:null===(i=l.__QUICK_PLAYER)||void 0===i?void 0:i.player;ie(e1&&!!eI&&!(null==ez?void 0:ez.pipWindow)&&!t&&!n)}},[eC,eI,e1,null==ez?void 0:ez.pipWindow]),(0,a.useEffect)(()=>{if(eC){let e=k.listen(k.EVENT.videoPause,()=>{ie(!1)}),i=k.listen(k.EVENT.exitModalVideo,()=>{ie(e1&&!!eI&&!(null==ez?void 0:ez.pipWindow))});return()=>{null==e||e(),null==i||i()}}},[eC,eI,e1,null==ez?void 0:ez.pipWindow]);let il=(!(0,D.vU)()||B)&&e9&&(null==y?void 0:y.length)>0;(0,a.useEffect)(()=>{null==$||$(il)},[il]);let{isiPad:it}=(0,_.X)(),{isWebMiniWin:io=!1}=(0,b.Iq)(e=>{let{isWebMiniWin:i}=e;return{isWebMiniWin:i}}),ia=(0,a.useCallback)(()=>{e2(),null==H||H()},[e2,H,io]),ir=(0,a.useCallback)(()=>{e3(),null==U||U()},[e3,U]);(0,a.useEffect)(()=>{if(eZ&&!ep&&!eT&&!it){let e=R.mouseEnter(eZ,ia,!0),i=R.mouseLeave(eZ,ir);return()=>{e(),i()}}},[eZ,ep,eT,it,ia,ir]),(0,a.useImperativeHandle)(i,()=>({enter(){eZ&&!ep&&ia()},leave(){eZ&&!ep&&ir()}}),[eZ,ep,ia,ir]),(0,a.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&ir()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[ir]),(0,a.useEffect)(()=>{io&&ir()},[io]);let is=(e8||il)&&eS&&(0,G.D)(B)&&!eF,id=(0,a.useMemo)(()=>{let e=(0,A.yW)();return(0,n._)((0,t._)({},Q),{enter_from:e,enter_from_merge:e,tab_name:null!=eb?eb:e,click_method:`${e}_preview`})},[Q]),iu=(0,a.useMemo)(()=>eE?(0,n._)((0,t._)({},B),{watchLaterInfo:null}):B,[eE,B]),ic=(0,a.useMemo)(()=>({watchLaterAwemeInfo:iu,user:eg}),[iu,eg]),iv=(0,a.useCallback)(()=>{var e,i,l,t;if(!eW.current)eW.current=!0,et.Z.report("pc_theme_progress_bar_show",{enter_from:(0,A.yW)(),enter_from_merge:(0,A.yW)(),enter_method:"",tab_name:null==Q?void 0:Q.tab_name,sub_tab_name:null==Q?void 0:Q.sub_tab_name,aweme_type:null==Q?void 0:null===(e=Q.awemeInfo)||void 0===e?void 0:e.awemeType,group_id:null==Q?void 0:null===(i=Q.awemeInfo)||void 0===i?void 0:i.awemeId,author_id:null==Q?void 0:null===(t=Q.awemeInfo)||void 0===t?void 0:null===(l=t.authorInfo)||void 0===l?void 0:l.uid,item_duration_ms:eJ})},[Q,eJ]);return(0,o.jsxs)("div",{style:r,onClick:ii,className:s()(K.videoImage,u,"videoImage"),ref:e=>{eG(e),null==em||em(e)},children:[(0,o.jsxs)("div",{className:s()(K.videoBox,{[K.videoBoxUnsetBg]:!il}),ref:e=>{eY(e)},children:[(0,o.jsx)(W.Q,{skeletonStyle:{background:p},className:s()(c,{[K.inVisible]:eC&&!eI}),imgClass:s()(K.img,v,{[K.imgCover]:ei,[K.gaosi]:eh&&!(0,D.G6)()}),skeletonClass:f,src:g,isPreviewing:e5&&il,isSpider:T,alt:M,showImageInSSR:ee,imageReady:eN,onHandleImgLoad:er,priority:ed,width:eu,height:ec,decoding:ev,blurLightCover:ex,withBlurBgPerf:eL,withBlurBg:eP,imgUrlList:(null==B?void 0:null===(l=B.video)||void 0===l?void 0:l.coverUrlList)||[],enableImageX:ek,scrollContainerRef:eM}),il&&!eh&&(!e$||e_)&&(0,o.jsx)(d.SV,{Slardar:(0,O.f5)(),children:(0,o.jsx)(a.Suspense,{fallback:(0,o.jsx)("div",{}),children:(0,o.jsx)(en,{startTime:eq?eX:void 0,isTopCardActive:eI,needOperateHidden:ew,previewUrlList:y||[],isHorizontal:N,onReady:e4,onLoadedData:es,onEnded:e7,ratio:I/C,fakeHorizontalInfo:j,showProgressBar:Y,ref:e6,logParams:Q,awemeInfo:B,appendPlayerConfig:L,container:eZ,coverContainer:eK,renderExtension:eo,forceContainerCover:ei,scene:ef,user:eg,isTopCard:eC,isBigCard:ey,reuseConfig:eA,isShowWatchLater:is&&eC&&!!(null==eB?void 0:eB.jingxuanCover169),useNewControlIcon:eC&&!!(null==eB?void 0:eB.jingxuanCover169),watchLaterProps:ic,enableNote:!0,pip:{show:"discover"===ef,onClick:()=>{null==eO||eO()}}})})}),il&&e$&&(null==eo?void 0:eo({type:V.e.Note})),(0,D.vU)()&&(null==eo?void 0:eo()),!il&&(0,o.jsx)("div",{className:s()(K.videoInfo),children:a.Children.toArray(m).map(e=>{var i;if((null==e?void 0:null===(i=e.props)||void 0===i?void 0:i.slot)===1)return e})}),is&&!(eC&&(null==eB?void 0:eB.jingxuanCover169))&&(0,o.jsx)(Z.nf,{awemeInfo:iu,isActive:!0,isPreview:!0,isLogin:null==eg?void 0:eg.isLogin,loginDispatch:null==eg?void 0:eg.dispatch,logParams:id,toast:e=>ea({text:e,className:eE?K.discoverWatchLaterToast:""}),canCancleWatchLaterOnPreview:eE}),eH&&!eF&&(0,o.jsx)(q,{}),eq&&!eU&&!il&&(0,o.jsx)(el,{onShow:iv,progress:eQ})]}),a.Children.toArray(m).map(e=>{var i;if((null==e?void 0:null===(i=e.props)||void 0===i?void 0:i.slot)===0)return e}),P&&(0,o.jsx)(z.W,{req:null==P?void 0:P.web_debug_req,video:null==P?void 0:P.client_rec_debug_info,isLeft:!1,showPanelRightside:!0})]})}),es=l("881155"),ed=l("643728"),eu=l("254897"),ec=l("964374"),ev=l("612075"),ef={videoCoverContainer:"UVozwOjM",weeklyRecommendTag:"v8Eq4MV4",topContain:"Rmj61Lln",tag:"U0Kc5fVM",icon:"VzYy3NPA",homeTag:"EnxOJUbc",homeTagText:"Tu_AoxtC",homeTagHot:"FN6VbMH0",homeTagRank:"KXiXPh4W",homeTagContainer:"LTe9QCEO",time:"enTvYUph",likes:"x7P__y2r"};let eg=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:10,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("path",{d:"M.616 4.435a.75.75 0 0 1 0-1.292l3.622-2.135a1.5 1.5 0 0 1 1.524 0l3.622 2.135a.75.75 0 0 1 0 1.292L5.762 6.57a1.5 1.5 0 0 1-1.524 0L.616 4.435z",fill:"#fff"}),(0,o.jsx)("path",{d:"M.07 5.785a.5.5 0 0 1 .684-.177l3.738 2.204a1 1 0 0 0 1.016 0l3.738-2.204a.5.5 0 1 1 .508.862L6.016 8.673a2 2 0 0 1-2.032 0L.246 6.47a.5.5 0 0 1-.177-.685z",fill:"#fff"}),(0,o.jsx)("path",{d:"M.754 7.858a.5.5 0 1 0-.508.862l3.738 2.203a2 2 0 0 0 2.032 0L9.754 8.72a.5.5 0 1 0-.508-.862l-3.738 2.204a1 1 0 0 1-1.016 0L.754 7.857z",fill:"#fff"})]}))),em=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("g",{filter:"url(#ic_home_note_svg__filter0_d_3305_2957)",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.917 1.75c-.645 0-1.167.522-1.167 1.167V8.75c0 .644.522 1.167 1.167 1.167H8.75c.644 0 1.167-.523 1.167-1.167V2.917c0-.645-.523-1.167-1.167-1.167H2.917zm2.333 10.5a1.167 1.167 0 0 1-1.167-1.167H8.75a2.333 2.333 0 0 0 2.333-2.333V4.083c.645 0 1.167.523 1.167 1.167v4.667a2.333 2.333 0 0 1-2.333 2.333H5.25z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"ic_home_note_svg__filter0_d_3305_2957",x:-1,y:-1,width:16,height:16,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_2957"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_3305_2957",result:"shape"})]})})]}))),eh=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsxs)("g",{filter:"url(#ic_home_collect_svg__filter0_d_3305_2200)",fill:"#fff",clipPath:"url(#ic_home_collect_svg__clip0_3305_2200)",children:[(0,o.jsx)("path",{d:"M11.922 5.212a.63.63 0 0 0 .293-.545.631.631 0 0 0-.292-.545L7.275 1.355a.495.495 0 0 0-.511-.001L2.079 4.12a.63.63 0 0 0-.294.544c0 .23.112.44.292.546l4.65 2.774c.16.095.352.096.512 0l4.683-2.773z"}),(0,o.jsx)("path",{d:"M12.145 6.7c.148.297.053.673-.211.839l-4.686 2.937a.495.495 0 0 1-.532 0L2.068 7.582c-.265-.165-.36-.54-.214-.838.147-.298.48-.406.745-.24L6.98 9.231l4.419-2.77c.264-.166.598-.06.745.238z"}),(0,o.jsx)("path",{d:"M11.934 9.872c.264-.166.359-.541.211-.839-.147-.297-.48-.404-.745-.238l-4.42 2.77L2.6 8.835c-.265-.165-.598-.057-.745.241-.147.298-.051.673.214.838l4.648 2.896a.495.495 0 0 0 .532 0l4.686-2.938z"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"ic_home_collect_svg__filter0_d_3305_2200",x:".785",y:".283",width:12.43,height:13.604,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_2200"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_3305_2200",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"ic_home_collect_svg__clip0_3305_2200",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h14v14H0z"})})]})]}))),ep=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("path",{d:"M1.283 7a2.917 2.917 0 0 1 3.792-2.783.583.583 0 1 0 .35-1.113 4.083 4.083 0 1 0 0 7.793.583.583 0 0 0-.35-1.114A2.917 2.917 0 0 1 1.283 7z",fill:"#fff"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.8 2.917a4.083 4.083 0 1 0 0 8.166 4.083 4.083 0 0 0 0-8.166zM6.883 7a2.917 2.917 0 1 1 5.834 0 2.917 2.917 0 0 1-5.834 0z",fill:"#fff"})]})));var e_=l("327306"),ex=a.memo(e=>{var i,l,t,n,a;let{style:r,className:d,showTag:u,tagName:c,showTime:v,time:f,showLikes:g,likes:m,showIntegrationTag:h,showCooperationTag:p=!0,showHomeNote:_,showHomeCollect:x,showHomeHot:w,awemeInfo:y,scene:C}=e,I=(0,e_._)(),{userInfo:S}=(0,ev.useUserContext)(),{uid:N=""}=null!==(n=null==S?void 0:S.info)&&void 0!==n?n:{},b=(0,es.$m)(y,(null==y?void 0:null===(i=y.authorInfo)||void 0===i?void 0:i.uid)===N),T=(0,ed.$)({awemeInfo:y,abTestData:I});return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:r,className:s()(ef.videoCoverContainer,d),children:[T&&(0,o.jsx)(ed.n,{scene:"videoCard",className:ef.weeklyRecommendTag,awemeInfo:y}),!T&&(0,o.jsx)(es.zx,{type:b}),!T&&!b&&(0,o.jsxs)("div",{className:s()(ef.topContain),children:[h&&(0,o.jsxs)("div",{className:s()(ef.homeTag),children:[(0,o.jsx)(j.Z,{width:10,height:12,viewBox:"0 0 10 12",src:eg,className:ef.icon}),(0,o.jsx)("span",{className:ef.homeTagText,children:"合集"})]}),u&&c&&(0,o.jsx)("div",{className:s()(ef.tag),children:c}),p&&!h&&!(u&&c)&&!_&&!x&&!w&&Number(null!==(a=null==y?void 0:null===(t=y.cooperationInfo)||void 0===t?void 0:null===(l=t.cooperationCreators)||void 0===l?void 0:l.length)&&void 0!==a?a:0)>1&&(0,o.jsxs)("div",{className:s()(ef.homeTag),children:[(0,o.jsx)(j.Z,{width:14,height:14,viewBox:"0 0 14 14",src:ep,className:ef.icon}),(0,o.jsx)("span",{className:ef.homeTagText,children:"共创"})]})]}),!T&&!b&&(0,o.jsxs)("div",{className:s()(ef.homeTagContainer),children:[_&&(0,o.jsxs)("div",{className:s()(ef.homeTag),children:[(0,o.jsx)(j.Z,{width:14,height:14,viewBox:"0 0 14 14",src:em,className:ef.icon}),(0,o.jsx)("span",{className:ef.homeTagText,children:"图文"})]}),x&&(0,o.jsxs)("div",{className:s()(ef.homeTag),children:[(0,o.jsx)(j.Z,{width:14,height:14,viewBox:"0 0 14 14",src:eh,className:ef.icon}),(0,o.jsx)("span",{className:ef.homeTagText,children:"合集"})]}),w&&(0,o.jsxs)("div",{className:s()(ef.homeTag,ef.homeTagHot),children:[(0,o.jsx)("span",{className:ef.homeTagText,children:"热榜"}),(0,o.jsx)("span",{className:ef.homeTagRank,children:"TOP"})]})]}),v&&(0,o.jsx)("div",{className:s()(ef.time),children:f}),g&&(0,o.jsxs)("div",{className:s()(ef.likes),children:[(0,o.jsx)(eu.z,{initialMounted:!!E.Le.getConfig(E.gI.isCSRRender),style:"discover"===C?{marginRight:"2px"}:{fontSize:"20px",marginRight:"2px"},svg:(0,o.jsx)(ec.Z,{className:ef.icon})}),(0,o.jsx)("span",{children:m})]})]})})}),ew=l("936681");let ey=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsxs)("g",{clipPath:"url(#ic_hot_svg__clip0_3118_121700)",children:[(0,o.jsx)("mask",{id:"ic_hot_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:1,y:-2,width:10,height:14,children:(0,o.jsx)("path",{d:"M1.5-1.05h9.208v8.233a4.516 4.516 0 0 1-4.516 4.516A4.692 4.692 0 0 1 1.5 7.007V-1.05z",fill:"#C4C4C4"})}),(0,o.jsxs)("g",{mask:"url(#ic_hot_svg__a)",children:[(0,o.jsx)("path",{d:"M9.393 3.552c.961 1.062 1.316 2.125 1.316 3.187 0 1.417-.068 1.797 0 1.771-1.859.738-5.123-.93-6.021-3.187-.899-2.258.38-4.25 2.353-5.313.078-.041.126.028.126.133 0 1.638 1.265 2.346 2.226 3.409z",fill:"url(#ic_hot_svg__paint0_linear_3118_121700)"}),(0,o.jsx)("path",{d:"M10.545 8.87c.191-.348.557 1.057.164-1.226.354-1.967-1.142-2.745-2.125-2.321-1.645.708-2.48.708-3.542.354-.69-.23-1.638-.708-1.934-1.77-.329 1.416.66 4.065 2.157 4.964 1.497.898 5.09.348 5.28 0z",fill:"url(#ic_hot_svg__paint1_linear_3118_121700)"}),(0,o.jsx)("path",{d:"M2.775 3.338C2.534 3.58 1.5 4.825 1.5 6.815c0 1.99 1.063 4.884 4.604 4.884 3.542 0 4.931-1.406 5.313-3.255-3.188 1.771-5.656 0-6.021-.354-.9-.872-2.125-2.411-2.338-4.604-.029-.301-.042-.39-.283-.148z",fill:"url(#ic_hot_svg__paint2_linear_3118_121700)"})]})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"ic_hot_svg__paint0_linear_3118_121700",x1:4.536,y1:".278",x2:8.934,y2:6.742,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{offset:".021",stopColor:"#FADF32"}),(0,o.jsx)("stop",{offset:".451",stopColor:"#EB9B46"}),(0,o.jsx)("stop",{offset:".782",stopColor:"#EB5854"})]}),(0,o.jsxs)("linearGradient",{id:"ic_hot_svg__paint1_linear_3118_121700",x1:3.616,y1:4.788,x2:11.598,y2:9.516,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#FFC533"}),(0,o.jsx)("stop",{offset:".436",stopColor:"#F26461"}),(0,o.jsx)("stop",{offset:".809",stopColor:"#FF0544"})]}),(0,o.jsxs)("linearGradient",{id:"ic_hot_svg__paint2_linear_3118_121700",x1:9.195,y1:11.126,x2:1.577,y2:4.974,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{offset:".134",stopColor:"#FA0951"}),(0,o.jsx)("stop",{offset:".354",stopColor:"#FA3E65"}),(0,o.jsx)("stop",{offset:".881",stopColor:"#F2AE49"}),(0,o.jsx)("stop",{offset:".998",stopColor:"#FAC032"})]}),(0,o.jsx)("clipPath",{id:"ic_hot_svg__clip0_3118_121700",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z"})})]})]}))),eC=e=>{let{awemeInfo:i,isModalPlayingCurrentVideo:l,onClickPipIcon:t}=e,{isWebMiniWin:n,pipWindow:o,isListenVideoMiniWin:r}=(0,b.Iq)(e=>{let{isWebMiniWin:i,pipWindow:l,isListenVideoMiniWin:t}=e;return{isWebMiniWin:i,pipWindow:l,isListenVideoMiniWin:t}}),s=(0,a.useMemo)(()=>(n||r)&&l,[n,i,l,r]),[d,u]=(0,a.useState)(!1),c=d||s;return(0,a.useEffect)(()=>{if(o){let e=()=>{u(!1)};return o.addEventListener("pagehide",e),()=>{o.removeEventListener("pagehide",e)}}},[o]),(0,a.useEffect)(()=>{!s&&u(!1)},[s]),{isPipPlaying:c,handleClickPipIcon:()=>{u(!0),null==t||t()}}};var eI=l("14108");let ej=(e,i)=>{var l,t,n,o,r,s,d,u,c,v;let f=!!e.authorInfo.roomId,g=(0,a.useMemo)(()=>{var l,t,n,o,a;return{web_rid:null===(n=e.authorInfo)||void 0===n?void 0:null===(t=n.roomData)||void 0===t?void 0:null===(l=t.owner)||void 0===l?void 0:l.web_rid,room_id:null===(o=e.authorInfo)||void 0===o?void 0:o.roomId,request_id:null==e?void 0:e.logPb,anchor_id:null===(a=e.authorInfo)||void 0===a?void 0:a.uid,live_position:i}},[null===(l=e.authorInfo)||void 0===l?void 0:l.uid,null===(o=e.authorInfo)||void 0===o?void 0:null===(n=o.roomData)||void 0===n?void 0:null===(t=n.owner)||void 0===t?void 0:t.web_rid,null===(r=e.authorInfo)||void 0===r?void 0:r.roomId,null==e?void 0:e.logPb,i]);return{isAuthorLiving:f,handleJumpToLiveRoom:(0,a.useCallback)(()=>{var l,t,n,o,a;let r=(0,eI.cc)({anchor_id:null===(n=e.authorInfo)||void 0===n?void 0:null===(t=n.roomData)||void 0===t?void 0:null===(l=t.owner)||void 0===l?void 0:l.id_str,web_rid:null===(a=e.authorInfo.roomData)||void 0===a?void 0:null===(o=a.owner)||void 0===o?void 0:o.web_rid,enter_from_merge:"web_homepage_discover",enter_method:"web_video_card",enter_method_temai:"web_video_card",action_type:"click",room_id:e.authorInfo.roomId,request_id:null==e?void 0:e.logPb,live_position:i,__is_replaced_live__:(null==e?void 0:e.__is_replaced_live__)?"1":"0"});window.open(r,"_blank","noopener")},[null===(u=e.authorInfo)||void 0===u?void 0:null===(d=u.roomData)||void 0===d?void 0:null===(s=d.owner)||void 0===s?void 0:s.id_str,null===(v=e.authorInfo.roomData)||void 0===v?void 0:null===(c=v.owner)||void 0===c?void 0:c.web_rid,e.authorInfo.roomId,null==e?void 0:e.logPb,i]),liveParams:g}};var eS="GqvoOOqQ",eN="gyc_BqdH",eb="vYT08osC";let eT=e=>{let{onClick:i}=e;return(0,o.jsxs)("div",{className:eS,onClick:i,children:[(0,o.jsx)("div",{className:eN,children:(0,o.jsx)(Y.default,{size:7})}),(0,o.jsx)("div",{className:eb,children:"正在直播"})]})};var eE=l("128231"),eP=l.n(eE),eL=l("161045");let ek=(e,i)=>i&&1e-4>Math.abs(e/i-16/9),eM=e=>{let{awemeInfo:i,isBigCard:l,scene:t,abTestData:n,ref:o}=e,[r,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{var e,a,r;if("discover"!==t||!l||(null==i?void 0:i.webCardType)||!i.pcBlockedAreaRatio||(null!==(r=null==i?void 0:i.createTime)&&void 0!==r?r:0)*1e3<=17304192e5||!(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.height)||!(null==i?void 0:null===(a=i.video)||void 0===a?void 0:a.width)||ek(i.video.width,i.video.height))return;let d=eP()(()=>{if(o.current&&i&&i.video){let e=o.current.getBoundingClientRect(),{width:l}=e,t=(null==n?void 0:n.jingxuanCover169)?e.height:e.height-90;if(l/t<i.video.width/i.video.height){let e=i.pcBlockedAreaRatio,n=(1-i.video.height/i.video.width*l/t)/2;if(!e){s(n<.05);return}if(e&&e.length<=5)return;let o=Math.min(null==e?void 0:e[6],100-(null==e?void 0:e[7]))-100*n>=1;s(n<.05&&o)}if(l/t>i.video.width/i.video.height){let e=i.pcBlockedAreaRatio,n=(1-i.video.width/i.video.height*t/l)/2;if(!e){s(n<.05);return}if(e&&e.length<=5)return;let o=Math.min(100-(null==e?void 0:e[8]),null==e?void 0:e[9])-100*n>=1;s(n<.05&&o)}}},0);d();let u=eL.Z.bind(o.current,d);return()=>u()},[t,l,null==i?void 0:i.awemeId,n]),r},eA=(0,c.ZP)(()=>l.e("45937").then(l.bind(l,654402)),{ssr:!1,resolveComponent:e=>{let{More:i}=e;return i}}),eR=e=>{let{hotInfo:i}=e;return(0,o.jsx)("div",{className:s()(H.hotMask),children:(0,o.jsxs)("div",{className:H.hotBottomInfo,children:[(null==i?void 0:i.header)?(0,o.jsxs)("div",{className:H.hotCount,children:[(0,o.jsx)("img",{src:"//p-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/hot.png",alt:"热点icon"}),(0,o.jsx)("span",{className:H.hotText,children:null==i?void 0:i.hotTitle})]}):null,(null==i?void 0:i.footer)?(0,o.jsx)("span",{className:s()(H.hotDuration,H.hotTextHide),children:null==i?void 0:i.footer}):null]})})};var eD=e=>{var i,l,r,c,F,V,U,W,z,Z,G,K,Y,$,q,Q,X,J,ee,ei,el,et;let{style:en,className:ea,imageClassName:es,imgClass:ed,imageSkeletonClass:eu,imageBoxClassName:ec,cardInfoClassName:ev,cardIndex:ef,description:eg,userName:em,likesCount:eh,videoTime:ep,userHref:e_,userHrefTarget:eI,imgUrl:eS,onClick:eN,onShow:eb,onMouseEnter:eE,onMouseLeave:eP,width:eL=0,height:ek=0,showLikes:eD=!0,fakeHorizontalInfo:eB,previewUrlList:eO,isHorizontal:eH,showIntegrationTag:eF,showHomeNote:eV,showHomeHot:eU,awemeInfo:eW,showHotInfo:ez,hotInfo:eZ,url:eG,isSpider:eK,debugInfo:eY,appendPlayerConfig:e$,showHighLightTag:eq=!1,isShowCreateTime:eQ=!1,isShowDescription:eX=!0,blurLightCover:eJ=!1,isNameFirst:e0=!1,willJump:e1=!1,videoInteractionTags:e2=[],showProgressBar:e3,onVideoPlaying:e7,onVideoStopped:e4,coverMask:e5,onVideoImageMouseEnter:e6,onVideoImageMouseLeave:e8,onLoadedData:e9,tab:ie,videoImageStyle:ii,showImageInSSR:il,forceContainerCover:it=!1,renderExtension:io,useStyleInUserLink:ia=!1,children:ir,onCoverLoad:is,videoImageHeight:id,videoImageWidth:iu,videoImagePriority:ic,decoding:iv,scene:ig,user:im,abTestData:ih,enableNotePreview:ip,needOperateHidden:i_,hasNoFollow:ix,isBigCard:iw=!1,isTopCard:iy=!1,isTopCardActive:iC,topAwemeId:iI,showMore:ij=!1,showWatchLater:iS,logParams:iN,imageReady:ib,enableCardHoverPreview:iT=!1,onMorePopperShow:iE,onMorePopperHidden:iP,withBlurBg:iL,disabledALink:ik,enableImageX:iM,scrollContainerRef:iA,reuseConfig:iR,onClickAiEntry:iD,onClickPipIcon:iB,isModalPlayingCurrentVideo:iO}=e,{isListenVideoMiniWin:iH}=(0,b.Iq)(e=>{let{isListenVideoMiniWin:i}=e;return{isListenVideoMiniWin:i}}),[iF,iV]=(0,a.useState)(!1),iU=(0,a.useRef)(null),iW=(0,a.useRef)(null),[iz,iZ]=(0,a.useState)(eh),[iG,iK]=(0,a.useState)(null!==(el=null===(l=E.Le.getConfig(E.gI.CollectStatusCache))||void 0===l?void 0:null===(i=l[null==eW?void 0:eW.awemeId])||void 0===i?void 0:i.count)&&void 0!==el?el:null==eW?void 0:null===(r=eW.stats)||void 0===r?void 0:r.collectCount),[iY,i$]=(0,a.useState)(null!==(et=null===(V=E.Le.getConfig(E.gI.FollowStatusCache))||void 0===V?void 0:null===(c=V[null==eW?void 0:null===(F=eW.authorInfo)||void 0===F?void 0:F.uid])||void 0===c?void 0:c.followStatus)&&void 0!==et?et:null==eW?void 0:null===(U=eW.authorInfo)||void 0===U?void 0:U.followStatus),[iq,iQ]=(0,a.useState)(!1),[iX,iJ]=(0,a.useState)({cover:{done:!1,success:!1},node:!1}),[i0,i1]=(0,a.useState)(!1),{isPipPlaying:i2,handleClickPipIcon:i3}=eC({awemeInfo:eW,isModalPlayingCurrentVideo:iO,onClickPipIcon:iB}),i7=i0||i2,[i4,i5]=(0,a.useState)(!1),[i6,i8]=(0,a.useState)(!1),i9=(0,a.useRef)(0),le=a.useMemo(()=>{var e,i,l;return`/root/live/${null===(l=eW.authorInfo)||void 0===l?void 0:null===(i=l.roomData)||void 0===i?void 0:null===(e=i.owner)||void 0===e?void 0:e.web_rid}`},[null===(Z=eW.authorInfo)||void 0===Z?void 0:null===(z=Z.roomData)||void 0===z?void 0:null===(W=z.owner)||void 0===W?void 0:W.web_rid]),li=a.useCallback(()=>{if(le){var e,i,l,o,a,r,s,d,u;let c=`${le}?${g.stringify((0,n._)((0,t._)({},iN),{anchor_id:null===(l=eW.authorInfo)||void 0===l?void 0:null===(i=l.roomData)||void 0===i?void 0:null===(e=i.owner)||void 0===e?void 0:e.id_str,web_rid:null===(a=eW.authorInfo.roomData)||void 0===a?void 0:null===(o=a.owner)||void 0===o?void 0:o.web_rid,enter_from_merge:"web_homepage_discover",enter_method:"web_video_card",enter_method_temai:"web_video_card",action_type:"click",room_id:eW.authorInfo.roomId,request_id:null==eW?void 0:eW.logPb,live_position:ef,__is_replaced_live__:(null==eW?void 0:eW.__is_replaced_live__)?"1":"0"}))}`;(0,N.X)({href:c,reusePlayer:0,webRid:null===(d=eW.authorInfo)||void 0===d?void 0:null===(s=d.roomData)||void 0===s?void 0:null===(r=s.owner)||void 0===r?void 0:r.web_rid,abtestData:ih,roomId:null===(u=eW.authorInfo)||void 0===u?void 0:u.roomId,usePreCreate:!0})}},[le,iN,null===(Y=eW.authorInfo)||void 0===Y?void 0:null===(K=Y.roomData)||void 0===K?void 0:null===(G=K.owner)||void 0===G?void 0:G.web_rid,null===(Q=eW.authorInfo)||void 0===Q?void 0:null===(q=Q.roomData)||void 0===q?void 0:null===($=q.owner)||void 0===$?void 0:$.id_str,null===(J=eW.authorInfo.roomData)||void 0===J?void 0:null===(X=J.owner)||void 0===X?void 0:X.web_rid,eW.authorInfo.roomId,null==eW?void 0:eW.logPb]),{isAuthorLiving:ll,handleJumpToLiveRoom:lt,liveParams:ln}=ej(eW,ef,li);(0,u.C)(T.w3.components.video_card);let lo=(0,a.useMemo)(()=>(null==eW?void 0:eW.createTime)>0?(0,P.MH)((null==eW?void 0:eW.createTime)*1e3):"",[null==eW?void 0:eW.createTime]),la=(0,m.Y)(()=>{h.logInstance.sendLog("postTimeShow",{enter_from:(0,L.mo)(),group_id:eW.awemeId,post_time:lo})});(0,a.useEffect)(()=>{let e=y.a.addCb(e=>{var i,l,t;let{action:n,diggCount:o,awemeId:a,actionUid:r,followStatus:s,collectCount:d}=e;(null==eW?void 0:eW.awemeId)===a&&(iZ((0,P.qe)(null!=o?o:null==eW?void 0:null===(l=eW.stats)||void 0===l?void 0:l.diggCount)),iK(null!=d?d:null==eW?void 0:null===(t=eW.stats)||void 0===t?void 0:t.collectCount)),("follow"===n||"unFollow"===n)&&r===(null==eW?void 0:null===(i=eW.authorInfo)||void 0===i?void 0:i.uid)&&i$(s)});return()=>{e()}},[eW]);let lr=(0,f.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!!iy)k.emit(k.EVENT.JingxuanTopCard,{action:"topCardReplace",awemeId:iI,cancelReplace:e})}),ls=(0,m.x)(()=>iJ(e=>(0,n._)((0,t._)({},e),{node:!0})));(0,a.useEffect)(()=>{iX.node&&(null==eb||eb())},[iX.node,eb]);let ld=(0,a.useCallback)(e=>{let i=void 0===e||e;iJ(e=>(0,n._)((0,t._)({},e),{cover:{success:i,done:!0}}))},[eS]);(0,a.useEffect)(()=>{if(!!iX.cover.done&&!!iX.node)null==is||is(iX.cover.success,eS)},[iX.cover.done,iX.node,iX.cover.success,is,eS]);let lu=eq&&(null==eW?void 0:eW.insertId),lc=eq&&(0,M.F)(iY)&&!lu,lv=eq&&iY!==p.$u.FollowEach&&iY!==p.$u.Followed&&!lu&&(null==e2?void 0:e2[0]),lf=()=>{e8&&e8(),null==eP||eP()},lg=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!i7&&iT){let e=R.mouseEnter(ls.current,()=>{var e,i;iT&&(null==lg||null===(i=lg.current)||void 0===i||null===(e=i.enter)||void 0===e||e.call(i))},!0),i=R.mouseLeave(ls.current,()=>{var e,i;iT&&(null==lg||null===(i=lg.current)||void 0===i||null===(e=i.leave)||void 0===e||e.call(i))});return()=>{e(),i()}}},[i7,iT]);let lm=(0,a.useRef)({is_first_large_card_outflow:iw?1:0});lm.current.is_first_large_card_outflow=iw?1:0;let lh=eM({awemeInfo:eW,isBigCard:iw,scene:ig,ref:ls}),{isiPad:lp}=(0,_.X)(),l_="discover"===ig,lx=l_&&!!(null==ih?void 0:ih.themeColorOptimize)&&!iw,lw=(0,a.useCallback)(()=>{i1(!0)},[]),ly=(0,a.useCallback)(()=>{i1(!1)},[]),lC=(0,a.useCallback)(()=>{clearTimeout(i9.current),i8(!0)},[]),lI=(0,a.useCallback)(()=>{clearTimeout(i9.current),i9.current=setTimeout(()=>{i8(!0)},250)},[]),lj=(0,a.useCallback)(()=>{var e,i;i5(!0),null==lg||null===(i=lg.current)||void 0===i||null===(e=i.leave)||void 0===e||e.call(i),iV(!0)},[]),lS=(0,a.useCallback)(()=>{i5(!1),iV(!1)},[]),lN=(0,a.useCallback)(()=>{iV(!0)},[]);return(0,a.useMemo)(()=>({is_first_large_card_outflow:iw?1:0}),[iw]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.B,{target:"_blank",rel:`noopener noreferrer${ix?" nofollow":""}`,href:eG,isNeedSeoOpt:!0,className:s()(H.videoCard,ea,{[H.hover]:i6,otherVideoCard:!l_,[H.bigCard]:iw,[H.isBigCardCutVideo]:lh}),style:en,onClick:e=>{!e1&&e.preventDefault(),null==eN||eN(e),null==lf||lf()},isUseALink:!ik&&(null==eW?void 0:eW.isHighQuality)!==x.HighQualityStatus.NotHighQuality,onMouseEnter:lp?void 0:()=>{clearTimeout(i9.current),i8(!0)},onMouseLeave:lp?void 0:()=>{i9.current=setTimeout(()=>{i8(!1)},250)},children:[(0,o.jsxs)("div",{ref:ls,className:H.flexColumn,children:[(0,o.jsxs)(er,{abTestData:ih,onMouseEnter:()=>{e6&&e6(),null==eE||eE(),E.Le.setConfig(E.gI.VideoCardMouseOverTime,Date.now()),h.logInstance.sendLog("coverMouseover",{enter_from_merge:(0,A.yW)(),request_id:null==eW?void 0:eW.logPb,content_sdk:"video",group_id:null==eW?void 0:eW.awemeId,aweme_type:null==eW?void 0:eW.awemeType})},onMouseLeave:lf,className:s()(ec,{[H.report]:l_&&!i4&&i0}),imageClassName:s()(H.videoImg,{[H.imgAspectRatio]:l_},es),imgClass:ed,imageSkeletonClass:eu,imgUrl:eS,debugInfo:(null==eW?void 0:eW.debugInfo)||eY,width:eL,height:ek,videoImageWidth:iu,videoImageHeight:id,priority:ic,decoding:iv,fakeHorizontalInfo:eB,appendPlayerConfig:e$,previewUrlList:eO,awemeInfo:eW,isHorizontal:eH,onLoadedData:e9,onVideoPlaying:e7,onVideoStopped:e4,onPreviewChange:e=>{e?iQ(!0):iQ(!1)},showProgressBar:e3,isSpider:eK,alt:(0,D.vU)()?"":eg,style:ii,showImageInSSR:il,logParams:(0,t._)({awemeInfo:eW,tab_name:ie||""},iN),forceContainerCover:it,renderExtension:io,onImgLoad:ld,scene:ig,blurLightCover:eJ,user:im,onRef:e=>iU.current=e,disablePreview:i7,disableByMoreAction:i0,enableNotePreview:ip,needOperateHidden:i_,isBigCard:iw,isTopCard:iy,topAwemeId:iI,showWatchLater:iS,tab:ie,imageReady:ib,ref:lg,enableCardHoverPreview:iT,canCancleWatchLaterOnPreview:l_,withBlurBg:iL,withBlurBgPerf:l_,enableImageX:iM,scrollContainerRef:iA,reuseConfig:iR,showAiEntry:l_,onClickAiEntry:iD,onClickPipIcon:i3,isPipPlaying:i2,dislikeCoverVisible:i4,isTopCardActive:iC,useOuterProgress:lx,forceHiddenOuterProgress:iF,children:[(0,o.jsx)(e=>(0,o.jsx)("div",{className:s()(H.coverBg)}),{slot:eo.Inner}),!i7&&(0,o.jsx)(ex,{scene:ig,showIntegrationTag:eF,showTime:!eV,showLikes:eD,likes:iz,time:ep,slot:eo.Inner,awemeInfo:eW,showHomeNote:eV}),ez&&eZ&&!iq&&(0,o.jsx)(eR,{slot:eo.OutSide,hotInfo:eZ}),(0,o.jsx)(e=>e5?(0,o.jsx)("div",{className:s()(H.coverMask),children:e5}):null,{slot:eo.OutSide})]}),(0,o.jsx)("div",{className:s()(H.cardInfo,ev),ref:iW,children:(0,o.jsxs)("div",{className:s()(H.cardInfoContainer,{[H.transparent]:l_&&i0}),children:[eX&&!e0&&(0,o.jsx)("div",{className:s()(H.decs),children:eg}),(0,o.jsxs)("div",{className:s()(H.userText,{[H.bottom]:e0}),onClick:e=>{if(ll){li(),e.preventDefault(),e.stopPropagation();return}},children:[l_?(0,o.jsxs)("span",{className:H.userTextContent,onClick:e=>{var i;if(iH&&v.T.exit(),e.preventDefault(),e.stopPropagation(),ll){li();return}null===(i=window)||void 0===i||i.open(e_,(0,B.DT)()?"_blank":eI,"noopener")},children:[(0,o.jsxs)("span",{className:s()(H.text,{[H.marginRight]:!lc&&!lv&&!lu&&!eQ}),children:["@",(0,o.jsx)("span",{className:H.userName,children:em})]}),eQ&&!ll&&!lv&&!lu&&!lc&&(0,o.jsxs)("span",{className:s()(H.createTime,{[H.hasMarginRight]:ij}),ref:la,children:["\xa0\xb7\xa0",lo]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{onClick:e=>{var i;if(iH&&v.T.exit(),e.preventDefault(),e.stopPropagation(),ll){li();return}null===(i=window)||void 0===i||i.open(e_,(0,B.DT)()?"_blank":eI,"noopener")},className:s()(H.text,{[H.marginRight]:!lc&&!lv&&!lu&&!eQ}),children:[(0,o.jsx)("span",{className:s()(H.at),children:"@"}),(0,o.jsx)("span",{className:s()(H.userName),children:em})]}),eQ&&!ll&&!lv&&!lu&&!lc&&(0,o.jsx)("span",{className:s()(H.createTime,{[H.hasMarginRight]:ij}),ref:la,children:` \xb7 ${lo}`})]}),(lc||lu)&&(0,o.jsx)(ew.R,{abTestData:ih,className:s()(ll?H.highlightTagWithoutMarginRight:H.highlightTag,{[H.jxThemeColor]:l_&&!!(null==ih?void 0:ih.themeColorOptimize)}),type:lu?"recommended":"follow"}),lv&&(0,o.jsx)(ew.R,{abTestData:ih,className:s()(H.highlightTag,{[H.jxThemeColor]:l_&&!!(null==ih?void 0:ih.themeColorOptimize)}),type:e2[0],count:{collect:iG,comment:null==eW?void 0:null===(ee=eW.stats)||void 0===ee?void 0:ee.commentCount}[e2[0]]||0}),ll&&(0,o.jsx)(eT,{onClick:e=>{e.preventDefault(),e.stopPropagation(),h.logInstance.sendLog("liveCardClickEvent",(0,t._)({enter_method:"web_video_card",enter_from_merge:"web_homepage_discover",action_type:"click"},ln));let i=I.e.getPipWindow({scene:w.d.ListenVideo})||I.e.getPipWindow({scene:w.d.WebVideo});i&&i.close(),li()}}),ij&&(0,o.jsx)(d.SV,{Slardar:(0,O.f5)(),children:(0,o.jsx)(eA,{awemeInfo:eW,className:H.more,cardInfoContainerRef:iW,imageContainerRef:iU,onCoverHover:(null==ih?void 0:ih.innerSlideSmooth)?lw:()=>i1(!0),onCoverCancelHover:(null==ih?void 0:ih.innerSlideSmooth)?ly:()=>i1(!1),user:im,tab:ie,onMouseEnter:(null==ih?void 0:ih.innerSlideSmooth)?lC:()=>{clearTimeout(i9.current),i8(!0)},onMouseLeave:(null==ih?void 0:ih.innerSlideSmooth)?lI:()=>{clearTimeout(i9.current),i9.current=setTimeout(()=>{i8(!0)},250)},logParams:lm.current,enableCardHoverPreview:iT||l_,onPopperShow:iE,onPopperHidden:iP,onDislikeCoverShow:(null==ih?void 0:ih.innerSlideSmooth)?lj:()=>{var e,i;i5(!0),null==lg||null===(i=lg.current)||void 0===i||null===(e=i.leave)||void 0===e||e.call(i),iV(!0)},onDislikeCoverHidden:(null==ih?void 0:ih.innerSlideSmooth)?lS:()=>{i5(!1),iV(!1)},onReportCoverShow:(null==ih?void 0:ih.innerSlideSmooth)?lN:()=>{iV(!0)},onReplaceTopCard:lr})})]}),eX&&e0&&(0,o.jsx)("div",{className:s()(H.decs),children:eg}),eU&&(0,o.jsxs)("div",{className:H.barContainer,children:[(0,o.jsx)(j.Z,{className:H.barIcon,width:12,height:12,viewBox:"0 0 12 12",src:ey}),(0,o.jsxs)("span",{className:H.barText,children:["热榜：",null==eW?void 0:null===(ei=eW.hotList)||void 0===ei?void 0:ei.title]})]})]})})]}),ir]}),eK&&(0,o.jsx)(S.a,(0,n._)((0,t._)({style:ia?(0,n._)((0,t._)({},en),{width:"auto",height:"auto"}):{},href:e_,target:"_blank",isNeedSeoOpt:!0},ix?{rel:"nofollow"}:{}),{children:em}))]})}},363325:function(e,i,l){let t;l.d(i,{A:function(){return C},NN:function(){return T},Nu:function(){return N}});var n=l(520739),o=l(878389);l(779788),l(179133),l(826893),l(110006),l(675373),l(112587),l(17322),l(560401),l(779566),l(69896),l(416555),l(404948),l(209955);var a=l(567754),r=l(439837),s=l.n(r),d=l(496349),u=l(746864),c=l(598053),v=l(480596),f=l(35730),g=l(782563),m=l(150566),h=l(399796),p=l(555106),_=l(349135),x=l(816096),w=l(622995);let{COMMON_SEARCH_PARAMS:y}=d;function C(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{aweme_list:l=[],status_code:t,log_pb:n}=e||{},{filterLiveInClient:o=!1}=i||{},a=l;return(0,g.DT)()&&o&&(a=l.filter(e=>(null==e?void 0:e.aweme_type)!==u.e.LiveCard)),{statusCode:t,hasMore:!0,awemeList:(0,_.TN)({awemeList:a||[],logPb:n&&JSON.stringify(n)}),logPb:n&&JSON.stringify(n)}}let I=e=>{let i="";if(e){var l;let t=null==e?void 0:null===(l=e.request)||void 0===l?void 0:l.search,n=null==t?void 0:t.match(/vid=([0-9]+)?/);(null==n?void 0:n[1])&&(i=null==n?void 0:n[1])}else{let e=a.parse((0,m.ht)());(null==e?void 0:e.vid)&&(i=null==e?void 0:e.vid)}return i},j=e=>{var i;let l="",t=e?null==e?void 0:null===(i=e.request)||void 0===i?void 0:i.search:(0,m.ht)(),n=a.parse(t);return(null==n?void 0:n.live_insert_type)&&(l=null==n?void 0:n.live_insert_type),l},S=(e,i)=>{var l;let t="",n="",o=i?null==i?void 0:null===(l=i.request)||void 0===l?void 0:l.search:(0,m.ht)(),r=a.parse(o);return r.ug_source&&r.creative_id&&1===e&&(t=r.ug_source,n=r.creative_id),{ug_source:t,creative_id:n}};async function N(e,i){let{pullType:a,tagId:r="",count:s=10,refreshIndex:d=1,customConfig:u={},globalwid:c="",awemePcRecRawData:v={},options:p={},cancelCb:N={current:()=>{}},preFetch:b=!1,minWindow:T,launchLiveFilters:E,freeRight:P=0,viewCount:L=0,refresh_type:k,useProtobuf:M=!1,usePassThrough:A=!1,share_aweme_id:R,plugBlock:D=!1,needTranslation:B,reqCount:O}=e;v.is_client=(0,g.DT)(i),v.is_xigua_user=(0,m.CY)("xigua_webid")?1:0,M&&(p=(0,o._)((0,n._)({},p),{protobufDecode:async e=>{!t&&(t=await l.e("20352").then(l.t.bind(l,303258,23)));let i=t.com.ss.ugc.aweme.aweme_v2_feed_response,n=i.decode(new Uint8Array(e)),o=i.toObject(n),a=Date.now();(0,_.Pb)(o);let r=Date.now();return x.Z.sendLog("protobufPackParse",{duration:r-a}),o},useProtobuf:!0}));let H="",F=h.Q.getItem({sKey:f.CookieKeys.FeedCacheData,ctx:i});(null==F?void 0:F.awemeId)&&(H=null==F?void 0:F.awemeId);let V=(0,w.g8)(A?"/aweme/v2/web/feed/":"/aweme/v1/web/tab/feed/",(0,n._)((0,o._)((0,n._)((0,o._)((0,n._)({},y),{filterGids:H,tag_id:r,share_aweme_id:1===d?I(i)?I(i):R:"",live_insert_type:j(),pc_launch_live_filters:E,count:s,refresh_index:d,video_type_select:1,aweme_pc_rec_raw_data:JSON.stringify(v),globalwid:c,pull_type:a,refresh_type:k,min_window:T?1:0,free_right:P,view_count:L}),O?{req_count:O}:{}),{plug_block:D?1:0,need_translation:B}),S(d,i)),i,e=>C(e,u),p,e=>{var i;return 0===e.statusCode&&(null===(i=e.awemeList)||void 0===i?void 0:i.length)===0},N),{result:U}=await V;return U}let b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=await c.get({key:v.TccKey.CommonSetting,defaultValue:v.TCC_DEFAULT_VALUE_MAP.get(v.TccKey.CommonSetting)});try{e.customConfig?e.customConfig.filterLiveInClient=i.clientFilterLiveInRecommend||!1:e.customConfig={filterLiveInClient:i.clientFilterLiveInRecommend||!1}}catch(e){}if((null==e?void 0:e.refreshIndex)===1){let i=a.parse((0,m.ht)());if(null==i?void 0:i.live_insert_type){let i=(0,p.$o)(f.LocalStorageKeys.LiveLandingIds),l=s()().format("YYYYMMDD");(null==i?void 0:i.date)===l&&(e.launchLiveFilters=null==i?void 0:i.ids)}}};async function T(e){var i,l,t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,{refreshIndex:o}=e;await b(e);let a=await N(e,n);return 1===o&&(null===(i=a.awemeList)||void 0===i?void 0:i.length)>0&&(null===(t=a.awemeList[0])||void 0===t?void 0:null===(l=t.status)||void 0===l?void 0:l.isDelete)&&(a.awemeList=a.awemeList.slice(1)),a}},743317:function(e,i,l){l.d(i,{E:function(){return h}});var t=l("563097"),n=l("88648"),o=l("713097"),a=l.n(o),r=l("342221"),s=l("860684");l("874386");var d=l("254457"),u=l("88961"),c=l("5537"),v=l("658065"),f=l("794593"),g=l("473677");let m=e=>{let{data:i,onClick:l,awemeInfo:o,activityCardDirectOpen:s}=e,{urlList:m,content:h}=i,[p,_]=(0,u.Z)(),[x,w]=(0,n.useState)(m[0]);return(0,n.useEffect)(()=>{if(_){var e;f.Z.report("pc_feed_label_show",{enter_from:(0,v.yW)(),group_id:null==o?void 0:o.awemeId,author_id:String(null!==(e=null==o?void 0:o.authorUserId)&&void 0!==e?e:""),label_type:null==i?void 0:i.activityName,activity_id:null==i?void 0:i.schema})}},[_]),(0,n.useEffect)(()=>{s&&(null==l||l("jingxuanActivity",i))},[]),(0,t.jsxs)("span",{ref:p,className:a()(r.default.anchor),onClick:e=>{null==l||l("jingxuanActivity",i)},children:[(0,t.jsx)("img",{className:r.default.icon,src:x,onError:()=>w(c||""),alt:""}),(0,t.jsx)("span",{className:r.default.text,children:h}),(0,t.jsx)(g.Z,{className:a()(r.default.arrowSvg),src:d.Z,width:12,height:12,viewBox:"0 0 12 12"})]})},h=e=>{let{awemeInfo:i,className:l,anchorList:n,openActivityCard:o,isDetailPage:d=!1,activityCardDirectOpen:u}=e,c=(0,s.n)();return((null==c?void 0:c.video)||d)&&0!==n.length?(0,t.jsx)("span",{className:a()(r.default.anchorContainer,{[r.default.detail]:d},l),children:n.map(e=>{let{activityKey:l,data:n}=e;return"jingxuanActivity"===l?(0,t.jsx)(m,{data:n,awemeInfo:i,onClick:o,activityCardDirectOpen:u},n.activityName):null})}):null}},444174:function(e,i,l){l.d(i,{P:function(){return h}});var t=l("563097"),n=l("88648"),o=l("713097"),a=l.n(o),r=l("782563"),s=l("687297"),d=l("385236"),u=l("520739"),c=l("878389");let v=(0,n.forwardRef)((e,i)=>(0,t.jsx)("svg",(0,c._)((0,u._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,t.jsx)("path",{d:"M17.448 17.448a1.886 1.886 0 0 1-2.668 0L9 11.668l-5.78 5.78A1.886 1.886 0 1 1 .552 14.78L6.332 9 .552 3.22A1.886 1.886 0 1 1 3.22.552L9 6.332l5.78-5.78a1.886 1.886 0 1 1 2.668 2.668L11.668 9l5.78 5.78a1.886 1.886 0 0 1 0 2.668z",fill:"#fff"})})));var f=l("547641"),g=l("254897"),m=l("473677");let h=e=>{let{onClick:i,isClientMiniWin:l,isMiniWin:n,className:o,isBackSvg:u=!1}=e,c=(0,r.DT)()&&(0,s.y)((0,r.FJ)().awemePcClient,">=","5.4.0");return(0,t.jsx)("div",{className:a()(f.default.container,"isDark",o,{[f.default.hide]:l||n},c&&f.default.clientHomeStyleWrap),onClick:i,children:(0,t.jsxs)("div",{className:f.default.wrapper,children:[(0,t.jsx)("div",{className:f.default.circle}),u||c?(0,t.jsx)(g.z,{className:f.default.back,svg:(0,t.jsx)(d.Z,{style:{fontSize:"24px"}})}):(0,t.jsx)(m.Z,{src:v,className:f.default.close,viewBox:"0 0 18 18"})]})})}},150854:function(e,i,l){l.r(i);var t=l(520739);l(874386);var n=l(563097),o=l(88648),a=l(713097),r=l.n(a),s=l(79307),d=l(782563),u=l(687297),c=l(637005),v=l(561550),f=l(283172),g=l(391298),m=l(986576),h=l(946934),p=l(156795),_=l(444174),x=l(799634),w=l(151681),y=l(239910),C=l(597321),I=l(903868),j=l(739808);i.default=e=>{var i;let{scene:l,awemeInfo:a,abtestData:S,userInfo:N,isClientMiniWin:b,isMiniWin:T,isInnerFeed:E,isActive:P,player:L,fullScreenTarget:k}=e,{awemeFeed:M}=(0,w.j)(),{supportAiTop1:A}=(0,I.Iq)(e=>{let{supportAiTop1:i}=e;return{supportAiTop1:i}}),R=M.useValue("modalAwemeInfo",Boolean),D=M.useValue("feedType"),{isShowExtra:B,extraRef:O,searchBarProps:H,handleExitFullscreen:F}=(0,x.Y)(a,L,P),V=(0,o.useRef)(null),U=(0,o.useRef)(R),[W,z]=(0,o.useState)(!1),Z=(0,d.DT)()&&(0,u.y)((0,d.FJ)().awemePcClient,">=","5.4.0"),G=(0,j.V1)(),[K,Y]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{z(!R&&U.current),U.current=R},[R]),(0,o.useEffect)(()=>{if(!R&&V.current){var e;let i=null===(e=V.current)||void 0===e?void 0:e.aweme;c.emit(c.EVENT.postCurVideoInfo,{awemeId:i.awemeId,groupId:i.groupId,scene:V.current.scene,suggestWords:null==i?void 0:i.suggestWords})}},[R]),(0,o.useEffect)(()=>{!R&&(V.current={aweme:a,scene:l})},[a,R,l]),(0,o.useEffect)(()=>{if(L&&P){var e;let i=L.getPlugin("ImmersiveSwitchSettingPlugin");(null==i?void 0:null===(e=i.config)||void 0===e?void 0:e.isOn)?Y(!0):K&&Y(!1);let l=e=>{Y(e.isOn)};return L.on(C.B.ImmersiveSwitchChange,l),()=>L.off(C.B.ImmersiveSwitchChange,l)}},[L,P,E]),(0,n.jsxs)("div",{className:r()(f.default.extraTL,"isDark",{[f.default.extraShow]:B,[f.default.clientHomeStyleWrap]:Z}),ref:O,children:[R?(0,n.jsx)(y.N,{exitTextProps:{getCurrentTab:()=>D,modalEnterFrom:l,isSelf:!1,uidEquals:(null==a?void 0:null===(i=a.authorInfo)||void 0===i?void 0:i.uid)===(null==N?void 0:N.uid),awemeInfo:a},onHandleReturn:()=>{M.dispatch("modalAwemeInfo",null),(0,v.sF)()&&F()}}):(0,n.jsx)(_.P,{onClick:F,isMiniWin:T,isClientMiniWin:b}),(0,n.jsx)("div",{className:r()(f.default.searchCt,{[f.default.hidden]:K}),children:(()=>{if((null==S?void 0:S.aiSearchAiInput)&&(null==S?void 0:S.aiSearchInputMiddleNew)&&A&&!G)return(0,n.jsx)(g.default,(0,t._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:R||W},userInfo:N,abTestData:S,playerProps:{awemeInfo:a,scene:l,fullScreenScene:s.lT.FullScreen},fullScreenTarget:k},H));if(!(null==S?void 0:S.aiSearchAiInput)&&(null==S?void 0:S.aiSearchInputMiddleNew)&&A&&!G)return(0,n.jsx)(m.E1,(0,t._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:R||W},userInfo:N,abTestData:S,playerProps:{awemeInfo:a,scene:l,fullScreenScene:s.lT.FullScreen}},H));if((null==S?void 0:S.aiSearchAiInput)&&!(null==S?void 0:S.aiSearchInputMiddleNew)&&A&&!G)return(0,n.jsx)(h.E1,(0,t._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:R||W},userInfo:N,abTestData:S,playerProps:{awemeInfo:a,scene:l,fullScreenScene:s.lT.FullScreen},fullScreenTarget:k},H));else return(0,n.jsx)(p.default,(0,t._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:R||W},userInfo:N,abTestData:S,playerProps:{awemeInfo:a,scene:l,fullScreenScene:s.lT.FullScreen}},H))})()})]})}},700662:function(e,i,l){l.d(i,{$:function(){return u}}),l(874386);var t=l(563097),n=l(88648),o=l(965775),a=l(330746),r=l(746025),s=l(399796),d=l(35730);function u(e){let{children:i,mobileUrl:l,nonce:u,applicableDevice:c="pc,mobile"}=e,[v,f]=n.useState(!1);n.useEffect(()=>{(0,a.GP)()&&f(!0)},[]);let g=n.useMemo(()=>(0,r.Dr)(s.Q.getItem({sKey:d.CookieKeys.Theme})),[]);return(0,t.jsxs)(o.Helmet,{children:[(0,t.jsx)("meta",{charSet:"utf-8"}),i,(0,t.jsx)("meta",{httpEquiv:"Cache-Control",content:"no-transform"}),(0,t.jsx)("meta",{httpEquiv:"Cache-Control",content:"no-siteapp"}),(0,t.jsx)("meta",{httpEquiv:"x-dns-prefetch-control",content:"on"}),(0,t.jsx)("meta",{name:"applicable-device",content:l?"pc":c}),l&&(0,t.jsx)("meta",{name:"mobile-agent",content:`format=[html5]; url=${l}`}),l&&(0,t.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:l}),(0,t.jsx)("meta",{name:"baidu-site-verification",content:"code-2WPwEy0bEv"}),(0,t.jsx)("meta",{name:"google",content:"notranslate"}),(0,t.jsx)("meta",{name:"theme-color",content:`${"light"===g?"#ffffff":"#161823"}`}),(0,t.jsx)("script",{nonce:u,children:`
        (function(win, export_obj) {
          win['TeaAnalyticsObject'] = export_obj;
          if (!win[export_obj]) {
              function _collect() {
                  _collect.q.push(arguments);
              }
              _collect.q = _collect.q || [];
              win[export_obj] = _collect;
          }
          win[export_obj].l = +new Date();
      })(window, 'collectEvent');
      `}),!v&&(0,t.jsx)("link",{rel:"manifest",href:"https://p-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/pwa/manifest.json"}),(0,t.jsx)("link",{href:"//fonts.bytedance.com/dfd/api/v1/css?family=DFPKingGothicGB-Medium:500&display=swap",rel:"stylesheet",media:"print",id:"media1"}),(0,t.jsx)("link",{href:"//fonts.bytedance.com/dfd/api/v1/css?family=DFPKingGothicGB-Regular:500&display=swap",rel:"stylesheet",media:"print",id:"media2"}),(0,t.jsx)("script",{nonce:u,children:`
          document.getElementById("media1").addEventListener("load", function () {
            this.media = "all";
            this.onload = null;
          });
          document.getElementById("media2").addEventListener("load", function () {
            this.media = "all";
            this.onload = null;
          });
        `})]})}},494833:function(e,i,l){l.d(i,{E:function(){return p},w:function(){return h}});var t=l(520739),n=l(878389);l(874386);var o=l(563097),a=l(88648),r=l(88961),s=l(713097),d=l.n(s),u=l(747909),c=l(831202),v=l(32167),f=l(346034),g=l(60446),m=l(228861);l(315422);let h=e=>{let{success:i=null,host:l=null,next:s=null,enterMethod:u="author_card_login_guide",destroy:v=null,change:f=()=>null,close:g,className:h,blockNum:p,onShow:_,text:x,transition:w,notAnimate:y}=e,C=(0,a.useRef)(null),[I,j]=(0,a.useState)(!0),S=(0,a.useRef)(null),[N,b]=(0,r.Z)();(0,a.useEffect)(()=>{b&&_()},[b]);let T=()=>{var e;null===(e=C.current)||void 0===e||e.call(C),null==v||v()},E=async()=>{j(!0);let e=await (0,m.HJ)({success:i,next:s,enterMethod:u}),l=await (0,m._j)();S.current=new l((0,n._)((0,t._)({},e),{scanCodeDesc:()=>(0,o.jsx)(o.Fragment,{}),success:i=>{var l;setTimeout(T,0),null==e||null===(l=e.success)||void 0===l||l.call(e,i),null==f||f()}})),c.oe.event.info({name:c.Mo.PassportLoginEntry,report:{enterMethod:u,entry:"RelatedVideoCard"}}),j(!1)};(0,a.useEffect)(()=>{E()},[]);let P=(0,a.useCallback)(()=>{var e,i;return(null===(e=S.current)||void 0===e?void 0:e.LoginContainer)?null===(i=S.current)||void 0===i?void 0:i.LoginContainer():(0,o.jsx)("div",{})},[]);return(0,o.jsx)("div",{className:d()("related-video-card-login-guide-block",h,{showBlockBtn:2===p,animate__fadeInUpBig:w,notAnimate:y}),ref:N,children:I?null:(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)("div",{className:"related-video-card-login-guide-block__content",children:[(0,o.jsx)(P,{}),(0,o.jsxs)("div",{className:"related-video-card-login-guide-block__desc",children:[(0,o.jsx)("p",{children:x}),(0,o.jsx)("p",{className:"related-video-card-login-guide-block__text",children:"打开【抖音】扫码登录"}),2===p&&(0,o.jsx)("div",{className:"related-video-card-login-guide-block__close",onClick:()=>{g()},children:(0,o.jsx)("span",{children:"跳过登录"})})]})]})})})},p=e=>{let{blockNum:i,isDetail:l,handleUnLogin:t,handleJumpBlock:n,onShow:s,text:c,blockText:m,enterMethod:h}=e,[p,_]=(0,r.Z)();return(0,a.useEffect)(()=>{_&&(f.Z.sendLog("loginGuideShow",{enter_from:(0,v.vM)(),enter_method:h,params_for_special:"uc_login"}),null==s||s())},[_]),(0,o.jsxs)("div",{ref:p,className:d()(g.default.loginBtnWrapper,{[g.default.isDetail]:l}),children:[2===i?(0,o.jsx)("div",{className:g.default.jumpBlock,onClick:n,children:(0,o.jsx)("span",{children:m})}):(0,o.jsx)("div",{children:c}),(0,o.jsx)(u.Button,{className:g.default.loginBtn,onClick:()=>{f.Z.sendLog("loginGuideClick",{enter_from:(0,v.vM)(),enter_method:h,params_for_special:"uc_login"}),t()},theme:"solid",children:"立即登录"})]})}},346034:function(e,i,l){var t=l(544933);i.Z=new t.h({loginGuideShow:{eventName:"login_guide_show",params:{enter_from:"",enter_method:"",params_for_special:""}},loginGuideClick:{eventName:"login_guide_click",params:{enter_from:"",enter_method:"",params_for_special:""}}})},200534:function(e,i,l){l.d(i,{c:function(){return s}});var t=l(88648),n=l(877639),o=l.n(n),a=l(516599);let r={};function s(e){let{containerRef:i}=e,{targetRef:l}=e,{className:n}=e,s=e.duration||void 0,d=(0,t.useRef)(null),u=(0,t.useCallback)(e=>{let l={text:e,className:n,duration:s};s||delete l.duration,a.F.info(l,null==i?void 0:i.current)},[null==i?void 0:i.current,n]);return(0,t.useEffect)(()=>(null==i?void 0:i.current)&&(null==l?void 0:l.current)&&"undefined"!=typeof ResizeObserver&&ResizeObserver?(d.current=new ResizeObserver(o()(e=>{var l,t;let n=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(l=t.contentRect)||void 0===l?void 0:l.width;i.current&&(i.current.style.width=`${n}px`)},100)),d.current.observe(l.current),()=>{var e;null===(e=d.current)||void 0===e||e.disconnect(),d.current=null}):()=>null,[null==i?void 0:i.current,null==l?void 0:l.current]),{targetToast:u,containerStyle:r}}},417069:function(e,i,l){l.d(i,{B:function(){return c}});var t=l(520739),n=l(878389),o=l(368200),a=l(563097);l(88648);var r=l(713097),s=l.n(r),d=l(47946),u=l(906499);function c(e){let{isUseALink:i=!0,children:l,className:r}=e,c=(0,o._)(e,["isUseALink","children","className"]);if(!i){let{onClick:e}=c;return(0,a.jsx)("div",(0,n._)((0,t._)({className:s()(d.default.aLink,r),onClick:e},c),{children:l}))}return(0,a.jsx)(u.a,(0,n._)((0,t._)({className:r},c),{children:l}))}},791152:function(e,i,l){l.d(i,{R:function(){return a}});var t=l(520739),n=l(878389);l(874386),l(413806),l(826893),l(268917),l(284961);var o=l(946075);function a(){let e=(0,o.k)();return{push:function(i){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=i,r="";1===o&&([a,r]=i.split("?")),e.push((0,n._)((0,t._)({pathname:a,search:r?`?${r}`:""},l),{extra:(0,t._)({isSpa:!0},l.extra||{})}))},replace:function(i){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=i,r="";1===o&&([a,r]=i.split("?")),e.replace((0,n._)((0,t._)({pathname:a,search:r?`?${r}`:""},l),{extra:(0,t._)({isSpa:!0},l.extra||{})}))}}}},495765:function(e,i,l){l.d(i,{j:function(){return v}});var t=l(520739);l(250440),l(779788);var n=l(88648),o=l(663153),a=l(702726),r=l(734123),s=l(32167),d=l(658065),u=l(44905),c=l(782442);let v=e=>{let{player:i,isActive:l,abValue:v}=e;(0,n.useEffect)(()=>{var e,t;if(i&&l&&(null==v?void 0:null===(e=v.abrConfig)||void 0===e?void 0:e.downSrConfig)){let e=()=>{var e,l;(null===(l=i.abrInstance)||void 0===l?void 0:null===(e=l.module)||void 0===e?void 0:e.setGetTargetSrName)&&i.abrInstance.module.setGetTargetSrName(e=>{var i;let l=null==v?void 0:null===(i=v.SR)||void 0===i?void 0:i.improvePictureQuality;if((null==e?void 0:e.includes("1080"))&&l)return"720"})};return null==i||null===(t=i.once)||void 0===t||t.call(i,r.Events.TIME_UPDATE,e),()=>{var l;null==i||null===(l=i.off)||void 0===l||l.call(i,r.Events.TIME_UPDATE,e)}}},[i,l,v]),(0,n.useEffect)(()=>{if(i){i.upperCount=i.upperCount||0,i.lowerCount=i.lowerCount||0,i.abrCount=i.abrCount||0,i.abrChangeCount=i.abrChangeCount||0,i.upperAbrChangeCount=i.upperAbrChangeCount||0,i.lowerAbrChangeCount=i.lowerAbrChangeCount||0;let e=e=>{var l,n,o;let{v_time:r,buffer:v,target_birate:f,b_seek:g,costTime:m,net_speed:h,is_upper:p}=e;a.logInstance.sendLog("abrChange",(0,t._)({enter_from:(0,s.vM)(),enter_from_merge:(0,d.yW)(),abr_id:`${null===(l=(0,u.Es)())||void 0===l?void 0:l.user_unique_id}_${null==i?void 0:null===(n=i.config)||void 0===n?void 0:n.vid}_${null==i?void 0:i.firstFrameTmp}`,group_id:null==i?void 0:null===(o=i.config)||void 0===o?void 0:o.vid,buffer:v,current_position:r,target_birate:f,internet_speed:h,user_seek:g,costTime:m,is_upper:p,abr_config:JSON.stringify(c.Le.getConfig(c.gI.AbtestData).abrConfig)},e||{})),p?i.upperCount++:i.lowerCount++,i.abrCount++},l=function(){var e,l,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{orgDefinition:r,orgBitrate:v,currentDefinition:f,currentBitrate:g}=o;a.logInstance.sendLog("abrChangeDefinition",(0,t._)({enter_from:(0,s.vM)(),enter_from_merge:(0,d.yW)(),group_id:null==i?void 0:null===(e=i.config)||void 0===e?void 0:e.vid,origin_definition:r,origin_bitrate:v,current_definition:f,current_bitrate:g,is_upper:g>v?1:0,is_upper_definition:f>r?1:0,abr_id:`${null===(l=(0,u.Es)())||void 0===l?void 0:l.user_unique_id}_${null==i?void 0:null===(n=i.config)||void 0===n?void 0:n.vid}_${null==i?void 0:i.firstFrameTmp}`,abr_config:JSON.stringify(c.Le.getConfig(c.gI.AbtestData).abrConfig)},o)),g>v?i.upperAbrChangeCount++:i.lowerAbrChangeCount++,i.abrChangeCount++};return i.on(o._c.ABR_STAT,e),i.on(o._c.ABR_DEFINITION_REAL_CHANGE,l),()=>{i.off(o._c.ABR_STAT,e),i.off(o._c.ABR_DEFINITION_REAL_CHANGE,l)}}},[i])}},799634:function(e,i,l){l.d(i,{Y:function(){return u}}),l(874386);var t=l(88648),n=l(774765),o=l(782442),a=l(506467),r=l(637005),s=l(208987),d=l(253754);let u=(e,i,l)=>{var u;let[c,v]=(0,t.useState)(!0),[f,g]=(0,t.useState)(!1),{handleHiddenLog:m}=(0,d.s)(),{isCssFullScreen:h,isFullScreen:p}=(0,t.useContext)(s.C),[_,x]=(0,t.useState)(null===(u=o.Le.getConfig(o.gI.IsInLookMiniModal))||void 0===u?void 0:u.isInMiniModal),w=(0,t.useRef)(null),y=(0,t.useRef)(!1),{run:C}=(0,n.Z)(()=>{v(!0)},500,[],{trailing:!1,leading:!0}),{run:I}=(0,n.Z)(async()=>{v(y.current||!1)},3e3),j=()=>{y.current=!0},S=()=>{y.current=!1};return(0,t.useEffect)(()=>r.listen(r.EVENT.syncInteraction,()=>{var e;x(null===(e=o.Le.getConfig(o.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)}),[]),(0,t.useEffect)(()=>{var e,l,t,n,o,a,r;if(!(h||p)||!i||_)return;let s=null!==(r=null==i?void 0:i.innerContainer)&&void 0!==r?r:null==i?void 0:null===(e=i.config)||void 0===e?void 0:e.el,d=(null==s?void 0:null===(l=s.closest)||void 0===l?void 0:l.call(s,".basePlayerContainer"))||(null==i?void 0:null===(n=i.root)||void 0===n?void 0:null===(t=n.closest)||void 0===t?void 0:t.call(n,".basePlayerContainer"));if(!!d)return d.addEventListener("mousemove",C),d.addEventListener("mousemove",I),null===(o=w.current)||void 0===o||o.addEventListener("mouseenter",j),null===(a=w.current)||void 0===a||a.addEventListener("mouseleave",S),()=>{var e,i;d.removeEventListener("mousemove",C),d.removeEventListener("mousemove",I),null===(e=w.current)||void 0===e||e.removeEventListener("mouseenter",j),null===(i=w.current)||void 0===i||i.removeEventListener("mouseleave",S)}},[h,p,i,_]),(0,t.useEffect)(()=>{if(!!(h||p)&&!_)v(!0),y.current=!1,l&&I()},[l,e,h,p,_]),(0,t.useEffect)(()=>{g((h||p)&&!_&&c)},[h,p,c,_]),{isShowExtra:f,isCssFullScreen:h,isFullScreen:p,extraRef:w,handleExitFullscreen:()=>{h?r.emit(r.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==i?void 0:i.playerId}):null==i||i.exitFullscreen()},searchBarProps:{onHistoryClick:e=>{let{text:i}=e.currentTarget.dataset;return m(i)},onSearchClick:e=>m(e),onInputKeyDown:(e,i)=>{if("Enter"===(0,a.CS)(e))return m(i)}}}}},14427:function(e,i,l){l.d(i,{$:function(){return d}}),l(250440);var t=l(88648),n=l(734123),o=l(732365),a=l(637005),r=l(692784),s=l(777480);let d=e=>{let{player:i,isActive:l,isActualActive:d=!1,abtestData:u,awemeInfo:c={},isInnerFeed:v,hasModal:f=!1,forceHide:g=!0}=e,{awemeId:m,isAds:h}=c,p=(0,t.useRef)(""),_=()=>{var e,l,t,n,o;let a=(0,r.RH)({abtestData:u,player:i,awemeInfo:c});if(i.claritySr=a,!a){null===(l=window.TTCommon)||void 0===l||null===(e=l.executeWithElement)||void 0===e||e.call(l,i.video,"updateSrState",0),i.cancelSR=1;return}if((null==i?void 0:i.video)&&window.TTCommon){let e=(null==u?void 0:null===(t=u.SRMultiScene)||void 0===t?void 0:t.videoGpuSrSupportType)||"240";null===(o=window.TTCommon)||void 0===o||null===(n=o.executeWithElement)||void 0===n||n.call(o,i.video,"updateSrState",e),i.sr=1}},x=(0,t.useCallback)(()=>{var e,l,t,n,o,a,r,s,d,v,f,g,m,p,x,w,y,C,I,j,S;if((null==i?void 0:null===(e=i.curDefinition)||void 0===e?void 0:e.qualityType)>9&&!h&&((null==u?void 0:null===(n=u.SRMultiScene)||void 0===n?void 0:n.improvePictureQuality)||(null==u?void 0:null===(r=u.SRMultiScene)||void 0===r?void 0:null===(a=r.targetDefinition)||void 0===a?void 0:a.includes(null==i?void 0:null===(o=i.curDefinition)||void 0===o?void 0:o.definition))||(null===(s=i.curDefinition)||void 0===s?void 0:s.orgDefinition))){let e=null==c?void 0:null===(d=c.video)||void 0===d?void 0:d.duration,l=null==i?void 0:null===(v=i.curDefinition)||void 0===v?void 0:v.isH265;if(!(null==u?void 0:null===(f=u.SRMultiScene)||void 0===f?void 0:f.filteredFormats)||(null==u?void 0:null===(g=u.SRMultiScene)||void 0===g?void 0:g.filteredFormats)&&(null==u?void 0:null===(p=u.SRMultiScene)||void 0===p?void 0:null===(m=p.filteredFormats)||void 0===m?void 0:m.includes(l))){if(null==u?void 0:null===(x=u.SRMultiScene)||void 0===x?void 0:x.videoDuration){if(e<(null==u?void 0:null===(w=u.SRMultiScene)||void 0===w?void 0:w.videoDuration)&&(null==u?void 0:null===(C=u.SRMultiScene)||void 0===C?void 0:null===(y=C.filteredFormatsLow)||void 0===y?void 0:y.includes(l))||e>=(null==u?void 0:null===(I=u.SRMultiScene)||void 0===I?void 0:I.videoDuration)&&(null==u?void 0:null===(S=u.SRMultiScene)||void 0===S?void 0:null===(j=S.filteredFormatsHigh)||void 0===j?void 0:j.includes(l))){_();return}}else{_();return}}}i.cancelSR=1,null===(t=window.TTCommon)||void 0===t||null===(l=t.executeWithElement)||void 0===l||l.call(t,i.video,"updateSrState",0)},[i,m,u,h]);(0,t.useEffect)(()=>{if(l&&window.TTCommon&&i){var e,t;return i.sr=0,i.currentTime>0&&x(),null==i||null===(e=i.on)||void 0===e||e.call(i,o.W.DEFINITION_CHANGE_HINT,x),null==i||null===(t=i.on)||void 0===t||t.call(i,s.Cf.DefinitionChangeOnlyForSr,x),i.on("ABR_AUTO_DESC_CHANGE",x),()=>{var e,l;null==i||null===(e=i.off)||void 0===e||e.call(i,o.W.DEFINITION_CHANGE_HINT,x),i.off("ABR_AUTO_DESC_CHANGE",x),null==i||null===(l=i.off)||void 0===l||l.call(i,s.Cf.DefinitionChangeOnlyForSr,x)}}},[i,m,l,x]),(0,t.useEffect)(()=>{if(window.TTCommon&&i){var e,l;let t=e=>{"firstFrame"===e.eventType&&x()};return null==i||null===(e=i.on)||void 0===e||e.call(i,n.Events.XGLOG,t),null==i||null===(l=i.once)||void 0===l||l.call(i,n.Events.TIME_UPDATE,x),()=>{var e,l;null==i||null===(e=i.off)||void 0===e||e.call(i,n.Events.XGLOG,t),null==i||null===(l=i.off)||void 0===l||l.call(i,n.Events.TIME_UPDATE,x)}}},[i,m,x]),(0,t.useEffect)(()=>{var e;if(!i||!l||!(null==u?void 0:null===(e=u.SRMultiScene)||void 0===e?void 0:e.isOpen)||v||!f)return;let t=e=>{var l;p.current===e&&(null==i?void 0:null===(l=i.video)||void 0===l?void 0:l.style)&&(i.video.style.display="block",p.current="")},n=e=>{var l;if(""===p.current){p.current=e;(null==i?void 0:null===(l=i.video)||void 0===l?void 0:l.style)&&(i.video.style.display="none")}},o=a.listen(a.EVENT.enterModalVideo,n),r=a.listen(a.EVENT.exitModalVideo,t),s=a.listen(a.EVENT.InnerFeedReady,n),d=a.listen(a.EVENT.InnerFeedExit,t);return()=>{o(),r(),s(),d()}},[i,m,l,u,v,f]),(0,t.useEffect)(()=>{var e,l;if(!!(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.style)&&!!(null==u?void 0:null===(l=u.SRMultiScene)||void 0===l?void 0:l.isOpen)&&!!g)d?i.video.style.display="block":i.video.style.display="none"},[i,m,d,u,g])}},744785:function(e,i,l){l.d(i,{e:function(){return T}});var t=l("134761"),n=l("520739");l("874386"),l("429532");var o=l("563097"),a=l("88648"),r=l("734123"),s=l("412679"),d=l("489478"),u=l("147613"),c=l("574138"),v=l("51235"),f=l("32167"),g=l("637005"),m=l("359897"),h=l("330746"),p=l("878389");let _=(0,a.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,p._)((0,n._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{d:"M14.398 3.037c.265 0 .524.029.772.082a1.764 1.764 0 0 1-.108.294c-.028.013-.062.032-.105.049a3.206 3.206 0 0 1-.286.096l-.302.076a2.23 2.23 0 0 0-1.372.93l-.098.159H7.092A1.968 1.968 0 0 0 5.125 6.69v10.34c0 1.086.881 1.967 1.967 1.967h4.443l.33-1.55c.114-.506.369-.969.735-1.334l2.799-2.742c.286-.292.612-.535.967-.723v-2.2a2.294 2.294 0 0 0 1.685.226v1.516l.072-.002a2.902 2.902 0 0 1 2.075.83 3.45 3.45 0 0 1-.352 4.81l-2.798 2.808a2.711 2.711 0 0 1-1.33.735l-3.629.778h-.202a.808.808 0 0 1-.798-1.066l.085-.4H7.092A3.654 3.654 0 0 1 3.44 17.03V6.69a3.654 3.654 0 0 1 3.653-3.653h7.306zm3.725 10.675a2.328 2.328 0 0 0-1.596.726l-2.799 2.817c-.149.145-.253.33-.298.533l-.521 2.485 2.48-.534c.202-.045.387-.15.531-.299l2.798-2.806a1.88 1.88 0 0 0 .352-2.559 1.308 1.308 0 0 0-.947-.363zm-6.749-3.056a.843.843 0 1 1 0 1.686H7.876a.843.843 0 1 1 0-1.686h3.498zm1.124-3.035a.844.844 0 1 1 0 1.686H7.877a.843.843 0 1 1 0-1.686h4.622zm4.993-4.871a.5.5 0 0 1 .244.063c.088.049.185.142.218.289.056.254.142.57.262.87.123.306.27.565.435.73.164.162.423.307.727.428.3.118.614.202.867.258.145.032.239.127.289.215a.496.496 0 0 1 0 .488.443.443 0 0 1-.288.216c-.253.056-.569.14-.868.26-.304.12-.562.266-.726.43-.166.164-.314.423-.437.73-.12.3-.205.618-.262.872a.443.443 0 0 1-.216.288.499.499 0 0 1-.49-.001.443.443 0 0 1-.215-.29 5.793 5.793 0 0 0-.259-.87c-.121-.306-.267-.565-.432-.73-.163-.163-.42-.308-.723-.429a5.768 5.768 0 0 0-.867-.258.444.444 0 0 1-.29-.218.5.5 0 0 1 0-.487.443.443 0 0 1 .291-.218c.255-.056.569-.14.867-.257.303-.12.56-.264.722-.427.165-.164.31-.422.432-.727.119-.3.203-.617.259-.871a.442.442 0 0 1 .216-.29.5.5 0 0 1 .244-.064z",fill:"#fff",fillOpacity:".5"})})));var x=l("198502"),w=l("473677"),y=l("205457"),C=l("679126"),I=l("860684"),j=l("894416");let S=()=>(0,o.jsx)("div",{className:x.default.xgTips,children:"AI 笔记"}),N=e=>{let{isAiNoteIcon:i,aiNoteProps:l,awemeInfo:t}=e,n=(0,a.useCallback)(()=>{if(g.emit(g.EVENT.toggleAiCard,{tab:c.X.Note,awemeId:t.awemeId,aiNoteEnterMethod:"bottom_bar"}),!l.isShow){var e;v.K.sendLog("aiNoteButtonEnter",{enter_method:"bottom_bar",enter_from:(0,f.mo)(),group_id:t.awemeId,author_id:null===(e=t.authorInfo)||void 0===e?void 0:e.uid,player_display_mode:(0,f.Ok)()})}},[l,t]);return(0,a.useEffect)(()=>{var e;v.K.sendLog("aiNoteButtonShow",{enter_method:"bottom_bar",enter_from:(0,f.mo)(),group_id:t.awemeId,author_id:null===(e=t.authorInfo)||void 0===e?void 0:e.uid,player_display_mode:(0,f.Ok)()})},[]),(0,o.jsx)("div",{children:i?(0,o.jsxs)("div",{className:x.default.icon,children:[(0,o.jsx)(w.Z,{src:_,width:24,height:24,viewBox:"0 0 24 24",onClick:n}),(0,o.jsx)(S,{})]}):(0,o.jsxs)("div",{className:x.default.bar,onClick:n,children:[(0,o.jsx)(w.Z,{src:_,width:24,height:24,viewBox:"0 0 24 24"}),(0,o.jsx)("span",{className:x.default.text,children:"AI 笔记"})]})})},b=e=>{let{isActive:i,awemeInfo:l,isAiNoteIcon:c,aiNoteProps:v}=e,f=(0,I.g)(),g=(0,I.n)(),m=(0,a.useMemo)(()=>{let e=f?s.di:r.Plugin;return class extends e{static get pluginName(){return"AiNotePlugin"}static get defaultConfig(){return{position:d.POSITIONS.CONTROLS_LEFT,index:10}}destroy(){(0,C.v)(this)}renderRoot(){(0,C.s)(this,(0,o.jsx)(N,(0,n._)({},this.config)))}updateConfig(e){this.config=e,this.renderRoot()}render(){return`<div data-state="normal" class="${x.default["ai-note-container"]} ai-note-container" data-e2e='ai-note-container' style=""></div>`}constructor(...e){super(...e),(0,t._)(this,"config",void 0)}}},[f]);return(0,u.o)(()=>{if(g&&i){var l;let i=(0,n._)({},e);return f&&Object.assign(i,{position:s.PZ.CONTROL_LEFT,index:2.95}),null===(l=g.registerPlugin)||void 0===l||l.call(g,m,i),()=>{if(g.getPlugin("AiNotePlugin")){var e;null==g||null===(e=g.unRegisterPlugin)||void 0===e||e.call(g,"AiNotePlugin",!0)}}}},[g,i,l,m]),(0,a.useEffect)(()=>{if(g&&i){let i=g.getPlugin("AiNotePlugin");if(i){let l=(0,n._)({},e);f&&Object.assign(l,{position:s.PZ.CONTROL_LEFT,index:2.95}),i.updateConfig(l)}}},[c,v]),null},T=e=>{var i,l,t,a,r;let s=(0,j.N)();return!(((null==e?void 0:null===(i=e.abtestData)||void 0===i?void 0:i.aiNoteV2)===1||(null==e?void 0:null===(l=e.abtestData)||void 0===l?void 0:l.aiNoteV2)===2)&&(null==e?void 0:null===(a=e.awemeInfo)||void 0===a?void 0:null===(t=a.douyinPcVideoExtra)||void 0===t?void 0:t.aiNoteV2)!==1&&!(0,m.R)()||!(null==e?void 0:null===(r=e.aiNoteProps)||void 0===r?void 0:r.useable)||(0,h.km)(78))?(0,o.jsx)(y.k,{componentName:"AiNote",Slardar:s,children:(0,o.jsx)(b,(0,n._)({},e))}):null}},955462:function(e,i,l){l.d(i,{WC:function(){return R}});var t=l("134761"),n=l("520739"),o=l("878389");l("874386");var a=l("563097"),r=l("88648"),s=l("713097"),d=l.n(s),u=l("734123"),c=l("489478"),v=l("784492"),f=l("823685"),g=l("702726"),m=l("410665"),h=l("147613"),p=l("602394"),_=l("32167");let x=e=>{let i=Math.floor(Number(e));if(isNaN(i)||i<0)return"";let l=Math.floor(i/60);return[String(l).padStart(2,"0"),String(i%60).padStart(2,"0")].join(":")};var w=l("209651");let y=(0,r.forwardRef)((e,i)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,a.jsx)("path",{d:"M4 1l5 5-5 5",stroke:"#fff",strokeOpacity:".9",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),C=(0,r.forwardRef)((e,i)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:31,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.54 8a1.04 1.04 0 1 0 0 2.08h13.92a1.04 1.04 0 1 0 0-2.08H8.54zm3.425 13.89a.448.448 0 0 0 0-.772l-3.47-2.043a.448.448 0 0 0-.675.386v4.086c0 .346.377.561.676.386l3.468-2.043zM7.5 15.242c0-.575.466-1.04 1.04-1.04h13.92a1.04 1.04 0 1 1 0 2.08H8.54a1.04 1.04 0 0 1-1.04-1.04zm7.44 5.16a1.04 1.04 0 0 0 0 2.08h7.52a1.04 1.04 0 1 0 0-2.08h-7.52z",fill:"#fff"})}))),I=(0,r.forwardRef)((e,i)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.113 1.279c-.31.016-.598.167-.786.414-.216.284-.216.803-.216 1.842v8.296c0 1.063 0 1.594.22 1.88.192.248.485.398.798.41.36.012.793-.297 1.656-.916l5.926-4.245c.66-.473.991-.71 1.105-1 .1-.256.097-.54-.009-.792-.12-.289-.455-.518-1.126-.977L6.755 2.14c-.857-.587-1.286-.88-1.642-.861zm.831 2.527v7.746l5.533-3.963-5.533-3.783z",fill:"#fff",fillOpacity:".5"})}))),j=(0,r.forwardRef)((e,i)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,a.jsx)("path",{d:"M3.944 1.198a.5.5 0 0 1 .5.5v12.604a.5.5 0 0 1-.5.5h-.777a.5.5 0 0 1-.5-.5V1.698a.5.5 0 0 1 .5-.5h.777zM8.39 3.466a.5.5 0 0 1 .5.5v8.07a.5.5 0 0 1-.5.5H7.61a.5.5 0 0 1-.5-.5v-8.07a.5.5 0 0 1 .5-.5h.779zm4.443 2.266a.5.5 0 0 1 .5.5v3.535a.5.5 0 0 1-.5.5h-.777a.5.5 0 0 1-.5-.5V6.232a.5.5 0 0 1 .5-.5h.777z",fill:"#fff",fillOpacity:".5"})})));var S=l("860684"),N=l("894416"),b=l("679126"),T=l("473677"),E=l("205457");function P(){return(0,a.jsx)("div",{className:d()(w.default.xgTips,"xgTips"),children:(0,a.jsx)("span",{children:"章节要点"})})}function L(e){let{visible:i,chapterList:l,chapterProgress:t,handleChapterPopoverItemClick:n}=e;return(0,a.jsx)("div",{className:w.default.chapterListPopover,style:{visibility:i?"visible":"hidden"},onWheel:e=>e.stopPropagation(),children:(0,a.jsx)("div",{className:w.default.chapterListContent,children:l.map((e,i)=>{let l=i===t;return(0,a.jsxs)("div",{className:d()(w.default.simpleChapterItem,{[w.default.active]:l}),onClick:()=>n(e,i),children:[l?(0,a.jsx)(j,{className:w.default.playStatusIcon}):(0,a.jsx)(I,{className:w.default.playStatusIcon}),(0,a.jsx)("span",{className:w.default.simpleChapterTitle,children:e.desc})]},e.timestamp)})})})}l("788210");let k=e=>{var i,l,t,s,u;let{awemeInfo:c,isChapterIcon:v,chapterProps:h,chapterMaxWidth:I,player:j,userInfo:S,abtestData:N}=e,b=null!==(s=null==c?void 0:null===(i=c.chapterInfo)||void 0===i?void 0:i.list)&&void 0!==s?s:[],{chapterProgress:E,triggerChapterSliderShow:k}=h,M=(null==c?void 0:null===(l=c.chapterInfo)||void 0===l?void 0:l.isPoint)?1:0,A=c.authorInfo.uid===(null==S?void 0:null===(t=S.info)||void 0===t?void 0:t.uid),[R,D]=(0,r.useState)(!1),B=(0,r.useRef)(null),O=null!==(u=null==N?void 0:N.chapterToggleType)&&void 0!==u?u:f.ChapterToggleType.V0,H=O===f.ChapterToggleType.V1,F=O===f.ChapterToggleType.V2,V=e=>{p.F.info(e,j.innerContainer)},U=e=>{if(e&&(null==j?void 0:j.seek)){let i=e.timestamp/1e3;j.seek(i);let l=x(i);V(`已定位至 ${l}`)}else!e&&V("已定位至最后章节")},W=()=>"number"==typeof E&&-1!==E?E+1:null,z=(e,i)=>{U(e),D(!1),g.logInstance.sendLog("chapterTagHoverClick",(0,o._)((0,n._)({},K()),{chapter_index_click:i+1}))},Z=()=>{F&&(B.current&&clearTimeout(B.current),D(!0),g.logInstance.sendLog("chapterTagHoverShow",K()))},G=()=>{F&&(B.current=setTimeout(()=>{D(!1)},200))};(0,r.useEffect)(()=>()=>{B.current&&clearTimeout(B.current)},[]);let K=()=>{var e;return{enter_from:(0,_.mo)(),enter_from_merge:(0,_.vM)(),group_id:null==c?void 0:c.awemeId,author_id:null==c?void 0:null===(e=c.authorInfo)||void 0===e?void 0:e.uid,chapter_sequence_num_impr:W(),is_knowledge_point:M,is_author:A?1:0,chapter_num:b.length,player_display_mode:(0,_.Ok)()}},Y=(0,m.Y)(()=>{g.logInstance.sendLog("chapterTagShow",(0,o._)((0,n._)({},K()),{is_chapter_next:H?1:0}))}),$=e=>{g.logInstance.sendLog("chapterTagClick",(0,o._)((0,n._)({},K()),{click_area:e,chapter_index_click:W()})),k()};if((0,r.useEffect)(()=>{var e,i;v?null===(e=j.root.querySelector(".chapterContainer"))||void 0===e||e.classList.add(w.default.displayIcon):null===(i=j.root.querySelector(".chapterContainer"))||void 0===i||i.classList.remove(w.default.displayIcon)},[v,j]),0===b.length)return null;let q=b[E],Q=E+1,X=H?`第${Q}章`:`章节要点${Q}`;return(0,a.jsx)("div",{ref:Y,children:v?(0,a.jsxs)("div",{className:w.default.chapterIcon,onMouseEnter:Z,onMouseLeave:G,children:[(0,a.jsx)(T.Z,{src:C,width:31,height:32,viewBox:"0 0 31 32",onClick:()=>$("chapter_icon")}),F?(0,a.jsx)(L,{visible:R,chapterList:b,chapterProgress:E,handleChapterPopoverItemClick:z}):(0,a.jsx)(P,{})]}):(0,a.jsxs)("div",{className:w.default.chapterBar,style:I?{maxWidth:`${I}px`}:void 0,children:[(0,a.jsxs)("div",{className:w.default.chapterTitleContainer,onMouseEnter:Z,onMouseLeave:G,children:[(0,a.jsx)("div",{className:w.default.chapterTitle,onClick:()=>$("chapter_title"),children:-1===E?`章节要点：共${b.length}个`:`${X}：${null==q?void 0:q.desc}`}),F&&(0,a.jsx)(L,{visible:R,chapterList:b,chapterProgress:E,handleChapterPopoverItemClick:z})]}),H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:d()(w.default.nextChapterDivider)}),(0,a.jsxs)("div",{className:w.default.chapterNext,onClick:()=>{let e=E+1;U(e<b.length?b[e]:void 0),g.logInstance.sendLog("chapterTagClick",(0,o._)((0,n._)({},K()),{click_area:"chapter_next",chapter_index_click:W()}))},children:[(0,a.jsx)("span",{className:w.default.chapterNextText,children:"下一章"}),(0,a.jsx)(T.Z,{className:w.default.arrowIcon,src:y,width:12,height:12,viewBox:"0 0 12 12"})]})]}):(0,a.jsx)(T.Z,{className:w.default.arrowIcon,src:y,width:12,height:12,viewBox:"0 0 12 12"})]})})};class M extends u.Plugin{static get pluginName(){return"ChapterPlugin"}static get defaultConfig(){return{position:c.POSITIONS.CONTROLS_LEFT,index:8,className:"xgplayer-chapter"}}afterCreate(){}destroy(){(0,b.v)(this)}renderRoot(){(0,b.s)(this,(0,a.jsx)(k,(0,n._)({},this.config)))}updateConfig(e){this.config=e,this.renderRoot()}render(){return`<div data-state="normal" class="${w.default.chapterContainer} chapterContainer" data-e2e='chapter-container' style=""></div>`}constructor(...e){super(...e),(0,t._)(this,"config",void 0)}}let A=e=>{let{isActive:i,awemeInfo:l,chapterProps:t,isChapterIcon:n,chapterMaxWidth:o,userInfo:a,abtestData:r}=e,s=(0,S.n)();return(0,h.o)(()=>{var e;if(s&&i&&(null==l?void 0:null===(e=l.chapterInfo)||void 0===e?void 0:e.status)){s.registerPlugin(M);let e=s.getPlugin("ChapterPlugin");return e&&e.updateConfig({player:s,awemeInfo:l,chapterProps:t,isChapterIcon:n,chapterMaxWidth:o,userInfo:a,abtestData:r}),()=>{var e,i;(null==s?void 0:null===(e=s.getPlugin)||void 0===e?void 0:e.call(s,"ChapterPlugin"))&&(null==s||null===(i=s.unRegisterPlugin)||void 0===i||i.call(s,"ChapterPlugin",!0))}}},[s,i,l,a]),(0,v.Z)(()=>{var e;if(s&&(null==l?void 0:null===(e=l.chapterInfo)||void 0===e?void 0:e.status)){let e=s.getPlugin("ChapterPlugin");e&&e.updateConfig({player:s,awemeInfo:l,chapterProps:t,isChapterIcon:n,chapterMaxWidth:o,abtestData:r})}},[n,o,t]),null},R=e=>{let i=(0,N.N)();return(0,a.jsx)(E.k,{componentName:"Chapter",Slardar:i,children:(0,a.jsx)(A,(0,n._)({},e))})}},341738:function(e,i,l){l.d(i,{t:function(){return F}});var t=l("520739"),n=l("563097"),o=l("88648");l("874386"),l("250440");var a=l("734123"),r=l("713097"),s=l.n(r),d=l("747909"),u=l("309931"),c=l("60013"),v=l("35730"),f=l("507217"),g=l("746864"),m=l("702726"),h=l("966410"),p=l("701523"),_=l("820303"),x=l("153606"),w=l("555106"),y=l("637005"),C=l("32167"),I=l("349998"),j=l("428647"),S=l("291773"),N=l("620976"),b=l("358003"),T=l("77741");l("226463");var E=l("254897"),P=l("537014");let L=0,k=!1,M=!1,A=e=>{var i,l,r,A,R,D;let{userInfo:B,isActive:O,awemeInfo:H,dispatch:F,player:V,currentIndex:U,abtestData:W,isInnerFeed:z}=e,{isLogin:Z}=B||{},[G,K]=(0,o.useState)(T.QM.Auto),[Y,$]=(0,o.useState)(!1),[q,Q]=(0,o.useState)(!1),[X,J]=(0,o.useState)(!1),ee=(0,o.useRef)(null),ei=(0,o.useRef)(!1),el=(0,o.useRef)(null),{attemptOpen:et,executeClose:en}=(0,c.B)({popName:"清晰度引导登录",onOpen:()=>{$(!0)},onClose:()=>{$(!1)}});(0,o.useEffect)(()=>{ee.current=U,(U>0&&O||z)&&(k=!0)},[U,O,z]),(0,o.useEffect)(()=>{O&&(ei.current=Y)},[O,Y]),(0,o.useEffect)(()=>{let e=(0,_.G)(v.SessionStorageKeys.manualSwitch)||{};K((null==e?void 0:e.gearName)?null==e?void 0:e.gearName:T.QM.Auto)},[O,H]);let eo=(0,o.useCallback)(e=>{T.y8.includes(null==e?void 0:e.pluginName)&&Q(!0)},[W]),ea=(0,o.useCallback)(e=>{T.y8.includes(null==e?void 0:e.pluginName)&&Q(!1)},[W]);(0,o.useEffect)(()=>{if(V&&O)return V.on("icon_mouseenter",eo),V.on("icon_mouseleave",ea),()=>{null==V||V.off("icon_mouseenter",eo),(null==W?void 0:W.fixOOM)===1?null==V||V.off("icon_mouseleave",ea):V.on("icon_mouseleave",ea)}},[V,H,O]),(0,o.useEffect)(()=>{var e,i;if(x.f.isLoginClarity()&&Z)return;if(!O||Z||(null==H?void 0:H.awemeType)===(null==f?void 0:null===(e=g.e)||void 0===e?void 0:e.Note)){en();return}let l=(0,w.$o)(v.LocalStorageKeys.UnloginClairtyNew),n=Date.now()-(null==l?void 0:l.lstTimestamp);if(n<T.Ts)return;let o=((null==l?void 0:l.totalTimes)||0)+1;if((null==l?void 0:l.totalTimes)>=15){if(!(n>=T.sY))return;o=1}let a=null==y?void 0:y.listen(null==y?void 0:null===(i=y.EVENT)||void 0===i?void 0:i.clarityRel,e=>{e.loginMaskMeeted&&(L=0),e.hoverSelected&&Q(!0),!1===e.hoverSelected&&Q(!1),e.smartAppear&&(ei.current&&m.logInstance.sendLog("hdLoginGuideCrash",{enter_from:(0,C.vM)(),guide_type:"bar_guide"}),en())});return O&&(0===ee.current&&!1===k?L=1:L++),(null==H?void 0:H.awemeId)===h.X&&(L=0),3===L&&(M=!0),(3===L&&O&&!Z&&!M||L>3&&M)&&(M=!1,et({afterCallback:()=>{y.emit(y.EVENT.closeOtherTip,"LoginClarityTip"),el.current=Date.now(),m.logInstance.sendLog("hdLoginGuideShow",(0,t._)({params_for_special:"uc_login",enter_from:(0,C.vM)(),guide_type:"bar_guide"},(0,I.t)())),(0,w.qQ)(v.LocalStorageKeys.UnloginClairtyNew,{totalTimes:o,lstTimestamp:Date.now()})}})),()=>{a()}},[O,null==H?void 0:H.awemeId,Z]);let er=()=>{en()};(0,o.useEffect)(()=>{if(V&&O){let e=y.listen("changeNext",er),i=y.listen("changePrev",er);return null==V||V.on("playSwitchPrevBefore",er),null==V||V.on("playSwitchNextBefore",er),null==V||V.on(a.Events.MINI_STATE_CHANGE,er),()=>{null==e||e(),null==i||i(),null==V||V.off("playSwitchPrevBefore",er),null==V||V.off("playSwitchNextBefore",er),null==V||V.off(a.Events.MINI_STATE_CHANGE,er)}}},[V,O]);(0,o.useEffect)(()=>{(async()=>{if((0,p.p)(H)&&!z){J(!0);return}J(await (0,N.isHideLoginGuide)(W))})()},[]),(0,o.useEffect)(()=>{let e=y.listen(y.EVENT.closeOtherTip,e=>{"LoginClarityTip"!==e&&en()});return()=>e()},[]);let es=null==V?void 0:null===(l=V.getPlugin("PlayClaritySettingPlugin"))||void 0===l?void 0:null===(i=l.root)||void 0===i?void 0:i.querySelector(".login-tooltip-slot"),ed=null==V?void 0:null===(D=V.config)||void 0===D?void 0:null===(R=D.clearLists)||void 0===R?void 0:null===(A=R.find)||void 0===A?void 0:null===(r=A.call(R,e=>e))||void 0===r?void 0:r.label;return!1===Z&&O&&Y&&!X&&es?(0,u.createPortal)((0,n.jsxs)("div",{className:s()("isDark",P.default.loginClarityNewAdjust),onClick:()=>{let e=(0,_.G)(v.SessionStorageKeys.manualSwitch)||{};m.logInstance.sendLog("hdLoginGuideClick",(0,t._)({params_for_special:"uc_login",enter_from:(0,C.vM)(),guide_type:"bar_guide",duration:Date.now()-el.current,action:"login"},(0,I.t)())),(0,b.default)({clarity:e.gearClarity||"0",headerText:"登录后免费畅享高清画质",enterMethod:"bar_guide",isAuto:e.done?0:1,gearName:e.gearName,success:()=>{var e;en(),y.emit(null==y?void 0:null===(e=y.EVENT)||void 0===e?void 0:e.clarityRel,{hdLogin:!0}),F({type:"updateUserInfo"})}})},children:[(0,n.jsxs)("div",{className:s()(P.default.textClarityNew,P.default.text),children:["当前观看",(0,n.jsx)("span",{className:P.default.textClarityNewColor,children:G}),"画质，登录即可畅享",(0,n.jsx)("span",{className:P.default.textClarityNewColor,children:null!=ed?ed:"高清"}),"画质"]}),(0,n.jsx)(d.Button,{type:"primary",size:"small",theme:"solid",className:P.default.button,children:"立即登录"}),(0,n.jsx)(E.z,{svg:(0,n.jsx)(j.Z,{}),onClick:e=>{e.cancelBubble=!0,e.stopPropagation(),e.preventDefault(),e.returnValue=!1,en(),m.logInstance.sendLog("hdLoginGuideClick",(0,t._)({params_for_special:"uc_login",enter_from:(0,C.vM)(),guide_type:"bar_guide",duration:Date.now()-el.current,action:"close"},(0,I.t)()))},className:P.default.close}),(0,n.jsx)(E.z,{svg:(0,n.jsx)(S.Z,{}),className:P.default.down})]}),es):null};var R=l("255333"),D=l("777480"),B=l("205457"),O=l("894416");let H=e=>{let{userInfo:i,isActive:l,abtestData:t,awemeInfo:a,dispatch:r,player:s,currentIndex:d,isInnerFeed:u,isModalVideo:c,modalEnterFrom:v,srSceneType:f}=e,g=(0,o.useRef)(a);return(0,o.useEffect)(()=>{g.current=a},[a]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,{userInfo:i,dispatch:r,awemeInfo:a,isActive:a.awemeId===g.current.awemeId&&l,player:s,currentIndex:d,abtestData:t,isInnerFeed:u}),(0,n.jsx)(R.K,{isActive:l,userInfo:i,dispatch:r,awemeInfo:a,player:s,abtestData:t}),(0,n.jsx)(D.ZL,{isActive:l,userInfo:i,dispatch:r,abtestData:t,awemeInfo:a,isInnerFeed:u,isModalVideo:c,modalEnterFrom:v,srSceneType:f})]})},F=e=>{let i=(0,O.N)();return(0,n.jsx)(B.k,{componentName:"Clarity",Slardar:i,children:(0,n.jsx)(H,(0,t._)({},e))})}},255333:function(e,i,l){l.d(i,{K:function(){return S}});var t=l(520739);l(874386),l(779788),l(250440);var n=l(563097),o=l(88648),a=l(734123),r=l(309931),s=l(713097),d=l.n(s),u=l(60013),c=l(147613),v=l(507217),f=l(746864),g=l(35730),m=l(637005),h=l(349998),p=l(555106),_=l(820303),x=l(782442),w=l(291773),y=l(410076),C=l(77741),I=l(224071);l(664996);var j=l(254897);let S=e=>{var i,l;let[s,S]=(0,o.useState)(!1),{attemptOpen:N,executeClose:b}=(0,u.B)({popName:"网络差清晰度切换提示",onOpen:()=>{S(!0)},onClose:()=>{S(!1)}}),[T,E]=(0,o.useState)(C.jH.low),[P,L]=(0,o.useState)(C.jH.lowTail),{awemeInfo:k,player:M,userInfo:A,isActive:R,abtestData:D}=e,{awemeId:B=""}=k,O=(0,o.useRef)(null),H=(0,o.useCallback)(()=>{var e,i;!(null==M?void 0:null===(e=M.video)||void 0===e?void 0:e.error)&&(null==M?void 0:null===(i=M.config)||void 0===i?void 0:i.userSelectDefinition)&&N({afterCallback:()=>{var e;m.emit(null==m?void 0:null===(e=m.EVENT)||void 0===e?void 0:e.clarityRel,{smartAppear:!0}),clearTimeout(O.current),O.current=setTimeout(()=>{clearTimeout(O.current),b()},5e3),I.Z.sendLog("clarityNotifyShow",(0,t._)({group_id:B},(0,h.t)()))}})},[M,B]);(0,c.o)(()=>{var e,i;let l;if((null==k?void 0:k.awemeType)!==(null==v?void 0:null===(e=f.e)||void 0===e?void 0:e.Note))return M&&R&&(null==M?void 0:null===(i=M.config)||void 0===i?void 0:i.userSelectDefinition)&&(l=setInterval(()=>{var e,i;let n=null==M?void 0:null===(e=M.getPlugin)||void 0===e?void 0:e.call(M,"bitrateselector"),o=null==n?void 0:null===(i=n.curBitRate)||void 0===i?void 0:i.definition,{type:a}=(null==n?void 0:n.needChangeDefinition(o))||{},r=Date.now(),s=(0,p.$o)(g.LocalStorageKeys.SmartClarity)||(0,t._)({},C.g),d=(0,_.G)(g.SessionStorageKeys.manualSwitch)||{};1===a&&r-s.lowTimestamp>C.Ts&&d.gearClarity!==C.hq.Fast?(E(C.jH.low),L(C.jH.lowTail),s.lowTimestamp=r,clearInterval(l),H()):2===a&&r-s.highTimestamp>C.Ts&&s.highTimes<5&&d.gearClarity!==C.hq.Hd&&(E(C.jH.high),L(C.jH.highTail),s.highTimestamp=r,s.highTimes+=1,clearInterval(l),H()),(0,p.qQ)(g.LocalStorageKeys.SmartClarity,s)},1e4)),()=>{var e;((null===(e=x.Le.getConfig(x.gI.AbtestData))||void 0===e?void 0:e.useCache)!==1||l)&&clearInterval(l)}},[M,R,A,B]);let F=()=>{b()},V=(0,o.useCallback)(e=>{C.y8.includes(null==e?void 0:e.pluginName)&&b()},[]);(0,o.useEffect)(()=>{if(M&&R)return M.on("icon_mouseenter",V),()=>{null==M||M.off("icon_mouseenter",V)}},[M,B,R]);(0,o.useEffect)(()=>{var e;let i=m.listen("changeNext",F),l=m.listen("changePrev",F);null==M||M.on("playSwitchPrevBefore",F),null==M||M.on("playSwitchNextBefore",F),null==M||M.on(a.Events.MINI_STATE_CHANGE,F);let t=m.listen(m.EVENT.feedVideoCardLocateCurrentVideo,F),n=null==m?void 0:m.listen(null==m?void 0:null===(e=m.EVENT)||void 0===e?void 0:e.clarityRel,e=>{e.hoverSelected&&b()});return()=>{null==i||i(),null==l||l(),null==M||M.off("playSwitchPrevBefore",F),null==M||M.off("playSwitchNextBefore",F),null==M||M.off(a.Events.MINI_STATE_CHANGE,F),t(),n()}},[M]);let U=null==M?void 0:null===(l=M.getPlugin("PlayClaritySettingPlugin"))||void 0===l?void 0:null===(i=l.root)||void 0===i?void 0:i.querySelector(".smart-tooltip-slot");return s&&U?(0,r.createPortal)((0,n.jsxs)("div",{className:d()("isDark",y.default.smartClarityAdjust),onMouseEnter:()=>{clearTimeout(O.current)},onMouseLeave:()=>{O.current=setTimeout(()=>{clearTimeout(O.current),b()},5e3)},onClick:()=>{var e;let i=(0,_.G)(g.SessionStorageKeys.manualSwitch);i.gearClarity=C.hq.Auto,i.qualityType=0,i.gearName="",i.gearType=0,(0,_.t_)(g.SessionStorageKeys.manualSwitch,i),M.config.userSelectDefinition=0,b(),I.Z.sendLog("clarityNotifyClick",(0,t._)({group_id:B,action:"auto"},(0,h.t)())),m.emit(null==m?void 0:null===(e=m.EVENT)||void 0===e?void 0:e.clarityRel,{autoSwitch:!0})},children:[(0,n.jsxs)("div",{className:d()(y.default.textClarityNew,y.default.text),children:[T,(0,n.jsx)("div",{className:y.default.textClarityNewColor,children:"切换至智能模式"}),P]}),(0,n.jsx)(j.z,{svg:(0,n.jsx)(w.Z,{}),className:y.default.down})]}),U):null}},475004:function(e,i,l){l.d(i,{V:function(){return c}});var t=l(88648),n=l(734123),o=l(419631),a=l.n(o),r=l(746864),s=l(637005),d=l(860684);let u=!1,c=e=>{let{awemeInfo:i,isFirst:l,isActive:o,timeout:c=2e3}=e,v=(0,d.n)();return(0,t.useEffect)(()=>{if(!o)return;let e=a()(e=>{let{isDown:t=!1}=e||{};u=!0,s.emit(s.EVENT.firstFrameReady,{firstFrameReadyPlayer:v,vid:null==i?void 0:i.awemeId,playerId:null==v?void 0:v.playerId,isFirst:l,isDown:!!t,isActive:o})});if((null==i?void 0:i.awemeType)!==r.e.Normal){setTimeout(()=>{e({isDown:!0})},0);return}if((null==i?void 0:i.awemeType)===r.e.Normal&&v){if(!1===l&&!u||v.isPlaying||v.currentTime>0){setTimeout(()=>{e({isDown:!0})},0);return}v.on(n.Events.AUTOPLAY_STARTED,e),v.on(n.Events.AUTOPLAY_PREVENTED,e);let i=setTimeout(()=>{e({isDown:!0})},c);return()=>{v.off(n.Events.AUTOPLAY_STARTED,e),v.off(n.Events.AUTOPLAY_PREVENTED,e),clearTimeout(i)}}},[v,i,l,o,c]),null}},294031:function(e,i,l){l.d(i,{b:function(){return E}}),l(874386);var t=l(563097),n=l(88648),o=l(713097),a=l.n(o),r=l(734123),s=l(747909),d=l(782563),u=l(782442),c=l(375944),v=l(687297),f=l(387787),g=l(572076),m=l(32167),h=l(637005),p=l(761539),_=l(733608),x=l(42264),w=l(384765),y=l(162358),C=l(68137),I=l(731442),j=l(17750),S=l(104514),N=l(575462),b=l(860684),T=l(254897);let E=n.memo(e=>{let{awemeInfo:i,className:l,isActive:o,abtestData:E,mouseHandler:P,electronWarpRef:L}=e,k=(0,d.FJ)().awemePcClient,[M,A]=(0,n.useState)(u.Le.getConfig(u.gI.IsClientTopMode)),[R,D]=(0,n.useState)(u.Le.getConfig(u.gI.IsMiniWinHideMode)),B=(0,n.useRef)(null),O=(0,n.useRef)(null),H=(0,n.useRef)(null),F=(0,d.DT)(),V=!(0,c.dz)()&&(0,v.y)(k,">=","3.7.1"),U=(0,c.dz)()&&(0,v.y)(k,">=","3.7.1"),W=!(0,c.O)()&&(V||U)&&(0,v.y)(k,">=","3.7.0"),z=(0,f.x)(),Z=(0,b.n)(),G=(0,n.useCallback)(()=>{g.invoke("changeMiniWindowHideMode",{data:!1}),D(!1),u.Le.setConfig(u.gI.IsMiniWinHideMode,!1)},[]),K=n.useCallback(e=>{G(),g.invoke("WINDOW_MIN"),e.stopPropagation(),S.Z.sendLog("smallWindowOps",{action:"minimize",enter_from:(0,m.mo)(),group_id:null==i?void 0:i.awemeId,player_display_mode:(0,m.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:"click_window_minimize"})},[Z,null==i?void 0:i.awemeId]),Y=n.useCallback(e=>{h.emit(h.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"click_bar"}),e.stopPropagation()},[]),$=n.useCallback(e=>{g.invoke("SET_ALWAYS_ON_TOP",{data:!M}),A(e=>(u.Le.setConfig(u.gI.IsClientTopMode,!e),!e)),e.stopPropagation(),null==P||P(),S.Z.sendLog("smallWindowOps",{action:M?"cancel_pin":"pin",enter_from:(0,m.mo)(),group_id:null==i?void 0:i.awemeId,player_display_mode:(0,m.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:M?"click_window_cancel_pin":"click_window_pin"})},[M,Z,null==i?void 0:i.awemeId]),q=(0,n.useCallback)(e=>{g.invoke("changeMiniWindowHideMode",{data:!R}),D(!R),u.Le.setConfig(u.gI.IsMiniWinHideMode,!R),e.stopPropagation(),S.Z.sendLog("smallWindowOps",{action:R?"cancel_invisible":"invisible",enter_from:(0,m.mo)(),group_id:null==i?void 0:i.awemeId,player_display_mode:(0,m.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:R?"click_window_cancel_invisible":"click_window_invisible"})},[R,null==i?void 0:i.awemeId]);return(0,n.useEffect)(()=>{setTimeout(()=>{g.invoke("IS_ALWAYS_ON_TOP").then(e=>{let{data:i}=e;A(i)}),g.invoke("isMiniWindowHideMode").then(e=>{D(null==e?void 0:e.data)})},100)},[o]),(0,t.jsxs)("div",{className:a()(N.default.windowBar,"miniWinToolBar",l),children:[(0,t.jsx)("div",{ref:L,className:a()(N.default.electronWarp)}),(0,t.jsxs)("div",{className:N.default.miniWindowBtn,children:[W?(0,t.jsx)(s.Tooltip,{content:R?"已开启「隐身」，点击关闭":"已关闭「隐身」，点击开启",position:"bottom",getPopupContainer:()=>H.current||document.body,children:(0,t.jsx)("div",{className:N.default.toolItem,onClick:q,ref:H,children:R?(0,t.jsx)(T.z,{className:N.default.icon,svg:(0,t.jsx)(p.Z,{})}):(0,t.jsx)(T.z,{className:N.default.icon,svg:(0,t.jsx)(_.Z,{})})})}):null,(0,t.jsx)(s.Tooltip,{content:(0,t.jsxs)("div",{className:a()(N.default.tipContent),children:["返回大窗播放",!!(F&&j.SHORTCUT_KEY.pip.badgeText)&&(0,t.jsx)("span",{className:N.default.tag,children:j.SHORTCUT_KEY.pip.badgeText})]}),getPopupContainer:()=>O.current||document.body,position:"bottom",children:(0,t.jsx)("div",{ref:O,className:a()(N.default.toolItem,N.default.autoMargin),onClick:e=>{S.Z.sendLog("smallWindowOps",{action:"zoom",enter_from:(0,m.mo)(),group_id:null==i?void 0:i.awemeId,player_display_mode:(0,m.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:"click_window_zoom"}),Y(e)},children:(0,t.jsx)(T.z,{className:a()(N.default.icon,N.default.dropShadow),svg:(0,t.jsx)(x.Z,{})})})}),(0,t.jsx)(s.Tooltip,{content:M?"取消置顶":"窗口置顶",position:"bottom",getPopupContainer:()=>B.current||document.body,children:(0,t.jsx)("div",{ref:B,className:N.default.toolItem,onClick:$,children:M?(0,t.jsx)(T.z,{className:N.default.icon,svg:(0,t.jsx)(w.Z,{})}):(0,t.jsx)(T.z,{className:N.default.icon,svg:(0,t.jsx)(y.Z,{})})})}),(0,t.jsx)("div",{className:N.default.toolItem,onClick:K,children:(0,t.jsx)(T.z,{className:N.default.icon,svg:(0,t.jsx)(C.Z,{})})}),(0,t.jsx)("div",{className:N.default.toolItem,onClick:e=>{S.Z.sendLog("smallWindowOps",{action:"close",enter_from:(0,m.mo)(),group_id:null==i?void 0:i.awemeId,player_display_mode:(0,m.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:"click_window_close"}),z?(G(),g.invoke("WINDOW_CLOSE")):Y(e)},children:(0,t.jsx)(T.z,{className:a()(N.default.icon,N.default.dropShadow),svg:(0,t.jsx)(I.Z,{})})})]})]})})},104514:function(e,i,l){var t=l(544933);i.Z=new t.h({smallWindowOps:{eventName:"small_window_ops",params:{action:"",enter_from:"",group_id:"",player_display_mode:""}}})},644860:function(e,i,l){l.r(i),l.d(i,{MiniWinMask:function(){return L},MiniWinMaskInner:function(){return P}});var t=l("520739"),n=l("878389"),o=l("368200");l("874386"),l("250440");var a=l("563097"),r=l("88648"),s=l("713097"),d=l.n(s),u=l("734123"),c=l("782563"),v=l("387787"),f=l("375944"),g=l("32167"),m=l("782442"),h=l("79307"),p=l("799241"),_=l("226264"),x=l("272442"),w=l("544933"),y=new w.h({pauseVideo:{eventName:"pause_video",params:{enter_from:"",mute_remind:"none",click_method:"click",is_small_window:"0",player_display_mode:"",group_id:""}},smallWindowLoginNotify:{eventName:"small_window_login_notify",params:{enter_from:"",enter_method:""}}}),C=l("294031"),I=l("205457"),j=l("592162"),S=l("765027"),N=l("860684"),b=l("894416"),T=l("631493"),E=l("254897");let P=e=>{var{abtestData:i,enablePlaySwitch:l=!0}=e,s=(0,o._)(e,["abtestData","enablePlaySwitch"]);let w=(0,N.n)(),[I,b]=(0,r.useState)(!1),[P,L]=(0,r.useState)(!1),[k,M]=(0,r.useState)(!1),A=(0,r.useRef)(null),R=(0,r.useRef)(null),D=(0,r.useRef)(null),B=(0,c.DT)(),O=(0,v.x)();(0,r.useEffect)(()=>{let e=()=>{Array.from(document.getElementsByClassName("isMiniWindow")).forEach(e=>{var i,l;null===(i=e.classList)||void 0===i||i.add("isMiniWindowHover"),(null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.includes("slideMode"))&&e.setAttribute("data-mini","isMiniWindowHover")})},i=()=>{document.getElementsByClassName("isMiniWindowHover").length<=0&&e()},l=()=>{let e=document.getElementsByClassName("isMiniWindowHover");e.length>0&&Array.from(e).forEach(e=>{var i,l;null===(i=e.classList)||void 0===i||i.remove("isMiniWindowHover"),(null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.includes("slideMode"))&&e.removeAttribute("data-mini")})},t=i=>{(!(0,f.Q5)()||document.hasFocus())&&e()},n=e=>{let i=document.getElementsByClassName("isMiniWindow"),l={minXY:(0,f.Q5)()?0:5,maxX:(0,f.Q5)()?window.innerWidth:window.innerWidth-5,maxY:(0,f.Q5)()?window.innerHeight:window.innerHeight-5};((null==e?void 0:e.clientY)<l.minXY||(null==e?void 0:e.clientY)>=(null==l?void 0:l.maxY)||(null==e?void 0:e.clientX)<l.minXY||(null==e?void 0:e.clientX)>=l.maxX)&&Array.from(i).forEach(e=>{var i,l;null===(i=e.classList)||void 0===i||i.remove("isMiniWindowHover"),(null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.includes("slideMode"))&&e.removeAttribute("data-mini")})};return document.addEventListener("mouseover",t),document.addEventListener("mouseleave",n),window.addEventListener("blur",l),window.addEventListener("focus",i),()=>{document.removeEventListener("mouseover",t),document.removeEventListener("mouseleave",n),window.removeEventListener("blur",l),window.removeEventListener("focus",i)}},[]);let H=(0,r.useCallback)(()=>{y.sendLog("pauseVideo",{mute_remind:"none",enter_from:(0,g.mo)(),is_small_window:"1",click_method:"click",player_display_mode:(0,g.Ok)(),group_id:(null==s?void 0:s.awemeInfo.awemeId)||""})},[]),F=(0,r.useCallback)(()=>{T.s.getPlayerScene(null==w?void 0:w.playerId)===h.lT.Search&&(null==w||w.emitUserAction(u.Events.USER_ACTION,"switch_play_pause",{action:"switch_play_pause",paused:null==w?void 0:w.paused,pluginName:"click"}))},[null==w?void 0:w.playerId]),V=(0,r.useCallback)(()=>{var e,i;F(),(null==w?void 0:w.paused)?null==w||null===(e=w.play)||void 0===e||e.call(w):(null==w||null===(i=w.pause)||void 0===i||i.call(w),H())},[w,H]);return(0,r.useEffect)(()=>{let e=()=>{b(!(null==w?void 0:w.paused))};return w&&(w.on("play",e),w.on("pause",e)),()=>{w&&(w.off("play",e),w.off("pause",e))}},[w,H]),(0,r.useEffect)(()=>{w&&b(!(null==w?void 0:w.paused))},[w]),(0,r.useEffect)(()=>(m.Le.getConfig(m.gI.PlaySwitchMethods),m.Le.setConfig(m.gI.PlaySwitchMethods,""),()=>{R.current&&(clearTimeout(R.current),R.current=null)}),[]),(0,a.jsxs)("div",{ref:D,className:d()(x.default.wrap,{[x.default.newWrap]:O}),onMouseLeave:e=>{(null==e?void 0:e.target)!==A.current&&L(!1)},children:[(0,a.jsxs)("div",{className:d()(x.default.fullbox),onMouseOver:e=>{(null==e?void 0:e.target)!==A.current&&L(!0)},onMouseLeave:e=>{!B&&(null==e?void 0:e.target)!==A.current&&L(!1)},onClick:V,children:[I?(0,a.jsx)(E.z,{svg:(0,a.jsx)(p.Z,{}),className:d()(x.default.svg,{[x.default.hide]:O||k||!P})}):(0,a.jsx)(E.z,{svg:(0,a.jsx)(_.Z,{}),className:d()(x.default.svg,{[x.default.hide]:!O&&(k||!P)})}),(0,a.jsx)(C.b,{awemeInfo:null==s?void 0:s.awemeInfo,className:d()({[x.default.hide]:!O&&(k||!P),[x.default.miniWindowOptimize]:O}),abtestData:i,electronWarpRef:A}),O&&(0,a.jsx)(j.N,{awemeInfo:null==s?void 0:s.awemeInfo,hitMiniWindowOptimize:O})]}),(0,a.jsx)(S.I,(0,n._)((0,t._)({},s),{playSwitchCb:()=>m.Le.setConfig(m.gI.PlaySwitchMethods,"click_button"),className:d()(x.default.playSwitchContainer,{[x.default.hide]:!l||!O&&(k||!P),[x.default.miniWindowOptimize]:O})}))]})},L=e=>{let i=(0,b.N)();return(0,a.jsx)(I.k,{componentName:"MiniWinMask",Slardar:i,children:(0,a.jsx)(P,(0,t._)({},e))})}},488799:function(e,i,l){l.d(i,{U:function(){return g}});var t=l(520739),n=l(563097);l(88648);var o=l(713097),a=l.n(o),r=l(256277),s=l(422959),d=l(411362),u=l(205457),c=l(894416),v=l(501305);let f=e=>{var i;let{awemeInfo:l}=e,t=null==l?void 0:l.desc,o=null==l?void 0:null===(i=l.authorInfo)||void 0===i?void 0:i.nickname,u=null==l?void 0:l.mixInfo,c=(0,r.Jt)(l),f=(0,r.Kf)(l);return(0,n.jsxs)("div",{className:a()("miniInfo",v.default.wrap),children:[(0,n.jsx)("div",{className:v.default.nickname,children:(0,n.jsx)(s.Z,{className:v.default.userText,text:`@${o}`})}),(0,n.jsxs)("div",{className:a()(v.default.title,{[v.default.isAd]:c||f}),children:[(0,n.jsx)(s.Z,{className:v.default.text,text:t,isRemoveRowspan:!0,children:(null==u?void 0:u.currentEpisode)&&(0,n.jsxs)("span",{children:["第",null==u?void 0:u.currentEpisode,"集："]})}),(c||f)&&(0,n.jsx)(d.Vp,{className:a()(v.default.adTag),presetType:"ad",children:"广告"})]})]})},g=e=>{let i=(0,c.N)();return(0,n.jsx)(u.k,{componentName:"MiniWinInfoWeb",Slardar:i,children:(0,n.jsx)(f,(0,t._)({},e))})}},248333:function(e,i,l){l.d(i,{B:function(){return j}});var t=l("520739"),n=l("878389");l("602157"),l("874386");var o=l("563097"),a=l("88648"),r=l("713097"),s=l.n(r),d=l("410665"),u=l("658065"),c=l("122391"),v=l("182424"),f=l("381927"),g=l("544933"),m=new g.h({videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}}}),h=l("906499"),p=l("456128"),_=l("473677"),x=l("205457"),w=l("860684"),y=l("894416");function C(e){let{onClick:i,targetHref:l,className:a,cardHidden:r,style:u,alinkProps:c={},imgSrc:g,description:m,title:x,onShow:w,type:y="",player:C,target:I}=e,j=(0,d.x)(()=>w());return(0,o.jsxs)(h.a,(0,n._)((0,t._)({onClick:e=>{null==i||i(e),null==C||C.pause()},href:l,className:s()(f.default.outerContainer,a,{[f.default.hidden]:r}),style:u,refEl:j},c),{target:I,children:[(0,o.jsxs)("div",{className:f.default.image,children:[(0,o.jsx)(p.Q,{src:g,iconStyle:{width:"100%",height:"100%"}}),"variety"===y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:f.default.miniTitle,children:"正片"}),(0,o.jsx)(_.Z,{className:f.default.playIcon,src:v.Z,width:32,height:32,viewBox:"0 0 39 39"})]})]}),(0,o.jsxs)("div",{className:f.default.information,children:[(0,o.jsx)("div",{className:f.default.description,children:m}),(0,o.jsx)("div",{className:f.default.title,children:x})]})]}))}function I(e){var i,l,r,s,d,v,f,g,h;let{awemeInfo:p,abtestData:_,isActive:x}=e,y=(0,w.n)(),I=(0,a.useRef)(""),[j,S]=(0,a.useState)(!1),N=(0,a.useCallback)(e=>{S(!e)},[]),{title:b,subtitle:T,roomLink:E,link:P,liveSource:L,type:k,vsContent:M}=(null==p?void 0:null===(i=p.webRawData)||void 0===i?void 0:i.anchorCardInfo)||{},A={dependOnPlayer:!0,title:T,description:b,targetHref:E,imgSrc:P,onShow:()=>null,onClick:()=>null,target:"_self"},R={group_id:null==p?void 0:p.awemeId,enter_from:(0,u.yW)(),type:""};switch(null==p?void 0:null===(r=p.webRawData)||void 0===r?void 0:null===(l=r.anchorCardInfo)||void 0===l?void 0:l.source){case"pc_movie_father":A.hidden=(null==_?void 0:_.showMovie)!==1,A.className="",A.target="_blank",A.targetHref+=`?previous_page=${(0,u.yW)()}`,R.type="movie",A.onShow=()=>{m.sendLog("videoAnchorShow",R)};break;case"variety":A.hidden=!E||(null==M?void 0:null===(s=M.user_statistics)||void 0===s?void 0:s.watch_ratio)>.9,R=(0,n._)((0,t._)({},R),{type:"vs",is_vs:1,author_id:null==M?void 0:null===(v=M.owner_user_id)||void 0===v?void 0:null===(d=v.c)||void 0===d?void 0:d.map(e=>`${e}`).join(""),vs_season_id:null==M?void 0:M.season_id_str,vs_episode_id:null==M?void 0:M.episode_id_str,room_id:"",vs_ep_group_id:null==M?void 0:M.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==M?void 0:null===(f=M.episode_type)||void 0===f?void 0:f.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==M?void 0:null===(g=M.episode_type)||void 0===g?void 0:g.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==M?void 0:null===(h=M.episode_type)||void 0===h?void 0:h.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""}),A.alinkProps={target:"_blank"},A.target="_blank",A.type="variety",A.onShow=()=>{var e,i,l;m.sendLog("videoAnchorShow",R),m.sendLog("vsVideoShow",{enter_from_merge:(0,u.yW)(),enter_method:"video_anchor_module",previous_page:(0,c.z)("web_link"),action_type:"click",is_vs:1,vs_season_id:null==M?void 0:M.season_id_str,vs_episode_id:null==M?void 0:M.episode_id_str,room_id:"",vs_ep_group_id:null==M?void 0:M.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==M?void 0:null===(e=M.episode_type)||void 0===e?void 0:e.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==M?void 0:null===(i=M.episode_type)||void 0===i?void 0:i.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==M?void 0:null===(l=M.episode_type)||void 0===l?void 0:l.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""})}}A.onClick=()=>{m.sendLog("videoAnchorClick",R)};let{imgSrc:D,hidden:B=!0}=A;return(0,a.useEffect)(()=>{var e;return null==y||null===(e=y.on)||void 0===e||e.call(y,"titleIsFold",N),()=>{var e;null==y||null===(e=y.off)||void 0===e||e.call(y,"titleIsFold",N)}},[]),(0,a.useEffect)(()=>{I.current=D},[D]),(0,o.jsx)(o.Fragment,{children:B||I.current!==D||!x?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(C,(0,n._)((0,t._)({},A),{cardHidden:j,player:y}))})}let j=e=>{let i=(0,y.N)();return(0,o.jsx)(x.k,{componentName:"ProgramCard",Slardar:i,children:(0,o.jsx)(I,(0,t._)({},e))})}},77821:function(e,i,l){l.d(i,{O:function(){return o}});var t=l(88648),n=l(77172);let o=e=>{let{player:i,showContextMenu:l,awemeInfo:o,hideContextMenu:a,containerStatus:r}=e;(0,t.useEffect)(()=>{if(i){var e;let t=(0,n.H)(i),o=e=>{var t,n;(null==i?void 0:null===(n=i.video)||void 0===n?void 0:null===(t=n.parentElement)||void 0===t?void 0:t.contains(null==e?void 0:e.target))&&l(e)};return null===(e=i.root)||void 0===e||e.addEventListener("contextmenu",o,!0),null==t||t.addEventListener("contextmenu",l),document.addEventListener("click",a,!0),()=>{var e;null===(e=i.root)||void 0===e||e.removeEventListener("contextmenu",o,!0),document.removeEventListener("click",a,!0),null==t||t.removeEventListener("contextmenu",l)}}},[i,o,l]),(0,t.useEffect)(()=>{if(r)return r.addEventListener("contextmenu",l),()=>{r.removeEventListener("contextmenu",l)}},[r,l])}},244773:function(e,i,l){l.r(i),l.d(i,{MenuList:function(){return F},MenuListInner:function(){return H}});var t=l(520739),n=l(878389);l(874386),l(338172),l(250440);var o=l(563097),a=l(88648),r=l(713097),s=l.n(r),d=l(734123),u=l(567754),c=l(17750),v=l(746864),f=l(788418),g=l(122691),m=l(102337),h=l(256277),p=l(325982),_=l(371260),x=l(696332),w=l(14108),y=l(367366),C=l(176638),I=l(637005),j=l(658065),S=l(32167),N=l(555106),b=l(945977),T=l(702726),E=l(35730),P=l(966648),L=l(489278),k=l(77821),M=l(774150),A=l(860684),R=l(894416),D=l(906499),B=l(205457),O=l(527965);d.I18N.extend([{LANG:"zh",TEXT:{FULLSCREEN_TIPS:`${x.a.t("full_screen",{},"进入全屏")}<span class="shortcutKey">H</span>`,EXITFULLSCREEN_TIPS:`${x.a.t("full_screen_exit",{},"退出全屏")}<span class="shortcutKey">H</span>`,PIP:`${x.a.t("pip",{},"小窗模式")}<span class="shortcutKey">U</span>`}}]);let H=e=>{let{isActive:i=!1,shortcutDisable:l,shortcutInclude:r,shortcutExclude:x,awemeInfo:R,shortCutFiltered:B=[],showEnterDetail:H=!1,showAdMenu:F=!1,modalEnterFrom:V,userInfo:U,abtestData:W,directJumpToUser:z,showRecommendToFriend:Z}=e,G=(0,A.n)(),{awemeId:K}=R||{},[Y,$]=(0,a.useState)(!1),[q,Q]=(0,a.useState)({x:0,y:0}),[X,J]=(0,a.useState)(null),ee=(0,a.useRef)(null),{isShortcutListShow:ei}=(0,P.y)({isNoPlayer:!0,isLogin:null==U?void 0:U.isLogin}),el=(0,a.useMemo)(()=>c.getShortcut({disable:l,include:r,exclude:x}),[l,r,x,ei]),et=e=>{var i;if(!(e&&(null===(i=ee.current)||void 0===i?void 0:i.contains(e.target))))$(!1)},en=(0,a.useCallback)(()=>{var e,i;let l=(null==R?void 0:R.awemeType)===v.e.XgVideo?(0,w.GN)(null==R?void 0:null===(e=R.authorInfo)||void 0===e?void 0:e.uid):(0,w.HC)(null==R?void 0:null===(i=R.authorInfo)||void 0===i?void 0:i.secUid,(0,u.stringify)({is_full_screen:(0,y.r)()?"1":"0",enter_method:"video_title",from_gid:R.groupId,vid:null==R?void 0:R.awemeId}));window.open(l,(0,C.f)()?"_self":"_blank","noopener")},[R]),eo=(0,a.useCallback)(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("feedback"===e&&I.emit(I.EVENT.showFeedback),"enterDetail"===e&&I.emit(I.EVENT.videoPause,"ShortCut_onEnterDetail"),"showComment"===e&&"video_detail"===(0,j.yW)()&&!(0,y.r)()&&I.emit(I.EVENT.commentFocus),"downloadVideo"===e&&(I.emit(I.EVENT.downloadVideo,R),T.logInstance.sendLog("download",{enter_from:(0,S.mo)(),enter_from_merge:(0,S.vM)(),group_id:null==R?void 0:R.awemeId,click_from:"right_click",boost_task_id:(null==R?void 0:R.boostTaskId)||""})),"createMultitaskingWindow"===e){let e=i;"string"==typeof e&&e.startsWith("//")?e=`https:${i}`:"string"==typeof e&&e.startsWith("/video")&&(e=`https://www.douyin.com${i}`),(0,N.qQ)(E.LocalStorageKeys.MultiWindowMenuListRedDot,1),(0,O.handleCreateMultitaskWindow)(W,e,"right_click_menu",!0)}z&&"onAvatar"===e?en():null==G||G.emit(e,i),$(!1)},[G,R,en,W,z]);(0,a.useEffect)(()=>{if(z&&G)return G.on("onAvatar",en),()=>{G.off("onAvatar",en)}},[en,G,z]);let{menuList:ea,adMenuList:er}=(0,M._)({shortcut:el,emitEvent:eo,position:q,showEnterDetail:H,setIsShow:$,awemeInfo:R,userInfo:U,modalEnterFrom:V,abtestData:W,showRecommendToFriend:Z}),es=(0,a.useMemo)(()=>(F?er:ea).filter(e=>!B.includes(e.key)),[F,er,ea,B]),ed=e=>{switch(!0){case!!e.link:return(0,a.createElement)(D.a,(0,n._)((0,t._)({},e.link),{className:L.default.itemText,key:e.text}),e.text);case!!e.component:return e.component;default:return(0,o.jsxs)("div",{className:L.default.contextMenuItem,onClick:e.handler,children:[(0,o.jsx)("div",{className:L.default.itemText,children:e.text}),e.key&&(0,o.jsxs)("div",{className:L.default.itemTip,children:["（",e.key,"）"]}),e.useRedDot&&(0,M.H)(e.redDotKey)&&(0,o.jsx)("div",{className:s()(L.default.itemRedDotBox,{[L.default.itemMarginLeft]:!e.key}),children:(0,o.jsx)("div",{className:L.default.itemRedDot})})]},e.text)}};(0,a.useEffect)(()=>{et()},[K,i]),(0,a.useEffect)(()=>{null==G||G.on(d.Events.FULLSCREEN_CHANGE,et);let e=I.listen(I.EVENT.pageFullScreen,()=>{et()});return()=>{null==G||G.off(d.Events.FULLSCREEN_CHANGE,et),null==e||e()}},[G]);let eu=(0,a.useCallback)(e=>{e.preventDefault();let{width:i,height:l,left:t,right:n,top:o,bottom:a}=G.root.getBoundingClientRect();if(ee.current&&ee.current.contains(e.target))return;let r=ee.current?ee.current.clientWidth:224,s=ee.current?ee.current.clientHeight:26*es.length+32-6,d=(null==e?void 0:e.clientX)+r>n?(null==e?void 0:e.clientX)-r-t:(null==e?void 0:e.clientX)-t;if(Q({x:d,y:(null==e?void 0:e.clientY)+s>a?(null==e?void 0:e.clientY)-s-o:(null==e?void 0:e.clientY)-o}),$(!0),(0,f.A)(R)||(0,g.L)(R)||(0,m.u)(R)){let e=(0,h.Rx)(R);(0,p.E)("othershow",{tag:(0,b.f)(),value:e.creative_id,log_extra:e.log_extra,refer:"feedback"})}},[G,R,ee,es]);return(0,k.O)({player:G,showContextMenu:eu,awemeInfo:R,hideContextMenu:et,containerStatus:X}),Y?(0,o.jsx)("div",{className:L.default.container,ref:J,children:(0,o.jsx)("div",{className:s()(L.default.contextMenuContainer,{[L.default.isAd]:(0,f.A)(R)||(0,_.o4)(R)||(0,g.L)(R)||(0,m.u)(R)}),style:{top:q.y,left:q.x},ref:ee,children:es.map(e=>ed(e))})}):(0,o.jsx)("div",{})},F=e=>{let i=(0,R.N)();return(0,o.jsx)(B.k,{componentName:"MenuList",Slardar:i,children:(0,o.jsx)(H,(0,t._)({},e))})}},874460:function(e,i,l){l.d(i,{k:function(){return f}}),l(874386);var t=l(563097),n=l(88648),o=l(713097),a=l.n(o),r=l(97199),s=l(366637),d=l(597321),u=l(943695),c=l(473677),v=l(254897);function f(e){var i;let{player:l,onMouseLeave:o,isActive:f,awemeInfo:g}=e,m=(0,n.useRef)(!0),[h,p]=(0,u.iu)({isSetLog:!0,awemeInfo:g,plugin:null==l?void 0:null===(i=l.getPlugin)||void 0===i?void 0:i.call(l,"InnerAutoPlayPlugin"),defaultModeRef:m}),_=e=>{null==l||l.emit(d.B.UpdateAutoPlay,{index:e,logParams:{enter_method:"play_setting_panel"}}),p(e),null==o||o()};return(0,t.jsxs)("div",{className:s.default.panel,children:[(0,t.jsxs)("div",{className:s.default.title,children:[(0,t.jsx)(v.z,{onClick:o,svg:(0,t.jsx)(r.Z,{}),style:{marginRight:"4px",fontSize:"12px",height:"12px"}}),(0,t.jsx)("span",{children:"连播"})]}),(0,t.jsx)("div",{className:s.default.virtual,children:u.zQ.map((e,i)=>(0,t.jsxs)("div",{className:a()(s.default.innerItem,{[s.default.selected]:i===h}),onClick:()=>_(i),children:[(0,t.jsx)(c.Z,{width:24,height:24,viewBox:"0 0 24 24",src:u.zf[i],onMouseEnter:()=>{}}),(0,t.jsx)("span",{children:e})]},e))})]})}},96372:function(e,i,l){l.d(i,{G:function(){return d}}),l(874386);var t=l(563097),n=l(88648),o=l(747909),a=l(256229),r=l(407866),s=l(597321);let d=e=>{let{isOnInit:i,player:l,isActive:d,logFn:u}=e,[c,v]=(0,n.useState)(!!i),f=(0,n.useCallback)(()=>{null==l||l.emit(s.B.UpdateImmersiveSwitch,{logParams:{enter_method:"play_setting_panel"}}),(0,a.hB)(),u("pure_mode")},[l]);return(0,n.useEffect)(()=>{let e=()=>{v(e=>!e)};if(l&&d)return null==l||l.on(s.B.UpdateImmersiveSwitch,e),()=>{null==l||l.off(s.B.UpdateImmersiveSwitch,e)}},[l,d]),(0,t.jsxs)("div",{className:r.default.switchBox,children:[(0,t.jsx)("div",{className:r.default.switchLabel,children:"清屏"}),(0,t.jsx)(o.Switch,{checked:c,onChange:f})]})}},923693:function(e,i,l){l.r(i),l.d(i,{SettingList:function(){return ef},SettingListInner:function(){return ev},SettingPlugin:function(){return eu}});var t=l("520739"),n=l("878389");l("874386"),l("179133"),l("826893");var o=l("563097"),a=l("88648"),r=l("489478"),s=l("734123"),d=l("713097"),u=l.n(d),c=l("35730"),v=l("491362"),f=l("658065"),g=l("32167"),m=l("820303"),h=l("782442"),p=l("330746"),_=l("637005"),x=l("362555"),w=l("47324"),y=l("747909"),C=l("256229"),I=l("407866"),j=l("550339"),S=l("597321");let N=e=>{let{autoPlayInit:i,player:l,isActive:t,logFn:n}=e,[r,s]=(0,a.useState)(i),d=(0,a.useCallback)(()=>{n("auto_play");let e={switchBy:j.l7.Shortcut,logParams:{enter_method:"play_setting_panel"}};null==l||l.emit(S.B.UpdateAutoPlaySwitch,e),(0,C.hB)()},[l,n]);return(0,a.useEffect)(()=>{let e=()=>{s(e=>!e)};if(l&&t)return null==l||l.on(S.B.UpdateAutoPlaySwitch,e),()=>{null==l||l.off(S.B.UpdateAutoPlaySwitch,e)}},[l,t]),(0,o.jsxs)("div",{className:I.default.switchBox,children:[(0,o.jsx)("div",{className:I.default.switchLabel,children:"连播"}),(0,o.jsx)(y.Switch,{checked:r,onChange:d})]})};var b=l("96372");let T=e=>{let{isOnInit:i,langInit:l,player:t,isActive:n,logFn:r}=e,[s,d]=(0,a.useState)(i),[c,v]=(0,a.useState)(l),[f,g]=(0,a.useState)(!1),m=(0,a.useCallback)(()=>{null==t||t.emit("switchSubtitles",{isOn:!s}),(0,C.hB)()},[t,s]),h=(0,a.useCallback)(e=>{null==t||t.emit("switchSubtitles",{lang:e,isOn:!0})},[t]);return(0,a.useEffect)(()=>{let e=e=>{let{isOn:i,lang:l}=e;void 0!==i&&d(i),void 0!==l&&v(l)};if(t&&n)return null==t||t.on("switchSubtitlesSuccess",e),()=>{null==t||t.off("switchSubtitlesSuccess",e)}},[t,n]),(0,o.jsxs)("div",{className:u()(I.default.switchBox,I.default.subtitlesBox),onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[(0,o.jsx)("div",{className:I.default.switchLabel,children:"字幕"}),(0,o.jsx)(y.Switch,{checked:s,onChange:m}),(0,o.jsxs)("div",{className:u()(I.default.langbox,{[I.default.show]:f}),children:[(0,o.jsx)("div",{className:u()(I.default.langboxItem,{[I.default.selected]:"zh"===c}),onClick:()=>h("zh"),children:"简体中文"}),(0,o.jsx)("div",{className:u()(I.default.langboxItem,{[I.default.selected]:"en"===c}),onClick:()=>h("en"),children:"英文"})]})]})};var E=l("929582"),P=l("254897");let L=e=>{let{onChange:i,logFn:l}=e;return(0,o.jsxs)("div",{className:I.default.switchBox,onClick:()=>{null==i||i(),null==l||l("auto_play")},children:[(0,o.jsx)("div",{className:I.default.switchLabel,children:"连播"}),(0,o.jsx)("div",{className:I.default.select,children:(0,o.jsx)(P.z,{svg:(0,o.jsx)(E.Z,{className:"noTransform"}),className:"noTransform",style:{fontSize:"12px",display:"flex",alignItems:"center"}})})]})};var k=l("544933"),M=new k.h({clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),A=l("288679"),R=l("522376");let D=(e,i,l)=>{let t=R.SELECT_LIST_MAP[l].find(i=>Number(i)===Number(e));return i&&void 0!==t?`${t}x`:"倍速"},B=e=>{let{playbackRate:i,hasSelect:l,onChange:t,disable:n,logFn:r,player:s,disableSpeed:d,setIsShowPlayBackRatio:c,speedType:v}=e,[g,m]=(0,a.useState)(i);return(0,A.u)(s,S.B.ChangePlayRate,e=>{let{rate:i}=e;m(i)}),(0,a.useEffect)(()=>{m(i)},[i]),(0,o.jsxs)("div",{className:u()(I.default.switchBox,{[I.default.disable]:n}),onClick:()=>{if(!n){if(d){M.sendLog("clickHoverLogin",{enter_method:"speed_up",enter_from:(0,f.yW)(),params_for_special:"uc_login"}),_.emit(_.EVENT.loginBlockKeyBoard,{speed:!0,callback:()=>{null==t||t(),null==r||r("speed"),setTimeout(()=>{c(!1)},3e3)}});return}null==t||t(),null==r||r("speed")}},children:[(0,o.jsx)("div",{className:I.default.switchLabel,children:"倍速"}),(0,o.jsx)("div",{className:I.default.select,children:!d||n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:n?"1.0x":D(g,l,v)}),(0,o.jsx)(P.z,{svg:(0,o.jsx)(E.Z,{className:"noTransform"}),className:"noTransform",style:{fontSize:"12px",display:"flex",alignItems:"center"}})]}):(0,o.jsx)(y.Button,{theme:"solid",className:I.default.loginBtn,children:"登录即享"})})]})};var O=l("777480");let H=e=>{let{onChange:i,logFn:l}=e,{currentState:[t]}=(0,O.Jy)(e);return(0,o.jsxs)("div",{className:I.default.switchBox,onClick:()=>{null==i||i(),null==l||l("clarity")},children:[(0,o.jsx)("div",{className:I.default.switchLabel,children:"清晰度"}),(0,o.jsxs)("div",{className:I.default.select,children:[(0,o.jsx)("div",{children:t}),(0,o.jsx)(P.z,{svg:(0,o.jsx)(E.Z,{className:"noTransform"}),className:"noTransform",style:{fontSize:"12px",display:"flex",alignItems:"center"}})]})]})};var F=l("410665"),V=l("97199"),U=l("349998"),W=new k.h({clarityNotifyShow:{eventName:"clarity_notify_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityNotifyClick:{eventName:"clarity_notify_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityCellShow:{eventName:"clarity_cell_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityCellClick:{eventName:"clarity_cell_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:"",enter_from_merge:"",enter_from:"",item_duration_ms:0,player_display_mode:""}},clarityBubbleShow:{eventName:"clarity_bubble_show",params:{group_id:"",clarity:"",is_auto:1,method:"",gear_name:""}}}),z=l("136916");let Z=e=>{W.sendLog("clarityCellShow",(0,t._)({},e))},G=e=>{let{awemeInfo:i,onMouseLeave:l,player:r,userInfo:s,lists:d,indexSelected:c,setIndexSelected:v,setCurrentState:f}=e,g=(0,F.x)(Z.bind(null,(0,n._)((0,t._)({group_id:null==i?void 0:i.awemeId},(0,U.t)()),{enter_method:"play_setting_panel"}))),m=(0,a.useCallback)(e=>{var i;null==r||r.emit(S.B.UpdateClarity,{item:e,logParams:{enter_method:"play_setting_panel"}}),v(e.key),null==f||f(e.label),null==l||l(),_.emit(null==_?void 0:null===(i=_.EVENT)||void 0===i?void 0:i.clarityRel,{exitInner:!0})},[r,l]);return(0,o.jsxs)("div",{ref:g,className:u()(z.default.panel,"clarityPanel",{[z.default.notLogin]:!(null==s?void 0:s.isLogin)}),children:[(0,o.jsxs)("div",{className:z.default.title,children:[(0,o.jsx)(P.z,{onClick:l,svg:(0,o.jsx)(V.Z,{}),style:{marginRight:"4px",fontSize:"12px",height:"12px"}}),(0,o.jsx)("span",{children:"清晰度"})]}),(0,o.jsx)("div",{className:z.default.virtual,children:null==d?void 0:d.map(e=>(0,o.jsx)("div",{className:u()(z.default.item,{[z.default.selected]:e.key===c}),onClick:()=>m(e),children:e.val},e.key))})]})};function K(e){let{player:i,ratio:l,awemeInfo:t,logParams:n,onMouseLeave:r,speedType:s}=e,[d,c]=(0,a.useState)(l),v=e=>{null==i||i.emit(S.B.UpdateRadio,{rate:e,click_method:"play_setting_panel"}),c(Number(e)),null==r||r()};return(0,A.u)(i,S.B.ChangePlayRate,()=>{null==r||r()}),(0,o.jsxs)("div",{className:z.default.panel,children:[(0,o.jsxs)("div",{className:z.default.title,children:[(0,o.jsx)(P.z,{onClick:r,svg:(0,o.jsx)(V.Z,{}),style:{marginRight:"4px",fontSize:"12px",height:"12px"}}),(0,o.jsx)("span",{children:"倍速"})]}),(0,o.jsx)("div",{className:z.default.virtual,children:R.SELECT_LIST_MAP[s].map(e=>(0,o.jsxs)("div",{className:u()(z.default.item,{[z.default.selected]:Number(d)===Number(e)}),onClick:()=>v(Number(e)),children:[e,"x"]},e))})]})}var Y=l("874460"),$=new k.h({playSettingPanelShow:{eventName:"play_setting_panel_show",params:{enter_from_merge:"",enter_from:""}},playSettingPanelClick:{eventName:"play_setting_panel_click",params:{enter_from_merge:"",enter_from:"",click_position:""}},playSettingIconShow:{eventName:"play_setting_icon_show",params:{enter_from_merge:"",enter_from:"",icon:""}}}),q=l("85599"),Q=l("399083"),X=l("860684"),J=l("894416"),ee=l("205457"),ei=l("552167"),el=l("517864"),et=l("679126"),en=l("356650"),eo=l("371738"),ea=l("261745");let er=new Map([[Q.p7.AutoPlayer,e=>(0,o.jsx)(N,(0,t._)({},e))],[Q.p7.Clear,e=>(0,o.jsx)(b.G,(0,t._)({},e))],[Q.p7.Subtitles,e=>(0,o.jsx)(T,(0,t._)({},e))],[Q.p7.InnerAutoPlayer,e=>(0,o.jsx)(L,(0,t._)({},e))],[Q.p7.PlayBackRatio,e=>(0,o.jsx)(B,(0,t._)({},e))],[Q.p7.FakeScreen,e=>(0,o.jsx)(H,(0,t._)({},e))],[Q.p7.WatchLater,e=>(0,o.jsx)(q.nf,(0,n._)((0,t._)({},e),{isMini:!0}))]]),es=()=>{$.sendLog("playSettingPanelShow",{enter_from_merge:(0,f.yW)(),enter_from:(0,g.vM)()})},ed=e=>{$.sendLog("playSettingPanelClick",{enter_from_merge:(0,f.yW)(),enter_from:(0,g.vM)(),click_position:e})},eu=e=>{var i,l,r,s,d,f,g,y,C,I,S,N,b,T;let{hideList:E,awemeInfo:L,player:k,isActive:M,userInfo:A,dispatch:R,abtestData:D,isAdAweme:B,search33PxUnify:H}=e,[F,V]=(0,a.useState)(!0),[U,W]=(0,a.useState)(!1),[z,Z]=(0,a.useState)(!1),[$,q]=(0,a.useState)(!1),X=(0,a.useRef)(!1),J=(0,a.useRef)(null),ee=(0,a.useRef)(null),et=new Map([[Q.p7.AutoPlayer,{autoPlayInit:(null===(l=k.getPlugin(j.JI.pluginName))||void 0===l?void 0:null===(i=l.config)||void 0===i?void 0:i.nextAutoPlay)||!1,player:k,isActive:M,logFn:ed}],[Q.p7.Clear,{isOnInit:(null===(s=k.getPlugin(ei.Yd.pluginName))||void 0===s?void 0:null===(r=s.config)||void 0===r?void 0:r.isOn)||!1,player:k,isActive:M,logFn:ed}],[Q.p7.Subtitles,{isOnInit:(null===(f=k.getPlugin(el.EY.pluginName))||void 0===f?void 0:null===(d=f.config)||void 0===d?void 0:d.isOn)||!1,langInit:(null===(y=k.getPlugin(el.EY.pluginName))||void 0===y?void 0:null===(g=y.config)||void 0===g?void 0:g.lang)||"zh",player:k,isActive:M,logFn:ed}],[Q.p7.InnerAutoPlayer,{onChange:()=>{V(!0),q(!0)},logFn:ed}],[Q.p7.PlayBackRatio,{onChange:()=>{V(!0),Z(!0)},setIsShowPlayBackRatio:Z,hasSelect:null!==(0,m.G)(c.SessionStorageKeys.PlayerPlaybackratio),playbackRate:(0,m.G)(c.SessionStorageKeys.PlayerPlaybackratio)||1,disable:B,logFn:ed,player:k,disableSpeed:h.Le.getConfig(h.gI.disableSpeed),speedType:(0,p.G6)()?v.$.Safari:v.$.Normal}],[Q.p7.FakeScreen,{onChange:()=>{V(!0),W(!0)},userInfo:A,abtestData:D,awemeInfo:L,currentDefinition:null==k?void 0:null===(S=k.getPlugin)||void 0===S?void 0:null===(I=S.call(k,"bitrateselector"))||void 0===I?void 0:null===(C=I.curBitRate)||void 0===C?void 0:C.definition,userSelectDefinition:null==k?void 0:k.config.userSelectDefinition,userSelectUpdate:null==k?void 0:k.config.userSelectUpdate,logFn:ed,player:k}],[Q.p7.WatchLater,{player:k,isActive:M,logFn:ed,awemeInfo:L,loginDispatch:R,isLogin:null==A?void 0:A.isLogin}]]),eu=(0,a.useCallback)(e=>{var i,l,t;if(!e.target.closest(".semi-portal"))clearTimeout(ee.current),((null==e?void 0:e.target)===(null==J?void 0:J.current)||(null==J?void 0:null===(i=J.current)||void 0===i?void 0:i.contains(null==e?void 0:e.target))||(null==e?void 0:e.target)===(null==k?void 0:null===(t=k.root)||void 0===t?void 0:null===(l=t.querySelector)||void 0===l?void 0:l.call(t,".setting-icon")))&&(V(!1),es()),!X.current&&(_.emit(_.EVENT.videoStopPlayNext),X.current=!0)},[]);(0,a.useEffect)(()=>()=>_.emit(_.EVENT.videoRemoveStopPlayNext),[]);let ec=(0,en.zJ)(L),{indexSelectedState:[ev,ef],lists:eg,swichStatus:em,currentState:[eh,ep]}=(0,O.Jy)(e),e_=-1!==E.findIndex(e=>e[0]===Q.p7.FakeScreen),ex=(0,a.useRef)(null);return(0,o.jsxs)("div",{className:w.default.container,onMouseEnter:eu,ref:J,onMouseLeave:()=>{ee.current=setTimeout(()=>{V(!0)},300),W(!1),Z(!1),q(!1),_.emit(_.EVENT.videoRemoveStopPlayNext),X.current=!1},children:[F?null:(0,o.jsx)("div",{className:u()(w.default.panel,"semi-always-dark","setting-panel",{[w.default.search]:H}),children:E.map(e=>{let i=er.get(e[0]),l=et.get(e[0]);return null==i?void 0:i((0,n._)((0,t._)({},l),{key:e[0]}))})}),U&&(0,o.jsx)(G,{awemeInfo:L,userInfo:A,onMouseLeave:()=>{V(!1),W(!1),V(!0)},dispatch:R,player:k,isActive:M,currentDefinition:null==k?void 0:null===(T=k.getPlugin)||void 0===T?void 0:null===(b=T.call(k,"bitrateselector"))||void 0===b?void 0:null===(N=b.curBitRate)||void 0===N?void 0:N.definition,userSelectDefinition:null==k?void 0:k.config.userSelectDefinition,abtestData:D,userSelectUpdate:null==k?void 0:k.config.userSelectUpdate,lists:eg,indexSelected:ev,setIndexSelected:ef,setCurrentState:ep}),z&&(0,o.jsx)(K,{player:k,ratio:(0,m.G)(c.SessionStorageKeys.PlayerPlaybackratio)||1,awemeInfo:L,logParams:{},onMouseLeave:()=>{V(!1),Z(!1),V(!0)},speedType:(0,p.G6)()?v.$.Safari:v.$.Normal}),$&&!ec&&(0,o.jsx)(Y.k,{onMouseLeave:()=>{V(!1),q(!1)},player:k,isActive:M,awemeInfo:L}),(0,o.jsx)(eo.A,{visible:em!==ea.N.Off&&e_,current:eh,swichStatus:em,getPopupContainer:()=>ex.current,children:(0,o.jsx)("div",{className:w.default.iconContainer,ref:ex,children:(0,o.jsx)(P.z,{svg:(0,o.jsx)(x.Z,{className:"noTransform"}),className:"setting-icon"})})})]})};class ec extends s.Plugin{static get pluginName(){return"SettingListPlugin"}static get defaultConfig(){return{position:r.POSITIONS.CONTROLS_RIGHT,index:10,className:"xgplayer-setting-list"}}afterCreate(){this.renderRoot()}destroy(){(0,et.v)(this)}renderRoot(){this.root&&(0,et.s)(this,(0,o.jsx)(eu,(0,t._)({},this.config)))}render(){return'<xg-icon class="xgplayer-setting-list" data-state="normal"></xg-icon>'}}let ev=e=>{let{awemeInfo:i,hideList:l,userInfo:o}=e,r=(0,X.n)();return(0,a.useEffect)(()=>{if(r)return r.registerPlugin(ec,(0,n._)((0,t._)({},e),{player:r})),()=>{r.getPlugin("SettingListPlugin")&&r.unRegisterPlugin("SettingListPlugin",!0)}},[r,i,l,o]),null},ef=e=>{let i=(0,J.N)();return(0,o.jsx)(ee.k,{componentName:"SettingListPlugin",Slardar:i,children:(0,o.jsx)(ev,(0,t._)({},e))})}},517864:function(e,i,l){l.d(i,{EY:function(){return y},SE:function(){return I}});var t=l(134761),n=l(520739);l(874386),l(250440);var o=l(563097),a=l(88648),r=l(489478),s=l(713097),d=l.n(s),u=l(734123),c=l(658065),v=l(32167),f=l(782442),g=l(205457);l(148429);var m=l(860684),h=l(894416),p=l(679126),_=l(702726),x=l(602394);let w=e=>{let{player:i,isOn:l,lang:t,onSwitch:n}=e,[r,s]=(0,a.useState)(!1),u=(0,a.useCallback)(e=>{n({lang:e,isOn:!0}),s(!1)},[n]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:d()("xgplayer-icon"),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,o.jsxs)("div",{className:"xgplayer-setting-label",onClick:()=>n({isOn:!l}),children:[(0,o.jsx)("button",{"aria-checked":"true",className:d()("xg-switch",{"xg-switch-checked":l}),"aria-labelledby":"xg-switch-pip",type:"button",children:(0,o.jsx)("span",{className:"xg-switch-inner"})}),(0,o.jsx)("span",{className:"xgplayer-setting-title",children:"字幕"})]}),(0,o.jsxs)("div",{className:d()("xgplayer-setting-slider",{show:r}),children:[(0,o.jsx)("div",{className:d()("xgplayer-setting-slider-item",{selected:"zh"===t}),onClick:()=>u("zh"),children:"简体中文"}),(0,o.jsx)("div",{className:d()("xgplayer-setting-slider-item",{selected:"en"===t}),onClick:()=>u("en"),children:"英文"})]})]})})};class y extends u.Plugin{static get pluginName(){return"SubtitlesSettingPlugin"}static get defaultConfig(){return{position:r.POSITIONS.CONTROLS_RIGHT,index:7.5,className:"xgplayer-subtitles-setting"}}afterCreate(){var e,i;if(!this.config.disable)this.renderRoot(),this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseLeave),null===(e=this.player)||void 0===e||e.on("switchSubtitles",this.updateSwitch),this.updateTargetsVisiblity(),this.config.isOn&&this.player.plugins.texttrack.switchSubTitle({language:this.config.lang}),_.logInstance.sendLog("showSubtitle",{enter_from:(0,c.yW)(),enter_method:this.player.root.clientWidth>=675?"bar":"setting",group_id:null===(i=this.config.awemeInfo)||void 0===i?void 0:i.awemeId,player_display_mode:(0,v.Ok)()})}destroy(){var e,i;this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseLeave),null===(e=this.player)||void 0===e||e.plugins.texttrack.switchOffSubtitle(),null===(i=this.player)||void 0===i||i.off("switchSubtitles",this.updateSwitch),(0,p.v)(this)}update(e){this.config=(0,n._)({},this.config,e)}updateTargetsVisiblity(){this.config.isOn?this.hideTargets():this.showTargets()}showTargets(){let e=this.root.closest(".basePlayerContainer");e&&u.Util.removeClass(e,"subtitles-switch-on")}hideTargets(){let e=this.root.closest(".basePlayerContainer");e&&u.Util.addClass(e,"subtitles-switch-on")}renderRoot(){let e=(0,o.jsx)(w,{player:this.player,isOn:this.config.isOn,lang:this.config.lang,onSwitch:e=>{let{isOn:i,lang:l}=e;this.updateSwitch({isOn:i,lang:l})}});(0,p.s)(this,e)}render(){return`
      <xg-icon class="xgplayer-subtitles-setting" data-state="normal">
      </xg-icon>
    `}constructor(...e){var i;super(...e),i=this,(0,t._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})}),(0,t._)(this,"onMouseLeave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,t._)(this,"updateSwitch",function(){var e,l;let{isOn:t,lang:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.player.plugins.texttrack.config.list,a=null!=n?n:i.config.lang;if(!o.find(e=>e.language===a)){x.F.info(`此视频暂不支持${"zh"===a?"中文":"英文"}字幕`),_.logInstance.sendLog("clickSubtitleError",{enter_from:(0,c.yW)(),enter_method:i.player.root.clientWidth>=675?"bar":"setting",group_id:null===(l=i.config.awemeInfo)||void 0===l?void 0:l.awemeId,button_type:t?"on":"off",button_name:"zh"===a?"cn":"en"});return}void 0!==n&&(i.config.lang=n),i.config.isOn=t,i.renderRoot(),i.updateTargetsVisiblity(),t?(i.player.plugins.texttrack.switchSubTitle({language:i.config.lang}),f.Le.setConfig(f.gI.SubtitlesCacheSwitch,{isOn:!0,lang:i.config.lang})):(i.player.plugins.texttrack.switchOffSubtitle(),f.Le.setConfig(f.gI.SubtitlesCacheSwitch,{isOn:!1,lang:i.config.lang})),i.player.emit("switchSubtitlesSuccess",{isOn:i.config.isOn,lang:i.config.lang}),_.logInstance.sendLog("clickSubtitle",{enter_from:(0,c.yW)(),enter_method:i.player.root.clientWidth>=675?"bar":"setting",group_id:null===(e=i.config.awemeInfo)||void 0===e?void 0:e.awemeId,button_type:i.config.isOn?"on":"off",button_name:"zh"===i.config.lang?"cn":"en",player_display_mode:(0,v.Ok)()})})}}let C=e=>{let{isActive:i,awemeInfo:l,abtestData:t}=e,n=(0,m.n)();return(0,a.useEffect)(()=>{if(n&&i){var e,t;if(l.claInfo){let i=l.claInfo.list.map(e=>({id:e.id,url:e.url,language:e.language.includes("CN")?"zh":"en",text:e.language.includes("CN")?"中文":"英文",default:!1}));null===(e=n.plugins.texttrack)||void 0===e||e.updateSubtitles(i)}else null===(t=n.plugins.texttrack)||void 0===t||t.updateSubtitles([])}},[n,i,l]),(0,a.useEffect)(()=>{if(n&&i&&l.claInfo){var e,o,a,r,s;let i=!1,d="zh";return(null==t?void 0:null===(e=t.subtitles)||void 0===e?void 0:e.cache_switch)&&(i=null!==(r=null===(o=f.Le.getConfig(f.gI.SubtitlesCacheSwitch))||void 0===o?void 0:o.isOn)&&void 0!==r&&r,d=null!==(s=null===(a=f.Le.getConfig(f.gI.SubtitlesCacheSwitch))||void 0===a?void 0:a.lang)&&void 0!==s?s:"zh"),n.registerPlugin(y,{isOn:i,lang:d,awemeInfo:l,abtestData:t}),()=>{n.getPlugin(y.pluginName)&&n.unRegisterPlugin(y.pluginName,!0)}}},[n,i,l,t]),(0,a.useEffect)(()=>{if(n&&i&&!l.claInfo){let e=n.root.closest(".basePlayerContainer");u.Util.removeClass(e,"subtitles-switch-on")}},[n,i,l]),null},I=e=>{let i=(0,h.N)();return(0,o.jsx)(g.k,{componentName:"SubtitlesPlugin",Slardar:i,children:(0,o.jsx)(C,(0,n._)({},e))})}},632685:function(e,i,l){l.d(i,{W:function(){return i9},h:function(){return i8}});var t=l("520739"),n=l("878389");l("874386"),l("429532"),l("675373");var o=l("563097"),a=l("88648"),r=l("713097"),s=l.n(r),d=l("746864"),u=l("256277"),c=l("79307"),v=l("491362"),f=l("17750"),g=l("150566"),m=l("94126"),h=l("387787"),p=l("667557"),_=l("14108"),x=l("176638"),w=l("330746"),y=l("208987"),C=l("294957"),I=l("81357"),j=l("5415"),S=l("270116"),N=l("552167"),b=l("940826"),T=l("894995"),E=l("550339"),P=l("517864"),L=l("169171"),k=l("85599"),M=l("439087"),A=l("445482"),R=l("392334"),D=l("159223"),B=l("855340"),O=l("371976"),H=l("437515"),F=l("205457");l("635303");var V=l("734123"),U=l.n(V),W=l("147613"),z=l("35730"),Z=l("161045"),G=l("555106"),K=l("997866"),Y=l("510063"),$=l("974865"),q=l("877639"),Q=l.n(q),X=l("367366"),J=l("782442"),ee=l("32167"),ei=l("734017");let el=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({xmlns:"http://www.w3.org/2000/svg",width:26,height:26,fill:"none",ref:i},e),{children:[(0,o.jsx)("g",{filter:"url(#arrowLeft_svg__filter_arrow_left)",children:(0,o.jsx)("path",{d:"M16.71 7.269a1.393 1.393 0 0 0-1.97 0l-5.056 5.056a1.393 1.393 0 0 0 0 1.97l.011.011 5.045 5.045a1.393 1.393 0 1 0 1.97-1.97l-4.072-4.071 4.071-4.071a1.393 1.393 0 0 0 0-1.97z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"arrowLeft_svg__filter_arrow_left",x:-1,y:0,width:28,height:28,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_6302_471173"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6302_471173",result:"shape"})]})})]}))),et=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({xmlns:"http://www.w3.org/2000/svg",width:26,height:26,fill:"none",ref:i},e),{children:[(0,o.jsx)("g",{filter:"url(#arrowRight_svg__filter_arrow_right)",children:(0,o.jsx)("path",{d:"M9.684 7.269a1.393 1.393 0 0 1 1.97 0l5.055 5.056a1.393 1.393 0 0 1 0 1.97l-.011.011-5.045 5.045a1.393 1.393 0 1 1-1.97-1.97l4.072-4.071-4.071-4.071a1.393 1.393 0 0 1 0-1.97z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"arrowRight_svg__filter_arrow_right",x:-1,y:0,width:28,height:28,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_6302_471172"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6302_471172",result:"shape"})]})})]})));var en=l("944450"),eo=l("645260"),ea=l.n(eo),er=l("613063"),es=l.n(er),ed=l("506467"),eu=l("860684"),ec=l("680475"),ev=l("288386");let{ArrowLeft:ef,ArrowRight:eg,A:em,D:eh}=ed.bf,ep=e=>{let i=(0,eu.n)(),{preClick:l,nextClick:n,disableShortCut:o=!1,active:r=!0}=e;return(0,a.useEffect)(()=>{if(!!r){if(i){if(o)return(0,ec.K)(i);let e={left:{keyCode:ef.keyCode,action:l,disable:!1,noBodyTarget:!1},right:{keyCode:eg.keyCode,action:n,disable:!1,noBodyTarget:!1},leftA:{keyCode:em.keyCode,action:l,disable:!1,noBodyTarget:!1},rightD:{keyCode:eh.keyCode,action:n,disable:!1,noBodyTarget:!1}},a={left:ea()(i,"plugins.keyboard.keyCodeMap.left"),right:ea()(i,"plugins.keyboard.keyCodeMap.right"),leftA:ea()(i,"plugins.keyboard.keyCodeMap.leftA"),rightD:ea()(i,"plugins.keyboard.keyCodeMap.rightD")};return es()(i,"plugins.keyboard.keyCodeMap",(0,t._)({},ea()(i,"plugins.keyboard.keyCodeMap")||{},e)),()=>{i.plugins.keyboard&&((0,ev.v)({currentCodeMap:i.plugins.keyboard.keyCodeMap,additionalCodeMap:e}),es()(i,"plugins.keyboard.keyCodeMap",(0,t._)({},ea()(i,"plugins.keyboard.keyCodeMap")||{},a)))}}}},[i,l,n,o,r]),null},e_=e=>{let{player:i,timeDuration:l=3e3}=e,[t,n]=(0,a.useState)(!1),o=(0,a.useRef)(),r=(0,a.useCallback)(()=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{n(!0),o.current=null},l)},[l]);return(0,a.useEffect)(()=>{if(null==i?void 0:i.root){var e,l,t;let a=()=>{o.current&&clearTimeout(o.current),n(!1)},s=()=>{n(!1),r()},d=()=>{n(!1),r()};return null==i||null===(e=i.root)||void 0===e||e.addEventListener("mouseenter",s),null==i||null===(l=i.root)||void 0===l||l.addEventListener("mousemove",d),null==i||null===(t=i.root)||void 0===t||t.addEventListener("mouseleave",a),()=>{var e,l,t;null==i||null===(e=i.root)||void 0===e||e.removeEventListener("mouseenter",s),null==i||null===(l=i.root)||void 0===l||l.removeEventListener("mousemove",d),null==i||null===(t=i.root)||void 0===t||t.removeEventListener("mouseleave",a)}}},[null==i?void 0:i.root,r,n]),(0,a.useEffect)(()=>()=>{o.current&&clearTimeout(o.current),o.current=null},[]),t};var ex=l("473677"),ew=l("544933");let ey={multiPhotoSlide:{eventName:"multi_photo_slide",params:{aweme_type:d.e.Note,enter_from:"",enter_method:"",author_id:"",group_id:"",pic_cnt:0,is_zoom:!1}},enterGraphicDetail:{eventName:"enter_graphic_detail",params:{enter_from:"",author_id:"",group_id:"",pic_cnt:0}},videoPlayFinish:{eventName:"video_play_finish",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",compilation_id:"",playlet_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",is_force:"0",trending_topic:""}},finishTuji:{eventName:"finish_tuji",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",compilation_id:"",playlet_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",is_force:"0",trending_topic:""}}};var eC=new ew.h(ey),eI=l("943695");let ej=e=>{var i,l;let{isActive:n,awemeInfo:r,swiper:u,onPlayFinish:c,playNextFunc:v,ablePlayNext:f,playPrevFunc:m,ablePlayPrev:h,logParams:p,arrowButtonSize:_=26,isClientMiniWin:x,disableShortCut:w=!1,isShowSideBar:y=!1,inSearch:C,leftStyle:I,rightStyle:j}=e,S=(0,eu.n)(),[N,b]=(0,a.useState)(!0),[T,E]=(0,a.useState)([!0,!0]),P=(0,a.useRef)(Date.now()),L=(0,a.useRef)(0),k=(0,a.useRef)(p),M=(0,a.useRef)(!0),A=(0,a.useRef)(null),R=e=>{b(e),M.current=e},D=e_({player:S});k.current=p;let B=(0,a.useCallback)(e=>{var i;let l=null==S?void 0:S.getPlugin("pictureProgress");null==l||null===(i=l.updatePercent)||void 0===i||i.call(l,e),L.current=e},[S]),O=(0,a.useCallback)(e=>{var i,l;eC.sendLog("multiPhotoSlide",(0,t._)({enter_from:null===(i=k.current)||void 0===i?void 0:i.enter_from,enter_method:"click_pic",author_id:null==r?void 0:null===(l=r.authorInfo)||void 0===l?void 0:l.uid,group_id:null==r?void 0:r.awemeId,pic_cnt:r.images.length,is_zoom:(0,X.r)()},k.current)),E([0===u.activeIndex,u.activeIndex===(null==r?void 0:r.images.length)-1]),R(!1),B((e+1)/r.images.length),null==u||u.slideTo(e,0)},[u,B,r]),H=(0,a.useCallback)(e=>{if(u.activeIndex>0){var i,l;eC.sendLog("multiPhotoSlide",(0,t._)({enter_from:null===(i=k.current)||void 0===i?void 0:i.enter_from,enter_method:(null==e?void 0:e.type)==="click"?"click_button":"keyboard",author_id:null==r?void 0:null===(l=r.authorInfo)||void 0===l?void 0:l.uid,group_id:null==r?void 0:r.awemeId,pic_cnt:r.images.length,is_zoom:(0,X.r)()},k.current)),R(!1),B(u.activeIndex/r.images.length),u.slidePrev(),E([0===u.activeIndex,u.activeIndex===(null==r?void 0:r.images.length)-1])}},[u,B,r]),F=(0,a.useCallback)(e=>{if(u.activeIndex<u.slides.length-1){var i;eC.sendLog("multiPhotoSlide",(0,t._)({enter_from:null==p?void 0:p.enter_from,enter_method:(null==e?void 0:e.type)==="click"?"click_button":"keyboard",author_id:null==r?void 0:null===(i=r.authorInfo)||void 0===i?void 0:i.uid,group_id:null==r?void 0:r.awemeId,pic_cnt:r.images.length,is_zoom:(0,X.r)()},k.current)),R(!1),B((u.activeIndex+2)/r.images.length),u.slideNext(),E([0===u.activeIndex,u.activeIndex===(null==r?void 0:r.images.length)-1])}},[u,B,r]);return ep({preClick:H,nextClick:F,disableShortCut:w}),(0,a.useEffect)(()=>{if(S&&(null==r?void 0:r.awemeType)===d.e.Note){let e=e=>{if(e){var i;eC.sendLog("enterGraphicDetail",{enter_from:null==p?void 0:p.enter_from,author_id:null==r?void 0:null===(i=r.authorInfo)||void 0===i?void 0:i.uid,group_id:null==r?void 0:r.awemeId,pic_cnt:r.images.length})}};return S.on(V.Events.FULLSCREEN_CHANGE,e),()=>{S.off(V.Events.FULLSCREEN_CHANGE,e)}}},[r,S]),(0,a.useEffect)(()=>{if(S&&(null==r?void 0:r.awemeType)===d.e.Note){let e=S.getPlugin("AutoPlaySettingPlugin")||S.getPlugin("SearchAutoPlaySettingPlugin");if(e)return e.playeNextWeightNum+=1,()=>{e.playeNextWeightNum-=1}}},[r,S]),(0,a.useEffect)(()=>{if(S&&(null==r?void 0:r.awemeType)===d.e.Note){let e=S.getPlugin("InnerAutoPlayPlugin");if(e)return e.config.innerAutoPlayWeight+=1,()=>{e.config.innerAutoPlayWeight-=1}}},[r,S]),(0,a.useEffect)(()=>{if(S)return L.current=0,S.registerPlugin(en.Z,{fragments:r.images.map(e=>({percent:1/r.images.length})),onInnerClick:O}),S.getPlugin(Y.Z.pluginName)&&S.unRegisterPlugin(Y.Z.pluginName,!0),S.getPlugin($.Z.pluginName)&&S.unRegisterPlugin($.Z.pluginName,!0),()=>{S.getPlugin(en.Z.pluginName)&&S.unRegisterPlugin(en.Z.pluginName,!0),S.registerPlugin(Y.Z,{}),S.registerPlugin($.Z,{})}},[S,O]),(0,a.useEffect)(()=>{if(u){let e=!1,i=()=>{e=!1,setTimeout(()=>O(u.activeIndex))},l=()=>{R(!1),B((u.activeIndex+1)/r.images.length),e||u.once("touchEnd",i),e=!0};try{u.on("touchMove",l)}catch(e){}return()=>{try{null==u||u.off("touchMove",l)}catch(e){}}}},[u,B,O]),(0,a.useEffect)(()=>{if(n&&S){var e,i,l,o,a;if(N){P.current=Date.now()-3e3*L.current*r.images.length;let n=S.getPlugin("pictureProgress");0===L.current?null==n||null===(e=n.innerList)||void 0===e||e.reset():null==n||null===(l=n.innerList)||void 0===l||null===(i=l.progressList)||void 0===i||i.map((e,i)=>{V.Util.addClass(null==e?void 0:e.played,"transition")});let o=Q()(()=>{S.cumulateTime>=5e3&&(A.current(),S.off(V.Events.TIME_UPDATE,o))},500,{leading:!0,trailing:!0}),a=()=>{var e,i,l,a,s;if((Date.now()-P.current)/(3e3*r.images.length)>=1){S.off(V.Events.TIME_UPDATE,o),S.on(V.Events.TIME_UPDATE,o),B(1),L.current=0,P.current=Date.now(),null==n||null===(e=n.innerList)||void 0===e||e.reset();let t=S.getPlugin("AutoPlaySettingPlugin")||S.getPlugin("SearchAutoPlaySettingPlugin"),r=S.getPlugin("InnerAutoPlayPlugin");t&&(null==t?void 0:null===(i=t.config)||void 0===i?void 0:i.nextAutoPlay)&&(null==t?void 0:t.playeNextWeightNum)<=1&&f&&(null==t?void 0:t.stopFlag)===0?null==v||v():r&&(null===(l=J.Le.getConfig(J.gI.InnerAutoPlay))||void 0===l?void 0:l.modeIndex)===eI.KM.Nomal&&r.config.innerAutoPlayWeight>=0&&f&&(null==r?void 0:r.stopFlag)===0?null==v||v({from:"auto"}):r&&(null===(a=J.Le.getConfig(J.gI.InnerAutoPlay))||void 0===a?void 0:a.modeIndex)===eI.KM.Reverse&&r.config.innerAutoPlayWeight>=0&&h&&(null==r?void 0:r.stopFlag)===0&&(null==m||m({from:"auto"}))}else B((Date.now()-P.current)/(3e3*r.images.length));let d=Math.floor((Date.now()-P.current)/3e3);if(u&&u.activeIndex!==d){if(null==u?void 0:u.destroyed)return;eC.sendLog("multiPhotoSlide",(0,t._)({enter_from:null==p?void 0:p.enter_from,enter_method:"auto",author_id:null==r?void 0:null===(s=r.authorInfo)||void 0===s?void 0:s.uid,group_id:null==r?void 0:r.awemeId,pic_cnt:r.images.length,is_zoom:(0,X.r)()},k.current)),u.slideTo(d,u.activeIndex===r.images.length-1?0:250),E([0===u.activeIndex,u.activeIndex===(null==r?void 0:r.images.length)-1])}},s=()=>{P.current=Date.now()-3e3*L.current*r.images.length};return S.on(V.Events.TIME_UPDATE,a),S.on(V.Events.PLAY,s),()=>{S.off(V.Events.TIME_UPDATE,a),S.off(V.Events.PLAY,s),S.off(V.Events.TIME_UPDATE,o)}}{let e=S.getPlugin("pictureProgress");null==e||null===(a=e.innerList)||void 0===a||null===(o=a.progressList)||void 0===o||o.map((e,i)=>{V.Util.removeClass(null==e?void 0:e.played,"transition")});let i=()=>{R(!0)};(null==S?void 0:S.paused)&&S.once(V.Events.PLAY,i);let l=()=>{S.once(V.Events.PLAY,i)},t=()=>{S.off(V.Events.PLAY,i)};return S.on(V.Events.PAUSE,l),S.on(V.Events.ENDED,t),()=>{var n,o;S.off(V.Events.PAUSE,l),S.off(V.Events.ENDED,t),S.off(V.Events.PLAY,i),null==e||null===(o=e.innerList)||void 0===o||null===(n=o.progressList)||void 0===n||n.map((e,i)=>{V.Util.addClass(null==e?void 0:e.played,"transition")})}}}L.current=0},[n,S,N,B,u,v,f]),(0,a.useEffect)(()=>{if(u){let e=()=>{if(u.activeIndex===(null==r?void 0:r.images.length)-1){var i,l,n,o,a,s,v,f;eC.sendLog("videoPlayFinish",(0,t._)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,ee.mo)(),author_id:null==r?void 0:null===(i=r.authorInfo)||void 0===i?void 0:i.uid,group_id:null==r?void 0:r.awemeId,log_pb:null==r?void 0:r.logPb,compilation_id:null==r?void 0:null===(l=r.mixInfo)||void 0===l?void 0:l.mixId,playlet_id:null==r?void 0:null===(n=r.seriesInfo)||void 0===n?void 0:n.seriesId,tab_name:(0,ei.zD)()||(0,g.Rs)("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(o=J.Le.getConfig("isCollapseAuthorCard"))||void 0===o?void 0:o.isCollapseAuthorCard)?0:1,from_follow_list:(null===(a=J.Le.getConfig("fromFollowList"))||void 0===a?void 0:a.tag)?"1":"0",is_mute:(null==S?void 0:S.muted)?"1":"0",is_force:(null===(s=J.Le.getConfig(J.gI.ForceMuted))||void 0===s?void 0:s.currentMuteType)==="browser"?"1":"0",trending_topic:"",aweme_type:(null==r?void 0:r.isSlides)?d.e.Slides:null==r?void 0:r.awemeType,pic_cnt:null==r?void 0:null===(v=r.images)||void 0===v?void 0:v.length,is_small_window:"0",column_type:(null==p?void 0:p.column_type)||(null==p?void 0:null===(f=p.search_params)||void 0===f?void 0:f.column_type),is_selected_label:(null==r?void 0:r.weeklyRecommend)?1:0},p));try{u.off("slideChange",e)}catch(e){}null==c||c()}};try{u.slideTo(0,0),E([0===u.activeIndex,u.activeIndex===(null==r?void 0:r.images.length)-1]),u.on("slideChange",e)}catch(e){}return()=>{try{u.off("slideChange",e)}catch(e){}}}},[u,r]),(0,a.useEffect)(()=>{if(u){A.current=()=>{var e,i,l,n,o,a,s;eC.sendLog("finishTuji",(0,t._)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,ee.mo)(),author_id:null==r?void 0:null===(e=r.authorInfo)||void 0===e?void 0:e.uid,group_id:null==r?void 0:r.awemeId,log_pb:null==r?void 0:r.logPb,compilation_id:null==r?void 0:null===(i=r.mixInfo)||void 0===i?void 0:i.mixId,playlet_id:null==r?void 0:null===(l=r.seriesInfo)||void 0===l?void 0:l.seriesId,tab_name:(0,ei.zD)()||(0,g.Rs)("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(n=J.Le.getConfig("isCollapseAuthorCard"))||void 0===n?void 0:n.isCollapseAuthorCard)?0:1,from_follow_list:(null===(o=J.Le.getConfig("fromFollowList"))||void 0===o?void 0:o.tag)?"1":"0",is_mute:(null==S?void 0:S.muted)?"1":"0",is_force:(null===(a=J.Le.getConfig(J.gI.ForceMuted))||void 0===a?void 0:a.currentMuteType)==="browser"?"1":"0",trending_topic:"",aweme_type:null==r?void 0:r.awemeType,pic_cnt:null==r?void 0:null===(s=r.images)||void 0===s?void 0:s.length,is_small_window:"0"},p)),A.current=()=>{}};let e=()=>{u.activeIndex===(null==r?void 0:r.images.length)-1&&A.current&&!M.current&&A.current()};return u.on("slideChange",e),()=>{u.off("slideChange",e)}}},[u,r]),!x&&(null==r?void 0:null===(i=r.images)||void 0===i?void 0:i.length)>1?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:s()(K.default.pageController),children:[(0,o.jsx)("div",{className:s()(K.default.arrow,{[K.default.disabled]:T[0],[K.default.inSideBar]:y,[K.default.inSearch]:C,[K.default.hide]:D,[I]:I}),style:{width:`${_}px`,height:`${_}px`},children:(0,o.jsx)(ex.Z,{src:el,width:_,height:_,viewBox:"0 0 26 26",onClick:H})}),(0,o.jsxs)("div",{className:s()(K.default.pageNumber),children:[(0,o.jsx)("span",{children:((null==u?void 0:u.activeIndex)||0)+1}),(0,o.jsx)("span",{children:"/"}),(0,o.jsx)("span",{children:null==r?void 0:null===(l=r.images)||void 0===l?void 0:l.length})]}),(0,o.jsx)("div",{className:s()(K.default.arrow,{[K.default.disabled]:T[1],[K.default.inSideBar]:y,[K.default.inSearch]:C,[K.default.hide]:D,[j]:j}),style:{width:`${_}px`,height:`${_}px`},children:(0,o.jsx)(ex.Z,{src:et,width:_,height:_,viewBox:"0 0 26 26",onClick:F})})]})}):null};l("527785");var eS=l("637005");let eN=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({xmlns:"http://www.w3.org/2000/svg",width:26,height:26,fill:"none",ref:i},e),{children:[(0,o.jsx)("g",{filter:"url(#arrowLeft_svg__filter_arrow_left)",children:(0,o.jsx)("path",{d:"M16.71 7.269a1.393 1.393 0 0 0-1.97 0l-5.056 5.056a1.393 1.393 0 0 0 0 1.97l.011.011 5.045 5.045a1.393 1.393 0 1 0 1.97-1.97l-4.072-4.071 4.071-4.071a1.393 1.393 0 0 0 0-1.97z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"arrowLeft_svg__filter_arrow_left",x:-1,y:0,width:28,height:28,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_6302_471173"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6302_471173",result:"shape"})]})})]}))),eb=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({xmlns:"http://www.w3.org/2000/svg",width:26,height:26,fill:"none",ref:i},e),{children:[(0,o.jsx)("g",{filter:"url(#arrowRight_svg__filter_arrow_right)",children:(0,o.jsx)("path",{d:"M9.684 7.269a1.393 1.393 0 0 1 1.97 0l5.055 5.056a1.393 1.393 0 0 1 0 1.97l-.011.011-5.045 5.045a1.393 1.393 0 1 1-1.97-1.97l4.072-4.071-4.071-4.071a1.393 1.393 0 0 1 0-1.97z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"arrowRight_svg__filter_arrow_right",x:-1,y:0,width:28,height:28,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_6302_471172"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6302_471172",result:"shape"})]})})]})));var eT=l("257165"),eE=l("841135"),eP=l("73729");let eL={singleTime:2e3,speed:250},ek=e=>{var i,l,r,u,c,v,f;let{isActive:m,awemeInfo:h,swiper:p,onPlayFinish:_,playNextFunc:x,ablePlayNext:w,playPrevFunc:y,ablePlayPrev:C,logParams:I,arrowButtonSize:j=26,isClientMiniWin:S,disableShortCut:N=!1,isShowSideBar:b=!1,inSearch:T,leftStyle:E,rightStyle:P}=e,L=(0,eu.n)(),[k,M]=(0,a.useState)(!0),[A,R]=(0,a.useState)([!0,!0]),D=(0,a.useRef)(I),B=(0,a.useRef)(!0),O=(0,a.useRef)(null),H=e=>{M(e),B.current=e},F=(0,a.useRef)(null),U=(null==h?void 0:null===(i=h.images)||void 0===i?void 0:i.length)===1&&(null==h?void 0:null===(r=h.images)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:l.clipType)===5,W=U&&(null==h?void 0:null===(c=h.images)||void 0===c?void 0:null===(u=c[0])||void 0===u?void 0:u.livePhotoType)===1,z=(0,eP.i)({player:L}),Z=(0,a.useMemo)(()=>h.images.reduce((e,i)=>e+(i.video?i.video.duration:eL.singleTime),0),[h]),G=(0,a.useMemo)(()=>{if(h&&0===h.images.length)return[];let e=-1;return h.images.map(i=>{if(i.video){let l={type:"video",start:e+1,end:e+i.video.duration,duration:i.video.duration,percent:1/h.images.length};return e=l.end,l}{let i={type:"image",start:e+1,end:e+eL.singleTime,duration:eL.singleTime,percent:1/h.images.length};return e=i.end,i}})},[h]);D.current=I;let q=(0,a.useCallback)(e=>{var i;let l=null==L?void 0:L.getPlugin("pictureProgress");null==l||null===(i=l.updateIndex)||void 0===i||i.call(l,e,B.current)},[L]),Q=(0,a.useCallback)(e=>{var i;let l=null==L?void 0:L.getPlugin("pictureProgress");null==l||null===(i=l.updateTime)||void 0===i||i.call(l,e)},[L]),el=(0,a.useCallback)(e=>{var i,l;eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null===(i=D.current)||void 0===i?void 0:i.enter_from,author_id:null==h?void 0:null===(l=h.authorInfo)||void 0===l?void 0:l.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:"click_pic",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType})),p.slideTo(e,0),H(!1),q(e),R([0===p.activeIndex,p.activeIndex===(null==h?void 0:h.images.length)-1])},[p,q,h]),et=(0,a.useCallback)(e=>{if(p.activeIndex>0){var i,l;eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null===(i=D.current)||void 0===i?void 0:i.enter_from,author_id:null==h?void 0:null===(l=h.authorInfo)||void 0===l?void 0:l.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:(null==e?void 0:e.type)==="click"?"click_button":"keyboard",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType})),H(!1),q(p.activeIndex-1),p.slidePrev(),R([0===p.activeIndex,p.activeIndex===(null==h?void 0:h.images.length)-1])}},[p,q,h]),en=(0,a.useCallback)(e=>{if(p.activeIndex<p.slides.length-1){var i;eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null==I?void 0:I.enter_from,author_id:null==h?void 0:null===(i=h.authorInfo)||void 0===i?void 0:i.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:(null==e?void 0:e.type)==="click"?"click_button":"keyboard",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType})),H(!1),q(p.activeIndex+1),p.slideNext(),R([0===p.activeIndex,p.activeIndex===(null==h?void 0:h.images.length)-1])}},[p,q,h]);(0,eE.X)({preClick:et,nextClick:en,disableShortCut:N}),(0,a.useEffect)(()=>{if(L&&(null==h?void 0:h.awemeType)===d.e.Note){let e=e=>{if(e){var i;eC.sendLog("enterGraphicDetail",{enter_from:null==I?void 0:I.enter_from,author_id:null==h?void 0:null===(i=h.authorInfo)||void 0===i?void 0:i.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length})}};return L.on(V.Events.FULLSCREEN_CHANGE,e),()=>{L.off(V.Events.FULLSCREEN_CHANGE,e)}}},[h,L]),(0,a.useEffect)(()=>{if(L&&(null==h?void 0:h.awemeType)===d.e.Note){let e=L.getPlugin("AutoPlaySettingPlugin")||L.getPlugin("SearchAutoPlaySettingPlugin");if(e)return e.playeNextWeightNum+=1,()=>{e.playeNextWeightNum-=1}}},[h,L]),(0,a.useEffect)(()=>{if(L&&(null==h?void 0:h.awemeType)===d.e.Note){let e=L.getPlugin("InnerAutoPlayPlugin");if(e)return e.config.innerAutoPlayWeight+=1,()=>{e.config.innerAutoPlayWeight-=1}}},[h,L]),(0,a.useEffect)(()=>{if(L)return L.registerPlugin(eT.Z,{fragments:G,duration:Z,hide:U,onInnerClick:el}),L.getPlugin(Y.Z.pluginName)&&L.unRegisterPlugin(Y.Z.pluginName,!0),L.getPlugin($.Z.pluginName)&&L.unRegisterPlugin($.Z.pluginName,!0),()=>{L.getPlugin(eT.Z.pluginName)&&L.unRegisterPlugin(eT.Z.pluginName,!0),L.registerPlugin(Y.Z,{}),L.registerPlugin($.Z,{})}},[L,el]),(0,a.useEffect)(()=>{if(p){let e=!1,i=()=>{e=!1,setTimeout(()=>el(p.activeIndex))},l=()=>{H(!1),q(p.activeIndex),e||p.once("touchEnd",i),e=!0};try{p.on("touchMove",l)}catch(e){}return()=>{try{null==p||p.off("touchMove",l)}catch(e){}}}},[p,q,el]);let eo=(0,a.useCallback)(()=>{var e,i,l;let t=L.getPlugin("AutoPlaySettingPlugin")||L.getPlugin("SearchAutoPlaySettingPlugin"),n=L.getPlugin("InnerAutoPlayPlugin");t&&(null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.nextAutoPlay)&&(null==t?void 0:t.playeNextWeightNum)<=1&&w&&(null==t?void 0:t.stopFlag)===0?null==x||x():n&&(null===(i=J.Le.getConfig(J.gI.InnerAutoPlay))||void 0===i?void 0:i.modeIndex)===eI.KM.Nomal&&n.config.innerAutoPlayWeight>=0&&w&&(null==n?void 0:n.stopFlag)===0?null==x||x({from:"auto"}):n&&(null===(l=J.Le.getConfig(J.gI.InnerAutoPlay))||void 0===l?void 0:l.modeIndex)===eI.KM.Reverse&&n.config.innerAutoPlayWeight>=0&&C&&(null==n?void 0:n.stopFlag)===0&&(null==y||y({from:"auto"}))},[L,C,w,y,x]);return(0,a.useEffect)(()=>{if(m&&L&&p&&k&&"video"!==G[p.activeIndex].type){let e=1e3*L.currentTime;e>100&&h.imageAlbumMusicInfo.beginTime>1e3&&(e-=h.imageAlbumMusicInfo.beginTime);let i=()=>{let i=((L.currentTime+L.duration)*1e3-e)%(1e3*L.duration);if(h.imageAlbumMusicInfo.beginTime>1e3){let{beginTime:l,endTime:t}=h.imageAlbumMusicInfo,n=t-l;i=(1e3*L.currentTime-l+n-e)%n}if(i>=eL.singleTime){var l,o,a;if(p.activeIndex===h.images.length-1){eo(),q(0),R([!0,!1]),p.slideTo(0,0);let e=L.getPlugin("pictureProgress");null==e||null===(o=e.innerList)||void 0===o||o.reset(),eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null==I?void 0:I.enter_from,author_id:null==h?void 0:null===(a=h.authorInfo)||void 0===a?void 0:a.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:"auto",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType})),L.cumulateTime>=5e3&&O.current();return}q(p.activeIndex+1),R([!1,p.activeIndex+1===(null==h?void 0:h.images.length)-1]),p.slideTo(p.activeIndex+1,eL.speed),eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null==I?void 0:I.enter_from,author_id:null==h?void 0:null===(l=h.authorInfo)||void 0===l?void 0:l.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:"auto",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType}));return}Q(G[p.activeIndex].start+i)};return L.on(V.Events.TIME_UPDATE,i),()=>{L.off(V.Events.TIME_UPDATE,i)}}},[null==p?void 0:p.activeIndex,L,m,k,G,eo]),(0,a.useEffect)(()=>{if(m&&L&&p){let e=e=>{"switch_play_pause"===e.action&&e.paused&&H(!0)};return L.on(V.Events.USER_ACTION,e),()=>{L.off(V.Events.USER_ACTION,e)}}},[m,L,p]),(0,a.useEffect)(()=>{if(L){let e=!1,i=()=>{e&&eS.emit(eS.EVENT.notevideo,{type:"replay",playerId:L.playerId,index:p.activeIndex})},l=()=>{F.current&&(e=!0,clearTimeout(F.current))};return L.on("play",i),L.on("pause",l),()=>{L.off("play",i),L.off("pause",l)}}},[L]),(0,a.useEffect)(()=>{if(m&&L&&p){let e=eS.listen(eS.EVENT.notevideo,e=>{let{type:i,data:l,index:o,playerId:a}=e;if(L.playerId===a){if("start"===i&&U&&setTimeout(()=>{eS.emit(eS.EVENT.notevideo,{type:"onelive_start",playerId:L.playerId,isMix:W})},100),"timeupdate"===i&&p.activeIndex===o&&Q(G[p.activeIndex].start+l),"end"===i){if(U&&(eS.emit(eS.EVENT.notevideo,{type:"onelive_end",playerId:L.playerId,isMix:W}),W?F.current=setTimeout(()=>{eS.emit(eS.EVENT.notevideo,{type:"replay",playerId:L.playerId,index:p.activeIndex})},2500):setTimeout(()=>{eS.emit(eS.EVENT.notevideo,{type:"replay",playerId:L.playerId,index:p.activeIndex})},300)),k){var r,s,d;if(p.activeIndex===h.images.length-1){eo(),q(0),R([!0,!1]),p.slideTo(0,0);let e=L.getPlugin("pictureProgress");null==e||null===(s=e.innerList)||void 0===s||s.reset(),eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null==I?void 0:I.enter_from,author_id:null==h?void 0:null===(d=h.authorInfo)||void 0===d?void 0:d.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:"auto",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType})),L.cumulateTime>=5e3&&O.current();return}q(p.activeIndex+1),R([!1,p.activeIndex+1===(null==h?void 0:h.images.length)-1]),p.slideTo(p.activeIndex+1,eL.speed),eC.sendLog("multiPhotoSlide",(0,n._)((0,t._)({enter_from:null==I?void 0:I.enter_from,author_id:null==h?void 0:null===(r=h.authorInfo)||void 0===r?void 0:r.uid,group_id:null==h?void 0:h.awemeId,pic_cnt:h.images.length,is_zoom:(0,X.r)()},D.current),{enter_method:"auto",aweme_type:(null==h?void 0:h.isSlides)?151:null==h?void 0:h.awemeType}))}else setTimeout(()=>{eS.emit(eS.EVENT.notevideo,{type:"replay",playerId:L.playerId,index:p.activeIndex})},100)}}});return()=>{e(),clearTimeout(F.current)}}},[m,L,p,k,eo]),(0,a.useEffect)(()=>{if(p){let e=()=>{if(p.activeIndex===(null==h?void 0:h.images.length)-1){var i,l,n,o,a,r,s,u;eC.sendLog("videoPlayFinish",(0,t._)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,ee.mo)(),author_id:null==h?void 0:null===(i=h.authorInfo)||void 0===i?void 0:i.uid,group_id:null==h?void 0:h.awemeId,log_pb:null==h?void 0:h.logPb,compilation_id:null==h?void 0:null===(l=h.mixInfo)||void 0===l?void 0:l.mixId,playlet_id:null==h?void 0:null===(n=h.seriesInfo)||void 0===n?void 0:n.seriesId,tab_name:(0,ei.zD)()||(0,g.Rs)("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(o=J.Le.getConfig(J.gI.IsCollapseAuthorCard))||void 0===o?void 0:o.isCollapseAuthorCard)?0:1,from_follow_list:(null===(a=J.Le.getConfig(J.gI.FromFollowList))||void 0===a?void 0:a.tag)?"1":"0",is_mute:(null==L?void 0:L.muted)?"1":"0",is_force:(null===(r=J.Le.getConfig(J.gI.ForceMuted))||void 0===r?void 0:r.currentMuteType)==="browser"?"1":"0",trending_topic:"",aweme_type:(null==h?void 0:h.isSlides)?d.e.Slides:null==h?void 0:h.awemeType,pic_cnt:null==h?void 0:null===(s=h.images)||void 0===s?void 0:s.length,is_small_window:"0",column_type:(null==I?void 0:I.column_type)||(null==I?void 0:null===(u=I.search_params)||void 0===u?void 0:u.column_type),is_selected_label:(null==h?void 0:h.weeklyRecommend)?1:0},I));try{p.off("slideChange",e)}catch(e){}null==_||_()}};try{p.slideTo(0,0),R([0===p.activeIndex,p.activeIndex===(null==h?void 0:h.images.length)-1]),p.on("slideChange",e)}catch(e){}return()=>{try{p.off("slideChange",e)}catch(e){}}}},[p,h]),(0,a.useEffect)(()=>{if(p){O.current=()=>{var e,i,l,n,o,a,r;eC.sendLog("finishTuji",(0,t._)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,ee.mo)(),author_id:null==h?void 0:null===(e=h.authorInfo)||void 0===e?void 0:e.uid,group_id:null==h?void 0:h.awemeId,log_pb:null==h?void 0:h.logPb,compilation_id:null==h?void 0:null===(i=h.mixInfo)||void 0===i?void 0:i.mixId,playlet_id:null==h?void 0:null===(l=h.seriesInfo)||void 0===l?void 0:l.seriesId,tab_name:(0,ei.zD)()||(0,g.Rs)("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(n=J.Le.getConfig(J.gI.IsCollapseAuthorCard))||void 0===n?void 0:n.isCollapseAuthorCard)?0:1,from_follow_list:(null===(o=J.Le.getConfig(J.gI.FromFollowList))||void 0===o?void 0:o.tag)?"1":"0",is_mute:(null==L?void 0:L.muted)?"1":"0",is_force:(null===(a=J.Le.getConfig(J.gI.ForceMuted))||void 0===a?void 0:a.currentMuteType)==="browser"?"1":"0",trending_topic:"",aweme_type:null==h?void 0:h.awemeType,pic_cnt:null==h?void 0:null===(r=h.images)||void 0===r?void 0:r.length,is_small_window:"0"},I)),O.current=()=>{}};let e=()=>{p.activeIndex===(null==h?void 0:h.images.length)-1&&O.current&&!B.current&&O.current()};return p.on("slideChange",e),()=>{p.off("slideChange",e)}}},[p,h]),!S&&(null==h?void 0:null===(v=h.images)||void 0===v?void 0:v.length)>1?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:s()(K.default.pageController),children:[(0,o.jsx)("div",{className:s()(K.default.arrow,{[K.default.disabled]:A[0],[K.default.inSideBar]:b,[K.default.inSearch]:T,[K.default.hide]:z,[E]:E}),style:{width:`${j}px`,height:`${j}px`},children:(0,o.jsx)(ex.Z,{src:eN,width:j,height:j,viewBox:"0 0 26 26",onClick:et})}),(0,o.jsxs)("div",{className:s()(K.default.pageNumber),children:[(0,o.jsx)("span",{children:((null==p?void 0:p.activeIndex)||0)+1}),(0,o.jsx)("span",{children:"/"}),(0,o.jsx)("span",{children:null==h?void 0:null===(f=h.images)||void 0===f?void 0:f.length})]}),(0,o.jsx)("div",{className:s()(K.default.arrow,{[K.default.disabled]:A[1],[K.default.inSideBar]:b,[K.default.inSearch]:T,[K.default.hide]:z,[P]:P}),style:{width:`${j}px`,height:`${j}px`},children:(0,o.jsx)(ex.Z,{src:eb,width:j,height:j,viewBox:"0 0 26 26",onClick:en})})]})}):null};var eM=l.p+"media/generalBG.9f4484112e793191.png",eA=l.p+"media/douyinDefault.330eae8fad2b7adc.png",eR=l("322271");let eD=e=>{let{imageInfo:i,className:l,imgPlaceHolderClassName:t,isMini:n,isOneLive:r,isOneLiveMix:d}=e,[u,c]=(0,a.useState)(!0),[v,f]=(0,a.useState)(!1),[g,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(-1),[_,x]=(0,a.useState)(!1),y=(0,a.useRef)(0),C=(0,w.G6)(),I=(0,w.vU)();y.current=(null==i?void 0:i.width)/(null==i?void 0:i.height);let j=(0,a.useCallback)(()=>{g&&y.current&&(g.offsetWidth/y.current>g.offsetHeight-(n?0:33)?c(!0):c(!1))},[g,n]);(0,a.useEffect)(()=>{let e=eS.listen(eS.EVENT.notevideo,e=>{"onelive_start"===e.type&&!0===e.isMix&&x(!0),"onelive_end"===e.type&&!0===e.isMix&&x(!1)});return()=>e()},[]);let S=(0,a.useCallback)(()=>{v||f(!0)},[v]);(0,a.useEffect)(()=>{if(g&&j){let e=Z.Z.bind(g,j);return()=>{e&&e()}}},[g,j]),(0,a.useEffect)(()=>{g&&(n?g.setAttribute("normal",""):g.removeAttribute("normal"))},[g,n]);let N=(0,a.useMemo)(()=>{if(v)return null;if(-1!==h)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:null==i?void 0:i.urlList[h],className:s()({[eR.default.baseWidth]:!u,[eR.default.baseHeight]:u,[eR.default.isSafari]:C},eR.default.imgPlaceHolder,t),onError:S}),(0,o.jsxs)("div",{className:s()({[eR.default.backgroundImg]:!C,[eR.default.backgroundImgFirefox]:I,[eR.default.backgroundImgSarari]:C}),children:[(0,o.jsx)("img",{src:C?eM:(null==i?void 0:i.urlList[h])||eM}),!C&&(0,o.jsx)("div",{className:eR.default.backgroundMask})]})]});{let e=new Image;e.src=null==i?void 0:i.urlList[0];let l=setTimeout(()=>{null==i||i.urlList.map((e,i)=>{let l=new Image;l.src=e,l.onload=()=>p(i)})},2e3);return e.onload=()=>{p(0),clearTimeout(l)},(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:eA,className:s()({[eR.default.baseWidth]:!u,[eR.default.baseHeight]:u,[eR.default.isSafari]:C},eR.default.imgPlaceHolder,t)}),(0,o.jsxs)("div",{className:s()({[eR.default.backgroundImg]:!C,[eR.default.backgroundImgFirefox]:I,[eR.default.backgroundImgSarari]:C}),children:[(0,o.jsx)("img",{src:C?eM:eA}),!C&&(0,o.jsx)("div",{className:eR.default.backgroundMask})]})]})}},[v,h,S,u]);return(0,o.jsx)("div",{className:s()(l,eR.default.imgBackground,eR.default.playerShowInfo,{[eR.default.isFirefox]:I,[eR.default.livePhoto]:5===i.clipType,[eR.default.isOneLiveMix]:d,[eR.default.isInLive]:_}),ref:m,children:N})};var eB=l("158073"),eO=l("894416"),eH=l("750733"),eF=l("217281"),eV=l("962820");let eU=e=>{var i,l,t,n,r;let{isActive:u,awemeInfo:c,playNextFunc:v,playPrevFunc:f,ablePlayPrev:g,ablePlayNext:m,logParams:h,isMini:p,isClientMiniWin:_,onPlayFinish:x,customProps:w,disableShortCut:y=!1,isShowSideBar:C=!1,inSearch:I}=e,j=(0,eu.n)(),[S,N]=(0,a.useState)(null),[b,T]=(0,a.useState)(c),{arrowButtonSize:E=26,disableInactiveCursor:P=!1,leftStyle:L,rightStyle:k}=w||{},M=(null==c?void 0:null===(i=c.images)||void 0===i?void 0:i.length)===1&&(null==c?void 0:null===(t=c.images)||void 0===t?void 0:null===(l=t[0])||void 0===l?void 0:l.clipType)===5,A=M&&(null==c?void 0:null===(r=c.images)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.livePhotoType)===1,R=(0,a.useMemo)(()=>{var e;if((null==c?void 0:c.awemeType)!==d.e.Note)return[];if(u)return null==c?void 0:c.images;return(null==c?void 0:null===(e=c.images)||void 0===e?void 0:e.slice(0,1))||[]},[null==c?void 0:c.images,u,null==c?void 0:c.awemeType]),D=(0,a.useMemo)(()=>{var e,i;return!!(null==c?void 0:null===(i=c.images)||void 0===i?void 0:null===(e=i.find)||void 0===e?void 0:e.call(i,e=>e.video))},[null==c?void 0:c.images]);return((0,a.useEffect)(()=>()=>N(null),[]),(0,a.useEffect)(()=>{let e=null==j?void 0:j.innerContainer;if(e&&(null==c?void 0:c.awemeType)===d.e.Note)return V.Util.addClass(e,"hideXgVideo"),()=>{V.Util.removeClass(e,"hideXgVideo")}},[j,c]),(0,a.useEffect)(()=>{let{beginTime:e=0,endTime:i=Number.MAX_SAFE_INTEGER}=(null==c?void 0:c.imageAlbumMusicInfo)||{},l=()=>{(j.currentTime>=i/1e3||j.currentTime<e/1e3)&&(j.currentTime=e/1e3)};return(null==c?void 0:c.awemeType)===d.e.Note&&e>=0&&i>e&&(null==j||j.on(V.Events.TIME_UPDATE,l)),()=>{null==j||j.off(V.Events.TIME_UPDATE,l)}},[j,c]),(0,a.useEffect)(()=>{if(u&&S&&j){var e;S.update();let i=Z.Z.bind(null==S?void 0:null===(e=S.$el)||void 0===e?void 0:e[0],()=>{S.update()});return()=>{i&&i()}}},[S,u,j]),(0,a.useEffect)(()=>{T(c)},[c]),(0,W.o)(()=>{var e,i;if(u&&j&&(null==c?void 0:null===(e=c.imageAlbumMusicInfo)||void 0===e?void 0:e.volume)===0)return j.config.volume_raw=j.volume,j.volume=.01,()=>{j.volume=j.config.volume_raw,(0,G.qQ)(z.LocalStorageKeys.PLAYER_VOLUME,j.config.volume_raw),(0,eV.c)({volume:j.config.volume_raw})};!u&&j&&(null==c?void 0:null===(i=c.imageAlbumMusicInfo)||void 0===i?void 0:i.volume)===0&&j.config.volume_raw&&((0,G.qQ)(z.LocalStorageKeys.PLAYER_VOLUME,j.config.volume_raw),(0,eV.c)({volume:j.config.volume_raw}))},[u,j]),(null==c?void 0:c.awemeType)!==d.e.Note)?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eH.t,{direction:0,onSwiper:N,className:s()(K.default.swiperContainer,"focusPanel"),tabIndex:-1,data:R,slideKey:(e,i)=>`${null==e?void 0:e.uri}_${i}`,speed:250,children:(0,o.jsx)(eF.o,{className:K.default.pictureFeed,children:e=>{let{slideData:i,activeIndex:l,currentIndex:t}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{style:{width:"100%",height:"100%",zIndex:2,background:"transparent"},className:s()(K.default.mask,{[K.default.inactive]:l!==t&&P}),type:"button",onKeyDown:e=>null==e?void 0:e.preventDefault()}),(0,o.jsx)(eD,{imageInfo:i,isMini:p,isOneLive:M,isOneLiveMix:A}),u&&i.video&&(0,o.jsx)(eB.v,{albumMusic:c.imageAlbumMusicInfo,imageAlbumMusicInfo:c.imageAlbumMusicInfo,info:i,isMini:p,activeIndex:l,currentIndex:t,isOneLive:M,inSearch:I})]})}})}),b===c&&u&&!D&&(0,o.jsx)(ej,{isActive:u,awemeInfo:c,swiper:S,onPlayFinish:x,playNextFunc:v,playPrevFunc:f,ablePlayNext:m,ablePlayPrev:g,logParams:h,arrowButtonSize:E,isClientMiniWin:_,disableShortCut:y,isShowSideBar:C,inSearch:I,leftStyle:L,rightStyle:k}),b===c&&u&&D&&(0,o.jsx)(ek,{isActive:u,awemeInfo:c,swiper:S,onPlayFinish:x,playNextFunc:v,playPrevFunc:f,ablePlayNext:m,ablePlayPrev:g,logParams:h,arrowButtonSize:E,isClientMiniWin:_,disableShortCut:y,isShowSideBar:C,inSearch:I,leftStyle:L,rightStyle:k})]})},eW=e=>{let i=(0,eO.N)();return(0,o.jsx)(F.k,{componentName:"PictureMode",Slardar:i,children:(0,o.jsx)(eU,(0,t._)({},e))})};var ez=l("843029"),eZ=l("681799"),eG=l("341738"),eK=l("164619"),eY=l("522376"),e$=l("134761"),eq=l("489478");l("345411");var eQ=l("944189"),eX=l("425418");let eJ=(0,a.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("path",{d:"M17.974 17.11c-.634 0-1.149.515-1.149 1.15v3.83c0 .634.515 1.148 1.15 1.148h4.595c.634 0 1.149-.514 1.149-1.148v-3.83c0-.635-.515-1.15-1.15-1.15h-4.595z",fill:"#0A0C20"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.463 10.026a2.49 2.49 0 0 0-2.489 2.49v11.488a2.49 2.49 0 0 0 2.49 2.49h13.02a2.49 2.49 0 0 0 2.49-2.49V12.515a2.49 2.49 0 0 0-2.49-2.49h-13.02zm-.574 2.49c0-.318.257-.575.575-.575h13.02c.318 0 .575.257.575.574v11.49a.574.574 0 0 1-.574.574H11.464a.574.574 0 0 1-.575-.575V12.515z",fill:"#0A0C20"})]})));function e0(){return(e0=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}let e1=a.forwardRef(function(e,i){return a.createElement("svg",e0({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:i},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.0904 10.1066C18.2026 10.0016 17.0393 10 15.3711 10H14.8711C13.4458 10 12.4521 10.0012 11.6861 10.0791C10.9369 10.1554 10.5171 10.2966 10.2044 10.5056C9.87681 10.7245 9.59556 11.0057 9.37669 11.3333C9.16771 11.646 9.02645 12.0658 8.95023 12.8151C8.8723 13.581 8.87109 14.5747 8.87109 16C8.87109 17.4253 8.8723 18.419 8.95023 19.1849C9.02645 19.9342 9.16771 20.354 9.37669 20.6667C9.59556 20.9943 9.87681 21.2755 10.2044 21.4944C10.5171 21.7034 10.9369 21.8446 11.6861 21.9209C12.4521 21.9988 13.4458 22 14.8711 22H16.131C16.1433 22.6742 16.1812 23.1158 16.2972 23.4983C16.3496 23.6709 16.4131 23.8384 16.487 24H14.8711H14.8171C13.4585 24 12.3628 24 11.4837 23.9106C10.5763 23.8183 9.78939 23.6225 9.09324 23.1573C8.54729 22.7926 8.07854 22.3238 7.71375 21.7779C7.2486 21.0817 7.0528 20.2948 6.96049 19.3874C6.87107 18.5083 6.87108 17.4126 6.87109 16.0539V16.0539L6.87109 16L6.87109 15.9461V15.9461C6.87108 14.5874 6.87107 13.4917 6.96049 12.6126C7.0528 11.7052 7.2486 10.9183 7.71375 10.2221C8.07854 9.6762 8.54729 9.20745 9.09324 8.84265C9.78939 8.3775 10.5763 8.18171 11.4837 8.0894C12.3628 7.99997 13.4585 7.99999 14.8171 8H14.8172L14.8711 8H15.3711L15.4345 8C17.0244 7.99998 18.3062 7.99996 19.3252 8.12041C20.3798 8.24506 21.2822 8.51052 22.0431 9.13495C22.2962 9.34272 22.5284 9.57486 22.7361 9.82803C23.3606 10.5889 23.626 11.4913 23.7507 12.5459C23.8422 13.3204 23.8642 14.2467 23.8694 15.3448C23.5252 15.3372 23.1188 15.3372 22.625 15.3372H21.8692C21.8638 14.2659 21.8432 13.446 21.7645 12.7807C21.6622 11.9149 21.4737 11.4423 21.1901 11.0968C21.0655 10.9449 20.9262 10.8056 20.7743 10.681C20.4288 10.3974 19.9562 10.2089 19.0904 10.1066ZM21.125 17.3372L21.0706 17.3372H21.0706C20.6465 17.3371 20.2344 17.337 19.8945 17.3827C19.5113 17.4342 19.074 17.5597 18.7108 17.9229C18.3476 18.2862 18.222 18.7234 18.1705 19.1066C18.1248 19.4466 18.1249 19.8587 18.125 20.2827V20.2828L18.125 20.3372V21.3372L18.125 21.3916V21.3916C18.1249 21.8156 18.1248 22.2278 18.1705 22.5677C18.222 22.9509 18.3476 23.3882 18.7108 23.7514C19.074 24.1146 19.5113 24.2401 19.8945 24.2916C20.2344 24.3373 20.6465 24.3372 21.0706 24.3372H21.0706L21.125 24.3372H23.125L23.1794 24.3372H23.1795C23.6035 24.3372 24.0156 24.3373 24.3555 24.2916C24.7387 24.2401 25.176 24.1146 25.5392 23.7514C25.9024 23.3882 26.028 22.9509 26.0795 22.5677C26.1252 22.2278 26.1251 21.8157 26.125 21.3916V21.3916L26.125 21.3372V20.3372L26.125 20.2827V20.2827C26.1251 19.8586 26.1252 19.4465 26.0795 19.1066C26.028 18.7234 25.9024 18.2862 25.5392 17.9229C25.176 17.5597 24.7387 17.4342 24.3555 17.3827C24.0156 17.337 23.6035 17.3371 23.1794 17.3372L23.125 17.3372H21.125ZM20.1527 19.3731L20.1537 19.3659L20.161 19.3649C20.3512 19.3393 20.6253 19.3372 21.125 19.3372H23.125C23.6247 19.3372 23.8988 19.3393 24.089 19.3649L24.0963 19.3659L24.0973 19.3731C24.1229 19.5633 24.125 19.8375 24.125 20.3372V21.3372C24.125 21.8368 24.1229 22.111 24.0973 22.3012L24.0963 22.3085L24.089 22.3095C23.8988 22.335 23.6247 22.3372 23.125 22.3372H21.125C20.6253 22.3372 20.3512 22.335 20.161 22.3095L20.1537 22.3085L20.1527 22.3012C20.1271 22.111 20.125 21.8368 20.125 21.3372V20.3372C20.125 19.8375 20.1271 19.5633 20.1527 19.3731Z",fill:"currentColor"}))});e1.elementType="Icon";function e2(){return(e2=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}let e3=a.forwardRef(function(e,i){return a.createElement("svg",e2({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:i},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.0904 10.1066C18.2026 10.0016 17.0393 10 15.3711 10H14.8711C13.4458 10 12.4521 10.0012 11.6861 10.0791C10.9369 10.1554 10.5171 10.2966 10.2044 10.5056C9.87682 10.7245 9.59556 11.0057 9.37669 11.3333C9.16771 11.646 9.02645 12.0658 8.95023 12.8151C8.87231 13.581 8.8711 14.5747 8.8711 16C8.8711 17.4253 8.87231 18.419 8.95023 19.185C9.02645 19.9342 9.16771 20.354 9.37669 20.6667C9.59556 20.9943 9.87682 21.2755 10.2044 21.4944C10.5171 21.7034 10.9369 21.8447 11.6861 21.9209C12.4521 21.9988 13.4458 22 14.8711 22H15.1385C15.1632 22.8366 15.2329 23.3933 15.4295 23.8679C15.4479 23.9124 15.4671 23.9564 15.487 24H14.8711H14.8171H14.8171C13.4584 24 12.3628 24 11.4837 23.9106C10.5763 23.8183 9.78939 23.6225 9.09325 23.1574C8.54729 22.7926 8.07854 22.3238 7.71375 21.7779C7.2486 21.0817 7.0528 20.2948 6.9605 19.3874C6.87107 18.5083 6.87108 17.4127 6.87109 16.054V16.054V16.054V16.054V16.0539V16V15.9461V15.946V15.946V15.946V15.946C6.87108 14.5874 6.87107 13.4917 6.9605 12.6126C7.0528 11.7052 7.2486 10.9183 7.71375 10.2222C8.07854 9.6762 8.54729 9.20745 9.09325 8.84266C9.78939 8.37751 10.5763 8.18171 11.4837 8.0894C12.3628 7.99998 13.4584 7.99999 14.8171 8H14.8171H14.8171H14.8171H14.8172H14.8711H15.3711H15.4345H15.4345H15.4346H15.4346H15.4346C17.0244 7.99998 18.3062 7.99997 19.3252 8.12041C20.3798 8.24507 21.2822 8.51052 22.0431 9.13495C22.2962 9.34272 22.5284 9.57487 22.7361 9.82804C23.3606 10.5889 23.626 11.4913 23.7507 12.5459C23.8133 13.0752 23.8433 13.6754 23.8578 14.3529C23.3841 14.3372 22.8192 14.3372 22.125 14.3372H21.8569C21.8433 13.7315 21.8167 13.222 21.7645 12.7807C21.6622 11.9149 21.4737 11.4423 21.1901 11.0968C21.0655 10.9449 20.9262 10.8056 20.7743 10.681C20.4288 10.3974 19.9562 10.2089 19.0904 10.1066ZM20.125 16.3372L20.0706 16.3372H20.0706H20.0706H20.0706C20.0266 16.3371 19.9827 16.3371 19.9391 16.3372L19.0287 15.4268L18.3216 14.7197L16.9074 16.1339L17.6145 16.841L17.7036 16.9301L17.702 16.9318L17.9323 17.1622L19.1516 18.3814L19.152 18.3785L23.1107 22.3372H23.1073L24.9218 24.1516C24.9226 24.1513 24.9234 24.151 24.9242 24.1507L25.3927 24.6192L26.0998 25.3263L27.514 23.9121L26.8069 23.205L26.0893 22.4874C26.1252 22.1638 26.1251 21.7828 26.125 21.3916L26.125 21.3372V19.3372L26.125 19.2828C26.1251 18.8587 26.1252 18.4466 26.0795 18.1066C26.028 17.7234 25.9024 17.2862 25.5392 16.9229C25.176 16.5597 24.7387 16.4342 24.3555 16.3827C24.0156 16.337 23.6035 16.3371 23.1794 16.3372L23.125 16.3372H20.125ZM24.125 20.5231V19.3372C24.125 18.8375 24.1229 18.5633 24.0973 18.3731L24.0963 18.3659L24.089 18.3649C23.8988 18.3393 23.6247 18.3372 23.125 18.3372H21.9391L24.125 20.5231ZM17.125 19.2827L17.125 19.1833L19.125 21.1833V21.3372C19.125 21.8368 19.1271 22.111 19.1527 22.3012L19.1537 22.3085L19.161 22.3095C19.3512 22.335 19.6253 22.3372 20.125 22.3372H20.2789L22.2789 24.3372H20.125L20.0706 24.3372H20.0705C19.6465 24.3372 19.2344 24.3373 18.8945 24.2916C18.5113 24.2401 18.074 24.1146 17.7108 23.7514C17.3476 23.3882 17.222 22.9509 17.1705 22.5677C17.1248 22.2278 17.1249 21.8157 17.125 21.3916V21.3916V21.3916V21.3916L17.125 21.3372V19.3372L17.125 19.2828V19.2827V19.2827Z",fill:"currentColor"}))});e3.elementType="Icon";var e7=l("560429"),e4=l("978329");l("413806"),l("826893"),l("250440"),l("173773"),l("957201"),l("567754");var e5=l("759797"),e6=l("820303");U().Events;let{video:e8,serviceParam:e9}=e5||{},{PRELOAD_TIME:ie}=e8||{},ii=e=>{let i=function(){let e=(0,G.$o)(z.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return Number(null!=e?e:0)}(),l=1,t=1,{volume:n,autoplayMuted:o}=(0,eV.J)(e);try{l=(0,e6.G)(z.SessionStorageKeys.PlayerPlaybackratio)||1,"0"===(0,G.$o)(z.LocalStorageKeys.PlayerMiniWin)&&(t=0)}catch(e){}return{isNextAutoPlay:i,playBackRatio:l,isMiniWin:t,volume:n,isMute:o,fakeScreenType:"origin"}};class il extends V.Plugin{static get pluginName(){return"MiniWinPlugin"}static get defaultConfig(){return{position:eq.POSITIONS.CONTROLS_RIGHT,index:5,className:"xgplayer-miniwin"}}afterCreate(){if(!this.config.disable)this.bind(".xgplayer-icon","click",this.onClickIcon),this.player.on("manual_change_min_state",this.onManualChangeState),this.renderRoot()}changeMiniState(e){e?(this.config.autoMini=!0,this.find(".xgplayer-box-douyin").innerHTML="点击关闭悬浮小窗口",(0,G.qQ)(z.LocalStorageKeys.PlayerMiniWin,"1")):(this.config.autoMini=!1,eq.Util.removeClass(this.find(".xgplayer-icon"),"select"),this.find(".xgplayer-box-douyin").innerHTML="点击开启悬浮小窗口",(0,G.qQ)(z.LocalStorageKeys.PlayerMiniWin,"0")),this.renderRoot()}destroy(){this.unbind(".xgplayer-icon","click",this.onClickIcon),this.player.off("manual_change_min_state",this.onManualChangeState)}renderRoot(){let{autoMini:e,abtest:i}=this.config,l="";l=e?(0,eX.Y)(e1,{width:32,height:32,needRenderInSSR:!0}):(0,eX.Y)(e3,{width:32,height:32,needRenderInSSR:!0}),this.find(".xgplayer-icon").innerHTML=l}render(){let{autoMini:e}=this.config;return`
      <xg-icon class="xgplayer-mini-win" data-state="normal">
        <div class="xgplayer-icon"></div>
        <xg-slider class="xgplayer-slider xgplayer-box-douyin">
          ${e?"点击关闭悬浮小窗口":"点击开启悬浮小窗口"}
        </xg-slider>
      </xg-icon>`}constructor(...e){super(...e),(0,e$._)(this,"onManualChangeState",e=>{var i;null===this||void 0===this||null===(i=this.changeMiniState)||void 0===i||i.call(this,e)}),(0,e$._)(this,"onClickIcon",()=>{this.changeMiniState(!this.config.autoMini),this.player.emit("miniWinChange",this.config.autoMini)})}}let it=e=>{let i=(0,eu.n)(),[l,t]=(0,a.useState)(!1),n=(0,a.useRef)(document.createElement("div")),r=(0,a.useRef)();!r.current&&(r.current=(0,eQ.createRoot)(n.current));let d=(0,a.useRef)(i);d.current=i;let u=(0,a.useCallback)(()=>{var e,i,l;if(null===(l=d.current)||void 0===l?void 0:null===(i=l.root)||void 0===i?void 0:null===(e=i.parentElement)||void 0===e?void 0:e.getBoundingClientRect){let{bottom:e}=d.current.root.parentElement.getBoundingClientRect();return e<=122}return!1},[]);return(0,a.useEffect)(()=>{var e,i;null===(i=r.current)||void 0===i||null===(e=i.render)||void 0===e||e.call(i,(0,o.jsx)(ex.Z,{src:eJ,width:36,height:36}));let l=eS.listen(eS.EVENT.isShowUp,e=>{(e?eq.Util.addClass:eq.Util.removeClass)(d.current.root,"isShowUp")});return()=>{l()}},[]),(0,a.useEffect)(()=>{if(!(null==i?void 0:i.root))return;let e=document.getElementById("douyin-sidebar");null==e||e.insertBefore(n.current,null==e?void 0:e.firstElementChild);let l=()=>{t(u())},o=(0,e4.j)(i.root)||document;o.addEventListener("scroll",l);let a=()=>{var e,i,l;null===(l=d.current)||void 0===l||null===(i=l.plugins)||void 0===i||null===(e=i.miniscreen)||void 0===e||e.getMini()};return n.current.addEventListener("click",a),()=>{var e,i,t;null===(i=r.current)||void 0===i||null===(e=i.unmount)||void 0===e||e.call(i),n.current.removeEventListener("click",a),null===(t=n.current)||void 0===t||t.remove(),n.current=null,o.removeEventListener("scroll",l)}},[i]),(0,a.useEffect)(()=>{if(n.current.className=s()(e7.default.miniScreenBtn,{[e7.default.active]:l}),i){var e,t,o,a,r,d,u,c,v,f,g,m;if(l){eS.emit(eS.EVENT.videoStopPlayNext),(null===(o=i.plugins)||void 0===o?void 0:null===(t=o.miniwinplugin)||void 0===t?void 0:null===(e=t.config)||void 0===e?void 0:e.autoMini)?(null===(r=i.plugins.miniscreen)||void 0===r||null===(a=r.getMini)||void 0===a||a.call(r),(null===(u=i.plugins.miniscreen)||void 0===u?void 0:null===(d=u.root)||void 0===d?void 0:d.getAttribute("data-state"))===null&&i.plugins.miniscreen.root.setAttribute("data-state",i.isPlaying?"play":"pause")):null===(v=i.plugins.miniscreen)||void 0===v||null===(c=v.exitMini)||void 0===c||c.call(v);let l=e=>{i.emit("manual_change_min_state",e)};return i.on(V.Events.MINI_STATE_CHANGE,l),()=>{eS.emit(eS.EVENT.videoRemoveStopPlayNext),i.off(V.Events.MINI_STATE_CHANGE,l)}}null==i||null===(m=i.plugins)||void 0===m||null===(g=m.miniscreen)||void 0===g||null===(f=g.exitMini)||void 0===f||f.call(g)}},[l]),(0,o.jsx)(o.Fragment,{})},io=e=>{let{onMiniChange:i,abtest:l}=e,t=(0,eu.n)(),{isFullScreen:n,isCssFullScreen:r,isClientMiniWin:s}=(0,a.useContext)(y.C);return(0,a.useEffect)(()=>{if(t&&!(n||r||s)){var e;return t.registerPlugin(il,{autoMini:!!(null===(e=ii())||void 0===e?void 0:e.isMiniWin),abtest:l}),()=>{t.getPlugin("MiniWinPlugin")&&t.unRegisterPlugin("MiniWinPlugin",!0)}}},[t,n,r,s]),(0,a.useEffect)(()=>{if(t&&i){let e=e=>{null==i||i(e);let l=t.getPlugin("AutoPlaySettingPlugin");l&&(l.playeNextWeightNum+=e?1:-1)};return t.on(V.Events.MINI_STATE_CHANGE,e),()=>{t.off(V.Events.MINI_STATE_CHANGE,e)}}},[t,i]),(0,o.jsx)(it,{abtest:l})};var ia=l("44944"),ir=l("744785"),is=l("955462"),id=l("567590"),iu=l("71575"),ic=l("554288"),iv=l("48559"),ig=l("797367"),im=l("244773"),ih=l("248333"),ip=l("15303");l("64747");class i_ extends V.Plugin{static get pluginName(){return"AutoPlayTipsPlugin"}static get defaultConfig(){return{position:eq.POSITIONS.ROOT,index:10,className:"xgplayer-autoplay-tips"}}beforePlayerInit(){}afterPlayerInit(){}afterCreate(){if(!this.config.disable)this.timer=setInterval(()=>{this.onTimeUpdate()},200)}onTimeUpdate(){var e,i,l;if(!this.player||this.player.duration<=0)return;let t=Math.ceil(this.player.duration-this.player.currentTime);if(!(t<=3)||(null===(e=this.player)||void 0===e?void 0:e.paused)||(null===this||void 0===this?void 0:null===(i=this.player)||void 0===i?void 0:i.videoStopPlayNextFlag))eq.Util.removeClass(this.root,"douyin-show");else{this.find(".full-en").innerText=`${t}s `,this.find(".next-en").innerText=`${t}s `,this.find(".loop-en").innerText=`${t}s `;let e=this.player.getPlugin("AutoPlaySettingPlugin");(null==e?void 0:null===(l=e.config)||void 0===l?void 0:l.nextAutoPlay)?(eq.Util.addClass(this.root,"douyin-show"),eq.Util.addClass(this.find(".xgplayer-autoplay-tips-full"),"active"),eq.Util.addClass(this.find(".xgplayer-autoplay-tips-next"),"active"),eq.Util.removeClass(this.find(".xgplayer-autoplay-tips-loop"),"active")):!this.player.isReplay&&(eq.Util.addClass(this.root,"douyin-show"),eq.Util.removeClass(this.find(".xgplayer-autoplay-tips-full"),"active"),eq.Util.removeClass(this.find(".xgplayer-autoplay-tips-next"),"active"),eq.Util.addClass(this.find(".xgplayer-autoplay-tips-loop"),"active"))}}destroy(){this.timer&&clearInterval(this.timer)}render(){return`
    <div class="xgplayer-autoplay-tips " data-state="normal">
      <div class="xgplayer-box-dg xgplayer-autoplay-tips-full ">
        <div class="img-wh-ct">
          <div class="img-wrap">
            <div class="blur-bg" style='background-image: url(${this.config.img})' ></div>
            <div class="blur-mask"  ></div>
            <img src="${this.config.img}" />
          </div>
        </div>
        <div class="rightCt">
          <div > <span class="en-title full-en">3s </span>后播放</div>
          <div class="desc"> ${this.config.desc}</div>
        </div>
      </div>
      <div class="xgplayer-box-dg xgplayer-autoplay-tips-next ">
        <span class="en-title next-en">3s </span>后播放下一个视频
      </div>
      <div class="xgplayer-box-dg xgplayer-autoplay-tips-loop ">
        <span class="en-title loop-en">3s </span>后循环播放当前视频
      </div>

    </div>`}}let ix=e=>{let{nextVideoInfo:i}=e,l=(0,eu.n)();return(0,a.useEffect)(()=>{if(l&&(null==i?void 0:i.img))return l.registerPlugin(i_,{img:null==i?void 0:i.img,desc:null==i?void 0:i.desc}),()=>{l.getPlugin("AutoPlayTipsPlugin")&&l.unRegisterPlugin("AutoPlayTipsPlugin",!0)}},[l,i]),null};var iw=l("477435"),iy=l("923693"),iC=l("644860"),iI=l("592162"),ij=l("488799"),iS=l("174554"),iN=l("950081"),ib=l("356650"),iT=l("399818"),iE=l("774314"),iP=l("40970"),iL=l("439837"),ik=l.n(iL),iM=l("577603"),iA=l.n(iM),iR=l("679126");l("275707"),ik().extend(iA());function iD(e){var i;let{sec:l}=e;return(0,o.jsx)("div",{className:"xgplayer-continue-tip","data-e2e":"video-player-auto-play",children:`上次观看至${(i=l,ik().duration(i,"seconds").format("HH:mm:ss"))}，已自动续播`})}class iB extends V.Plugin{static get pluginName(){return"ContinuePlayPlugin "}static get defaultConfig(){return{index:9,className:"xgplayer-continue-play",sec:0,disable:!1}}afterCreate(){let{disable:e}=this.player.config.ContinuePlayPlugin;if(!e)this.renderRoot(),setTimeout(()=>{this.destroy()},5e3)}destroy(){(0,iR.v)(this)}renderRoot(){let{sec:e}=this.player.config.ContinuePlayPlugin;(0,iR.s)(this,(0,o.jsx)(iD,{sec:e}))}render(){return`
    <xg-icon class="xgplayer-continue-play" data-state="normal">
    </xg-icon>`}}let iO=e=>{let{config:i,startTime:l}=e;l>0&&(i.plugins=[...i.plugins,iB],i.ContinuePlayPlugin={sec:l,disable:!l},i.startTime=l)};var iH=l("333661"),iF=l("250286"),iV=l("643728"),iU=l("743317");l("838368"),l("368529");var iW=l("41667"),iz=l("97598"),iZ=l("495765"),iG=l("399083"),iK=l("532048"),iY=l("14427"),i$=l("312540"),iq=l("475004"),iQ=l("150854"),iX=l("997671"),iJ=l("427694"),i0=l("661639"),i1=l("881155");let i2=e=>{let{isActive:i}=e,l=(0,eu.n)(),t=(0,a.useCallback)(()=>{let e=()=>{l.replay(),l.replayed=!0,J.Le.setConfig(J.gI.VideoPlayMethod,"auto")};(0,w.G6)()?setTimeout(e,50):e()},[l]);return(0,a.useEffect)(()=>{if(l&&i&&t)return l.on("ended",t),()=>{l.off("ended",t)}},[l,i,t]),null},i3=e=>{let i=(0,eO.N)();return(0,o.jsx)(F.k,{componentName:"AutoLoopPlayPlugin",Slardar:i,children:(0,o.jsx)(i2,(0,t._)({},e))})};var i7=l("551677"),i4=l("77741"),i5=l("903868"),i6=l("877438"),i8={PositionBoxSlot:"PositionBoxSlot"};let i9=(0,a.forwardRef)((e,i)=>{var l,r,F,V,U,W,z,Z,G,K,Y,$;let{isActive:q,awemeInfo:Q,playNextFunc:X,abtestData:J,deleteCurrentSwiper:ee,toggleComment:ei,onAvatarClick:el,fullScreenTarget:et,logParams:en={},videoToast:eo,followHandler:ea,userInfo:er,dispatch:es,children:ed,videoHashtagClassName:eu,onActivityCardClick:ec,anchorList:ev=[],hasJingxuanActivity:ef,videoTags:eg,disableNext:em,nextVideoInfo:eh,haveDashBoard:ep,danmakuInfo:e_,actionFollow:ex,actionUnFollow:ew,playSwitchParams:ey,startTime:eC,chapterProps:eI,isShinpin:ej=!1,canShowListenVideo:eS=!1,aiNoteProps:eN}=e,{isWebMiniWin:eb,pipWindow:eT,supportDocumentPip:eE,isListenVideoMiniWin:eP}=(0,i5.Iq)(e=>{let{isWebMiniWin:i,pipWindow:l,supportDocumentPip:t,isListenVideoMiniWin:n}=e;return{isWebMiniWin:i,pipWindow:l,supportDocumentPip:t,isListenVideoMiniWin:n}}),eL=(0,a.useMemo)(()=>{var e,i,l,o,a,r,s;return(0,n._)((0,t._)((0,n._)((0,t._)({},en),{playlet_id:null==Q?void 0:null===(e=Q.seriesInfo)||void 0===e?void 0:e.seriesId,is_trailer:(null==Q?void 0:null===(l=Q.chargeInfo)||void 0===l?void 0:null===(i=l.preview_config)||void 0===i?void 0:i.is_preview)?1:0,module:decodeURIComponent((0,g.Rs)("module")||""),payment_status:(0,i1.wQ)(Q),episode_id:String((null==Q?void 0:null===(o=Q.seriesInfo)||void 0===o?void 0:o.currentEpisode)||(null==Q?void 0:null===(a=Q.mixInfo)||void 0===a?void 0:a.currentEpisode)),episode_rank:(null==Q?void 0:null===(r=Q.seriesInfo)||void 0===r?void 0:r.currentEpisode)||(null==Q?void 0:null===(s=Q.mixInfo)||void 0===s?void 0:s.currentEpisode)||0,previous_page:(0,g.Rs)("previous_page"),fir_previous_page:(0,g.Rs)("fir_previous_page")||(0,g.Rs)("previous_page"),search_params:function(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return{}}}((0,g.Rs)("search_params"))}),(0,g.Rs)("ai_search_enter_from")?{enter_from:(0,g.Rs)("ai_search_enter_from")}:{}),{is_fullscreen:(0,g.Rs)("is_fullscreen"),is_from_aweme_search_engine:(0,m.V)()?1:0})},[Q,en]),ek=(0,h.x)(),{isFullScreen:eM,isCssFullScreen:eA,isClientMiniWin:eR}=(0,a.useContext)(y.C),[eD,eB]=(0,a.useState)(!1),eO=(0,a.useRef)(null),{hasChapterBar:eH}=(0,iN.W)(J,Q,null===(l=eO.current)||void 0===l?void 0:l.player),eF=(0,a.useMemo)(()=>eb||eR||eP,[eb,eR,eP]),{enablePip:eV}=(0,iW.$)({abtestData:J,awemeInfo:Q});(0,iJ.g)({player:null==eO?void 0:null===(r=eO.current)||void 0===r?void 0:r.player,awemeInfo:Q});let{noPaidVideo:eU}=(0,iz.B)({awemeInfo:Q}),e$=(0,ib.Xs)(Q);(0,iZ.j)({player:null==eO?void 0:null===(F=eO.current)||void 0===F?void 0:F.player,isActive:q,abValue:J});let eq=(0,p.D)(Q),{isDanmuIcon:eQ,hideList:eX,isChapterIcon:eJ,chapterMaxWidth:e0,isAiNoteIcon:e1}=(0,iG.Cy)({isActive:q,abtestData:J,player:null===(V=eO.current)||void 0===V?void 0:V.player,hasChapter:eH,hasAiNote:null==eN?void 0:eN.useable,isMiniWin:eF,isClientMiniWin:eR,showInnerAutoplay:!1,showSubtitles:!!(null==Q?void 0:Q.claInfo),showClear:!1,showAutoPlay:!eU&&!e$,showFakeScreen:(null==Q?void 0:Q.awemeType)!==d.e.Note,showPlayBackRatio:(null==Q?void 0:Q.awemeType)!==d.e.Note,showNativePicture:!0,showWatchLater:eq}),e2=(0,a.useCallback)(()=>{var e,i,l;null===(i=eO.current)||void 0===i||null===(e=i.player)||void 0===e||e.pause();let t=(0,_.HC)(null==Q?void 0:null===(l=Q.authorInfo)||void 0===l?void 0:l.secUid,`vid=${Q.awemeId}`);window.open(t,(0,x.f)()?"_self":"_blank","noopener")},[Q]);(0,a.useImperativeHandle)(i,()=>{var e;return{getPlayer:()=>eO.current.getPlayer(),player:null===(e=eO.current)||void 0===e?void 0:e.player}});let e3=(0,a.useMemo)(()=>(0,u.gc)(Q),[Q]);(0,iK.D)({awemeInfo:Q,isActive:q});let e7=(null==Q?void 0:Q.awemeType)===d.e.Note,e4=(0,a.useMemo)(()=>{let e={};return Object.assign(e,(0,iT.QF)({awemeInfo:Q,abtestData:J}),(0,iS.k)({awemeInfo:Q,abtestData:J})),(0,iE.Zf)({config:e,awemeInfo:Q,abtestData:J}),(0,iP.LX)({config:e,awemeInfo:Q,abtestData:J}),iO({config:e,startTime:eC}),e.pip&&(e.pip.showIcon=eV),(0,t._)((0,n._)((0,t._)({},e),{startTime:(()=>{let e=(0,g.Rs)("current_video_time")||0;return(0,g.U$)(["current_video_time"]),e})()||eC||0,autoplay:q}),(null==J?void 0:J.videoDetailBg)?{}:{dynamicBg:{disable:(0,w.vU)()||(0,w.G6)(),frameRate:10,filter:"blur(60px)",maskBg:"var(--player-background)",startFrameCount:0}})},[Q,J,eV]);(0,iY.$)({player:null===(U=eO.current)||void 0===U?void 0:U.player,isActive:q,isActualActive:q,awemeInfo:Q,abtestData:J,isInnerFeed:!1}),(0,i$.Q)({player:null===(W=eO.current)||void 0===W?void 0:W.player,isActive:q,abtestData:J,isSliderVideo:!0,isKeyWorkCancalLike:!0,awemeInfo:Q,isClientMiniWin:eR,pipWindow:eT,isLogin:null==er?void 0:er.isLogin});let e5={scene:c.lT.Detail,awemeInfo:Q,abtestData:J,userInfo:er,isMiniWin:eF,isActive:q,player:null==eO?void 0:null===(z=eO.current)||void 0===z?void 0:z.player,fullScreenTarget:et},e6=!ef&&(0,iV.$)({abTestData:J,awemeInfo:Q});return(0,i6.O)({abtestData:J,player:null==eO?void 0:null===(Z=eO.current)||void 0===Z?void 0:Z.player,scene:c.lT.Detail,awemeInfo:Q,isActive:q}),(0,o.jsxs)(o.Fragment,{children:[(eA||eM)&&!eF&&(0,o.jsx)(iQ.default,(0,t._)({},e5)),(0,o.jsxs)(I.f,(0,n._)((0,t._)({},e),{xgplayerConfig:e4,isInitPlayer:q,className:s()(C.default.container,"chapterPlayerStyle",{isSafari:(0,w.G6)(),lowPopup:!0}),style:(0,t._)({},eP?{display:"none"}:{}),ref:eO,children:[(0,o.jsx)(iq.V,{awemeInfo:Q,isActive:q,timeout:(0,w.b_)()?4e3:2e3,isFirst:!0}),(0,o.jsx)(j.p,{onRegisterSuccess:()=>{q&&(0,iH.g)(eO.current.player)},isActive:q,scene:c.lT.Detail}),(0,o.jsxs)(S.n,{isActive:q,controlHeight:c.fp.MidHigh,position:"right",awemeInfo:Q,style:eM||eA?{}:{justifyContent:"center"},className:{right:s()({[C.default.hidden]:eD,[C.default.rightCenter]:!eM&&!eA&&!e7,[C.default.WebMini]:eb,[N.m4]:!0})},abtestData:J,children:[a.Children.toArray(ed).map(e=>{var i;if((null==e?void 0:null===(i=e.props)||void 0===i?void 0:i.slot)===(null==i8?void 0:i8.PositionBoxSlot))return e}),!eR&&(0,o.jsx)(b.Interaction,{playNextFunc:null==ey?void 0:ey.playNextFunc,playPrevFunc:null==ey?void 0:ey.playPrevFunc,listenVideoDisableNext:null==ey?void 0:ey.disableNext,listenVideoDisablePrev:null==ey?void 0:ey.disablePrev,canShowListenVideo:eS,actionFollow:ex,actionUnFollow:ew,awemeInfo:Q,toggleComment:ei,loginUserInfo:er,loginDispatch:es,deleteCurrentSwiper:ee,fullScreenTarget:et,onAvatarClick:el,abtestData:J,videoToast:eo,isActive:q,followHandler:ea,canShowAvatar:eM||eA,reportExtraParams:eL,recordPreferVideoSwitch:!0,canShowAvatarFollowBtn:!e3,canShowAvatarTip:!e3,className:s()({[C.default.hidden]:!(eM||eA)&&(ej||!e7)}),moreBoxShowList:{notInterestingIcon:!1,unfollow:(null==ea?void 0:ea.type)!==0,report:!0,dataAnalysis:String(null==Q?void 0:Q.authorUserId)===(null==er?void 0:null===(G=er.info)||void 0===G?void 0:G.uid)&&ep,shortcutList:!0},isDetail:!0})]}),(0,o.jsx)(T.V,{awemeInfo:Q,isActive:q}),!eU&&(null==Q?void 0:Q.awemeType)!==d.e.Note&&(0,o.jsx)(E.kL,{isActive:q,awemeInfo:Q,playNextFunc:X,ablePlayNext:!em&&!e$,shortcutDisabled:!1}),!eU&&!e7&&(0,o.jsx)(N.SD,{isActive:q,awemeInfo:Q,isInnerFeed:!1,abtestData:J,hide:eX.some(e=>e[0]===iG.p7.Clear)}),(0,o.jsx)(P.SE,{isActive:q,awemeInfo:Q,abtestData:J}),ek&&(0,o.jsx)(L.zm,{isActive:q,awemeInfo:Q,isInnerFeed:!1,abtestData:J}),(null==Q?void 0:Q.awemeType)===d.e.Note&&(0,o.jsx)(i3,{isActive:q}),eq&&(0,o.jsx)(k.vq,{isActive:q,awemeInfo:Q,isLogin:null==er?void 0:er.isLogin,loginDispatch:es,toast:eo,logParams:eL,abtest:J}),eV&&(0,o.jsx)(M._,{isActive:q,awemeInfo:Q,abtestData:J}),(0,o.jsx)(A.k,{isActive:q,onVolumeShortCutChange:()=>{var e;(0,iF.t)(null===(e=eO.current)||void 0===e?void 0:e.player)}}),(0,o.jsx)(R.g,{isActive:q,abtestData:J,awemeInfo:Q,scene:"detail"}),(0,o.jsx)(D.b,{isActive:q}),!(0,ib.GP)(Q)&&(0,o.jsx)(B.Z,{awemeInfo:Q,userInfo:er,isActive:q,logParams:eL}),(0,o.jsx)(O.E,{isActive:q,awemeInfo:Q,abtestData:J,userInfo:er,deleteCurrentSwiper:ee,config:e4}),(0,o.jsx)(H.P,{isActive:q,awemeInfo:Q,abtestData:J,userInfo:er,enablePip:eV}),(null==Q?void 0:Q.awemeType)===d.e.Note?e7&&!eR?(0,o.jsx)(eW,{isActive:q,awemeInfo:Q,logParams:eL,playNextFunc:X,ablePlayNext:!em,isClientMiniWin:eR,isMini:eD}):(0,o.jsx)(ez.PictureMode,{isActive:q,awemeInfo:Q,logParams:eL,playNextFunc:X,ablePlayNext:!em,isClientMiniWin:eR,isMini:eD}):null,(0,w.vU)()&&(0,o.jsx)(eZ._,{awemeInfo:Q,isActive:q,controlHeight:c.fp.MidHigh,abtestData:J}),!eF&&(0,o.jsx)(eG.t,{isInnerFeed:!1,srSceneType:i4.dd.douyinClientMulti,isActive:q,userInfo:er,dispatch:es,abtestData:J,awemeInfo:Q,player:null==eO?void 0:null===(K=eO.current)||void 0===K?void 0:K.player}),!eF||ek?(0,o.jsx)(eK.I,{isActive:q,fullScreenTarget:et,loginDispatch:es,isLogin:!!(null==er?void 0:er.isLogin),abtestData:J,scene:"detail"}):null,!eR||ek?(0,o.jsx)(eY.PlayBackSetting,{isActive:q,awemeInfo:Q,logParams:eL,loginBlock:!(null==er?void 0:er.isLogin)&&!eb,loginDispatch:es,speedType:(0,w.G6)()?v.$.Safari:v.$.Normal}):null,(null==Q?void 0:null===(Y=Q.chargeInfo)||void 0===Y?void 0:Y.is_charge_content)&&(0,o.jsx)(i0.V,{awemeInfo:Q,isActive:q,isShowReplay:!eD&&!eF}),(!eR||ek)&&!e7&&!eV&&(0,o.jsx)(io,{onMiniChange:eB,abtest:J}),a.Children.toArray(ed).map(e=>{var i;if((null==e?void 0:null===(i=e.props)||void 0===i?void 0:i.slot)!=="PositionBoxSlot")return e}),!eF&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ia.Danmaku,{isActive:q,awemeInfo:Q,userInfo:er,loginDispatch:es,abtestData:J,danmakuInfo:e_,isDanmuIcon:eQ}),(0,o.jsx)(ir.e,{isActive:q,awemeInfo:Q,abtestData:J,aiNoteProps:eN,isAiNoteIcon:e1}),eH?(0,o.jsx)(is.WC,{isActive:q,awemeInfo:Q,userInfo:er,loginDispatch:es,abtestData:J,isChapterIcon:eJ,chapterProps:eI,logParams:eL,chapterMaxWidth:e0}):null,(0,o.jsx)(id.Vw,{awemeInfo:Q,isShowGuide:!1,logParams:eL,isActive:q,abtestData:J}),(0,o.jsxs)(iu.r,{isActive:q,controlHeight:c.fp.MidHigh,position:"bottom",awemeInfo:Q,children:[(eM||eA)&&e6&&(0,o.jsx)(iV.n,{className:C.default.recommendTag,scene:"player",awemeInfo:Q}),ev.length>0&&(0,o.jsx)(iU.E,{isDetailPage:!0,awemeInfo:Q,anchorList:ev,openActivityCard:ec,abtestData:J}),!eM&&!eA&&(0,o.jsx)(ic.A,{awemeInfo:Q,isActive:!0,isDetail:!0,needSpace:!0,abTestData:J,userInfo:er,isMini:eD}),(eM||eA)&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(iv.VideoInfo,{awemeInfo:Q,userInfo:er,isTopicLinkSearchResult:!0,videoHashtagClassName:eu,videoTags:eg||[],abTestData:J,onClickUserName:e2,isActive:!0,isDetail:!0,chapterProps:eI,loginUserInfo:er,loginDispatch:es,hideAiSearchEntry:!0})}),!eM&&!eA&&(0,iX.H)(null==Q?void 0:Q.riskInfos,J)&&(0,o.jsx)(iX.Z,{isDetail:!0,awemeInfo:Q,risk:null==Q?void 0:Q.riskInfos})]}),(0,o.jsx)(ig.h,{awemeInfo:Q,isActive:q,userInfo:er,abtestData:J}),!eD&&(0,o.jsx)(im.MenuList,{isActive:q,abtestData:J,isSliderVideo:!0,isKeyWorkCancalLike:!0,shortCutFiltered:[null===($=f.getShortcut().dislike)||void 0===$?void 0:$.badgeText],userInfo:er,awemeInfo:Q,directJumpToUser:!0}),(0,o.jsx)(ih.B,{awemeInfo:Q,abtestData:J,isActive:q}),(0,o.jsx)(ip.I,{abtestData:J,isActive:q,awemeInfo:Q,isChapterScene:eH}),!(0,ib.GP)(Q)&&(null==Q?void 0:Q.awemeType)!==d.e.Note&&(0,o.jsx)(ix,{nextVideoInfo:eh}),(0,o.jsx)(iw.x,{isActive:q,awemeInfo:Q,abtestData:J}),(null==eX?void 0:eX.length)>0&&(0,o.jsx)(iy.SettingList,{isActive:q,awemeInfo:Q,hideList:eX,dispatch:es,abtestData:J,userInfo:er}),!eF&&(0,o.jsx)(i7.P,{abtestData:J,isActive:q,isMini:eD,controlHeight:c.fp.MidHigh})]}),eb&&(0,o.jsx)(ij.U,{awemeInfo:Q}),eR&&(0,o.jsxs)(o.Fragment,{children:[q&&(0,o.jsx)(iC.MiniWinMask,(0,n._)((0,t._)({},ey),{ablePlayNext:ey.disableNext,awemeInfo:Q,abtestData:J,loginUserInfo:er,loginDispatch:es,fullScreenTarget:et,reportExtraParams:eL,recordPreferVideoSwitch:!0})),q&&!ek&&(0,o.jsx)(iI.N,{awemeInfo:Q})]})]}))]})})},333661:function(e,i,l){l.d(i,{g:function(){return o}});var t=l(79307),n=l(631493);let o=e=>{if(!!e){if(n.s.getAllPlayer().find(e=>n.s.getPlayerScene(e.playerId)===t.lT.Modal)){var i;null===(i=e.pause)||void 0===i||i.call(e),e.config.autoplay=!1,e.autoplay=!1}}}},950081:function(e,i,l){l.d(i,{W:function(){return a}}),l(874386);var t=l(88648),n=l(746864),o=l(256277);function a(e,i,l){let[a,r]=(0,t.useState)(!1),s=(0,t.useMemo)(()=>{var e;return(null==i?void 0:null===(e=i.chapterInfo)||void 0===e?void 0:e.status)&&(null==i?void 0:i.awemeType)!==n.e.Note},[i]),d=(0,o.Kf)(i);return(0,t.useEffect)(()=>{if(d){r(!1);return}r(s)},[s,d]),{hasChapterBar:a}}},421885:function(e,i,l){l(429532);var t=l(88648);function n(){return(n=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}let o=t.forwardRef(function(e,i){return t.createElement("svg",n({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:i},e),t.createElement("path",{d:"M12 3.25C10.2051 3.25 8.75 4.70507 8.75 6.5C8.75 8.29493 10.2051 9.75 12 9.75C13.7949 9.75 15.25 8.29493 15.25 6.5C15.25 4.70507 13.7949 3.25 12 3.25Z",fill:"currentColor"}),t.createElement("path",{d:"M12 10.75C7.71979 10.75 4.25 14.2198 4.25 18.5V19.25H19.75V18.5C19.75 14.2198 16.2802 10.75 12 10.75Z",fill:"currentColor"}))});o.elementType="Icon",i.Z=o},555679:function(e,i,l){l(429532);var t=l(88648);function n(){return(n=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e}).apply(this,arguments)}let o=t.forwardRef(function(e,i){return t.createElement("svg",n({viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:i},e),t.createElement("path",{d:"M57.8286 53.3745C62.9855 48.2087 66 42.828 66 36.5626C66 23.8485 54.3602 13.542 39.9999 13.542C25.6398 13.542 14 23.8485 14 36.563C14 49.2775 26.0164 57.742 40.3768 57.742V61.1572C40.3768 65.2731 42.7697 64.9327 44.7724 63.7926C48.5851 61.6223 54.0675 57.1421 57.8286 53.3745ZM31.0857 37.1444C31.0857 39.183 29.422 40.8346 27.3697 40.8346C25.3209 40.8346 23.6571 39.183 23.6571 37.1444C23.6571 35.1099 25.3209 33.4582 27.3697 33.4582C29.422 33.4582 31.0857 35.1099 31.0857 37.1444ZM40 40.8346C37.949 40.8346 36.2859 39.183 36.2858 37.1444C36.2858 35.1099 37.9489 33.4582 40 33.4582C42.0514 33.4582 43.7144 35.1099 43.7144 37.1444C43.7144 39.183 42.0514 40.8346 40 40.8346ZM56.3427 37.1444C56.3427 39.183 54.6815 40.8346 52.6295 40.8346C50.5775 40.8346 48.9139 39.183 48.9142 37.1444C48.9142 35.1099 50.5776 33.4582 52.6295 33.4582C54.6814 33.4582 56.3427 35.1099 56.3427 37.1444Z",fill:"currentColor",fillOpacity:.15}))});o.elementType="Icon",i.Z=o},187037:function(e,i,l){var t=l(520739),n=l(878389),o=l(563097),a=l(88648);let r=(0,a.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.836 7C9.49 7 6 10.726 6 15.064c0 .108.002.194.003.253a1.62 1.62 0 0 0-.003.14c.013.582.146 1.284.293 1.87.143.572.344 1.208.57 1.668.907 1.952 2.495 3.846 4.023 5.402a46.034 46.034 0 0 0 5.138 4.51l.03.025.023.018c.339.34 1.055 1.05 2.331 1.05h.038c.361 0 1.224 0 1.996-.752l.063-.053.273-.227.006-.005c.847-.698 2.828-2.33 4.782-4.301 1.25-1.254 2.547-2.71 3.538-4.214.135-.204.265-.41.388-.617.049-.08.09-.166.123-.255.044-.115.065-.16.082-.194.019-.037.05-.093.131-.219.057-.089.106-.183.145-.281.055-.14.095-.235.127-.299l.006-.013a1.62 1.62 0 0 0 .285-.562c.243-.863.41-1.623.426-2.558 0-.043 0-.086-.003-.129a10.365 10.365 0 0 0 .003-.31C30.788 10.697 27.308 7 22.98 7c-1.641 0-3.238.508-4.498 1.532C17.119 7.545 15.547 7 13.836 7zm13.744 8.066v.042l-.002.15v.008l-.002.137c0 .015 0 .041.002.074-.014.44-.084.837-.233 1.402a3.667 3.667 0 0 0-.151.278c-.064.13-.122.265-.174.39a4.472 4.472 0 0 0-.376.738c-.076.125-.156.25-.24.378l-.002.002c-.823 1.25-1.954 2.534-3.13 3.713l-.003.003c-1.835 1.851-3.712 3.4-4.55 4.09l-.062.051-.235.195-.092-.091a3.812 3.812 0 0 0-.294-.254l-.012-.01a42.76 42.76 0 0 1-4.82-4.226l-.006-.006c-1.452-1.477-2.736-3.062-3.406-4.512a1.665 1.665 0 0 0-.021-.046c-.075-.15-.213-.533-.338-1.033a6.736 6.736 0 0 1-.193-1.074 1.837 1.837 0 0 0 0-.2v-.008a6.941 6.941 0 0 1-.003-.193c0-2.667 2.154-4.827 4.6-4.827 1.285 0 2.5.523 3.588 1.653a1.618 1.618 0 0 0 2.491-.193c.642-.914 1.732-1.46 3.064-1.46 2.444 0 4.6 2.162 4.6 4.827v.002z",fill:"#2F3035",fillOpacity:".9"})})));i.Z=r},182424:function(e,i,l){var t=l(520739),n=l(878389),o=l(563097),a=l(88648);let r=(0,a.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{d:"M10 10.693c0-1.7 0-2.549.354-3.013A1.729 1.729 0 0 1 11.64 7c.582-.03 1.284.45 2.687 1.409l9.697 6.63c1.097.75 1.646 1.126 1.843 1.598.172.414.177.878.014 1.296-.187.476-.727.863-1.808 1.638l-9.697 6.945c-1.413 1.013-2.12 1.52-2.71 1.498a1.728 1.728 0 0 1-1.305-.67C10 26.877 10 26.007 10 24.268V10.693z",fill:"#0A0C20"})})));i.Z=r},819283:function(e,i,l){var t=l(520739),n=l(878389),o=l(563097),a=l(88648);let r=(0,a.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:16,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{d:"M14.82 11.575c.675 1.098-.151 2.562-1.579 2.562H1.744c-1.353 0-2.18-1.464-1.503-2.562L6.027 1.84c.3-.585.902-.878 1.503-.878.601 0 1.202.293 1.503.878l5.786 9.736zm-1.178.672l-.011-.017-5.786-9.736-.04-.071c-.047-.092-.141-.144-.275-.144-.134 0-.229.052-.276.144l-.039.07-5.797 9.754c-.144.235.052.573.326.573H13.24c.346 0 .546-.336.4-.573zm-6.245-7.03c-.343 0-.617.201-.617.453v3.562c0 .251.274.452.617.452h.136c.343 0 .616-.201.616-.452V5.67c0-.252-.273-.453-.616-.453h-.136zm-.617 5.916c0 .168.074.336.201.455a.715.715 0 0 0 .968 0c.127-.119.2-.287.2-.455a.633.633 0 0 0-.2-.456.715.715 0 0 0-.968 0 .634.634 0 0 0-.2.456z",fill:"currentColor"})})));i.Z=r}}]);