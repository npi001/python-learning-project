"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["13691"],{553173:function(e,t,l){l.d(t,{n:function(){return eE},m:function(){return eS}});var a=l("563097"),n=l("88648"),i=l("309931"),o=l("782442");l("874386");var r=l("227630"),s=l("417992"),u=l("520739");l("268917");var d=l("90837"),c=l("544933"),m=new c.h({report_web:{eventName:"report_web",params:{report_type:"",object_id:"",enter_method:""}}}),v=l("717670"),f=l("216554"),p=l("713097"),g=l.n(p);let h=e=>{let{selected:t,disable:l,label:i,className:o,onClick:r,value:s}=e,u=n.useCallback(()=>{r&&r(s,!t)},[s,t,r]);return(0,a.jsxs)("div",{className:g()(f.default.radioContainer,o),children:[(0,a.jsx)("div",{onClick:u,className:g()(f.default.radio,{[f.default.selected]:t,[f.default.disable]:l})}),i&&(0,a.jsx)("span",{className:f.default.label,children:i})]})};var _=l("794706");let y=e=>{let{notResize:t=!1,value:l,onChange:i,placeholder:o,maxLength:r,width:s,className:u,minHeight:d}=e,c=n.useRef(null),[m,v]=n.useState(),f=n.useCallback(e=>{let t=e.target.value;t.length<=r&&i(t)},[i]);return(0,a.jsxs)("div",{style:{width:s},className:g()(_.default.textareaContainer,u),children:[(0,a.jsx)("textarea",{value:l,ref:c,style:{minHeight:d,height:m},onChange:f,onKeyDown:e=>e.stopPropagation(),placeholder:o,className:_.default.textarea}),void 0!==r&&(0,a.jsxs)("div",{className:g()(_.default.count,{[_.default.overflow]:l.length>r}),children:[l.length,"/",r]})]})};var x=l("428584");function k(e){let{size:t="normal",type:l="primary",children:n,autoFixed:i=!0,className:o,width:r,style:s,theme:d="solid",disabled:c=!1,onClick:m=function(){}}=e;return(0,a.jsx)("button",{type:"button",disabled:c,onClick:m,className:g()(x.default.button,x.default[t],x.default[l],x.default[d],{[x.default.fixed]:!i},o),style:(0,u._)({width:r&&`${r}px`},s),children:n})}var C=e=>{let{reasons:t,type:l,object_id:i,isLive:o=!1,onLiveReport:r=()=>void 0,logParams:s,toast:c}=e,[f,p]=n.useState(""),[g,_]=n.useState(""),x=n.useMemo(()=>{let e={};for(let l=0;l<t.length;l++){let a=t[l];e[l%3]?e[l%3].push(a):e[l%3]=[a]}return e},[t]),C=n.useCallback(e=>{_(e)},[]),b=n.useCallback(()=>{!o&&(m.sendLog("report_web",(0,u._)({report_type:l,object_id:i},s)),null==e||e.onClose()),o&&(r(g,f),null==e||e.onClose()),c?c("提交成功",null==e?void 0:e.toastParent):v.F.info("提交成功",null==e?void 0:e.toastParent)},[g,f,r]);return(0,a.jsxs)("div",{className:d.default.reportContainer,"data-e2e":"report-container",children:[(0,a.jsxs)("div",{className:d.default.reasonList,children:[(0,a.jsx)("div",{className:d.default.col,children:(x[0]||[]).map(e=>(0,a.jsx)(h,{selected:g===e.value,label:e.label,value:e.value,className:d.default.reasonItem,onClick:C},e.value))}),(0,a.jsx)("div",{className:d.default.col,children:(x[1]||[]).map(e=>(0,a.jsx)(h,{selected:g===e.value,label:e.label,value:e.value,className:d.default.reasonItem,onClick:C},e.value))}),(0,a.jsx)("div",{className:d.default.col,children:(x[2]||[]).map(e=>(0,a.jsx)(h,{selected:g===e.value,label:e.label,value:e.value,className:d.default.reasonItem,onClick:C},e.value))})]}),(0,a.jsx)(y,{notResize:!0,maxLength:140,placeholder:"请详细描述举报原因，便于平台判断违规情况",minHeight:75,value:f,onChange:e=>p(e),className:d.default.reportDesc}),(0,a.jsx)(k,{className:d.default.submit,onClick:b,disabled:!g,children:"提交"})]})};let b=["色情低俗","违法犯罪","造谣传谣","垃圾广告","售卖假货","非原创内容","未成年人相关","其他"],P=["色情低俗","违法犯罪","造谣传谣","垃圾广告","骚扰","人身攻击","时政不实信息"],j=["色情低俗","违法犯罪","造谣传谣","垃圾广告","骚扰","人身攻击","时政不实信息"],N=["色情低俗","违法犯罪","造谣传谣","垃圾广告","售卖假货","未成年相关","头像、昵称、签名、背景图违规"],S=["违法违禁","淫秽色情","抽烟饮酒","欺诈/售假","未成年人相关","危险行为","录像/盗播","声音违规","诱导刷礼","引导线下转账","侮辱谩骂","其他"];var w=e=>{let[t,l]=(0,n.useState)(!0),[u,d]=n.useState(r.default.zoomIn),c=n.useCallback(()=>{d(r.default.zoomOut),setTimeout(()=>{var t;l(!1),i.unmountComponentAtNode(e.portalRef),e.portalRef.remove(),null===(t=e.onClose)||void 0===t||t.call(e)},300)},[t]);return(0,n.useEffect)(()=>()=>{o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!1)},[]),(0,a.jsx)(s.u,{title:e.title,visible:t,className:u,onCancel:c,children:(0,a.jsx)(C,{toast:null==e?void 0:e.toast,toastParent:e.toastParent,reasons:function(e){switch(e){case"video":return b.map(e=>({label:e,value:e}));case"comment":return P.map(e=>({label:e,value:e}));case"user":return N.map(e=>({label:e,value:e}));case"live":return S.map(e=>({label:e,value:e}));case"danmaku":return j.map(e=>({label:e,value:e}));default:return[]}}(e.type),onClose:c,object_id:e.object_id,type:e.type,isLive:!0,onLiveReport:e.onLiveReport,logParams:e.logParams})})};l("250440"),l("779788");var E=l("254127"),I=l("506467"),L=l("34644"),R=l("108095"),T=l("557329"),M=l("477667");let{ArrowUp:A,ArrowDown:F,W:U,S:B,Escape:O,N:D}=I.bf,V=e=>{let{visible:t,children:l,title:i,footer:o,className:r,footerClassName:s,onCancel:u,showClose:d=!0}=e,c=n.useRef(),m=e=>{e.stopPropagation()};return(n.useEffect(()=>{let e="report/ui/Modal";return(0,L.o)({disableKey:[F,A,U,B,O,D].map(e=>e.code),pauseGlobalShortcut:!0},e),()=>{(0,L.m)(e)}},[]),(0,n.useEffect)(()=>{var e,t,l;return null===(e=c.current)||void 0===e||e.setAttribute("tabindex","0"),null===(t=c.current)||void 0===t||t.addEventListener("DOMMouseScroll",m),null===(l=c.current)||void 0===l||l.focus(),()=>{var e;null===(e=c.current)||void 0===e||e.removeEventListener("DOMMouseScroll",m)}},[t]),t)?(0,a.jsx)("div",{className:T.default.mask,ref:c,onWheel:m,children:(0,a.jsxs)("div",{className:g()(T.default.modalContainer,r),"data-e2e":"report-container",children:[d&&(0,a.jsx)("div",{className:T.default.close,onClick:()=>{"function"==typeof u&&u(!1)},"data-e2e":"report-container-close",children:(0,a.jsx)(R.n,{width:36,height:36,src:M.Z})}),i&&(0,a.jsx)("div",{className:T.default.title,children:i}),(0,a.jsx)("div",{className:T.default.content,children:l}),(0,a.jsx)("div",{className:g()(T.default.footer,s),children:o})]})}):null};var H=l("743333"),Z=l("656837");let K=e=>{let{text:t,required:l=!1,className:n}=e;return(0,a.jsxs)("div",{className:g()(Z.default.container,n),children:[(0,a.jsx)("div",{className:Z.default.text,children:t}),l&&(0,a.jsx)("div",{className:Z.default.icon,children:"*"})]})};var $=l("335976"),W=l("137425");let z=e=>{let{objectId:t,schemaType:l=1}=e,[i,o]=(0,n.useState)();return(0,n.useEffect)(()=>{let a=`schema_type=${l}&object_id=${t}`;(0,W.ep)(e.objectId,{schema:a}).then(e=>{!e||(null==e?void 0:e.statusCode)?v.F.info("服务器打瞌睡了，请稍后再试"):o(null==e?void 0:e.qrcodeUrl)})},[t,l]),(0,a.jsx)("img",{className:e.className,src:i})};var G=l("818439");let Y=e=>{let{value:t="",onChange:l,placeholder:i,maxLength:o,width:r,className:s,minHeight:u}=e,d=n.useRef(null),c=n.useCallback(e=>{let t=e.target.value;t.length<=o&&l(t)},[l]);return(0,a.jsxs)("div",{style:{width:r},className:g()(G.default.textareaContainer,s),children:[(0,a.jsx)("textarea",{value:t,ref:d,style:{minHeight:u},onChange:c,onKeyDown:e=>e.stopPropagation(),placeholder:i,className:G.default.textarea}),void 0!==o&&(0,a.jsxs)("div",{className:g()(G.default.count,{[G.default.overflow]:t.length>o}),children:[t.length,"/",o]})]})};var q=l("906381"),J=l("863822"),X=l("661540");let Q=e=>{let{value:t,className:l,onClick:n}=e;return(0,a.jsxs)("div",{className:g()(J.default.container,l),onClick:n,children:[(0,a.jsx)("div",{className:J.default.text,children:t}),(0,a.jsx)(R.n,{className:J.default.icon,src:X.Z,width:24,height:24})]})};var ee=l("392188"),et=l("878389");let el=(0,n.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,et._)((0,u._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M20.566 9.364a1.929 1.929 0 0 1 2.727 2.727l-5.637 5.637 5.637 5.637a1.928 1.928 0 1 1-2.727 2.727l-6.985-6.985-.016-.015a1.929 1.929 0 0 1 0-2.728l7-7z",fill:"#0A0C20"})})));var ea=e=>{let{visible:t,defaultValue:l=[],onCancel:i,onOk:o}=e,[r,s]=(0,n.useState)(l),{ReportEntry:u}=window;return u?(0,a.jsx)(V,{title:(0,a.jsxs)("div",{className:ee.default.title,children:[(0,a.jsx)(R.n,{className:ee.default.icon,src:el,width:24,height:24,onClick:()=>i()}),(0,a.jsx)("div",{children:"选择聊天证据"})]}),visible:t,showClose:!1,onCancel:()=>i(),footer:(0,a.jsx)(H.z,{style:{width:"100%"},onClick:()=>o(r),disabled:!r.length,children:"确定"}),children:(0,a.jsx)("div",{className:ee.default.messageContainer,children:(0,a.jsx)(u,{onMessageSelect:e=>s(e),selectedMessage:r})})}):null},en=l("599961");l("675373");var ei={VIDEO:101,101:"VIDEO",COMMENT:102,102:"COMMENT",USER:103,103:"USER",IMAGE:126,126:"IMAGE",IM:106,106:"IM",IM_GROUP:115,115:"IM_GROUP"};let eo=e=>{var t,l,i,o,r;let{reportScene:s,objectId:u,reasonList:d,reasonMap:c,onChange:m,abtestData:v}=e,[f,p]=(0,n.useState)(),[g,h]=(0,n.useState)(),[_,y]=(0,n.useState)(),[x,k]=(0,n.useState)(),[C,b]=(0,n.useState)(),P=!!(null==v?void 0:v.openQinquan)&&60448===f;return(0,n.useEffect)(()=>{let e=!!P||(s===ei.USER?g:f&&60448!==f);m({reasonCode:g||f,reportLabels:_,reportDesc:x,imgList:C,validate:e})},[f,g,_,x,v]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"举报原因",required:!0}),(0,a.jsx)($.E,{column:3,optionList:d,value:f,onChange:e=>{p(e),h(void 0),y(void 0)}}),60448===f?P?(0,a.jsx)("div",{className:en.default.jumpText,children:"侵权问题需要详细举证，提交后进入批量侵权举报页面"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:en.default.infringement,children:["侵权问题需要详细举证，可扫描下方抖音码前往",(0,a.jsx)("br",{}),"「抖音APP」进行侵权举报"]}),(0,a.jsx)(z,{className:en.default.douyinCode,objectId:u,schemaType:s===ei.USER?4:1})]}):(0,a.jsxs)(a.Fragment,{children:[(null===(l=c.get(f))||void 0===l?void 0:null===(t=l.children)||void 0===t?void 0:t.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"请选择具体的类型",required:s===ei.USER}),(0,a.jsx)($.E,{column:3,optionList:null===(i=c.get(f))||void 0===i?void 0:i.children,value:g,onChange:h})]}),(null===(r=c.get(f))||void 0===r?void 0:null===(o=r.report_labels)||void 0===o?void 0:o.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"请选择具体的类型"}),(0,a.jsx)($.E,{column:3,optionList:c.get(f).report_labels,value:_,onChange:y})]}),(0,a.jsx)(K,{text:"举报描述"}),(0,a.jsx)(Y,{maxLength:200,placeholder:"请详细描述举报原因，便于平台判断违规情况",minHeight:75,value:x,onChange:k}),(0,a.jsxs)("div",{className:en.default.uploadContainer,children:[(0,a.jsx)(q.U,{value:C,onChange:b}),(0,a.jsx)("div",{className:en.default.uploadTips,children:"每张小于 10M，支持JPG、PNG格式，最多上传4张"})]})]})]})},er=e=>{var t,l,i,o,r;let{reasonList:s,reasonMap:u,onChange:d}=e,[c,m]=(0,n.useState)(),[v,f]=(0,n.useState)(),[p,g]=(0,n.useState)(),[h,_]=(0,n.useState)(),[y,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=c&&(null==h?void 0:h.length);d({reasonCode:v||c,reportLabels:p,chatList:h,validate:e})},[c,v,p,h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"举报原因",required:!0}),(0,a.jsx)($.E,{column:3,optionList:s,value:c,onChange:e=>{m(e),f(void 0),g(void 0)}}),(null===(l=u.get(c))||void 0===l?void 0:null===(t=l.children)||void 0===t?void 0:t.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"请选择具体的类型"}),(0,a.jsx)($.E,{column:3,optionList:null===(i=u.get(c))||void 0===i?void 0:i.children,value:v,onChange:f})]}),(null===(r=u.get(c))||void 0===r?void 0:null===(o=r.report_labels)||void 0===o?void 0:o.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"请选择具体的类型"}),(0,a.jsx)($.E,{column:3,optionList:u.get(c).report_labels,value:p,onChange:g})]}),(0,a.jsx)(K,{text:"聊天证据",required:!0}),(0,a.jsx)(Q,{value:(null==h?void 0:h.length)?`已添加${h.length}条聊天证据`:"添加聊天证据",onClick:()=>x(!0)}),(0,a.jsx)(ea,{visible:y,defaultValue:h,onCancel:()=>x(!1),onOk:e=>{_(e),x(!1)}})]})},es=e=>{var t,l,i,o,r;let{videoId:s,reasonList:u,reasonMap:d,onChange:c}=e,[m,v]=(0,n.useState)(),[f,p]=(0,n.useState)(),[g,h]=(0,n.useState)();return(0,n.useEffect)(()=>{let e=m&&60466!==m;c({reasonCode:f||m,reportLabels:g,validate:e})},[m,f,g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"举报原因",required:!0}),(0,a.jsx)($.E,{column:3,optionList:u,value:m,onChange:e=>{v(e),p(void 0),h(void 0)}}),60466===m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:en.default.infringement,children:["侵权问题需要详细举证，可扫描下方抖音码前往",(0,a.jsx)("br",{}),"「抖音APP」进行侵权举报"]}),(0,a.jsx)(z,{className:en.default.douyinCode,objectId:s})]}):(0,a.jsxs)(a.Fragment,{children:[(null===(l=d.get(m))||void 0===l?void 0:null===(t=l.children)||void 0===t?void 0:t.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"请选择具体的类型"}),(0,a.jsx)($.E,{column:3,optionList:null===(i=d.get(m))||void 0===i?void 0:i.children,value:f,onChange:p})]}),(null===(r=d.get(m))||void 0===r?void 0:null===(o=r.report_labels)||void 0===o?void 0:o.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{text:"请选择具体的类型"}),(0,a.jsx)($.E,{column:3,optionList:d.get(m).report_labels,value:g,onChange:h})]})]})]})};var eu=e=>{let{reportScene:t,reasonData:l,dataSource:n,onValuesChange:i,abtestData:o}=e,{object_id:r,video_id:s}=n,{reasonList:u=[],reasonMap:d=new Map}=l;return(0,a.jsxs)("div",{children:[[ei.VIDEO,ei.IMAGE,ei.USER].includes(t)&&(0,a.jsx)(eo,{reportScene:t,objectId:r,reasonList:u,reasonMap:d,onChange:i,abtestData:o}),[ei.IM,ei.IM_GROUP].includes(t)&&(0,a.jsx)(er,{reasonList:u,reasonMap:d,onChange:i}),[ei.COMMENT].includes(t)&&(0,a.jsx)(es,{videoId:s,reasonList:u,reasonMap:d,onChange:i})]})},ed=l("301701"),ec=l("231755"),em=l("637005"),ev=l("257177"),ef=new c.h({enter_report_edit_page:{eventName:"enter_report_edit_page",params:{object_type:"",object_id:"",enter_from:""}},report_submit:{eventName:"report_submit",params:{object_type:"",object_id:"",enter_from:"",follow_status:"",reason_type:"",report_labels:""}},report_comment:{eventName:"report_comment",params:{comment_panel_position:"",comment_category:"",object_type:"",object_id:"",comment_id:"",enter_from:"",follow_status:"",reason_type:"",report_labels:""}}}),ep=l("941569"),eg=e=>{let{pipelineId:t,dataSource:l,logParams:r,onReport:s,toast:d,abtestData:c}=e,{object_id:m,owner_id:f,owner_sec_id:p,user_id:h,comment_with_emoji:_,enter_from:y,con_short_id:x}=l,[k,C]=(0,n.useState)(!0),[b,P]=n.useState(E.default.zoomIn),[j,N]=(0,n.useState)(),[S,w]=(0,n.useState)(),I=!!(null==c?void 0:c.openQinquan)&&S&&60448===S.reasonCode,L=n.useCallback(()=>{P(E.default.zoomOut),setTimeout(()=>{var t;C(!1),i.unmountComponentAtNode(e.portalRef),e.portalRef.remove(),null===(t=e.onClose)||void 0===t||t.call(e)},300)},[e.onClose]);(0,n.useEffect)(()=>{let e=em.listen(em.EVENT.hideModal,L);return()=>{e()}},[L]),(0,n.useEffect)(()=>()=>{o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!1)},[]),(0,ed.O)({onChange:e=>{let{isFullscreen:t}=e;t&&L()}});let R=(e,t)=>d?null==d?void 0:d(e,t):v.F.info(e,t),T=async()=>{let e,t,l;let a=await (0,ep.b)(p),{reasonCode:n,reportLabels:i,reportDesc:o,imgList:d,chatList:c}=S,{reportScene:v,reasonData:g}=j;if(I){window.open("https://www.douyin.com/qinquan/report?enter_from=pc_douyin","_blank"),L();return}if(i){let t=new Map;g.reasonMap.get(n).report_labels.forEach(e=>t.set(e.value,e.label)),e=t.get(i)}(null==d?void 0:d.length)&&(t=null==d?void 0:d.map(e=>e.Uri).join(",")),(null==c?void 0:c.length)&&(l=c.join(","));let _={follow_status:null==a?void 0:a.follow_status,con_short_id:x,im_message_list:l,source:y},k={app_id:6383,object_id:m,owner_id:f,user_id:h,reported_id:h,report_type:v,reason:n,report_labels:e,report_desc:o,uri:t,image_uri_list:t,msg_list:[ei.IM,ei.IM_GROUP].includes(v)?l:void 0,report_data:JSON.stringify(_)};(0,ec.v_)("/aweme/v1/report/submit/",{},k).then(t=>{switch(!0){case 2159===t.status_code:R("你已举报过该内容，请稍后再试");break;case 0===t.status_code:ef.sendLog("report_submit",(0,u._)({object_type:j.reportScene,object_id:m,enter_from:y,follow_status:null==a?void 0:a.follow_status,reason_type:n,report_labels:e},r)),(null==j?void 0:j.reportScene)===102&&ef.sendLog("report_comment",(0,u._)({object_type:j.reportScene,object_id:m,enter_from:y,follow_status:null==a?void 0:a.follow_status,reason_type:n,report_labels:e},r)),R("提交成功，我们将尽快受理");break;default:R("提交失败，请稍后再试")}L(),null==s||s(0===t.status_code)}).catch(()=>R("服务器打瞌睡了，请稍后再试"))};return((0,n.useEffect)(()=>{var l;(l=t,fetch(`https://lf-mortise.douyinstatic.com/obj/mortise-online/online/${l}_3364`).then(e=>e.json()).then(e=>{var t;let{reportScene:l,reasonCode:a}=e.pluginData;let n=Array.isArray(t=a)?t[0].list.map(e=>{let{reason_code:t,next_reasons:l,report_labels:a}=e.data;return{label:e.text,value:t,children:Array.isArray(l)?l[0].list.map(e=>({label:e.text,value:e.data.reason_code})):void 0,report_labels:Array.isArray(a)?a.map(e=>({label:e.name,value:e.code})):void 0}}):[],i=new Map;return n.forEach(e=>{i.set(e.value,e)}),{reportScene:l,reasonData:{reasonList:n,reasonMap:i}}})).then(e=>{(0,ev.Z)(h),ef.sendLog("enter_report_edit_page",(0,u._)({object_type:e.reportScene,object_id:m,enter_from:y},r)),1===_&&e.reasonData.reasonList.push({label:"表情包侵权",value:60466}),N(e)}).catch(()=>R("服务器打瞌睡了，请稍后再试",null==e?void 0:e.toastParent))},[]),j&&l)?(0,a.jsx)(V,{title:e.title,visible:k,className:g()(b,I?E.default.jumpText:""),footerClassName:I?E.default.jumpTextFooter:"",onCancel:L,footer:(0,a.jsx)(H.z,{className:E.default.submit,onClick:T,disabled:!(null==S?void 0:S.validate),children:"提交"}),children:(0,a.jsx)(eu,{dataSource:l,reportScene:j.reportScene,reasonData:j.reasonData,onValuesChange:w,abtestData:c})}):null};l("602157"),l("927234");var eh=l("732992"),e_=l("510820"),ey=l("77758");let ex=e=>{let{value:t="",onChange:l,placeholder:n}=e;return(0,a.jsx)("input",{className:ey.default.container,placeholder:n,value:t,onChange:e=>l(e.target.value)})};var ek=l("983195"),eC=l("611421"),eb=l("110557");function eP(){return(0,a.jsxs)("svg",{className:eh.default.svg,viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M6.12852 1.14357C5.95738 0.680906 5.51668 0.351562 5 0.351562C4.48332 0.351562 4.04262 0.680906 3.87148 1.14357C2.4282 1.62362 1.38595 2.9984 1.38595 4.62081V5.837C1.38595 6.52216 1.19579 7.19354 0.837147 7.77455L0.11565 8.94342C-0.19778 9.45119 0.162759 10.1098 0.754132 10.1098H9.24587C9.83724 10.1098 10.1978 9.45119 9.88435 8.94342L9.16285 7.77455C8.80421 7.19354 8.61405 6.52216 8.61405 5.837V4.62081C8.61405 2.9984 7.5718 1.62361 6.12852 1.14357Z"}),(0,a.jsx)("path",{d:"M5 12.3969C4.07376 12.3969 3.27772 11.8324 2.92917 11.0247H7.07083C6.72228 11.8324 5.92624 12.3969 5 12.3969Z"})]})}let ej=e=>{var t,l,i,o;let{dataSource:r,onChange:s}=e,[u,d]=(0,n.useState)(),[c,m]=(0,n.useState)(),[v,f]=(0,n.useState)(),[p,g]=(0,n.useState)(),[h,_]=(0,n.useState)(),[y,x]=(0,n.useState)(),k=(0,n.useRef)(),C=(0,n.useRef)(),b=(0,n.useMemo)(()=>{let e={};return r.forEach(t=>{let{label:l,tips:a}=t;e[l]?e[l].children=e[l].children.concat(t):e[l]={name:l,tooltip:a,children:[t]}}),Object.values(e).map(e=>{let{name:t,tooltip:l,children:a}=e;return{name:t,tooltip:l,children:a.map(e=>{let{text:t,reason_type_id:l,sub_reason_list:a=[],toast:n}=e;return{label:t,value:l,children:a.map(e=>({label:e.text,value:e.reason_type_id})),extra:n}})}})},[r]);return(0,n.useEffect)(()=>{switch(!0){case(null==u?void 0:u.value)===void 0:case(null==u?void 0:u.value)===18&&!(null==y?void 0:y.length):case(null==u?void 0:u.value)===18&&!v:case(null==y?void 0:y.includes(1))&&!p:s({verified:!1});break;default:s({reasonData:u,subReasonData:c,desc:v,info:p,images:h,codes:y,verified:!0})}},[u,c,v,p,h,y,s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:eh.default.titleBar,children:[(0,a.jsx)(eP,{}),(0,a.jsx)("div",{className:eh.default.title,children:"您的举报我们将尽快受理，核实后我们将第一时间告知受理结果，请尽量提交完整的举报描述及材料。"})]}),(0,a.jsx)(K,{text:"举报原因",required:!0}),(0,a.jsx)(eb.o,{dataList:b,onChange:e=>{if(e.value!==(null==u?void 0:u.value))setTimeout(()=>{var t,l,a,n;(null==e?void 0:e.value)===18?null===(l=C.current)||void 0===l||null===(t=l.scrollIntoView)||void 0===t||t.call(l,{behavior:"smooth",block:"nearest"}):null===(n=k.current)||void 0===n||null===(a=n.scrollIntoView)||void 0===a||a.call(n,{behavior:"smooth",block:"nearest"})},0),m(void 0),x(void 0),d(e)},value:u}),(null==u?void 0:u.value)!==18&&(null==u?void 0:null===(t=u.children)||void 0===t?void 0:t.length)>0&&(0,a.jsxs)("div",{ref:k,children:[(0,a.jsx)(K,{text:"请选择具体的举报类型（选填）"}),(0,a.jsx)(eb.D,{dataList:null==u?void 0:u.children,onChange:m,value:c})]}),(null==u?void 0:u.value)===18&&(null==u?void 0:null===(l=u.children)||void 0===l?void 0:l.length)>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:eh.default.divider}),(0,a.jsxs)("div",{className:eh.default.description,ref:C,children:["权利人请通过广告投诉平台",(0,a.jsxs)("a",{className:eh.default.link,href:"https://phoniex.toutiao.com/phoniex/index",target:"_blank",rel:"noreferrer",children:[" ","https://phoniex.toutiao.com/phoniex/index"," "]}),"进行投诉，同时上传具体材料（权利人身份证明、侵权内容及权利证明等）"]}),(0,a.jsx)(K,{text:"举报类型（多选）",required:(null==u?void 0:u.value)===18}),(0,a.jsx)(e_.C,{optionList:null==u?void 0:u.children,value:y,onChange:x}),(0,a.jsx)(K,{text:(null==y?void 0:null===(i=y.includes)||void 0===i?void 0:i.call(y,1))?"原作者信息":"原作者信息（选填）",required:null==y?void 0:null===(o=y.includes)||void 0===o?void 0:o.call(y,1)}),(0,a.jsx)(ex,{placeholder:"原创作者抖音名称、作品链接或其他信息",value:p,onChange:g})]}),(0,a.jsx)(K,{text:(null==u?void 0:u.value)===18?"举报描述":"举报描述（选填）",required:(null==u?void 0:u.value)===18}),(0,a.jsx)(Y,{maxLength:200,placeholder:"请详细描述举报原因，便于平台判断违规情况",minHeight:75,value:v,onChange:f}),(0,a.jsxs)("div",{className:eh.default.uploadContainer,children:[(0,a.jsx)(q.U,{value:h,onChange:_}),(0,a.jsx)("div",{className:eh.default.uploadTips,children:"每张小于 10M，支持JPG、PNG格式，最多上传4张"})]})]})};var eN=e=>{let{title:t,onClose:l,portalRef:r,toastParent:s,extraInfo:u}=e,[d,c]=(0,n.useState)(!0),[m,f]=n.useState(eh.default.zoomIn),[p,g]=(0,n.useState)(),[h,_]=(0,n.useState)(),y=n.useCallback(()=>{f(eh.default.zoomOut),setTimeout(()=>{c(!1),i.unmountComponentAtNode(r),r.remove(),null==l||l()},300)},[l]);(0,n.useEffect)(()=>()=>{o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!1)},[]),(0,n.useEffect)(()=>{let e=em.listen(em.EVENT.hideModal,y);return()=>{null==e||e()}},[y]);let x=(0,n.useCallback)(e=>{v.F.info(e,s)},[s]),k=async()=>{let{user_id:e,log_extra:t,creative_id:l}=u,{reasonData:a,subReasonData:n,desc:i,info:o,images:r=[],codes:s=[]}=h,d={creative_id:l,log_extra:t,data:{user_id:e,report_type_id:a.value,report_type_name:a.label,report_pictures:r.map(e=>e.Uri).toString(),report_description:i,sub_reason_id:18===a.value?void 0:null==n?void 0:n.value,sub_reason_name:18===a.value?void 0:null==n?void 0:n.label,report_author_info:18===a.value?o:void 0,report_right_type:18===a.value?s.toString():void 0}};(0,eC.GA)(d).then(e=>{0===e.code?(x("操作成功，将严格审查广告内容"),y()):x("服务器打瞌睡了，请稍后再试")}).catch(()=>x("服务器打瞌睡了，请稍后再试"))};return(0,ed.O)({onChange:e=>{let{isFullscreen:t}=e;t&&y()}}),(0,n.useEffect)(()=>{(0,eC.iL)().then(e=>{(0,ev.Z)(null==u?void 0:u.user_id),g(e.data)}).catch(()=>x("服务器打瞌睡了，请稍后再试"))},[]),(0,a.jsx)(V,{title:t,visible:d,className:m,onCancel:y,footer:(0,a.jsx)(H.z,{className:eh.default.submit,onClick:k,disabled:!(null==h?void 0:h.verified),children:"提交"}),children:p?(0,a.jsx)(ej,{dataSource:p,onChange:_}):(0,a.jsx)(ek.g,{text:"加载中"})})};let eS=(e,t)=>{if(o.Le.getConfig(o.gI.IsAlreadyExsitReportModal))return;let{loginDispatch:l,userInfo:a,abtestData:n}=e;if((null==a?void 0:a.uid)||e.user_id||(null==e?void 0:e.isLive)||(null==e?void 0:e.isOrigin))(null==a?void 0:a.uid)&&(e.user_id=null==a?void 0:a.uid),ew(e,t);else{var i;(null===(i=window)||void 0===i?void 0:i.showAccount)&&window.showAccount({enterMethod:"report",success:a=>{l({type:"updateUserInfo"}),e.user_id=null==a?void 0:a.user_id,ew(e,t)}})}},ew=(e,t)=>{var l,n;if("object"!=typeof e)return;let r=()=>{o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!1),"function"==typeof e.onClose&&e.onClose()},s=(null==e?void 0:e.type)==="live",u=document.createElement("div"),d=document.getElementById("root"),c=(()=>{var e;if(t)return t;if(!s)return document.fullscreenElement||d;let l=document.getElementById("slideMode")||document.getElementsByClassName("xgplayer-fullscreen-parent")[0]||document.getElementsByClassName("isCssFullScreen")[0]||document.fullscreenElement,a=document.querySelector(".modal-video-container");return l?l:(null===(e=o.Le.getConfig(o.gI.IsPageFullScreen))||void 0===e?void 0:e.type)?d:a?a:d})();if(!!c)if(c.appendChild(u),e.isOrigin)o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!0),null==e||null===(l=e.onShow)||void 0===l||l.call(e),i.render((0,a.jsx)(w,{toastParent:c,portalRef:u,title:e.title,type:e.type,object_id:e.object_id,logParams:e.logParams,onClose:r,onLiveReport:e.onLiveReport||(()=>void 0),toast:null==e?void 0:e.toast}),u);else{let{title:t,logParams:l,pipeline_id:s,object_id:d,owner_id:m,user_id:v,comment_with_emoji:f=0,enter_from:p,con_short_id:g,video_id:h,onReport:_,toast:y,owner_sec_id:x,abtestData:k}=e;o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!0),null==e||null===(n=e.onShow)||void 0===n||n.call(e),i.render((0,a.jsx)(eg,{toastParent:c,portalRef:u,title:t,onClose:r,logParams:l,pipelineId:s,dataSource:{object_id:d,owner_id:m,user_id:v,comment_with_emoji:f,enter_from:p,con_short_id:g,video_id:h,owner_sec_id:x},onReport:_,toast:y,abtestData:k}),u)}},eE=(e,t)=>{if(o.Le.getConfig(o.gI.IsAlreadyExsitReportModal))return;let{loginDispatch:l,user_id:a,abtestData:n}=e;if(a)eI(e,t);else{var i;(null===(i=window)||void 0===i?void 0:i.showAccount)&&window.showAccount({enterMethod:"report",success:a=>{var n;l({type:"updateUserInfo"}),null==e||null===(n=e.onLoginSuccess)||void 0===n||n.call(e),e.user_id=null==a?void 0:a.user_id,eI(e,t)}})}},eI=(e,t)=>{let{creative_id:l,log_extra:n,user_id:r,title:s,onClose:u,onShow:d}=e,c=document.createElement("div"),m=document.getElementById("root");if(t)m=t,null==t||t.appendChild(c);else{var v;let e=document.getElementById("slideMode")||document.getElementsByClassName("xgplayer-fullscreen-parent")[0]||document.getElementsByClassName("isCssFullScreen")[0],t=document.querySelector(".modal-video-container");if((null===(v=o.Le.getConfig(o.gI.IsPageFullScreen))||void 0===v?void 0:v.type)||e)e&&(m=e),m.appendChild(c);else if(t)m=t,t.appendChild(c);else{let e=document.getElementById("root");null==e||e.appendChild(c)}}o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!0),null==d||d(),i.render((0,a.jsx)(eN,{toastParent:m,portalRef:c,title:s,onClose:()=>{o.Le.setConfig(o.gI.IsAlreadyExsitReportModal,!1),"function"==typeof u&&u()},extraInfo:{creative_id:l,log_extra:n,user_id:r}}),c)}},743333:function(e,t,l){l.d(t,{z:function(){return s}});var a=l(520739),n=l(563097);l(88648);var i=l(713097),o=l.n(i),r=l(549419);function s(e){let{children:t,className:l,width:i,style:s,disabled:u=!1,onClick:d=function(){}}=e;return(0,n.jsx)("button",{type:"button",disabled:u,onClick:d,className:o()(r.default.button,l),style:(0,a._)({width:i&&`${i}px`},s),children:t})}},110557:function(e,t,l){l.d(t,{D:function(){return d},o:function(){return c}});var a=l(563097),n=l(88648),i=l(115855),o=l(933380),r=l(265555);function s(e){return(0,a.jsxs)("svg",{className:e.className,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M6.31015 4.19993C6.30457 3.81502 6.61505 3.5 7 3.5C7.38495 3.5 7.69543 3.81502 7.68984 4.19993L7.63803 7.77116C7.63297 8.11992 7.3488 8.4 7 8.4C6.6512 8.4 6.36703 8.11992 6.36197 7.77116L6.31015 4.19993Z"}),(0,a.jsx)("path",{d:"M7 10.64C7.42526 10.64 7.77 10.2953 7.77 9.87C7.77 9.44474 7.42526 9.1 7 9.1C6.57474 9.1 6.23 9.44474 6.23 9.87C6.23 10.2953 6.57474 10.64 7 10.64Z"}),(0,a.jsx)("path",{d:"M7 14C10.866 14 14 10.866 14 7C14 3.13401 10.866 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14ZM7 12.95C3.71391 12.95 1.05 10.2861 1.05 7C1.05 3.71391 3.71391 1.05 7 1.05C10.2861 1.05 12.95 3.71391 12.95 7C12.95 10.2861 10.2861 12.95 7 12.95Z"})]})}function u(e){let{text:t,tooltip:l}=e,r=(0,n.useRef)();return(0,a.jsxs)("div",{className:i.default.categoryTextContainer,children:[(0,a.jsx)("div",{className:i.default.categoryText,children:t}),l&&(0,a.jsx)(o.e,{text:l,type:"right",target:r.current,children:(0,a.jsx)("div",{className:i.default.iconContainer,ref:r,children:(0,a.jsx)(s,{className:i.default.alertCircle})})})]})}function d(e){let{dataList:t=[],value:l,onChange:n}=e;return(0,a.jsx)("div",{className:i.default.dataItemList,children:t.map(e=>(0,a.jsx)(r.Y,{className:i.default.dataItem,style:e.label.length>=7?{width:"calc(100% - 40px)"}:void 0,label:e.label,checked:(null==l?void 0:l.value)===e.value,value:e.value,onCheck:()=>n(e)},e.value))})}function c(e){let{dataList:t=[],value:l,onChange:n}=e;return(0,a.jsx)("div",{className:i.default.container,children:t.map(e=>{let{name:t,tooltip:o,children:r=[]}=e;return(0,a.jsxs)("div",{className:i.default.categoryItemList,children:[t&&(0,a.jsx)(u,{text:t,tooltip:o}),(0,a.jsx)(d,{dataList:r,value:l,onChange:n})]},t)})})}},368679:function(e,t,l){l.d(t,{J:function(){return r}});var a=l(563097);l(88648);var n=l(765593),i=l(713097),o=l.n(i);let r=e=>{let{label:t,className:l,onSelect:i,value:r,style:s,selected:u}=e;return(0,a.jsxs)("div",{className:o()(n.default.container,l),style:s,children:[(0,a.jsx)("div",{className:u?n.default.selected:n.default.icon,onClick:()=>i(r)}),t&&(0,a.jsx)("span",{className:n.default.label,children:t})]})}},510820:function(e,t,l){l.d(t,{C:function(){return o}}),l(874386);var a=l(563097);l(88648);var n=l(461523),i=l(368679);let o=e=>{let{optionList:t,value:l=[],onChange:o}=e,r=new Set(l),s=e=>{r.has(e)?r.delete(e):r.add(e),o([...r.values()])};return Array.isArray(t)?(0,a.jsx)("div",{className:n.default.container,children:t.map(e=>(0,a.jsx)(i.J,{className:n.default.radio,style:e.label.length>=7?{width:"calc(100% - 40px)"}:void 0,label:e.label,value:e.value,selected:r.has(e.value),onSelect:s},e.value))}):null}},906381:function(e,t,l){l.d(t,{U:function(){return p}});var a=l(520739),n=l(878389);l(874386),l(250440),l(882732),l(544943);var i=l(563097),o=l(88648),r=l(108095),s=l(565850),u=l(167993),d=l(257177),c=l(717670);let m="image/png,image/jpeg,image/jpg";function v(e){let{currentLength:t,maxLength:l,onUpload:a}=e,n=(0,o.useRef)(),d=(0,o.useCallback)(()=>{var e;(null===(e=n.current)||void 0===e?void 0:e.value)&&(n.current.value="")},[]);return t===l?null:(0,i.jsxs)("div",{className:u.default.wrap,children:[(0,i.jsx)("input",{className:u.default.input,type:"file",accept:m,multiple:!0,onChange:e=>a(e,d),ref:n}),(0,i.jsx)("div",{className:u.default.buttonContainer,children:(0,i.jsxs)("div",{className:u.default.buttonContent,children:[(0,i.jsx)(r.n,{width:24,height:24,src:s.Z}),(0,i.jsx)("div",{className:u.default.counter,children:`${t}/${l}`})]})})]})}function f(e){let{dataList:t=[],onChange:l}=e,a=e=>{let a=[...t];a.splice(e,1),"function"==typeof l&&l(a)};return(0,i.jsx)(i.Fragment,{children:t.map((e,t)=>(0,i.jsxs)("div",{className:u.default.cover,children:[(0,i.jsx)("div",{className:u.default.close,onClick:()=>a(t)}),(0,i.jsx)("img",{className:u.default.image,src:e.Url})]},e.Uri))})}function p(e){let t=(0,d.Z)(),{maxLength:l=4,value:o=[],onChange:r}=e;return(0,i.jsxs)("div",{className:u.default.container,children:[(0,i.jsx)(f,{dataList:o,onChange:r}),(0,i.jsx)(v,{onUpload:(e,i)=>{let{files:s}=e.target;if(s.length>l){c.F.info(`当前上传图片数量大于 ${l}`);return}for(let e=0;e<s.length;e++){if(s[e].size>10485760){c.F.info("当前上传图片尺寸大于10M");return}if(!m.includes(s[e].type)){c.F.info("当前上传图片是不支持的类型");return}}if(!t){c.F.info("图片上传服务不可用，请稍后再试");return}t.uploadFile(s).then(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r([...o,...e.map((e,t)=>(0,n._)((0,a._)({},e),{Url:window.URL.createObjectURL(s[t])}))]),"function"==typeof i&&i()}).catch(()=>c.F.info("图片上传失败，请重试"))},currentLength:o.length,maxLength:l})]})}},983195:function(e,t,l){l.d(t,{g:function(){return r}});var a=l(563097);l(88648);var n=l(387098),i=l(713097),o=l.n(i);function r(e){let{className:t,text:l,textClassName:i}=e;return(0,a.jsxs)("div",{className:o()(n.default.container,t,"HideInLynxClassName"),children:[(0,a.jsx)("div",{className:n.default.loading}),l&&(0,a.jsx)("div",{className:o()(n.default.text,i),children:l})]})}},417992:function(e,t,l){l.d(t,{u:function(){return _}});var a=l(563097),n=l(477667),i=l(88648),o=l(506467),r=l(34644),s=l(913029),u=l(713097),d=l.n(u),c=l(108095);let{ArrowUp:m,ArrowDown:v,W:f,S:p,Escape:g,N:h}=o.bf,_=e=>{let{children:t,title:l,visible:o,onCancel:u}=e,_=i.useCallback(()=>{u&&u(!1)},[]),y=i.useRef(null),x=e=>{e.stopPropagation()};return i.useEffect(()=>{let e="report/ui/Modal";return(0,r.o)({disableKey:[v,m,f,p,g,h].map(e=>e.code),pauseGlobalShortcut:!0},e),()=>{(0,r.m)(e)}},[]),i.useEffect(()=>{let{current:e}=y;if(e)return e.setAttribute("tabindex","0"),e.addEventListener("DOMMouseScroll",x),e.onwheel=e=>e.preventDefault(),e.focus(),()=>{e.removeEventListener("DOMMouseScroll",x)}},[o]),o?(0,a.jsx)("div",{className:s.default.mask,ref:y,onWheel:x,children:(0,a.jsxs)("div",{className:d()(s.default.modalContainer,e.className),"data-e2e":"report-container",children:[(0,a.jsx)("div",{className:s.default.close,onClick:_,"data-e2e":"report-container-close",children:(0,a.jsx)(c.n,{width:36,height:36,src:n.Z})}),l&&(0,a.jsx)("div",{className:s.default.title,children:l}),(0,a.jsx)("div",{className:s.default.content,children:t})]})}):null}},335976:function(e,t,l){l.d(t,{E:function(){return u}});var a=l(563097),n=l(88648),i=l(713097),o=l.n(i),r=l(265555),s=l(664186);let u=e=>{let{className:t,column:l=1,optionList:i,value:u,onChange:d}=e,c=(0,n.useMemo)(()=>({width:`${100/l}%`}),[l]);return Array.isArray(i)?(0,a.jsx)("div",{className:o()(s.default.container,t),children:i.map(e=>(0,a.jsx)(r.Y,{className:s.default.radio,style:c,label:e.label,value:e.value,checked:u===e.value,onCheck:d},e.value))}):null}},265555:function(e,t,l){l.d(t,{Y:function(){return r}});var a=l(563097);l(88648);var n=l(61061),i=l(713097),o=l.n(i);let r=e=>{let{label:t,value:l,checked:i,disabled:r,className:s,style:u,onCheck:d}=e;return(0,a.jsxs)("div",{className:o()(n.default.container,s),style:u,children:[(0,a.jsx)("div",{onClick:()=>{"function"==typeof d&&d(l)},className:o()(n.default.radio,{[n.default.checked]:i,[n.default.disabled]:r})}),t&&(0,a.jsx)("span",{className:n.default.label,children:t})]})}},108095:function(e,t,l){l.d(t,{n:function(){return u}});var a=l(520739),n=l(563097),i=l(88648),o=l(867910),r=l(713097),s=l.n(r);let u=i.memo(e=>{let{src:t,width:l=18,height:i=18,color:r,viewBox:u,className:d="",onClick:c=()=>void 0,style:m={}}=e,v=r?(0,a._)({fill:r},m):(0,a._)({},m);return(0,n.jsx)(t,(0,a._)({className:s()(r?"":o.default.svg,d),width:l,height:i,viewBox:u||"0 0 36 36",onClick:c},v))})},717670:function(e,t,l){l.d(t,{F:function(){return y}});var a,n=l(134761),i=l(520739),o=l(878389);l(268917),l(874386);var r=l(563097),s=l(713097),u=l.n(s),d=l(88648),c=l(309931),m=l(367366),v=l(497329);let f=null,p=null,g=null,h=null,_={text:"",duration:3e3};class y extends(a=d.Component){static create(e){if(f)return e&&e(f);g=document.body,!document.querySelector("#toastContainer")&&((h=document.createElement("div")).className=v.default.toastWrapper,h.id="toastContainer"),g.appendChild(h),c.render((0,r.jsx)(y,{ref:t=>{f=t,e&&e(f)}}),h)}static info(e,t){let l=(0,i._)({},_);"string"==typeof e?(l.text=e,l.root=t):"object"==typeof e&&null!==e&&(l=(0,i._)((0,o._)((0,i._)({},_),{root:t}),e));let a=document.fullscreenElement||document.getElementsByClassName("xgplayer-fullscreen-parent")[0];(0,m.r)()&&a&&(l.root=a),this.textList.push(l),this.create(e=>{!p&&e&&e.handleShowToast()})}handleShowToast(){p&&(clearTimeout(p),p=null);let e=y.textList.shift();this.setState({showToast:!0,options:e}),p=setTimeout(()=>{y.textList.length?this.handleCloseToast(()=>{setTimeout(this.handleShowToast.bind(this),50)}):(this.handleCloseToast(),this.destroy()),p=null},e.duration)}handleCloseToast(e){this.setState({showToast:!1},()=>e&&e())}destroy(){g.removeChild(h),f=null}render(){let{showToast:e,options:t}=this.state,l=e&&t&&(0,r.jsx)("div",{className:u()(v.default.toast,t.className,{[v.default.parentToastWrapper]:t.root||(0,m.r)()}),children:t.text});return(0,r.jsx)(d.Fragment,{children:t&&t.root?c.createPortal(l,t.root):l})}constructor(...e){super(...e),(0,n._)(this,"state",{showToast:!1})}}(0,n._)(y,"textList",[])},933380:function(e,t,l){l.d(t,{e:function(){return g}});var a=l(520739),n=l(878389);l(874386),l(250440);var i=l(563097),o=l(88648),r=l(309931),s=l(55016),u=l(47914),d=l(108095),c=l(713097),m=l.n(c),v=l(619771),f=l(753443),p={left:"top",right:"top",top:"left",bottom:"left"};let g=e=>{let{type:t="left",text:l,offsetArrow:c,offsetContainer:g,className:h,children:_,onTipClick:y,renderContent:x,clickHidden:k=!1,target:C,offsetWidth:b=0}=e,[P,j]=(0,o.useState)({width:0,height:0}),[N,S]=(0,o.useState)(t),[w,E]=(0,o.useState)(!1),[I,L]=(0,o.useState)({}),R=(0,o.useRef)(null),T=(0,o.useRef)(),M=(0,o.useRef)(null),A=(0,o.useMemo)(()=>(0,v.h)(C),[C]),F=(0,o.useMemo)(()=>(0,f.d)(A,"HTMLBodyElement"),[A]),U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=window.innerWidth,i=window.innerHeight;return{left:e<0?e:0,top:t<0?t:0,right:e+l>n?n-e-l:0,bottom:t+a>i?i-t-a:0}},B=function(){clearTimeout(M.current),M.current=setTimeout(()=>{E(!1)},200)},O=(0,o.useCallback)(()=>{if(!R.current)return{};let e=T.current.getBoundingClientRect(),{width:l,height:i}=e,o=F?e.x:0,r=F?e.y:0,s=(P.width-l)/2,u=(P.height-i)/2;if(["left","right"].includes(t)){switch(t){case"left":o-=P.width+10;break;case"right":o+=l+10}"number"==typeof g?r+=g:r+=-u}else if(["top","bottom"].includes(t)){switch(t){case"top":r-=P.height+10;break;case"bottom":r+=i+10}"number"==typeof g?o+=g:o+=-s}if(F){let{top:e,left:a,right:n,bottom:s}=U(o,r,P.width,P.height);S(t),["left","right"].includes(t)?(e&&(r-=e),s&&(r+=s),a&&!n&&(o+=P.width+20+l,S("right")),n&&!a&&(o-=P.width+20+l,S("left"))):["top","bottom"].includes(t)&&(a&&(o-=a+b),n&&(o+=n-b),e&&!s&&(r+=P.height+20+i,S("bottom")),s&&!e&&(r-=P.height+20+i,S("top")))}return(0,n._)((0,a._)({},I),{left:`${o}px`,top:`${r}px`})},[I,P,g,t,F]),D=(0,o.useCallback)(()=>{let e=o.Children.only(_);return o.cloneElement(e,{onMouseEnter:t=>{var l,a;clearTimeout(M.current),E(!0),T.current=t.target,L(O()),null==e||null===(a=e.props)||void 0===a||null===(l=a.onMouseEnter)||void 0===l||l.call(a,t)},onMouseLeave:()=>{B()}})},[O,_]);(0,o.useEffect)(()=>{let e=e=>{if(!!w)L(O())};return document.addEventListener("scroll",e,!0),()=>{document.removeEventListener("scroll",e,!0)}},[O,w]),(0,o.useLayoutEffect)(()=>{if(!!R.current)j(R.current.getBoundingClientRect())},[w]),(0,o.useLayoutEffect)(()=>{T.current&&L(O())},[P]);let V=(0,o.useMemo)(()=>(0,i.jsxs)("div",{ref:R,style:(0,a._)({position:F?"fixed":"absolute"},I),onMouseEnter:e=>{clearTimeout(M.current)},onMouseLeave:()=>{B()},className:m()(s.default.tooltip,s.default[t],h),onClick:e=>{null==y||y(e),k&&E(!1)},children:[(0,i.jsx)(d.n,{width:4,height:17,src:u.Z,style:{[p[N]]:`${c}%`},className:m()(s.default.icon,s.default[N]),viewBox:"0 0 4 17"}),(0,i.jsx)("span",{className:"",children:x||l})]}),[N,h,k,c,y,x,l,I,t,F]);return(0,i.jsxs)(i.Fragment,{children:[w&&r.createPortal(V,A),D()]})}},257177:function(e,t,l){let a;var n=l(134761);l(675373);var i=l(231755),o=l(670824),r=l.n(o);class s{initUploader(e,t){let{token:l,service_id:a,origin:n,template:i}=e,o=JSON.parse(l);this.bytedUploader=new(r())({userId:t,appId:1128,stsToken:o,imageConfig:{serviceId:a}}),this.uploaderOptions={stsToken:o,serviceId:a,origin:n,template:i}}uploadFile(e){let t=this.bytedUploader.addImageFile({file:Array.from(e).map(e=>new Blob([e])),stsToken:this.uploaderOptions.stsToken});return this.bytedUploader.start(t),new Promise((e,t)=>{this.bytedUploader.on("complete",t=>{e(t.uploadResult)}),this.bytedUploader.on("error",e=>{t(e.extra)})})}constructor(e){(0,n._)(this,"bytedUploader",null),(0,n._)(this,"uploaderOptions",null),(0,i.U2)("/aweme/v1/report/upload/auth/",{}).then(t=>{let{token:l,service_id:a,origin:n,template:i,status_code:o}=t;if(0===o)this.initUploader({token:l,service_id:a,origin:n,template:i},e.userId)})}}t.Z=function(e){return!a&&(a=new s({userId:e})),a}},252376:function(e,t,l){l.d(t,{H:function(){return s}});var a=l(410665),n=l(658065),i=l(32167),o=l(88977);let r=e=>{o.Z.sendLog("playSettingIconShow",{enter_from_merge:(0,n.yW)(),enter_from:(0,i.vM)(),icon:e})},s=e=>(0,a.x)(r.bind(null,e))},969911:function(e,t,l){l.d(t,{QG:function(){return n},p7:function(){return i}});var a=l(412679),n={Margin:"Margin",PlayIcon:"PlayIcon",PlayerTime:"PlayerTime",DanMuInput:"DanMuInput",DanMuIcon:"DanMuIcon",SettingList:"SettingList",InnerAutoPlayer:"InnerAutoPlayer",AutoPlayer:"AutoPlayer",Clear:"Clear",FakeScreen:"FakeScreen",PlayBackRatio:"PlayBackRatio",Volume:"Volume",PageFullScreen:"PageFullScreen",Fullscreen:"Fullscreen",WatchLater:"WatchLater",NativePicture:"NativePicture",ChapterIcon:"ChapterIcon",AiNoteIcon:"AiNoteIcon"},i={PictureInPictureSettingPlugin:"PictureInPictureSettingPlugin",PlayClaritySettingPlugin:"PlayClaritySettingPlugin",EnterDetail:"EnterDetail",PageFullScreenPlugin:"PageFullScreenPlugin",ImmersiveSwitchSettingPlugin:"ImmersiveSwitchSettingPlugin",WatchLaterPlugin:"WatchLaterPlugin",ChapterPlugin:"ChapterPlugin",SearchAutoPlaySettingPlugin:"SearchAutoPlaySettingPlugin",InnerAutoPlayPlugin:"InnerAutoPlayPlugin",AutoPlaySettingPlugin:"AutoPlaySettingPlugin",PlayBackSettingPlugin:"PlayBackSettingPlugin",SoundGuideTooltipPlugin:"SoundGuideTooltipPlugin",SettingListPlugin:"SettingListPlugin",DanmakuPlugin:"DanmakuPlugin",PreviewExtText:"PreviewExtText",Fullscreen:"fullscreen",Volume:"volume",Keyboard:"keyboard",BitrateSelector:"BitrateSelector",PIP:"PIP",PictureProgressPlugin:"PictureProgressPlugin",PipPlugin:"PipPlugin"};a.PZ.CONTROL_LEFT},966648:function(e,t,l){l.d(t,{y:function(){return m}}),l(874386),l(268917),l(250440);var a=l(88648),n=l(34644),i=l(637005),o=l(388862),r=l(330746),s=l(17750),u=l(969911),d=l(330286),c=l(327306);let m=e=>{let{player:t,isLogin:l,isNoPlayer:m,isActive:v}=e,f=(0,c._)(),p=(null==f?void 0:f.useShortcutKeyEdit)||0,g=(null==f?void 0:f.rmShortcutKeyList)||[],[h,_]=(0,a.useState)(!1),y=(0,a.useCallback)(e=>{_(e);let t="shortcutList";e?(0,n.o)({pausePlayControlShortcut:!0,pauseCustomShortcut:!0,pauseGlobalShortcut:!0},t):(0,n.m)(t)},[]),x=(0,a.useCallback)(e=>{var t,l,a,n,i,o,r,d,c,m,v,f,p,g,h,_,y,x,k,C,b,P,j,N;let S=`小窗模式${s.SHORTCUT_KEY.pip.badgeText?`<span class="shortcutKey">${s.SHORTCUT_KEY.pip.badgeText}</span>`:""}`,w=`进入全屏${s.SHORTCUT_KEY.fullscreen.badgeText?`<span class="shortcutKey">${s.SHORTCUT_KEY.fullscreen.badgeText}</span>`:""}`,E=`退出全屏${s.SHORTCUT_KEY.fullscreen.badgeText?`<span class="shortcutKey">${s.SHORTCUT_KEY.fullscreen.badgeText}</span>`:""}`,I=null==e?void 0:null===(n=e.getPlugin)||void 0===n?void 0:null===(a=n.call(e,u.p7.PIP))||void 0===a?void 0:null===(l=a.root)||void 0===l?void 0:null===(t=l.querySelector)||void 0===t?void 0:t.call(l,".xg-tips");(null==e?void 0:null===(r=e.getPlugin)||void 0===r?void 0:null===(o=r.call(e,u.p7.PIP))||void 0===o?void 0:null===(i=o.i18n)||void 0===i?void 0:i.PIP)&&(e.getPlugin(u.p7.PIP).i18n.PIP=S),(null==e?void 0:null===(d=e.i18n)||void 0===d?void 0:d.PIP)&&(e.i18n.PIP=S),I&&(I.innerHTML=S);let L=null==e?void 0:null===(f=e.getPlugin)||void 0===f?void 0:null===(v=f.call(e,u.p7.Fullscreen))||void 0===v?void 0:null===(m=v.root)||void 0===m?void 0:null===(c=m.querySelector)||void 0===c?void 0:c.call(m,'[lang-key="FULLSCREEN_TIPS"]'),R=null==e?void 0:null===(_=e.getPlugin)||void 0===_?void 0:null===(h=_.call(e,u.p7.Fullscreen))||void 0===h?void 0:null===(g=h.root)||void 0===g?void 0:null===(p=g.querySelector)||void 0===p?void 0:p.call(g,'[lang-key="EXITFULLSCREEN_TIPS"]');(null==e?void 0:null===(k=e.getPlugin)||void 0===k?void 0:null===(x=k.call(e,u.p7.Fullscreen))||void 0===x?void 0:null===(y=x.i18n)||void 0===y?void 0:y.FULLSCREEN_TIPS)&&(e.getPlugin(u.p7.Fullscreen).i18n.FULLSCREEN_TIPS=w),(null==e?void 0:null===(C=e.i18n)||void 0===C?void 0:C.FULLSCREEN_TIPS)&&(e.i18n.FULLSCREEN_TIPS=w),(null==e?void 0:null===(j=e.getPlugin)||void 0===j?void 0:null===(P=j.call(e,u.p7.Fullscreen))||void 0===P?void 0:null===(b=P.i18n)||void 0===b?void 0:b.EXITFULLSCREEN_TIPS)&&(e.getPlugin(u.p7.Fullscreen).i18n.EXITFULLSCREEN_TIPS=E),(null==e?void 0:null===(N=e.i18n)||void 0===N?void 0:N.EXITFULLSCREEN_TIPS)&&(e.i18n.EXITFULLSCREEN_TIPS=E),L&&(L.innerHTML=w),R&&(R.innerHTML=E)},[]);(0,a.useEffect)(()=>{if(!!p&&!!l)x(t)},[l,t,p]),(0,a.useEffect)(()=>{if(!p||!l)return()=>{};let e=i.listen(i.EVENT.shortcutListModalVisibleChange,e=>{_(e),!e&&(x(t),[u.p7.AutoPlaySettingPlugin,u.p7.ImmersiveSwitchSettingPlugin,u.p7.PictureInPictureSettingPlugin,u.p7.WatchLaterPlugin,u.p7.PageFullScreenPlugin,u.p7.DanmakuPlugin,u.p7.Fullscreen,u.p7.InnerAutoPlayPlugin,u.p7.PIP,u.p7.PipPlugin].forEach(e=>{var l,a,n;null==t||null===(n=t.getPlugin)||void 0===n||null===(a=n.call(t,e))||void 0===a||null===(l=a.renderRoot)||void 0===l||l.call(a)}))});return()=>{e()}},[l,t,p]);let k=(0,a.useCallback)(async()=>{let e=[...g||[]];!((0,o.ZV)()&&!(0,r.NN)())&&e.push("pip"),y(!0),await (0,d.Ci)({rmShortcutKeyList:e}),x(t),[u.p7.AutoPlaySettingPlugin,u.p7.ImmersiveSwitchSettingPlugin,u.p7.PictureInPictureSettingPlugin,u.p7.WatchLaterPlugin,u.p7.PageFullScreenPlugin,u.p7.DanmakuPlugin,u.p7.Fullscreen,u.p7.InnerAutoPlayPlugin,u.p7.PIP,u.p7.PipPlugin].forEach(e=>{var l,a,n;null==t||null===(n=t.getPlugin)||void 0===n||null===(a=n.call(t,e))||void 0===a||null===(l=a.renderRoot)||void 0===l||l.call(a)}),y(!1)},[t,g]),C=(0,a.useCallback)(e=>{[u.p7.PIP,u.p7.PipPlugin,u.p7.Fullscreen].includes(null==e?void 0:e.pluginName)&&x(t)},[t]);return(0,a.useEffect)(()=>{let e=[...g||[]];!((0,o.ZV)()&&!(0,r.NN)())&&e.push("pip"),(null==e?void 0:e.length)&&(y(!0),e.forEach(e=>{s.SHORTCUT_KEY[e]&&(s.SHORTCUT_KEY[e].code=null,s.SHORTCUT_KEY[e].badgeText="")}),y(!1))},[g]),(0,a.useEffect)(()=>{l&&p&&(m||t)&&k()},[m,t,l,p,g]),(0,a.useEffect)(()=>l&&p&&t&&v?(null==t||t.on("icon_mouseenter",C),()=>{null==t||t.off("icon_mouseenter",C)}):()=>{},[v,t,l,p,g,C]),{isShortcutListShow:h}}},288679:function(e,t,l){l.d(t,{u:function(){return o}});var a=l(96008),n=l.n(a),i=l(88648);let o=(e,t,l)=>(i.useEffect(()=>l&&e?(null==e||e.on(t,l),()=>{null==e||e.off(t,l)}):n(),[l,t,e]),null)},679126:function(e,t,l){l.d(t,{s:function(){return i},v:function(){return o}});var a=l(309931);let n=l(944189).createRoot,i=(e,t)=>{let l=e.root||e.el;if(e.clientRoot){e.clientRoot.render(t);return}l&&(e.clientRoot=n(l),e.clientRoot.render(t))},o=e=>{if(e.clientRoot){let t=e.clientRoot;e.clientRoot=void 0,setTimeout(()=>{t.unmount()},0)}else a.unmountComponentAtNode(e.root)}},867255:function(e,t,l){l.d(t,{R:function(){return B},d:function(){return O}});var a=l(520739);l(874386),l(675373);var n=l(563097),i=l(88648),o=l(713097),r=l.n(o),s=l(877639),u=l.n(s),d=l(747909),c=l(146914),m=l(739898),v=l(410665),f=l(553173),p=l(967171),g=l(55426),h=l(32167),_=l(658065),y=l(637005),x=l(782442),k=l(34644),C=l(367366),b=l(267830),P=l(697021),j=l(512311),N=l(176992),S=l(358003),w=l(516599),E=l(301061),I=l(902845),L=l(5507),R=l(108336),T=l(461423),M=l(185339),A=l(394913),F=l(254897);let U=e=>{let{danmaku:t,useDanmakuItem:l}=e,{emojiListMapped:a}=(0,L.b)(),{like:o,isDanmuAuthor:s,isAwemeAuthor:u,deleteHandler:d,reportHandler:c,likeHandler:m}=l(t),{danmakuId:v,text:f}=t,[p,h]=(0,i.useState)(null);return(0,i.useEffect)(()=>{a&&h((0,T.vI)({danmakuId:v,text:f,emojiListMapped:a}))},[a,f,v]),(0,n.jsxs)("li",{className:N.default.danmakuLi,children:[(0,n.jsx)("div",{className:N.default.timeLi,children:(0,g.$y)(t.offsetTime)}),(0,n.jsx)("div",{className:N.default.textLi,children:p}),(0,n.jsxs)("div",{className:N.default.interaction,children:[(0,n.jsx)("div",{className:r()(N.default.icon,N.default.likeIcon,{[N.default.isLike]:o}),onClick:m,children:(0,n.jsx)("svg",{className:N.default.iconLike,width:"14",height:"13",viewBox:"0 0 14 13",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M9.88448 0.398438C8.76117 0.398438 7.74021 0.852731 7.11838 1.71269C6.26503 0.852731 5.24305 0.398438 4.12177 0.398438C1.98145 0.398438 0.203125 2.19879 0.203125 4.34121C0.203125 4.48708 0.210222 4.5534 0.203125 4.56025C0.214278 5.05421 0.454581 5.94437 0.647185 6.31825C1.94356 9.04193 6.0401 11.9265 6.23271 12.1134C6.42531 12.3004 6.61792 12.4873 7.00313 12.4873C7.38833 12.4873 7.58094 12.3004 7.77354 12.1134C7.96615 11.9265 11.5463 9.30121 13.1116 6.75067C13.1796 6.57644 13.2242 6.49033 13.3421 6.31259C13.4168 6.12907 13.4919 5.96279 13.5726 5.8745C13.7149 5.3828 13.795 5.01066 13.8031 4.56025C13.797 4.54746 13.8031 4.48609 13.8031 4.34121C13.8031 2.19978 12.0238 0.398438 9.88448 0.398438Z",fillOpacity:"0.8"})})}),!s&&(0,n.jsx)("div",{className:r()(N.default.icon,N.default.report),onClick:c,children:(0,n.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M8.13316 1.23494L13.8226 11.7956C14.3266 12.7751 13.6965 14 12.6888 14H1.3112C0.303482 14 -0.326644 12.7751 0.177387 11.7956L5.86554 1.23494C6.36957 0.25502 7.62913 0.25502 8.13316 1.23494ZM7.00041 12.3C6.30991 12.3 5.75 11.7407 5.75 11.05C5.75 10.3593 6.30991 9.8 7.00041 9.8C7.69009 9.8 8.25 10.3593 8.25 11.05C8.25 11.7407 7.69009 12.3 7.00041 12.3ZM7 4.2C6.44772 4.2 6 4.64772 6 5.2V7.7C6 8.25228 6.44772 8.7 7 8.7C7.55228 8.7 8 8.25228 8 7.7V5.2C8 4.64772 7.55228 4.2 7 4.2Z",fillOpacity:"0.8"})})}),(u||s)&&(0,n.jsx)("div",{className:r()(N.default.icon,N.default.deleteIcon),onClick:d,children:(0,n.jsx)("svg",{width:"12",height:"14",viewBox:"0 0 12 14",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M8.39844 0.199219H3.59844L3.19844 0.999219H1.39844C0.846153 0.999219 0.398438 1.44693 0.398438 1.99922V3.39922H11.5984V1.99922C11.5984 1.44693 11.1507 0.999219 10.5984 0.999219H8.79844L8.39844 0.199219ZM1.19844 4.99922H10.7984L10.4418 12.8446C10.4176 13.3787 9.97749 13.7992 9.44286 13.7992H2.55402C2.01939 13.7992 1.57932 13.3787 1.55505 12.8446L1.19844 4.99922Z"})})})]})]})},B=e=>{let{player:t,loginDispatch:l,isLogin:o,awemeInfo:s,userUid:d,className:c,userInfo:v,targetMountEl:g,onClick:x,abtestData:k,totalCountRef:C}=e,[b,j]=(0,i.useState)(!1),[E,I]=(0,i.useState)([]),{logParams:L}=(0,R.Y)();return(0,n.jsxs)("div",{className:r()(N.default.container,c),children:[(0,n.jsxs)("div",{className:r()(N.default.danmukuList),onClick:()=>{!g&&(document.body.style.overflow="hidden"),m.YY.replaceCurrentTask({id:"danmuList"}),M.Z.sendLog("clickDanmakuList",(0,a._)({enter_from:(0,h.mo)(),enter_from_merge:(0,_.yW)(),group_id:null==s?void 0:s.awemeId,player_display_mode:(0,h.Ok)()},L)),j(!0),setTimeout(()=>{y.emit(y.EVENT.videoStopPlayNext)},100),null==x||x()},children:[(0,n.jsx)("div",{children:"弹幕列表"}),(0,n.jsx)(F.z,{svg:(0,n.jsx)(P.Z,{style:{fontSize:"12px"}})})]}),b&&(0,n.jsx)(O,{awemeId:null==s?void 0:s.awemeId,setIsShowModal:j,useDanmakuItem:e=>{let{awemeId:n}=s,r=null==s?void 0:s.authorInfo.uid,c=(null==e?void 0:e.userId)===d,m=d===(null==s?void 0:s.authorInfo.uid),{danmakuId:g,diggType:x}=e,[k,b]=(0,i.useState)(!!x),P=(0,i.useRef)(!!x),[j,N]=(0,i.useState)(o);(0,i.useEffect)(()=>{P.current=k},[k]),(0,i.useEffect)(()=>{let e=()=>{N(!0)};return t&&t.on(A.Ks.updateLogin,e),()=>{t.off(A.Ks.updateLogin,e)}},[t,n]);let E=(0,i.useCallback)(u()(async()=>{if(j){b(e=>!e),I(e=>{let t=e.findIndex(e=>e.danmakuId===g);return e[t].diggType=e[t].diggType?0:1,[...e]});let{statusCode:e}=await (0,p.ob)({danmakuId:g,awemeId:n,type:P.current?0:1});0===e&&M.Z.sendLog(P.current?"cancelLikeDanmaku":"likeDanmaku",(0,a._)({enter_from:(0,h.mo)(),enter_from_merge:(0,_.yW)(),group_id:n,author_id:r,danmaku_id:g,enter_method:"list"},L))}else(0,S.default)({success:async()=>{l({type:"updateUserInfo"}),t.emit(A.Ks.updateLogin);let{statusCode:e}=await (0,p.ob)({danmakuId:g,awemeId:n,type:1});0===e&&(b(e=>!e),I(e=>{let t=e.findIndex(e=>e.danmakuId===g);return e[t].diggType=e[t].diggType?0:1,[...e]}))},headerText:"登录后可为弹幕点赞",enterMethod:"like_danmaku"})},500),[g,j,n,L]),R=(0,i.useCallback)(()=>{var t,a,n;(0,f.m)({title:"举报弹幕",type:"danmaku",object_id:g,owner_id:null==v?void 0:null===(t=v.info)||void 0===t?void 0:t.uid,owner_sec_id:(null==v?void 0:null===(a=v.info)||void 0===a?void 0:a.secUid)||"",onClose:()=>{y.emit(y.EVENT.videoRemoveStopPlayNext)},logParams:{enter_method:"list"},loginDispatch:l,userInfo:null==v?void 0:v.info,pipeline_id:"",enter_from:(0,_.yW)(),isOrigin:!0}),M.Z.sendLog("reportDanmaku",{enter_from:(0,_.yW)(),group_id:null==s?void 0:s.awemeId,author_id:null==s?void 0:null===(n=s.authorInfo)||void 0===n?void 0:n.uid,danmaku_id:g,danmaku_user_id:null==e?void 0:e.userId,enter_method:"list",is_exposed_like:0})},[g,v,t]),T=(0,i.useCallback)(async()=>{if(null==t?void 0:t.danmaku){var e,l;w.F.info({text:"已删除弹幕",elTarget:(null===(e=document)||void 0===e?void 0:e.fullscreenElement)?null===(l=document)||void 0===l?void 0:l.fullscreenElement:document.body}),I(e=>{let t=e.findIndex(e=>e.danmakuId===g);return e.splice(t,1),[...e]})}let{statusCode:i}=await (0,p.YO)({userType:c?1:2,danmakuId:g});0===i&&(C.current=C.current-1,M.Z.sendLog("deleteDanmaku",(0,a._)({enter_from:(0,h.mo)(),enter_from_merge:(0,_.yW)(),group_id:n,author_id:r,danmaku_id:g,enter_method:"list"},L)))},[g,n,t,r,c,L]);return{like:k,isAwemeAuthor:m,isDanmuAuthor:c,likeHandler:E,reportHandler:R,deleteHandler:T}},targetMountEl:g,danmakuList:E,setDanmakuList:I})]})},O=e=>{let{awemeId:t,targetMountEl:l,setIsShowModal:o,useDanmakuItem:s,danmakuList:u,setDanmakuList:f}=e,[g,P]=(0,i.useState)(!1),[S,w]=(0,i.useState)(!0),L=(0,i.useRef)(!0),T=(0,i.useRef)(0),{logParams:A}=(0,R.Y)(),B=(0,i.useCallback)(async()=>{if(g||!L.current)return;P(!0);let e=3,l=async()=>{e--;let a=await (0,p.JV)({awemeId:t,offset:T.current,count:50}),n=new Promise(e=>{f(t=>{var l;if((null==a?void 0:null===(l=a.danmakuList)||void 0===l?void 0:l.length)>0){let l=[...t,...a.danmakuList];return e(l.length),l}return e(t.length),t})});if(null==a?void 0:a.hasMore)return 0!==e&&(T.current+=50,!!(await n>=50)||await l());return!1};w(await l()),P(!1)},[t,g,S]);(0,i.useEffect)(()=>{L.current=S},[S]),(0,i.useEffect)(()=>()=>{y.emit(y.EVENT.videoRemoveStopPlayNext)},[]);let O=(0,i.useCallback)(async()=>{f([]),await w(!0),T.current=0,await B()},[B]),D=(0,i.useCallback)(e=>{let{target:t}=e;t.scrollHeight,t.scrollTop,t.clientHeight,t.scrollHeight-t.scrollTop<t.clientHeight+200&&B()},[B]);(0,i.useEffect)(()=>y.listen(y.EVENT.hideModal,()=>o(!1)),[]),(0,i.useEffect)(()=>(O(),x.Le.setConfig(x.gI.IsShowDanmakuListModal,!0),(0,k.o)({pauseCustomShortcut:!0,pauseGlobalShortcut:!0,pausePlayControlShortcut:!0},"DanmakuList"),()=>{x.Le.setConfig(x.gI.IsShowDanmakuListModal,!1),(0,k.m)("DanmakuList")}),[]);let V=(0,v.x)((()=>{M.Z.sendLog("danmakuListShow",(0,a._)({enter_from:(0,h.mo)(),enter_from_merge:(0,_.yW)(),group_id:t},A))}).bind(null));return(0,n.jsxs)(d.Modal,{ref:e=>{e&&(e.onwheel=e=>e.preventDefault())},modalContentClass:r()(N.default.modal,{[N.default.mountEl]:!!l}),bodyStyle:{height:"100%"},afterClose:()=>{document.body.style.overflow="",y.emit(y.EVENT.videoRemoveStopPlayNext),o(!1),m.YY.finishTask("danmuList")},getPopupContainer:(0,C.r)()?()=>(0,b.W)()||l:void 0,visible:!0,hasCancel:!1,footer:null,closeOnEsc:!1,centered:!0,closable:!1,zIndex:9999,children:[(0,n.jsxs)("div",{className:N.default.header,ref:V,children:[(0,n.jsx)("div",{children:"弹幕列表"}),(0,n.jsx)(F.z,{svg:(0,n.jsx)(j.Z,{style:{fontSize:"37px",marginRight:"-11px",opacity:"0.8"}}),onClick:()=>{document.body.style.overflow="",y.emit(y.EVENT.videoRemoveStopPlayNext),o(!1),m.YY.finishTask("danmuList")}})]}),(0,n.jsx)(c.i,{className:N.default.divider}),(0,n.jsxs)("div",{className:N.default.content,children:[(0,n.jsxs)("div",{className:N.default.danmakuHeader,children:[(0,n.jsx)("div",{className:N.default.time,children:"时间"}),(0,n.jsx)("div",{className:N.default.text,children:"弹幕内容"})]}),(null==u?void 0:u.length)>0&&(0,n.jsxs)("ul",{ref:e=>{e&&(e.onwheel=e=>e.stopPropagation())},className:N.default.danmakuList,onScroll:D,onWheel:e=>e.stopPropagation(),children:[u.map(e=>(0,n.jsx)(U,{danmaku:e,useDanmakuItem:s},e.danmakuId)),g&&(0,n.jsx)(E.gb,{className:r()(N.default.defaultLoading),text:"加载中"}),!S&&(0,n.jsx)("li",{className:N.default.noMore,children:"暂时没有更多了"})]}),(null==u?void 0:u.length)<=0&&g&&(0,n.jsx)(E.gb,{className:r()(N.default.centerLoading),text:"加载中"}),(null==u?void 0:u.length)<=0&&!g&&(0,n.jsx)(I.gi,{className:N.default.error,title:"",desc:"暂时没有更多了"})]})]})}},394913:function(e,t,l){l.d(t,{AY:function(){return h},IK:function(){return n},JO:function(){return d},Ks:function(){return m},Kt:function(){return s},NY:function(){return f},Rz:function(){return u},SW:function(){return a},Te:function(){return p},WK:function(){return v},lE:function(){return g},sZ:function(){return c},th:function(){return r},tj:function(){return i},uR:function(){return o}});let a=32,n="scroll",i=0,o=.5,r=12e3,s=20,u=40,d=1,c=5e3,m={updateLogin:"updateLogin",bulletHover:"bullet_hover",ratechange:"ratechange",clearCache:"clearCache",reportIdChange:"reportIdChange",danmakuInit:"danmakuInit",danmakuInputFocus:"danmakuInputFocus"},v=[{desc:"一行",value:.1,key:1,log:.1},{desc:"两行",value:.2,key:5,log:.2},{desc:"25%",value:.25,key:2,log:.4},{desc:"50%",value:.5,key:3,log:.5},{desc:"80%",value:.8,key:4,log:.8}],f=[{desc:"超小",value:16,key:5,log:-1},{desc:"小号",value:20,key:1,log:0},{desc:"适中",value:24,key:2,log:1},{desc:"大号",value:28,key:3,log:2},{desc:"超大",value:32,key:4,log:3}],p=[{desc:"超小",value:16,key:5,log:-1},{desc:"小号",value:16,key:1,log:0},{desc:"适中",value:20,key:2,log:1},{desc:"大号",value:24,key:3,log:2},{desc:"超大",value:28,key:4,log:3}],g=[{desc:"超小",value:20,key:5,log:-1},{desc:"小号",value:24,key:1,log:0},{desc:"适中",value:28,key:2,log:1},{desc:"大号",value:32,key:3,log:2},{desc:"超大",value:32,key:4,log:3}],h=[{desc:"较慢",value:18e3,key:1,log:0},{desc:"适中",value:14400,key:2,log:1},{desc:"较快",value:10800,key:3,log:2}]},108336:function(e,t,l){l.d(t,{G:function(){return n},Y:function(){return i}});var a=l(88648);let n=(0,a.createContext)({logParams:{}}),i=()=>(0,a.useContext)(n)},5507:function(e,t,l){l.d(t,{b:function(){return s}}),l(874386);var a=l(88648),n=l(789145);let i=(0,n.kv)(),o=e=>Object.values(e).filter(e=>(null==e?void 0:e.hide)!==1),r=o(i),s=()=>{let[e,t]=(0,a.useState)(r);(0,a.useEffect)(()=>{let e=!1;return(async()=>{let l;let{statusCode:a,data:i=[]}=await (0,n.zk)();0===a?(l=o(i),!e&&t(l)):l=r})(),()=>{e=!0}},[]);let l=(0,a.useMemo)(()=>{let t=new Map;return null==e||e.forEach(e=>{t.set(e.name,e.img)}),t},[e]);return{emojiList:e,emojiListMapped:l}}},185339:function(e,t,l){var a=l(544933);t.Z=new a.h({hover_danmaku_switch:{eventName:"hover_danmaku_switch",params:{enter_from:"",group_id:"",player_display_mode:""}},hover_danmaku_setting:{eventName:"hover_danmaku_setting",params:{enter_from:"",group_id:"",player_display_mode:""}},hover_emoji_tab:{eventName:"hover_emoji_tab",params:{enter_from:"",group_id:"",player_display_mode:""}},hover_danmaku_input:{eventName:"hover_danmaku_input",params:{enter_from:""}},danmakuPubShow:{eventName:"danmaku_pub_show",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_switch_status:0,is_post:0}},inputDanmaku:{eventName:"input_danmaku",params:{enter_from:"",enter_from_merge:""}},emojiTabShow:{eventName:"emoji_tab_show",params:{enter_from:"",enter_method:"",enter_from_merge:""}},clickEmoji:{eventName:"click_emoji",params:{enter_from:"",enter_method:"",click_method:"",enter_from_merge:""}},danmakuPubDone:{eventName:"danmaku_pub_done",params:{enter_from:"",click_method:"",group_id:"",author_id:"",danmaku_id:"",video_time:0,video_pct:0,danmaku_pub_duration:0,danmaku_input_duration:0,is_author:0,emoji_id:"",video_scale:0,item_duration_ms:0,enter_from_merge:""}},firstDanmakuShow:{eventName:"first_danmaku_show",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",video_time:0,video_pct:0,video_scale:0,item_duration_ms:0,enter_from_merge:"",danmaku_readdata_times:-1,danmaku_attach_times:-1,danmaku_startmove_times:-1}},danmakuPlayResult:{eventName:"danmaku_play_result",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_count:0,danmaku_pub_count:0,danmaku_play_count:0,speed_value:0,area_value:0,size_value:0,opacity_value:0,speed_video:0,play_time:0,browser_height:0,browser_width:0,browser_ratio:0,rate:0,video_scale:0,item_duration_ms:0}},danmakuSwitch:{eventName:"danmaku_switch",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",action:"",click_method:"",video_scale:0,item_duration_ms:0,danmaku_switch_status:"",off_range:""}},enterDanmakuSetting:{eventName:"enter_danmaku_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",player_display_mode:""}},danmakuOpacitySetting:{eventName:"danmaku_opacity_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",opacity_value:80,pre_value:80,player_display_mode:""}},danmakuSizeSetting:{eventName:"danmaku_size_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",size_value:1,pre_value:1,browser_height:0,browser_width:0,browser_ratio:0,rate:0,player_display_mode:""}},danmakuSpeedSetting:{eventName:"danmaku_speed_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",speed_value:1,pre_value:1,player_display_mode:""}},danmakuAreaSetting:{eventName:"danmaku_area_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",area_value:.25,pre_value:.25,browser_height:0,browser_width:0,browser_ratio:0,rate:0,player_display_mode:""}},clickDanmakuDefaultSetting:{eventName:"click_danmaku_default_setting",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",pre_speed_value:1,pre_area_value:.25,pre_size_value:1,pre_opacity_value:80,player_display_mode:""}},pickDanmaku:{eventName:"pick_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:""}},likeDanmaku:{eventName:"like_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},cancelLikeDanmaku:{eventName:"cancel_like_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},deleteDanmaku:{eventName:"delete_danmaku",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},clickDanmakuList:{eventName:"click_danmaku_list",params:{enter_from:"",enter_from_merge:"",group_id:"",player_display_mode:""}},danmakuListShow:{eventName:"danmaku_list_show",params:{enter_from:"",enter_from_merge:"",group_id:""}},reportDanmaku:{eventName:"report_danmaku",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",danmaku_user_id:"",enter_method:"",is_exposed_like:0}},danmakuImpression:{eventName:"danmaku_impression",params:{enter_from:"",enter_from_merge:"",group_id:"",danmaku_id_list:"",video_time_list:""}},danmakuSettingStatus:{eventName:"danmaku_setting_status",params:{danmaku_switch_status:"",danmaku_switch_source:"",speed_value:0,area_value:0,size_value:0,opacity_value:0,enter_from:"",enter_from_merge:""}},danmakuRequest:{eventName:"danmaku_request",params:{enter_from:"",group_id:"",start_time:0,end_time:0}},danmakuResponse:{eventName:"danmaku_response",params:{enter_from:"",group_id:"",start_time:0,end_time:0,status_code:-1,http_code:-1,danmaku_count:-1,danmaku_main_status:-1}},danmakuSendClick:{eventName:"danmaku_send_click",params:{enter_from:"",group_id:"",content:""}},danmakuInputContent:{eventName:"danmaku_input_content",params:{enter_from:"",group_id:"",content:""}},closeAllDanmakuGuideTagShow:{eventName:"close_all_danmaku_guide_tag_show",params:{enter_from:"",group_id:"",author_id:""}},closeAllDanmakuSwitch:{eventName:"close_all_danmaku_switch",params:{enter_from:"",group_id:"",author_id:""}}})},461423:function(e,t,l){l.d(t,{R:function(){return s},UW:function(){return r},vI:function(){return o}}),l(268917);var a=l(563097);l(88648);var n=l(555106),i=l(35730);let o=e=>{let{text:t,emojiListMapped:l,danmakuId:n}=e;if(!l)return t;let i=[],o=-1,r=0,s=0;for(let e=0;e<t.length;e++)if("]"===t[e]&&"["===t[o]){let u=t.substring(o,e+1);l.has(u)&&(o-r>0&&(s+=1,i.push((0,a.jsx)("span",{children:t.substring(r,o)},`${n}_${s}`))),s+=1,i.push((0,a.jsx)("img",{src:l.get(u)},`img_${n}_${s}`)),r=e+1)}else"["===t[e]&&(o=e);return r<t.length&&(s+=1,i.push((0,a.jsx)("span",{children:t.substring(r)},`${n}_${s}`))),(0,a.jsx)(a.Fragment,{children:i})},r=e=>null==e?void 0:e.stopPropagation(),s=()=>!(0,n.$o)(i.LocalStorageKeys.danmakuDisableOnceClose)},522376:function(e,t,l){l.r(t),l.d(t,{SELECT_LIST_MAP:function(){return M},SELECT_LIST:function(){return T},PlayBackSetting:function(){return O},PlayBackSettingInner:function(){return B}});var a=l("134761"),n=l("520739");l("874386"),l("777180");var i=l("563097"),o=l("489478"),r=l("734123"),s=l("88648"),u=l("713097"),d=l.n(u),c=l("358003"),m=l("205457");l("608956");var v=l("491362"),f=l("35730"),p=l("147613"),g=l("637005"),h=l("362501"),_=l("658065"),y=l("782442"),x=l("820303"),k=l("696332"),C=l("32167"),b=l("544933"),P=new b.h({clickVideoSpeed:{eventName:"click_video_speed",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",speed:"",item_duration_ms:0,is_small_window:"",player_display_mode:""}},clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),j=l("860684"),N=l("288679"),S=l("894416"),w=l("597321"),E=l("679126"),I=l("252376"),L=l("764942"),R=l("226355");let T=["0.75","1.0","1.25","1.5","2.0"],M={[v.$.Normal]:["0.75","1.0","1.25","1.5","1.75","2.0","3.0"],[v.$.Safari]:["0.75","1.0","1.25","1.5","1.75","2.0"]},A=!1;function F(e){let{playbackRate:t,xgCase:l,hasSelect:a,disable:n,player:u,loginBlock:m,loginDispatch:p,isActive:C,showTip:b=!1,speedType:j=v.$.Normal,abtest:N,playBackRatioChanged:S}=e,E=(0,I.H)("speed"),[L,R]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{let{rate:t,click_method:a}=e;l.onPlayratioClick({rate:t,click_method:a}),u.emit(r.Events.USER_ACTION,{action:"speed_change",pluginName:"PlayBackSettingPlugin",rate:t})};if(u)return null==u||u.on(w.B.UpdateRadio,e),()=>{null==u||u.off(w.B.UpdateRadio,e)}},[u,l]);let T=(0,s.useCallback)(e=>{var t,l,a;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),g.emit(g.EVENT.videoStopPlayNext),((0,h.QD)()||document.querySelector(".isMiniWindow"))&&g.emit(g.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"control_speed_block"}),P.sendLog("clickHoverLogin",{enter_method:"speed_up",enter_from:(0,_.yW)(),params_for_special:"uc_login"}),(0,c.default)({headerText:"登录后即可切换倍速",success:async()=>{null==p||p({type:"updateUserInfo"}),g.emit(g.EVENT.videoRemoveStopPlayNext),y.Le.setConfig(y.gI.disableSpeed,!1),R(!1),(null==e?void 0:e.callback)?null==e||e.callback():A=!0},next:`https://${null===(a=window)||void 0===a?void 0:null===(l=a.location)||void 0===l?void 0:l.host}`,enterMethod:"speed_up",onClose:()=>{g.emit(g.EVENT.videoRemoveStopPlayNext)}})},[m,p,N]);return((0,s.useEffect)(()=>{b&&(A=!1,o.Util.addClass(l.root,"login-slide-show"),setTimeout(()=>{o.Util.removeClass(l.root,"login-slide-show")},3e3))},[b]),(0,s.useEffect)(()=>{if(u&&C){let e=g.listen(g.EVENT.loginBlockKeyBoard,e=>{let{speed:t,callback:l}=e;t&&u.isUserActive&&T({callback:l})});return()=>e()}},[T,u,C]),(0,s.useEffect)(()=>{u&&C&&(m?(R(!0),y.Le.setConfig(y.gI.disableSpeed,!0)):(R(!1),y.Le.setConfig(y.gI.disableSpeed,!1)))},[m,u,C]),(0,s.useEffect)(()=>{if(u&&C){let e=()=>{let e=u.playbackRate;e>3&&(e=1,u.playbackRate=e,(0,x.t_)(f.SessionStorageKeys.PlayerPlaybackratio,e))};return u.on(r.Events.RATE_CHANGE,e),()=>{u.off(r.Events.RATE_CHANGE,e)}}},[u,C]),(0,s.useEffect)(()=>{u&&C&&void 0===M[j].find(e=>Number(e)===Number(t))&&(u.playbackRate=1)},[t,j,u,C]),n)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"xgplayer-setting-playbackRatio disabled",children:"倍速"}),(0,i.jsx)("div",{className:"xgTips",children:"广告视频不支持倍速功能"})]}):L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{onClick:T,className:"xgplayer-setting-playbackRatio",children:k.a.t("double_speed",{},"倍速")}),(0,i.jsx)("div",{className:d()("xgTips",{showTip:!0}),children:(0,i.jsxs)("div",{className:d()("blockLoginText"),children:["登录后即可切换倍速",(0,i.jsx)("span",{className:"blockLoginBtn",onClick:T,children:"立即登录"})]})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:E,className:"xgplayer-setting-playbackRatio",children:l.getIconText(t,a,j,S)}),(0,i.jsx)("div",{className:"xgplayer-slider xgplayer-box-douyin ",children:(0,i.jsx)("div",{className:"xgplayer-setting-content",children:(0,i.jsx)("div",{className:"xgplayer-playratio-wrap",children:M[j].map(e=>(0,i.jsxs)("div",{"data-id":e,className:d()({select:Number(t)===Number(e)},"xgplayer-playratio-item"),onClick:()=>{l.onPlayratioClick({rate:e}),u.emit(r.Events.USER_ACTION,{action:"speed_change",pluginName:"PlayBackSettingPlugin",rate:e})},children:[e,"x"]},e))})})})]})}class U extends r.Plugin{static get pluginName(){return"PlayBackSettingPlugin"}static get defaultConfig(){return{position:o.POSITIONS.CONTROLS_RIGHT,index:6.5,className:"xgplayer-playback-setting"}}afterCreate(){if(this.config.disable){this.onPlayRatioChange(1),this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave);return}this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.player.on("updatePlayBackRatio",this.updatePlayBackRatio),this.updatePlayBackRatio()}onPlayratioClick(e){var t,l;let{rate:a,click_method:n,notStorage:i}=e;if(Number(a)===Number(this.player.playbackRate))return!1;null===(t=(l=this.config).onRatioClick)||void 0===t||t.call(l,{rate:a,click_method:n,notStorage:i}),this.onPlayRatioChange(a),g.emit(g.EVENT.playbackRateClick)}onPlayRatioChange(e){this.player&&(this.player.config.defaultPlaybackRate=Number(e),this.player.playbackRate=Number(e)),this.config.playBackRatio=Number(e),this.renderRoot(),o.Util.removeClass(this.root,"slide-show")}getIconText(e,t,l,a){let n=M[l].find(t=>Number(t)===Number(e));return a?`${n}x`:t&&void 0!==n?`${n}x`:k.a.t("double_speed",{},"倍速")}destroy(){this.player.playbackRate=1,this.player.config.defaultPlaybackRate=1,this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.player.off("updatePlayBackRatio",this.updatePlayBackRatio),(0,E.v)(this)}updateConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,n._)({},this.config,e),this.renderRoot()}renderRoot(){var e;let t=this.config.playBackRatio||1,{disable:l,loginBlock:a,loginDispatch:n,isActive:o,speedType:r,abtest:s}=this.config,{playerPermanentlyShowInfo:u}=(null===(e=this.player)||void 0===e?void 0:e.config)||{};if(this.root){let e=(0,i.jsx)(F,{hasSelect:null!==(0,x.G)(f.SessionStorageKeys.PlayerPlaybackratio),playBackRatioChanged:this.config.playBackRatioChanged,playbackRate:t,playerPermanentlyShowInfo:u,onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave,xgCase:this,disable:l,player:this.player,loginBlock:a,loginDispatch:n,isActive:o,showTip:A,speedType:r,abtest:s});(0,E.s)(this,e)}}render(){return`
    <xg-icon class="xgplayer-playback-setting" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,a._)(this,"timeoutId",void 0),(0,a._)(this,"updatePlayBackRatio",e=>{var t;if(this.config.disable){this.onPlayRatioChange(1);return}let l=e||(0,x.G)(f.SessionStorageKeys.PlayerPlaybackratio)||1;e&&(0,x.t_)(f.SessionStorageKeys.PlayerPlaybackratio,Number(l)),null===this||void 0===this||null===(t=this.onPlayRatioChange)||void 0===t||t.call(this,l)}),(0,a._)(this,"onLongPressCallback",(e,t)=>{Number(e)!==Number(this.player.playbackRate)&&(this.config.playBackRatioChanged=e,this.onPlayRatioChange(e),!t&&(0,x.t_)(f.SessionStorageKeys.PlayerPlaybackratio,Number(e)))}),(0,a._)(this,"onMouseleave",()=>{if(!this.config.disable)o.Util.removeClass(this.root,"slide-show"),this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,a._)(this,"onMouseenter",()=>{if(!this.config.disable)this.emit("icon_mouseenter",{pluginName:this.pluginName}),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),o.Util.addClass(this.root,"slide-show"),this.player.emit("playRatioPanelShow",this.player.playbackRate)})}}let B=e=>{let{awemeInfo:t,logParams:l,isActive:a,disable:i,loginBlock:o,loginDispatch:r,speedType:u,abtest:d}=e,c=(0,j.n)(),m=(0,s.useRef)(null);m.current=(0,s.useCallback)(e=>{var a,i;let{rate:o,click_method:r,notStorage:s}=e;"longPress"!==r&&P.sendLog("clickVideoSpeed",(0,n._)({urlParamList:["previous_page"],author_id:null==t?void 0:null===(a=t.authorInfo)||void 0===a?void 0:a.uid,group_id:null==t?void 0:t.awemeId,log_pb:null==t?void 0:t.logPb,item_duration_ms:(null==t?void 0:null===(i=t.video)||void 0===i?void 0:i.duration)||0,enter_from:(0,_.yW)(),speed:Number(o).toFixed(2),is_small_window:(0,L.f)()?"1":"0",small_window_scene:(0,L.f)()?R.h.getState().smallWindowScene:"",click_method:r,player_display_mode:(0,C.Ok)()},l)),!s&&(0,x.t_)(f.SessionStorageKeys.PlayerPlaybackratio,Number(o))},[l,t]),(0,p.o)(()=>{if(c&&(null==t?void 0:t.awemeType)!==68&&!(null==d?void 0:d.innerSlideSmooth))return 2===c.config.reuse&&c.getPlugin("PlayBackSettingPlugin")?()=>{}:(c.registerPlugin(U,{abtest:d,onRatioClick:function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];m.current(...t)},disable:i,loginBlock:o,loginDispatch:r,isActive:a,speedType:u}),()=>{c.getPlugin("PlayBackSettingPlugin")&&2!==c.config.reuse&&c.unRegisterPlugin("PlayBackSettingPlugin",!0)})},[c,t,i,d,r]);let v=(0,s.useMemo)(()=>(null==t?void 0:t.awemeType)===68,[t]);return(0,p.o)(()=>{if(c&&!v&&(null==d?void 0:d.innerSlideSmooth))return 2===c.config.reuse&&c.getPlugin("PlayBackSettingPlugin")?()=>{}:(c.registerPlugin(U,{abtest:d,onRatioClick:function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];m.current(...t)},disable:i,loginBlock:o,loginDispatch:r,isActive:a,speedType:u}),()=>{c.getPlugin("PlayBackSettingPlugin")&&2!==c.config.reuse&&c.unRegisterPlugin("PlayBackSettingPlugin",!0)})},[c,v]),(0,p.o)(()=>{c&&2===c.config.reuse&&(null==t?void 0:t.awemeType)===68&&c.getPlugin("PlayBackSettingPlugin")&&c.unRegisterPlugin("PlayBackSettingPlugin",!0)},[c,t,d]),(0,p.o)(()=>{let e=null==c?void 0:c.getPlugin("PlayBackSettingPlugin");e&&(e.updateConfig({isActive:a,disable:i,loginBlock:o,loginDispatch:r,abtest:d}),e.updatePlayBackRatio())},[c,a,i,d,o,r,t]),(0,s.useEffect)(()=>{if(c&&a){let e=c.getPlugin("PlayBackSettingPlugin");e&&!i&&!o&&(null==e||e.updatePlayBackRatio());let t=g.listen(g.EVENT.syncInteraction,()=>{e&&(null==e||e.updatePlayBackRatio())});return()=>{t()}}},[a,c,i,o]),(0,s.useEffect)(()=>{if(c){let e=c.getPlugin("PlayBackSettingPlugin");e&&!i&&!o&&(null==e||e.updatePlayBackRatio());let t=g.listen(g.EVENT.playbackRateClick,()=>{e&&(null==e||e.updatePlayBackRatio())});return()=>{t()}}},[c,i,o]),(0,N.u)(c,w.B.ChangePlayRate,e=>{let{rate:t,notStorage:l,click_method:n}=e;if(c&&a){let e=c.getPlugin("PlayBackSettingPlugin");e&&(null==e||e.onLongPressCallback(t,l))}}),null},O=e=>{let t=(0,S.N)();return(0,i.jsx)(m.k,{componentName:"PlayBackSetting",Slardar:t,children:(0,i.jsx)(B,(0,n._)({},e))})}},967171:function(e,t,l){l.d(t,{FW:function(){return b},JV:function(){return k},N6:function(){return x},RB:function(){return y},Ri:function(){return _},YO:function(){return P},ob:function(){return C}});var a=l(520739),n=l(878389);l(779788),l(675373);var i=l(496349),o=l(349135),r=l(231755),s=l(871212),u=l(32167),d=l(658065);let{COMMON_SEARCH_PARAMS:c}=i||{};function m(e){let{conf_list:t,status_code:l,log_pb:a}=e;return{statusCode:l,confList:null==t?void 0:t.map(e=>{let{speed:t,region:l,switch:a,conf_end_type:n,opacity:i,font_size:o,from_default:r}=e||{};return{speed:t-1,region:l,isOpen:a,confEndType:n,opacity:i,fontSize:o,fromDefault:r}}),logPb:a&&JSON.stringify(a)}}function v(e){let{danmaku_list:t,status_code:l,log_pb:a,total:n,http_code:i}=e;return{statusCode:l,danmakuList:null==t?void 0:t.map(e=>({text:e.text,status:e.status,danmakuId:e.danmaku_id,itemId:e.item_id,userId:e.user_id,offsetTime:e.offset_time,diggType:e.digg_type,score:null==e?void 0:e.score})),total:n,logPb:a&&JSON.stringify(a),httpCode:i}}function f(e){let{danmaku_list:t,status_code:l,log_pb:a,total:n,has_more:i}=e;return{statusCode:l,danmakuList:null==t?void 0:t.map(e=>({text:e.text,status:e.status,danmakuId:e.danmaku_id,itemId:e.item_id,userId:e.user_id,offsetTime:e.offset_time,diggType:e.digg_type})),hasMore:i,logPb:a&&JSON.stringify(a)}}function p(e){let{danmaku_id:t,status_code:l,log_pb:a,isVerifyPassportError:n}=e;return{statusCode:l,danmakuId:t,logPb:a&&JSON.stringify(a),isVerifyPassportError:n}}function g(e){let{status_code:t,log_pb:l}=e;return{statusCode:null!=t?t:-1,logPb:l&&JSON.stringify(l)}}function h(e){let{status_code:t,log_pb:l}=e;return{statusCode:null!=t?t:-1,logPb:l&&JSON.stringify(l)}}async function _(e){let{ctx:t,hardware_concurrency:l}=e,i=await (0,r.U2)("/aweme/v1/web/danmaku/conf/get/",(0,n._)((0,a._)({},c),{conf_end_type:4,hardware_concurrency:l}),t?{timeout:1e3}:{},void 0,t);return(0,o.RL)(i,m)}async function y(e){let{opacity:t,fontSize:l,speed:i,region:o,isOpen:s}=e,u=await (0,r.v_)("/aweme/v1/web/danmaku/conf/set/",(0,a._)((0,n._)((0,a._)({},c),{conf_end_type:4,opacity:t,font_size:l,speed:i+1,region:o}),null!=s?{switch:s}:{}));return{statusCode:null==u?void 0:u.status_code}}async function x(e){let{awemeId:t="",startTime:l=0,endTime:i=0,authenticationToken:u="",duration:d=0,hasTotal:m,total:f}=e||{},p=await (0,r.U2)("/aweme/v1/web/danmaku/get_v2/",(0,n._)((0,a._)({},c),{app_name:s.APPNAME,format:"json",group_id:t,item_id:t,start_time:l,end_time:i,authentication_token:u,duration:d,has_total:m,total:f}));return(0,o.RL)(p,v)}async function k(e){let{awemeId:t="",offset:l=0,count:i=0}=e,u=await (0,r.U2)("/aweme/v1/web/danmaku/list/",(0,n._)((0,a._)({},c),{app_name:s.APPNAME,format:"json",group_id:t,item_id:t,offset:l,count:i}));return(0,o.RL)(u,f)}async function C(e){let{danmakuId:t="",awemeId:l="",type:i=0}=e,s=await (0,r.U2)("/aweme/v1/web/danmaku/digg/",(0,n._)((0,a._)({},c),{danmaku_id:t,aweme_id:l,action_type:i,enter_from:(0,u.vM)(),previous_page:(0,d.yW)()}));return(0,o.RL)(s,g)}async function b(e){let{item_id:t="",offset_time:l=0,text:i="",user_id:s=""}=e,m=await (0,r.v_)("/aweme/v1/web/danmaku/post_v2/",(0,n._)((0,a._)({},c),{item_id:t,offset_time:l,text:i,user_id:s,enter_from:(0,u.vM)(),previous_page:(0,d.yW)()}));return(0,o.RL)(m,p)}async function P(e){let{userType:t,danmakuId:l=""}=e,i=await (0,r.v_)("/aweme/v1/web/danmaku/delete_v2/",(0,n._)((0,a._)({},c),{app_name:s.APPNAME,format:"json",user_type:t,danmaku_id:l}));return(0,o.RL)(i,h)}},47914:function(e,t,l){var a=l(520739),n=l(878389),i=l(563097),o=l(88648);let r=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,n._)((0,a._)({width:4,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M0 0a8 8 0 0 0 2.168 5.476l1.174 1.25a2 2 0 0 1 0 2.738l-1.174 1.25A8 8 0 0 0 0 16.19V0z",fill:"#323442"})})));t.Z=r},661540:function(e,t,l){var a=l(520739),n=l(878389),i=l(563097),o=l(88648);let r=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,n._)((0,a._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M16.292 9.364a1.929 1.929 0 1 0-2.727 2.727l5.637 5.637-5.637 5.637a1.928 1.928 0 1 0 2.727 2.727l6.985-6.985.016-.015a1.929 1.929 0 0 0 0-2.728l-7-7z",fill:"#0A0C20"})})));t.Z=r}}]);