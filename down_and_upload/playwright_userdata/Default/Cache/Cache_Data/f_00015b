"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["65278"],{984439:function(e,o,i){i.d(o,{Z:function(){return S}});var t=i("520739"),l=i("368200");i("874386"),i("675373");var n=i("563097"),a=i("88648"),r=i("713097"),d=i.n(r),u=i("222406"),s=i("746864"),c=i("900451"),v=i("493591"),m=i("637005"),f=i("658065"),h=i("63976"),p=i("900674"),_=i("273329"),g=i("612075"),w="xfGgWHCd",C="_k0K6plB",y=i("770673"),I=i("327306"),x=i("402971");let{Context:b}=g;var S=(0,a.memo)(function(e){var o,i;let{awemeId:r,awemeInfo:g,defaultComment:b,awemelogPb:S,scrollContainerEl:k,fullScreenTarget:N,isFullScreen:T,isCommentShow:L,onCloseCommentClick:j,isSpider:E,reportExtraParams:M,forceLoginCover:R=!1}=e,D=(0,I._)()||{},{userInfo:P,dispatch:A}=(0,x.useUserInfoContext)()||{},{player:U,keywordList:F,renderTextWithTag:V}=(0,a.useContext)(p.v)||{},[H,W]=(0,a.useState)(r),B=(0,a.useRef)(null),{awemeType:O}=g,Z=(0,a.useCallback)((e,o,i,t,l,n)=>(0,h.iq)({awemeId:r,cursor:e,count:o,fetchType:i,whaleCutToken:n,itemType:(0,v.I)(O)}),[r,O]),$=(0,a.useCallback)((e,o,i,t)=>(0,h.rs)({awemeId:r,commentId:e,cursor:o,count:i,whaleCutToken:t,itemType:(null==g?void 0:g.awemeType)===s.e.XgVideo?1:0}),[r,g]),z=(0,a.useCallback)(function(){let{cursor:e=0,count:o,needPage:i=!0,ctx:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,h.Yp)({cursor:e,count:o,needPage:i,ctx:t,groupId:g.awemeId})},[g.awemeId]),G=(0,a.useCallback)(function(){let{cid:e,diggType:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,h.y6)({awemeId:r,cid:e,diggType:o})},[r]),q=(0,a.useCallback)(function(){let{cid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,h.YF)({cid:e})},[]),J=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o,i,{text:n,textExtra:a,replyId:d,replyToReplyId:u,commentSendCelltime:s,commentVideoCelltime:c}=e,v=(0,l._)(e,["text","textExtra","replyId","replyToReplyId","commentSendCelltime","commentVideoCelltime"]);let p=await (0,h.uo)((0,t._)({awemeId:r,text:n,textExtra:a,replyId:d,replyToReplyId:u,commentSendCelltime:s,commentVideoCelltime:c},v));return!p.statusCode&&(m.emit(m.EVENT.showClientDownloadGuide,{isShow:!0,type:"comment",text:"及时接收互动消息通知"}),y.Z.sendLog("post_comment_finish",{enter_from:(0,f.yW)(),group_id:null==g?void 0:g.awemeId,comment_panel_position:"bar",comment_id:(null==p?void 0:null===(o=p.comment)||void 0===o?void 0:o.cid)||"",comment_category:(null==p?void 0:null===(i=p.comment)||void 0===i?void 0:i.replyId)==="0"?"original":"reply"})),p},[r]),Q=(0,a.useMemo)(()=>T||"video_detail"!==(0,f.yW)()?20:5,[T]);if((0,a.useEffect)(()=>{W(r)},[r]),!r||H!==r)return null;let X=(null==b?void 0:b.statusCode)===0;return(0,n.jsx)(u.SV,{Slardar:_.oe,children:(0,n.jsx)("div",{className:d()(w,{[C]:T}),children:(0,n.jsx)(c.Z,{ref:B,isDetailPage:!0,isDetail:!T,isSpider:E,isShowComment:L,shortcutMode:null==D?void 0:D.shortcutMode,awemelogPb:S,defaultCommentList:(null==b?void 0:b.comments)||[],defaultCursor:(null==b?void 0:b.cursor)||0,defaultWhaleCutToken:null==b?void 0:null===(o=b.whaleInfo)||void 0===o?void 0:o.whaleCutToken,defaultWhaleDecisionCustom:null==b?void 0:null===(i=b.whaleInfo)||void 0===i?void 0:i.whaleDecisionCustom,defaultHotsoonHasMoreRef:X?null==b?void 0:b.hotsoonHasMore:0,defaultHasMore:!X||(null==b?void 0:b.hasMore),defaultStatusCode:0,onCloseCommentClick:j,fetchComment:Z,fetchReply:$,fetchEmoticonGif:h.D2,fetchCommentMetionList:z,diggCommentItem:G,deleteCommentItem:q,puhlishCommentItem:J,awemeInfo:g,userInfo:P,scrollContainerEl:k,fullScreenTarget:N,count:Q,player:U,isNeedCommentInput:!0,reportExtraParams:M,changeLoginStatus:()=>null==A?void 0:A({type:"updateUserInfo"}),dispatch:A,enableDomId:!1,abtestData:D,keywordList:F,renderTextWithTag:V,forceLoginCover:R})})})})},430048:function(e,o,i){i.d(o,{o:function(){return u}}),i(897860);var t=i(88648),l=i(734123),n=i(77726),a=i(317914),r=i(702726),d=i(860684);let u=()=>{let e=(0,d.n)();return(0,t.useEffect)(()=>{if(e){let o=()=>{var e;if((null===(e=(0,n.bE)(a.w3.moment.detail_play_time))||void 0===e?void 0:e.length)===0){(0,n.B1)({tag:a.w3.moment.detail_play_time});let e=parseInt((0,n.J1)(a.w3.moment.detail_play_time,"startTime"),10);r.logInstance.sendLog("webPerfTiming",{[a.w3.moment.detail_play_time]:e})}};return e.on(l.Events.AUTOPLAY_STARTED,o),()=>{e.off(l.Events.AUTOPLAY_STARTED,o)}}},[e]),null}},465779:function(e,o,i){i.d(o,{f:function(){return a}});var t=i(88648),l=i(637005),n=i(860684);let a=e=>{let{onCssFullScreen:o}=e,i=(0,n.n)();return(0,t.useEffect)(()=>{if(o){let e=l.listen(l.EVENT.pageFullScreen,e=>{if(null==i?void 0:i.isUserActive){let{fullScreen:i}=e;o(e=>null!=i?i:!e)}});return()=>{e()}}},[o,i]),null}},595456:function(e,o,i){i.d(o,{O:function(){return a}});var t=i(88648),l=i(860684),n=i(734123);let a=e=>{let o=(0,l.n)(),{onFullScreen:i}=e;return(0,t.useEffect)(()=>{if(o&&i)return o.on(n.Events.FULLSCREEN_CHANGE,i),()=>{o.off(n.Events.FULLSCREEN_CHANGE,i)}},[o,i]),null}},864545:function(e,o,i){i.d(o,{c:function(){return w}});var t=i("520739"),l=i("878389"),n=i("563097"),a=i("88648"),r=i("645260"),d=i.n(r),u=i("613063"),s=i.n(u),c=i("713097"),v=i.n(c),m=i("765027"),f=i("860684"),h=i("288386"),p=i("506467"),_=i("782442"),g={playSwitchContainer:"oFAnLFta",isWebSwitch:"HO9W4Jjl"};let w=e=>{let{playSwitchParams:o,isClientMiniWin:i=!1,isWebMiniWin:r}=e,u=(0,f.n)();return(0,a.useEffect)(()=>{if(u){let e={up:{keyCode:p.bf.ArrowUp.keyCode,action:()=>{if(!_.Le.getConfig(_.gI.DisableNextPre)){var e;null===(e=o.playPrevFunc)||void 0===e||e.call(o)}},disable:!1,noBodyTarget:!1},down:{keyCode:p.bf.ArrowDown.keyCode,action:()=>{if(!_.Le.getConfig(_.gI.DisableNextPre)){var e;null===(e=o.playNextFunc)||void 0===e||e.call(o)}},disable:!1,noBodyTarget:!1},changePrev:{keyCode:p.bf.W.keyCode,action:()=>{var e;return null===(e=o.playPrevFunc)||void 0===e?void 0:e.call(o)},disable:!!i,noBodyTarget:!1},changeNext:{keyCode:p.bf.S.keyCode,action:()=>{var e;return null===(e=o.playNextFunc)||void 0===e?void 0:e.call(o)},disable:!!i,noBodyTarget:!1}};return s()(u,"plugins.keyboard.keyCodeMap",(0,t._)({},d()(u,"plugins.keyboard.keyCodeMap")||{},e)),()=>{u.plugins.keyboard&&(0,h.v)({currentCodeMap:u.plugins.keyboard.keyCodeMap,additionalCodeMap:e})}}},[u,o,i]),i?null:(0,n.jsx)(m.I,(0,l._)((0,t._)({},o),{className:v()(g.playSwitchContainer,{[g.isWebSwitch]:r})}))}},476155:function(e,o,i){i.d(o,{v:function(){return v}});var t=i(520739);i(250440),i(413806),i(826893),i(268917);var l=i(88648),n=i(567754),a=i(948375),r=i(746864),d=i(791152),u=i(150566),s=i(408749),c=i(14108);let v=e=>{var o,i;let{nextVideoInfo:v,prevVideoInfo:m,videoToast:f,awemeInfo:h,isListenVideoMiniWin:p,changeListenVideoFeedIndex:_}=e,g=(null==h?void 0:null===(o=h.seriesInfo)||void 0===o?void 0:o.currentEpisode)||(null==h?void 0:null===(i=h.mixInfo)||void 0===i?void 0:i.currentEpisode),w=(0,d.R)(),C=(0,l.useRef)([]),y=(0,a.Z)(()=>{if(!v){f("请耐心等候，正在为你加载下一集");return}if(null==v?void 0:v.url){var e,o,i;p&&(null==_||_({changeMode:"incr"})),window.scrollTo(0,0);let l=null==v?void 0:v.url,a="",r=(0,n.stringify)((0,t._)({enter_method:(0,u.Rs)("enter_method")},(0,s.U)({passParamKeys:[],isRecordFirPage:!0,defaultFirPreivousPage:"web_link"})));return(null==v?void 0:null===(e=v.url)||void 0===e?void 0:e.includes("?"))?(l=null==v?void 0:null===(o=v.url)||void 0===o?void 0:o.split("?")[0],a=`?${null==v?void 0:null===(i=v.url)||void 0===i?void 0:i.split("?")[1]}${r?`&${r}`:""}`):a=r?`?${r}`:"",w.push(l,{extra:{prevId:h.awemeId},search:a}),C.current.push(h),!0}f("请耐心等候，正在为你加载下一集")});return{playNextFunc:y,playPrevFunc:(0,l.useCallback)(()=>{if(p&&m){w.push((0,c.$N)(m.awemeId,(0,u.ht)())),null==_||_({changeMode:"decr"});return}if(C.current.length>0){let e=C.current.pop();e.awemeType===r.e.Note?w.push((0,c.Wr)(e.awemeId,(0,u.ht)())):w.push((0,c.$N)(e.awemeId,(0,u.ht)()))}else m&&w.push((0,c.$N)(m.awemeId,(0,u.ht)()))},[m,p,_]),disablePrev:!m&&0===C.current.length||1===g,disableNext:!v}}},35097:function(e,o,i){i.d(o,{x:function(){return C}}),i(874386);var t=i(88648),l=i(948375),n=i(337499),a=i(35730),r=i(881155),d=i(637005),u=i(820303),s=i(658065),c=i(367366),v=i(782442),m=i(150566),f=i(813481),h=i(452586),p=i(330746),_=i(682644),g=i(67487),w=i(770673);let C=e=>{let{awemeInfo:o,followStatus:i,awemelogPb:C}=e,y=(0,t.useRef)(null),[I,x]=(0,t.useState)(!1),b=(0,t.useCallback)(()=>{x(e=>(d.emit(d.EVENT.changeVideoSideBar,{isShowRelatedCard:!e,isShowComment:!0,lastStatus:{isShow:e,tab:n.L.Comment}}),!e))},[]),S=(0,l.Z)(()=>{if(y.current){var e,t,l,n,d,p,_,g,I,x;let b=(0,u.G)(a.SessionStorageKeys.manualSwitch);w.Z.sendLog("clickCommentButton",{urlParamList:["previous_page"],author_id:null==o?void 0:null===(e=o.authorInfo)||void 0===e?void 0:e.uid,group_id:null==o?void 0:o.awemeId,enter_from:(0,s.yW)(),log_pb:C,is_full_screen:(0,c.r)()?"1":"0",from_follow_list:(null===(t=v.Le.getConfig(v.gI.FromFollowList))||void 0===t?void 0:t.tag)?"1":"0",relation:String(i),aweme_type:`${null==o?void 0:o.awemeType}`,clarity:null==b?void 0:b.gearClarity,is_auto:(null==b?void 0:b.done)?0:1,item_duration_ms:(null==o?void 0:null===(l=o.video)||void 0===l?void 0:l.duration)||0,playlet_id:null==o?void 0:null===(n=o.seriesInfo)||void 0===n?void 0:n.seriesId,is_trailer:(null==o?void 0:null===(p=o.chargeInfo)||void 0===p?void 0:null===(d=p.preview_config)||void 0===d?void 0:d.is_preview)?1:0,module:decodeURIComponent((0,m.Rs)("module")||""),payment_status:(0,r.wQ)(o),episode_id:String((null==o?void 0:null===(_=o.seriesInfo)||void 0===_?void 0:_.currentEpisode)||(null==o?void 0:null===(g=o.mixInfo)||void 0===g?void 0:g.currentEpisode)),episode_rank:(null==o?void 0:null===(I=o.seriesInfo)||void 0===I?void 0:I.currentEpisode)||(null==o?void 0:null===(x=o.mixInfo)||void 0===x?void 0:x.currentEpisode)||0,previous_page:(0,m.Rs)("previous_page"),fir_previous_page:(0,m.Rs)("fir_previous_page")||(0,m.Rs)("previous_page")});let{y:S}=(0,f.F)(window),k=S+y.current.getBoundingClientRect().top-122-25;(0,h.d)(window,k,0)}});(0,t.useEffect)(()=>{let e=d.listen(d.EVENT.commentFocus,()=>{var e;let{y:o}=(0,f.F)(window),i=o+(null==y?void 0:null===(e=y.current)||void 0===e?void 0:e.getBoundingClientRect().top)-122-25;(0,p.G6)()?(0,_.X)({top:i}):(0,h.d)(window,i,200)});return()=>e()},[]);let[k,N]=(0,t.useState)();return(0,t.useEffect)(()=>{let e=document.querySelector(`.${g.tt}`);e&&N(e)},[]),{commentScrollContainer:k,isCommentShow:I,toggleComment:b,onScrollToComment:S}}},213303:function(e,o,i){i.d(o,{r:function(){return h}});var t=i("520739"),l=i("878389");i("874386");var n=i("88648"),a=i("567754"),r=i("948375"),d=i("150566"),u=i("482092");i("250440");var s=i("991105"),c=i("920352");let v=e=>{let{authorUserId:o,accountType:i,isMix:t}=e;return(0,n.useMemo)(()=>!t&&(!![s.Q.Gov,s.Q.OfficialMedia].includes(i)&&!c.SPECIAL_GOV_OFFICIAL_UID.includes(o)||!1),[o,i])};var m=i("226451"),f=i("402971");function h(e){var o,i,s,c;let{awemeId:h,awemeInfo:p,query:_,defaultCustomRelate:g,accountType:w,abtestData:C,isLogin:y}=e,I=null!==(s=null==g?void 0:g.queryParam)&&void 0!==s?s:_,x=null==g?void 0:g.res,{userInfo:b}=(0,f.useUserInfoContext)()||{},S=x?{awemeId:null==p?void 0:p.awemeId,statusCode:null==x?void 0:x.statusCode,isCanShow:(null==x?void 0:x.statusCode)===0&&(null==x?void 0:null===(o=x.data)||void 0===o?void 0:o.length)>0,hasMore:null==x?void 0:x.hasMore,data:null!==(c=null==x?void 0:x.data)&&void 0!==c?c:[],categoryName:null==x?void 0:x.categoryName}:{isCanShow:!0},[k,N]=(0,n.useState)(S),T=v({isMix:!!(null==p?void 0:null===(i=p.mixInfo)||void 0===i?void 0:i.mixId),authorUserId:null==p?void 0:p.authorUserId,accountType:w}),L=(0,n.useMemo)(()=>(0,m.t)(I,T),[I,T]),j=(0,n.useRef)([]),E=(0,n.useRef)(!1),M=(0,n.useRef)(!0),R=(0,n.useRef)(),{LIST_SIZE:D=6}=L||{},P=(0,n.useRef)(""),A=(0,r.Z)(async()=>{if(!!(null==L?void 0:L.loadMoreData)){if(j.current.length<D&&M.current){let{statusCode:e,hasMore:o=!1,data:i=[],nextParam:n,whaleDecisionCustom:a=""}=await L.loadMoreData({param:R.current});if(P.current=a,0!==e){N(o=>(0,l._)((0,t._)({},o),{statusCode:e,whaleDecisionCustom:a}));return}{let e=i;e=await (0,u.x)(e),j.current=[...j.current,...e],R.current=n,M.current=o}}N(e=>{let o=M.current||j.current.length>D,i=[...e.data||[],...j.current.splice(0,D)];return(0,l._)((0,t._)({},e),{statusCode:0,hasMore:o,data:i,whaleDecisionCustom:j.current.length>0?"":P.current})})}}),U=(0,r.Z)(async(e,o,i)=>{var t,l,n,a,r;if(!(null==L?void 0:L.getInitData)||!(null==L?void 0:null===(t=L.checkParam)||void 0===t?void 0:t.call(L,{awemeInfo:e,queryParam:o})))return;let{param:d,nextVideoInfo:s=!1,res:c}=await L.getInitData({awemeInfo:e,queryParam:o,defaultCursor:i,userInfo:b})||{},v=await (0,u.x)(null==c?void 0:c.data);j.current=[...v||[]],R.current=d,E.current=s,M.current=(null==c?void 0:c.hasMore)||!1,P.current=null==c?void 0:c.whaleDecisionCustom;let m=L.isShowAllItem?j.current:null===(n=j.current)||void 0===n?void 0:null===(l=n.splice)||void 0===l?void 0:l.call(n,0,D);N({awemeId:null==e?void 0:e.awemeId,statusCode:null==c?void 0:c.statusCode,isCanShow:(null==c?void 0:c.statusCode)===0&&(null==c?void 0:null===(a=c.data)||void 0===a?void 0:a.length)>0,hasMore:(null==c?void 0:c.hasMore)||(null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.length)>D,data:m,categoryName:null==c?void 0:c.categoryName,whaleDecisionCustom:j.current.length>0?"":P.current})}),F=(0,n.useCallback)(e=>{var o;return!!E.current&&(null===(o=E.current)||void 0===o?void 0:o.relateAwemeId)===e&&E.current},[]);return(0,n.useEffect)(()=>{var e;if((null==p?void 0:p.awemeId)===h)P.current="",U(p,null!==(e=null==g?void 0:g.queryParam)&&void 0!==e?e:a.parse((0,d.ht)()),void 0)},[h,p,y]),{CompHandle:L,resetCustomRelateData:U,loadMoreCompData:A,getNextVideoInfo:F,compInfo:k}}},947630:function(e,o,i){i.d(o,{z:function(){return v}});var t=i(520739),l=i(878389);i(874386);var n=i(88648),a=i(576669),r=i(168998),d=i(482092),u=i(770673);let s={statusCode:0,data:[],mixId:"",hasMore:!1,cursor:0,nextUrl:"",logPb:""},c={statusCode:0,data:[],seriesId:"",hasMore:!1,cursor:0,nextUrl:"",logPb:""};function v(e){let{awemeInfo:o,defaultMixInfo:i}=e,[v,m]=(0,n.useState)(i||s),[f,h]=(0,n.useState)(i||c),p=(0,n.useCallback)(async(e,o)=>{u.Z.sendLog("compilationClickMore",{compilation_id:e});let{statusCode:i,data:n=[],hasMore:r,cursor:s,logPb:c}=await (0,a.FF)({mixId:e,cursor:o,count:6}),v=await (0,d.x)(n);m(n=>(0,l._)((0,t._)({},n),{statusCode:i,mixId:e,data:[...n.data,...v],hasMore:r,cursor:0===i?s:o,logPb:c}))},[]),_=(0,n.useCallback)(async(e,o)=>{u.Z.sendLog("compilationClickMore",{compilation_id:e});let{statusCode:i,data:n=[],hasMore:a,cursor:s,logPb:c}=await (0,r.Ab)({seriesId:e,cursor:o,count:6}),v=await (0,d.x)(n);h(n=>(0,l._)((0,t._)({},n),{statusCode:i,seriesId:e,data:[...n.data,...v],hasMore:a,cursor:0===i?s:o,logPb:c}))},[]),g=(0,n.useCallback)(async(e,o)=>{var i;let{mixId:t,totalEpisode:l,currentEpisode:n,seriesId:u}=(null==o?void 0:null===(i=o.seriesInfo)||void 0===i?void 0:i.seriesId)?null==o?void 0:o.seriesInfo:(null==o?void 0:o.mixInfo)||{};if(u){if(e&&0===e.statusCode&&e.seriesId===u&&e.currentEpisode===n)h(e);else{let e=await (0,r.cl)({seriesId:u,totalEpisode:l,currentEpisode:n,count:6});0===e.statusCode&&(e.data=await (0,d.x)(e.data)),h(e)}}else if(t){if(e&&0===e.statusCode&&e.mixId===t&&e.currentEpisode===n)m(e);else{let e=await (0,a.iv)({mixId:t,totalEpisode:l,currentEpisode:n,count:6});0===e.statusCode&&(e.data=await (0,d.x)(e.data)),m(e)}}else m(s)},[]);return(0,n.useEffect)(()=>{g(i,o)},[i,o]),{mixInfo:v,loadMoreMixInfo:p,seriesInfo:f,loadMoreSeriesInfo:_,resetMixInfo:g}}},209789:function(e,o,i){i.d(o,{Z:function(){return R}});var t=i("520739");i("675373"),i("874386"),i("250440"),i("268917");var l=i("563097"),n=i("713097"),a=i.n(n),r=i("88648"),d=i("567754"),u=i("338426"),s=i("337499"),c=i("746864"),v=i("79307"),m=i("637005"),f=i("14108"),h=i("176638"),p=i("150566"),_=i("658065"),g=i("408749"),w=i("375944"),C=i("208987"),y=i("900674"),I=i("791152"),x=i("871415"),b=i("185791"),S=i("587526"),k=i("123407"),N=i("711054");i("950331");var T=i("669201");let L=e=>{var o,i;let{showRelateVideo:t=T.TP.ShowSideCarOnly}=(null==e?void 0:null===(i=e.webRawData)||void 0===i?void 0:null===(o=i.CTR)||void 0===o?void 0:o.recommendScore)||{};return t===T.TP.ShowSideCarOnly},j=e=>{let{awemeInfo:o,scene:i,is_political_media:t}=e,{normalList:l}=(0,r.useMemo)(()=>{var e,i,l;let n=[s.L.Comment];return t&&n.unshift(s.L.Author),L(o)&&!t&&n.unshift(s.L.Related),(null==o?void 0:null===(e=o.mixInfo)||void 0===e?void 0:e.mixId)&&!(null==o?void 0:null===(i=o.seriesInfo)||void 0===i?void 0:i.seriesId)&&n.unshift(s.L.Mix),(null==o?void 0:null===(l=o.seriesInfo)||void 0===l?void 0:l.seriesId)&&n.unshift(s.L.Series),{normalList:n}},[o,i]);return{showRelatedTabList:(0,r.useMemo)(()=>l,[l])}};var E={playerContainer:"p1jsz8Ue",miniModalContainer:"EIoJ_ycj",miniModalFullScreen:"aI_qfX26",playerCommentWrapper:"yyjTENgD",transparent:"Jc6psHhx",hiddenFeedPlayer:"al3pAvmS",adapterMiniHeight:"YWRwKPae",adapterMiniHeight495:"ovzNTPes",adapterMiniHeightWithDislikeBtn:"VJwneOZn",isFullScreen:"Lw4hBlop",flex:"CPKT73Bg",searchFit:"Yl_YIJQn",sideBar:"Ve9JneMA",shopSidebar:"ppyP9E26",sideBarDefaultWidth:"chjYeyyt",force280pxWidth:"s28i_6Uz",bgColorDarken1:"TRcgMqje",bgColorDarken2:"yRhhJR7X",middle:"EJlxOy8L",sideBarInnerWrapper:"ksBLzGX2",sideBarInnerHidden:"gvsjCXW2",relatedVertical:"xjEd6Glz",inFullScreen:"mgFwumky",sideBarHidden:"duaByZSB",noTransition:"L1PYzBNE",displayNone:"yr6DmbAp",showSideBar:"bIJWHM9g",interactionPos:"sar1Bmmx",removeSlideRelatedButton:"gDZanFvk",isSafari:"RzrRObHp",videoImage:"TcUaR_27",isHavePlayer:"o1MNq2_e",playerWrap:"PzqyNvA3",electronDrag:"SH8wDEqk",playerWrapZIndex:"wdcTADnA",isMiniWindowActive:"CsfXS2iW",btn:"Uzz94pGU",openBtn:"mbDyTW_k",putBtn:"p1uK4GWs",backgroundImg:"zD1WyMgX",backgroundMask:"uWVSMPX6",backgroundImgSarari:"ZZYtdVii",videoInfoContainer:"k3GoAJjd",title:"MMQs9wKk",infoContainer:"rVdUSVzb",time:"rDpTjU5f",reportTool:"V2RFB4DE",report:"axgPyUX9",publishTime:"sqi5FZDz",statsContainer:"i52mxxnB",count:"elpdlfab",statsItem:"pnlSkF74",share:"lSItoeaE",active:"F2ZpfCWy",iconSvg:"yPzks6rz",shareContainer:"ig5Vs75y",shareBox:"r7NoRdZj",shareBoxHidden:"Jr59qQAT",miniScreenBtn:"NtWt4YLZ",hidden:"_gHxRV1D",imgPlaceHolder:"TbHnQEZN",programCardHidden:"hvWXo7lX",linkHashTag:"g0RGxmuM",hide:"j_SNREBU",inOutFeed:"fpSng3rr",shopCard:"_Y0teRx1",adapterSeventh:"P_ex8pMi",playSwitch:"Re1SEKia",maskBackgroundHidden:"J0Gj0jQV"};let M=(0,u.ZP)(()=>i.e("87219").then(i.bind(i,769962)),{ssr:!1});function R(e,o){var i,n,u,T,L,R,D,P,A;let{awemeInfo:U,abtestData:F,userContext:V,is_political_media:H,isActive:W,enterFromPrefix:B}=e,O=(0,r.useRef)(null),{isFullScreen:Z,isCssFullScreen:$,slideVideoTab:z,setSlideVideoTab:G}=(0,r.useContext)(C.C),q=G?z:s.L.AbstractList,J=s.L.Related,[Q,X]=(0,r.useState)(null),Y=(0,r.useMemo)(()=>{var e,o;if(null==U?void 0:null===(e=U.mixInfo)||void 0===e?void 0:e.mixId)return s.L.Mix;if(null==U?void 0:null===(o=U.seriesInfo)||void 0===o?void 0:o.seriesId)return s.L.Series;if(H)return s.L.Author;else if((null==U?void 0:U.awemeType)!==c.e.XgVideo)return J;else return[s.L.CollectFolder].includes(J)?J:s.L.Comment},[J,H,U,q]),K=(0,I.R)(),{globalCommentCount:ee,updateGlobalCommentCount:eo,fetchComment:ei}=b.x({awemeInfo:U}),{showRelatedTabList:et}=j({awemeInfo:U,scene:v.lT.Detail,is_political_media:H,abtestData:F});S.U({isModal:!1,awemeInfo:U,isActive:W,fetchComment:ei,player:Q,showSideCard:!0,commentpreloadAbStatus:null==F?void 0:F.commentAiPreloadStatus,adCommentpreloadAbStatus:null==F?void 0:F.adCommentAiPreloadStatus,scene:v.lT.Detail});let{curTab:el,curVideoFeed:en,changeTab:ea,lastVideoFeedAweme:er}=k.nW({defaultTab:Y,isActive:W,awemeInfo:U,abtestData:F}),ed=e=>{m.emit(m.EVENT.VideoDetailCurrentTab,{tab:e})};(0,r.useEffect)(()=>{ed(el),m.listen(m.EVENT.VideoDetailTabChange,e=>{(null==e?void 0:e.tab)===s.L.Comment&&ea({tab:s.L.Comment})})},[Y]);let eu=(0,r.useCallback)(e=>{let{clickMethod:o}=e||{};return el!==s.L.Comment&&(el!==s.L.Comment||!0)},[!0,el]),es=(0,r.useRef)(null),{fullScreenTarget:ec}=(0,r.useContext)(C.C),{followStatus:ev}=(0,x.r)({selfUid:null==V?void 0:null===(n=V.userInfo)||void 0===n?void 0:null===(i=n.info)||void 0===i?void 0:i.uid,actionUid:null==U?void 0:null===(u=U.authorInfo)||void 0===u?void 0:u.uid,defaultFollowerStatus:null==U?void 0:null===(T=U.authorInfo)||void 0===T?void 0:T.followerStatus,defaultFollowStatus:null==U?void 0:null===(L=U.authorInfo)||void 0===L?void 0:L.followStatus}),{authorConfig:em,commentConfig:ef}=N.B({awemeInfo:U,customProps:{abtestData:F,userContext:V,tab:v.lT.Detail},fullScreenTarget:ec,tab:el,showSideCard:!0,isShowRelatedCard:!0,player:Q,scrollElRef:es,followStatus:ev,handleCommentClick:e=>eu(e),isActive:W,onSearchTextClick:()=>{},scene:v.lT.Recommend}),eh="sliderVideo",ep=(0,r.useRef)(null);return(0,l.jsx)(y.v.Provider,{value:{playerScene:v.lT.Recommend,globalCommentCount:ee,setGlobalCommentCount:eo,authorVideoCardClick:()=>{},setNextAwemeInfo:e=>{e&&m.emit(m.EVENT.VideoDetailSetNextVideo,{info:e})},setPrevAwemeInfo:e=>{e&&m.emit(m.EVENT.VideoDetailSetPrevVideo,{info:e})},player:Q},children:(0,l.jsx)("div",{"data-e2e":W?"feed-active-video":"feed-video","data-e2e-vid":null==U?void 0:U.awemeId,id:eh,className:a()(E.playerCommentWrapper,"detailVideo",eh,"",{isMiniWindow:!1,[E.isMiniWindowActive]:W&&!1,[E.flex]:true,[E.isFullScreen]:Z,[E.inOutFeed]:true,[E.miniWidth]:!0,[E.adapterSeventh]:true,[E.shopCard]:!1,[E.adapterMiniHeight]:!1,[E.adapterMiniHeight495]:!1,[E.adapterMiniHeightWithDislikeBtn]:!1,[E.transparent]:!1}),style:{},ref:ep,children:(0,l.jsx)("div",{id:"detailrelatedVideoCard",className:a()(E.sideBarInnerWrapper,E.relatedVertical,{[E.inFullScreen]:$||Z,LookModalFrameFast:(null===(R=(0,w.fV)())||void 0===R?void 0:R.os)==="Windows"}),style:{width:"100%"},children:(0,l.jsx)(M,{isRender:!0,ref:O,collapse:!1,scene:v.lT.Recommend,isShow:!0,awemeInfo:U,lastVideoFeedAweme:er,originFeedAwemeInfo:U,enterFromPrefix:B,handleClose:()=>{},isActive:W,logParams:{},abtestData:F,userContext:V,isShowCloseBtn:!1,globalCommentCount:ee,handleRelatedVideoChange:e=>{window.scrollTo(0,0),(null==e?void 0:e.awemeType)===c.e.XgVideo?(window.open((0,f.Tl)({videoid:e.awemeId}),(0,h.f)()?"_self":"_blank"),m.emit(m.EVENT.videoPause,"NewRelateVideo_SideBar_onClick")):(null==e?void 0:e.awemeType)===c.e.Note?window.location.href=(0,f.Wr)(null==e?void 0:e.awemeId):K.push((0,f.$N)(e.awemeId,(0,d.stringify)((0,t._)({pre_vid:null==e?void 0:e.awemeId,enter_method:(0,p.Rs)("enter_method"),fir_previous_page:(0,p.Rs)("fir_previous_page")||(0,p.Rs)("previous_page"),previous_page:(0,_.yW)()},(0,g.U)()))))},tab:el,videoFeed:en,relatedCommentConfig:ef,showTabList:et,hotDefaultList:[],is_political_media:H,relatedAuthorConfig:em,mixDefault:el===s.L.Mix?null==O?void 0:null===(D=O.current)||void 0===D?void 0:D.getMixDefaultParam():null,seriesDefault:el===s.L.Series?null==O?void 0:null===(P=O.current)||void 0===P?void 0:P.getSeriesDefaultParam():null,setOuterRelatedList:null==O?void 0:null===(A=O.current)||void 0===A?void 0:A.setRelatedList,onTabChange:e=>{ea({tab:e}),ed(e)},isUpperFeed:!0,isObscuredByOtherCard:!1})})})})}},716991:function(e,o,i){i.d(o,{Z:function(){return g}}),i("874386");var t=i("563097"),l=i("88648"),n=i("713097"),a=i.n(n),r=i("439837"),d=i.n(r),u=i("746864"),s=i("422959"),c=i("658065"),v=i("32167"),m=i("637005"),f=i("14108"),h={detailContainer:"PCDwF7R4",unfoldDescWrapper:"JAgvLhJN",unfoldDescBox:"BhCHsHRG",unfoldBtnWrapper:"e7HkMK4l",button:"kcrZfAZR",btn:"TYcpq6vJ",title:"YklhOzZK",hashTagSpan:"UXrXat3v",linkHashTag:"E8HsBurw",userText:"R4cuw9mg",timeContainer:"__VJux97",publishTime:"DvkgQYXk"},p=i("895599"),_=i("770673");function g(e){let{isSpider:o,awemeInfo:i,awemelogPb:n,handleFoldClick:r,boxMaxHeight:g}=e,[w,C]=(0,l.useState)(!1),y=(e,o)=>{var t;_.Z.sendLog("clickTitleHashtag",{hashtag:o.slice(1),urlParamList:["previous_page"],author_id:null==i?void 0:null===(t=i.authorInfo)||void 0===t?void 0:t.uid,group_id:null==i?void 0:i.awemeId,log_pb:n,enter_from:(0,c.yW)(),tag_id:e,is_full_screen:"0",player_display_mode:(0,v.Ok)()})},I=e=>{var o;C(e),null==r||r(e),_.Z.sendLog("clickVideoTitle",{action:e?"fold":"expand",urlParamList:["previous_page"],author_id:null==i?void 0:null===(o=i.authorInfo)||void 0===o?void 0:o.uid,group_id:null==i?void 0:i.awemeId,log_pb:n,enter_from:(0,c.yW)(),is_full_screen:"0",player_display_mode:(0,v.Ok)()})},x=e=>{var o;m.emit(m.EVENT.videoPause,"NewRelateVideo_VideoDetail_onUserNameClick"),_.Z.sendLog("clickTitleAt",{to_user_id:e,urlParamList:["previous_page"],author_id:null==i?void 0:null===(o=i.authorInfo)||void 0===o?void 0:o.uid,group_id:null==i?void 0:i.awemeId,log_pb:n,enter_from:(0,c.yW)(),is_full_screen:"0"})};(0,l.useEffect)(()=>{C(!1),null==r||r(!1)},[null==i?void 0:i.desc]),(0,l.useEffect)(()=>{let e=m.listen(m.EVENT.VideoDetailTabChange,()=>{C(!1),null==r||r(!1)}),o=m.listen(m.EVENT.VideoDetailCurrentTab,()=>{C(!1),null==r||r(!1)});return()=>{e(),null==o||o()}},[r]);let b=e=>{var n,r;let{isUnfold:d}=e,c=(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{children:(null==i?void 0:null===(n=i.mixInfo)||void 0===n?void 0:n.currentEpisode)&&`第${null==i?void 0:null===(r=i.mixInfo)||void 0===r?void 0:r.currentEpisode}集 | `||""}),(0,t.jsx)(s.Z,{isRemoveRowspan:!d,getHashTagHref:(e,o)=>(null==i?void 0:i.awemeType)===u.e.Note?(0,f.bP)(o):`https://www.douyin.com/search/${encodeURIComponent(e)}?source=pc_click_hashtag_feed&enter_from=${(0,v.vM)()}`,getSearchTextUrl:(e,o)=>(null==i?void 0:i.awemeType)===u.e.Note?(0,f.bP)(o):`https://www.douyin.com/search/${encodeURIComponent(e)}?source=pc_click_hashtag_feed&enter_from=${(0,v.vM)()}`,hashTagClassName:a()(h.hashTagSpan,h.linkHashTag),userTextClassName:h.userText,text:null==i?void 0:i.desc,textExtra:null==i?void 0:i.textExtra,onClickHashtag:y,onClickUser:x,enterMethod:"video_title_at",seoInfo:{isSpider:o,awemeId:null==i?void 0:i.awemeId}})]});return l.createElement("div",{className:h.title,style:{display:"inline"}},c)};return(0,t.jsxs)("div",{className:a()(h.detailContainer),children:[w?(0,t.jsxs)("div",{className:h.unfoldDescWrapper,children:[(0,t.jsx)("div",{className:h.unfoldDescBox,style:{maxHeight:g},children:b&&b({isUnfold:!0})}),(0,t.jsx)("div",{className:h.unfoldBtnWrapper,children:(0,t.jsx)("button",{type:"button",onClick:()=>I(!1),className:a()(h.button,h.btn),children:"收起"})})]}):(0,t.jsx)(p.Z,{lineHeight:26,lineClamp:4,onlyKey:null==i?void 0:i.awemeId,btnClassName:h.button,btnOnClick:e=>I(!e),renderContent:b}),(0,t.jsx)("div",{className:h.timeContainer,children:(0,t.jsxs)("span",{className:h.publishTime,children:["发布时间：",d()((null==i?void 0:i.createTime)*1e3).format("YYYY-MM-DD HH:mm:ss")]})})]})}},805578:function(e,o,i){i.d(o,{Z:function(){return V}});var t=i("520739");i("268917"),i("874386");var l=i("563097"),n=i("88648"),a=i("567754"),r=i("128231"),d=i.n(r),u=i("747909"),s=i("746864"),c=i("105600"),v=i("720359"),m=i("241467"),f=i("301061"),h=i("791152"),p=i("358003"),_=i("881155"),g=i("658065"),w=i("14108"),C=i("176638"),y=i("637005"),I=i("150566"),x=i("408749"),b=i("55426"),S=i("339391"),k=i("67487"),N=i("612075"),T={coverageContainer:"xv9JHM_4",titleContainer:"EguT6ceB",title:"XX8y_zl4",cardWrap:"YGmRi0kR",moreBtnWrap:"aoHI3jxm",noMoreText:"CmvGCRjS",moreBtn:"k3L07yN5",opBtn:"R_yaJcon",loginBtnWrapper:"hWJQOngQ",loginBtn:"C_TKJ03a"},L=i("770673"),j=i("963496"),E=i("402971");let{Context:M}=N;function R(e){let{onClick:o}=e;return(0,l.jsx)("button",{type:"button",className:T.moreBtn,onClick:o,children:"点击加载更多"})}function D(e){let{reload:o}=e;return(0,l.jsxs)("div",{className:T.noMoreText,children:["服务异常，请",(0,l.jsx)("span",{onClick:o,className:T.opBtn,children:"刷新"}),"重试"]})}function P(e){let{nCards:o,isSeries:i}=e,t=Array.from({length:o},(e,o)=>o);return(0,l.jsxs)(l.Fragment,{children:[t.map(e=>(0,l.jsx)(m.O,{isSeries:i},e)),(0,l.jsx)(f.gb,{})]})}function A(e){let{videoList:o,rendItem:i,getType:n,awemeId:r,isNeedUserShow:d,videoDetailExtraParams:u,getVideoParam:v,logType:f="related_video"}=e,{userInfo:{isSpider:S=!1,info:k}={}}=(0,E.useUserInfoContext)()||{},N=(0,h.R)(),M=e=>{var i,t;let l=o[e];if((null==l?void 0:l.awemeType)===s.e.NoLoginVideoGuide){L.Z.sendLog("personalShieldAlbumShow",{to_user_id:null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid,tab_name:"detail_post",enter_from:(0,g.yW)()});return}L.Z.sendLog("videoCoverShow",{urlParamList:["trending_topic"],author_id:null==l?void 0:null===(i=l.authorInfo)||void 0===i?void 0:i.uid,log_pb:l.logPb,group_id:null==l?void 0:l.awemeId,enter_from:(0,g.yW)(),rank:e,type:f,relation:null==u?void 0:u.relation,video_detail_aweme_type:null==u?void 0:u.awemeType,aweme_type:null==l?void 0:l.awemeType})},R=(e,o,i)=>{var l,n,d;if(e.preventDefault(),o.awemeType===s.e.NoLoginVideoGuide){(0,p.default)({success:async()=>{window.location.reload()},enterMethod:"nologin_video_guide",headerText:"登录后即可看更多最新作品",next:`https://${null===(d=window)||void 0===d?void 0:null===(n=d.location)||void 0===n?void 0:n.host}`});return}window.scrollTo(0,0),L.Z.sendLog("videoCoverClick",{urlParamList:["trending_topic"],author_id:null==o?void 0:null===(l=o.authorInfo)||void 0===l?void 0:l.uid,log_pb:null==o?void 0:o.logPb,group_id:null==o?void 0:o.awemeId,enter_from:(0,g.yW)(),rank:i,type:f,relation:null==u?void 0:u.relation,video_detail_aweme_type:null==u?void 0:u.awemeType,aweme_type:`${null==o?void 0:o.awemeType}`}),(null==o?void 0:o.awemeType)===s.e.XgVideo?(window.open((0,w.Tl)({videoid:o.awemeId}),(0,C.f)()?"_self":"_blank"),y.emit(y.EVENT.videoPause,"RelateVideo_Handle_Common_onClick")):(null==o?void 0:o.awemeType)===s.e.Note?window.location.href=(0,w.Wr)(null==o?void 0:o.awemeId):N.push((0,w.$N)(o.awemeId,(0,a.stringify)((0,t._)({pre_vid:r,enter_method:(0,I.Rs)("enter_method"),fir_previous_page:(0,I.Rs)("fir_previous_page")||(0,I.Rs)("previous_page"),previous_page:(0,g.yW)()},(0,x.U)(),(null==v?void 0:v(o))||{}))))};return o.filter(e=>{var o;return"Invalid Date"!==(0,b.$y)(null===(o=e.video)||void 0===o?void 0:o.duration)}).map((e,o)=>{var t,v,f,h,p,g;return(0,l.jsx)("li",{className:T.cardWrap,children:i&&i(e,o)||(0,l.jsx)(m.Z,{paidTagType:(0,_.$m)(e,(null==e?void 0:null===(t=e.authorInfo)||void 0===t?void 0:t.uid)===(null==k?void 0:k.uid)),type:null==n?void 0:n(r,e),onShow:M,rank:o,imgSrc:null===(v=e.video)||void 0===v?void 0:v.cover,duration:null===(f=e.video)||void 0===f?void 0:f.duration,userName:d?null==e?void 0:null===(h=e.authorInfo)||void 0===h?void 0:h.nickname:"",isSpider:S,userUrl:d&&(null==e?void 0:null===(p=e.authorInfo)||void 0===p?void 0:p.secUid)?(0,w.HC)(null==e?void 0:null===(g=e.authorInfo)||void 0===g?void 0:g.secUid,`enter_method=video_cover_title&${(0,a.stringify)(u)}`):"",videoUrl:(0,j.JF)(e),onClick:i=>{R(i,e,o)},title:e.desc||e.name,diggNum:e.stats.diggCount,debugInfo:e.debugInfo,isUseALink:e.awemeType!==s.e.NoLoginVideoGuide&&(null==e?void 0:e.isHighQuality)!==c.HighQualityStatus.NotHighQuality,name:e.name,awemeType:e.awemeType})},e.awemeId)})}let U=(e,o,i,t)=>{let l=(0,v.d)(e&&o);(0,n.useEffect)(()=>{if(!l.current)return;let e=d()(async()=>{if(!!l.current&&!!i.current&&null!==i.current.offsetParent)i.current.getBoundingClientRect().bottom-window.innerHeight<=100&&(await t(!1),(0,S.U)(()=>{e()}))},50,{leading:!0,trailing:!0,maxWait:100});e();let o=document.querySelector(`.${k.tt}`)||window;return o.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{o.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[l.current])};function F(e){let{videoList:o,statusCode:i,fetchMore:t,hasMore:a,isAutoRelate:r,refUlContainer:d,isDisableFetch:s,isSeries:c}=e,{userInfo:{isLogin:v=!1}={},dispatch:m}=(0,E.useUserInfoContext)()||{},[f,h]=(0,n.useState)(!1),_=(0,n.useRef)(!1),g=(0,n.useRef)(null);g.current=t;let w=0!==o.length&&a&&0===i,C=n.useCallback(async()=>{if(!_.current){_.current=!0,h(!0);try{await g.current()}catch(e){}_.current=!1,h(!1)}},[]);U(r,w,d,C);if(f)return(0,l.jsx)(P,{isSeries:c,nCards:6});if(0===o.length)return 0===i?(0,l.jsx)(P,{isSeries:c,nCards:6}):(0,l.jsx)(D,{reload:()=>{C()}});return s&&!v?(0,l.jsxs)("div",{className:T.loginBtnWrapper,children:[(0,l.jsx)("div",{children:"登录后查看更多作品"}),(0,l.jsx)(u.Button,{theme:"solid",className:T.loginBtn,onClick:e=>{var o,i,t;null==e||null===(o=e.preventDefault)||void 0===o||o.call(e),(0,p.default)({success:async()=>{window.location.reload()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(t=window)||void 0===t?void 0:null===(i=t.location)||void 0===i?void 0:i.host}`})},children:"立即登录"})]}):!r&&t&&!!a&&(0,l.jsx)("div",{className:T.moreBtnWrap,children:(0,l.jsx)(R,{onClick:C})})}function V(e){let{awemeId:o,title:i,fetchMore:t,children:a,videoList:r,hasMore:d,rendItem:u,statusCode:s=0,getType:c,getVideoParam:v,isNeedUserShow:m=!1,videoDetailExtraParams:f,isAutoRelate:h=!1,logType:p,showOnlyChildren:_,e2e:g,isDisableFetch:w,isSeries:C=!1}=e,y=r||[],I=(0,n.useRef)(null);return(0,l.jsxs)("div",{className:T.coverageContainer,"data-e2e":g,children:[(0,l.jsx)("div",{className:T.titleContainer,"data-e2e":"cover-age-title-container",children:_?(0,l.jsx)(l.Fragment,{children:a}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:T.title,children:i}),(0,l.jsx)("div",{children:a})]})}),(0,l.jsx)("ul",{ref:I,children:(0,l.jsx)(A,{logType:p,videoList:y,rendItem:u,getType:c,awemeId:o,isNeedUserShow:m,videoDetailExtraParams:f,getVideoParam:v})}),(0,l.jsx)(F,{videoList:y,statusCode:s,fetchMore:t,hasMore:d,isAutoRelate:h,refUlContainer:I,isDisableFetch:w,isSeries:C})]})}},645789:function(e,o,i){var t=i(520739);i(268917);var l=i(563097),n=i(88648),a=i(567754),r=i(791152),d=i(241467),u=i(881155),s=i(746864),c=i(105600),v=i(176638),m=i(14108),f=i(682644),h=i(637005),p=i(150566),_=i(658065),g=i(408749),w=i(612075),C=i(805578),y=i(963496);o.Z=(0,n.memo)(function(e){var o;let{title:i,isSpider:n,awemeInfo:I,videoDetailExtraParams:x,isNeedUserShow:b,seoAwemeList:S=[]}=e,k=(0,r.R)(),{awemeId:N}=I||{},{userInfo:T}=(0,w.useUserContext)(),{uid:L=""}=null!==(o=null==T?void 0:T.info)&&void 0!==o?o:{};return I&&0!==S.length?(0,l.jsx)(C.Z,{title:i||"推荐",awemeId:N,videoList:S,hasMore:!1,isAutoRelate:!1,videoDetailExtraParams:x,fetchMore:()=>{},rendItem:(e,o)=>{var r,w,C,I,S,N,T;return(0,l.jsx)(d.Z,{paidTagType:(0,u.$m)(e,(null==e?void 0:null===(r=e.authorInfo)||void 0===r?void 0:r.uid)===L),showCover:"猜你喜欢"===i,onShow:()=>{},rank:o,imgSrc:null==e?void 0:null===(w=e.video)||void 0===w?void 0:w.cover,duration:null==e?void 0:null===(C=e.video)||void 0===C?void 0:C.duration,userName:(null==e?void 0:null===(I=e.authorInfo)||void 0===I?void 0:I.nickname)||"",isSpider:n,userUrl:b&&(null==e?void 0:null===(S=e.authorInfo)||void 0===S?void 0:S.secUid)?(0,m.HC)(null==e?void 0:null===(N=e.authorInfo)||void 0===N?void 0:N.secUid,`enter_method=video_cover_title&${(0,a.stringify)(x)}`):"",videoUrl:(0,y.JF)(e),onClick:o=>{o.preventDefault(),(0,f.X)({top:0,left:0}),(null==e?void 0:e.awemeType)===s.e.XgVideo?(window.open((0,m.Tl)({videoid:e.awemeId}),(0,v.f)()?"_self":"_blank"),h.emit(h.EVENT.videoPause,"RelateVideo_Handle_SeoRelatateMoudle_onClick")):(null==e?void 0:e.awemeType)===s.e.Note?window.location.href=(0,m.Wr)(null==e?void 0:e.awemeId):k.push((0,m.$N)(null==e?void 0:e.awemeId,(0,a.stringify)((0,t._)({pre_vid:null==e?void 0:e.awemeId,enter_method:(0,p.Rs)("enter_method"),fir_previous_page:(0,p.Rs)("fir_previous_page")||(0,p.Rs)("previous_page"),previous_page:(0,_.yW)()},(0,g.U)()))))},title:null==e?void 0:e.desc,diggNum:null==e?void 0:null===(T=e.stats)||void 0===T?void 0:T.diggCount,debugInfo:(null==e?void 0:e.debugInfo)||{},isUseALink:(null==e?void 0:e.isHighQuality)!==c.HighQualityStatus.NotHighQuality})}}):null})},52662:function(e,o,i){i.d(o,{Z:function(){return R}});var t=i("520739");i("874386");var l=i("563097"),n=i("88648"),a=i("567754"),r=i("713097"),d=i.n(r),u=i("747909"),s=i("447298"),c=i("881155"),v=i("871415"),m=i("516599"),f=i("545546"),h=i("906499"),p=i("474162"),_=i("422959"),g=i("868203"),w=i("746864"),C=i("256277"),y=i("234048"),I=i("14108"),x=i("150566"),b=i("658065"),S=i("801849"),k=i("637005"),N=i("55426"),T=i("577786"),L=i("612075"),j={badge:"B4pEqPd_",userContainer:"cHwSTMd3",small:"cyrsD8QX",new:"Sp8QYkQx",userInfoWrap:"OMAnlCHg",title:"q5XQ42ql",stats:"ttf3L0K8",text:"bp2Oz_15",number:"EBi41nRR",followBtnWrap:"V_bVSPdS"},E=i("402971");let{Context:M}=L;function R(e){var o,i,r,L,M,R,D,P,A,U,F,V,H,W,B,O,Z,$,z,G,q,J,Q,X,Y,K,ee,eo,ei,et,el,en,ea,er,ed,eu,es,ec,ev,em,ef;let{awemeInfo:eh,videoDetailExtraParams:ep,abtestData:e_,isShow:eg,avatarSize:ew="default",reportExtraParams:eC={},newStyle:ey=!1}=e,{userInfo:eI,dispatch:ex}=(0,E.useUserInfoContext)()||{},{uid:eb,secUid:eS}=(null==eh?void 0:eh.authorInfo)||{},ek=(0,n.useRef)(),eN=(0,n.useRef)(),eT=(0,n.useRef)();(0,n.useRef)();let eL=(0,n.useMemo)(()=>{var e;if((null==eh?void 0:eh.awemeType)!==w.e.XgVideo)return(0,I.HC)(eS,`enter_method=video_title&from_gid=${(null==eh?void 0:eh.groupId)||""}&${(0,a.stringify)(ep)}&vid=${null==eh?void 0:eh.awemeId}`);return(0,I.GN)(null==eh?void 0:null===(e=eh.authorInfo)||void 0===e?void 0:e.uid)},[eh,eS,ep]),{isLogin:ej}=eI||{},{follow:eE,unFollow:eM}=(0,s.OM)({selfUid:null==eI?void 0:null===(o=eI.info)||void 0===o?void 0:o.uid,actionUid:null==eh?void 0:null===(i=eh.authorInfo)||void 0===i?void 0:i.uid,defaultFollowerStatus:null==eh?void 0:null===(r=eh.authorInfo)||void 0===r?void 0:r.followerStatus,defaultFollowStatus:null==eh?void 0:null===(L=eh.authorInfo)||void 0===L?void 0:L.followStatus,isLogin:ej,logExtraParams:(0,t._)({author_id:null==eh?void 0:null===(M=eh.authorInfo)||void 0===M?void 0:M.uid,group_id:null==eh?void 0:eh.awemeId,aweme_type:null==eh?void 0:eh.awemeType,to_user_id:null==eh?void 0:null===(R=eh.authorInfo)||void 0===R?void 0:R.uid,item_duration_ms:(null==eh?void 0:null===(D=eh.video)||void 0===D?void 0:D.duration)||0,playlet_id:null==eh?void 0:null===(P=eh.seriesInfo)||void 0===P?void 0:P.seriesId,is_trailer:(null==eh?void 0:null===(U=eh.chargeInfo)||void 0===U?void 0:null===(A=U.preview_config)||void 0===A?void 0:A.is_preview)?1:0,module:decodeURIComponent((0,x.Rs)("module")||""),payment_status:(0,c.wQ)(eh),episode_id:String((null==eh?void 0:null===(F=eh.seriesInfo)||void 0===F?void 0:F.currentEpisode)||(null==eh?void 0:null===(V=eh.mixInfo)||void 0===V?void 0:V.currentEpisode)),episode_rank:(null==eh?void 0:null===(H=eh.seriesInfo)||void 0===H?void 0:H.currentEpisode)||(null==eh?void 0:null===(W=eh.mixInfo)||void 0===W?void 0:W.currentEpisode)||0,previous_page:(0,x.Rs)("previous_page"),fir_previous_page:(0,x.Rs)("fir_previous_page")||(0,x.Rs)("previous_page"),enter_from_merge:(0,b.yW)()},eC),onLoginSuccess:()=>null==ex?void 0:ex({type:"updateUserInfo"}),fail:s.GH}),{text:eR,buttonType:eD,followStatus:eP}=(0,v.r)({selfUid:null==eI?void 0:null===(B=eI.info)||void 0===B?void 0:B.uid,actionUid:null==eh?void 0:null===(O=eh.authorInfo)||void 0===O?void 0:O.uid,defaultFollowerStatus:null==eh?void 0:null===(Z=eh.authorInfo)||void 0===Z?void 0:Z.followerStatus,defaultFollowStatus:null==eh?void 0:null===($=eh.authorInfo)||void 0===$?void 0:$.followStatus}),eA=(0,n.useRef)("");try{eA.current=null===(ef=JSON.parse(null==ep?void 0:ep.log_pb))||void 0===ef?void 0:ef.impr_id}catch(e){eA.current=""}let[eU,eF]=(0,n.useState)(!1);(0,n.useEffect)(()=>{var e,o,i;eF(!!(null==eh?void 0:null===(i=eh.authorInfo)||void 0===i?void 0:null===(o=i.roomData)||void 0===o?void 0:null===(e=o.owner)||void 0===e?void 0:e.web_rid))},[e_,eh]);let eV=(0,n.useCallback)(e=>{if((0,C.gc)(eh)){var o;null==e||null===(o=e.preventDefault)||void 0===o||o.call(e),m.F.info("广告视频不支持此功能");return}(0,S.$)(e_,eh)&&(e.preventDefault(),k.emit(k.EVENT.changeRoute,{to:eL}))},[eh,eL,e_]);return(0,l.jsxs)("div",{className:d()(j.userContainer,{[j.small]:"small"===ew},{[j.new]:ey}),"data-e2e":"user-info",ref:eT,style:{position:"relative"},children:[(0,l.jsx)("div",{children:eU?(0,l.jsx)(f.nh,{type:"large",src:null==eh?void 0:null===(z=eh.authorInfo)||void 0===z?void 0:z.avatarUri,onClick:()=>k.emit(k.EVENT.videoPause,"RelateVideoUserInfo_onClick"),isNeedSeoOpt:!0,uid:null==eh?void 0:null===(G=eh.authorInfo)||void 0===G?void 0:G.uid,liveRoomUrl:(0,I.cc)({web_rid:null==eh?void 0:null===(Q=eh.authorInfo)||void 0===Q?void 0:null===(J=Q.roomData)||void 0===J?void 0:null===(q=J.owner)||void 0===q?void 0:q.web_rid,enter_from_merge:"web_video_detail",enter_method:"web_video_head",enter_method_temai:"web_video_head",action_type:"click",room_id:null==eh?void 0:null===(X=eh.authorInfo)||void 0===X?void 0:X.roomId}),isNeedSendLog:!0,liveRoomParam:{logId:eA.current,episodeExtra:null==eh?void 0:null===(K=eh.authorInfo)||void 0===K?void 0:null===(Y=K.roomData)||void 0===Y?void 0:Y.episode_extra},isShow:eg,isFirstLive:(null==eh?void 0:null===(et=eh.authorInfo)||void 0===et?void 0:null===(ei=et.roomData)||void 0===ei?void 0:null===(eo=ei.episode_extra)||void 0===eo?void 0:null===(ee=eo.mod)||void 0===ee?void 0:ee.episode_stage)===2,isEcomLive:(null==eh?void 0:null===(er=eh.authorInfo)||void 0===er?void 0:null===(ea=er.roomData)||void 0===ea?void 0:null===(en=ea.ecom_data)||void 0===en?void 0:null===(el=en.room_cart_v2)||void 0===el?void 0:el.show_cart)===1}):(0,l.jsx)("div",{ref:ek,"data-click-from":"click_icon",children:(0,l.jsx)(h.a,{href:eL,target:"_blank",rel:"noopener noreferrer nofollow",isNeedSeoOpt:!0,onClick:eV,children:(0,l.jsx)(p.q,{type:ew,src:null==eh?void 0:null===(ed=eh.authorInfo)||void 0===ed?void 0:ed.avatarUri,isSpider:!0,alt:(null==eh?void 0:null===(eu=eh.authorInfo)||void 0===eu?void 0:eu.nickname)||""})})})}),(0,l.jsxs)("div",{className:j.userInfoWrap,children:[(0,l.jsx)(h.a,{href:eL,target:"_blank",rel:"noopener noreferrer",isNeedSeoOpt:!0,onClick:eV,children:(0,l.jsxs)("div",{className:j.title,ref:eN,"data-click-from":"title",children:[(0,l.jsx)(_.Z,{text:(null==eh?void 0:null===(es=eh.authorInfo)||void 0===es?void 0:es.nickname)||"",className:d()({[j.title]:ey})}),(0,l.jsx)(g.C,{accountCertInfo:null==eh?void 0:null===(ec=eh.authorInfo)||void 0===ec?void 0:ec.accountCertInfo,className:j.badge})]})}),!(0,C.gc)(eh)&&(0,l.jsxs)("p",{className:d()(j.stats,{[j.new]:ey}),children:[(0,l.jsx)("span",{className:j.text,children:"粉丝"}),(0,l.jsx)("span",{className:j.number,children:eh.authorInfo.followerCountStr||(0,N.lN)({number:eh.authorInfo.followerCount||0,isOver:eh.authorInfo.isOverFollower})}),1!==eh.authorInfo.hideTotalFavorited&&(0,l.jsx)("span",{className:j.text,children:"获赞"}),1!==eh.authorInfo.hideTotalFavorited&&(0,l.jsx)("span",{className:j.number,children:eh.authorInfo.totalFavoritedStr||(0,N.qe)((null==eh?void 0:null===(ev=eh.authorInfo)||void 0===ev?void 0:ev.totalFavorited)||0)})]})]}),(0,l.jsx)("div",{className:j.followBtnWrap,children:eb===(null==eI?void 0:null===(em=eI.info)||void 0===em?void 0:em.uid)||void 0===ej||(0,C.gc)(eh)?"":(0,l.jsx)(u.Button,{theme:"solid",size:"small",type:eD!==y.TT.Active?"secondary":"primary",onKeyDown:e=>e.preventDefault(),onClick:()=>{(0,T.V)(eP)?eM():eE()},children:eR})})]})}},226451:function(e,o,i){i.d(o,{Z:function(){return eK},t:function(){return eX}}),i("874386");var t=i("563097"),l=i("88648"),n=i("222406"),a=i("473677"),r=i("962800"),d=i("288182"),u=i("701523"),s=i("555106"),c=i("150566"),v=i("32167"),m=i("35730"),f=i("531471"),h=i("287844"),p=i("273329"),_=i("963496"),g=i("52662");i("675373");var w=i("496349"),C=i("497730"),y=i("746864"),I=i("697239"),x=i("520739"),b=i("878389"),S=i("567754"),k=i("164280"),N=i("906499"),T=i("14108"),L=i("658065"),j=i("661540"),E="v4H8aEf7",M=i("805578");let R=async function(e,o){let{awemeId:i,secUid:t,cursor:l,count:n,modeFrom:a}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=await o({secUid:t,cursor:l,count:n},r),{whaleInfo:u}=d,s=null==u?void 0:u.whaleDecisionCustom,c=s===w.WHALE_CUT_HEADER;if(0===d.statusCode){var v,m;d.data.map(e=>{e.logPb=d.logPb,e.cursor=l});let e=d.data.findIndex(e=>e.awemeId===i);if((-1===e||d.data.length<e+6)&&d.hasMore&&!r&&!c){let a=await o({secUid:t,cursor:d.cursor,count:n,whaleCutToken:u.whaleCutToken},r);if(c=(s=null==(u=a.whaleInfo)?void 0:u.whaleDecisionCustom)===w.WHALE_CUT_HEADER,0===a.statusCode){let o=a.data.length<6?l:d.cursor;a.data.map(e=>{e.logPb=d.logPb,e.cursor=o}),d.data=d.data.concat(a.data),d.hasMore=a.hasMore,d.cursor=a.cursor,e=d.data.findIndex(e=>e.awemeId===i)}}let f=0,h=!1;return -1!==e&&(f=Math.max(Math.min(e,d.data.length-6),0),d.data[e+1]&&(h={relateAwemeId:i,url:(0,T.$N)(d.data[e+1].awemeId,(0,S.stringify)({pre_vid:i,previous_page:(0,L.yW)(),modeFrom:a,secUid:t,cursor:d.data[e+1].cursor,count:10})),awemeId:d.data[e+1].awemeId,img:d.data[e+1].video.cover,desc:null===(v=d.data[e+1])||void 0===v?void 0:v.desc})),!h&&"userLike"===a&&d.data.length>0&&(h={relateAwemeId:i,url:(0,T.$N)(d.data[0].awemeId,(0,S.stringify)({pre_vid:i,previous_page:(0,L.yW)(),modeFrom:a,secUid:t,cursor:d.data[0].cursor,count:10})),awemeId:d.data[0].awemeId,img:d.data[0].video.cover,desc:null===(m=d.data[0])||void 0===m?void 0:m.desc}),{statusCode:0,nextVideoInfo:h,hasMore:!!c||d.hasMore,cursor:d.cursor,data:c?d.data:d.data.slice(f),whaleDecisionCustom:s,whaleInfo:u}}return{statusCode:d.statusCode,whaleDecisionCustom:s,whaleInfo:u}},D=e=>{var o;let{awemeInfo:i,queryParam:t}=e,l=null==i?void 0:i.awemeId;return((null==t?void 0:t.secUid)||(null==i?void 0:null===(o=i.authorInfo)||void 0===o?void 0:o.secUid))&&l?1:0},P=async function(e,o){let{awemeInfo:i,queryParam:t,modeFrom:l,secUid:n,defaultCursor:a}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=null==i?void 0:i.awemeId;n=n||(null==t?void 0:t.secUid);let u=Number(null==t?void 0:t.cursor)||(null==i?void 0:i.createTime)?((null==i?void 0:i.createTime)+1)*1e3:0,s=(null==t?void 0:t.number)||18,{statusCode:c,cursor:v,nextVideoInfo:m,data:f,hasMore:h,whaleInfo:p}=await R({awemeId:d,secUid:n,cursor:null!=a?a:u,count:s,modeFrom:l},o,r);return{param:{secUid:n,lastCursor:u,cursor:v,hasMore:h,whaleCutToken:null==p?void 0:p.whaleCutToken},nextVideoInfo:m,res:{awemeId:d,statusCode:c,hasMore:h,data:f,whaleDecisionCustom:null==p?void 0:p.whaleDecisionCustom}}},A=async(e,o)=>{let{param:i}=e,{statusCode:t,hasMore:l,cursor:n,logPb:a,data:r,whaleInfo:d}=await o({secUid:i.secUid,cursor:i.cursor,count:10,whaleCutToken:i.whaleCutToken});if(0!==t)return{statusCode:-1,whaleDecisionCustom:null==d?void 0:d.whaleDecisionCustom};{let e=r.length>=6?i.cursor:i.lastCursor;return r.forEach(o=>{o.logPb=a,o.cursor=e}),{statusCode:0,data:r,hasMore:l,nextParam:(0,b._)((0,x._)({},i),{lastCursor:i.cursor,cursor:n,whaleCutToken:null==d?void 0:d.whaleCutToken}),whaleDecisionCustom:null==d?void 0:d.whaleDecisionCustom}}};var U=function(e){let{dataInfo:o,awemeInfo:i,loadMoreCompData:l,title:n,modeFrom:r,secUid:d,isNeedUserShow:u=!1,showTab:s="post",videoDetailExtraParams:c,logType:v,isDisableFetch:m}=e;return(0,t.jsx)(M.Z,{videoDetailExtraParams:c,title:n,getType:(e,i)=>i.awemeId===e&&e===(null==o?void 0:o.awemeId)?"primary":"default",isNeedUserShow:u,awemeId:null==i?void 0:i.awemeId,statusCode:null==o?void 0:o.statusCode,videoList:null==o?void 0:o.data,hasMore:null==o?void 0:o.hasMore,logType:v,getVideoParam:e=>({modeFrom:r,cursor:e.cursor,count:10,secUid:d}),fetchMore:async()=>{await l()},isAutoRelate:!1,isDisableFetch:m,children:(0,t.jsx)("p",{children:(0,t.jsxs)(N.a,{href:(0,T.HC)(d,`showTab=${s}&enter_method=more_video&vid=${null==i?void 0:i.awemeId}`),isNeedSeoOpt:!0,className:E,target:"_blank",rel:"nofollow",children:[(0,t.jsx)("span",{children:"更多作品"}),(0,t.jsx)(a.Z,{src:j.Z,color:k.COLOR_TEXT_3})]})})})},F=i("402971");let{WHALE_CUT_HEADER:V}=w,H=async function(e){let{secUid:o,cursor:i,count:t,whaleCutToken:l}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{statusCode:a,hasMore:r,cursor:d,logPb:u,data:s=[],whaleInfo:c,notLoginModule:v}=await (0,I.fetchUserPost)({userId:o,maxCursor:i,count:t,whaleCutToken:l},n),m=s;if(v&&v.guideLoginTipExist){var f,h;m=[{awemeId:C.P.NoLoginVideoGuide,awemeType:y.e.NoLoginVideoGuide,name:v.guideLoginTipText,desc:v.guideLoginTipDesc,video:{cover:v.guideLoginTipCover,duration:0},authorInfo:{uid:null==s?void 0:null===(h=s[0])||void 0===h?void 0:null===(f=h.authorInfo)||void 0===f?void 0:f.uid},stats:{commentCount:0,likeCount:0,playCount:0,shareCount:0}},...s]}return{statusCode:a,hasMore:r,cursor:d,logPb:u,data:m.filter(e=>{var o;return!(null===(o=e.tag)||void 0===o?void 0:o.inReviewing)}),whaleInfo:c}},W="userPost";function B(e){var o;let{dataInfo:i,awemeInfo:n,loadMoreCompData:a,queryParam:r,videoDetailExtraParams:d}=e||{},{userInfo:u}=(0,F.useUserInfoContext)()||{},s=(0,l.useMemo)(()=>(null==i?void 0:i.whaleDecisionCustom)===V,[i]),c=(0,l.useMemo)(()=>{var e;return null==u?void 0:null===(e=u.info)||void 0===e?void 0:e.secUid},[u]);return(0,t.jsx)(U,{dataInfo:i,awemeInfo:n,loadMoreCompData:a,videoDetailExtraParams:d,e2e:"aweme-post",title:`${c&&c===(null==r?void 0:r.secUid)?"我":"TA"}的作品`,modeFrom:W,secUid:null==n?void 0:null===(o=n.authorInfo)||void 0===o?void 0:o.secUid,showTab:"post",logType:"author_post",isDisableFetch:s})}B.checkParam=e=>{let{awemeInfo:o,queryParam:i}=e;return D({awemeInfo:o,queryParam:i})},B.getInitData=async function(e){var o,i;let{awemeInfo:t,queryParam:l,defaultCursor:n,userInfo:a}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return await P({awemeInfo:t,queryParam:l,modeFrom:W,secUid:null==t?void 0:null===(o=t.authorInfo)||void 0===o?void 0:o.secUid,defaultCursor:(null==a?void 0:null===(i=a.info)||void 0===i?void 0:i.uid)?n:0},H,r)},B.loadMoreData=async e=>{let{param:o}=e;return await A({param:o},H)};let{WHALE_CUT_HEADER:O}=w,Z=async e=>{let{secUid:o,cursor:i,count:t,whaleCutToken:l}=e,{statusCode:n,hasMore:a,cursor:r,logPb:d,data:u=[],whaleInfo:s}=await (0,I.fetchUserFavorite)({userId:o,maxCursor:i,count:t,whaleCutToken:l});return{statusCode:n,hasMore:a,cursor:r,logPb:d,data:u.filter(e=>!e.tag.inReviewing),whaleInfo:s}},$="userLike";function z(e){let{dataInfo:o,awemeInfo:i,loadMoreCompData:n,queryParam:a,videoDetailExtraParams:r}=e||{},{userInfo:d}=(0,F.useUserInfoContext)()||{},u=(0,l.useMemo)(()=>{var e;return null==d?void 0:null===(e=d.info)||void 0===e?void 0:e.secUid},[d]),s=(0,l.useMemo)(()=>(null==o?void 0:o.whaleDecisionCustom)===O,[o]);return(0,t.jsx)(U,{dataInfo:o,awemeInfo:i,loadMoreCompData:n,videoDetailExtraParams:r,title:`${u===(null==a?void 0:a.secUid)?"我":"TA"}的喜欢`,modeFrom:$,secUid:null==a?void 0:a.secUid,isNeedUserShow:!0,showTab:"like",logType:"author_like",isDisableFetch:s})}z.checkParam=e=>{let{awemeInfo:o,queryParam:i}=e;return D({awemeInfo:o,queryParam:i})},z.getInitData=async e=>{let{awemeInfo:o,queryParam:i}=e;return await P({awemeInfo:o,queryParam:i,modeFrom:$,defaultCursor:0},Z)},z.loadMoreData=async e=>{let{param:o}=e;return await A({param:o},Z)};var G=function(e){let{title:o,awemeInfo:i,relateInfo:l,loadMoreRelateInfo:n,isAutoRelate:a,videoDetailExtraParams:r}=e,{awemeId:d}=i||{};return i?(0,t.jsx)(M.Z,{e2e:"aweme-relate",title:o||"推荐视频",awemeId:d,statusCode:null==l?void 0:l.statusCode,videoList:l.data,hasMore:l.hasMore,relateInfo:l,isAutoRelate:a,isNeedUserShow:!0,videoDetailExtraParams:r,fetchMore:async e=>{await n(d,e)}}):null};let q=async e=>{let{cursor:o,count:i}=e,{statusCode:t,hasMore:l,cursor:n,logPb:a,data:r=[]}=await (0,I.fetchUserCollection)({maxCursor:o,count:i});return{statusCode:t,hasMore:l,cursor:n,logPb:a,data:r.filter(e=>!e.tag.inReviewing)}},J="userCollection";function Q(e){let{dataInfo:o,awemeInfo:i,loadMoreCompData:l,queryParam:n,videoDetailExtraParams:a}=e||{};return(0,t.jsx)(U,{dataInfo:o,awemeInfo:i,loadMoreCompData:l,videoDetailExtraParams:a,title:"我的收藏",modeFrom:J,secUid:null==n?void 0:n.secUid,isNeedUserShow:!0,showTab:"favorite_collection",logType:"favorite_collection"})}Q.checkParam=e=>{let{awemeInfo:o,queryParam:i}=e;return D({awemeInfo:o,queryParam:i})},Q.getInitData=async e=>{let{awemeInfo:o,queryParam:i}=e;return await P({awemeInfo:o,queryParam:i,modeFrom:J},q)},Q.loadMoreData=async e=>{let{param:o}=e;return await A({param:o},q)};i("268917");var X=i("791152"),Y=i("241467"),K=i("881155"),ee=i("105600"),eo=i("408749"),ei=i("612075"),et=i("770673"),el=function(e){var o,i;let{isSpider:l,awemeInfo:n,mixInfo:a,loadMoreMixInfo:r}=e,{mixId:d,currentEpisode:u,mixName:s}=(null==n?void 0:n.mixInfo)||{},v=(0,X.R)(),{userInfo:m}=(0,ei.useUserContext)(),{uid:f=""}=null!==(i=null==m?void 0:m.info)&&void 0!==i?i:{};if(!n||!d)return null;let h=e=>{var o,i,t;let l=null==a?void 0:null===(o=a.data)||void 0===o?void 0:o[e];et.Z.sendLog("collectionCoverShow",{enter_from:(0,L.yW)(),compilation_id:d,compilation_video_cnt:null==l?void 0:null===(i=l.mixInfo)||void 0===i?void 0:i.totalEpisode,author_id:null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid,group_id:null==l?void 0:l.awemeId,log_pb:null==l?void 0:l.logPb,rank:e})};return(0,t.jsx)(M.Z,{e2e:"aweme-mix",mixId:d,isAutoRelate:!1,title:null==n?void 0:null===(o=n.mixInfo)||void 0===o?void 0:o.mixName,statusCode:null==a?void 0:a.statusCode,videoList:null==a?void 0:a.data,hasMore:null==a?void 0:a.hasMore,fetchMore:async()=>{await r(d,null==a?void 0:a.cursor)},rendItem:(e,o)=>{var i,n,r,m,p;return(0,t.jsx)(Y.Z,{paidTagType:(0,K.$m)(e,(null==e?void 0:null===(i=e.authorInfo)||void 0===i?void 0:i.uid)===f),onShow:h,rank:o,isSpider:l,type:(null==e?void 0:null===(n=e.mixInfo)||void 0===n?void 0:n.currentEpisode)===u&&a.currentEpisode===u?"primary":"default",imgSrc:e.video.cover,alt:`${s}第${null==e?void 0:null===(r=e.mixInfo)||void 0===r?void 0:r.currentEpisode}集`,duration:e.video.duration,videoUrl:(0,T.JF)(e.awemeId),onClick:i=>{var t,l;et.Z.sendLog("collectionCoverClick",{enter_from:(0,L.yW)(),compilation_id:d,compilation_video_cnt:null==e?void 0:null===(t=e.mixInfo)||void 0===t?void 0:t.totalEpisode,author_id:null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,rank:o}),i.preventDefault(),window.scrollTo(0,0),v.push((0,T.$N)(e.awemeId,(0,S.stringify)((0,x._)({enter_method:(0,c.Rs)("enter_method"),fir_previous_page:(0,c.Rs)("fir_previous_page")||(0,c.Rs)("previous_page"),previous_page:(0,L.yW)()},(0,eo.U)()))))},title:`${(null==e?void 0:null===(m=e.mixInfo)||void 0===m?void 0:m.currentEpisode)&&`第${null==e?void 0:null===(p=e.mixInfo)||void 0===p?void 0:p.currentEpisode}集 `} | ${e.desc}`,diggNum:e.stats.diggCount,logType:"compilation",isUseALink:(null==e?void 0:e.isHighQuality)!==ee.HighQualityStatus.NotHighQuality})}})},en=i("702726"),ea=function(e){var o,i;let{isSpider:l,awemeInfo:n,seriesInfo:a,loadMoreSeriesInfo:r}=e,{seriesId:d,currentEpisode:u,seriesName:s}=(null==n?void 0:n.seriesInfo)||{},v=(0,X.R)(),{userInfo:m}=(0,ei.useUserContext)(),{uid:f=""}=null!==(i=null==m?void 0:m.info)&&void 0!==i?i:{};if(!n||!d)return null;let h=e=>{var o,i,t,l,n;let r=null==a?void 0:null===(o=a.data)||void 0===o?void 0:o[e];et.Z.sendLog("collectionCoverShow",{enter_from:(0,L.yW)(),compilation_id:d,compilation_video_cnt:null==r?void 0:null===(i=r.seriesInfo)||void 0===i?void 0:i.totalEpisode,author_id:null==r?void 0:null===(t=r.authorInfo)||void 0===t?void 0:t.uid,group_id:null==r?void 0:r.awemeId,log_pb:null==r?void 0:r.logPb,rank:e}),en.logInstance.sendLog("videoCoverShow",{enter_from:"playlet_video_detail",enter_from_merge:(0,L.yW)(),playlet_id:d,pay_type:(null==r?void 0:null===(l=r.seriesInfo)||void 0===l?void 0:l.isCharge)?(null==r?void 0:null===(n=r.seriesInfo)||void 0===n?void 0:n.isIaa)?"iaa":"iap":"免费",rank_num:e})};return(0,t.jsx)(M.Z,{e2e:"aweme-mix",isAutoRelate:!1,title:null==n?void 0:null===(o=n.seriesInfo)||void 0===o?void 0:o.seriesName,statusCode:null==a?void 0:a.statusCode,videoList:null==a?void 0:a.data,hasMore:null==a?void 0:a.hasMore,fetchMore:async()=>{await r(d,null==a?void 0:a.cursor)},isSeries:!0,rendItem:(e,o)=>{var i,n,r,m,p;return(0,t.jsx)(Y.Z,{paidTagType:(0,K.$m)(e,(null==e?void 0:null===(i=e.authorInfo)||void 0===i?void 0:i.uid)===f),onShow:h,rank:o,isSpider:l,type:(null==e?void 0:null===(n=e.seriesInfo)||void 0===n?void 0:n.currentEpisode)===u&&a.currentEpisode===u?"primary":"default",imgSrc:e.video.cover,alt:`${s}第${null==e?void 0:null===(r=e.seriesInfo)||void 0===r?void 0:r.currentEpisode}集`,duration:e.video.duration,videoUrl:(0,T.JF)(e.awemeId),onClick:i=>{var t,l,n,a;et.Z.sendLog("collectionCoverClick",{enter_from:(0,L.yW)(),compilation_id:d,compilation_video_cnt:null==e?void 0:null===(t=e.seriesInfo)||void 0===t?void 0:t.totalEpisode,author_id:null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,rank:o}),en.logInstance.sendLog("videoCoverClick",{enter_from:"playlet_video_detail",enter_from_merge:(0,L.yW)(),playlet_id:d,pay_type:(null==e?void 0:null===(n=e.seriesInfo)||void 0===n?void 0:n.isCharge)?(null==e?void 0:null===(a=e.seriesInfo)||void 0===a?void 0:a.isIaa)?"iaa":"iap":"免费",rank_num:o}),i.preventDefault(),window.scrollTo(0,0),v.push((0,T.$N)(e.awemeId,(0,S.stringify)((0,x._)({enter_method:(0,c.Rs)("enter_method"),fir_previous_page:(0,c.Rs)("fir_previous_page")||(0,c.Rs)("previous_page"),previous_page:(0,L.yW)()},(0,eo.U)()))))},title:`${(null==e?void 0:null===(m=e.seriesInfo)||void 0===m?void 0:m.currentEpisode)&&`第${null==e?void 0:null===(p=e.seriesInfo)||void 0===p?void 0:p.currentEpisode}集 `} | ${e.desc}`,diggNum:e.stats.diggCount,logType:"compilation",isUseALink:(null==e?void 0:e.isHighQuality)!==ee.HighQualityStatus.NotHighQuality,isSeries:!0})}})};i("250440");var er=i("55426"),ed={headerContainer:"RBBYr1Gf",container:"uodyef2W",hotScore:"FOtchbSG",title:"RQt2WTGk"};let eu=["https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top1.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top2.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top3.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top4.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top5.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top6.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top7.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top8.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top9.png","https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_top10.png"];var es=function(e){let o,{hotInfo:i,queryParam:l}=e,n=!1,a=null==i?void 0:i.type,r=Number(null==l?void 0:l.position)||(null==i?void 0:i.rank),d=Number(null==l?void 0:l.hotValue)||(null==i?void 0:i.hotScore),u=(null==l?void 0:l.trending_topic)||(null==i?void 0:i.sentence);return u?(n=!0,o=((null==l?void 0:l.position)||[0,2,14].includes(a))&&r&&r<11?eu[r-1]:"https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_text.png"):o="https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/icons/video/hot_news.png",(0,t.jsxs)("div",{className:ed.headerContainer,children:[(0,t.jsxs)("div",{className:ed.container,children:[(0,t.jsx)("img",{src:o,alt:""}),n&&d&&(0,t.jsxs)("div",{className:ed.hotScore,children:[(0,er.qe)(d)," 热度"]})]}),n&&u&&(0,t.jsx)("h1",{className:ed.title,children:u})]})};function ec(e){let{dataInfo:o,awemeInfo:i,loadMoreCompData:l,queryParam:n,videoDetailExtraParams:a}=e;return(0,t.jsx)(M.Z,{videoDetailExtraParams:a,getType:(e,i)=>i.awemeId===e&&e===(null==o?void 0:o.awemeId)?"primary":"default",isNeedUserShow:!0,awemeId:null==i?void 0:i.awemeId,statusCode:null==o?void 0:o.statusCode,videoList:null==o?void 0:o.data,hasMore:!1,logType:"trend",showOnlyChildren:!0,getVideoParam:()=>({modeFrom:"hotDetail",trending_topic:null==n?void 0:n.trending_topic,sentenceId:null==n?void 0:n.sentenceId,position:null==n?void 0:n.position,hotValue:null==n?void 0:n.hotValue}),fetchMore:async()=>{await l()},children:(0,t.jsx)(es,{hotInfo:null==i?void 0:i.hotList,queryParam:n})})}ec.checkParam=e=>{let{awemeInfo:o}=e;return(null==o?void 0:o.awemeId)?1:0},ec.loadMoreData=async(e,o)=>{let{param:i}=e;return{statusCode:0,data:[],hasMore:!1}},ec.isShowAllItem=!0;var ev=i("645789");i("950331");var em=i("484656"),ef="SBguZNwf";function eh(e){let{dataInfo:o,awemeInfo:i,loadMoreCompData:l,videoDetailExtraParams:n}=e;return(0,t.jsx)(M.Z,{videoDetailExtraParams:n,getType:(e,i)=>i.awemeId===e&&e===(null==o?void 0:o.awemeId)?"primary":"default",title:"",isAutoRelate:!1,isNeedUserShow:!0,awemeId:null==i?void 0:i.awemeId,statusCode:null==o?void 0:o.statusCode,videoList:null==o?void 0:o.data,hasMore:null==o?void 0:o.hasMore,logType:"academy",showOnlyChildren:!0,getVideoParam:e=>{let o=(0,S.parse)((0,c.ht)());return{modeFrom:"creator",order:null==o?void 0:o.order,category_id:null==o?void 0:o.category_id,limit:null==o?void 0:o.limit,offset:e.offset,is_hot:null==o?void 0:o.is_hot,is_topic:null==o?void 0:o.is_topic,type:null==o?void 0:o.type,keyword:null==o?void 0:o.keyword}},fetchMore:async()=>{await l()},children:(0,t.jsx)("div",{className:ef,children:null==o?void 0:o.categoryName})})}async function ep(e,o){let{awemeId:i,categoryId:t,order:l,limit:n,offset:a,isHot:r,isTopic:d,modeFrom:u,awemeInfo:s,type:c,keyword:v}=e,m=await o({categoryId:t,order:l,limit:n,offset:a,isHot:r,isTopic:d,type:c,keyword:v});if(0===m.statusCode){let e=m.awemeList.findIndex(e=>e.awemeId===i);m.awemeList.forEach(e=>{e.logPb=m.logPb,!m.hasMore&&(e.offset=a)});let o=!1;-1===e&&(m.awemeList.unshift(s),e=0);let f=m.awemeList[e+1];return f&&(o={relateAwemeId:i,url:(0,T.$N)(f.awemeId,(0,S.stringify)({modeFrom:u,order:l,category_id:t,limit:n,offset:f.offset,is_hot:r,is_topic:d,pre_vid:i,previous_page:(0,L.yW)(),type:c,keyword:v})),awemeId:f.awemeId,img:f.video.cover,desc:null==f?void 0:f.desc}),{statusCode:0,nextVideoInfo:o,hasMore:m.hasMore,categoryName:m.categoryName,data:m.awemeList,offset:m.offset}}return{statusCode:m.statusCode}}eh.checkParam=e=>{let{awemeInfo:o}=e;return(null==o?void 0:o.awemeId)?1:0},eh.getInitData=async e=>{let{awemeInfo:o,queryParam:i}=e,t=null==o?void 0:o.awemeId,{category_id:l,is_hot:n,is_topic:a,limit:r,offset:d,order:u,modeFrom:s,type:c,keyword:v}=i,m=await ep({awemeId:t,categoryId:l,order:u,limit:r,offset:d,isHot:n,isTopic:a,awemeInfo:o,modeFrom:s,type:c,keyword:v},em.ZY),{statusCode:f,nextVideoInfo:h,data:p}=m;return{param:{hasMore:m.hasMore,category_id:l,is_hot:n,is_topic:a,limit:r,offset:m.offset,order:u,type:c,keyword:v},nextVideoInfo:h,res:{awemeId:t,statusCode:f,hasMore:m.hasMore,data:p,categoryName:m.categoryName}}},eh.loadMoreData=async e=>{let{param:o}=e,{category_id:i,is_hot:t,order:l,limit:n,offset:a,is_topic:r,type:d,keyword:u}=o,{statusCode:s,hasMore:c,logPb:v,awemeList:m,offset:f}=await (0,em.ZY)({categoryId:i,order:l,limit:n,offset:a,isHot:t,isTopic:r,type:d,keyword:u});return 0===s&&(null==m?void 0:m.length)>0?(m.forEach(e=>{e.logPb=v}),{statusCode:0,data:m,hasMore:c,nextParam:(0,b._)((0,x._)({},o),{offset:f})}):{statusCode:-1}},eh.isShowAllItem=!1;var e_={relatedListHolder:"VFMtIaPI",downloadBar:"nNg4_5ok",downloadHint:"rnBUbiNV"},eg=i("362026"),ew={aiSmartDocContent:"VzYAqocu"};i("602157");var eC=i("398969"),ey=e=>{let{awemeInfo:o,smartdocData:i}=e,{douyinPCVideoExtraSEO:t}=o||{},n=!!(null==t?void 0:t.ai_smartdoc)&&Number(null==t?void 0:t.ai_smartdoc)===_.zY||!!(null==t?void 0:t.ai_geo_note),[a,r]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[s,c]=(0,l.useState)(()=>i?[{type:eg.v.SMARTDOC,data:i}]:null),v=e=>{if(!!e)c(e)},m=async function(){let{awemeId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null!=e?e:null==o?void 0:o.awemeId;if(!!n&&!!i){r(!0),u(null),c(null);try{if(null==t?void 0:t.ai_geo_note){let e=await (0,eC.qP)({awemeId:i});(null==e?void 0:e.statusCode)===0?v([{type:eg.v.SMARTDOC,data:{blocks:(null==e?void 0:e.description)||""}}]):u((null==e?void 0:e.statusMsg)||"服务异常，请重试")}else{let e=await (0,eC.GO)({awemeId:i,highlightVersion:Number(null==t?void 0:t.ai_smartdoc)});if((null==e?void 0:e.statusCode)===0){let o=null==e?void 0:e.aiAwemeInfos;return v(o),o}u((null==e?void 0:e.statusMsg)||"服务异常，请重试")}}catch(e){u("服务异常，请重试")}finally{r(!1)}}};return{hasAiEntry:n,loading:a,error:d,loadData:m,contentData:s}},eI=i("713097"),ex=i.n(eI),eb=i("837455"),eS=i("163665"),ek={smartDocContainer:"Ur6FMKgm",title:"evBEJsBj",smartDocList:"NT9F7ndM",loading:"M7yaiTXi",statusContainer:"tnqRDmpq"},eN="sed74_gN",eT="fohzpDa3",eL="CraSC1gs",ej=e=>{let{onRetry:o}=e;return(0,t.jsx)("div",{className:eN,children:(0,t.jsxs)("div",{className:eT,children:["服务异常，",(0,t.jsx)("span",{className:eL,onClick:o,children:"刷新"}),"拉取数据"]})})},eE=e=>{let{smartdocData:o,status:n="success",onRetry:a,className:r}=e||{},d=(0,eS.u)({importFn:()=>l.lazy(()=>Promise.all([i.e("74792"),i.e("49371")]).then(i.bind(i,373880)))}),u=(0,l.useMemo)(()=>{let e=(null==o?void 0:o.blocks)||"";return e.length<10?"":e},[o]);return(0,t.jsxs)("div",{className:ex()(ek.smartDocContainer,r),children:[(0,t.jsx)("div",{className:ek.title,children:"智能文稿"}),(0,t.jsxs)("div",{className:ek.smartDocList,children:["loading"===n&&(0,t.jsx)("div",{className:ek.statusContainer,children:(0,t.jsx)(eb.g,{text:"加载中"})}),"error"===n&&(0,t.jsx)("div",{className:ek.statusContainer,children:(0,t.jsx)(ej,{onRetry:a})}),"success"===n&&(0,t.jsx)(d,{markdown:u,fallback:(0,t.jsx)(eb.g,{text:"加载中",className:ek.loading})})]})]})},eM=i("128231"),eR=i.n(eM);function eD(){return(eD=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}i("429532");let eP=l.forwardRef(function(e,o){return l.createElement("svg",eD({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:o},e),l.createElement("path",{d:"M13.5713 1.85484C12.1138 1.85484 10.973 3.02331 10.8332 4.40077C10.7796 4.92823 10.7005 5.54292 10.5835 6.20725C10.3119 7.74962 8.86755 8.81786 7.16159 8.81786H4.75106C3.77796 8.81786 2.98939 9.60722 2.99036 10.5803L2.99899 19.2553C2.99995 20.2212 3.78317 21.0036 4.74899 21.0036H17.0561C18.8442 21.0036 20.3836 19.7411 20.7335 17.9876L22.0545 11.3689C22.3941 9.66748 21.0926 8.08062 19.3577 8.08062H15.6879C15.7774 7.70192 15.8487 7.30076 15.9066 6.90331C16.0243 6.09485 16.0941 5.2456 16.1356 4.52292C16.2214 3.03242 15.0135 1.85484 13.5713 1.85484ZM12.3255 4.55222C12.395 3.86695 12.9554 3.35484 13.5713 3.35484C14.2023 3.35484 14.6715 3.85733 14.6381 4.43674C14.5979 5.13529 14.5314 5.93746 14.4222 6.68711C14.3111 7.45012 14.163 8.10492 13.9793 8.53768C13.8811 8.76932 13.9055 9.03481 14.0444 9.24462C14.1833 9.45444 14.4181 9.58062 14.6698 9.58062H19.3577C20.1463 9.58062 20.7379 10.3019 20.5835 11.0753L19.2625 17.694C19.0526 18.7461 18.1289 19.5036 17.0561 19.5036H8.5L8.50001 10.1496C10.2504 9.70233 11.7231 8.38518 12.0608 6.46735C12.185 5.76183 12.2689 5.11044 12.3255 4.55222ZM7.00001 10.3179L7 19.5036H4.74899C4.61101 19.5036 4.49913 19.3918 4.49899 19.2538L4.49036 10.5788C4.49021 10.4347 4.60698 10.3179 4.75106 10.3179H7.00001Z",fill:"currentColor"}))});eP.elementType="Icon";function eA(){return(eA=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}let eU=l.forwardRef(function(e,o){return l.createElement("svg",eA({viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:o},e),l.createElement("g",{clipPath:"url(#clip0_7533_32648)"},l.createElement("path",{d:"M7.64258 0.608399C8.67356 0.608638 9.54502 1.45119 9.47363 2.52344C9.43675 3.07631 9.37044 3.75614 9.24121 4.34375L10.9785 4.34375C12.1376 4.34389 13.0071 5.40428 12.7803 6.54102L12.0068 10.417C11.7945 11.4808 10.8602 12.2471 9.77539 12.2471L4 12.2471L4 4.84766L4.19629 4.84766C4.85457 4.72826 5.36778 4.26655 5.4873 3.65234C5.57303 3.21167 5.63176 2.79511 5.67188 2.43164C5.78043 1.44858 6.59606 0.608399 7.64258 0.608399ZM3 12.2471L2.62598 12.2471C1.85338 12.2471 1.22645 11.6212 1.22559 10.8486L1.22168 6.39844C1.22092 5.55914 1.90092 4.87793 2.74023 4.87793L3 4.87793L3 12.2471Z",fill:"#00CCC4"})),l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_7533_32648"},l.createElement("rect",{width:14,height:14,fill:"white"}))))});eU.elementType="Icon";var eF=i("254897"),eV=i("516599"),eH={aiSmartDocFooter:"lejDN359",title:"nvpNE5Bu",actionContainer:"yXZd_5zz",action:"tS0zBjDR",active:"b8N81iAr",icon:"Gl4YhmDU"},eW=i("134761");i("779788");var eB={Init:0,0:"Init",Active:1,1:"Active"};class eO{static getInstance(){return!eO.instance&&(eO.instance=new eO),eO.instance}getAllData(){var e;if(!(null===(e=window)||void 0===e?void 0:e.localStorage))return{};let o=localStorage.getItem(this.storageKey);if(o)try{let e=JSON.parse(o);if("object"==typeof e&&null!==e)return e}catch(e){}return{}}setAllData(e){var o;if(!!(null===(o=window)||void 0===o?void 0:o.localStorage))localStorage.setItem(this.storageKey,JSON.stringify(e))}getData(e){let o=this.getAllData()[e];return o?{like:1===o.like?1:0,dislike:1===o.dislike?1:0}:{like:0,dislike:0}}setData(e,o){let i=this.getAllData();i[e]=o,this.setAllData(i)}getAction(e,o){return this.getData(e)[o]}setAction(e,o,i){let t=this.getData(e);t[o]=i,1===i&&("like"===o?t.dislike=0:t.like=0),this.setData(e,t)}constructor(){(0,eW._)(this,"storageKey","AI_Smart_Doc_ACTIONS")}}(0,eW._)(eO,"instance",void 0);let eZ=eO.getInstance();var e$=i("544933");let ez=e=>{var o;return{group_id:null==e?void 0:e.awemeId,author_id:null==e?void 0:null===(o=e.authorInfo)||void 0===o?void 0:o.uid,content:"GEO"}};var eG=new e$.h({aiHighlightShow:{eventName:"ai_highlight_show",params:{enter_from:"",enter_method:"",group_id:"",author_id:"",content:""}},highlightLikeClick:{eventName:"highlight_like_click",params:{enter_from:"",enter_method:"",type:"",group_id:"",author_id:"",content:"",prompt_id:"0"}}}),eq=e=>{let{className:o,awemeInfo:i,container:n}=e,{awemeId:a}=i||{},[r,d]=(0,l.useState)(a?eZ.getAction(a,"like"):void 0),[u,s]=(0,l.useState)(a?eZ.getAction(a,"dislike"):void 0),c=e=>{let o=ez(i);eG.sendLog("highlightLikeClick",(0,x._)({enter_from:(0,v.vM)()||"",type:e,enter_method:"detail_page"},o))},m=(0,l.useMemo)(()=>eR()(()=>{let e=r===eB.Active?eB.Init:eB.Active;eZ.setAction(a,"like",e),d(e),s(eB.Init),c(e===eB.Active?"like":"cancel_like"),e&&eV.F.info("感谢您的反馈",n)},200),[a,r,n]),f=(0,l.useMemo)(()=>eR()(()=>{let e=u===eB.Active?eB.Init:eB.Active;eZ.setAction(a,"dislike",e),s(e),d(eB.Init),c(e===eB.Active?"dislike":"cancel_dislike"),e&&eV.F.info("感谢您的反馈",n)},200),[a,u,n]);return((0,l.useEffect)(()=>{a&&(d(eZ.getAction(a,"like")),s(eZ.getAction(a,"dislike")))},[a]),a)?(0,t.jsxs)("div",{className:ex()(eH.aiSmartDocFooter,o),children:[(0,t.jsx)("div",{className:eH.title,children:"内容由 AI 生成"}),(0,t.jsxs)("div",{className:eH.actionContainer,children:[(0,t.jsxs)("div",{className:ex()(eH.action,r&&eH.active),onClick:m,children:[!r&&(0,t.jsx)(eF.z,{className:eH.icon,svg:(0,t.jsx)(eP,{})}),!!r&&(0,t.jsx)(eF.z,{className:eH.icon,svg:(0,t.jsx)(eU,{})})]}),(0,t.jsxs)("div",{className:ex()(eH.action,u&&eH.active),onClick:f,children:[!u&&(0,t.jsx)(eF.z,{style:{transform:"rotate(-180deg)"},className:eH.icon,svg:(0,t.jsx)(eP,{})}),!!u&&(0,t.jsx)(eF.z,{style:{transform:"rotate(-180deg)"},className:eH.icon,svg:(0,t.jsx)(eU,{})})]})]})]}):null},eJ=e=>{let{awemeInfo:o,smartdocData:i}=e,n=(0,l.useRef)(null),{loading:a,error:r,loadData:d,contentData:u,hasAiEntry:s}=ey({awemeInfo:o,smartdocData:i});return(0,l.useEffect)(()=>{if(s){i||d();let e=ez(o);eG.sendLog("aiHighlightShow",(0,x._)({enter_from:(0,v.vM)()||"",enter_method:"detail_page"},e))}},[s]),(()=>{if(s){var e,i;let l;l=a?"loading":r?"error":"success";let s=null==u?void 0:null===(i=u.find)||void 0===i?void 0:null===(e=i.call(u,e=>e.type===eg.v.SMARTDOC))||void 0===e?void 0:e.data;return(0,t.jsxs)("div",{className:ew.aiSmartDocContent,ref:n,children:[(0,t.jsx)(eE,{smartdocData:s,status:l,onRetry:()=>d()}),(0,t.jsx)(eq,{awemeInfo:o,container:null==n?void 0:n.current})]})}return null})()};let eQ=(0,l.forwardRef)((e,o)=>(0,t.jsx)("svg",(0,b._)((0,x._)({width:109,height:126,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:o},e),{children:(0,t.jsx)("path",{opacity:".06",d:"M92.714 25.257A30.218 30.218 0 0 1 79.604 5.5a30.376 30.376 0 0 1-.507-5.5H57.609l-.038 86.81c-.359 9.719-8.297 17.522-18.026 17.522-3.022 0-5.87-.762-8.378-2.091-5.747-3.053-9.685-9.127-9.685-16.118 0-10.039 8.106-18.21 18.063-18.21 1.858 0 3.641.312 5.332.843V46.644c-1.746-.237-3.517-.387-5.332-.387C17.741 46.257 0 64.142 0 86.13c0 13.49 6.688 25.426 16.887 32.642C23.308 123.316 31.123 126 39.55 126c21.81 0 39.552-17.885 39.552-39.871V42.106c8.428 6.1 18.75 9.689 29.897 9.689V30.133a29.575 29.575 0 0 1-16.286-4.876z",fill:"#323442"})}))),eX=(e,o)=>{let i=null;switch(null==e?void 0:e.modeFrom){case"userPost":i=B;break;case"userLike":i=z;break;case"userCollection":i=Q;break;case"hotDetail":i=ec;break;case"creator":i=eh}return o&&!i&&(i=B),i},eY=e=>{let{className:o}=e;return(0,t.jsxs)("div",{className:e_.relatedListHolder,children:[(0,t.jsx)(a.Z,{className:o,src:eQ,width:109,height:126,viewBox:"0 0 109 126"}),(0,t.jsx)("p",{children:"抖音，记录美好生活"})]})};function eK(e){var o,i,a;let{isSpider:w,awemeId:C,awemeInfo:y,isSmallScreen:I,mixInfo:x,loadMoreMixInfo:b,seriesInfo:S,loadMoreSeriesInfo:k,relateInfo:N,loadMoreRelateInfo:T,awemelogPb:L,queryParam:j,CompHandle:E,compInfo:M,loadMoreCompData:R,isAutoRelate:D,abtestData:P,isShow:A=!1,hideRelatedList:U=!1,hidePlaceholder:V=!1,reportExtraParams:H={},seoRelatedModuleList:W=[],seoAiSmartdocInfo:B,children:O}=e,[Z,$]=(0,l.useState)(!1),z={author_id:null==y?void 0:null===(o=y.authorInfo)||void 0===o?void 0:o.uid,group_id:null==y?void 0:y.awemeId,log_pb:L,relation:null==H?void 0:H.relation},q=(0,F.useUserInfoContext)(),{isLogin:J}=null==q?void 0:q.userInfo;return(0,l.useEffect)(()=>{var e,o;let i=decodeURIComponent((null!==(o=(0,s.$o)(m.LocalStorageKeys.mockSmartDocReferrer))&&void 0!==o?o:{}).referrer||""),t=(0,c.Rs)("source")||"",l=i||(null===(e=document)||void 0===e?void 0:e.referrer)||"";$((0,_.Rz)({referrer:l,source:t}))},[]),(0,t.jsxs)("div",{"data-e2e":"related-video",children:[(0,t.jsx)(g.Z,{awemeInfo:y,abtestData:P,videoDetailExtraParams:z,isShow:A}),(0,t.jsx)(r.i,{}),J&&((0,f.Jo)()||(0,f.G1)())&&A&&(0,t.jsx)(d.eD,{className:e_.downloadBar,textContainerClassName:e_.downloadHint,hintText:"下载客户端，桌面快捷访问",log:{enterFrom:(0,v.vM)(),type:"video_detail_button",channelId:h.g.VideoDetail},defaultShow:!1,isLogin:J}),O,!w&&!(0,u.p)(y)&&Z&&(0,t.jsx)(eJ,{awemeInfo:y,smartdocData:B}),w&&!(0,u.p)(y)&&B&&(0,t.jsx)(eE,{smartdocData:B}),w?(0,t.jsx)(t.Fragment,{children:null==W?void 0:W.map((e,o)=>(0,t.jsx)(ev.Z,{title:null==e?void 0:e.moduleTitle,isSpider:w,awemeInfo:y,seoAwemeList:null==e?void 0:e.list,isNeedUserShow:null==e?void 0:e.isShowUserUrl,videoDetailExtraParams:z},o))}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.SV,{Slardar:p.oe,children:[!(E&&M.isCanShow)&&!!(null==y?void 0:null===(i=y.seriesInfo)||void 0===i?void 0:i.seriesId)&&(0,t.jsx)(ea,{isSpider:w,awemeInfo:y,seriesInfo:S,loadMoreSeriesInfo:k,videoDetailExtraParams:z}),!(E&&M.isCanShow)&&!(null==y?void 0:null===(a=y.seriesInfo)||void 0===a?void 0:a.seriesId)&&(0,t.jsx)(el,{isSpider:w,awemeInfo:y,mixInfo:x,loadMoreMixInfo:b,videoDetailExtraParams:z}),E&&M.isCanShow&&(0,t.jsx)(E,{awemeInfo:y,queryParam:j,dataInfo:M,loadMoreCompData:R,videoDetailExtraParams:z})]}),U?!V&&!U&&(0,t.jsx)(eY,{}):(0,t.jsx)(n.SV,{Slardar:p.oe,children:(0,t.jsx)(G,{awemeInfo:y,relateInfo:N,loadMoreRelateInfo:T,isAutoRelate:D,videoDetailExtraParams:z})})]})]})}},963496:function(e,o,i){i.d(o,{BU:function(){return h},Bf:function(){return p},JF:function(){return _},Rz:function(){return w},aT:function(){return f},m7:function(){return m},mI:function(){return v},zY:function(){return C}}),i(874386),i(268917),i(981168),i(673554),i(784246),i(242079),i(851912),i(826893),i(927234),i(284961),i(954372),i(563097);var t=i(738712),l=i.n(t);i(88648);var n=i(439837),a=i.n(n),r=i(533804),d=i(136808),u=i(746864),s=i(687297),c=i(14108);let v=["https://www.baidu.com","https://www.bing.com","https://cn.bing.com","https://www.google.com","https://www.google.com.hk","https://www.sogou.com","https://www.so.com"],m=(e,o)=>{let i=(null==e?void 0:e.filter(e=>0===e.type||1===e.type))||[],t=(null==o?void 0:o.trim().length)||0;return!(i.length>1)&&0!==i.length&&t===i[0].end-i[0].start},f=e=>{let o=a()(Date.now());if(!e||isNaN(e))return 0;let i=a()(1e3*e);return o.valueOf()<i.add(1,"day").valueOf()?1:o.valueOf()<i.add(7,"day").valueOf()?2:o.valueOf()<i.add(30,"day").valueOf()?3:o.valueOf()>=i.add(30,"day").valueOf()?4:0},h=e=>{let{keywordSource:o,ocrContentLen:i,textExtra:t,itemTitle:l,isHotAuthor:n}=e,[a,d]=[1,1],u=(null==t?void 0:t.filter(e=>1===e.type))||[],s=(null==t?void 0:t.filter(e=>0===e.type))||[];return o===r.F.Hot?{detailCode:1001,policyCode:100}:o&&o!==r.F.Hot&&o!==r.F.Default?{detailCode:2001,policyCode:101}:m(t,l)&&1===u.length?{detailCode:3001,policyCode:i<30?102:103}:m(t,l)&&1===s.length?{detailCode:3002,policyCode:i<30?104:105}:l&&l.length<6?{detailCode:3003,policyCode:i<30?106:107}:l?n?{detailCode:4001,policyCode:110}:{detailCode:a,policyCode:d}:{detailCode:3004,policyCode:i<30?108:109}};function p(e,o){return(null==e?void 0:e.modeFrom)===d.MODE_FROM||o===d.MODE_FROM}function _(e){let{awemeType:o,awemeId:i}=e;return o===u.e.XgVideo?(0,c.Tl)({videoid:i}):o===u.e.Note?(0,c.Wr)(i):(0,c.JF)(i)}let g=(e,o)=>{let{browserName:i,browserVersion:t}=e;switch(!o&&(o={Chrome:"69.0.0.0",Edge:"79.0.0.0",Safari:"11.0.0.0",Firefox:"78.0.0.0",Opera:"51.0.0.0"}),i){case"Chrome":return(0,s.y)(t,">",o.Chrome);case"Edge":return(0,s.y)(t,">",o.Edge);case"Safari":return(0,s.y)(t,">",o.Safari);case"Firefox":return(0,s.y)(t,">",o.Firefox);case"Opera":return(0,s.y)(t,">",o.Opera);default:return!0}},w=e=>{var o,i,t;let{referrer:n,source:a}=e,r=RegExp(`^https?://([^/:]+\\.)?(${"doubao.com|yuanbao.tencent.com|kimi.com|kimi.moonshot.cn|www.n.cn|xinghuo.xfyun.cn|yiyan.baidu.com|perplexity.ai|gemini.google.com|chatgpt.com|ai.quark.cn|baidu.com|so.com|sogou.com|bing.com|google.com|sm.cn|deepseek.com|chat.baidu.com|quark.cn".replace(/\./g,"\\.")})`,"i"),d=new(l())((null===(o=navigator)||void 0===o?void 0:o.userAgent)||"").getResult(),u=null==d?void 0:null===(i=d.browser)||void 0===i?void 0:i.name,s=null==d?void 0:null===(t=d.browser)||void 0===t?void 0:t.version;return r.test(n)&&/(bot|spider|user|Extended|deepseek)/i.test(a)&&g({browserName:u||"",browserVersion:s||""})},C=3},770673:function(e,o,i){var t=i(520739),l=i(878389),n=i(485294),a=i(544933);let r=(0,l._)((0,t._)({},n.S),{clickCommentButton:(0,l._)((0,t._)({},n.S.clickCommentButton),{params:(0,l._)((0,t._)({},n.S.clickCommentButton.params),{playlet_id:"",is_trailer:0,module:"",payment_status:0,episode_id:"",episode_rank:0,fir_previous_page:""})}),hover_like_icon:{eventName:"hover_like_icon",params:{enter_from:""}},hover_comment_icon:{eventName:"hover_comment_icon",params:{enter_from:""}},hover_favorite_video_icon:{eventName:"hover_favorite_video_icon",params:{enter_from:""}},hover_share_icon:{eventName:"hover_share_icon",params:{enter_from:""}},compilationDropDownMenuClick:{eventName:"compilation_drop_down_menu_click",params:{compilation_id:""}},compilationClickMore:{eventName:"compilation_click_more",params:{compilation_id:""}},collectionCoverShow:{eventName:"video_cover_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",compilation_id:"",compilation_video_cnt:0,type:"compilation",rank:0,aweme_type:""}},collectionCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",compilation_id:"",compilation_video_cnt:0,type:"compilation",rank:0,aweme_type:""}},videoCoverShow:{eventName:"video_cover_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",type:"related_video",rank:0,trending_topic:"",relation:"",video_detail_aweme_type:0,aweme_type:""}},videoCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",type:"related_video",rank:0,trending_topic:"",relation:"",video_detail_aweme_type:0,aweme_type:""}},like:{eventName:"like",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",from_follow_list:"0"}},cancelLike:{eventName:"cancel_like",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",item_duration_ms:0}},shareMenuShow:{eventName:"share_menu_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0"}},shareVideo:{eventName:"share_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",type:"",is_full_screen:"0",from_follow_list:"0",aweme_type:""}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",relation:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",relation:""}},relatedVideoListEmpty:{eventName:"related_video_list_empty",params:{group_id:"",enter_from:"video_detail"}},relatedVideoImprCnt:{eventName:"related_video_impr_cnt",params:{rank:0,enter_from:"video_detail",raw_count:0,filter_count:0,group_id:""}},clickAwemeLogo:{eventName:"click_aweme_logo",params:{enter_from:""}},clickMusicDetail:{eventName:"click_music_detail",params:{music_id:"",enter_from:"video_detail"}},hoverAuthorHead:{eventName:"hover_author_head",params:{enter_from:"",click_from:""}},personalShieldAlbumShow:{eventName:"personal_shield_album_show",params:{enter_from:"",tab_name:"",to_user_id:""}}});o.Z=new a.h(r)},482092:function(e,o,i){i.d(o,{x:function(){return c}});var t=i(520739),l=i(878389);i(413806),i(826893),i(954372),i(675373);var n=i(105600),a=i(598053),r=i(480596),d=i(577094),u=i(782563);let s=/^\/video|user|hashtag\/.*?/;async function c(e,o){let i=await a.get({key:r.TccKey.PovertyContentConfig,defaultValue:r.TCC_DEFAULT_VALUE_MAP.get(r.TccKey.PovertyContentConfig),ctx:o}),c=window.location.pathname;if(0===i.openApi||!(0,u._Q)(o)||(0,u.We)(o)||!e||0===e.length||!s.test(c))return e;let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;return e.map(e=>`${o}_${e.awemeId}`).join(" ")}(e,2),m=e,f=await (0,d.Ts)(v,o);return 0===f.statusCode&&(m=function(e,o){let i=o.map(e=>(0,l._)((0,t._)({},e),{targetId:e.targetId.split("_")[1]}));return e.map(e=>{var o;let a=i.find(o=>o.targetId===e.awemeId);return(0,l._)((0,t._)({},e),{isHighQuality:null!==(o=null==a?void 0:a.hitStatus)&&void 0!==o?o:n.HighQualityStatus.HighQuality})})}(e,f.data)),m}},241467:function(e,o,i){i.d(o,{O:function(){return S},Z:function(){return b}});var t=i(520739),l=i(878389);i(413806),i(826893);var n=i(563097),a=i(88648),r=i(713097),d=i.n(r),u=i(410665),s=i(746864),c=i(55426),v=i(330746),m=i(187037),f=i(304036),h=i(900674),p=i(782928),_=i(288867),g=i(473677),w=i(422959),C=i(456128),y=i(906499),I=i(417069),x=i(881155);function b(e){let{imgSrc:o,videoUrl:i,title:r,diggNum:f,duration:b,type:S="default",onClick:k,onShow:N,rank:T,userName:L,userUrl:j,debugInfo:E,isSpider:M,alt:R,className:D,target:P="",logType:A,isUseALink:U=!0,showCover:F=!0,isSeries:V=!1,paidTagType:H="",name:W="",awemeType:B=0}=e,O=(0,u.x)(N&&N.bind(null,T)),{renderTextWithTag:Z}=(0,a.useContext)(h.v)||{},$=M?{isUseALink:!1}:{isUseALink:U,href:i,target:P,rel:"nofollow"};return(0,n.jsxs)("div",{ref:O,className:d()(p.default.container,D,{[p.default[S]]:!!p.default[S]}),children:[(!M||F)&&(0,n.jsxs)("div",{className:d()(p.default.imgCt,{[p.default.isSeries]:V}),children:[(0,n.jsxs)(I.B,(0,l._)((0,t._)({onClick:k,style:{position:"static"},isNeedSeoOpt:!0},$),{children:[(0,n.jsx)(C.Q,{src:o,iconWidth:52,iconHeight:60,withBlurBg:!0,isSpider:M,alt:R||r||"",useMonitor:"compilation"!==A}),(0,n.jsx)(x.zx,{type:H}),(0,n.jsx)("div",{className:p.default.bottomMask}),b&&(0,n.jsx)("div",{className:p.default.duration,children:(0,c.$y)(b)}),!M&&(0,n.jsxs)("div",{className:p.default.playLoadingWrap,children:[(0,n.jsxs)("div",{className:p.default.playLoadingAniWrap,children:[(0,n.jsx)("div",{className:p.default.playLoading}),(0,n.jsx)("div",{className:p.default.playingLoading})]}),(0,n.jsx)("div",{className:p.default.playLoadingText,children:"播放中"})]}),B===s.e.NoLoginVideoGuide&&(0,n.jsxs)("div",{className:p.default.nologinVideoWrap,children:[(W||"看更多\n最新作品").split("\n").map(e=>(0,n.jsx)("div",{className:p.default.nologinVideoText,children:e},e)),(0,n.jsx)("div",{className:p.default.nologinVideoBtn,children:"登录"})]})]})),E&&(0,n.jsx)(_.W,{req:null==E?void 0:E.web_debug_req,video:null==E?void 0:E.client_rec_debug_info})]}),(0,n.jsxs)("div",{className:p.default.descCt,children:[(0,n.jsx)("h3",{children:(0,n.jsx)(I.B,{href:i,className:p.default.title,onClick:k,isNeedSeoOpt:!0,target:P,isUseALink:U,children:(0,n.jsx)(w.Z,{text:r,renderTextWithTag:Z,seoInfo:{isSpider:M,awemeId:null}})})}),(0,n.jsxs)("div",{className:p.default.bottomWrap,children:[B!==s.e.NoLoginVideoGuide&&(0,n.jsxs)("span",{className:p.default.diggNumWrap,children:[(0,n.jsx)(g.Z,{src:m.Z,width:20,height:20,viewBox:"0 0 36 36",needRenderInSSR:!1}),(0,n.jsx)("span",{className:p.default.diggNum,children:(0,c.qe)(f)})]}),L&&j&&(0,n.jsx)("span",{className:d()(p.default.userName,{[p.default.isFireFox]:(0,v.vU)()}),children:(0,n.jsx)(y.a,{href:j,isNeedSeoOpt:M,target:"_blank",children:(0,n.jsx)(w.Z,{text:L,seoInfo:{isSpider:M,awemeId:null}})})})]})]})]})}function S(e){let{className:o,isSeries:i=!1}=e||{};return(0,n.jsxs)("div",{className:d()(p.default.container,p.default.skeleton,o),children:[(0,n.jsx)("div",{className:d()(p.default.imgCt,{[p.default.isSeries]:i}),children:(0,n.jsx)(f.Z,{})}),(0,n.jsxs)("div",{className:p.default.descCt,children:[(0,n.jsx)("div",{className:p.default.long}),(0,n.jsx)("div",{className:p.default.long}),(0,n.jsx)("div",{className:p.default.long}),(0,n.jsx)("div",{className:p.default.small})]})]})}},185791:function(e,o,i){i.d(o,{x:function(){return f}});var t=i(520739),l=i(368200);i(874386),i(675373);var n=i(88648),a=i(734123),r=i(746864),d=i(637005),u=i(658065),s=i(63976),c=i(422784);let v="",m=null,f=e=>{var o;let{awemeInfo:i,enablePreload:f,player:h}=e,[p,_]=(0,n.useState)((null==i?void 0:null===(o=i.stats)||void 0===o?void 0:o.commentCount)||0);(0,n.useEffect)(()=>{var e;_((null==i?void 0:null===(e=i.stats)||void 0===e?void 0:e.commentCount)||0)},[i]);let g=(0,n.useCallback)(async function(e,o,t,l,n,a){let d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=null==i?void 0:i.awemeId,c=`${u}-0-${o}-${e}-${n}-${t}`;if(v===c&&m)return m;let f=await (0,s.iq)({awemeId:null==i?void 0:i.awemeId,cursor:e,count:o,itemType:(null==i?void 0:i.awemeType)===r.e.XgVideo?1:0,fetchType:t,cancleFunc:l,cid:n,whaleCutToken:a});return d&&f&&(v=c,m=f),f},[null==i?void 0:i.awemeId]),w=(0,n.useCallback)((e,o,t,l)=>(0,s.rs)({awemeId:null==i?void 0:i.awemeId,commentId:e,cursor:o,count:t,itemType:(null==i?void 0:i.awemeType)===r.e.XgVideo?1:0,whaleCutToken:l}),[null==i?void 0:i.awemeId]),C=(0,n.useCallback)(function(){let{cursor:e=0,count:o,needPage:t=!0,ctx:l=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.Yp)({cursor:e,count:o,needPage:t,ctx:l,groupId:null==i?void 0:i.awemeId})},[null==i?void 0:i.awemeId]),y=(0,n.useCallback)(function(){let{cid:e,diggType:o,level:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.y6)({awemeId:null==i?void 0:i.awemeId,cid:e,diggType:o,itemType:(null==i?void 0:i.awemeType)===r.e.XgVideo?1:0,level:t})},[null==i?void 0:i.awemeId]),I=(0,n.useCallback)(function(){let{cid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.YF)({cid:e})},[]);return{globalCommentCount:p,updateGlobalCommentCount:_,fetchComment:g,fetchReply:w,fetchCommentMention:C,publishCommentItem:(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o,n,{text:r,textExtra:v,replyId:m,replyToReplyId:f,commentSendCelltime:p,commentVideoCelltime:_}=e,g=(0,l._)(e,["text","textExtra","replyId","replyToReplyId","commentSendCelltime","commentVideoCelltime"]);let w=await (0,s.uo)((0,t._)({awemeId:null==i?void 0:i.awemeId,text:r,textExtra:v,replyId:m,replyToReplyId:f,commentVideoCelltime:_,commentSendCelltime:p},g));return!w.statusCode&&(d.emit(d.EVENT.showClientDownloadGuide,{isShow:!0,type:"comment",text:"及时接收互动消息通知"}),null==h||h.emit(a.Events.USER_ACTION,{action:"comment"}),c.Z.sendLog("post_comment_finish",{enter_from:(0,u.yW)(),group_id:null==i?void 0:i.awemeId,comment_panel_position:"sidebar",comment_id:(null==w?void 0:null===(o=w.comment)||void 0===o?void 0:o.cid)||"",comment_category:(null==w?void 0:null===(n=w.comment)||void 0===n?void 0:n.replyId)==="0"?"original":"reply",play_current_time:Math.floor((null==h?void 0:h.currentTime)||0)})),w},[null==i?void 0:i.awemeId,h]),deleteCommentItem:I,diggCommentItem:y}}},587526:function(e,o,i){i.d(o,{U:function(){return s}}),i(250440),i(675373);var t=i(116253),l=i(79307),n=i(480596),a=i(823685),r=i(227266);let d=(0,r.fF)("CommentPreload"),u=[a.CommentAIPreloadStatus.CommentPreloadHighThreshold,a.CommentAIPreloadStatus.CommentPreloadLowThreshold,a.CommentAIPreloadStatus.CommentPreloadAll],s=e=>{let{isModal:o,awemeInfo:s,isActive:c,fetchComment:v,player:m,commentpreloadAbStatus:f,adCommentpreloadAbStatus:h,scene:p,showSideCard:_,abtestData:g,abUseSimpleNN:w,abVid:C}=e;(0,t.b)(async()=>{if(!!(u.includes(f)&&p===l.lT.Recommend&&!1===o&&!0===c&&(null==m?void 0:m.currentTime)>=0&&!1===_)&&((null==s?void 0:s.isAds)!==!0||!![a.AdCommentAIPreloadStatus.AdCommentPreloadHighThreshold,a.AdCommentAIPreloadStatus.AdCommentPreloadLowThreshold].includes(h))&&"undefined"!=typeof WebAssembly)try{let e=()=>{let e=(null==g?void 0:g.commentRenderOptimize)===2?10:20;v(0,e,"user",{current:null},"",void 0,!0)},o=!(null==s?void 0:s.isAds)&&w,{Pylon:t,EScene:l,EBiz:u}=await i.e("74770").then(i.bind(i,198991)),c=new t({biz:u.DOUYIN_WEB_RECOMMEND}),p=f===a.CommentAIPreloadStatus.CommentPreloadHighThreshold?n.TccKey.CommentPreloadHighThreshold:n.TccKey.CommentPreloadLowThreshold;h===a.AdCommentAIPreloadStatus.AdCommentPreloadHighThreshold?p=n.TccKey.AdCommentPreloadHighThreshold:h===a.AdCommentAIPreloadStatus.AdCommentPreloadLowThreshold&&(p=n.TccKey.AdCommentPreloadLowThreshold),o&&(p=n.TccKey.clientAIOptimizeConfig);let _=await (0,r.aW)(p),y=c.createStrategyEngine({abConfig:_,scene:l.COMMENT});y.setThresholdCallback(async()=>{var i,t,n,a,u,v,f,h;if(r.cy.getPreloadCache(r.mM.COMMENT_BTN_CLICKED))return;let{package:p="",engine_config:g={}}=null!==(f=_.preload_ml)&&void 0!==f?f:{},w=await c.createEngine({scene:l.COMMENT,modelUrl:p,inputs:null==g?void 0:g.inputs,outputs:null==g?void 0:g.outputs,runTime:o?"simplenn":"bytenn"}),I=1e3*((null==m?void 0:m.currentTime)||0),x=w.inference({features:{videoPlayTime:I}}),b=y.hitThresholdValue(x),S=null==_?void 0:null===(i=_.preload_ml)||void 0===i?void 0:i.package,k=null==_?void 0:null===(u=_.preload_ml)||void 0===u?void 0:null===(a=u.output)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:null===(t=n.args)||void 0===t?void 0:t[0],N=null!==(h=w.getFeatureVector({features:{scene:l.COMMENT,videoPlayTime:I}}))&&void 0!==h?h:[];if((0,r.zo)(x,b,r.vV.COMMENT_PRELOAD,S,k,N,0,C),d("comment-ret:",x,",hit:",b,", nickname:",null==s?void 0:null===(v=s.authorInfo)||void 0===v?void 0:v.nickname,", playTime: ",I),b){e();return}})}catch(e){d("comment inference error: ",e)}},[c,m])}},123407:function(e,o,i){i.d(o,{Cu:function(){return c},nW:function(){return v}});var t=i(520739),l=i(878389);i(874386);var n=i(88648),a=i(337499);i(35730);var r=i(782442),d=i(637005);i(555106),i(744121),i(597321),i(631493);var u=i(151681);let s=e=>({[a.L.Author]:a.t.Author,[a.L.Mix]:a.t.Mix,[a.L.Series]:a.t.Series,[a.L.Search]:a.t.Search,[a.L.CollectFolder]:a.t.CollectFolder,[a.L.Collection]:a.t.Collection,[a.L.Hot]:a.t.Hot,[a.L.Related]:a.t.Related,[a.L.Search]:a.t.Search,[a.L.Record]:a.t.Record,[a.L.Like]:a.t.Like})[e],c=e=>({[a.t.Author]:a.L.Author,[a.t.Mix]:a.L.Mix,[a.t.Series]:a.L.Series,[a.t.Search]:a.L.Search,[a.t.CollectFolder]:a.L.CollectFolder,[a.t.Collection]:a.L.Collection,[a.t.Hot]:a.L.Hot,[a.t.Related]:a.L.Related,[a.t.Like]:a.L.Like,[a.t.Record]:a.L.Record})[e],v=e=>{let{defaultTab:o,isActive:i,stopAutoPlay:c,awemeInfo:v,abtestData:m,showSideCard:f}=e,{awemeFeed:h}=(0,u.j)(),[p,_]=(0,n.useState)(o),[g,w]=(0,n.useState)(s(p)),[C,y]=(0,n.useState)(()=>{if(s(p))return{[s(p)]:v}}),I=(0,n.useRef)(o),x=(0,n.useRef)(!1);I.current=p;let b=(0,n.useCallback)(e=>{let{tab:o,from:i}=e;if(I.current=o,h.dispatch("cardType",o),void 0!==s(o)&&h.dispatch("feedType",o),_(e=>{var t;return null===(t=r.Le.getConfig(r.gI.IsInLookMiniModal))||void 0===t||t.isInMiniModal,e!==o&&"auto"!==i&&(null==c||c()),o}),o!==a.L.Comment&&d.emit(d.EVENT.changeTab,o),o){let e=r.Le.getConfig(r.gI.PlayerCardInfo);r.Le.setConfig(r.gI.PlayerCardInfo,{isActive:!0,videoCardType:o!==a.L.Comment?o:null==e?void 0:e.videoCardType,expandCardType:o})}},[c]);return(0,n.useEffect)(()=>{i&&o&&_(o)},[i]),(0,n.useEffect)(()=>{p&&w(e=>{if(p===a.L.Comment)return(!(null==m?void 0:m.slideOptimize)||f)&&y(o=>(0,l._)((0,t._)({},o),{[e]:v})),e;let o=s(p);return o!==e?o:((!(null==m?void 0:m.slideOptimize)||f)&&y(o=>(0,l._)((0,t._)({},o),{[e]:v})),e)})},[p,v,f]),(0,n.useEffect)(()=>{var e;let o=null===(e=r.Le.getConfig(r.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal;o&&(x.current=o),i&&r.Le.setConfig(r.gI.IsInMixCard,!1)},[p,i]),{curTab:p,curTabRef:I,changeTab:b,curVideoFeed:s(p)||g,lastVideoFeedAweme:C}}},711054:function(e,o,i){i.d(o,{B:function(){return v}});var t=i(520739),l=i(878389),n=i(88648),a=i(337499),r=i(79307),d=i(637005),u=i(782442),s=i(63976),c=i(185791);let v=e=>{let{awemeInfo:o,customProps:i,reportParams:v,fullScreenTarget:m,tab:f,showSideCard:h,player:p,scrollElRef:_,followStatus:g,handleCommentClick:w,isShowRelatedCard:C,isActive:y,isUpperFeed:I=!1,globalIsCommentTrayPushGuideShow:x,globalCommentTrayPushGuideType:b,setCommentTrayPushGuideTypeFunc:S,setIsCommentTrayPushGuideShowFunc:k,onSearchTextClick:N,scene:T}=e,{abtestData:L,userContext:j,insertCommentId:E,tab:M}=i||{},{userInfo:R,dispatch:D}=j||{};(0,n.useEffect)(()=>{var e,o;let i;if(!y)return;C&&(i=setTimeout(()=>d.emit(d.EVENT.feedVideoCardLocateCurrentVideo),0));let{isShow:n,isModal:r,tab:s}=u.Le.getConfig(u.gI.IsSidebarShow)||{},c=(null===(e=u.Le.getConfig(u.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||!1,v=(null===(o=u.Le.getConfig(u.gI.IsInModalVideo))||void 0===o?void 0:o.isInModal)||!1,m=r!==(v||c)?{tab:s,isShow:void 0}:{tab:s,isShow:n};return u.Le.setConfig(u.gI.IsSidebarShow,{isShow:C,tab:f,isModal:v||c,lastStatus:(0,l._)((0,t._)({},m),{isModal:r})}),d.emit(d.EVENT.changeVideoSideBar,{isShowRelatedCard:C,isShowComment:f===a.L.Comment,lastStatus:m}),()=>{clearTimeout(i)}},[C,f]);let P=(0,n.useMemo)(()=>({awemeInfo:o,sense:"slider_video",onCloseClick:()=>{},onCollapseClick:()=>{},userContext:j,abtestData:L,changeLoginStatus:()=>{D({type:"updateUserInfo"})},logParams:v}),[o,j,D,v,L]),{fetchComment:A,fetchReply:U,fetchCommentMention:F,deleteCommentItem:V,publishCommentItem:H,diggCommentItem:W}=(0,c.x)({awemeInfo:o,player:p});return{authorConfig:P,commentConfig:{abtestData:L,fullScreenTarget:m,isDetail:!1,isShowComment:f===a.L.Comment&&h,total:0,onCloseCommentClick:w,awemeInfo:o,awemelogPb:null==o?void 0:o.logPb,userInfo:R,scrollContainerEl:null==_?void 0:_.current,player:p,shortcutMode:null==L?void 0:L.shortcutMode,fetchComment:A,fetchReply:U,fetchEmoticonGif:s.D2,fetchCommentMetionList:F,diggCommentItem:W,deleteCommentItem:V,puhlishCommentItem:H,count:(null==L?void 0:L.commentRenderOptimize)===2?10:20,defaultommentList:[],defaultCursor:0,defaultHotsoonHasMoreRef:0,defaultHasMore:!0,defaultStatusCode:0,defaultCommentId:I?"":E,isNeedCommentInput:!0,changeLoginStatus:()=>{D({type:"updateUserInfo"})},reportExtraParams:(0,l._)((0,t._)({},v),{relation:String(g)}),dispatch:D,globalIsCommentTrayPushGuideShow:x,globalCommentTrayPushGuideType:b,setCommentTrayPushGuideTypeFunc:S,setIsCommentTrayPushGuideShowFunc:k,tab:M,onSearchTextClick:N,isSearch:T===r.lT.Search}}}},163665:function(e,o,i){i.d(o,{u:function(){return p}});var t=i(520739),l=i(368200),n=i(563097),a=i(738712),r=i.n(a),d=i(88648),u=i(811796),s=i(222406),c=i(687297),v=i(831202);let m=(e,o)=>{let{browserName:i,browserVersion:t}=e;switch(i){case"Chrome":return(0,c.y)(t,">",o.Chrome);case"Edge":return(0,c.y)(t,">",o.Edge);case"Safari":return(0,c.y)(t,">",o.Safari);case"Firefox":return(0,c.y)(t,">",o.Firefox);case"Opera":return(0,c.y)(t,">",o.Opera);default:return!0}},f={Chrome:"69.0.0.0",Edge:"79.0.0.0",Safari:"11.0.0.0",Firefox:"78.0.0.0",Opera:"51.0.0.0"},h=e=>o=>{let{fallback:i=()=>(0,n.jsx)(n.Fragment,{})}=o,a=(0,l._)(o,["fallback"]);(0,u.d)();let{importFn:c,supportBrowserVersion:h=f,supportVersionFn:p}=e,_=(0,d.useMemo)(()=>{var e,o;let t=new(r())(navigator.userAgent).getResult(),l=null==t?void 0:null===(e=t.browser)||void 0===e?void 0:e.name,n=null==t?void 0:null===(o=t.browser)||void 0===o?void 0:o.version;return(null==p?void 0:p({browserName:l,browserVersion:n}))||m({browserName:l,browserVersion:n},h)?null==c?void 0:c():i},[]);return(0,n.jsx)(s.SV,{Slardar:v.oe.getSlardarInstance(),children:(0,n.jsx)(d.Suspense,{fallback:i,children:(0,n.jsx)(_,(0,t._)({},a))})})},p=e=>(0,d.useRef)(h(e)).current},398969:function(e,o,i){i.d(o,{GO:function(){return f},qP:function(){return h},u5:function(){return v}});var t=i(520739),l=i(878389);i(981168),i(602157),i(268917),i(675373);var n=i(349135),a=i(231755),r=i(362026),d=i(496349),u=i(55426);let{COMMON_SEARCH_PARAMS:s}=d||{};function c(e){var o,i,t,l,a,d;let{status_code:s,extension_content:c,highlight_content:v,logId:m}=e||{},f=[];if(v&&(null==v?void 0:v.record)){let e=(0,u.As)(null==v?void 0:v.record),n=(0,u.As)(null==e?void 0:e.result);if((null==n?void 0:n.data)&&(null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.length)>0){let e=null==n?void 0:null===(a=n.data)||void 0===a?void 0:null===(l=a.sort)||void 0===l?void 0:null===(t=l.call(a,(e,o)=>(null==o?void 0:o.score)-(null==e?void 0:e.score)))||void 0===t?void 0:null===(i=t.map)||void 0===i?void 0:i.call(t,e=>{let{id:o,title:i,description:t,score:l}=e;return{id:o,title:i,content:t,score:l}});f.push({type:r.v.HIGHLIGHTS,data:{blocks:e}})}}if(c&&(null==c?void 0:c.length)>0){let e=null==c?void 0:null===(d=c.map)||void 0===d?void 0:d.call(c,e=>{var o;let{answer:i,question:t,id:l,related_videos:a}=e;return{id:l,title:t,content:i,videoDatas:null==a?void 0:null===(o=a.map)||void 0===o?void 0:o.call(a,e=>({awemeInfo:(0,n.s0)(e)}))}});f.push({type:r.v.EXTENSION,data:{blocks:e}})}return{logId:m,statusCode:s,aiAwemeInfos:f}}async function v(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{awemeId:i,useHighlight:r=0,highlightVersion:d,useExtension:u=0}=e||{},v=await (0,a.U2)("/aweme/v1/web/solution/anchor/deepcontent/",(0,l._)((0,t._)({},s),{item_id:i,use_extension:u,use_highlight:r,highlight_version:d,highlight_scene_name:"pc_video_highlight"}),{},void 0,o);return(0,n.RL)(v,c)}function m(e){let{status_code:o,highlight_content:i,logId:t}=e||{},l=[];if(i&&(null==i?void 0:i.record)){var n;let e=(0,u.As)(null==i?void 0:i.record),o=(0,u.As)(null==e?void 0:e.result);(null==o?void 0:o.data)&&(null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.length)>0&&l.push({type:r.v.SMARTDOC,data:{blocks:null==o?void 0:o.data}})}return{logId:t,statusCode:o,aiAwemeInfos:l}}async function f(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{awemeId:i,highlightVersion:r}=e||{},d=await (0,a.U2)("/aweme/v1/web/solution/anchor/deepcontent/",(0,l._)((0,t._)({},s),{item_id:i,highlight_scene_name:"pc_video_smartdoc",use_highlight:1,highlight_version:r}),{},void 0,o);return(0,n.RL)(d,m)}async function h(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{awemeId:i}=e||{},{status_code:n,status_msg:r,description:d}=await (0,a.U2)("/aweme/v1/web//douyin/select/study/ai_assistant/video/default/note/detail",(0,l._)((0,t._)({},s),{item_id:i}),{},void 0,o)||{};return{statusCode:n,statusMsg:r,description:d}}},577094:function(e,o,i){i.d(o,{F8:function(){return v},Ts:function(){return f},Ws:function(){return c},d0:function(){return h},hl:function(){return p}});var t=i(520739),l=i(878389);i(268917),i(779788),i(675373);var n=i(496349),a=i(231755),r=i(349135);i(658016);var d=i(105600);let{COMMON_SEARCH_PARAMS:u}=n;function s(e){let{status_code:o,link_data:i=[],show_pos:t=0}=e;return{statusCode:o,data:i.map(e=>{let{link_type:o=0,count:i=0,link_list:t=[]}=e;return{type:o,count:i,links:t}}),showPos:null!=t?t:0}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=await (0,a.U2)("/aweme/v1/web/seo/inner/link/",(0,l._)((0,t._)({},u),{entity_id:o,entity_type:i}),{},void 0,e,{});return(0,r.RL)(n,s)}async function v(){let{count:e=2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&void 0!==arguments[1]&&arguments[1],{statusCode:-1,data:[]}}function m(e){var o;let{status_code:i,status_msg:t,data:l,log_pb:n}=e;return{statusCode:i,statusMsg:t,data:null==l?void 0:l.map(e=>({targetId:e.target_id,hitStatus:e.hit_status})),logPb:null!==(o=null==n?void 0:n.impr_id)&&void 0!==o?o:""}}async function f(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=await (0,a.U2)("/aweme/v1/web/seo/judge/whitelist/",(0,l._)((0,t._)({},u),{target_ids:e}),{},void 0,o,{});return(0,r.RL)(i,m)}async function h(e){let{awemeId:o,url:i}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=await (0,a.U2)("/aweme/v1/web/seo/keyword/related/",(0,l._)((0,t._)({},u),{itemIds:o,url:i}),{},void 0,n,{});return(0,r.RL)(d,e=>(0,r.Fo)(e,o))}async function p(e){let{awemeId:o="",secUid:i="",entityType:n=d.EntityType.Video,cusotmConfig:s={},entityId:c=""}=e,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,m=await (0,a.U2)("/aweme/v1/web/seo/detail/links/",(0,l._)((0,t._)({},u),{aweme_id:o,entity_type:n,sec_uid:i,entity_id:c}),{},void 0,v,{});return(0,r.RL)(m,e=>(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{links_list:i,status_code:t,log_pb:l}=e,n=[];return(i||[]).forEach(e=>{n.push({moduleSource:e.module_source,moduleTitle:e.module_title,isShowUserUrl:e.is_show_user_url,list:(0,r.TN)({awemeList:null==e?void 0:e.aweme_list,logPb:l,config:o}),linkList:(0,r.uJ)({linkList:null==e?void 0:e.link_list})})}),{statusCode:0===t?0:-1,detail:n,logPb:l&&JSON.stringify(l)}})(e,s))}}}]);