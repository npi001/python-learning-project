"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["46134"],{271994:function(e,i,o){o.d(i,{K:function(){return h}});var l=o(64957),t=o(367366),n=o(508828),d=o(616520),r=o(637005),u=o(782442),a=o(782563),v=o(35730),s=o(399796),_=o(186083),c=o(32639),f=o(358003);let m={live:"force_login_live",directVideo:"force_login_direct_video",video:"force_login_video"};function p(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.CookieKeys.RecordForceLogin,t={timestamp:Date.now(),force_login_video:0,force_login_live:0,force_login_direct_video:0};t[e]++;try{let n=s.Q.getItem({sKey:o});if(!n)return s.Q.setItem(o,t),t;return(!i&&!(0,l.KC)(n.timestamp)||i&&!(0,l.fu)(n.timestamp))&&(n.force_login_video=0,n.force_login_live=0,n.force_login_direct_video=0,n.timestamp=Date.now()),n[e]++,s.Q.setItem(o,n),n}catch(e){return s.Q.setItem(o,t),t}}function g(e){let{scene:i,forceLoginCallback:o,enterMethod:l,teaEvtParams:u}=e;(0,t.r)()&&(0,n._)(),(0,d.aI)()&&(0,c.a)(),(0,f.default)({headerText:"live"===i?"登录后即可畅享超清直播":"登录后即可观看更多精彩视频",enterMethod:l||("live"===i?"force_login_live":"force_login"),showClose:!1,showFeedback:!0,teaEvtParams:u,success:()=>{window.location.reload()}}),clearTimeout(y),y=setTimeout(()=>{("directVideo"===i||"video"===i)&&r.emit(r.EVENT.videoPause,"recordForceLogin"),o&&(null==o||o())},300)}let y="",h=e=>{var i,o;let{scene:l="video",isLogin:t=!0,location:n,forceLoginCallback:d}=e||{},{isLogin:r=t}=u.Le.getConfig(u.gI.AnnieXUserInfo)||{};!function(e){var i,o;let l=(null===(o=u.Le.getConfig(u.gI.AbtestData))||void 0===o?void 0:null===(i=o.forceLoginSelect)||void 0===i?void 0:i.v3)||0,t="medium"===_.s.getState().userRiskLevel;if(!l||e||(0,a.tq)()||!t)return;let n=p("force_login_video",!1,v.CookieKeys.RecordForceLoginSelect);(null==n?void 0:n.force_login_video)>=l&&g({scene:"video",enterMethod:"force_login_medium_user",teaEvtParams:{risk_reason:_.s.getState().userRiskReason}})}(r);let s=(null===(i=u.Le.getConfig(u.gI.AbtestData))||void 0===i?void 0:i.forceLoginHourly)||0,c=(null===(o=u.Le.getConfig(u.gI.AbtestData))||void 0===o?void 0:o.forceLoginDaily)||0||s;if(!c)return;let{cityName:f}=_.s.getState(),y=(n?null==c?void 0:c[n]:null==c?void 0:c[f])||(null==c?void 0:c.default),h=m[l],w=null==y?void 0:y[h];if(r||!w||(0,a.tq)())return;let b=p(h,!!s);(null==b?void 0:b[h])>=w&&g({scene:l,forceLoginCallback:d})}},614908:function(e,i,o){o.d(i,{O:function(){return n}}),o(874386);var l=o(88648),t=o(597321);function n(e){let{player:i,isActive:o,slideOptimize:n}=e,[d,r]=(0,l.useState)(!n&&void 0);return(0,l.useEffect)(()=>{if(i&&o){var e;let o=e=>{"boolean"==typeof(null==e?void 0:e.isOn)&&r(e.isOn)};return null===(e=i.on)||void 0===e||e.call(i,t.B.ImmersiveSwitchChange,o),()=>{var e;null===(e=i.off)||void 0===e||e.call(i,t.B.ImmersiveSwitchChange,o)}}!o&&i&&r(!1)},[i,o]),{inImmersive:d}}},855340:function(e,i,o){let l;o.d(i,{Z:function(){return ia}});var t=o("88648"),n=o("726406"),d=o("782563"),r=o("375944"),u=o("572076"),a=o("318600"),v=o("996503");let s=!1,_=async()=>{var e;if(!(0,d.DT)())return 0;if((null===(e=(0,r.fV)())||void 0===e?void 0:e.os)!=="Windows")return(0,n.$n)();{let e=await u.invoke("getHardwareDecodeState");return(null==e?void 0:e.code)===a.jK.Success&&(null==e?void 0:e.data)===1?1:0}};var c=o("520739"),f=o("878389");o("250440");var m=o("35730"),p=o("746864"),g=o("782442"),y=o("637005"),h=o("399796"),w=o("614908");let b=e=>{var i,o,l,t,n,d,r,u,a,v,s,_,c,f,m,g,y,h,w,b,I,L,E,S,T,R,C,P,D,k,A,M;return{author_id:null==e?void 0:null===(i=e.authorInfo)||void 0===i?void 0:i.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,compilation_id:null==e?void 0:null===(o=e.mixInfo)||void 0===o?void 0:o.mixId,playlet_id:null==e?void 0:null===(l=e.seriesInfo)||void 0===l?void 0:l.seriesId,impressionData:null==e?void 0:e.impressionData,awemeId:null==e?void 0:e.awemeId,vduration:null==e?void 0:null===(t=e.video)||void 0===t?void 0:t.duration,qualityType:(null==e?void 0:null===(r=e.video)||void 0===r?void 0:null===(d=r.bitRateList)||void 0===d?void 0:null===(n=d[0])||void 0===n?void 0:n.qualityType)||(null==e?void 0:null===(u=e.video)||void 0===u?void 0:u.qualityType),bitRate:(null==e?void 0:null===(s=e.video)||void 0===s?void 0:null===(v=s.bitRateList)||void 0===v?void 0:null===(a=v[0])||void 0===a?void 0:a.bitRate)||(null==e?void 0:null===(_=e.video)||void 0===_?void 0:_.bitRate),gearName:(null==e?void 0:null===(m=e.video)||void 0===m?void 0:null===(f=m.bitRateList)||void 0===f?void 0:null===(c=f[0])||void 0===c?void 0:c.gearName)||"",bitrate_set:null==e?void 0:null===(y=e.video)||void 0===y?void 0:null===(g=y.bitRateList)||void 0===g?void 0:g.map(e=>null==e?void 0:e.gearName),bitrate_set_dash:null==e?void 0:null===(b=e.video)||void 0===b?void 0:null===(w=b.bitRateList)||void 0===w?void 0:null===(h=w.filter(e=>"dash"===e.format))||void 0===h?void 0:h.map(e=>null==e?void 0:e.gearName),bitrate_has_dash:(null==e?void 0:null===(E=e.video)||void 0===E?void 0:null===(L=E.bitRateList)||void 0===L?void 0:null===(I=L.filter(e=>"dash"===e.format))||void 0===I?void 0:I.length)>0?1:0,quality_bitrate:null==e?void 0:null===(T=e.video)||void 0===T?void 0:null===(S=T.bitRateList)||void 0===S?void 0:S.map(e=>`${null==e?void 0:e.qualityType}:${null==e?void 0:e.bitRate}`),aweme_type:(null==e?void 0:e.isSlides)?p.e.Slides:null==e?void 0:e.awemeType,pic_cnt:null!==(M=null==e?void 0:null===(R=e.images)||void 0===R?void 0:R.length)&&void 0!==M?M:0,trending_topic:null==e?void 0:null===(C=e.hotList)||void 0===C?void 0:C.header,first_tag_name:null==e?void 0:null===(P=e.hotList)||void 0===P?void 0:P.sentence,top:null==e?void 0:null===(D=e.hotList)||void 0===D?void 0:D.rank,awemeRequestTime:null==e?void 0:e.requestTime,is_landscape:(null==e?void 0:null===(k=e.video)||void 0===k?void 0:k.width)>(null==e?void 0:null===(A=e.video)||void 0===A?void 0:A.height)?1:0}},I={videoPlay:["is_click_cover"],playTime:["is_click_cover"],videoPlayFinish:["is_click_cover"]};var L=o("734123"),E=o("79307"),S=o("885314"),T=o("913807"),R=o("473596");function C(e){let{networkSpeed:i}=(null==e?void 0:e.curDefinition)||{};return null!=l?l:i?Math.floor(i/1e3):0}var P=o("32167"),D=o("150566"),k=o("734017"),A=o("683062"),M=o("850063"),O=o("301870"),F=o("268088"),N=o("692876"),V=o("948750"),q=o("23847"),x=o("383212"),B=o("395930"),Z=o("764942"),U=o("226355"),G=o("744121"),W=o("140230"),K=o("631493");let z=e=>{let{getLogInfo:i,clickFrom:o}=e,{author_id:l,group_id:t,log_pb:n,extraParams:d,isMini:r,trending_topic:u,first_tag_name:a,top:v}=i();return(0,f._)((0,c._)({urlParamList:["previous_page"],author_id:l,group_id:t,log_pb:n,enter_from:(0,P.mo)(),click_from:o,tab_name:(0,k.zD)()||(0,D.Rs)("tab_name")||"",trending_topic:u,first_tag_name:a,top:v},d),{is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:""})};var J=o("658065"),H=o("597321");let Y=e=>{let{getLogInfo:i,isAutoPlay:o,customParams:l}=e,{author_id:t,group_id:n,log_pb:d,extraParams:r}=i();return(0,f._)((0,c._)({urlParamList:["previous_page"],author_id:t,group_id:n,log_pb:d,enter_from:(0,J.yW)(),status:o?"on":"off"},r,l),{is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",player_display_mode:(0,P.Ok)()})};o("209955");var Q=o("256277"),$=o("325982"),j=o("945977");let X={click:"click_button",dblclick:"double_click"},ee=e=>{let{getLogInfo:i,clickFrom:o}=e,{author_id:l,group_id:t,log_pb:n,extraParams:d}=i();return(0,c._)({urlParamList:["previous_page"],author_id:l,group_id:t,log_pb:n,enter_from:(0,J.yW)(),click_from:o,is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",player_display_mode:(0,P.Ok)()},d)};o("777180");var ei=o("144565"),eo=o("598467"),el=o("914815"),et=o("901414"),en=o("709409"),ed=o("367366");o("338172");var er=o("172660"),eu=o("362501"),ea=o("44905");let ev={playbacksettingplugin:"hover_speed_cell",immersiveswitchsettingplugin:"hover_pure_mode",volume:"hover_volume",playclaritysettingplugin:"hover_clarity_cell",innerautoplayplugin:"hover_auto_play_mode",watchlaterplugin:"hover_watch_later_add"},es=e=>{let{awemeInfo:i,player:o,getLogInfo:l}=e;(0,t.useEffect)(()=>{if(!o)return;let e=e=>{if(!e||"change_pip"!==e.action)return;let{extraParams:o}=l();A.Z.sendLog("clickSmallWindowEntrance",(0,c._)({enter_from:(0,P.vM)(),click_method:"click_bar",is_manual:"1",group_id:null==i?void 0:i.awemeId,player_display_mode:(0,P.Ok)()},o))},t=e=>{if(!e||"open"!==e.action)return;let{extraParams:o}=l();A.Z.sendLog("clickSmallWindowEntrance",(0,c._)({enter_from:(0,P.vM)(),click_method:"hot_key",is_manual:"1",group_id:null==i?void 0:i.awemeId,player_display_mode:(0,P.Ok)()},o))};return o.on(L.Events.USER_ACTION,e),o.on("onPipShortcutKeyDown",t),()=>{o.off(L.Events.USER_ACTION,e),o.off("onPipShortcutKeyDown",t)}},[o])};var e_=o("352165"),ec=o("217177"),ef=o("459502"),em=o("540801"),ep=o("188592"),eg=o("795454"),ey=o("77651"),eh=o("992561"),ew=o("424985"),eb=o("598434"),eI=o("322519"),eL=o("503230"),eE=o("320544"),eS=o("40970"),eT=o("616175"),eR=o("736713");let eC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0?{ufq_src:e.src,ufq_enh:e.enh,ufq_trans:e.trans,ufq_playback_ori:e.playback.ori,ufq_playback_srv1:e.playback.srv1}:{}},eP=e=>{var i,o;return(null==e?void 0:null===(i=e.video)||void 0===i?void 0:i.seeking)?"seeking":(null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.ended)?"end":"playing"},eD=(e,i)=>{var o,l,t,n;let{group_id:d,vduration:r,bitRate:u,qualityType:a,extraParams:v,bitrate_set:s,quality_bitrate:_,action_type:f,aweme_type:m,video_play_mode:p,is_landscape:g,bitrate_set_client:y}=i,{bitrate:h}=(null==e?void 0:e.curDefinition)||{};return(0,c._)({group_id:d,vduration:r,bitrate_set:s,quality_bitrate:_,video_play_mode:p,is_landscape:g,aweme_type:m,action_type:"click"===f?"click":"up"===f?"down":"up",video_quality:(0,eL.S)({player:e,qualityType:a}),video_bitrate:h||u,audio_bitrate:(null===(l=e.curDefinition)||void 0===l?void 0:null===(o=l.audioDefinition)||void 0===o?void 0:o.bitrate)||0,real_bitrate:(null===(t=e.curDefinition)||void 0===t?void 0:t.realBitrate)||0,feature_id:null===(n=e.curDefinition)||void 0===n?void 0:n.featureId,bitrate_set_client:y},v)},ek=e=>{let i=g.Le.getConfig(g.gI.PagingType),o=g.Le.getConfig(g.gI.FastSlowSlide);return{paging_type:e?null==i?void 0:i.current:null==i?void 0:i.pre,slide_speed:o}},eA=(e,i)=>{var o,l,t,n,d,r,u,a,s,_,c,f,m,p,y,h,w,b,I;let{codecFormat:L,isH265:E,videoFormat:S}=(0,eE.Z)({awemeInfo:i,player:e}),{currentLowDecodeCount:T=0,decoderMode:R=0,lowdecodeVV:P=0,vv:D=0,fps:k=0,currentState:A=0}=(null===(l=e.video)||void 0===l?void 0:null===(o=l.getStats)||void 0===o?void 0:o.call(l))||{},M=null===(t=e.videoFrameInfo)||void 0===t?void 0:t.dropped,O=null===(n=e.videoFrameInfo)||void 0===n?void 0:n.droppedRate;try{if(null==e?void 0:null===(h=e.plugins)||void 0===h?void 0:null===(y=h.srplugin)||void 0===y?void 0:null===(p=y.getStat())||void 0===p?void 0:p.usingSR){let{totalFrames:i,droppedRate:o}=(null==e?void 0:null===(b=e.plugins)||void 0===b?void 0:null===(w=b.srplugin)||void 0===w?void 0:w.getStat())||{};O=o,M=Math.floor(i*o)}}catch(e){}return{duration:e.cumulateTime?e.cumulateTime:0,player_version:e.version,codec_format:L,video_format:S,video_fps:null==e?void 0:null===(d=e.curDefinition)||void 0===d?void 0:d.fps,is_over_rect:(null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.isOverRect)?1:0,internet_speed:C(e),drop_frame:null===(u=e.videoFrameInfo)||void 0===u?void 0:u.dropped,drop_frame_sr:M,total_play_frame:null===(a=e.videoFrameInfo)||void 0===a?void 0:a.total,drop_frame_rate_sr:O,drop_frame_rate:null===(s=e.videoFrameInfo)||void 0===s?void 0:s.droppedRate,drop_frame_duration:null===(_=e.videoFrameInfo)||void 0===_?void 0:_.droppedDuration,end_status:eP(e),is_bytevc1:E,current_low_decode_count:T,decoder_mode:R,h265_failure_rate:10===D?P/D:-1,decode_fps:null!==(I=null===(c=e.video)||void 0===c?void 0:c.decodeFps)&&void 0!==I?I:0,is_supported_265:(0,v.VV)()?1:0,is_265_degrade_client:(0,v.ad)({player:e}),is_265_degrade_web:(0,v.OS)({player:e}),frame_rate:k,current_state:A,quality_level:(null==i?void 0:null===(f=i.webRawData)||void 0===f?void 0:f.quality)===1,is_ad:(0,Q.Jt)(i)?1:0,is_ai_note:(0,eR.Z)({awemeInfo:i})?1:0,is_compilation:(null==i?void 0:null===(m=i.mixInfo)||void 0===m?void 0:m.mixId)?1:0,is_full_screen:(0,ed.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,is_visible:"visible"===document.visibilityState?1:0}};var eM=o("820303"),eO=o("122391"),eF=o("349998"),eN=o("488656"),eV=o("816299"),eq=o("803620");o("779788"),o("268917");var ex=o("831202"),eB=o("972438"),eZ=o("391779"),eU=o("330746"),eG=o("189634"),eW=o("595814"),eK=o.n(eW),ez=o("79982"),eJ=o("55426"),eH=o("555106"),eY=o("157526"),eQ=o("783468"),e$=o("889382");let ej=e=>{try{var i;if(!window)return;(null===(i=window.videoPlayQuality)||void 0===i?void 0:i.length)?window.videoPlayQuality.push(e):window.videoPlayQuality=[e]}catch(e){}},eX=()=>{let e=g.Le.getConfig(g.gI.ModalStartOpenTime);return e?(g.Le.setConfig(g.gI.ModalStartOpenTime,0),Date.now()-e):-1},e0=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0?{ufq_src:e.src,ufq_enh:e.enh,ufq_trans:e.trans,ufq_playback_ori:e.playback.ori,ufq_playback_srv1:e.playback.srv1}:{}},e1=(e,i)=>{let o=g.Le.getConfig(g.gI.BitrateResult);if(o&&o[e]&&i){var l;let t=null!==(l=o[e].find(e=>e.selectRate===i))&&void 0!==l?l:{};return{bitrateselector_type:t.type,bitrateselector_mode:t.mode,bitrateselector_speed:t.speed,bitrateselector_ori_rate_cnt:t.oriRateCnt,bitrateselector_filter_rate_cnt:t.filterRateCnt,bitrateselector_is_ori_max_rate:t.isOriMaxRate,bitrateselector_is_filter_max_rate_adapt:t.isFilterMaxRateAdapt,bitrateselector_adapt_tar_rate:t.adaptTarRate,bitrateselector_select_rate:t.selectRate,bitrateselector_bitrate_set:t.bitrateSetSelector,bitrateselector_quality:t.qualityBitrateSelector}}return{}};var e2=o("136808"),e3=o("891655"),e5=o("353994"),e6=o("272978"),e4=o("137425"),e8=o("392323"),e7=o("650197"),e9=o("597803"),ie=o("271994"),ii=e=>{let{player:i,awemeInfo:o,isActive:l,getLogInfo:n}=e;(0,t.useEffect)(()=>{var e,t,d;if(!i||!o||!l||(null===(e=g.Le.getConfig(g.gI.AbtestData))||void 0===e?void 0:e.longtask))return;let{group_id:r,vduration:u,extraParams:a,bitrate_set:v,bitrate_set_client:s,quality_bitrate:_,action_type:p,aweme_type:y,video_play_mode:h,is_landscape:w}=n(),{codecFormat:b,isH265:I,videoFormat:L}=(0,eE.Z)({awemeInfo:o,player:i}),{battery:E={},memory:S={}}=(0,ez.J)();A.Z.sendLog("videoInit",(0,f._)((0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"]},(0,eb.Z)(i)),{group_id:r,bitrate_set:v,bitrate_set_client:s,vduration:u,player_version:i.version,video_format:L,codec_format:b,is_mute:(null==i?void 0:i.muted)?"1":"0",player_volume:null==i?void 0:i.volume,local_mute:(0,eH.$o)(m.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,eH.$o)(m.LocalStorageKeys.PLAYER_VOLUME),is_video_support:Number((0,eB.k)().isSupport),quality_bitrate:_,action_type:p,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(t=o.mixInfo)||void 0===t?void 0:t.mixId)?1:0,aweme_type:y,is_bytevc1:I,video_play_mode:h,is_landscape:w,play_order:(0,x.G)()}),a),{buffer_duration:(0,em.U)(i,null==o?void 0:null===(d=o.video)||void 0===d?void 0:d.duration),battery_charging:E.charging,battery_level:E.level,memory_js_heap_size_limit:S.jsHeapSizeLimit,memory_free_js_heap_size:S.freeJSHeapSize,memory_free_level:S.freeLevel,memory_used_js_heap_size:S.usedJSHeapSize}))},[i,o,l])},io=o("73528");let il=0;o("874386");let it=e=>{var i,o,l,t,n,d,r,u,a;if(!Array.isArray(null==e?void 0:null===(n=e.plugins)||void 0===n?void 0:null===(t=n.mp4encryptplayer)||void 0===t?void 0:null===(l=t.mp4)||void 0===l?void 0:null===(o=l.meta)||void 0===o?void 0:null===(i=o.moov)||void 0===i?void 0:i.trak))return{mediaTime:0};let v=e.plugins.mp4encryptplayer.mp4.meta.moov.trak.find(e=>{var i,o;return(null===(o=e.mdia)||void 0===o?void 0:null===(i=o.hdlr)||void 0===i?void 0:i.handlerType)==="vide"});if(!v)return{mediaTime:0};let s=null===(r=v.edts)||void 0===r?void 0:null===(d=r.elst)||void 0===d?void 0:d.entries,_=null===(a=v.mdia)||void 0===a?void 0:null===(u=a.mdhd)||void 0===u?void 0:u.timescale;if(Array.isArray(s)&&s.length>0&&_>0){let e=s[0].media_time;if(e>0)return{mediaTime:e/_}}return{mediaTime:0}},id=["MP4_MSE","DASH","MP4_MSE_SOFT"],ir=e=>{let{isNext:i,player:o,awemeInfo:l,getLogInfo:n,isActive:d}=e;(0,t.useEffect)(()=>{if(i&&o&&l){let e=(0,J.yW)(),i=()=>{var i,t,d,r,u,a;if(id.includes(o.vtype.toUpperCase()))return;let{awemeId:v}=l,s=(null===(i=o.curDefinition)||void 0===i?void 0:i.bitrate)||0,_=(0,em.U)(o,null==l?void 0:null===(t=l.video)||void 0===t?void 0:t.duration),c=(0,e_.e)(_*s),f=(0,ep.A)(o),{qualityType:m}=n(),p={user_unique_id:null===(d=(0,ea.Es)())||void 0===d?void 0:d.user_unique_id,enter_from:e,group_id:v,preload_size:c,preload_time:_,video_bitrate:s,audio_bitrate:(null===(u=o.curDefinition)||void 0===u?void 0:null===(r=u.audioDefinition)||void 0===r?void 0:r.bitrate)||0,real_bitrate:(null===(a=o.curDefinition)||void 0===a?void 0:a.realBitrate)||0,video_quality:(0,eL.S)({player:o,qualityType:m}),data_player_type:f,vtype:o.vtype,duration:o.duration,type:0};A.Z.sendLog("prfLastPreloadDataSize",p,!1)};return o.on(H.B.BeforeDestroy,i),window.addEventListener("beforeunload",i),()=>{o.off(H.B.BeforeDestroy,i),window.removeEventListener("beforeunload",i)}}},[o,l,i])};var iu=o("860684");let ia=e=>{let{awemeInfo:i,isActive:o,isNext:r,isPrev:u,logParams:a,userInfo:eP,isFirst:eW,index:id,disableRecord:ia=!1}=e||{},iv=(0,iu.n)(),{getH265DegradeReportFlag:is,getSupportHwClientFlag:i_}=function(e){let{awemeInfo:i,isActive:o}=e,l=(0,t.useRef)(!1),d=(0,t.useRef)((0,n.$n)());l.current=(0,t.useMemo)(()=>!s&&!(0,v.Cu)()&&(s=!0,!0),[i]),(0,t.useEffect)(()=>{(async()=>{o&&(d.current=await _())})()},[i,o]);let r=(0,t.useCallback)(()=>d.current,[]);return{getH265DegradeReportFlag:(0,t.useCallback)(()=>l.current?1:0,[]),getSupportHwClientFlag:r}}({awemeInfo:i,isActive:o}),{getActionType:ic,getIsChangingVideoSrc:im}=function(e){let{awemeInfo:i}=e,{isNext:o,isPrev:l,isActive:n}=e,d=(0,t.useRef)(null),r=(0,t.useRef)("click"),u=(0,t.useRef)(!1),a=(0,t.useRef)();o?r.current="down":l&&(r.current="up"),d.current&&(null==i?void 0:i.awemeId)&&(null==i?void 0:i.awemeId)!==d.current&&(n&&a.current?(u.current=!0,r.current="click"):u.current=!1),a.current=n,d.current=null==i?void 0:i.awemeId;let v=(0,t.useCallback)(()=>r.current,[]);return{getActionType:v,getIsChangingVideoSrc:(0,t.useCallback)(()=>u.current,[])}}({awemeInfo:i,isNext:r,isPrev:u,isActive:o}),{getLogInfo:ip}=function(e){let{awemeInfo:i,player:o,isActive:l}=e,{isFirst:n,specialParams:d,logParams:r}=e,{getActionType:u}=e,{inImmersive:a}=(0,w.O)({player:o,isActive:l});(0,t.useEffect)(()=>{if(!o||!l)return;let e=e=>{let i=(null==e?void 0:e.from)||(null==e?void 0:e.clickFrom),o="auto";["click_button","scroll"].includes(i)?o="manual":"auto"===i&&(o="auto_play_open"),g.Le.setConfig(g.gI.VideoPlayMethod,o)},i=y.listen(y.EVENT.reportPlayNext,e),t=y.listen(y.EVENT.reportPlayPrev,e);return()=>{t(),i()}},[o,i,l]);let v=(0,t.useRef)(null);return v.current=(0,t.useMemo)(()=>{var e,l,t,v,s,_,p,y,w,I,L,E,S,T,R,C,P;let D=(0,f._)((0,c._)({item_duration_ms:(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)||0},r),{log_pb:null==i?void 0:i.logPb});Object.keys(d).forEach(e=>{d[e].forEach(e=>{delete D[e]})});let k={is_click_cover:n?1:0,action_type:u(),is_pure:a?"1":"0",extraParams:D,isMini:0,video_play_mode:(null===(l=h.Q.getItem({sKey:m.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===l?void 0:l.type)===1?"landscape":"all",is_insert_wallpaper:(null===(t=g.Le.getConfig(g.gI.WallPaperIds))||void 0===t?void 0:t.includes(null==i?void 0:i.awemeId))?1:0,latest_group_id:null===(v=g.Le.getConfig(g.gI.FeedLatestViewedAweme))||void 0===v?void 0:v.awemeId,if_first_big_card:r.if_first_big_card||0},A={origin:[],client:[]};return(null==i?void 0:null===(_=i.video)||void 0===_?void 0:null===(s=_.bitRateList)||void 0===s?void 0:s.length)>0&&(A.origin=i.video.bitRateList.map(e=>({bitRate:e.bitRate,resolution:e.width+"x"+e.height,codec:e.isH265,gear_name:e.gearName,video_quality:e.qualityType,format:e.format,fps:e.fps,hdr:e.HDRBit?1:0,mvmaf:e.mvmaf,ufq:e.ufq}))),(null==o?void 0:null===(w=o.config)||void 0===w?void 0:null===(y=w.definition)||void 0===y?void 0:null===(p=y.list)||void 0===p?void 0:p.length)>0&&(A.client=o.config.definition.list.map(e=>({bitRate:e.bitrate,resolution:e.width+"x"+e.height,codec:e.isH265,gear_name:e.gearName,video_quality:e.qualityType,format:e.format,fps:e.fps,hdr:e.isHDR,mvmaf:e.mvmaf,ufq:e.ufq}))),(0,f._)((0,c._)({},b(i),k),{isFromNextAutoPlay:(null==o?void 0:null===(E=o.plugins)||void 0===E?void 0:null===(L=E.autoplaysettingplugin)||void 0===L?void 0:null===(I=L.config)||void 0===I?void 0:I.nextAutoPlay)||(null==o?void 0:null===(R=o.plugins)||void 0===R?void 0:null===(T=R.searchautoplaysettingplugin)||void 0===T?void 0:null===(S=T.config)||void 0===S?void 0:S.nextAutoPlay),bitrate_info:A,bitrate_set_client:null==o?void 0:null===(C=o.definitionList)||void 0===C?void 0:C.map(e=>null==e?void 0:e.gearName),quality_bitrate_client:null==o?void 0:null===(P=o.definitionList)||void 0===P?void 0:P.map(e=>`${e.qualityType}:${e.bitrate}`)})},[i,r,n,a,o,u]),{getLogInfo:(0,t.useCallback)(()=>v.current,[])}}({awemeInfo:i,player:iv,specialParams:I,logParams:a,isFirst:eW,isActive:o,getActionType:ic}),{getSpecialParams:ig}=function(e){let{getLogInfo:i}=e,o=i(),l=(0,t.useRef)(null);return l.current=(0,t.useMemo)(()=>{let e={};return Object.keys(I).forEach(i=>{let l={};I[i].forEach(e=>{l[e]=o[e]}),e[i]=l}),e},[o]),{getSpecialParams:(0,t.useCallback)(()=>l.current,[])}}({getLogInfo:ip});return!function(e){let{player:i}=e;(0,t.useEffect)(()=>{if(!i)return;let e=()=>{i.emit("focus")};return!i.paused&&e(),i.on("autoplay_started",e),()=>{i.off("autoplay_started",e)}},[i]),(0,t.useEffect)(()=>{if(!i)return;let e=()=>{y.emit(y.EVENT.videoPlay)},o=()=>{y.emit(y.EVENT.videoPlayPrevent)};return!i.paused&&(e(),o()),i.on(L.Events.AUTOPLAY_PREVENTED,o),i.on(L.Events.AUTOPLAY_STARTED,e),()=>{i.off(L.Events.AUTOPLAY_PREVENTED,o),i.off(L.Events.AUTOPLAY_STARTED,e)}},[i])}({player:iv}),!function(e){let{player:i,awemeInfo:o,userInfo:l,isActive:n,disable:d=!1}=e,r=(0,t.useRef)(!1),u=(0,t.useRef)({});(0,t.useEffect)(()=>{if(o&&n)return()=>{let{awemeId:e,progress:i}=u.current;g.Le.setConfig(g.gI.PreAwemeSeenStatus,{id:e,seen:i>=95?1:0})}},[n,o]),(0,t.useEffect)(()=>{r.current=!1},[o.awemeId]),(0,t.useEffect)(()=>{if(!i||!o||d)return;let e=()=>{var e,i,t;if(!r.current){if(r.current=!0,(null==l?void 0:l.isLogin)&&(null==o?void 0:o.awemeId)){let{id:e,seen:i}=g.Le.getConfig(g.gI.PreAwemeSeenStatus)||{};(0,S.w6)({awemeId:null==o?void 0:o.awemeId,authorId:null==o?void 0:null===(t=o.authorInfo)||void 0===t?void 0:t.uid,preItemId:e,preItemSeen:i})}(0,R.N)(o),(null===(i=g.Le.getConfig(g.gI.UnLookVideos))||void 0===i?void 0:null===(e=i[null==o?void 0:o.awemeId])||void 0===e?void 0:e.status)===E.Pl.UnLook&&((0,T.fetchHomeImpression)({awemeIds:o.awemeId}),(0,R.O)({awemeInfo:o}))}},t=e=>{let l=0;if((null==o?void 0:o.awemeType)===p.e.Note){var t;let e=null==i?void 0:null===(t=i.getPlugin)||void 0===t?void 0:t.call(i,"pictureProgress");l=100*((null==e?void 0:e.percent)||0)}else l=(null==e?void 0:e.currentTime)/(null==e?void 0:e.duration)*100;let n=null==o?void 0:o.awemeId,{awemeId:d,progress:r}=u.current;if(n!==d||!(l<r))u.current={awemeId:n,progress:l}};return i.on("timeupdate",t),i.once("timeupdate",e),()=>{i.off("timeupdate",t),i.off("timeupdate",e)}},[i,o,l,n,d])}({player:iv,awemeInfo:i,userInfo:eP,isActive:o,disable:ia}),!function(e){let{player:i}=e;(0,t.useEffect)(()=>{if(!i)return;let e=e=>{let{speed:i}=e;l=i,g.Le.setConfig(g.gI.NetworkSpeed,i)};return i.on("download_speed_change",e),()=>{i.off("download_speed_change",e)}},[i])}({player:iv}),!function(e){let{awemeInfo:i,player:o,isActive:l,isNext:r,index:u}=e,{getIsChangingVideoSrc:a,getLogInfo:s,getH265DegradeReportFlag:_,getSpecialParams:p,getReportNetworkSpeed:w,getSupportHwClientFlag:b}=e;!function(e){let{player:i,awemeInfo:o}=e,{getLogInfo:l}=e;(0,t.useEffect)(()=>{if(!i)return;let e=!1,o=()=>{e=!0},t=()=>{e=!1},n=1,d=setInterval(()=>{if(!e)return;let{author_id:i,group_id:o,log_pb:t,compilation_id:d,extraParams:r,trending_topic:u,first_tag_name:a,top:v}=l(),s=0;try{var _,f,m;let e=null===(m=window)||void 0===m?void 0:null===(f=m.__LIVE_PLAYER__)||void 0===f?void 0:null===(_=f.getPlayer)||void 0===_?void 0:_.call(f);s=(null==e?void 0:e.paused)===!1&&(null==e?void 0:e.muted)===!1?1:0}catch(e){}A.Z.sendLog("videoPlayCheckPoint",(0,c._)({urlParamList:["previous_page"],author_id:i,group_id:o,log_pb:t,enter_from:(0,P.mo)(),compilation_id:d,order:n++,tab_name:(0,k.zD)()||(0,D.Rs)("tab_name")||"",trending_topic:u,first_tag_name:a,top:v,is_live_playing:s},r))},6e4);return!i.paused&&o(),i.on("autoplay_started",o),i.on("play",o),i.on("pause",t),()=>{d&&clearInterval(d),i.off("autoplay_started",o),i.off("play",o),i.off("pause",t)}},[i,o,l])}({awemeInfo:i,player:o,getLogInfo:s}),!function(e){let{awemeInfo:i,player:o,isActive:l}=e,{getLogInfo:n,getH265DegradeReportFlag:d,getSupportHwClientFlag:r}=e,u=(0,t.useRef)(null),a=(0,t.useRef)(null),v=(0,V.l)(),s=()=>{var e,o;let l=g.Le.getConfig(g.gI.LynxInfo);return(!(0,M.r)()||(null==l?void 0:l.swiperIndex)===void 0||!((null==l?void 0:null===(e=l.awemeList)||void 0===e?void 0:e.length)>0)||(null===(o=l.awemeList[null==l?void 0:l.swiperIndex])||void 0===o?void 0:o.aweme_id)!==i.awemeId)&&(g.Le.setConfig(g.gI.hasReportVideoRequest,!0),!0)};(0,t.useEffect)(()=>{var e,t;let _;(u.current&&(null===(e=u.current)||void 0===e?void 0:e.awemeId)!==(null==i?void 0:i.awemeId)||!l||!i)&&(u.current=null,a.current=null);let c=o,f=()=>{u.current&&!u.current.isReport&&(u.current.isReport=!0,s()&&(0,O.Z)(u.current.data))},m=()=>{c&&(c.loadstart=1),l&&f()},p=()=>{if(a.current&&!a.current.isReport){var e,i;(0,F.Z)(a.current.data),(null===(i=a.current)||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:e.is_success)&&(a.current.isReport=!0)}},y=()=>{c&&(c.loadeddata=1),l&&p()},h=e=>{var o,l;let t=n(),{awemeId:a,vduration:v,compilation_id:s,qualityType:_,extraParams:f}=t,m=(null===(o=u.current)||void 0===o?void 0:o.duration)?new Date().getTime()-u.current.duration:0;return{awemeId:i.awemeId,isReport:!1,data:{group_id:a,extraParams:f,duration:m,vduration:v,compilation_id:s,videoQuality:(null==c?void 0:null===(l=c.curDefinition)||void 0===l?void 0:l.qualityType)||_,is_success:e,logInfo:t,player:c,awemeInfo:i,h265DeGrade:d(),supportHw:r(),vtype:null==c?void 0:c.vtype}}},w=e=>{let o=n(),{awemeId:l,extraParams:t}=o;return{awemeId:i.awemeId,duration:new Date().getTime(),data:{group_id:l,extraParams:t,logInfo:o,player:c,awemeInfo:i,h265DeGrade:d(),supportHw:r(),host:null==e?void 0:e.host,fetchExpired:null==i?void 0:i.fetchExpired,vtype:null==c?void 0:c.vtype},isReport:!1}},b=e=>{var i,o;if("loadstart"===e.eventType){let o=g.Le.getConfig(g.gI.SearchVideoPlayMethod);o&&g.Le.setConfig(g.gI.VideoPlayMethod,o),u.current?!(null===(i=a.current)||void 0===i?void 0:i.isReport)&&(a.current=h(0),u.current.duration=new Date().getTime(),y()):(u.current=w(e),m())}else"loadeddata"===e.eventType&&(!(null===(o=a.current)||void 0===o?void 0:o.isReport)&&(a.current=h(1)),y())};i&&(m(),y(),c&&c.on(L.Events.XGLOG,b));let I=e=>{if(i){var o,l;(c=e).dyLogStat&&c.dyLogStat.loadstart&&((null===(o=c.dyLogStat.loadstart.awemeInfo)||void 0===o?void 0:o.awemeId)===i.awemeId&&b(c.dyLogStat.loadstart.data),c.dyLogStat.loadstart=null);let t=(0,q.I)();t.loadstart.used=!0,t.loadstart.data&&(b(t.loadstart.data),t.loadstart.data=null),c.dyLogStat&&c.dyLogStat.loadeddata&&((null===(l=c.dyLogStat.loadeddata.awemeInfo)||void 0===l?void 0:l.awemeId)===i.awemeId&&b(c.dyLogStat.loadeddata.data),c.dyLogStat.loadeddata=null),t.loadeddata.used=!0,t.loadeddata.data&&(b(t.loadeddata.data),t.loadstart.data=null),c.on(L.Events.XGLOG,b),_=()=>{c.off(L.Events.XGLOG,b)}}};return null==v||null===(t=v.on)||void 0===t||t.call(v,N.V.PlayerCreated,I),()=>{var e;null==_||_(),null==c||c.off(L.Events.XGLOG,b),null==v||null===(e=v.off)||void 0===e||e.call(v,N.V.PlayerCreated,I)}},[i,l])}({awemeInfo:i,player:o,isActive:l,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:b}),!function(e){let{player:i,getLogInfo:o,awemeInfo:l}=e,n=(0,t.useRef)(-1);(0,t.useEffect)(()=>{if(!i)return;let e=null,t=t=>{"change_volume"===t.action&&(-1===n.current&&(n.current=t.volume),e&&clearTimeout(e),e=setTimeout(()=>{var e,d;if(!(null===(e=t.props)||void 0===e?void 0:e.volume))return;let{to:r}=null===(d=t.props)||void 0===d?void 0:d.volume,u=n.current;n.current=-1;let a=u>r,{extraParams:v}=o();A.Z.sendLog("prfVolumeChange",(0,c._)((0,f._)((0,c._)({down:a?1:0,enter_from:(0,P.vM)(),group_id:null==v?void 0:v.from_group_id},v,null==t?void 0:t.logData),{is_mute:0===r?"1":"0",pre_player_volume:u,cur_player_volume:r,play_order:(0,x.G)(),is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",listen_device:(0,P.nj)()}),(0,B.$)({player:i,awemeInfo:l})))},500))};return i.on("user_action",t),()=>{i.off("user_action",t)}},[i])}({player:o,getLogInfo:s,awemeInfo:i}),!function(e){let{player:i,awemeInfo:o,isActive:l,getH265DegradeReportFlag:d,getLogInfo:r,getSupportHwClientFlag:u}=e,a=(0,t.useRef)(0),v=(0,t.useRef)(0),s=(0,t.useRef)(0);(0,t.useEffect)(()=>{var e;if(!i||!l)return;let t=!1,_="",m="",p=-1,y=0,h=(null===(e=g.Le.getConfig(g.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,w=e=>{_=null==e?void 0:e.host,m=null==e?void 0:e.vtype,i.removedBuffer=0},b=()=>{y=1},I=e=>{"firstFrame"===e.eventType&&(p=Date.now())},E=()=>{a.current++},S=e=>{let{eventType:i,pluginName:o,action:l,currentTime:t,prePlayTime:n}=e||{},d=()=>{v.current++,s.current=n-t};if("progress"===o)switch(i){case"click":d();break;case"drag":"dragend"===l&&d()}else l===H.B.DyUserSeek&&d()},T=()=>{var e,l,g,w,b,I,L,E,S,T,R,C,D,k,M,O,F,N,V,q,G,W,K,z,J,H,Y,Q,$;if(t)return;t=!0;let j=(null==o?void 0:null===(g=o.video)||void 0===g?void 0:null===(l=g.playApi)||void 0===l?void 0:null===(e=l.startsWith)||void 0===e?void 0:e.call(l,"blob"))?1:0,{preloadTime:X,preloadSize:ee,startBuffer:ei,audioDuration:eo,minDuration:el}=(0,eg.P)(i),et=null==o?void 0:null===(b=o.video)||void 0===b?void 0:null===(w=b.bitRateList)||void 0===w?void 0:w.find(e=>{var o;return e.qualityType===(null==i?void 0:null===(o=i.curDefinition)||void 0===o?void 0:o.qualityType)}),en=(0,f._)((0,c._)({preload_time:(0,e_.N)(X),preload_time_audio:eo,preload_time_min:el,preload_size:ee||0,preload_type:(0,eS.me)(i)?2:1,hit_preload:(0,eS.qJ)(i),is_mute:(null==i?void 0:i.muted)?"1":"0",player_volume:null==i?void 0:i.volume,video_mute:(null==i?void 0:null===(I=i.video)||void 0===I?void 0:I.muted)?"1":"0",video_volume:null==i?void 0:null===(L=i.video)||void 0===L?void 0:L.volume,equalize_state:null!==(W=null==i?void 0:i.equalizeVolumeState)&&void 0!==W?W:0,lufs:null!==(K=null==i?void 0:i.lufs)&&void 0!==K?K:eT.G7,use_new_mammon_worklet_processor:null!==(z=null==i?void 0:i.useMammonWorkletProcessorV3)&&void 0!==z&&z,use_new_mammon_worklet_processor_with_wasm:null!==(J=null==i?void 0:i.useMammonWorkletProcessorV3Wasm)&&void 0!==J&&J,hit_new_mammon_worklet_processor:null!==(H=null==i?void 0:i.hitMammonWorkletProcessorV3)&&void 0!==H&&H,volume_balance_longtest_consume_time:null!==(Y=null==i?void 0:null===(E=i.effectNodeConsumeTime)||void 0===E?void 0:E.longest)&&void 0!==Y?Y:-2,volume_balance_shortest_consume_time:null!==(Q=null==i?void 0:null===(S=i.effectNodeConsumeTime)||void 0===S?void 0:S.shortest)&&void 0!==Q?Q:-2,is_in_modal:h},(0,B.$)({player:i,awemeInfo:o}),(()=>{try{var e,l,t,n;let{cdn:d,pcdn:r}=(null==i?void 0:i.bandwidth)||(null==i?void 0:i.bandWidth)||{},{size:u}=d||{},{size:_,trace_id:c,uri:f,fid:m}=r||{},p=s.current,g=v.current,y=(0,ef.a)(i,a.current),h=(null==i?void 0:null===(e=i.curDefinition)||void 0===e?void 0:e.realBitrate)||(null==i?void 0:null===(l=i.curDefinition)||void 0===l?void 0:l.bitrate)||0,w=(0,em.U)(i,null==o?void 0:null===(t=o.video)||void 0===t?void 0:t.duration),b=(0,e_.e)(w*h),I=(0,ep.A)(i);if(j){let e=i.duration?(y>0?i.duration:i.currentTime)/i.duration:0;b*=e}let{pcdn_tracker_request_cnt:L,pcdn_tracker_failed_cnt:E,pcdn_download_request_cnt:S,pcdn_download_failed_cnt:T}=(null==i?void 0:i.pcdnReq)||(null==i?void 0:null===(n=i.config)||void 0===n?void 0:n.pcdnReq)||{};return{fid:m,trace_id:c,uri:f,pcdn_size_video:_||0,cdn_size_video:u||0,play_size:(0,ef.L)(i),loop_cnt:y,seek_cnt:g,seek_time:(0,e_.N)(p),play_leave_position:(0,e_.N)(i.currentTime),play_duration_clean:(0,e_.N)(y>0?i.duration:i.currentTime),cache_size:Math.max(b,(0,ef.L)(i)),cache_duration:(0,e_.N)(w),data_player_type:I,pcdn_tracker_request_cnt:L,pcdn_tracker_failed_cnt:E,pcdn_download_request_cnt:S,pcdn_download_failed_cnt:T}}catch(e){return{}}})(),(0,ey.m)({player:i}),(0,ey.B)({player:i}),(null==i?void 0:i.superResolution)||{},(null==et?void 0:et.mvmaf)||{},eC(null==et?void 0:et.ufq)),{urlParamList:["previous_page","tab_name"],is_success:y||(null==i?void 0:null===(T=i.video)||void 0===T?void 0:T.readyState)>=2?1:0,host:_,vtype:m,play_order:(0,x.G)(),is_265_degrade:d(),from_start_duration:-1===p?-1:Date.now()-p,is_support_hw:u(),is_hw:(null==i?void 0:null===(R=i.config)||void 0===R?void 0:R.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hw_client:(0,eh.N)(i),is_gear_down:null!==($=null==i?void 0:null===(C=i.curDefinition)||void 0===C?void 0:C.orgDefinition)&&void 0!==$?$:0,definition:null==i?void 0:null===(D=i.curDefinition)||void 0===D?void 0:D.definition,start_buffer:ei,if_invisible:(0,eu.Vr)()?"1":"0",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",buffer:(null==i?void 0:null===(k=i.bufferedPoint)||void 0===k?void 0:k.end)-(null==i?void 0:null===(M=i.bufferedPoint)||void 0===M?void 0:M.start)||0,has_down_definition:i.definitionList.find(e=>{var o;return(null==e?void 0:e.definition)===(null==i?void 0:null===(o=i.curDefinition)||void 0===o?void 0:o.definition)+1})?1:0});(0,ew.O)(i);let ed=(null==i?void 0:null===(O=i.getSwitchDefinationInfos)||void 0===O?void 0:O.call(i))||{};A.Z.sendLog("videoPlayEnd",(0,f._)((0,c._)((0,f._)((0,c._)({},ek(!1),en,(0,eb.Z)(i),(0,eI.Z)(),eA(i,o),eD(i,r()),(null==i?void 0:i.stages)||{},(null==i?void 0:null===(F=i.stat)||void 0===F?void 0:F.stage)||{},(null==i?void 0:i.startTimelines)||{},(null==i?void 0:i.pcdnVVStat)||{},(null==i?void 0:null===(q=i.plugins)||void 0===q?void 0:null===(V=q.srplugin)||void 0===V?void 0:null===(N=V.getStat)||void 0===N?void 0:N.call(V))||{},(null==i?void 0:i.novv)||{},(0,ec.v)(o)),{firstframed:i.firstframe?1:0,loadstart:(null==i?void 0:i.loadstart)?1:0,loadeddata:(null==i?void 0:i.loadeddata)?1:0,is_cache_video:j,listen_device:(0,P.nj)(),abr_upper_count:i.upperCount||0,abr_lower_count:i.lowerCount||0,abr_total_count:i.abrCount||0,abr_change_count:i.abrChangeCount||0,abr_change_upper_count:i.upperAbrChangeCount||0,abr_change_lower_count:i.lowerAbrChangeCount||0,block_play_type:i.blockPlayType,pause_type:i.pauseType,end_config_autoplay:i.config.autoplay,end_autoplay:i.autoplay}),ed),{clarity_now:null==i?void 0:null===(G=i.getClarity)||void 0===G?void 0:G.call(i,!1),video_play_speed:i.playbackRate}),!1),i.removedBuffer=0,i.preplayStat=0,i.prepauseStat=0,i.superResolution={},i.upperCount=0,i.lowerCount=0,i.abrCount=0,i.abrChangeCount=0,i.upperAbrChangeCount=0,i.lowerAbrChangeCount=0,i.bandWidth=null,i.blockPlayType="",i.pauseType="",i.firstframe=0,i.loadstart=0,i.loadeddata=0,i.danmakuGetBoundingCounts=0,i.danmuElCreateCounts=0},R=e=>{i.removedBuffer+=e.removeDur};return i.on("removeBuffer",R),i.on(L.Events.XGLOG,I),i.on(L.Events.PLAY,w),i.once(L.Events.LOADED_DATA,b),i.on(L.Events.USER_ACTION,S),i.on(L.Events.ENDED,E),i.on("prepause",T),window.addEventListener("beforeunload",T),i.once(H.B.BeforeDestroy,T),()=>{T(),i.off(H.B.BeforeDestroy,T),i.off(L.Events.XGLOG,I),i.off(L.Events.PLAY,w),i.off(L.Events.LOADED_DATA,b),i.off(L.Events.USER_ACTION,S),i.off(L.Events.ENDED,E),i.off("prepause",T),i.off("removeBuffer",R),window.removeEventListener("beforeunload",T)}},[i,o,l]),(0,t.useEffect)(()=>{a.current=0,v.current=0,s.current=0},[o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:b}),!function(e){let{player:i,awemeInfo:o,isActive:l,index:d}=e,{getLogInfo:r,getSpecialParams:u}=e;(0,t.useEffect)(()=>{if(!i||!l||(null==o?void 0:o.awemeType)===68)return;let e=u(),t=()=>{var l,t,u,a,v,s,_,p,y,w,b;let{author_id:I,group_id:L,log_pb:E,compilation_id:S,playlet_id:T,extraParams:R,aweme_type:C,isMini:M,trending_topic:O,first_tag_name:F,top:N,is_click_cover:V,is_pure:q,is_insert_wallpaper:x,if_first_big_card:B}=r(),{isH265:G}=(0,eE.Z)({awemeInfo:o,player:i}),W=!1,z=(0,eM.G)(m.SessionStorageKeys.CacheRecommendActiveAwemeID);z&&z===L&&(W=!0),A.Z.sendLog("videoPlayFinish",(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({is_click_cover:V,urlParamList:["trending_topic","previous_page"],enter_from:(0,P.mo)(),enter_from_merge:(0,eO.z)(""),enter_method:(0,D.Rs)("enter_method")||"",author_id:I,group_id:L,log_pb:E,compilation_id:S,playlet_id:T,is_insert_wallpaper:x,tab_name:(0,k.zD)()||(0,D.Rs)("tab_name")||"",is_full_screen:(0,ed.r)()?"1":"0",is_full_webscreen:K.s.getIsPageFullscreen()?"1":"0",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(l=g.Le.getConfig(g.gI.IsCollapseAuthorCard))||void 0===l?void 0:l.isCollapseAuthorCard)?0:1,from_follow_list:(null===(t=g.Le.getConfig(g.gI.FromFollowList))||void 0===t?void 0:t.tag)?"1":"0",is_mute:(null==i?void 0:i.muted)?"1":"0"},(0,eF.t)()),{mute_type:null===(u=g.Le.getConfig(g.gI.ForceMuted))||void 0===u?void 0:u.currentMuteType,is_force:(null===(a=g.Le.getConfig(g.gI.ForceMuted))||void 0===a?void 0:a.currentMuteType)==="browser"?"1":"0",aweme_type:C,trending_topic:O,first_tag_name:F,top:N,is_pure:q,from_push:h.Q.getItem({sKey:m.CookieKeys.FromClientPush})?1:0}),R,e.videoPlayFinish||{}),{is_bytevc1:G,video_time:(0,eN.n)(null==o?void 0:null===(v=o.video)||void 0===v?void 0:v.duration),is_from_ad:(0,Q.Jt)(o)?1:0,auto_play_mode:null===(s=g.Le.getConfig(g.gI.InnerAutoPlay))||void 0===s?void 0:s.mode,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,video_play_method:null!==(y=g.Le.getConfig(g.gI.VideoPlayMethod))&&void 0!==y?y:"auto",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",is_hw_client:(0,eh.N)(i),is_ai_note:(0,eR.Z)({awemeInfo:o})?1:0,from_click_group_id:null!==(w=null==o?void 0:o.insertId)&&void 0!==w?w:"",url_source:null!==(b=null==o?void 0:null===(_=o.continationInfo)||void 0===_?void 0:_.urlSource)&&void 0!==b?b:["recommend","personal_homepage"].includes((0,P.vM)())?h.Q.getItem({sKey:m.CookieKeys.UrlSourceForBrowserPlugin}):"",is_cache_video:W,is_first_video:!d,column_type:(null==R?void 0:R.column_type)||(null==R?void 0:null===(p=R.search_params)||void 0===p?void 0:p.column_type),if_first_big_card:B}),(0,eV.Wc)()),{is_selected_label:(null==o?void 0:o.weeklyRecommend)?1:0}));let J=g.Le.getConfig(g.gI.SearchVideoPlayMethod);J&&g.Le.setConfig(g.gI.VideoPlayMethod,J)},a=(0,q.I)();return a.playfinish.used=!0,a.playfinish.data?(t(),a.playfinish.data=null):i.once(L.Events.ENDED,t),()=>{i.off(L.Events.ENDED,t)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getSpecialParams:p,index:u}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{A.Z.sendLog("clickPreviousVideo",z({getLogInfo:n,clickFrom:e})),"click_button"===e&&(0,W.V)()},t=e=>{A.Z.sendLog("clickNextVideo",z({getLogInfo:n,clickFrom:e})),"click_button"===e&&(0,W.V)()},d=()=>{var e;if(!l||!o||o&&(null==o?void 0:o.cell_room))return!1;let t=K.s.getPlayerScene(i.playerId),n=K.s.getPlayersByScene(E.lT.Modal)||[],d=null===(e=g.Le.getConfig(g.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal,r=(0,G.OB)();return(t===E.lT.Modal||!(n.length>0))&&(!d||i.playerId===r)&&!0},r=y.listen(y.EVENT.reportPlayNext,e=>{let{clickFrom:i}=e;if(!!d())t(i)}),u=y.listen(y.EVENT.reportPlayPrev,i=>{let{clickFrom:o}=i;if(!!d())e(o)});return()=>{r(),u()}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{if((null==e?void 0:e.isInnerReset)===!0)return;let i=null==e?void 0:e.isOn;A.Z.sendLog("clickAutoPlay",Y({getLogInfo:n,isAutoPlay:i,customParams:"object"==typeof(null==e?void 0:e.logParams)?null==e?void 0:e.logParams:{}}))};return i.on(H.B.AutoPlaySwitchChange,e),()=>{i.off(H.B.AutoPlaySwitchChange,e)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{if((0,Q.Jt)(o)){let i=(0,Q.Rx)(o);(0,$.E)("full_screen",{tag:(0,j.f)(),value:i.creative_id,log_extra:i.log_extra,player_form:e})}},t=i=>{A.Z.sendLog("enterFullScreen",ee({getLogInfo:n,clickFrom:i})),e("browser_full")},d=i=>{A.Z.sendLog("exitFullScreen",(0,f._)((0,c._)({},ee({getLogInfo:n,clickFrom:i})),{stack_trace:"click_button"!==i?Error().stack:""})),e("normal")},r=(e,i)=>{e?d(i):t(i)},u=e=>{if("switch_fullscreen"===e.action){let i=X[e.eventType]||"keyboard";r(e.fullscreen||"system"===e.eventType,i)}},a=e=>{r(!e.fullscreen,"hot_key")};return i.on(L.Events.USER_ACTION,u),i.on(H.B.SwitchFullScreen,a),()=>{i.off(L.Events.USER_ACTION,u),i.off(H.B.SwitchFullScreen,a)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),(0,eq.Z)({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getSpecialParams:p}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{let{author_id:i,group_id:o,log_pb:l,extraParams:t}=n();A.Z.sendLog("clickVideoSpeed",(0,c._)({urlParamList:["previous_page"],author_id:i,group_id:o,log_pb:l,enter_from:(0,J.yW)(),speed:Number(e).toFixed(2),is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",player_display_mode:(0,P.Ok)()},t))};return i.on(H.B.PlayRatioChange,e),()=>{i.off(H.B.PlayRatioChange,e)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{if((null==e?void 0:e.action)==="switch_play_pause"){let i="pauseVideo";i=e.paused?"startVideo":"pauseVideo";let l=(0,ei.m)(e),{extraParams:t}=n();A.Z.sendLog(i,(0,f._)((0,c._)({enter_from:(0,J.yW)(),click_method:l},t),{is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",player_display_mode:(0,P.Ok)(),group_id:o.awemeId||""}))}};return i.on(L.Events.USER_ACTION,e),()=>{i.off(L.Events.USER_ACTION,e)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{if((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume"){let l=!1,{extraParams:t}=n();(null==e?void 0:e.action)==="change_muted"?(A.Z.sendLog("clickVolume",(0,c._)({enter_from:(0,J.yW)(),status:e.muted?"1":"0",group_id:null==o?void 0:o.awemeId,player_display_mode:(0,P.Ok)()},t)),(null==e?void 0:e.muted)&&(l=!0)):e.volume>0&&(l=!0),l&&(null==i||i.emit("openVolume"))}};return i.on(L.Events.USER_ACTION,e),()=>{i.off(L.Events.USER_ACTION,e)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e;(0,t.useRef)({isDrag:!1}),(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{var l,t,n,d;return{position:(null==i?void 0:i.currentTime)||0,enter_from:(0,P.mo)(),enter_from_merge:(0,P.vM)(),tab_name:(0,k.zD)()||(0,D.Rs)("tab_name")||"",rate:e.percent,action:e.currentTime>e.prePlayTime?"forward":"rewind",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",is_chapter_bar:(null==o?void 0:null===(l=o.chapterInfo)||void 0===l?void 0:l.status)?1:0,chapter_index:(0,el.P)({awemeInfo:o,currentTime:e.currentTime}),group_id:null==o?void 0:o.awemeId,author_id:null==o?void 0:null===(t=o.authorInfo)||void 0===t?void 0:t.uid,vduration:null==o?void 0:null===(n=o.video)||void 0===n?void 0:n.duration,if_continued_play:g.Le.getConfig(g.gI.PlayRecord)?(0,en.v)(o.awemeId)?1:0:"",before_rate:1e3*e.prePlayTime/(null==o?void 0:null===(d=o.video)||void 0===d?void 0:d.duration),before_position:e.prePlayTime,is_ting_window:et.e.activeScene===eo.d.ListenVideo?1:0,player_display_mode:(0,P.Ok)()}},t=o=>{(null==o?void 0:o.action)==="click"&&A.Z.sendLog("progressClick",(0,f._)((0,c._)({play_current_time:Math.floor((null==i?void 0:i.currentTime)||0)},e(o)),{click_method:"click"}))};i.on(L.Events.USER_ACTION,t);let n=i.getPlugin("progress"),d=o=>{A.Z.sendLog("progressClick",(0,f._)((0,c._)({play_current_time:Math.floor((null==i?void 0:i.currentTime)||0)},e(o)),{click_method:"drag"}))};return n&&n.addCallBack("dragend",d),()=>{i.off(L.Events.USER_ACTION,t),n&&n.removeCallBack("dragend",d)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(!i||!l)return;let e=e=>{let{getEnterFromDynamic:i,extraParams:l}=n();if(e.isInnerReset)return;let t=(null==i?void 0:i())||(0,P.mo)(),d=(0,f._)((0,c._)({enter_from:t},l,e.logParams||{}),{group_id:null==o?void 0:o.awemeId,is_full_screen:(0,ed.r)()?"1":"0",is_full_webscreen:K.s.getIsPageFullscreen()?"1":"0",player_display_mode:(0,P.Ok)()});e.isOn&&A.Z.sendLog("openPureMode",d),e.isOn||A.Z.sendLog("closePureMode",d)};return i.on(H.B.ImmersiveSwitchChange,e),()=>{i.off(H.B.ImmersiveSwitchChange,e)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n,getH265DegradeReportFlag:d,getSupportHwClientFlag:r}=e,u=(0,t.useRef)([]),a=(0,t.useRef)(0),s=(0,t.useRef)(""),_=(0,t.useRef)([]),p=(0,V.l)();(0,t.useEffect)(()=>{var e;let t;(s.current!==(null==o?void 0:o.awemeId)||!l||!o)&&(s.current=null==o?void 0:o.awemeId,u.current=[],a.current=0);let y=i,h=()=>{let e=u.current.length;if(e){let i=u.current[e-1];A.Z.sendLog("videoPlayFailed",i),ex.oe.event.info({name:ex.Mo.VideoPlayFailed,report:i})}u.current=[],_.current.forEach(e=>{A.Z.sendLog("linkPlayFailed",e)}),_.current=[]},w=()=>{l&&h()},b=e=>{var i,t,s,_,p,h,b,I,L,E,S,T,R,C,P,D,k;let{group_id:M,vduration:O,extraParams:F,action_type:N,aweme_type:V,awemeRequestTime:q,qualityType:B,log_pb:G,bitrate_set_client:W}=n(),{isH265:K,codecFormat:z,videoFormat:J}=(0,eE.Z)({awemeInfo:o,player:y}),H=(0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"]},(0,eb.Z)(y),(0,eI.Z)()),{group_id:M,errorCode:(null==e?void 0:null===(i=e.mediaError)||void 0===i?void 0:i.code)||(null==e?void 0:e.errorCode)||"",errorDesc:(null==e?void 0:null===(t=e.mediaError)||void 0===t?void 0:t.message)||(null==e?void 0:e.errorMessage)||"",vduration:O,video_quality:(0,eL.S)({player:y,qualityType:B}),player_version:y.version,current_position:1e3*y.currentTime,is_video_support:Number((0,eB.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==y?void 0:y.vtype),action_type:N,bitrate_set_client:W,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(s=o.mixInfo)||void 0===s?void 0:s.mixId)?1:0,is_full_screen:(0,ed.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,is_active:1,is_cdn_expired:1===(0,eZ.q)(y.currentSrc)?1:0,is_bytevc1:K,aweme_type:V,log_pb:G,codec_format:z,video_format:J,play_order:(0,x.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:d(),has_report:a.current++,is_265_degrade_client:(0,v.ad)({player:y}),is_support_hw:r(),is_hw:(null==y?void 0:null===(_=y.config)||void 0===_?void 0:_.mediaType)==="video"?1:0,if_invisible:(0,eu.Vr)()?"1":"0",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",feature_id:null==y?void 0:null===(p=y.curDefinition)||void 0===p?void 0:p.featureId,clarity_now:null==y?void 0:null===(h=y.getClarity)||void 0===h?void 0:h.call(y,!1),aweme_detail:JSON.stringify(null==o?void 0:null===(b=o.video)||void 0===b?void 0:b.bitRateList),secret_key:(null==o?void 0:null===(E=o.video)||void 0===E?void 0:null===(L=E.bitRateList)||void 0===L?void 0:null===(I=L[0])||void 0===I?void 0:I.playerAccessKey)||"",secret_format:null==o?void 0:null===(R=o.video)||void 0===R?void 0:null===(T=R.bitRateList)||void 0===T?void 0:null===(S=T[0])||void 0===S?void 0:S.format}),(0,ey.m)({player:y}),(0,ey.B)({player:y}),F);if((null==e?void 0:null===(C=e.mediaError)||void 0===C?void 0:C.code)===6&&(H.aweme_info=null==y?void 0:null===(D=y.config)||void 0===D?void 0:D.url),l){if(null==y?void 0:y.errored)return;y.errored=1,A.Z.sendLog("videoPlayFailed",H),ex.oe.event.info({name:ex.Mo.VideoPlayFailed,report:H})}else u.current.push(H),w();if((0,eU.G6)()&&(null==e?void 0:null===(P=e.mediaError)||void 0===P?void 0:P.code)===3&&1===K){let e=null!==(k=(0,eM.G)(m.SessionStorageKeys.DecodeError))&&void 0!==k?k:0;(0,eM.t_)(m.SessionStorageKeys.DecodeError,e+1)}},I=e=>{var i,t,d,r,u,a,v,s,c,f,m;let{group_id:p,aweme_type:g}=n(),{isH265:h,codecFormat:b,videoFormat:I}=(0,eE.Z)({awemeInfo:o,player:y}),L=(0,eG.E)(e.src,y.config.url).isPcdnSource,E={group_id:p,aweme_type:g,host:null==e?void 0:e.host,enter_from:(0,J.yW)(),is_pcdn:Number(L),user_unique_id:null===(i=(0,ea.Es)())||void 0===i?void 0:i.user_unique_id,src:null==e?void 0:e.src,errorDesc:null!==(c=null==e?void 0:null===(t=e.mediaError)||void 0===t?void 0:t.message)&&void 0!==c?c:null==e?void 0:e.message,errorCode:null!==(f=null==e?void 0:null===(d=e.mediaError)||void 0===d?void 0:d.code)&&void 0!==f?f:null==e?void 0:e.errorCode,vtype:null!==(m=null==e?void 0:e.vtype)&&void 0!==m?m:null==y?void 0:y.vtype,range:null==e?void 0:e.range,content_length:null==e?void 0:null===(r=e.headers)||void 0===r?void 0:r["content-length"],content_range:null==e?void 0:null===(u=e.headers)||void 0===u?void 0:u["content-range"],content_type:null==e?void 0:null===(a=e.headers)||void 0===a?void 0:a["content-type"],server_ip:null==e?void 0:null===(v=e.headers)||void 0===v?void 0:v.server_ip,x_response_cinfo:null==e?void 0:null===(s=e.headers)||void 0===s?void 0:s["x-response-cinfo"],is_bytevc1:h,codec_format:b,video_format:I,current_position:null==y?void 0:y.currentTime};l?A.Z.sendLog("linkPlayFailed",E):(_.current.push(E),w())};o&&(w(),y&&(y.on(L.Events.ERROR,b),y.on(L.Events.SOURCE_ERROR,I)));let E=e=>{(y=e).on(L.Events.ERROR,b),y.on(L.Events.SOURCE_ERROR,I),t=()=>{y.off(L.Events.ERROR,b),y.off(L.Events.SOURCE_ERROR,I)}};return null==p||null===(e=p.on)||void 0===e||e.call(p,N.V.PlayerCreated,E),()=>{var e;null==t||t(),null==y||y.off(L.Events.ERROR,b),null==y||y.off(L.Events.SOURCE_ERROR,I),null==p||null===(e=p.off)||void 0===e||e.call(p,N.V.PlayerCreated,E)}},[o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:b}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:d,getReportNetworkSpeed:r,getH265DegradeReportFlag:u,getIsChangingVideoSrc:a,getSupportHwClientFlag:s}=e,_=(0,t.useRef)({waiting_buffer:-1,waiting_audio_buffer:-1,waiting_video_buffer:-1});(0,t.useEffect)(()=>{var e;if(!i||!o||!l)return;let t=0,m=0,p=0,y=!0,h={},w=(null===(e=g.Le.getConfig(g.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,b=e=>{var b,I,L,E,S,T,R,C,P,D,k,M,O,F,N,V,q,B;let{group_id:G,vduration:W,bitRate:K,qualityType:z,extraParams:J,action_type:H,aweme_type:Y,video_play_mode:$,is_landscape:j,bitrate_set_client:X}=d(),{codecFormat:ee,isH265:ei,videoFormat:eo}=(0,eE.Z)({awemeInfo:o,player:i}),{bitrate:el}=(null==i?void 0:i.curDefinition)||{},et=(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"],group_id:G,duration:e.costTime,duration_origin:e.fixedCostTime,interval:e.interval,diff_start:e.diffStart,diff_end:e.diffEnd,vduration:W,player_version:i.version,video_quality:(0,eL.S)({player:i,qualityType:z})},(0,ey.m)({player:i}),(0,ey.B)({player:i})),{video_format:eo,video_fps:null==i?void 0:null===(b=i.curDefinition)||void 0===b?void 0:b.fps,video_bitrate:el||K,audio_bitrate:(null===(L=i.curDefinition)||void 0===L?void 0:null===(I=L.audioDefinition)||void 0===I?void 0:I.bitrate)||0,real_bitrate:(null===(E=i.curDefinition)||void 0===E?void 0:E.realBitrate)||0,feature_id:null===(S=i.curDefinition)||void 0===S?void 0:S.featureId,codec_format:ee,internet_speed:r(i),current_position:1e3*i.currentTime,percentage_position:1e3*i.currentTime/W*100,video_play_speed:i.playbackRate,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(T=o.mixInfo)||void 0===T?void 0:T.mixId)?1:0,is_full_screen:(0,ed.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,buffer_time:(0,em._)(i),bitrate_set_client:X,is_visible:Number(!document.hidden),is_visible_when_block_start:Number(y),block_type:null==e?void 0:e.type,end_type:null==e?void 0:e.endType,host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==i?void 0:i.vtype),action_type:H,aweme_type:Y,drop_frame:null===(R=i.videoFrameInfo)||void 0===R?void 0:R.dropped,total_play_frame:null===(C=i.videoFrameInfo)||void 0===C?void 0:C.total,drop_frame_rate:null===(P=i.videoFrameInfo)||void 0===P?void 0:P.droppedRate,drop_frame_duration:null===(D=i.videoFrameInfo)||void 0===D?void 0:D.droppedDuration,is_bytevc1:ei,video_play_mode:$,is_landscape:j,play_order:(0,x.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:u(),is_support_hw:s(),is_hw:(null==i?void 0:null===(k=i.config)||void 0===k?void 0:k.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hw_client:(0,eh.N)(i),if_invisible:(0,eu.Vr)()?"1":"0",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:""}),(0,eb.Z)(i),(0,eI.Z)(),J),{preload_type:(0,eS.me)(i)?2:1,hit_preload:(0,eS.qJ)(i)}),(null==i?void 0:null===(F=i.plugins)||void 0===F?void 0:null===(O=F.srplugin)||void 0===O?void 0:null===(M=O.getStat)||void 0===M?void 0:M.call(O))||{}),{battery_charging_when_block_start:null==h?void 0:h.charging,battery_level_when_block_start:null==h?void 0:h.level}),(null==i?void 0:i.novv)||{},_.current||{}),{firstframed:i.firstframe?1:0,loadstart:(null==i?void 0:i.loadstart)?1:0,loadeddata:(null==i?void 0:i.loadeddata)?1:0,is_in_modal:w,clarity_now:null==i?void 0:null===(N=i.getClarity)||void 0===N?void 0:N.call(i,!1),is_switch:null==i?void 0:null===(V=i.getIsInSwitching)||void 0===V?void 0:V.call(i)});if("waitingEnd"===e.eventType&&1===e.type){if(!1===l)et.duration=0,et.duration_origin=0,_.current={waiting_buffer:-1,waiting_audio_buffer:-1,waiting_video_buffer:-1};else{let{slideStartTime:i}=g.Le.getConfig(g.gI.SlideStartTime)||{},o=a()||!i?null==e?void 0:e.costTime:Date.now()-i>(null==e?void 0:e.costTime)?null==e?void 0:e.costTime:Date.now()-i,l=a()||!i||Date.now()-i>(null==e?void 0:e.fixedCostTime)?null==e?void 0:e.fixedCostTime:Date.now()-i;et.duration=o,et.duration_origin=l}A.Z.sendLog("videoBlock",et),ex.oe.event.warn({name:ex.Mo.VideoPlayBlock,report:eK()(et,["player_version","video_quality","block_type","end_type","host","vtype","duration"])})}if("waitingStart"===e.eventType){t=Date.now(),m+=1,i.config.blockCount=m,y="visible"===document.visibilityState;let{battery:e}=(0,ez.J)()||{};h=e;try{if(_.current.waiting_buffer=((null==i?void 0:null===(q=i.bufferedPoint)||void 0===q?void 0:q.end)-i.currentTime)*1e3,null==i?void 0:null===(B=i.plugins)||void 0===B?void 0:B.dashplugin){let e=i.plugins.dashplugin._kernal.__dash__.mse._sourceBuffer;_.current.waiting_audio_buffer=(i.getBufferedRange(e.audio.buffered)[1]-i.currentTime)*1e3,_.current.waiting_video_buffer=(i.getBufferedRange(e.video.buffered)[1]-i.currentTime)*1e3}}catch(e){}}if("waitingEnd"===e.eventType){if(p+=1,0===t||(null==e?void 0:e.type)===1)return;A.Z.sendLog("videoBlock",et),ex.oe.event.warn({name:ex.Mo.VideoPlayBlock,report:eK()(et,["player_version","video_quality","block_type","end_type","host","vtype","duration"])}),t=0}},I=()=>{var e,o,l,t,n,r,u;if(null===(e=g.Le.getConfig(g.gI.AbtestData))||void 0===e?void 0:e.longtask)return;let{extraParams:a}=null!==(u=d())&&void 0!==u?u:{};A.Z.sendLog("videoBlockCount",(0,c._)({block_count:m,differ_count:m-p,player_version:i.version,drop_frame:null===(o=i.videoFrameInfo)||void 0===o?void 0:o.dropped,total_play_frame:null===(l=i.videoFrameInfo)||void 0===l?void 0:l.total,drop_frame_rate:null===(t=i.videoFrameInfo)||void 0===t?void 0:t.droppedRate,drop_frame_duration:null===(n=i.videoFrameInfo)||void 0===n?void 0:n.droppedDuration,is_bytevc1:null==i?void 0:null===(r=i.curDefinition)||void 0===r?void 0:r.isH265,play_order:(0,x.G)(),is_in_modal:w},(0,eb.Z)(i),a))};return i.on(L.Events.XGLOG,b),window.addEventListener("beforeunload",I),()=>{I(),i.off(L.Events.XGLOG,b),window.removeEventListener("beforeunload",I)}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getReportNetworkSpeed:w,getH265DegradeReportFlag:_,getIsChangingVideoSrc:a,getSupportHwClientFlag:b}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:d,getReportNetworkSpeed:r,getH265DegradeReportFlag:u,getIsChangingVideoSrc:a,getSupportHwClientFlag:s}=e,_=(0,V.l)(),p=(0,t.useRef)(!1),h=(0,t.useRef)(""),w=()=>{var e,i,l;let t=g.Le.getConfig(g.gI.LynxInfo);return(!!g.Le.getConfig(g.gI.hasReportVideoRequest)||(null==t?void 0:t.swiperIndex)===void 0||!((null==t?void 0:null===(e=t.awemeList)||void 0===e?void 0:e.length)>0)||!((null===(i=t.progressBarInfo)||void 0===i?void 0:i.timeCurrent)>0)||(null===(l=t.awemeList[null==t?void 0:t.swiperIndex])||void 0===l?void 0:l.aweme_id)!==o.awemeId)&&!0};(0,t.useEffect)(()=>{if(!l&&(p.current=!1),l){var e,o,t,n,d,r;h.current="";let l=null==i?void 0:null===(t=i.plugins)||void 0===t?void 0:null===(o=t.mp4encryptplayer)||void 0===o?void 0:null===(e=o.states)||void 0===e?void 0:e.length;l>0&&(h.current=(null==i?void 0:null===(r=i.plugins)||void 0===r?void 0:null===(d=r.mp4encryptplayer)||void 0===d?void 0:null===(n=d.states[l-1])||void 0===n?void 0:n.state)||"")}},[l]),(0,t.useEffect)(()=>{p.current=!1;let e=i,l=i=>{if("firstFrame"===i.eventType&&!p.current){var l,t,_,b,I,E,S,T,R,C,D,k,M,O,F,N,V,q,G,W,K,z,H,Y,$,j,X,ee,ei,eo,el,et,en,er,ea,ev,es,ec,ef,em,ep,ew,eR,eC,eP,eD,eA,eM,eO,eF,eN,eV,eq,ex;p.current=!0;let{group_id:eZ,vduration:eU,bitRate:eG,qualityType:eW,extraParams:eK,bitrate_set:ez,bitrate_set_client:e2,bitrate_set_dash:e3,bitrate_has_dash:e5,bitrate_info:e6,quality_bitrate:e4,action_type:e8,aweme_type:e7,video_play_mode:e9,is_landscape:ie}=d(),{codecFormat:ii,isH265:io,videoFormat:il}=(0,eE.Z)({awemeInfo:o,player:e});e.firstframe=(0,eJ.dg)();let{preloadTime:it,preloadSize:id,startBuffer:ir,audioDuration:iu,minDuration:ia}=(0,eg.P)(e),{bitrate:iv,realBitrate:is}=(null==e?void 0:e.curDefinition)||{},{slideStartTime:i_,slideFrom:ic}=g.Le.getConfig(g.gI.SlideStartTime)||{},im=null==o?void 0:null===(t=o.video)||void 0===t?void 0:null===(l=t.bitRateList)||void 0===l?void 0:l.find(i=>{var o;return i.qualityType===(null==e?void 0:null===(o=e.curDefinition)||void 0===o?void 0:o.qualityType)}),{currentLowDecodeCount:ip=0,decoderMode:ig=0,lowdecodeVV:iy=0,vv:ih=0}=(null===(b=e.video)||void 0===b?void 0:null===(_=b.getStats)||void 0===_?void 0:_.call(b))||{},iw=a(),ib=Date.now(),iI=ib-i_>1e4&&(null==i?void 0:i.costTime)<1e3,iL=iw||!i_||iI?null==i?void 0:i.costTime:ib-i_,iE=g.Le.getConfig(g.gI.StartPlayTime),iS=!iw&&i_&&iE?iE-i_:-1,iT=null==e?void 0:e.video,iR={},iC=-1;!(null===(I=g.Le.getConfig(g.gI.AbtestData))||void 0===I?void 0:I.longtask)&&(iC=Number(!!(null==iT?void 0:iT.parentNode)),iR=null==iT?void 0:iT.getBoundingClientRect());let iP=0,iD=g.Le.getConfig(g.gI.GeneralSearchVideoSlideIntoVisionTime);"general_search"===(0,J.yW)()&&0!==iD&&(iP=Date.now()-iD);let ik=g.Le.getConfig(g.gI.MenuClick)||0,iA=0;ik&&(g.Le.setConfig(g.gI.MenuClick,0),iA=ib-ik);let iM="";try{let o=(null==i?void 0:i.vtype)||(null==e?void 0:e.vtype),l=g.Le.getConfig(g.gI.recentVtypes)||[];l.push(o),g.Le.setConfig(g.gI.recentVtypes,l.slice(0,5)),iM=window.location.href}catch(e){}let iO=(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({},ek(!0)),{urlParamList:["previous_page","tab_name"]}),(0,eb.Z)(e),(0,eI.Z)(),e1(eZ,(null==e?void 0:e.vtype)==="DASH"?is:iv)),{group_id:eZ,bitrate_set:ez,bitrate_set_client:e2,bitrate_set_dash:e3,bitrate_has_dash:e5,bitrate_info:e6,bitrate_info_record:null==e?void 0:null===(E=e.config)||void 0===E?void 0:E.recordList,menu_total_duration:iA,player_first_frame:null==i?void 0:i.costTime,buffer:null==i?void 0:i.buffer,duration:iL,vduration:eU,video_width:null==iT?void 0:iT.videoWidth,video_height:null==iT?void 0:iT.videoHeight,video_ratio:(null==iT?void 0:iT.videoWidth)/(null==iT?void 0:iT.videoHeight),video_rect_width:null==iR?void 0:iR.width,video_rect_height:null==iR?void 0:iR.height,is_over_gear:(0,eQ.E)(e),is_over_rect:(null==e?void 0:null===(S=e.config)||void 0===S?void 0:S.isOverRect)?1:0,device_ratio:null!==(eP=window.devicePixelRatio)&&void 0!==eP?eP:-1,has_pkt_offset:(null==e?void 0:null===(C=e.curDefinition)||void 0===C?void 0:null===(R=C.pktOffsetMap)||void 0===R?void 0:null===(T=R.find)||void 0===T?void 0:T.call(R,e=>(null==e?void 0:e.time)===5))?1:0,audio_channels:null==e?void 0:null===(D=e.curDefinition)||void 0===D?void 0:D.audioChannels,audio_sample_rate:null==e?void 0:null===(k=e.curDefinition)||void 0===k?void 0:k.audioSampleRate,has_first_segment_range:(null==e?void 0:null===(M=e.curDefinition)||void 0===M?void 0:M.first_segment_range)?1:0,feature_id:null==e?void 0:null===(O=e.curDefinition)||void 0===O?void 0:O.featureId,player_version:e.version,video_quality:(0,eL.S)({player:e,qualityType:eW}),video_size:null==e?void 0:null===(F=e.curDefinition)||void 0===F?void 0:F.size,video_fps:null==e?void 0:null===(N=e.curDefinition)||void 0===N?void 0:N.fps,definition:null===(V=e.curDefinition)||void 0===V?void 0:V.definition,video_format:il,video_bitrate:iv||eG,audio_bitrate:(null===(G=e.curDefinition)||void 0===G?void 0:null===(q=G.audioDefinition)||void 0===q?void 0:q.bitrate)||0,real_bitrate:(null===(W=e.curDefinition)||void 0===W?void 0:W.realBitrate)||0,sr_sharpness_strength:(null==e?void 0:null===(K=e.curDefinition)||void 0===K?void 0:K.srSharpnessStrength)||-1,codec_format:ii,internet_speed:r(e),if_invisible:(0,eu.Vr)()?"1":"0",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",preload_time:(0,e_.N)(it),preload_time_audio:iu,preload_time_min:ia,preload_size:id||0,preload_type:(0,eS.me)(e)?2:1,hit_preload:(0,eS.qJ)(e),start_buffer:ir,is_mute:(null==e?void 0:e.muted)?"1":"0",player_volume:null==e?void 0:e.volume,video_mute:(null==e?void 0:null===(z=e.video)||void 0===z?void 0:z.muted)?"1":"0",video_volume:null==e?void 0:null===(H=e.video)||void 0===H?void 0:H.volume,local_mute:(0,eH.$o)(m.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,eH.$o)(m.LocalStorageKeys.PLAYER_VOLUME),equalize_state:null!==(eD=null==e?void 0:e.equalizeVolumeState)&&void 0!==eD?eD:0,lufs:null!==(eA=null==e?void 0:e.lufs)&&void 0!==eA?eA:eT.G7,use_new_mammon_worklet_processor:null!==(eM=null==e?void 0:e.useMammonWorkletProcessorV3)&&void 0!==eM&&eM,use_new_mammon_worklet_processor_with_wasm:null!==(eO=null==e?void 0:e.useMammonWorkletProcessorV3Wasm)&&void 0!==eO&&eO,hit_new_mammon_worklet_processor:null!==(eF=null==e?void 0:e.hitMammonWorkletProcessorV3)&&void 0!==eF&&eF,volume_balance_longtest_consume_time:null!==(eN=null==e?void 0:null===(Y=e.effectNodeConsumeTime)||void 0===Y?void 0:Y.longest)&&void 0!==eN?eN:-2,volume_balance_shortest_consume_time:null!==(eV=null==e?void 0:null===($=e.effectNodeConsumeTime)||void 0===$?void 0:$.shortest)&&void 0!==eV?eV:-2,is_in_modal:(null===(j=g.Le.getConfig(g.gI.IsInModalVideo))||void 0===j?void 0:j.isInModal)||!1,host:null==i?void 0:i.host,vtype:(null==i?void 0:i.vtype)||(null==e?void 0:e.vtype),is_video_support:Number((0,eB.k)().isSupport),quality_bitrate:e4,action_type:e8,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(X=o.mixInfo)||void 0===X?void 0:X.mixId)?1:0,enable_danmaku:(null==o?void 0:null===(ee=o.danmakuControl)||void 0===ee?void 0:ee.enableDanmaku)?1:0,web_rid:null==o?void 0:null===(el=o.authorInfo)||void 0===el?void 0:null===(eo=el.roomData)||void 0===eo?void 0:null===(ei=eo.owner)||void 0===ei?void 0:ei.web_rid,is_full_screen:(0,ed.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,quality_level:(null==o?void 0:null===(et=o.webRawData)||void 0===et?void 0:et.quality)===1,aweme_type:e7,is_bytevc1:io,is_hevc_error_down:null!==(eq=null==e?void 0:e.isHevcErrorDown)&&void 0!==eq?eq:0,video_play_mode:e9,is_landscape:ie,current_low_decode_count:ip,decoder_mode:ig,h265_failure_rate:10===ih?iy/ih:-1,play_order:(0,x.G)(),first_video_after_cold_start:(0,eY.R)(0)&&1===(0,x.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:u(),is_265_degrade_client:(0,v.ad)({player:e}),is_265_degrade_web:(0,v.OS)({player:e}),is_support_hw:s(),is_hw:(null==e?void 0:null===(en=e.config)||void 0===en?void 0:en.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hw_client:(0,eh.N)(e),is_support_hdr:L.Sniffer.isHdrSupported(),active_stage:h.current,slide_start_to_play:iS,play_to_first_frame:iE?ib-iE:-1,click_to_modal_first_frame:eX(),gear_name:null==e?void 0:null===(er=e.curDefinition)||void 0===er?void 0:er.gearName,is_hdr:(null==e?void 0:null===(ea=e.curDefinition)||void 0===ea?void 0:ea.isHDR)?1:0,media_type:null==e?void 0:null===(ev=e.config)||void 0===ev?void 0:ev.mediaType,is_video_in_dom:iC,is_multiple:(null==e?void 0:e.isMultiple)?1:0,buffered_before_active:Math.floor(null==e?void 0:e.bufferedBeforeActive),loadstart_before_active:null==e?void 0:e.loadstartBeforeActive,loadeddata_before_active:null==e?void 0:e.loadeddataBeforeActive,load_range_type:null==e?void 0:null===(ef=e.plugins)||void 0===ef?void 0:null===(ec=ef.mp4encryptplayer)||void 0===ec?void 0:null===(es=ec.config)||void 0===es?void 0:es.loadRangeType,load_range_type_preloader:null===(ew=window)||void 0===ew?void 0:null===(ep=ew.playerPreloader)||void 0===ep?void 0:null===(em=ep._config)||void 0===em?void 0:em.loadRangeType,slide_from:ic,video_play_speed:e.playbackRate}),(0,B.$)({player:e,awemeInfo:o}),(0,e$.D)({isChangeVideoSrc:iw,player:e,data:i,slideStartTime:i_}),(0,ey.m)({player:e}),(0,ey.B)({player:e}),eK),{general_search_duration:iP}),(null==e?void 0:e.novv)||{},(null==e?void 0:null===(eR=e.stat)||void 0===eR?void 0:eR.stage)||{},(null==e?void 0:e.startTimelines)||{},(null==im?void 0:im.mvmaf)||{},e0(null==im?void 0:im.ufq)),{preplay_stat:(null==e?void 0:e.preplayStat)?1:0,prepause_stat:(null==e?void 0:e.prepauseStat)?1:0,end_type:null==i?void 0:i.endType,page_url:iM});w()&&(A.Z.sendLog("videoPlayQuality",(0,f._)((0,c._)({},iO),{listen_device:(0,P.nj)(),start_play_clarity_type:null==e?void 0:null===(ex=e.getClarity)||void 0===ex?void 0:ex.call(e,!0)})),e.firstFrameTmp=new Date().getTime()),(null===(eC=g.Le.getConfig(g.gI.AbtestData))||void 0===eC?void 0:eC.fixOOM)!==1&&ej(iO),y.emit(y.EVENT.firstFrame)}};if(!e){let i;let t=t=>{if(o){if((e=t).dyLogStat&&e.dyLogStat.firstFrame){var n;(null===(n=e.dyLogStat.firstFrame.awemeInfo)||void 0===n?void 0:n.awemeId)===o.awemeId&&(e.dyLogStat.firstFrame.data&&e.isReusePlayer&&(e.dyLogStat.firstFrame.data.costTime=0),l(e.dyLogStat.firstFrame.data)),e.dyLogStat.firstFrame=null}let d=(0,q.I)();d.firstFrame.used=!0,d.firstFrame.data&&(l(d.firstFrame.data),d.firstFrame.data=null),e.on(L.Events.XGLOG,l),i=()=>{e.off(L.Events.XGLOG,l)}}};return _.on(N.V.PlayerCreated,t),()=>{null==i||i(),_.off(N.V.PlayerCreated,t)}}return e.on(L.Events.XGLOG,l),()=>{e.off(L.Events.XGLOG,l)}},[o])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getReportNetworkSpeed:w,getH265DegradeReportFlag:_,getIsChangingVideoSrc:a,getSupportHwClientFlag:b}),!function(e){let{player:i,awemeInfo:o,isActive:l,index:n}=e,r=(0,t.useRef)(!1);(0,t.useEffect)(()=>{var e,t;let u;if(!i||!o||!l)return;let a=()=>{y.emit(y.EVENT.pageFirstFrameLoadStart)},v=()=>{if(g.Le.setConfig(g.gI.isVideoPlayed,!0),y.emit(y.EVENT.pageFirstFrameLoaded),r.current=!0,(0,M.B)())return;let e=u||Date.now();try{if(g.Le.getConfig(g.gI.MarkFirstEnter)){var i,l,t,a,v,s,_,c,f,m,p,h,w,b,I,L,E,S,T,R;g.Le.setConfig(g.gI.MarkFirstEnter,null);let r=(null==o?void 0:null===(t=o.video)||void 0===t?void 0:null===(l=t.playApi)||void 0===l?void 0:null===(i=l.startsWith)||void 0===i?void 0:i.call(l,"blob"))?1:0;(0,d.DT)()?(0,er.s)(o,n):(null===(v=performance)||void 0===v?void 0:null===(a=v.timing)||void 0===a?void 0:a.fetchStart)&&A.Z.sendLog("prfFirstFeedShow",{feed_total_duration:e-(null===(_=performance)||void 0===_?void 0:null===(s=_.timing)||void 0===s?void 0:s.fetchStart),is_landscape:(null==o?void 0:null===(c=o.video)||void 0===c?void 0:c.width)>(null==o?void 0:null===(f=o.video)||void 0===f?void 0:f.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,J.yW)(),vduration:null==o?void 0:null===(m=o.video)||void 0===m?void 0:m.duration,if_invisible:(0,eu.Vr)()?"1":"0",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",real_index:n,is_cache_video:r,aweme_type:null==o?void 0:o.awemeType,is_quick_player:(null===(h=window)||void 0===h?void 0:null===(p=h.__QUICK_PLAYER)||void 0===p?void 0:p.firstLoadDataTimeStamp)?1:0});try{A.Z.sendLog("prfFirstFeedFirstFrameShow",{feed_total_duration:e-(null===(b=performance)||void 0===b?void 0:null===(w=b.timing)||void 0===w?void 0:w.fetchStart),is_landscape:(null==o?void 0:null===(I=o.video)||void 0===I?void 0:I.width)>(null==o?void 0:null===(L=o.video)||void 0===L?void 0:L.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,J.yW)(),real_index:n,is_cache_video:r,aweme_type:null==o?void 0:o.awemeType,is_quick_player:(null===(S=window)||void 0===S?void 0:null===(E=S.__QUICK_PLAYER)||void 0===E?void 0:E.firstLoadDataTimeStamp)?1:0}),((null===(T=g.Le.getConfig(g.gI.AbtestData))||void 0===T?void 0:T.prefetchFirst)||(null===(R=g.Le.getConfig(g.gI.AbtestData))||void 0===R?void 0:R.prefetchFirstServer))&&y.emit(y.EVENT.firstLoadMore)}catch(e){}}"recommend"===(0,J.yW)()&&g.Le.getConfig(g.gI.FirstEnterRecommend)&&(g.Le.setConfig(g.gI.FirstEnterRecommend,!1),y.emit(y.EVENT.firstEnterVideoPlay))}catch(e){}},s=()=>{if(g.Le.setConfig(g.gI.isVideoPlayed,!0),!(0,M.B)()&&!!r.current)v()},_=(0,q.I)();_.prfFirstFeedShow&&!_.prfFirstFeedShow.used&&_.prfFirstFeedShow.data&&(u=_.prfFirstFeedShow.data,v(),_.prfFirstFeedShow.used=!0),_.prfFirstFrameStart&&!_.prfFirstFrameStart.used&&_.prfFirstFrameStart.data&&(a(),_.prfFirstFrameStart.used=!0);let c=null===(t=window)||void 0===t?void 0:null===(e=t.__QUICK_PLAYER)||void 0===e?void 0:e.firstLoadDataTimeStamp;return c&&(u=c,v()),i.on(L.Events.PLAY,s),i.on(L.Events.LOADED_DATA,v),i.on(L.Events.LOAD_START,a),()=>{i.off(L.Events.PLAY,s),i.off(L.Events.LOADED_DATA,v),i.off(L.Events.LOAD_START,a)}},[i,o,l,n])}({player:o,awemeInfo:i,isActive:l,index:u}),!function(e){let{player:i,awemeInfo:o,isActive:l,index:d}=e,{getLogInfo:r,getSpecialParams:u}=e,a=(0,V.l)(),v=(0,t.useRef)(""),s=(0,t.useRef)(null),_=(0,t.useRef)(!1);(0,t.useEffect)(()=>{!l&&(v.current="")},[l]),(0,t.useEffect)(()=>{o.awemeId!==v.current&&(v.current="");let e=i,l=()=>{var i,l,t,a,p,y,w,b,I,L,E,S,T,R,C,M,O,F,N,V,q,x,B,G,W,z,J,H,Y,$,j;if(v.current)return;v.current=o.awemeId;let{author_id:X,group_id:ee,log_pb:ei,compilation_id:eo,playlet_id:el,impressionData:et,extraParams:er,aweme_type:ea,pic_cnt:ev,trending_topic:es,first_tag_name:e_,top:ec,is_pure:ef,is_click_cover:em,is_landscape:ep,is_insert_wallpaper:eg,isMini:ey,latest_group_id:eh,if_first_big_card:ew}=r(),{isH265:eb}=(0,eE.Z)({awemeInfo:o,player:e}),eL=g.Le.getConfig(g.gI.VideoFeedList),eS=(null==eL?void 0:eL.autoPlayCount)||1,eT=(0,D.Rs)("if_from_widget"),eC=0;((0,D.Rs)("modeFrom")===e2.MODE_FROM||(0,D.Rs)("modeFrom")===e2.MODE_FROM_SEARCH)&&(eC=1);let eP=!1,eD=(0,eM.G)(m.SessionStorageKeys.CacheRecommendActiveAwemeID);eD&&eD===ee&&(eP=!0);let ek=(null===(i=window.EXPOSE_DATA)||void 0===i?void 0:i.landingPage)==="discover",eA=(null===(l=window.EXPOSE_DATA)||void 0===l?void 0:l.landingPage)==="follow",eq=ek&&(null===(t=window.EXPOSE_DATA)||void 0===t?void 0:t.landingMode)!==2&&(null===(a=window.EXPOSE_DATA)||void 0===a?void 0:a.landingMode)!==3,ex=null!==(z=null!==(W=(0,D.Rs)("enter_method"))&&void 0!==W?W:ek||eA?"default_landing":void 0)&&void 0!==z?z:"other",eB="";try{eB=(null==o?void 0:null===(J=o.logPb)||void 0===J?void 0:J.includes("impr_id"))?JSON.parse(null==o?void 0:o.logPb).impr_id:null==o?void 0:o.logPb}catch(e){}let eZ=(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({pc_source:null==o?void 0:null===(p=o.chanFeedVideo)||void 0===p?void 0:p.source,video_source:(0,e7.B)(o),is_click_cover:em,is_insert_wallpaper:eg,is_landscape:ep,urlParamList:["trending_topic","previous_page","keywords_index","keywords_content"],enter_method:ex,author_id:X,enter_from:(0,P.mo)(),enter_from_merge:(0,eO.z)(""),group_id:ee,log_pb:ei,compilation_id:eo,playlet_id:el,is_auto_play:String((null==e?void 0:null===(b=e.plugins)||void 0===b?void 0:null===(w=b.autoplaysettingplugin)||void 0===w?void 0:null===(y=w.config)||void 0===y?void 0:y.nextAutoPlay)||(null==e?void 0:null===(E=e.plugins)||void 0===E?void 0:null===(L=E.searchautoplaysettingplugin)||void 0===L?void 0:null===(I=L.config)||void 0===I?void 0:I.nextAutoPlay)?1:0),sidebar_status:(0,e5.GE)(),is_visible:String("visible"===document.visibilityState?1:0),impression_data:et,speed:`${null==e?void 0:e.playbackRate}`,auto_cnt:eS,video_detail_enter_from:(0,eO.z)("web_link"),is_full_screen:(0,ed.r)()?"1":"0",is_full_webscreen:K.s.getIsPageFullscreen()?"1":"0",tab_name:(0,k.zD)()||(0,D.Rs)("tab_name")||"",from_follow_list:(null===(S=g.Le.getConfig(g.gI.FromFollowList))||void 0===S?void 0:S.tag)?"1":"0",is_mute:(null==e?void 0:e.muted)?"1":"0",mute_type:null===(T=g.Le.getConfig(g.gI.ForceMuted))||void 0===T?void 0:T.currentMuteType,is_pure:ef},(0,eF.t)()),{from_academy:eC,aweme_type:ea,pic_cnt:ev,trending_topic:es,first_tag_name:e_,top:ec,impr_id:eB,browser_height:(0,eU.P6)(),browser_width:(0,eU.wi)(),browser_ratio:(0,eU.P6)()/(0,eU.wi)(),is_from_ad:(0,Q.Jt)(o)?1:0,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(R=o.mixInfo)||void 0===R?void 0:R.mixId)?1:0,is_bytevc1:eb,video_time:(0,eN.n)(null==o?void 0:null===(C=o.video)||void 0===C?void 0:C.duration),is_force:(null===(M=g.Le.getConfig(g.gI.ForceMuted))||void 0===M?void 0:M.currentMuteType)==="browser"?"1":"0",from_push:h.Q.getItem({sKey:m.CookieKeys.FromClientPush})?1:0,auto_play_mode:null===(O=g.Le.getConfig(g.gI.InnerAutoPlay))||void 0===O?void 0:O.mode,seo_vids:e6.t("seo_vids")||"",webdriver:navigator&&navigator.webdriver?1:0,vtype:null==e?void 0:e.vtype,is_long_not_use_refresh_vid:!!(null==e?void 0:null===(F=e.config)||void 0===F?void 0:F.notUseRefreshVid),is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hevc_error_down:null!==(H=null==e?void 0:e.isHevcErrorDown)&&void 0!==H?H:0}),(0,eI.Z)(),er,(null===(N=u())||void 0===N?void 0:N.videoPlay)||{}),{video_play_method:null!==(Y=g.Le.getConfig(g.gI.VideoPlayMethod))&&void 0!==Y?Y:"auto",if_invisible:(0,eu.Vr)()?"1":"0",is_small_window:(0,Z.f)()?"1":"0",small_window_scene:(0,Z.f)()?U.h.getState().smallWindowScene:"",is_top:(0,eu.k)()?"1":"0"}),eg&&g.Le.getConfig(g.gI.WallPaperPosition)>0?{vv_sync:1}:{}),{url_source:null!==($=null==o?void 0:null===(V=o.continationInfo)||void 0===V?void 0:V.urlSource)&&void 0!==$?$:["recommend","personal_homepage"].includes((0,P.vM)())?h.Q.getItem({sKey:m.CookieKeys.UrlSourceForBrowserPlugin}):"",latest_group_id:eh,expand_video_card_type:(null===(q=g.Le.getConfig(g.gI.PlayerCardInfo))||void 0===q?void 0:q.isActive)?null===(x=g.Le.getConfig(g.gI.PlayerCardInfo))||void 0===x?void 0:x.expandCardType:"",if_continued_play:g.Le.getConfig(g.gI.PlayRecord)?(0,en.v)(o.awemeId)?1:0:"",rate:g.Le.getConfig(g.gI.PlayRecord)?(null==e?void 0:e.currentTime)/(null==e?void 0:e.duration):""}),(0,e3.K)(o)),{if_from_widget:eT?1:0,from_click_group_id:null!==(j=null==o?void 0:o.insertId)&&void 0!==j?j:"",column_type:(null==er?void 0:er.column_type)||(null==er?void 0:null===(B=er.search_params)||void 0===B?void 0:B.column_type),is_cache_video:eP,is_first_video:!d,if_first_big_card:ew,is_highlight_show:(0,e9.Z)({awemeInfo:o})?1:0,player_start_time:(null==e?void 0:null===(G=e.config)||void 0===G?void 0:G.startTime)||0,is_ai_note:(0,eR.Z)({awemeInfo:o})?1:0,is_recommend:"default_landing"===ex?Number(eq):void 0}),(0,eV.Wc)(eV.rh.PLAY_START)),{is_selected_label:(null==o?void 0:o.weeklyRecommend)?1:0});(0,ie.K)(),A.Z.sendLog("videoPlay",eZ);try{!_.current&&(0,e8.yr)()}catch(e){}s.current={aweme_type:ea,item_id:ee,source:0,play_delta:1,operation_info:null==o?void 0:o.webOperationInfo},g.Le.getConfig(g.gI.TeaBlocked)},t=()=>{v.current="",l()},p=e=>{v.current=e};if(!e){let i;let n=n=>{if(o){e=n;let o=(0,q.I)();o.autoplayStarted.used=!0,o.autoplayStarted.data&&(l(),o.autoplayStarted.data=null),e.on("enter_inner_feed",t),e.on("exit_inner_feed",p),e.on(L.Events.AUTOPLAY_STARTED,l),i=()=>{e.off("enter_inner_feed",t),e.off("exit_inner_feed",p),e.off(L.Events.AUTOPLAY_STARTED,l)}}};return a.on(N.V.PlayerCreated,n),()=>{a.off(N.V.PlayerCreated,n),null==i||i()}}return e.on("enter_inner_feed",t),e.on("exit_inner_feed",p),e.on(L.Events.AUTOPLAY_STARTED,l),()=>{e.off("enter_inner_feed",t),e.off("exit_inner_feed",p),e.off(L.Events.AUTOPLAY_STARTED,l)}},[o.awemeId,l]),(0,t.useEffect)(()=>{let e=()=>{(0,e4.x0)(s.current)};return l&&i?(i.once(L.Events.TIME_UPDATE,e),()=>{i.off(L.Events.TIME_UPDATE,e)}):()=>null},[l,i])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getSpecialParams:p,index:u}),ii({player:o,awemeInfo:i,isActive:l,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e;(0,t.useEffect)(()=>{if(i){let e=e=>{var l,t;let{vid:n,force_set_min:d}=e||{};A.Z.sendLog("prfTaskDataSize",(0,f._)((0,c._)({},e||{}),{user_unique_id:null===(l=(0,ea.Es)())||void 0===l?void 0:l.user_unique_id,group_id:n,force_set_min:d?1:0,vduration:null==o?void 0:null===(t=o.video)||void 0===t?void 0:t.duration,enter_from:(0,J.yW)(),video_play_speed:i.playbackRate,vtype:null==i?void 0:i.vtype}))};return i.on("prf_data_size",e),()=>{i.off("prf_data_size",e)}}},[i,o])}({player:o,awemeInfo:i,isActive:l}),ir({isNext:r,player:o,awemeInfo:i,getLogInfo:s,isActive:l}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n}=e;(0,t.useEffect)(()=>{if(i&&l)try{let e=e=>{try{var l,t,d,r,u,a;let{group_id:v,playlet_id:s,log_pb:_,extraParams:m,aweme_type:p,top:g,is_pure:y,bitRate:h,latest_group_id:w}=n(),{isH265:b}=(0,eE.Z)({awemeInfo:o,player:i}),I=(null===(l=i.curDefinition)||void 0===l?void 0:l.bitrate)||h||0,L=-1,E=-1,S=-1;try{if(L=((null==i?void 0:null===(u=i.bufferedPoint)||void 0===u?void 0:u.end)-i.currentTime)*1e3,null==i?void 0:null===(a=i.plugins)||void 0===a?void 0:a.dashplugin){let e=i.plugins.dashplugin._kernal.__dash__.mse._sourceBuffer;E=(i.getBufferedRange(e.audio.buffered)[1]-i.currentTime)*1e3,S=(i.getBufferedRange(e.video.buffered)[1]-i.currentTime)*1e3}}catch(e){}A.Z.sendLog("fpsStuck",(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({},e),{enter_from:(0,P.mo)(),group_id:v,playlet_id:s,log_pb:_,speed:String(null==i?void 0:i.playbackRate)}),(0,eF.t)()),{aweme_type:p,top:g,is_pure:y,is_bytevc1:b}),(0,eI.Z)(),m),{play_order:(0,x.G)(),video_bitrate:I,audio_bitrate:(null===(d=i.curDefinition)||void 0===d?void 0:null===(t=d.audioDefinition)||void 0===t?void 0:t.bitrate)||0,real_bitrate:(null===(r=i.curDefinition)||void 0===r?void 0:r.realBitrate)||0,latest_group_id:w,current_position:i.currentTime,vtype:i.vtype,waiting_buffer:L,waiting_audio_buffer:E,waiting_video_buffer:S}),!1)}catch(e){ex.oe.event.error({name:ex.Mo.FpsStuckReportError,report:{type:1}})}};return i.on(L.Events.FPS_STUCK,e),()=>{i.off(L.Events.FPS_STUCK,e)}}catch(e){ex.oe.event.error({name:ex.Mo.FpsStuckReportError,report:{type:0}})}},[i,o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getSpecialParams:p}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n,getH265DegradeReportFlag:d,getSupportHwClientFlag:r}=e,u=(0,t.useRef)([]),a=(0,t.useRef)(0),s=(0,t.useRef)(""),_=(0,V.l)();(0,t.useEffect)(()=>{let e;(s.current!==(null==o?void 0:o.awemeId)||!l||!o)&&(s.current=null==o?void 0:o.awemeId,u.current=[],a.current=0);let t=i,m=()=>{l&&(u.current.forEach(e=>{A.Z.sendLog("videoDegrade",e)}),u.current=[])},p=e=>{var i,l;let{group_id:s,vduration:_,extraParams:p,action_type:g,aweme_type:y,awemeRequestTime:h,qualityType:w,log_pb:b,bitrate_set_client:I}=n(),{isH265:L,codecFormat:E,videoFormat:S}=(0,eE.Z)({awemeInfo:o,player:t}),T=(0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"]},(0,eb.Z)(t),(0,eI.Z)()),{group_id:s,errorCode:null==e?void 0:e.errc,errorDesc:null==e?void 0:e.err_msg,vduration:_,video_quality:(0,eL.S)({player:t,qualityType:w}),player_version:t.version,current_position:1e3*t.currentTime,is_video_support:Number((0,eB.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==t?void 0:t.vtype),action_type:g,bitrate_set_client:I,is_ad:(0,Q.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(i=o.mixInfo)||void 0===i?void 0:i.mixId)?1:0,is_active:1,is_cdn_expired:1===(0,eZ.q)(t.currentSrc)?1:0,is_bytevc1:L,aweme_type:y,log_pb:b,codec_format:E,video_format:S,play_order:(0,x.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:d(),has_report:a.current++,is_265_degrade_client:(0,v.ad)({player:t}),is_support_hw:r(),is_hw:(null==t?void 0:null===(l=t.config)||void 0===l?void 0:l.mediaType)==="video"?1:0,hit_preload:(0,eS.qJ)(t)}),(0,ey.m)({player:t}),(0,ey.B)({player:t}),p);u.current.push(T),m()};o&&(m(),t&&t.on("degrade",p));let g=i=>{(t=i).on("degrade",p),e=()=>{t.on("degrade",p)}};if(!t){var y;null==_||null===(y=_.on)||void 0===y||y.call(_,N.V.PlayerCreated,g)}return()=>{var i;null==e||e(),null==t||t.off("degrade",p),null==_||null===(i=_.off)||void 0===i||i.call(_,N.V.PlayerCreated,g)}},[o,l])}({player:o,awemeInfo:i,isActive:l,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:b}),!function(e){let{player:i,isActive:o}=e;(0,t.useEffect)(()=>{if(i&&o){var e;let o=e=>{var o,l,t,n,d,r,u,a,v,s,_,f,p,y;let h=null==e?void 0:e.code;A.Z.sendLog("srDegrade",(0,c._)({enter_from:(0,J.yW)(),group_id:null==i?void 0:null===(o=i.config)||void 0===o?void 0:o.vid,vtype:null==i?void 0:i.vtype,quality_type:null==i?void 0:null===(l=i.curDefinition)||void 0===l?void 0:l.qualityType,gear_name:null==i?void 0:null===(t=i.curDefinition)||void 0===t?void 0:t.gearName,definition:null==i?void 0:null===(n=i.curDefinition)||void 0===n?void 0:n.definition,is_bytevc1:null==i?void 0:null===(d=i.curDefinition)||void 0===d?void 0:d.isH265,current_time:null==i?void 0:i.currentTime},(null==i?void 0:null===(a=i.plugins)||void 0===a?void 0:null===(u=a.srplugin)||void 0===u?void 0:null===(r=u.getStat)||void 0===r?void 0:r.call(u))||{},e||{},(0,ey.m)({player:i}))),g.Le.setConfig(g.gI.SrDegradeCode,null!=h?h:-1),(null==i?void 0:null===(f=i.plugins)||void 0===f?void 0:null===(_=f.srplugin)||void 0===_?void 0:null===(s=_.getStat)||void 0===s?void 0:null===(v=s.call(_))||void 0===v?void 0:v.renderDelta)>(null==e?void 0:e.defaultRenderDelta)&&il++;let w=null===(y=g.Le.getConfig(g.gI.AbtestData))||void 0===y?void 0:null===(p=y.SR)||void 0===p?void 0:p.renderDeltaAccumulate;il>w&&(0,eH.qQ)(m.LocalStorageKeys.srDegradePermanently,1),[2,3,-300,-600].includes(h)&&(window.srDegradeFinally=!0,g.Le.setConfig(g.gI.SrDegrade,1)),[-300,-600].includes(h)&&(0,eH.qQ)(m.LocalStorageKeys.srDegradePermanently,1)};return null==i||null===(e=i.on)||void 0===e||e.call(i,io.D.SR_DEGRADE,o),()=>{var e;null==i||null===(e=i.off)||void 0===e||e.call(i,io.D.SR_DEGRADE,o)}}},[i,o])}({player:o,isActive:l}),!function(e){let{player:i,awemeInfo:o,isActive:l}=e,{getLogInfo:n,getSpecialParams:d}=e;(0,t.useEffect)(()=>{if(!i||!l||(null==o?void 0:o.awemeType)===68)return;let e=d(),t=l=>{try{var t;let{author_id:d,group_id:r,log_pb:u,compilation_id:a,playlet_id:v,extraParams:s,aweme_type:_,trending_topic:m,first_tag_name:p,top:g,is_click_cover:y,is_pure:h,is_insert_wallpaper:w}=n(),{isH265:b}=(0,eE.Z)({awemeInfo:o,player:i}),{mediaTime:I}=it(i);A.Z.sendLog("videoEditListOffsetTime",(0,f._)((0,c._)({duration:1e3*I,is_ended:null==l?void 0:l.ended,is_click_cover:y,urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,P.mo)(),author_id:d,group_id:r,log_pb:u,compilation_id:a,playlet_id:v,is_insert_wallpaper:w,is_visible:String("visible"===document.visibilityState?1:0),is_mute:(null==i?void 0:i.muted)?"1":"0",aweme_type:_,trending_topic:m,first_tag_name:p,top:g,is_pure:h},s,e.videoPlayFinish||{}),{is_bytevc1:b,video_time:(0,eN.n)(null==o?void 0:null===(t=o.video)||void 0===t?void 0:t.duration)}))}catch(e){}};return i.on(L.Events.ENDED,t),()=>{!i.ended&&t(),i.off(L.Events.ENDED,t)}},[i,o,l])}({player:o,isActive:l,awemeInfo:i,getLogInfo:s,getSpecialParams:p}),!function(e){let{player:i,getLogInfo:o}=e;(0,t.useEffect)(()=>{if(!i)return()=>{};let e=e=>{let i=ev[null==e?void 0:e.pluginName];if((null==e?void 0:e.pluginName)==="fullscreen"&&(i=(0,ed.r)()?"hover_exit_full_screen":"hover_enter_full_webscreen"),!i)return;let l=null==o?void 0:o();A.Z.sendLog(i,{enter_from:(0,P.mo)(),player_display_mode:(0,P.Ok)(),group_id:(null==l?void 0:l.group_id)||""})};i.on("icon_mouseleave",e);let l=i.getPlugin("progress"),t=()=>{let e=null==o?void 0:o();A.Z.sendLog("hover_progress",{enter_from:(0,P.mo)(),player_display_mode:(0,P.Ok)(),group_id:(null==e?void 0:e.group_id)||""})};return null==l||l.addCallBack("mouseleave",t),()=>{i.off("icon_mouseleave",e),null==l||l.removeCallBack("mouseleave",t)}},[i])}({player:o,getLogInfo:s}),es({awemeInfo:i,player:o,getLogInfo:s})}({player:iv,isActive:o,awemeInfo:i,getIsChangingVideoSrc:im,getLogInfo:ip,getH265DegradeReportFlag:is,getSpecialParams:ig,getReportNetworkSpeed:C,getSupportHwClientFlag:i_,isNext:r,index:id}),null}},783468:function(e,i,o){o.d(i,{E:function(){return n}}),o(981168);var l=o(782442);let t={1:{width:1920,height:1080},2:{width:1280,height:720},3:{width:1024,height:576},4:{width:1024,height:576}},n=e=>{var i,o,n,d,r,u,a;if(null===(i=l.Le.getConfig(l.gI.AbtestData))||void 0===i?void 0:i.longtask)return -1;let v={definition:0},s=null==e?void 0:e.video,_=null==s?void 0:s.getBoundingClientRect(),c=(null==s?void 0:s.videoWidth)/(null==s?void 0:s.videoHeight);l.Le.setConfig(l.gI.videoRect,_);let f=null==e?void 0:null===(d=e.config)||void 0===d?void 0:null===(n=d.definition)||void 0===n?void 0:null===(o=n.list)||void 0===o?void 0:o.sort((e,i)=>(null==i?void 0:i.definition)-(null==e?void 0:e.definition));if(f&&c>1)for(let e=0;e<f.length;e++){let i=null!==(u=f[e].definition)&&void 0!==u?u:1,o=t[i];if(!((null==_?void 0:_.width)>(null==o?void 0:o.width))||!((null==_?void 0:_.height)>(null==o?void 0:o.height))){v.definition=i;break}}if(f&&c<1)for(let e=0;e<f.length;e++){let i=null!==(a=f[e].definition)&&void 0!==a?a:1,o=t[i];if(!((null==_?void 0:_.width)>(null==o?void 0:o.height))||!((null==_?void 0:_.height)>(null==o?void 0:o.width))){v.definition=i;break}}return(null==e?void 0:null===(r=e.curDefinition)||void 0===r?void 0:r.definition)<v.definition?1:0}},424985:function(e,i,o){o.d(i,{O:function(){return u}}),o(268917);var l=o(35730),t=o(782442),n=o(555106);let d=l.LocalStorageKeys.FrameInfoList,r=!1,u=e=>{var i,o,l,u,a,v,s;if((null===(i=t.Le.getConfig(t.gI.AbtestData))||void 0===i?void 0:i.useCache)===1&&r)return;let _=null!==(s=(0,n.$o)(d))&&void 0!==s?s:[],c=_.filter(e=>0===e.isH265),f=_.filter(e=>1===e.isH265);if(c.length>=5&&f.length>=5){r=!0;return}if(c.length>=5&&(null==e?void 0:null===(o=e.curDefinition)||void 0===o?void 0:o.isH265)===0||f.length>=5&&(null==e?void 0:null===(l=e.curDefinition)||void 0===l?void 0:l.isH265)===1)return;let m={isH265:null==e?void 0:null===(u=e.curDefinition)||void 0===u?void 0:u.isH265,total:null==e?void 0:null===(a=e.videoFrameInfo)||void 0===a?void 0:a.total,rate:null==e?void 0:null===(v=e.videoFrameInfo)||void 0===v?void 0:v.droppedRate};_.push(m),(0,n.qQ)(d,_)}},503230:function(e,i,o){o.d(i,{S:function(){return t}});var l=o(996503);let t=e=>{var i,o;let{player:t,qualityType:n}=e;return(0,l.I)({player:t})?-2:null!==(o=null==t?void 0:null===(i=t.curDefinition)||void 0===i?void 0:i.qualityType)&&void 0!==o?o:n}},395930:function(e,i,o){o.d(i,{$:function(){return t}});var l=o(616175);let t=e=>{var i,o,t,n,d,r;let{player:u,awemeInfo:a}=e,v={};try{v=JSON.parse((null==a?void 0:null===(t=a.video)||void 0===t?void 0:null===(o=t.meta)||void 0===o?void 0:o.volume_info)||"{}")}catch(e){}return{loudness_range_end:null==v?void 0:v.LoudnessRangeEnd,loudness_range_start:null==v?void 0:v.LoudnessRangeStart,loudness_range:null==v?void 0:v.LoudnessRange,maximum_momentary_loudness:null==v?void 0:v.MaximumMomentaryLoudness,maximum_short_term_loudness:null==v?void 0:v.MaximumShortTermLoudness,peak:null==v?void 0:v.Peak,target_lufs:null!==(n=null==u?void 0:u.lufs)&&void 0!==n?n:l.G7,source_lufs:null!==(r=Number(null!==(d=null==a?void 0:null===(i=a.video.meta)||void 0===i?void 0:i.loudness)&&void 0!==d?d:0))&&void 0!==r?r:0}}},540801:function(e,i,o){o.d(i,{U:function(){return l},_:function(){return t}});let l=(e,i)=>{var o,l,t,n;let d=(null==e?void 0:null===(o=e.buffered)||void 0===o?void 0:o.length)||0,r=null!==(l=e.removedBuffer)&&void 0!==l?l:0;if(!e||!e.buffered||d<=0)return Math.min(r,i);try{let o=0,{buffered:l}=e||{};for(let e=0;e<(null==l?void 0:l.length);e++)o+=(null==l?void 0:null===(t=l.end)||void 0===t?void 0:t.call(l,e))-(null==l?void 0:null===(n=l.start)||void 0===n?void 0:n.call(l,e));return Math.min(o+r,i)}catch(e){return Math.min(r,i)}},t=e=>{let i=null==e?void 0:e.getBufferedRange();return i&&i[1]?Math.round((i[1]-e.currentTime)*1e3):0}},992561:function(e,i,o){o.d(i,{N:function(){return d}});var l=o(782563);let t=e=>{let i={};if("string"==typeof e)try{i=JSON.parse(e)}catch(e){i={}}return i},n=e=>{let i={};try{var o,n,d,r,u;if(!(0,l.DT)()||!(null==e?void 0:e.video)||(null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.nodeType)!==1)return{};let a=null==e?void 0:null===(d=e.video)||void 0===d?void 0:null===(n=d.querySelectorAll)||void 0===n?void 0:n.call(d,"source");for(let e=0;e<(null==a?void 0:a.length);e++){let o=a[e];if(null==o?void 0:null===(r=o.execute)||void 0===r?void 0:r.call(o,"isActive","")){let e=null==o?void 0:null===(u=o.execute)||void 0===u?void 0:u.call(o,"getMediaInfo","");i=t(e);break}}}catch(e){i={}}return i},d=e=>{var i;let o=null===(i=n(e))||void 0===i?void 0:i.video_platform_decoder;return void 0===o?-1:o}},889382:function(e,i,o){o.d(i,{D:function(){return n}});var l=o(520739);o(779788);let t=(e,i,o)=>{try{var l,t;let n=(null==e?void 0:null===(t=e.plugins)||void 0===t?void 0:null===(l=t.mp4encryptplayer)||void 0===l?void 0:l.states)||[],d=n.find(e=>(null==e?void 0:e.state)===i),r=n.find(e=>(null==e?void 0:e.state)===o),u=(null==r?void 0:r.t2)-(null==d?void 0:d.t2);return Number.isFinite(u)?u:0}catch(e){return 0}},n=e=>{let{player:i,isChangeVideoSrc:o=!1,slideStartTime:n=!1,data:d,loadedDataTime:r}=e,u={};try{var a,v,s,_,c,f,m,p,g;o?u.is_slide_loadeddata=-1:n&&(u.is_slide_loadeddata=n-r>0?1:0,u.slide_to_loadeddata=r-n);let e=null==i?void 0:null===(f=i.plugins)||void 0===f?void 0:null===(c=f.mp4encryptplayer)||void 0===c?void 0:null===(_=c.states)||void 0===_?void 0:null===(s=_.find)||void 0===s?void 0:null===(v=s.call(_,e=>"PRELOAD_ERROR"===e.state))||void 0===v?void 0:null===(a=v.data)||void 0===a?void 0:a.t,y=null==i?void 0:null===(g=i.plugins)||void 0===g?void 0:null===(p=g.mp4encryptplayer)||void 0===p?void 0:null===(m=p.states)||void 0===m?void 0:m.map(e=>(e.data=void 0,e));return i.stages=(0,l._)({playerinit_to_loadstart:null==d?void 0:d.startCostTime,playerinit_to_loadeddata:null==d?void 0:d.loadedCostTime,playerstart_to_mp4metaready:t(i,"PLAYER_START_INIT","MP4_META_READY"),mp4init_to_mp4metaready:t(i,"MP4_INIT","MP4_META_READY"),playerinitfinally_to_loadstart:t(i,"PLAY_INIT_FINALLY","LOAD_START"),mp4metaready_to_loadstart:t(i,"MP4_META_READY","LOAD_START"),loadstart_to_mseopen:t(i,"LOAD_START","MSE_OPEN"),mseinitsegok_to_appenddataok:t(i,"MSE_INITSEG_OK","APPEND_DATA_OK"),mseinitseg_to_mseinitsegok:t(i,"MSE_INITSEG","MSE_INITSEG_OK"),appenddataok_to_loadeddata:t(i,"APPEND_DATA_OK","LOADED_DATA"),mseopen_to_loadeddata:t(i,"MSE_OPEN","LOADED_DATA"),mse_all_phrase:JSON.stringify(y),preload_error:e},u),i.stages||{}}catch(e){return{}}}},459502:function(e,i,o){o.d(i,{L:function(){return n},a:function(){return t}});var l=o(352165);let t=(e,i)=>!e||1===i&&e.currentTime>=e.duration?0:i,n=e=>{if(!e)return 0;try{var i;let o=(e.cumulateTime||0)/1e3,t=(null==e?void 0:null===(i=e.curDefinition)||void 0===i?void 0:i.realBitrate)||0;return(0,l.e)(o*t)}catch(e){return 0}}},188592:function(e,i,o){o.d(i,{A:function(){return l}});let l=e=>{let i;switch(e.vtype||""){case"MP4_MSE":i=1;break;case"MP4":i=2;break;case"MP4_1":case"MP4_2":i=3;break;default:i=0}return i}},795454:function(e,i,o){o.d(i,{P:function(){return n}});var l=o(352165),t=o(40970);let n=e=>{let i={preloadTime:0,preloadSize:0,startBuffer:0,audioDuration:0,minDuration:0};if(!e)return i;try{var o,n,d,r;let{preLoadData:u,plugins:a}=e||{},{buffer:v=0,startBuffer:s=0}=null==e?void 0:null===(n=e.plugins)||void 0===n?void 0:null===(o=n.xglogger)||void 0===o?void 0:o.levelInfo;if(i.startBuffer=s,(0,t.me)(e)){let{duration:e,byteLength:o,audioDuration:l=0}=u||(null==a?void 0:null===(d=a.mp4encryptplayer)||void 0===d?void 0:d.preLoadData)||{};return i.preloadSize=o,i.preloadTime=e,i.audioDuration=1e3*l,i.minDuration=Math.min(1e3*e,1e3*l)||0,i}if(v>0){let o=v/1e3,t=(null==e?void 0:null===(r=e.curDefinition)||void 0===r?void 0:r.realBitrate)||0,n=(0,l.e)(o*t);i.preloadSize=n,i.preloadTime=o}return i}catch(e){return{preloadSize:0,preloadTime:0,startBuffer:0,audioDuration:0,minDuration:0}}}},301870:function(e,i,o){o.d(i,{Z:function(){return E}});var l=o(520739),t=o(878389),n=o(256277),d=o(367366),r=o(782442),u=o(726406),a=o(362501),v=o(391779),s=o(301699),_=o(276152),c=o(320544),f=o(503230),m=o(598434),p=o(322519),g=o(77651),y=o(383212),h=o(996503),w=o(683062),b=o(189634),I=o(764942),L=o(226355);function E(e){var i,o,E,S,T,R,C,P,D,k,A,M,O,F,N,V;let{group_id:q,compilation_id:x="",is_csr:B=1,extraParams:Z={},host:U,vtype:G,player:W,awemeInfo:K,h265DeGrade:z,logInfo:J,supportHw:H,fetchExpired:Y}=e,{aweme_type:Q,video_play_mode:$,is_landscape:j,action_type:X}=J,{isH265:ee,videoFormat:ei}=(0,c.Z)({awemeInfo:K,player:W}),{isPcdnSource:eo}=(0,b.E)(U,null==W?void 0:null===(i=W.config)||void 0===i?void 0:i.url),el=(null==K?void 0:null===(S=K.video)||void 0===S?void 0:null===(E=S.bitRateList)||void 0===E?void 0:null===(o=E[0])||void 0===o?void 0:o.qualityType)||(null==K?void 0:null===(T=K.video)||void 0===T?void 0:T.qualityType);(0,y.v)();let et=(0,y.G)(),en=null==W?void 0:null===(P=W.config)||void 0===P?void 0:null===(C=P.url)||void 0===C?void 0:null===(R=C[0])||void 0===R?void 0:R.src,ed=(0,l._)((0,t._)((0,l._)({urlParamList:["previous_page","tab_name"],group_id:q,compilation_id:x,is_csr:B,host:U,vtype:G,aweme_type:Q,action_type:X,is_ad:(0,n.Jt)(K)?1:0,is_compilation:(null==K?void 0:null===(D=K.mixInfo)||void 0===D?void 0:D.mixId)?1:0,is_full_screen:(0,d.r)(),is_show_comment:r.Le.getConfig(r.gI.IsCommetTab)?1:0,video_format:ei,video_play_mode:$,is_landscape:j,is_bytevc1:ee,play_order:et,is_supported_265:(0,h.VV)()?1:0,is_265_degrade:z,is_support_hw:H,v_like_cnt:null==K?void 0:null===(k=K.stats)||void 0===k?void 0:k.diggCount,v_share_cnt:null==K?void 0:null===(A=K.stats)||void 0===A?void 0:A.shareCount,v_comment_cnt:null==K?void 0:null===(M=K.stats)||void 0===M?void 0:M.commentCount,v_download_cnt:null==K?void 0:null===(O=K.stats)||void 0===O?void 0:O.downloadCount,v_forward_cnt:null==K?void 0:null===(F=K.stats)||void 0===F?void 0:F.forwardCount,vduration:null==K?void 0:null===(N=K.video)||void 0===N?void 0:N.duration,is_have_pcdn:Number(eo),is_supported_hevc1_hw:(0,u._u)()?1:0,is_supported_264_hw:(0,u.b4)()?1:0,player_version:null==W?void 0:W.version,feature_id:null==W?void 0:null===(V=W.curDefinition)||void 0===V?void 0:V.featureId,video_quality:(0,f.S)({player:W,qualityType:el}),if_invisible:(0,a.Vr)()?"1":"0",is_small_window:(0,I.f)()?"1":"0",small_window_scene:(0,I.f)()?L.h.getState().smallWindowScene:""},(0,m.Z)(W),(0,p.Z)(),Z),{fetch_expired:Y,active_expired:en?(0,v.q)(en):-1}),(0,g.m)({player:W}),(0,g.B)({player:W}));return(0,s.Vw)(_.H.video_request,(0,t._)((0,l._)({},ed),{aweme_info:K})),w.Z.sendLog("videoRequest",ed),!0}},268088:function(e,i,o){o.d(i,{Z:function(){return _}});var l=o(520739),t=o(256277),n=o(726406),d=o(383212),r=o(320544),u=o(598434),a=o(322519),v=o(996503),s=o(683062);function _(e){var i,o;let{group_id:_,compilation_id:c="",vduration:f,duration:m,is_csr:p=1,is_success:g,videoQuality:y="",extraParams:h={},host:w,vtype:b,player:I,awemeInfo:L,logInfo:E,h265DeGrade:S,supportHw:T}=e,{aweme_type:R,video_play_mode:C,is_landscape:P,action_type:D}=E,{isH265:k,videoFormat:A}=(0,r.Z)({awemeInfo:L,player:I}),M=(0,d.G)();return s.Z.sendLog("videoRequestResponse",(0,l._)({urlParamList:["previous_page","tab_name"],group_id:_,compilation_id:c,vduration:f,video_quality:y,video_format:A,is_success:g,duration:m,is_csr:p,host:w,vtype:b,action_type:D,is_ad:(0,t.Jt)(L)?1:0,is_compilation:(null==L?void 0:null===(i=L.mixInfo)||void 0===i?void 0:i.mixId)?1:0,aweme_type:R,video_play_mode:C,is_landscape:P,is_bytevc1:k,play_order:M,is_supported_265:(0,v.VV)()?1:0,is_265_degrade:S,is_support_hw:T,is_hw:(null==I?void 0:null===(o=I.config)||void 0===o?void 0:o.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,player_version:null==I?void 0:I.version},(0,u.Z)(I),(0,a.Z)(),h)),!0}},392334:function(e,i,o){o.d(i,{g:function(){return w}});var l=o(520739);o(675373),o(250440);var t=o(563097),n=o(88648),d=o(734123),r=o(870105),u=o(35730),a=o(555106),v=o(399796),s=o(637005),_=o(860684),c=o(894416),f=o(516599),m=o(205457),p=o(962820),g=o(597321);let y=e=>{let{isActive:i,abtestData:o}=e,l=(0,_.n)(),t=(0,r.U)();return(0,n.useEffect)(()=>{if(l&&i){let e=e=>{if((null==e?void 0:e.isInternalOp)!==!0)0===(0,a.$o)(u.LocalStorageKeys.PLAYER_IS_MUTE)&&l.muted&&(0,a.qQ)(u.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,a.qQ)(u.LocalStorageKeys.PLAYER_VOLUME,l.volume),(0,a.qQ)(u.LocalStorageKeys.PLAYER_IS_MUTE,l.muted?1:0),(0,p.c)({isMute:l.muted,volume:l.volume})};new Promise((e,i)=>{let{volume:t,autoplayMuted:n}=(0,p.J)(o);try{var d,r;null===(0,a.$o)(u.LocalStorageKeys.PLAYER_VOLUME)&&(0,a.qQ)(u.LocalStorageKeys.PLAYER_VOLUME,t),null===(0,a.$o)(u.LocalStorageKeys.PLAYER_IS_MUTE)&&(0,a.qQ)(u.LocalStorageKeys.PLAYER_IS_MUTE,0),l.video.volume=t;let i=l.playerId&&l.playerId===(null===(d=window.__QUICK_PLAYER)||void 0===d?void 0:d.playerId);!(l.__isInlinePlayer&&!l.paused)&&(l.video.muted=n),!(i&&!l.paused)&&(l.video.muted=n),null===(r=l.getPlugin("volume"))||void 0===r||r.onVolumeChange(),!v.Q.getItem({sKey:u.CookieKeys.VolumeInfo})&&v.Q.setItem(u.CookieKeys.VolumeInfo,{isUserMute:!1,isMute:l.video.muted,volume:l.video.volume}),e(0)}catch(e){l.volume=t,!(l.__isInlinePlayer&&!l.paused)&&(l.video.muted=n),i(e)}}).then(()=>{null==l||l.on(d.Events.VOLUME_CHANGE,e)}).catch(e=>{});let i=s.listen(s.EVENT.syncInteraction,()=>{if(null==l?void 0:l.video){let{volume:e,autoplayMuted:i}=(0,p.J)(o);l.video.volume=e,l.video.muted=i}});return()=>{null==l||l.off(d.Events.VOLUME_CHANGE,e),i()}}},[l,i,o,t]),(0,n.useEffect)(()=>{if(i&&l){let e=e=>{((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume")&&setTimeout(()=>{(0,p.c)({isUserMute:!0===l.muted||0===l.volume,isMute:l.muted,volume:l.volume})})};return l.on(d.Events.USER_ACTION,e),()=>{l.off(d.Events.USER_ACTION,e)}}},[l,o,i]),(0,n.useEffect)(()=>{if(i&&l){let e=e=>{("volumeDown"===e.action||"volumeUp"===e.action)&&setTimeout(()=>{(0,p.c)({isUserMute:0===l.volume,isMute:l.muted,volume:l.volume})})};return l.on(g.B.CustomShortCut,e),()=>{l.off(g.B.CustomShortCut,e)}}},[l,o,i]),null},h=e=>{let{isActive:i,abtestData:o,awemeInfo:l,scene:t="",toast:d}=e,r=(0,_.n)();return(0,n.useEffect)(()=>{if(r&&i){let e=setTimeout(()=>{var e,i,o;r.muted=!0,r.volume=0,r.musicMute=!0,null===(o=r.plugins)||void 0===o||null===(i=o.volume)||void 0===i||null===(e=i.disable)||void 0===e||e.call(i)});return()=>{var i,o,l;clearTimeout(e),r.musicMute=!1,null===(l=r.plugins)||void 0===l||null===(o=l.volume)||void 0===o||null===(i=o.enable)||void 0===i||i.call(o)}}},[r,i]),(0,n.useEffect)(()=>{if(r&&i&&["modal","detail"].includes(t)){if(d){d("该声音不可用");return}f.F.info("该声音不可用")}},[r,i,t]),null},w=e=>{var i,o;let n=(0,c.N)(),{awemeInfo:d}=e;return(null==d?void 0:null===(o=d.status)||void 0===o?void 0:null===(i=o.videoMute)||void 0===i?void 0:i.isMute)?(0,t.jsx)(h,(0,l._)({},e)):(0,t.jsx)(m.k,{componentName:"VolumePlugin",Slardar:n,children:(0,t.jsx)(y,(0,l._)({},e))})}},189634:function(e,i,o){o.d(i,{E:function(){return l}}),o(882732),o(544943),o(874386),o(338172);let l=(e,i)=>{if("string"!=typeof e||!Array.isArray(i))return{pcdnSrcIndex:-1,isPcdnSource:!1};let o=i.findIndex(e=>!!(e.src&&e.ispcdn));if(o>-1){let l=i[o].src,t=new URL(e.startsWith("https:")?e:`https:${e}`),n=new URL(l.startsWith("https:")?l:`https:${l}`),d=t.host===n.host;return{isPcdnSource:d,pcdnSrcIndex:d?o:-1}}return{pcdnSrcIndex:o,isPcdnSource:!1}}},473596:function(e,i,o){o.d(i,{N:function(){return d},O:function(){return r}});var l=o(79307),t=o(637005),n=o(782442);let d=e=>{t.emit(t.EVENT.syncInteractionStatus,{action:"lookVideo",awemeId:e.awemeId,fromUserId:e.authorInfo.secUid,extraAwemeInfo:{isFromSort:e.isFromSort}})},r=e=>{var i;let{awemeInfo:o}=e,t=n.Le.getConfig(n.gI.UnLookVideos);if(!!t)(null===(i=t[null==o?void 0:o.awemeId])||void 0===i?void 0:i.status)===l.Pl.UnLook&&(t[null==o?void 0:o.awemeId].status=l.Pl.Looked,d(o))}},650197:function(e,i,o){o.d(i,{B:function(){return n}}),o(250440);var l=o(782442),t=o(32167);let n=e=>{var i,o,n;return"discover"!==(0,t.vM)()?null==e?void 0:null===(i=e.chanFeedVideo)||void 0===i?void 0:i.source:(l.Le.getConfig(l.gI.JingxuanCacheAwmeInfoIds)||[]).includes((null==e?void 0:e.awemeId)||"")?"jingxuan_first_page_cahce":(null==e?void 0:null===(o=e.webSelectInfo)||void 0===o?void 0:o.source)||(null==e?void 0:null===(n=e.chanFeedVideo)||void 0===n?void 0:n.source)}},392323:function(e,i,o){o.d(i,{$I:function(){return u},Fp:function(){return a},yr:function(){return r}}),o(250440),o(874386);var l=o(88648),t=o(782442),n=o(658065),d=o(84235);let r=e=>{try{if(performance.getEntriesByName("recommend_mounted").length>0){var i,o,l,r;performance.mark("recommend_video_play"),performance.measure("recommendMountedToPlay","recommend_mounted","recommend_video_play");let u=null===(i=performance.getEntriesByName("recommendMountedToPlay")[0])||void 0===i?void 0:i.duration,a=null!==(o=t.Le.getConfig(t.gI.PageEntered))&&void 0!==o?o:[],v=!a.includes(location.pathname);v&&t.Le.setConfig(t.gI.PageEntered,[...a,location.pathname]),!isNaN(u)&&d.i.sendLog("recommendFirstVideoPlay",{cost:Math.floor(u),from_cache:null!==(l=null==e?void 0:e.fromCache)&&void 0!==l?l:0,is_first:v?1:0,path:location.pathname,enter_from:(0,n.yW)(),is_live:null!==(r=null==e?void 0:e.isLive)&&void 0!==r?r:0}),performance.clearMarks("recommend_mounted"),performance.clearMarks("recommend_video_play"),performance.clearMeasures("recommendMountedToPlay")}}catch(e){}},u=e=>{(0,l.useEffect)(()=>(performance.mark("multi_page_mounted"),()=>{performance.getEntriesByName("multi_page_mounted").length>0&&performance.clearMarks("multi_page_mounted")}),[e])},a=()=>{try{if(performance.getEntriesByName("multi_page_mounted").length>0){var e;performance.mark("page_available"),performance.measure("mountedToAvailable","multi_page_mounted","page_available");let i=null===(e=performance.getEntriesByName("mountedToAvailable")[0])||void 0===e?void 0:e.duration;!isNaN(i)&&d.i.sendLog("pageMountedToAvailable",{cost:Math.floor(i),path:location.pathname}),performance.clearMarks("multi_page_mounted"),performance.clearMarks("page_available"),performance.clearMeasures("mountedToAvailable")}}catch(e){}}},140230:function(e,i,o){o.d(i,{V:function(){return n}});var l=o(555106),t=o(35730);function n(){(0,l.qQ)(t.LocalStorageKeys.LatestSlideSideButtonUsed,Date.now())}},870105:function(e,i,o){o.d(i,{U:function(){return d}}),o(874386);var l=o(88648),t=o(244885),n=o(287209);let d=()=>{let e=(0,l.useContext)(t.I),[i,o]=(0,l.useState)(!0);return((0,n.m)(e=>o(e)),e)?e.isActive:i}},900674:function(e,i,o){o.d(i,{v:function(){return l}});let l=(0,o(88648).createContext)(null)},366334:function(e,i,o){o.d(i,{A4:function(){return S},DS:function(){return L},Id:function(){return b},NN:function(){return _},Rh:function(){return m},XL:function(){return w},bV:function(){return T},fd:function(){return g},v6:function(){return c}});var l=o(520739),t=o(878389);o(779788),o(675373);var n=o(496349),d=o(493523),r=o(349135),u=o(231755),a=o(237156);let{COMMON_SEARCH_PARAMS:v}=n||{};function s(e){let{aweme_list:i=[],status_code:o,log_pb:l,position:t,is_force_insert:n=!1}=e;return{statusCode:o,position:t,isForceInsert:n,hasMore:!0,awemeList:(0,r.TN)({awemeList:i||[],logPb:l&&JSON.stringify(l)}),logPb:l&&JSON.stringify(l)}}async function _(){let{tagId:e="",count:i=10,refreshIndex:o=1,globalwid:n="",pullType:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,_=await (0,u.U2)("/aweme/v1/web/tab/feed/",(0,t._)((0,l._)({},v),{tag_id:e,count:i,refresh_index:o,video_type_select:1,globalwid:n,pull_type:d}),{errorTags:{tagId:e}},void 0,a,{});return(0,r.RL)(_,s)}async function c(e){let{count:i=10,refreshIndex:o=1,scene:n="recommend"}=e||{},d=await (0,u.v_)("/aweme/v2/web/tab_listen/feed/",(0,t._)((0,l._)({},v),{count:i,pull_type:2,refresh_index:o,web_listen_feed_scene:n}),{},void 0,null);return(0,r.RL)(d,s)}function f(e){let{status_code:i,log_pb:o,ch_info:l}=e;return{statusCode:i,info:(0,r.P$)(l),logPb:o&&JSON.stringify(o)}}async function m(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{chId:o,queryType:n=0}=e,d=await (0,u.U2)("/aweme/v1/web/challenge/detail/",(0,t._)((0,l._)({},v),{ch_id:o,query_type:n}),{},void 0,i,{});return(0,r.RL)(d,f)}function p(e){let{aweme_list:i=[],status_code:o,log_pb:l,has_more:t,cursor:n}=e;return{statusCode:o,awemeList:(0,r.TN)({awemeList:i||[],logPb:l&&JSON.stringify(l)}),logPb:l&&JSON.stringify(l),hasMore:t,cursor:n}}async function g(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{chId:o,hashtagName:n,queryType:d=0,sortType:s=a.H.Comprehensive,count:_,cursor:c,isCommerce:f=!1}=e,m=await (0,u.U2)(f?"/aweme/v1/web/commerce/challenge/aweme/":"/aweme/v1/web/challenge/aweme/",(0,t._)((0,l._)({},v),{ch_id:o,hashtag_name:n,query_type:d,sort_type:f?0:s,offset:c,cursor:c,count:_}),{},void 0,i,{});return(0,r.RL)(m,p)}function y(e){let{music_info:i,status_code:o,log_pb:l}=e;return{statusCode:o,musicInfo:(0,r.o0)(i),logPb:l&&JSON.stringify(l)}}function h(e){let{music_info:i,status_code:o,log_pb:l,msg:t,res_list:n,extra:d}=e,r="";try{r=JSON.stringify(l)}catch(e){}return{musicInfo:i,statusCode:o,logPb:r,msg:t,resList:n,extra:d}}async function w(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{musicId:o,scene:n=1}=e,d=await (0,u.U2)("/aweme/v1/web/music/detail/",(0,t._)((0,l._)({},v),{music_id:o,scene:n}),{},void 0,i,{});return(0,r.RL)(d,y)}async function b(e){let{musicId:i,action:o}=e,t=await (0,u.v_)("/aweme/v1/web/music/collect/",(0,l._)({},v),{music_id:i,type:o,action:o},void 0,null);return(0,r.RL)(t,h)}function I(e){let{aweme_list:i=[],status_code:o,log_pb:l,has_more:t,cursor:n}=e;return{statusCode:o,awemeList:(0,r.TN)({awemeList:i||[],logPb:l&&JSON.stringify(l)}),logPb:l&&JSON.stringify(l),hasMore:t,cursor:n}}async function L(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{musicId:o,count:n=10,cursor:d}=e,a=await (0,u.U2)("/aweme/v1/web/music/aweme/",(0,t._)((0,l._)({},v),{count:n,cursor:d,music_id:o}),{},void 0,i,{});return(0,r.RL)(a,I)}function E(e){let{extra:i,cursor:o,status_code:l,has_more:t,challenge_list:n=[],qs:d,is_match:u,keyword_disabled:a}=e;return{statusCode:l,hasMore:t,challengeList:(null==n?void 0:n.map(e=>(0,r.P$)(null==e?void 0:e.challenge_info)))||[],qs:d,isMatch:u,cursor:o,keywordDisabled:a,extra:{now:null==i?void 0:i.now,logid:null==i?void 0:i.logid}}}async function S(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{keyword:o,count:n=10,cursor:d}=e,a=await (0,u.U2)("/aweme/v1/web/challenge/search/",(0,t._)((0,l._)({},v),{count:n,cursor:d,keyword:o}),{},void 0,i,{});return(0,r.RL)(a,E)}async function T(){let{scene:e=d.t.PcOftenWatch,ids:i=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],0===i.filter(e=>e).length)return;let o=await (0,u.v_)("/aweme/v1/web/write/impression/",(0,l._)({},v),{scene:e,ids:i.join(" ")});return(0,r.RL)(o,s)}}}]);