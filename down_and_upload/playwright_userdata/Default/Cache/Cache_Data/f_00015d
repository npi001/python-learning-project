"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["43386"],{876147:function(e,t,l){l.d(t,{Z:function(){return t_}});var i=l("520739"),n=l("878389"),o=l("563097"),a=l("88648"),r=l("746864"),d=l("902845"),s=l("782563"),u=l("468742"),c=l("994366");l("874386"),l("179133"),l("826893"),l("250440");var v=l("713097"),m=l.n(v),f=l("549519"),h=l("909543"),p=l("567754"),_=l("784492"),g=l("871415"),x=l("447298"),w=l("532765"),y=l("881155"),I=l("212233"),S=l("79307"),j=l("720359"),C=l("991105"),N=l("617297"),b=l("219684"),k=l("576669"),E=l("150566"),R=l("387787"),T=l("367366"),F=l("32167"),L=l("658065"),P=l("375944"),M=l("849229"),A=l("637005"),D=l("734017"),U=l("900674"),B=l("208987"),V=l("200534"),O=l("632685"),W=l("758590"),H=l("90519"),Z=l("316684"),z=l("138593"),G=l("439087"),q=l("366334"),$=l("433188"),J=l("14108"),Y=l("903868");let Q=e=>{var t,l;let{originAwemeInfo:i}=e,[n,o]=(0,a.useState)(0),[r,d]=(0,a.useState)([i]),[s,u]=(0,a.useState)(),[c,v]=(0,a.useState)(),m=(0,a.useRef)(1),f=(0,a.useRef)(!1),h=(0,a.useRef)(0),g=(0,a.useRef)(null),{isListenVideoMiniWin:x}=(0,Y.Iq)(e=>{let{isListenVideoMiniWin:t}=e;return{isListenVideoMiniWin:t}});(0,_.Z)(()=>{!x&&(d([i]),o(0),h.current=1,f.current=!1,m.current=1,u(null),v(null),g.current=null)},[x]),(0,a.useEffect)(()=>{if(!!x)(async()=>{if(4>=Math.abs(r.length-n)&&!f.current){f.current=!0;let e=await (0,q.v6)({count:10,refreshIndex:m.current,scene:"detail"});if(f.current=!1,0===e.statusCode&&0!==e.awemeList.length)m.current+=1,d(t=>{let l=e.awemeList.filter(e=>(0,$.P)(e)).filter(e=>!t.find(t=>t.awemeId===e.awemeId)),i=[...t,...l];return h.current===t.length-1&&!g.current&&(u(i[h.current+1]||null),v(i[h.current-1]||null),g.current=i[h.current+1]||null),i})}})()},[n,x]);let w=(0,a.useCallback)(e=>{let{newIndex:t,changeMode:l}=e;if(void 0!==t){let e=r[t+1]||null,l=r[t-1]||null;u(e),g.current=e,v(l),o(t),h.current=t,A.emit(A.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",type:"disablePrevStatusSync",newVal:!l}),A.emit(A.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",newVal:!e,type:"disableNextStatusSync"});return}"incr"===l?o(e=>{let t=Math.min(e+1,r.length-1),l=r[t+1]||null,i=r[t-1]||null;return h.current=t,A.emit(A.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",type:"disablePrevStatusSync",newVal:!i}),A.emit(A.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",newVal:!l,type:"disableNextStatusSync"}),u(l),g.current=l,v(i),t}):"decr"===l&&o(e=>{let t=Math.max(e-1,0),l=r[t+1]||null,i=r[t-1]||null;return h.current=t,A.emit(A.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",type:"disablePrevStatusSync",newVal:!i}),A.emit(A.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",newVal:!l,type:"disableNextStatusSync"}),u(l),g.current=l,v(i),t})},[o,r]),y={relateAwemeId:null==s?void 0:s.awemeId,url:(0,J.$N)(null==s?void 0:s.awemeId,(0,p.stringify)({pre_vid:null===(t=r[n])||void 0===t?void 0:t.awemeId,previous_page:(0,L.yW)(),cursor:0,count:10})),awemeId:null==s?void 0:s.awemeId,img:null==s?void 0:s.video.cover,desc:null==s?void 0:s.desc},I={relateAwemeId:null==c?void 0:c.awemeId,url:(0,J.$N)(null==c?void 0:c.awemeId,(0,p.stringify)({pre_vid:null===(l=r[n])||void 0===l?void 0:l.awemeId,previous_page:(0,L.yW)(),cursor:0,count:10})),awemeId:null==c?void 0:c.awemeId,img:null==c?void 0:c.video.cover,desc:null==c?void 0:c.desc};return{listenVideoFeedIndex:n,changeListenVideoFeedIndex:w,nextListenVideo:s,prevListenVideo:c,nextVideoInfo:y,prevVideoInfo:I}};var K=l("307362"),X=l("205457"),ee=l("962850"),et=l("947630");l("950331"),l("779788"),l("268917");var el=l("948375"),ei=l("340290"),en=l("55426"),eo=l("482092"),ea=l("770673");let er={statusCode:0,data:[],awemeId:"",hasMore:!1,nextVideoInfo:!1,logPb:""},ed="douyin_detail_played_awmeme",es=()=>{let e=[];try{e=JSON.parse(sessionStorage.getItem(ed)||"[]")||[]}catch(e){}return e},eu=e=>{let t=es();try{t.unshift(e),t.splice(4),sessionStorage.setItem(ed,JSON.stringify(t))}catch(e){}return t};var ec=l("213303"),ev=l("864545"),em=l("595456"),ef=l("465779"),eh=l("430048"),ep={hidden:"ZZ3NbGqK",container:"CjNuHvj4",ohosStyle:"B58n5u6t",leftContainer:"MRADF45Z",rightContainer:"W_7gCbBd",playerContainer:"TYOxWsbM",isNewPlayer:"pMZsZmuc",spiderContainer:"z8i0iRqs",fakeVideo:"CVDmqwY9",smallSecreenCt:"BoKJI3dD",fullScreenContainer:"tZDJSwJi",togglingFullScreen:"i0noYz18",activityCard:"GK0rQP1Q",commentShow:"U3a51oeG",commentContainer:"es3QDBkJ",isShowActivityCard:"cry1yOr7",videoInfo:"sJhfX08v",videoToast:"ORi8Onqf",miniWinToast:"AL24ckod",videoToastContainer:"Yazqg0dV",guideToStay:"CXz8N8uD",awemeSearchEngine:"PNrFOHbg",chapterUiAdapter:"Wdmyr1wC",sideBarHidden:"Au_pYoif",sideBarInnerWrapper:"Jrhu1mMe",chapterPlayer:"oM95h5_m",chapterSideBar:"jpnr3weY",anchor:"t7NBSFGO",anchorFullscreen:"kCyl7cK8",outerActivityCard:"t_I0Z49O",fixed:"DF3Sd2Ko",card:"hBDIpRjA"},e_=l("476155"),eg=l("595358"),ex=l("128231"),ew=l.n(ex);let ey=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=ew()(()=>{t(!!window.matchMedia("(min-width: 1032px)").matches)},250);return e(),history.scrollRestoration="manual",window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e};var eI=l("35097"),eS=l("161045");let ej=e=>{let{player:t,awemeInfo:l,chapterScrollElRef:i,playerContainerRef:n}=e,[o,r]=(0,a.useState)(-1),[d,s]=(0,a.useState)(!1),[u,c]=(0,a.useState)(300),v=null==l?void 0:l.chapterInfo,m=(0,a.useRef)(""),f=(0,a.useRef)(!0),h=e=>{null==e||e.stopPropagation()},p=(0,a.useCallback)(()=>{null!==n.current&&c(Math.max(.5625*n.current.getBoundingClientRect().width+60,300))},[n]);return(0,a.useEffect)(()=>{if(t&&(null==v?void 0:v.status)){let e=e=>{let{list:t}=v,l=t.map(e=>e.timestamp),i=-1;for(let t=0;t<l.length;t++)e>=l[t]&&(i=t);r(i)};e(t.currentTime||0);let l=t=>{var l;e((null!==(l=t.currentTime)&&void 0!==l?l:0)*1e3)};return t.on("timeupdate",l),()=>{t.off("timeupdate",l)}}},[t,v]),(0,a.useEffect)(()=>{if(i.current){var e;return null===(e=i.current)||void 0===e||e.addEventListener("wheel",h),()=>{var e;null===(e=i.current)||void 0===e||e.removeEventListener("wheel",h)}}},[i,l]),(0,a.useEffect)(()=>{if(m.current!==(null==l?void 0:l.awemeId)){var e;s(!1),m.current=null!==(e=null==l?void 0:l.awemeId)&&void 0!==e?e:""}},[l]),(0,a.useEffect)(()=>{if(null==v?void 0:v.status){let e=eS.Z.bind(n.current,()=>{p()});return()=>{null==e||e()}}},[v,n,p]),(0,a.useEffect)(()=>{p()},[p]),{chapterProgress:o,chapterSliderShow:d,setChapterSliderShow:s,triggerChapterSliderShow:()=>{if(!!f.current)f.current=!1,setTimeout(()=>{f.current=!0},500),s(!d)},chapterMaxWidth:u}};var eC=l("984439"),eN=l("226451");l("413806");var eb=l("439837"),ek=l.n(eb),eE=l("260693"),eR=l("868872"),eT=l("594781"),eF=l("422959"),eL=l("785427"),eP=l("915800"),eM=l("473677"),eA=l("17750"),eD=l("234048"),eU=l("240894"),eB=l("823685"),eV=l("553173"),eO=l("34644"),eW=l("819283"),eH=l("877408"),eZ=l("643728"),ez=l("247056"),eG=l("467969"),eq={videoInfoContainer:"mGJfHPn4",button:"yiI17xZR",title:"idrZUbq7",hashTagSpan:"Pg9USqlU",linkHashTag:"q7NhfyX9",userText:"IRICoaxs",infoContainer:"bm6Yr1Fm",time:"fb3bD1fc",reportTool:"Us5mhGDd",report:"cUMMy2zQ",publishTime:"MsN3XzkF",statsContainer:"fN2jqmuV",count:"oYTywyxr",statsItem:"fcEX2ARL",share:"Vc7Hm_bN",statsDisabled:"W4GMq2zU",active:"TzCWwweD",shareContainer:"gKdwFjV_",shareBox:"un6G4_Jv",hidden:"Gb20lm1b",recommendTag:"l3a_lQGe"};l("602157");var e$=l("747909"),eJ=l("620117"),eY=l("79902"),eQ=l("475137"),eK=l("932624"),eX=l("462609"),e0={interactLottie:"gbVYYXAT",shortcutTip:"Sh8pgI5q",tipKey:"GDjBWyp4",shortcutTipWrap:"QTnnNkCR",notActive:"LMeYIETR"};let e1=eA.getShortcut(),e2={digg:{data:eY,description:"点赞",shortcut:e1.like,showTip:!0,setInteractionStatus:e=>{var t,l;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[0,1],!0),null==e||null===(l=e.goToAndStop)||void 0===l||l.call(e,88,!0)},setUnInteractionStatus:e=>{var t,l;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[0,1],!0),null==e||null===(l=e.goToAndStop)||void 0===l||l.call(e,0,!0)},interact:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[39,65],!0)},cancelInteract:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[124,162],!0)},enter:(e,t)=>{var l,i;t?null==e||null===(i=e.playSegments)||void 0===i||i.call(e,[96,120],!0):null==e||null===(l=e.playSegments)||void 0===l||l.call(e,[0,32],!0)},leave:(e,t)=>{var l,i;t?null==e||null===(i=e.playSegments)||void 0===i||i.call(e,[64,88],!0):null==e||null===(l=e.playSegments)||void 0===l||l.call(e,[162,186],!0)}},collect:{data:eQ,description:"收藏",shortcut:e1.collect,showTip:!0,setInteractionStatus:e=>{var t,l;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[0,1],!0),null==e||null===(l=e.goToAndStop)||void 0===l||l.call(e,115,!0)},setUnInteractionStatus:e=>{var t,l;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[0,1],!0),null==e||null===(l=e.goToAndStop)||void 0===l||l.call(e,0,!0)},interact:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[58,92],!0)},cancelInteract:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[151,170],!0)},enter:(e,t)=>{var l,i;t?null==e||null===(i=e.playSegments)||void 0===i||i.call(e,[121,145],!0):null==e||null===(l=e.playSegments)||void 0===l||l.call(e,[10,43],!0)},leave:(e,t)=>{var l,i;t?null==e||null===(i=e.playSegments)||void 0===i||i.call(e,[92,115],!0):null==e||null===(l=e.playSegments)||void 0===l||l.call(e,[195,207],!0)}},comment:{data:eK,description:"评论",shortcut:e1.comment,showTip:!0,setInteractionStatus:()=>{},setUnInteractionStatus:()=>{},interact:()=>{},cancelInteract:()=>{},enter:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[0,33],!0)},leave:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[59,83],!0)}},share:{data:eX,description:"分享",shortcut:e1.share,showTip:!1,setInteractionStatus:()=>{},setUnInteractionStatus:()=>{},interact:()=>{},cancelInteract:()=>{},enter:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[0,33],!0)},leave:e=>{var t;null==e||null===(t=e.playSegments)||void 0===t||t.call(e,[62,86],!0)}}};function e3(e){var t;let{type:l,interactionStatus:i,userInteraction:n}=e,r=e2[l],[d,s]=(0,a.useState)(!1),u=(0,a.useRef)(!1),c=(0,a.useRef)(!1),v=(0,a.useRef)(!1),f=(0,a.useRef)(!0),h=(0,a.useRef)(null),p=(0,a.useRef)(null),_=(0,el.Z)(e=>{var t,l;let n=null===(l=p.current)||void 0===l?void 0:null===(t=l.getLottieInstance)||void 0===t?void 0:t.call(l),o=()=>{null==r||r.setInteractionStatus(n)},a=()=>{null==r||r.setUnInteractionStatus(n)};return{setInteractionStatus:o,setUnInteractionStatus:a,interact:()=>{u.current=!0,c.current=!1,null==r||r.interact(n)},cancelInteract:()=>{u.current=!0,c.current=!1,null==r||r.cancelInteract(n)},enter:()=>{null==r||r.enter(n,i)},leave:()=>{null==r||r.leave(n,i)},end:()=>{if("digg"===e||"collect"===e)u.current=!1,!v.current&&(i?o():a())}}});return(0,a.useEffect)(()=>{let e=h.current;if(!e)return;let t=()=>{var e,t;v.current=!0,null===(t=_(l))||void 0===t||null===(e=t.enter)||void 0===e||e.call(t)},i=()=>{var e,t;v.current=!1,null===(t=_(l))||void 0===t||null===(e=t.leave)||void 0===e||e.call(t)};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",i),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",i)}},[_,l]),(0,a.useEffect)(()=>{if(!f.current)c.current=!0},[i]),(0,a.useEffect)(()=>{var e,t,o,a,r,d,s,u;if(f.current){"digg"===l?n?null===(e=_(l))||void 0===e||e.setInteractionStatus():null===(t=_(l))||void 0===t||t.setUnInteractionStatus():i?null===(o=_(l))||void 0===o||o.setInteractionStatus():null===(a=_(l))||void 0===a||a.setUnInteractionStatus(),f.current=!1;return}c.current?i?null===(r=_(l))||void 0===r||r.interact():null===(d=_(l))||void 0===d||d.cancelInteract():(i?null===(s=_(l))||void 0===s||s.setInteractionStatus():null===(u=_(l))||void 0===u||u.setUnInteractionStatus(),c.current=!1)},[i]),(0,o.jsx)(e$.Tooltip,{position:"top",className:e0.shortcutTipWrap,style:(null==r?void 0:r.showTip)?{}:{display:"none"},content:(0,o.jsxs)("div",{className:e0.shortcutTip,children:[null==r?void 0:r.description,(null==r?void 0:null===(t=r.shortcut)||void 0===t?void 0:t.key)&&(0,o.jsx)("span",{className:e0.tipKey,children:null==r?void 0:r.shortcut.key})]}),children:(0,o.jsx)("div",{ref:h,children:(0,o.jsx)(eJ.default,{ref:p,className:m()(e0.interactLottie,{[e0.notActive]:!i}),data:null==r?void 0:r.data,loop:!1,autoplay:!1,onComplete:()=>{_(l).end()}})})})}var e4=l("612075"),e5=l("327306"),e7=l("402971");let{Context:e8}=e4,e6=(0,a.memo)(function(e){var t,l,i,n,r,d,u,c,v,f,h,p;let{ocr:_,isSpider:g,awemeInfo:w,onScrollToComment:y,awemelogPb:I,videoToast:S,isOpenTopicLinkSearchResult:j,isTopicLinkDetail:C=!1,titleTag:N="h1",reportExtraParams:b={},seoAiSmartdocInfo:k}=e,E=(0,e5._)()||{},R=eA.getShortcut(),[P,M]=(0,a.useState)("icon"),D=(0,a.useRef)(""),{type:B,changeType:V}=(0,eE.P)(),{userInfo:O,dispatch:W}=(0,e7.useUserInfoContext)()||{},{isLogin:H,info:Z}=O||{},{player:z,globalCommentCount:G,renderTextWithTag:q}=(0,a.useContext)(U.v);(0,a.useEffect)(()=>{(null==w?void 0:w.awemeId)!==D.current&&(D.current=null==w?void 0:w.awemeId)},[null==w?void 0:w.awemeId]);let{diggStatus:$,count:Y}=(0,eR.P)({selfUid:null==O?void 0:null===(t=O.info)||void 0===t?void 0:t.uid,awemeId:null==w?void 0:w.awemeId,defaultCount:null==w?void 0:null===(l=w.stats)||void 0===l?void 0:l.diggCount,defaultDiggStatus:(null==w?void 0:w.userDigged)?eD.gZ.Digged:eD.gZ.UnDigg}),{digg:Q,unDigg:K}=(0,eT.ic)({selfUid:null==O?void 0:null===(i=O.info)||void 0===i?void 0:i.uid,isLogin:H,awemeInfo:w,onLoginSuccess:async()=>{var e,t;null==W||W({type:"updateUserInfo"}),await (0,x.a8)({secUid:null==w?void 0:null===(e=w.authorInfo)||void 0===e?void 0:e.secUid,uid:null==w?void 0:null===(t=w.authorInfo)||void 0===t?void 0:t.uid})},reportExtraParams:b,defaultDiggStatus:(null==w?void 0:w.userDigged)?eD.gZ.Digged:eD.gZ.UnDigg}),{collectStatus:X,collectCount:ee,handleClickCollect:et}=(0,eG.K)({userInfo:O,dispatch:W,awemeInfo:w,isLogin:H,videoToast:S,awemelogPb:I,reportExtraParams:b,logInstance:ea.Z}),{changeKeyword:el,resetSearchParams:ei}=(0,eU.w)(),en=(e,t)=>{var l;j&&A.emit(A.EVENT.videoPause,"VideoInfo_onHashTagClick"),ea.Z.sendLog("clickTitleHashtag",{hashtag:t.slice(1),urlParamList:["previous_page"],author_id:null==w?void 0:null===(l=w.authorInfo)||void 0===l?void 0:l.uid,group_id:null==w?void 0:w.awemeId,log_pb:I,enter_from:(0,L.yW)(),tag_id:e,is_full_screen:(0,T.r)()?"1":"0",player_display_mode:(0,F.Ok)()})},eo=(0,a.useCallback)((e,t,l)=>{var i;let n=null==E?void 0:E.searchOpenCurrentTab;((null==n?void 0:n.save_status)!==1||(0,s.DT)()||(null===(i=window)||void 0===i?void 0:i.location.pathname)!=="/")&&A.emit(A.EVENT.videoPause,"VideoInfo_onSearchTextClick"),(0,ez.v2)(e,{source:"pc_click_hashtag_feed"},(null==E?void 0:E.open_current_tab)===1,(null==E?void 0:E.save_video)===1,(null==E?void 0:E.clientSpaV2)===eB.CommonSwitch.On&&(0,s.DT)(),el,ei)},[]),er=e=>{var t;A.emit(A.EVENT.videoPause,"VideoInfo_onUserNameClick"),ea.Z.sendLog("clickTitleAt",{to_user_id:e,urlParamList:["previous_page"],author_id:null==w?void 0:null===(t=w.authorInfo)||void 0===t?void 0:t.uid,group_id:null==w?void 0:w.awemeId,log_pb:I,enter_from:(0,L.yW)(),is_full_screen:(0,T.r)()?"1":"0"})};(0,a.useEffect)(()=>{let e=A.listen(A.EVENT.videoPause,()=>{null==z||z.pause()});return()=>{null==e||e()}},[z]);let ed=(0,a.useRef)(!1),es=(0,a.useCallback)(e=>{ea.Z.sendLog(e,{enter_from:(0,L.yW)()})},[]);return(0,o.jsxs)("div",{className:eq.videoInfoContainer,"data-e2e":"detail-video-info","data-e2e-aweme-id":w.awemeId,children:[(0,o.jsx)(eL.Z,{lineHeight:26,lineClamp:2,onlyKey:null==w?void 0:w.awemeId,btnClassName:eq.button,btnOnClick:e=>{var t;ea.Z.sendLog("clickVideoTitle",{action:e?"fold":"expand",urlParamList:["previous_page"],author_id:null==w?void 0:null===(t=w.authorInfo)||void 0===t?void 0:t.uid,group_id:null==w?void 0:w.awemeId,log_pb:I,enter_from:(0,L.yW)(),is_full_screen:(0,T.r)()?"1":"0",player_display_mode:(0,F.Ok)()})},renderContent:e=>{var t,l,i;let{isUnfold:n}=e,r=(0,eZ.$)({awemeInfo:w,abTestData:E}),d=(0,o.jsxs)("span",{children:[r&&(0,o.jsx)(eZ.n,{className:eq.recommendTag,scene:"titlePrefix",awemeInfo:w}),(0,o.jsx)("span",{children:(null==w?void 0:null===(t=w.mixInfo)||void 0===t?void 0:t.currentEpisode)&&`第${null==w?void 0:null===(l=w.mixInfo)||void 0===l?void 0:l.currentEpisode}集 | `||""}),(0,o.jsx)(eF.Z,{isRemoveRowspan:!n,getHashTagHref:(e,t)=>C||g?(0,J.bP)(t):j?`https://www.douyin.com/search/${encodeURIComponent(e)}?source=pc_click_hashtag_feed&enter_from=${(0,F.vM)()}`:"",hashTagClassName:m()(eq.hashTagSpan,{[eq.linkHashTag]:j||C||g}),userTextClassName:m()(eq.userText),text:null==w?void 0:w.desc,textExtra:null==w?void 0:w.textExtra,onSearchTextClick:eo,onClickHashtag:en,onClickUser:er,enterMethod:"video_title_at",seoInfo:{isSpider:g,awemeId:null==w?void 0:w.awemeId}})]});return(null==_?void 0:null===(i=_.info)||void 0===i?void 0:i.keywords)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{className:eq.hidden,children:_.info.keywords.split(",")[0]}),(0,o.jsx)("h2",{className:eq.title,style:{display:"inline"},children:d})]}):a.createElement(N,{className:eq.title,style:{display:"inline"}},d)}}),(null==_?void 0:null===(n=_.info)||void 0===n?void 0:n.content)&&(0,o.jsx)("p",{className:eq.hidden,children:q?q(null==_?void 0:null===(r=_.info)||void 0===r?void 0:r.content):null==_?void 0:null===(d=_.info)||void 0===d?void 0:d.content}),null==_?void 0:null===(c=_.info)||void 0===c?void 0:null===(u=c.keywords)||void 0===u?void 0:u.split(",").map((e,t)=>(0,o.jsx)("span",{className:eq.hidden,children:e},t)),!g&&(null==k?void 0:k.blocks)&&(0,o.jsx)("p",{className:eq.hidden,children:null==k?void 0:k.blocks}),(0,o.jsxs)("div",{className:eq.infoContainer,children:[(0,o.jsxs)("div",{className:eq.statsContainer,children:[(0,o.jsxs)("div",{onClick:()=>{$===eD.gZ.Digged?K():Q()},onMouseLeave:()=>es("hover_like_icon"),className:m()(eq.statsItem,m()({[eq.active]:$===eD.gZ.Digged})),children:[(0,o.jsx)(e3,{type:"digg",interactionStatus:$===eD.gZ.Digged,userInteraction:null==w?void 0:w.userDigged}),(0,o.jsx)("span",{className:eq.count,children:(0,eH.A)({count:Number(Y),displayWord:"赞"})})]}),(0,o.jsxs)("div",{onClick:()=>{var e,t;null==y||y(),null===(t=document.querySelector("[data-scroll='comment']"))||void 0===t||null===(e=t.scrollIntoView)||void 0===e||e.call(t,{behavior:"smooth",block:"nearest"})},onMouseLeave:()=>es("hover_comment_icon"),className:eq.statsItem,children:[(0,o.jsx)(e3,{type:"comment",interactionStatus:!1,userInteraction:!1}),(0,o.jsx)("span",{className:eq.count,children:(0,eH.A)({count:Number(G||(null==w?void 0:null===(v=w.stats)||void 0===v?void 0:v.commentCount)),displayWord:"抢首评"})})]}),(0,o.jsxs)("div",{onClick:()=>{et()},onMouseLeave:()=>es("hover_favorite_video_icon"),className:m()(eq.statsItem,m()({[eq.active]:X})),children:[(0,o.jsx)(e3,{type:"collect",interactionStatus:X===eD.c.Collected,userInteraction:!1}),(0,o.jsx)("span",{className:eq.count,children:(0,eH.A)({count:Number(ee),displayWord:"收藏"})})]}),(0,o.jsxs)("div",{className:m()(eq.shareContainer,(null==w?void 0:null===(f=w.status)||void 0===f?void 0:f.allowShare)===!1?eq.statsDisabled:eq.statsItem),onMouseEnter:()=>{var e;(null==w?void 0:null===(e=w.status)||void 0===e?void 0:e.allowShare)!==!1&&(M("icon"),V("share_btn"))},onMouseLeave:()=>{es("hover_share_icon"),(null==ed?void 0:ed.current)||V("")},"data-e2e":"video-share-icon-container",children:[(0,o.jsx)(e3,{type:"share",interactionStatus:!1,userInteraction:!1}),(0,o.jsx)("span",{className:eq.share,children:(0,eH.A)({count:null!==(p=null==w?void 0:null===(h=w.stats)||void 0===h?void 0:h.shareCount)&&void 0!==p?p:0,displayWord:"分享"})}),(0,o.jsx)(eP.Z,{player:z,isDetail:!0,shareShowMethod:P,abtestData:E,toast:S,awemelogPb:I,awemeInfo:w,hidden:"share_btn"!==B,loginUserInfo:O,shortcutObj:R,className:m()(eq.shareBox,"isDark"),handleClose:()=>V(""),onMouseEnter:()=>{M("icon"),V("share_btn")},loginDispatch:W,onFriendSearching:e=>{ed.current=e},reportExtraParams:b})]})]}),(0,o.jsxs)("div",{className:eq.time,children:[(null==O?void 0:O.info)&&(!O.info||w.authorInfo.uid===O.info.uid)?null:(0,o.jsxs)("div",{onClick:()=>{var e,t,l;A.emit(A.EVENT.videoPause,"VideoInfo_onReportClick");(0,eV.m)({title:"举报视频",type:"video",object_id:null==w?void 0:w.awemeId,owner_id:(null==w?void 0:null===(e=w.authorInfo)||void 0===e?void 0:e.uid)||"",owner_sec_id:(null==w?void 0:null===(t=w.authorInfo)||void 0===t?void 0:t.secUid)||"",onClose:()=>{(null==w?void 0:w.awemeId)===D.current&&((0,eO.m)("reportModal"),A.emit(A.EVENT.videoRemoveStopPlayNext))},onShow:()=>{A.emit(A.EVENT.videoStopPlayNext),(0,eO.o)({pauseCustomShortcut:!0,pauseGlobalShortcut:!0,pausePlayControlShortcut:!0},"reportModal")},userInfo:null==O?void 0:O.info,loginDispatch:W,pipeline_id:"157",enter_from:(0,L.yW)(),abtestData:E}),ea.Z.sendLog("report",{urlParamList:["previous_page"],enter_from:(0,L.yW)(),author_id:null==w?void 0:null===(l=w.authorInfo)||void 0===l?void 0:l.uid,group_id:null==w?void 0:w.awemeId,log_pb:I,is_full_screen:(0,T.r)()?"1":"0"})},className:eq.reportTool,children:[(0,o.jsx)(eM.Z,{width:15,height:13.9,viewBox:"0, .3, 15, 14.9",src:eW.Z}),(0,o.jsx)("span",{className:eq.report,children:"举报"})]}),(0,o.jsxs)("span",{className:eq.publishTime,"data-e2e":"detail-video-publish-time",children:["发布时间：",ek()((null==w?void 0:w.createTime)*1e3).format("YYYY-MM-DD HH:mm")]})]})]})]})});var e9=l("94126");let{Context:te}=e4,tt=(0,a.memo)(e=>{var t,l,r,d,u,c,v,q,$,ed,ex,ew,eS,eb,ek,eE,eR,eT,eF,eL,eP,eM,eA,eD,eU,eB;let{ocr:eV,awemeId:eO,awemeInfo:eW,defaultMixInfo:eH,defaultComment:eZ,awemelogPb:ez,queryParam:eG={},defaultRelate:eq,defaultCustomRelate:e$,hideRelatedList:eJ=!1,videoTitleTag:eY="h1",renderTextWithTag:eQ,isSpider:eK=!1,accountType:eX,innerLink:e0,seoRelatedModuleList:e1,seoAiSmartdocInfo:e2}=e,{userInfo:e3,dispatch:e4}=(0,e7.useUserInfoContext)()||{},{isLogin:e8,info:te}=e3||{},tt=null==te?void 0:te.uid,tl=(0,e5._)()||{},ti=(0,a.useRef)(null),tn=(0,a.useRef)(null),{isWebMiniWin:to,isListenVideoMiniWin:ta}=(0,Y.Iq)(e=>{let{isWebMiniWin:t,isListenVideoMiniWin:l}=e;return{isWebMiniWin:t,isListenVideoMiniWin:l}}),tr=(0,a.useMemo)(()=>(0,E.Rs)("t"),[]),[td,ts]=(0,a.useState)((null==eZ?void 0:eZ.total)||0),{isFullScreen:tu,isCssFullScreen:tc,fullscreen:tv,setIsCssFullScreen:tm,setIsFullScreen:tf}=(0,eg.h)(),[th,tp]=(0,a.useState)(null),{mixInfo:t_,loadMoreMixInfo:tg,seriesInfo:tx,loadMoreSeriesInfo:tw}=(0,et.z)({awemeInfo:eW,defaultMixInfo:eH}),{relateInfo:ty,loadMoreRelateInfo:tI,getNextVideoInfo:tS}=function(e,t){let l=(0,a.useRef)([]),o=(0,a.useRef)([]),[r,d]=(0,a.useState)(t||er),s=(0,a.useRef)(!1),u=(0,a.useRef)(e),c=(0,a.useRef)(0),v=(0,a.useRef)(0),m=(0,a.useCallback)(async e=>{if(u.current===e&&!s.current){s.current=!0;try{if(e){var t;l.current=[],o.current=[];let i=es();v.current+=1;let{statusCode:n,awemeList:a=[],logPb:r}=await (0,ei.bJ)({awemeId:e,count:20,filterGids:i.join(",")||"",refreshIndex:v.current});if(c.current+=1,s.current=!1,0===a.length&&ea.Z.sendLog("relatedVideoListEmpty",{group_id:e}),ea.Z.sendLog("relatedVideoImprCnt",{group_id:e,rank:c.current,raw_count:a.length||0,filter_count:(null===(t=a.filter(e=>{var t;return"Invalid Date"!==(0,en.$y)(null===(t=e.video)||void 0===t?void 0:t.duration)}))||void 0===t?void 0:t.length)||0}),u.current===e){l.current=l.current.concat(i),a.filter(t=>t.awemeId!==e).forEach(e=>{l.current.push(e.awemeId),o.current.push(e)});let t=function(e,t){let l=e.find(e=>e.awemeId!==t);if(!l)return!1;let{awemeId:i,video:n,desc:o}=l;return{url:(0,J.$N)(i,`pre_vid=${t}&previous_page=${(0,L.yW)()}`),awemeId:i,img:n.cover,desc:o}}(a,e),s=o.current.length;eu(e),o.current=await (0,eo.x)(o.current),d({logPb:r,statusCode:n,awemeId:e,hasMore:s>0,data:o.current.splice(0,12),nextVideoInfo:t})}else await m(u.current)}}catch(e){}s.current=!1}},[]),f=(0,el.Z)(async(e,t)=>{var a,s;if((null===(a=r.data)||void 0===a?void 0:a.length)===0){await m(e);return}let f="";if(l.current.length>0){v.current+=1;let{awemeList:t=[],logPb:i}=await (0,ei.bJ)({awemeId:e,count:20,filterGids:l.current.join(","),refreshIndex:v.current});if(u.current!==e)return;c.current+=1,ea.Z.sendLog("relatedVideoImprCnt",{group_id:e,rank:c.current,raw_count:(null==t?void 0:t.length)||0,filter_count:(null===(s=t.filter(e=>{var t;return"Invalid Date"!==(0,en.$y)(null===(t=e.video)||void 0===t?void 0:t.duration)}))||void 0===s?void 0:s.length)||0});let n=await (0,eo.x)(t);f=i,l.current=[],o.current=[...o.current,...n||[]]}let h=o.current.splice(0,t?6:12);d(e=>{let t=[...e.data,...h];return(0,n._)((0,i._)({},e),{logPb:f,statusCode:0,data:t,hasMore:o.current.length>0})})}),h=(0,a.useCallback)(()=>{d(er)},[]),p=(0,el.Z)(e=>e===r.awemeId&&r.nextVideoInfo);return(0,a.useEffect)(()=>{u.current=e,h(),m(e),c.current=0},[e]),{relateInfo:r,loadMoreRelateInfo:f,initRelateInfo:m,resetRelateInfo:h,getNextVideoInfo:p}}(eO,eq),[tj,tC]=(0,a.useState)(null),tN=(0,a.useRef)(null),[tb,tk]=(0,a.useState)(!0),tE=(0,R.x)();(0,W.g)({awemeInfo:eW,refMixPlayer:tN});let{CompHandle:tR,compInfo:tT,loadMoreCompData:tF,getNextVideoInfo:tL}=(0,ec.r)({awemeId:eO,awemeInfo:eW,query:eG,defaultCustomRelate:e$,accountType:eX,abtestData:tl,isLogin:e8}),{followStatus:tP}=(0,g.r)({selfUid:null==e3?void 0:null===(t=e3.info)||void 0===t?void 0:t.uid,actionUid:null==eW?void 0:null===(l=eW.authorInfo)||void 0===l?void 0:l.uid,defaultFollowerStatus:null==eW?void 0:null===(r=eW.authorInfo)||void 0===r?void 0:r.followerStatus,defaultFollowStatus:null==eW?void 0:null===(d=eW.authorInfo)||void 0===d?void 0:d.followStatus}),{follow:tM,unFollow:tA}=(0,x.OM)({selfUid:null==e3?void 0:null===(u=e3.info)||void 0===u?void 0:u.uid,actionUid:null==eW?void 0:null===(c=eW.authorInfo)||void 0===c?void 0:c.uid,defaultFollowerStatus:null==eW?void 0:null===(v=eW.authorInfo)||void 0===v?void 0:v.followerStatus,defaultFollowStatus:null==eW?void 0:null===(q=eW.authorInfo)||void 0===q?void 0:q.followStatus,isLogin:!!e8,accountParentEl:(0,T.r)()&&th?th:void 0,onLoginSuccess:()=>null==e4?void 0:e4({type:"updateUserInfo"}),logExtraParams:{author_id:null==eW?void 0:null===($=eW.authorInfo)||void 0===$?void 0:$.uid,group_id:null==eW?void 0:eW.awemeId,enter_from:(0,F.mo)(),is_full_screen:(0,T.r)()?"1":"0",tab_name:(0,D.zD)()||(0,E.Rs)("tab_name")||"",from_group_id:null==eW?void 0:eW.awemeId,music_id:null==eW?void 0:null===(ed=eW.music)||void 0===ed?void 0:ed.mid,compilation_id:null==eW?void 0:null===(ex=eW.mixInfo)||void 0===ex?void 0:ex.mixId,aweme_type:null==eW?void 0:eW.awemeType,to_user_id:null==eW?void 0:null===(ew=eW.authorInfo)||void 0===ew?void 0:ew.uid,item_duration_ms:(null==eW?void 0:null===(eS=eW.video)||void 0===eS?void 0:eS.duration)||0,enter_from_merge:(0,L.yW)()}}),{isCommentShow:tD,toggleComment:tU,commentScrollContainer:tB,onScrollToComment:tV}=(0,eI.x)({awemeInfo:eW,awemelogPb:ez,followStatus:tP}),tO=ey(),tW=(0,a.useRef)(null),tH=(0,a.useRef)(null),[tZ,tz]=(0,a.useState)(tH),tG=(0,s.DT)()&&(0,P.O)(),tq=(0,w.Z)({changeMinWinCb:e=>{document.body.style.overflow=e?"hidden":""},refMixPlayer:tN}),t$=(0,a.useMemo)(()=>tE?tv||tq:tv,[tq,tv,tE]),{containerStyle:tJ,targetToast:tY}=(0,V.c)({className:tq?ep.miniWinToast:ep.videoToast,containerRef:tW,targetRef:tZ}),tQ=tR&&tL(eO)||!tR&&(0,k.nQ)(t_,tx,eW)||!eJ&&tS(eO)||!1,{changeListenVideoFeedIndex:tK,prevVideoInfo:tX,nextVideoInfo:t0}=Q({originAwemeInfo:eW}),t1=(0,e_.v)({awemeInfo:eW,nextVideoInfo:ta&&t0?t0:tQ,prevVideoInfo:ta&&tX?tX:null,videoToast:tY,isListenVideoMiniWin:ta,changeListenVideoFeedIndex:tK});(0,a.useEffect)(()=>{if((0,E.Rs)("t")&&Number((0,E.Rs)("t"))>=0){let e=(0,M.q)(["t"],location.href);history.replaceState({},"",e)}eW&&A.emit(A.EVENT.postCurVideoInfo,{awemeId:eW.awemeId,groupId:eW.groupId,scene:S.lT.Detail,suggestWords:null==eW?void 0:eW.suggestWords})},[eW]);let t2=(0,h.a)(),t3=(0,a.useMemo)(()=>{let{danmaku_id:e,danmaku_offset:t}=(0,p.parse)(null==t2?void 0:t2.search);return e&&t?{danmakuId:e,danmakuOffset:Number(t),status:1,pausedStatus:!0}:null},[]),t4=(0,ee.A)(e8,tt),t5=(0,a.useCallback)(()=>{tk(!1)},[]),t7=(0,a.useMemo)(()=>{var e,t,l,i,n,o,a;return{relation:String(tP),enter_method:(0,E.Rs)("enter_method")||"",playlet_id:null==eW?void 0:null===(e=eW.seriesInfo)||void 0===e?void 0:e.seriesId,is_trailer:(null==eW?void 0:null===(l=eW.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.is_preview)?1:0,module:decodeURIComponent((0,E.Rs)("module")||""),payment_status:(0,y.wQ)(eW),episode_id:String((null==eW?void 0:null===(i=eW.seriesInfo)||void 0===i?void 0:i.currentEpisode)||(null==eW?void 0:null===(n=eW.mixInfo)||void 0===n?void 0:n.currentEpisode)),episode_rank:(null==eW?void 0:null===(o=eW.seriesInfo)||void 0===o?void 0:o.currentEpisode)||(null==eW?void 0:null===(a=eW.mixInfo)||void 0===a?void 0:a.currentEpisode)||0,previous_page:(0,E.Rs)("previous_page"),fir_previous_page:(0,E.Rs)("fir_previous_page")||(0,E.Rs)("previous_page"),enter_from_merge:(0,L.yW)()}},[tP,eW]),{chapterProgress:t8,chapterSliderShow:t6,triggerChapterSliderShow:t9,chapterMaxWidth:le}=ej({player:null==tN?void 0:null===(eb=tN.current)||void 0===eb?void 0:eb.getPlayer(),awemeInfo:eW,chapterScrollElRef:ti,playerContainerRef:tn});(0,H.s)(!0);let lt=!!(null==eW?void 0:null===(ek=eW.chapterInfo)||void 0===ek?void 0:ek.status),ll=lt&&t6,li=(0,j.d)(()=>{tD&&tU(),t6&&t9()}),{anchorList:ln,hasJingxuanActivity:lo}=(0,N.e)({abtestData:tl,awemeInfo:eW}),{isShowActivityCard:la,activityName:lr,anchorData:ld,closeActivityCard:ls,onActivityCardClick:lu}=(0,K.T)({awemeInfo:eW,isActive:!0,isLogin:e8,abtestData:tl,onOpenCard:()=>{li.current()}});(0,a.useEffect)(()=>{(tD||t6)&&ls()},[tD,t6,ls]);let lc=(0,a.useMemo)(()=>tc||t$,[tc,t$]);(0,_.Z)(()=>{ls()},[lc]),(0,_.Z)(()=>{ls()},[null==eW?void 0:eW.awemeId]);let[lv,lm]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{lm(window.innerWidth>=1032);let e=()=>{lm(window.innerWidth>=1032)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,o.jsx)(U.v.Provider,{value:{globalCommentCount:td,setGlobalCommentCount:ts,setTargetVideoRef:tz,videoToast:tY,player:tj,setPlayer:tC,renderTextWithTag:eQ},children:(0,o.jsxs)("div",{"data-e2e":"video-detail",className:m()(ep.container,{[ep.commentShow]:tD,[ep.fullScreenContainer]:t$,[ep.ohosStyle]:tG,isCssFullScreen:t$,isTrimControls:null==tl?void 0:null===(eE=tl.controls)||void 0===eE?void 0:eE.fullscreen,playerControlHeight:!0,isMiniWindow:tq,isMiniWindowOptimize:tq&&tE,[ep.isShowActivityCard]:la,[ep.awemeSearchEngine]:(0,e9.V)()}),children:[(0,o.jsxs)("div",{className:m()("leftContainer",ep.leftContainer),ref:tp,children:[(0,o.jsx)("div",{ref:tW,className:ep.videoToastContainer,style:tJ}),(0,o.jsxs)("div",{className:m()(ep.isNewPlayer,ep.playerContainer,`video_${eW.awemeId}`,"video-detail-container","newVideoPlayer","isDanmuPlayer",{detailNotFullScreen:!(tc||t$),[ep.spiderContainer]:eK,[ep.chapterUiAdapter]:lt,[ep.showSideBar]:ll}),ref:tn,"data-e2e":"player-container",children:[eK&&(null==eW?void 0:null===(eT=eW.video)||void 0===eT?void 0:null===(eR=eT.playAddr)||void 0===eR?void 0:eR.length)>0&&(0,o.jsx)("video",{className:ep.fakeVideo,poster:null==eW?void 0:null===(eF=eW.video)||void 0===eF?void 0:eF.cover}),!!(null==tl?void 0:tl.videoDetailBg)&&(0,o.jsx)(z.T3,{awemeInfo:eW,elementtiming:"lcp_ele",fetchPriority:"high",abtestData:tl,priorityServerBackupBg:!1}),!eK&&(0,o.jsxs)(B.C.Provider,{value:{isCssFullScreen:tc,isFullScreen:tu,isClientMiniWin:tq},children:[(0,o.jsxs)(f.NoSSR,{children:[lt&&(0,o.jsx)(z.T3,{awemeInfo:eW,elementtiming:"lcp_ele",abtestData:tl,priorityServerBackupBg:!1}),(0,o.jsxs)("div",{className:m()({[ep.chapterPlayer]:lt,"controls-drag-disable":null==tl?void 0:null===(eL=tl.controls)||void 0===eL?void 0:eL.dragdisable,"controls-delay-hover":null==tl?void 0:null===(eP=tl.controls)||void 0===eP?void 0:eP.delayhover,"controls-add-space":null==tl?void 0:null===(eM=tl.controls)||void 0===eM?void 0:eM.addspace,"controls-hotzone":null==tl?void 0:null===(eA=tl.controls)||void 0===eA?void 0:eA.hotzone}),children:[(0,o.jsxs)(O.W,{canShowListenVideo:!0,ref:tN,actionFollow:tM,actionUnFollow:tA,awemeInfo:eW,userInfo:e3,dispatch:e4,abtestData:tl,isActive:!0,fullScreenTarget:th,toggleComment:tU,disableNext:!(null==tQ?void 0:tQ.url),nextVideoInfo:tQ,videoToast:tY,playNextFunc:t1.playNextFunc,playPrevFunc:t1.playPrevFunc,haveDashBoard:t4,danmakuInfo:t3,reportExtraParams:t7,playSwitchParams:t1,onActivityCardClick:lu,anchorList:ln,hasJingxuanActivity:lo,logParams:{enter_from_merge:"video_detail",is_political_media:[C.Q.Gov,C.Q.OfficialMedia].includes(eX)?1:0},onReady:t5,startTime:tr,chapterProps:{chapterProgress:t8,triggerChapterSliderShow:t9},noVideoBg:lt,children:[(0,o.jsx)(ev.c,{playSwitchParams:t1,slot:null===O.h||void 0===O.h?void 0:O.h.PositionBoxSlot,isClientMiniWin:tq}),(0,o.jsx)(em.O,{onFullScreen:tf}),(0,o.jsx)(ef.f,{onCssFullScreen:tm}),(0,o.jsx)(eh.o,{})]}),(0,o.jsx)("div",{}),(0,o.jsx)(G.R,{player:tj,isActive:!0}),(0,o.jsx)("div",{}),to?(0,o.jsx)(ev.c,{playSwitchParams:t1,slot:null===O.h||void 0===O.h?void 0:O.h.PositionBoxSlot,isClientMiniWin:tq,isWebMiniWin:!0}):null]}),lt&&(0,o.jsx)("div",{className:m()(ep.chapterSideBar,"isDark",{[ep.sideBarHidden]:!t6}),ref:ti,style:{maxHeight:le},children:(0,o.jsx)("div",{className:m()(ep.sideBarInnerWrapper,ep.relatedVertical,{LookModalFrameFast:(null===(eD=(0,P.fV)())||void 0===eD?void 0:eD.os)==="Windows"}),children:(0,o.jsx)(Z.default,{isShow:t6,awemeInfo:eW,chapterProgress:t8,onClose:()=>{t9()},player:null==tN?void 0:null===(eU=tN.current)||void 0===eU?void 0:eU.getPlayer(),selfUid:null==e3?void 0:null===(eB=e3.info)||void 0===eB?void 0:eB.uid,minSize:!0})})})]}),tb&&(0,o.jsx)(I.v,{awemeInfo:eW,useBlock:!0})]})]}),(0,o.jsx)("div",{className:ep.videoInfo,children:(0,o.jsx)(e6,{ocr:eV,isSpider:eK,awemelogPb:ez,awemeInfo:eW,videoToast:tY,isOpenTopicLinkSearchResult:!0,isTopicLinkDetail:!1,titleTag:eY,onScrollToComment:tV,reportExtraParams:t7,seoAiSmartdocInfo:e2})}),(0,o.jsx)("div",{className:m()("detailPage","detailPageSmallScreen",ep.smallSecreenCt),children:!eK&&(0,o.jsx)(eN.Z,{awemeId:eO,isSpider:eK,isSmallScreen:!0,awemeInfo:eW,mixInfo:t_,loadMoreMixInfo:tg,relateInfo:ty,loadMoreRelateInfo:tI,awemelogPb:ez,seriesInfo:tx,loadMoreSeriesInfo:tw,queryParam:eG,CompHandle:tR,compInfo:tT,loadMoreCompData:tF,isAutoRelate:!1,abtestData:tl,isShow:!tO,hideRelatedList:eJ,hidePlaceholder:!0,reportExtraParams:{relation:String(tP),enter_method:(0,E.Rs)("enter_method")||""}})}),(0,o.jsx)("div",{"data-scroll":"comment",className:ep.commentContainer,children:(0,o.jsx)(eC.Z,{isSpider:eK,awemeId:eO,awemeInfo:eW,defaultComment:eZ,awemelogPb:ez,scrollContainerEl:tB,fullScreenTarget:th,isFullScreen:t$,isCommentShow:tD,onCloseCommentClick:tU,reportExtraParams:t7,dispatch:e4,forceLoginCover:(null==tl?void 0:tl.passportNotLoginCanSeeCommentCount)===0})}),lc&&la&&(0,o.jsx)("div",{className:m()(ep.activityCard),children:(0,o.jsx)(X.k,{componentName:"ActivityCard",children:(0,o.jsx)(b.ActivityCard,{isLogin:e8,awemeInfo:eW,activityName:lr,anchorData:ld,closeCard:ls,userInfo:e3,userDispatch:e4})})}),(0,o.jsx)("div",{id:"fullscreen_capture_feedback",children:(0,o.jsx)("div",{id:"fullscreen_capture"})})]}),!lc&&!lv&&la&&(0,o.jsx)("div",{className:m()(ep.outerActivityCard,ep.fixed),children:(0,o.jsx)(X.k,{componentName:"ActivityCard",children:(0,o.jsx)(b.ActivityCard,{classname:ep.card,isLogin:e8,awemeInfo:eW,activityName:lr,anchorData:ld,closeCard:ls,userInfo:e3,userDispatch:e4})})}),(0,o.jsx)("div",{className:m()("detailPage",ep.rightContainer,{[ep.hidden]:t$}),children:(0,o.jsx)(eN.Z,{isSpider:eK,awemeId:eO,awemeInfo:eW,mixInfo:t_,loadMoreMixInfo:tg,relateInfo:ty,loadMoreRelateInfo:tI,awemelogPb:ez,seriesInfo:tx,loadMoreSeriesInfo:tw,queryParam:eG,CompHandle:tR,compInfo:tT,loadMoreCompData:tF,isAutoRelate:!0,abtestData:tl,isShow:tO,hideRelatedList:eJ,reportExtraParams:t7,seoRelatedModuleList:e1,seoAiSmartdocInfo:e2,children:!lc&&lv&&la&&(0,o.jsx)("div",{className:ep.outerActivityCard,children:(0,o.jsx)(X.k,{componentName:"ActivityCard",children:(0,o.jsx)(b.ActivityCard,{classname:ep.card,isLogin:e8,awemeInfo:eW,activityName:lr,anchorData:ld,closeCard:ls,userInfo:e3,userDispatch:e4})})})})})]})})});var tl=l("337499"),ti={hidden:"Fs86WIQX",container:"C9nWMu_C",ohosStyle:"Ln9tZVFL",leftContainer:"U7oXg11H",rightContainer:"PJUqnpWO",playerContainer:"JtcQCBNu",isNewPlayer:"EoGjqzVY",spiderContainer:"JWP_oH6E",fakeVideo:"Zyj0wCVN",smallSecreenCt:"c2hRIhXF",fullScreenContainer:"KPmBvgVz",commentShow:"V1GoPrkn",commentContainer:"wcZfQRHU",videoToast:"FU9fEGQc",miniWinToast:"OYJT5Wd_",videoToastContainer:"uKcWUcAy"},tn=l("288182"),to=l("531471"),ta=l("287844"),tr=l("209789"),td=l("52662"),ts=l("716991"),tu={downloadBar:"mlVa8vWF",downloadHint:"Oz7yE019"};function tc(e){var t;let{isSpider:l,awemeInfo:i,awemelogPb:n,CompHandle:d,abtestData:s,is_political_media:u,isShow:c=!1,reportExtraParams:v={}}=e,m={author_id:null==i?void 0:null===(t=i.authorInfo)||void 0===t?void 0:t.uid,group_id:null==i?void 0:i.awemeId,log_pb:n,relation:null==v?void 0:v.relation},f=(0,a.useRef)(null),h=(0,e7.useUserInfoContext)(),[p,_]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),{isLogin:w}=null==h?void 0:h.userInfo,y=(0,a.useMemo)(()=>w&&((0,to.Jo)()||(0,to.G1)()),[w]),I=(0,a.useCallback)(()=>{setTimeout(()=>{var e;let t=null===(e=f.current)||void 0===e?void 0:e.clientHeight,l="0px",i="0px";y?(l=`calc(100vh - 68px - 70px - 16px - 12px - 52px - ${t}px)`,i="calc(100vh - 68px - 70px - 22px - 12px - 52px - 62px)"):(l=`calc(100vh - 68px - 70px - 16px - 12px - ${t}px)`,i="calc(100vh - 68px - 70px - 22px - 12px - 62px)"),_(l),x(i)},50)},[_,y]);(0,a.useEffect)(()=>{I()},[y]),(0,a.useEffect)(()=>(window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}),[]);let S=(null==i?void 0:i.awemeType)===r.e.Note;return(0,o.jsxs)("div",{"data-e2e":"related-video",children:[(0,o.jsx)(td.Z,{awemeInfo:i,abtestData:s,videoDetailExtraParams:m,isShow:c,avatarSize:"small",newStyle:!!S}),(0,o.jsx)("div",{ref:f,children:(0,o.jsx)(ts.Z,{awemeInfo:i,awemelogPb:n,isSpider:l,handleFoldClick:I,boxMaxHeight:g})}),y&&(0,o.jsx)(tn.eD,{className:tu.downloadBar,textContainerClassName:tu.downloadHint,hintText:"下载客户端，桌面快捷访问",log:{enterFrom:(0,F.vM)(),type:"video_detail_button",channelId:ta.g.VideoDetail},defaultShow:!1,isLogin:w}),l?null:(0,o.jsx)("div",{style:{height:p,marginTop:"16px"},children:(0,o.jsx)(tr.Z,{item:i,awemeInfo:i,userContext:h,abtestData:s,isActive:!0,CompHandle:d,is_political_media:u,enterFromPrefix:""})})]})}let tv=()=>{let[e,t]=(0,a.useState)(tl.L.Related);return(0,a.useEffect)(()=>{e&&t(e)},[e]),{isTabChange:e,setIsTabChange:t}},{Context:tm}=e4,tf=(0,a.memo)(e=>{var t,l,i,n,d,u,c,v,_,y,j,N,b,L,M,Z;let{ocr:z,awemeId:q,awemeInfo:$,defaultMixInfo:Q,defaultComment:K,awemelogPb:X,queryParam:el={},defaultRelate:ei,defaultCustomRelate:en,hideRelatedList:eo=!1,renderTextWithTag:ea,isSpider:er=!1,accountType:ed,abtestData:es}=e,{userInfo:eu,dispatch:ep}=(0,e7.useUserInfoContext)()||{},{isLogin:ex,info:ew}=eu||{},eS=null==ew?void 0:ew.uid,{isWebMiniWin:ej}=(0,Y.Iq)(e=>{let{isWebMiniWin:t}=e;return{isWebMiniWin:t}}),[eN,eb]=(0,a.useState)((null==K?void 0:K.total)||0),{isFullScreen:ek,isCssFullScreen:eE,fullscreen:eR,setIsCssFullScreen:eT,setIsFullScreen:eF}=(0,eg.h)(),{setIsTabChange:eL}=tv(),[eP,eM]=(0,a.useState)(null),{mixInfo:eA,seriesInfo:eD}=(0,et.z)({awemeInfo:$,defaultMixInfo:Q}),eU=[C.Q.Gov,C.Q.OfficialMedia].includes(ed),eB=(0,a.useMemo)(()=>{var e,t;let l=tl.L.Related;if(null==$?void 0:null===(e=$.mixInfo)||void 0===e?void 0:e.mixId)return tl.L.Mix;if(null==$?void 0:null===(t=$.seriesInfo)||void 0===t?void 0:t.seriesId)return tl.L.Series;if((null==$?void 0:$.awemeType)===r.e.XgVideo&&![tl.L.CollectFolder].includes(l))return tl.L.Comment;return l},[$]),[eV,eO]=(0,a.useState)(null),eW=(0,a.useRef)(null),[eH,eZ]=(0,a.useState)(eB),[ez,eG]=(0,a.useState)(null),[eq,e$]=(0,a.useState)(null),[eJ,eY]=(0,a.useState)(!0),eQ=(0,R.x)();(0,W.g)({awemeInfo:$,refMixPlayer:eW}),(0,a.useEffect)(()=>{A.listen(A.EVENT.VideoDetailSetNextVideo,e=>{eG(e)}),A.listen(A.EVENT.VideoDetailSetPrevVideo,e=>{e$(e)}),A.listen(A.EVENT.VideoDetailCurrentTab,e=>{eZ(null==e?void 0:e.tab)})},[]);let{CompHandle:eK}=(0,ec.r)({awemeId:q,awemeInfo:$,query:el,defaultCustomRelate:en,accountType:ed,abtestData:es}),{followStatus:eX}=(0,g.r)({selfUid:null==eu?void 0:null===(t=eu.info)||void 0===t?void 0:t.uid,actionUid:null==$?void 0:null===(l=$.authorInfo)||void 0===l?void 0:l.uid,defaultFollowerStatus:null==$?void 0:null===(i=$.authorInfo)||void 0===i?void 0:i.followerStatus,defaultFollowStatus:null==$?void 0:null===(n=$.authorInfo)||void 0===n?void 0:n.followStatus}),{follow:e0,unFollow:e1}=(0,x.OM)({selfUid:null==eu?void 0:null===(d=eu.info)||void 0===d?void 0:d.uid,actionUid:null==$?void 0:null===(u=$.authorInfo)||void 0===u?void 0:u.uid,defaultFollowerStatus:null==$?void 0:null===(c=$.authorInfo)||void 0===c?void 0:c.followerStatus,defaultFollowStatus:null==$?void 0:null===(v=$.authorInfo)||void 0===v?void 0:v.followStatus,isLogin:!!ex,accountParentEl:(0,T.r)()&&eP?eP:void 0,onLoginSuccess:()=>null==ep?void 0:ep({type:"updateUserInfo"}),logExtraParams:{author_id:null==$?void 0:null===(_=$.authorInfo)||void 0===_?void 0:_.uid,group_id:null==$?void 0:$.awemeId,enter_from:(0,F.mo)(),is_full_screen:(0,T.r)()?"1":"0",tab_name:(0,D.zD)()||(0,E.Rs)("tab_name")||"",from_group_id:null==$?void 0:$.awemeId,music_id:null==$?void 0:null===(y=$.music)||void 0===y?void 0:y.mid,compilation_id:null==$?void 0:null===(j=$.mixInfo)||void 0===j?void 0:j.mixId,aweme_type:null==$?void 0:$.awemeType,to_user_id:null==$?void 0:null===(N=$.authorInfo)||void 0===N?void 0:N.uid,item_duration_ms:(null==$?void 0:null===(b=$.video)||void 0===b?void 0:b.duration)||0}}),{isCommentShow:e2,toggleComment:e3,commentScrollContainer:e4}=(0,eI.x)({awemeInfo:$,awemelogPb:X,followStatus:eX}),e5=ey(),e8=(0,a.useRef)(null),e6=(0,a.useRef)(null),[e9,te]=(0,a.useState)(e6),tt=(0,s.DT)()&&(0,P.O)(),tn=(0,w.Z)({changeMinWinCb:e=>{document.body.style.overflow=e?"hidden":""},refMixPlayer:eW}),to=(0,a.useMemo)(()=>eQ?eR||tn:eR,[tn,eR,eQ]),{containerStyle:ta,targetToast:tr}=(0,V.c)({className:tn?ti.miniWinToast:ti.videoToast,containerRef:e8,targetRef:e9}),td=e=>{if(e){var t;return{awemeId:null==e?void 0:e.awemeId,url:(0,J.$N)(null==e?void 0:e.awemeId,"previous_page=video_detail"),img:null==e?void 0:null===(t=e.video)||void 0===t?void 0:t.cover,desc:null==e?void 0:e.desc}}return!1},ts=(eH===tl.L.Mix||eH===tl.L.Series)&&(0,k.nQ)(eA,eD,$)||ez&&td(null==ez?void 0:ez.info)||!1,tu=(eH===tl.L.Mix||eH===tl.L.Series)&&td(null==eq?void 0:eq.info)||!1,tm=(0,e_.v)({awemeInfo:$,nextVideoInfo:ts,prevVideoInfo:tu,videoToast:tr});(0,a.useEffect)(()=>{$&&A.emit(A.EVENT.postCurVideoInfo,{awemeId:$.awemeId,groupId:$.groupId,scene:S.lT.Detail,suggestWords:null==$?void 0:$.suggestWords})},[$]);let tf=(0,h.a)(),th=(0,a.useMemo)(()=>{let{danmaku_id:e,danmaku_offset:t}=(0,p.parse)(null==tf?void 0:tf.search);return e&&t?{danmakuId:e,danmakuOffset:Number(t),status:1,pausedStatus:!0}:null},[]),tp=(0,ee.A)(ex,eS),t_=(0,a.useCallback)(()=>{eY(!1)},[]),tg=(0,a.useMemo)(()=>({relation:String(eX),enter_method:(0,E.Rs)("enter_method")||""}),[eX]),tx=(null==$?void 0:$.awemeType)===r.e.Note;return(0,H.s)(!0),(0,o.jsx)(U.v.Provider,{value:{globalCommentCount:eN,setGlobalCommentCount:eb,setTargetVideoRef:te,videoToast:tr,player:eV,setPlayer:eO,renderTextWithTag:ea},children:(0,o.jsxs)("div",{"data-e2e":"video-detail",className:m()(ti.container,{[ti.commentShow]:e2,[ti.fullScreenContainer]:to,[ti.ohosStyle]:tt,isCssFullScreen:to,playerControlHeight:!0,isMiniWindow:tn,isMiniWindowOptimize:tn&&eQ}),children:[(0,o.jsxs)("div",{className:m()("leftContainer",ti.leftContainer),ref:eM,children:[(0,o.jsx)("div",{ref:e8,className:ti.videoToastContainer,style:ta}),(0,o.jsxs)("div",{className:m()(ti.isNewPlayer,ti.playerContainer,`video_${$.awemeId}`,"new-video-detail-container","newVideoPlayer","isDanmuPlayer","isDark",{detailNotFullScreen:!(eE||to),[ti.spiderContainer]:er}),"data-e2e":"player-container",children:[er&&(null==$?void 0:null===(M=$.video)||void 0===M?void 0:null===(L=M.playAddr)||void 0===L?void 0:L.length)>0&&(0,o.jsx)("video",{className:ti.fakeVideo,poster:null==$?void 0:null===(Z=$.video)||void 0===Z?void 0:Z.cover}),!er&&(0,o.jsxs)(B.C.Provider,{value:{isCssFullScreen:eE,isFullScreen:ek,isClientMiniWin:tn},children:[(0,o.jsx)(f.NoSSR,{children:(0,o.jsxs)(O.W,{ref:eW,actionFollow:e0,actionUnFollow:e1,awemeInfo:$,userInfo:eu,dispatch:ep,abtestData:es,isActive:!0,fullScreenTarget:eP,toggleComment:ek||eE?e3:()=>{A.emit(A.EVENT.VideoDetailTabChange,{tab:tl.L.Comment})},disableNext:!(null==ts?void 0:ts.url),nextVideoInfo:ts,videoToast:tr,playNextFunc:tm.playNextFunc,haveDashBoard:tp,danmakuInfo:th,reportExtraParams:tg,playSwitchParams:tm,logParams:{is_political_media:eU?1:0},onReady:t_,children:[(0,o.jsx)(ev.c,{playSwitchParams:tm,slot:null===O.h||void 0===O.h?void 0:O.h.PositionBoxSlot,isClientMiniWin:tn}),(0,o.jsx)(em.O,{onFullScreen:eF}),(0,o.jsx)(ef.f,{onCssFullScreen:eT}),(0,o.jsx)(eh.o,{})]})}),eJ&&(0,o.jsx)(I.v,{awemeInfo:$,useBlock:!0}),(0,o.jsx)("div",{}),(0,o.jsx)(G.R,{player:eV,isActive:!0}),(0,o.jsx)("div",{}),ej?(0,o.jsx)(ev.c,{playSwitchParams:tm,slot:null===O.h||void 0===O.h?void 0:O.h.PositionBoxSlot,isClientMiniWin:tn,isWebMiniWin:!0}):null]})]}),(0,o.jsx)("div",{className:ti.smallSecreenCt,children:!er&&(0,o.jsx)(tc,{isSpider:er,awemeInfo:$,awemelogPb:X,CompHandle:eK,abtestData:es,isShow:e5,reportExtraParams:{relation:String(eX),enter_method:(0,E.Rs)("enter_method")||""}})}),(0,o.jsx)("div",{className:m()(ti.commentContainer,{[ti.hidden]:tx&&(!ek||!eE)}),children:(0,o.jsx)(eC.Z,{isSpider:er,awemeId:q,awemeInfo:$,defaultComment:K,awemelogPb:X,scrollContainerEl:e4,fullScreenTarget:eP,isFullScreen:to,isCommentShow:e2,onCloseCommentClick:e3,reportExtraParams:tg,dispatch:ep})}),(0,o.jsx)("div",{id:"fullscreen_capture_feedback",children:(0,o.jsx)("div",{id:"fullscreen_capture"})})]}),(0,o.jsx)("div",{className:m()(ti.rightContainer,{[ti.hidden]:to}),children:(0,o.jsx)(tc,{isSpider:er,awemeInfo:$,awemelogPb:X,CompHandle:eK,abtestData:es,isShow:!e5,is_political_media:eU,reportExtraParams:{relation:String(eX),enter_method:(0,E.Rs)("enter_method")||""}})})]})})});var th=l("739358");let{Context:tp}=e4;var t_=(0,a.memo)(function(e){let{awemeInfo:t,statusCode:l=0,abtestData:v,setShowFooter:m}=e,{userInfo:f}=(0,e7.useUserInfoContext)()||{},{isLogin:h,info:p}=f||{},_=null==p?void 0:p.uid,g=(0,c.A)({statusCode:l,awemeInfo:t,uid:_,isLogin:h});if((0,a.useEffect)(()=>{(g.visible||(0,s._Q)()||!g.isLoading)&&(null==m||m(!0))},[g,m]),!g.visible){var x;return(0,s._Q)()?(0,o.jsx)(d.dR,{}):(null==v?void 0:null===(x=v.lcpOptimize)||void 0===x?void 0:x.video)&&(null==g?void 0:g.isLoading)?(0,o.jsx)(th.U,{}):(0,o.jsx)(u.o,(0,i._)({},g))}return(null==t?void 0:t.awemeType)===r.e.Note?(0,o.jsx)(tf,(0,n._)((0,i._)({},e),{awemeInfo:t})):(0,o.jsx)(tt,(0,n._)((0,i._)({},e),{awemeInfo:t}))})},103104:function(e,t,l){l.d(t,{z:function(){return d}});var i=l(520739),n=l(563097);l(88648);var o=l(326673),a=l(713097),r=l.n(a);let d=e=>{let{size:t="normal",type:l="primary",children:a,autoFixed:d=!0,className:s,width:u,style:c,theme:v="solid",disabled:m=!1,newStyle:f=!1,onClick:h}=e,p=r()(o.default.button,o.default[t],o.default[l],o.default[v],{[o.default.fixed]:!d,[o.default.newStyle]:f},s);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("button",{type:"button",disabled:m,onClick:h,className:p,style:(0,i._)({width:u&&`${u}px`},c),children:a})})}},598754:function(e,t,l){l.d(t,{u:function(){return h}}),l(874386);var i=l(563097),n=l(88648),o=l(309931),a=l(735636),r=l(713097),d=l.n(r),s=l(928826);l(311771);var u=l(54251),c=l(767548),v={default:1,1:"default",custom:2,2:"custom"};let m=!!("undefined"!=typeof window&&window.document&&window.document.createElement),f=e=>{var t,l,i,n,o;if(!m)return null;let a=document.createElement("div"),r=(null===(t=document)||void 0===t?void 0:t.fullscreenElement)||(null===(l=document)||void 0===l?void 0:l.msFullscreenElement)||(null===(i=document)||void 0===i?void 0:i.mozFullScreenElement)||(null===(n=document)||void 0===n?void 0:n.webkitFullscreenElement)||null;return r?r.appendChild(a):null===(o=null!=e?e:document.body)||void 0===o||o.appendChild(a),a},h=n.forwardRef((e,t)=>{let{className:l,modalClassName:r,onCancel:h,onOk:p,type:_="default",size:g="default",mask:x=!0,isHide:w=!0,closable:y=!0,title:I,message:S,okText:j,cancelText:C,maskClosable:N=!0,children:b,mountEl:k}=e,[E,R]=(0,n.useState)(w),T=(0,n.useRef)(null),F=(0,n.useRef)(E);F.current=E;let L=(0,n.useRef)(),P=(0,n.useRef)(),M=(0,n.useRef)(!1);!M.current&&m&&(P.current=f(k),L.current=P.current.parentNode,M.current=!0),(0,n.useImperativeHandle)(t,()=>P.current),(0,n.useEffect)(()=>(null===P.current.parentNode&&null!==L.current&&L.current.appendChild(P.current),()=>{var e,t;null===(t=P.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(P.current)}),[]),(0,n.useEffect)(()=>{R(w)},[w]);let A=async e=>{if(!!N&&T.current===e.target)await R(!0),null==h||h(e,F.current)},D=async e=>{await R(!0),null==h||h(e,F.current)},U=async e=>{await R(!0),null==p||p(e,F.current)};return P.current?o.createPortal((0,i.jsx)(a.Z,{in:!E,classNames:"modal-mask",timeout:{enter:400,exit:150},appear:!0,children:(0,i.jsx)("div",{ref:T,onClick:e=>A(e),className:d()(s.default.maskLayerWap,{[s.default.maskLayer]:x,[s.default.visible]:E,[s.default.mountEl]:!!k},r),children:(0,i.jsxs)("div",{className:d()("modal-pannel",{mountEl:!!k}),children:[(0,i.jsxs)("div",{className:d()(s.default.modalWap,s.default[g],{[s.default.defaultType]:2===v[_]},l),children:[(0,i.jsx)(c.Z,{onClick:e=>D(e),className:d()(s.default.closeIcon,{[s.default.closeIconHide]:!y}),src:u.Z,width:13,height:13,viewBox:"0 0 13 13"}),(0,i.jsx)("h2",{className:d()(s.default.title),children:I}),(0,i.jsx)("p",{className:d()(s.default.message),children:S}),(0,i.jsxs)("div",{className:d()(s.default.btn,{[s.default.btnHide]:!j&&!C}),children:[(0,i.jsx)("a",{href:"#",onClick:e=>U(e),className:d()(s.default.okText,{[s.default.okBtnHide]:!j}),children:j}),(0,i.jsx)("a",{href:"#",onClick:e=>D(e),className:d()(s.default.okText,s.default.cancelText,{[s.default.cancelBtnHide]:!C}),children:C})]})]}),(0,i.jsx)("div",{className:d()(s.default.modalWap,s.default[g],{[s.default.customType]:1===v[_]},l),children:b})]})})}),P.current):null})},219684:function(e,t,l){l.r(t),l.d(t,{H5Card:function(){return F},ActivityCard:function(){return L},default:function(){return P}});var i=l("520739"),n=l("878389");l("874386");var o=l("563097"),a=l("88648"),r=l("567754"),d=l("713097"),s=l.n(d),u=l("784492"),c=l("871212"),v=l("902845"),m=l("428647"),f=l("782442"),h=l("44905"),p=l("32167"),_=l("637005"),g=l("155396"),x=l("134761");l("675373"),l("250440"),l("882732"),l("544943"),l("311137"),l("284961"),l("826893");var w=l("231755"),y=l("14108"),I=l("831202"),S=l("516599"),j=l("358003"),C=l("447298");class N{async pcJsb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let l=(e,t,l)=>{var o,a;return{statusCode:e,statusMsg:t,data:(0,n._)((0,i._)({},l),{code:0===e?null!==(o=null==l?void 0:l.code)&&void 0!==o?o:0:e,message:0===e?null!==(a=null==l?void 0:l.message)&&void 0!==a?a:"":t})}};if("function"!=typeof this[e])return l(-1,"method not found");let o=await this[e](t);return l(0,"",o)}catch(e){return{statusCode:-1,statusMsg:"method error",data:{code:-1,message:"method error"}}}}toast(){var e,t;let{text:l,fullscreen:i=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"",fullscreen:!0};if(!l)return{code:-1,message:"no text info"};!i&&(null===(e=this.containerRefEl)||void 0===e?void 0:e.current)?S.F.info({text:l,root:null===(t=this.containerRefEl)||void 0===t?void 0:t.current,className:g.default.toast}):S.F.info(l)}openUserHomePage(){let{secUid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{secUid:""};if(!e)return{code:-1,message:"secUid empty"};let t=(0,y.HC)(e,(0,r.stringify)({enter_method:this.enterMethod}));window.open(t,"_blank","noopener")}openVideoDetail(){let{vid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vid:""};if(!e)return{code:-1,message:"vid empty"};let t=(0,y.JF)(e,(0,r.stringify)({enter_method:this.enterMethod}));window.open(t,"_blank","noopener")}async callLogin(){let{from:e,text:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:"",text:""};return await new Promise(l=>{(0,j.default)({enterMethod:null!=e?e:this.enterMethod,headerText:t,success:()=>{var e;null===(e=this.userDispatch)||void 0===e||e.call(this,{type:"updateUserInfo"})},onClose:()=>{l({code:1,message:"login cancel"})}})})}async fetch(){let{method:e,path:t,params:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{method:"",path:"",params:{}};if(!t)return{code:-1,message:"path empty"};if(!e)return{code:-1,message:"method empty"};if(!["get","post"].includes(e))return{code:-1,message:"method not support"};let o=(0,n._)((0,i._)({},null!=l?l:{}),{app_name:"douyin_web"});return"get"===e?{code:0,message:"",response:await (0,w.U2)(t,o)}:{code:0,message:"",response:await (0,w.v_)(t,o)}}async follow(){var e,t,l,i,n,o;let{user_id:a,type:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user_id:"",type:-1};if(!a)return{code:-1,message:"user_id empty"};if(![0,1].includes(r))return{code:-1,message:"type error"};let d={code:1,message:""};return await (0,C.ov)({selfUid:null===(t=this.userInfo)||void 0===t?void 0:null===(e=t.info)||void 0===e?void 0:e.uid,actionUid:a,action:1===r?"follow":"unFollow",defaultFollowerStatus:null===(i=this.awemeInfo)||void 0===i?void 0:null===(l=i.authorInfo)||void 0===l?void 0:l.followerStatus,defaultFollowStatus:null===(o=this.awemeInfo)||void 0===o?void 0:null===(n=o.authorInfo)||void 0===n?void 0:n.followStatus,clickFrom:"h5",success:e=>{d.code=0},fail:e=>{d.code=e.statusCode,d.message=e.errMsg}}),d}sendLog(){let{eventName:e,params:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventName:"",params:{}};try{window.collectEvent(e,t)}catch(e){}}report(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I.oe.event.info({name:I.Mo.H5ActivityEvent,report:(0,i._)({dy_h5_scene:this.scene},e)})}redirect(){let{url:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{url:""};if(!e)return{code:-1,message:"url empty"};try{let t=new URL(e).hostname;if(!["www.douyin.com","api.amemv.com"].includes(t))return{code:1,message:"url not allow"};return this.setIframeSrc(e),{code:0,message:""}}catch(e){return{code:1,message:"url invalid"}}}share(){var e,t,l,i,n,o;let{el:a,shareCommand:d,shareCommandTemplate:s,messageInfo:u,options:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{el:null,shareCommand:"",shareCommandTemplate:"",messageInfo:{},options:void 0};if(!(null==u?void 0:u.type))return{code:-1,message:"messageInfo empty"};if(!this.containerRefEl.current||!this.iframeRef.current)return{code:-1,message:"no container"};let v=this.containerRefEl.current.getBoundingClientRect(),m=null==a?void 0:a.getBoundingClientRect(),f=Math.floor(null!==(e=null==c?void 0:c.x)&&void 0!==e?e:Math.floor(-16+v.x)),h=Math.floor(null!==(t=null==c?void 0:c.y)&&void 0!==t?t:v.y+(null==m?void 0:m.y)+(null==m?void 0:m.height)/2),p=s.replaceAll("{command}",` ${(0,r.stringifyUrl)({url:d,query:{pc_im_inner:!0}})} `);return _.emit(_.EVENT.openShareModal,{from:"h5",x:f,y:h,direction:null!==(l=null==c?void 0:c.direction)&&void 0!==l?l:"left",zIndex:null!==(i=null==c?void 0:c.zIndex)&&void 0!==i?i:3010,isCloseByMouseLeave:null!==(n=null==c?void 0:c.isCloseByMouseLeave)&&void 0!==n&&n,showQrcodeBox:null!==(o=!!u.qrCodeUrl&&(null==c?void 0:c.showQrcodeBox))&&void 0!==o&&o,qrCodeUrl:u.qrCodeUrl||"",shareCommand:p,pureShareCommand:d,messageInfo:u,onOpenSuccess:()=>{_.emit(_.EVENT.videoStopPlayNext)},onClose:()=>{_.emit(_.EVENT.videoRemoveStopPlayNext)}}),{code:0,message:""}}constructor({scene:e,enterMethod:t,containerRefEl:l,iframeRef:i,awemeInfo:n,userDispatch:o,userInfo:a,setIframeSrc:r}){(0,x._)(this,"scene",""),(0,x._)(this,"enterMethod",""),(0,x._)(this,"containerRefEl",void 0),(0,x._)(this,"iframeRef",void 0),(0,x._)(this,"userDispatch",void 0),(0,x._)(this,"userInfo",void 0),(0,x._)(this,"awemeInfo",void 0),(0,x._)(this,"setIframeSrc",void 0),this.scene=e,this.enterMethod=t,this.containerRefEl=l,this.iframeRef=i,this.awemeInfo=n,this.userDispatch=o,this.userInfo=a,this.setIframeSrc=r}}var b=l("254897"),k=l("794593");let E=e=>{var t;let{isLogin:l,awemeInfo:o,anchorData:a,activityCardDirectOpen:d}=e,s={};(null==d?void 0:d.query)&&f.Le.getConfig(f.gI.ActivityShardVideo)&&(s=d.query,f.Le.setConfig(f.gI.ActivityShardVideo,void 0));let u={};if(null==a?void 0:a.schema)try{u=r.parseUrl((null==a?void 0:a.schema)||"").query}catch(e){return""}return r.stringifyUrl({url:`https://www.douyin.com${a.path}`,query:(0,n._)((0,i._)({},u,s),{from_aid:c.OTHER_APP_ID.DOUYIN_APP,app_id:c.APP_ID,author_id:null==o?void 0:o.authorUserId,pc_uid:l?null===(t=(0,h.Es)())||void 0===t?void 0:t.user_id:void 0,share_type:"pc",entrance:"douyin_web",previous_page:(0,p.vM)(),vote_gid:null==o?void 0:o.awemeId})})},R=()=>"undefined"==typeof navigator||navigator.onLine,T=e=>{let{children:t}=e,[l,i]=(0,a.useState)(R());return l?(0,o.jsx)(o.Fragment,{children:t}):(0,o.jsx)("div",{className:g.default.networkError,children:(0,o.jsx)(v.oO,{secondaryButtonAction:()=>{i(R())}})})},F=e=>{let{awemeInfo:t,activityName:l,anchorData:i,closeCard:n,isLogin:r,userInfo:d,userDispatch:c,iframeSrc:v,setIframeSrc:f,classname:p,es5:x=!1}=e,w=(0,a.useRef)(null),y=(0,a.useRef)(null),I=(0,a.useMemo)(()=>x||function(){try{return Function("() => {}"),Function("const a = window?.testEs6 ?? 1"),!0}catch(e){return!1}}(),[x]);return((0,u.Z)(()=>{var e,t;if(!I)return;let l=null===(e=w.current)||void 0===e?void 0:e.contentWindow;l&&l.postMessage({type:"loginChange",data:{isLogin:r,pc_uid:r?null===(t=(0,h.Es)())||void 0===t?void 0:t.user_id:""}},"https://www.douyin.com")},[r]),(0,a.useEffect)(()=>{if(!I)return;k.Z.report("pc_activity_page_show",{activity_name:null==i?void 0:i.activityName,activity_id:null==i?void 0:i.schema});let e=w.current.contentWindow,l=new N({scene:"mouth_select_vote_page",enterMethod:"mouth_select_vote_page",containerRefEl:y,iframeRef:w,awemeInfo:t,userInfo:d,userDispatch:c,setIframeSrc:f});e.openJingxuanActivityModal=()=>{var e,t,l;_.emit(_.EVENT.OpenJXModal,{source:"jingxuanActivity",activityName:null==i?void 0:i.activityName,bgUrl:null==i?void 0:null===(e=i.downloadConfig)||void 0===e?void 0:e.backgroundImg,noContent:null==i?void 0:null===(t=i.downloadConfig)||void 0===t?void 0:t.noContent,lightStyle:null==i?void 0:null===(l=i.downloadConfig)||void 0===l?void 0:l.lightStyle})},e.pcJsb=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.pcJsb(...t)}},[]),(0,a.useEffect)(()=>{if(v)return()=>{_.emit(_.EVENT.closeShareModal)}},[v]),v)?(0,o.jsxs)("div",{ref:y,className:s()(g.default.container,p),onWheel:e=>e.stopPropagation(),children:[I?(0,o.jsx)("iframe",{ref:w,className:g.default.jingxuanActivity,src:v,sandbox:"allow-same-origin allow-scripts",id:`${l||"h5"}Iframe`,onLoad:()=>{try{let e=w.current.contentDocument;e.addEventListener("click",()=>{k.Z.report("pc_activity_page_click",{activity_name:null==i?void 0:i.activityName,activity_id:null==i?void 0:i.schema})}),e.documentElement.style.overflow="overlay"}catch(e){}}}):(0,o.jsxs)("div",{className:g.default.es5,children:[(0,o.jsx)("div",{className:g.default.title,children:"浏览器版本过低"}),(0,o.jsx)("div",{className:g.default.desc,children:"您可以「升级浏览器」或「下载抖音桌面端」继续访问，感谢支持与陪伴"})]}),n&&(0,o.jsx)(b.z,{svg:(0,o.jsx)(m.Z,{}),className:s()(g.default.close,{[g.default.closeOnlyEs5]:!I}),onClick:e=>{null==n||n("icon")}})]},v):null},L=e=>{let{awemeInfo:t,activityName:l,anchorData:r,isLogin:d,activityCardDirectOpen:s}=e,[c,v]=(0,a.useState)("jingxuanActivity"===l?E({isLogin:d,awemeInfo:t,anchorData:r,activityCardDirectOpen:s}):"");return((0,u.Z)(()=>{v("jingxuanActivity"===l?E({isLogin:d,awemeInfo:t,anchorData:r}):"")},[l]),"jingxuanActivity"===l)?(0,o.jsx)(T,{children:(0,o.jsx)(F,(0,n._)((0,i._)({},e),{iframeSrc:c,setIframeSrc:v}),c)}):null};var P=a.memo(L)},617297:function(e,t,l){l.d(t,{e:function(){return s}}),l(250440),l(268917);var i=l(88648),n=l(567754),o=l(903868);let a={strategy:1,candidates:[{business_id:"daily_recommend",priority:9417,type:0,static_label:{style:{container_number:1,padding:null},containers:[{id:"main_frame_label",template:4,style:{color:"#FFFFFF",transparency:100,border_radius:4,padding:[4,3,0,2],height:20},elements:[{type:2,multi_images:{images:[{image:{uri:"aweme-client-static-resource/selected_dark_icon.png",url_list:["https://p9-pc-sign.douyinpic.com/obj/aweme-client-static-resource/selected_dark_icon.png?lk3s=138a59ce&x-expires=1767182400&x-signature=RhHBTovlBNI2KFXDQ1IceLa6I4E%3D&from=327834062","https://p3-pc-sign.douyinpic.com/obj/aweme-client-static-resource/selected_dark_icon.png?lk3s=138a59ce&x-expires=1767182400&x-signature=13pPxcPPGoTvfFhcrSAdjMUC0zU%3D&from=327834062"],width:720,height:720},style:{shape:0,size:12}}]},data_ref:"default_data"},{type:0,text:{content:"抖音精选内容",style:{size:12,bold:!0,omit_strategy:0,max_character:6,font_color:"#161823"}}},{type:2,multi_images:{images:[{image:{uri:"aweme-client-static-resource/ic_s_s_arrowrightmini@3x.png",url_list:["https://p3-pc-sign.douyinpic.com/obj/aweme-client-static-resource/ic_s_s_arrowrightmini@3x.png?lk3s=138a59ce&x-expires=1767182400&x-signature=RuRjFGnqe8jKOy8OKaoHUSn1hGY%3D&from=327834062","https://p9-pc-sign.douyinpic.com/obj/aweme-client-static-resource/ic_s_s_arrowrightmini@3x.png?lk3s=138a59ce&x-expires=1767182400&x-signature=XcubiT13mRNVEDxrwPYc6lY%2F%2BGQ%3D&from=327834062"],width:720,height:720},style:{size:12}}]},data_ref:"default_data"}],event_id:"daily_recommend"}],actions:[{event_id:"daily_recommend",action_type:6,data_ref:"default_data"}],data:null,tracking_info:"",data_map:[{key:"default_data",data:{schema:"sslocal://hunter_popup?enable_canvas=1&radius=0&banner_type=creator_lottery&loading_bg_color=%23FFFFFF00&container_bg_color=%23FFFFFF00&group=yumme_billboard_popup_overlay_daily&enable_code_cache=1&enable_canvas_optimize=1&enable_perf_collection=1&enable_preload=1&thread_strategy=2&channel=yumme_billboard_popup_overlay&bundle=pages%2Findex%2Ftemplate.js&disable_outside_click_close=0&enable_font_scale=1&surl=https%3A%2F%2Flf-normal-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fyumme%2Fbillboard%2Fpopup%2Fyumme_billboard_popup_overlay%2Fpages%2Findex%2Ftemplate.js&entrance_author_id=3935877303122940&entrance_item_id=7584276638897589561&entrance_item_create_time=1765852032&need_vote=0"}}],external_events:null}}]},r=[{business_id:"daily_recommend",activities:[{activity_name:"creator_lottery",download_modal_config:{no_content:!0,background_img:"https://lf3-static.bytednsdoc.com/obj/eden-cn/ild_jw_upfbvk_lm/ljhwZthlaukjlkulzlp/jingxuan_creator_lottery.png",light_style:!0},path:"/weekly_activity/fans-activity"}]}],d=(e,t)=>{try{var l,i,o,a,r,d,s,u,c,v,m,f,h,p,_,g,x,w,y,I,S,j,C,N,b,k,E,R,T;if(!(null==t?void 0:t.length))return null;let F=t.map(e=>e.business_id),L=null==e?void 0:null===(i=e.candidates)||void 0===i?void 0:null===(l=i.find)||void 0===l?void 0:l.call(i,e=>F.includes((null==e?void 0:e.business_id)||""));if(!(null==L?void 0:L.business_id)||!(null==L?void 0:L.static_label))return null;let{business_id:P,static_label:M}=L,A=(null===(a=t.find)||void 0===a?void 0:null===(o=a.call(t,e=>(null==e?void 0:e.business_id)===P))||void 0===o?void 0:o.activities)||[],D=null==M?void 0:null===(s=M.actions)||void 0===s?void 0:null===(d=s.find)||void 0===d?void 0:null===(r=d.call(s,e=>(null==e?void 0:e.event_id)===P))||void 0===r?void 0:r.data_ref,U=null==M?void 0:null===(m=M.data_map)||void 0===m?void 0:null===(v=m.find)||void 0===v?void 0:null===(c=v.call(m,e=>(null==e?void 0:e.key)===D))||void 0===c?void 0:null===(u=c.data)||void 0===u?void 0:u.schema,B=(null===(h=n.parseUrl(U))||void 0===h?void 0:null===(f=h.query)||void 0===f?void 0:f.banner_type)||"",V=null===(p=A.find)||void 0===p?void 0:p.call(A,e=>(null==e?void 0:e.activity_name)===B);if(!V)return null;let O=null==M?void 0:null===(x=M.containers)||void 0===x?void 0:null===(g=x.find)||void 0===g?void 0:null===(_=g.call(x,e=>(null==e?void 0:e.event_id)===P))||void 0===_?void 0:_.elements,W=(null==O?void 0:null===(I=O.find)||void 0===I?void 0:null===(y=I.call(O,e=>(null==e?void 0:e.type)===0))||void 0===y?void 0:null===(w=y.text)||void 0===w?void 0:w.content)||"抖音精选",H=null==O?void 0:null===(k=O.find)||void 0===k?void 0:null===(b=k.call(O,e=>(null==e?void 0:e.type)===2))||void 0===b?void 0:null===(N=b.multi_images)||void 0===N?void 0:null===(C=N.images)||void 0===C?void 0:null===(j=C[0])||void 0===j?void 0:null===(S=j.image)||void 0===S?void 0:S.url_list;if(!W||!(null==H?void 0:H.length))return null;return{content:W,urlList:H,path:(null==V?void 0:V.path)||"",downloadConfig:{noContent:(null==V?void 0:null===(E=V.download_modal_config)||void 0===E?void 0:E.no_content)||!1,backgroundImg:(null==V?void 0:null===(R=V.download_modal_config)||void 0===R?void 0:R.background_img)||"",lightStyle:(null==V?void 0:null===(T=V.download_modal_config)||void 0===T?void 0:T.light_style)||!1},schema:U,activityName:B}}catch(e){return null}},s=e=>{let{awemeInfo:t}=e,{isMainland:l,jingxuanActivity:n}=(0,o.Iq)(e=>{let{isMainland:t,jingxuanActivity:l}=e;return{isMainland:t,jingxuanActivity:l}}),{anchorList:r,hasJingxuanActivity:s}=(0,i.useMemo)(()=>{if(!l)return{anchorList:[],hasJingxuanActivity:!1};let e=[],i=d(null==t?void 0:t.generalLabel,n);localStorage.getItem("isJingxuanActivityTrue")&&!i&&(i=d(a,n));let o=!1;return i&&(o=!0,e.push({activityKey:"jingxuanActivity",data:i})),{anchorList:e,hasJingxuanActivity:o}},[l,t]);return{anchorList:r,hasJingxuanActivity:s}}},212233:function(e,t,l){l.d(t,{v:function(){return s}});var i=l("563097");l("88648");var n=l("713097"),o=l.n(n),a=l("55426"),r=l("840591"),d=l.p+"media/black-block.bba1fb1e9ad91468.jpeg";let s=e=>{var t,l,n,s,u;let{awemeInfo:c,useBlock:v=!1}=e,m=v?{backgroundImage:`url(${d})`,backgroundSize:"cover"}:{};return(0,i.jsx)("div",{className:r.default.container,style:m,children:!v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o()(r.default.imgBackground,r.default.playerShowInfo,"imgBackground"),children:(0,i.jsx)("img",{src:(null==c?void 0:null===(t=c.video)||void 0===t?void 0:t.originCover)||(null==c?void 0:null===(s=c.varietyVideo)||void 0===s?void 0:null===(n=s.cover)||void 0===n?void 0:null===(l=n.url_list)||void 0===l?void 0:l[0]),className:o()("backgroundCover",r.default.baseHeight)})}),(0,i.jsx)("div",{className:r.default.progressWrap,children:(0,i.jsxs)("div",{className:r.default.leftWrap,children:[(0,i.jsx)("div",{className:r.default.ctlBtn,children:(0,i.jsx)("span",{className:r.default.playBtn})}),(0,i.jsx)("div",{className:r.default.ctlBtn,children:(0,i.jsxs)("span",{className:r.default.textCtl,children:["00:00 / ",(0,a.$y)(null==c?void 0:null===(u=c.video)||void 0===u?void 0:u.duration)]})})]})})]})})}},316684:function(e,t,l){l.r(t),l.d(t,{default:function(){return $}});var i=l("520739"),n=l("878389");l("874386"),l("527785");var o=l("563097"),a=l("88648"),r=l("713097"),d=l.n(r),s=l("702726"),u=l("477667"),c=l("32167"),v={wrapper:"G2IdRd7N",header:"acfJHVFx",headerContent:"WFR2nAqB",title:"CsHl4WHR",recommendTag:"VziUD36d",warningIcon:"Cr7AHNWI",closeIcon:"FPD67hF0",content:"EStlMhQg",list:"HKO0xgKf",chapterAbstract:"MpmPRgoY",item:"npgJCnD2",itemActive:"DnDYhT2m",overHundredTime:"mvdo1WVz",itemHeader:"hFZ217ag",itemTime:"McB9zXIU",paly_animation_wrap:"xEkPl7xy",play_loading:"wIphgWY5",playloadingAnimation:"MLr4mq9W",playing_loading:"_AyR8KJN",playingAnimation:"Sd8hjO18",itemIcon:"Ge59hPAI",itemTitle:"fQx33EPI",displayIcon:"jimXarFY",itemDetail:"ESbuidIZ",itemDetailText:"qpDu5nGx",itemPoint:"dWUy_CfP",pointDesc:"MzJZk4_Z",pointDetail:"jfNFVORl",pointInteraction:"da7brb41",pointSvg:"lFu8ChlQ",interactionIcon:"HGspxbxj",activeIcon:"yzwQAn8w",fromAi:"xpKVxrE_",fromAiLine:"TSutJq5i",fromAiText:"_iGxtnaD",adaptive:"ujHT1r43"},m=l("602394");let f=e=>{let t=Math.floor(Number(e));if(isNaN(t))return"";let l=Math.floor(t/60);return[String(l).padStart(2,"0"),String(t-60*l).padStart(2,"0")].join(":")},h=e=>{let{player:t,awemeInfo:l,selfUid:o}=e,r=(0,a.useRef)(null),{list:d=[],chapterAbstract:u,isPoint:v}=l.chapterInfo,h=()=>{var e,t;return{enter_from:(0,c.mo)(),enter_from_merge:(0,c.vM)(),group_id:null==l?void 0:l.awemeId,author_id:null==l?void 0:null===(e=l.authorInfo)||void 0===e?void 0:e.uid,chapter_num:d.length,is_with_video_summary:u?1:0,panel_has_chapter_summary:d.length>0?1:0,is_author:o===(null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid)?1:0,is_knowledge_point:v?1:0}},p=e=>{m.F.info(e,t.innerContainer)},_=e=>{let t=f(e.timestamp/1e3);p(`已定位至 ${t}`)};return{onItemClick:e=>{t.seek(e.timestamp/1e3,"play"),s.logInstance.sendLog("chapterContentClick",(0,n._)((0,i._)({},h()),{button_name:"chapter",chapter_knowledge_point:Array.isArray(e.points)&&e.points.length>0?1:0,chapter_index_click:d.findIndex(t=>t.timestamp===e.timestamp)+1})),clearTimeout(r.current),_(e)},getCommonParams:h}};l("250440"),l("413806"),l("826893");var p=l("473677");let _=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.113 4.279c-.31.016-.597.167-.786.414-.216.284-.216.803-.216 1.842v8.296c0 1.063 0 1.594.22 1.88.192.248.485.398.798.41.36.012.793-.297 1.657-.916l5.925-4.244c.66-.474.991-.71 1.105-1.002.1-.255.097-.538-.008-.791-.12-.289-.456-.518-1.127-.977L8.755 5.14c-.857-.587-1.286-.88-1.642-.861zm.831 2.527v7.746l5.534-3.963-5.534-3.783z",fill:"#fff"})}))),g=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,n._)((0,i._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{filter:"url(#down_svg__filter0_d_594_5064)",clipPath:"url(#down_svg__clip0_594_5064)",children:(0,o.jsx)("path",{d:"M6.358 13.392c1.046 0 1.861-.84 1.97-1.823.04-.364.099-.78.184-1.22.12-.615.633-1.077 1.292-1.197h.34v-.03h1.116c.84 0 1.52-.68 1.519-1.52l-.005-4.45a1.4 1.4 0 0 0-1.4-1.399h-7.15a2.275 2.275 0 0 0-2.23 1.83L1.22 7.46a1.838 1.838 0 0 0 1.802 2.198h1.737c-.13.587-.196 1.267-.233 1.82-.071 1.072.8 1.915 1.832 1.915zm3.787-5.32V2.803h1.23a.35.35 0 0 1 .35.35l.004 4.45c0 .259-.21.47-.47.47h-1.114zm-1.05-5.269v5.465c-.795.308-1.436.967-1.613 1.88a16.15 16.15 0 0 0-.198 1.306c-.056.509-.471.888-.926.888-.468 0-.812-.372-.784-.795.055-.827.169-1.73.373-2.21a.525.525 0 0 0-.484-.73H3.022a.787.787 0 0 1-.773-.942l.774-3.876a1.225 1.225 0 0 1 1.201-.986h4.87z",fill:"#fff",fillOpacity:".9",shapeRendering:"crispEdges"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"down_svg__filter0_d_594_5064",x:".184",y:1.753,width:13.595,height:13.638,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_594_5064"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_594_5064",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"down_svg__clip0_594_5064",children:(0,o.jsx)("path",{fill:"#fff",transform:"rotate(180 7 7)",d:"M0 0h14v14H0z"})})]})]}))),x=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,n._)((0,i._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{filter:"url(#down_active_svg__filter0_d_594_5075)",clipPath:"url(#down_active_svg__clip0_594_5075)",children:(0,o.jsx)("path",{d:"M6.357 13.392c-1.03 0-1.902-.843-1.83-1.915.036-.553.103-1.233.232-1.82H3.02A1.838 1.838 0 0 1 1.22 7.458l.773-3.876a2.276 2.276 0 0 1 2.232-1.83H9.2v7.629a1.464 1.464 0 0 0-.687.966c-.086.44-.145.857-.185 1.22-.108.983-.924 1.824-1.97 1.824zM10.2 1.752h1.174a1.4 1.4 0 0 1 1.4 1.4l.004 4.45c.001.839-.679 1.52-1.518 1.52H10.2v-7.37z",fill:"#fff"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"down_active_svg__filter0_d_594_5075",x:".184",y:1.753,width:13.595,height:13.639,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_594_5075"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_594_5075",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"down_active_svg__clip0_594_5075",children:(0,o.jsx)("path",{fill:"#fff",transform:"rotate(180 7 7)",d:"M0 0h14v14H0z"})})]})]}))),w=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,n._)((0,i._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{filter:"url(#up_svg__filter0_d_594_5029)",clipPath:"url(#up_svg__clip0_594_5029)",children:(0,o.jsx)("path",{d:"M7.642.608c-1.046 0-1.861.84-1.97 1.823-.04.364-.099.78-.184 1.22-.12.615-.633 1.077-1.292 1.197h-.34v.03H2.74c-.84 0-1.52.68-1.519 1.52l.005 4.45a1.4 1.4 0 0 0 1.4 1.399h7.15a2.275 2.275 0 0 0 2.23-1.83l.774-3.876a1.837 1.837 0 0 0-1.802-2.198H9.241c.13-.587.196-1.267.233-1.82.071-1.072-.8-1.915-1.832-1.915zm-3.787 5.32v5.269h-1.23a.35.35 0 0 1-.35-.35l-.004-4.45c0-.259.21-.47.47-.47h1.114zm1.05 5.269V5.732c.795-.308 1.436-.967 1.613-1.88.092-.473.155-.919.198-1.306.056-.509.471-.888.926-.888.468 0 .812.372.784.795-.055.827-.169 1.73-.373 2.21a.525.525 0 0 0 .484.73h2.441c.497 0 .87.455.773.942l-.774 3.876a1.225 1.225 0 0 1-1.201.986h-4.87z",fill:"#fff",fillOpacity:".9",shapeRendering:"crispEdges"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"up_svg__filter0_d_594_5029",x:".221",y:".608",width:13.595,height:13.638,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_594_5029"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_594_5029",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"up_svg__clip0_594_5029",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h14v14H0z"})})]})]}))),y=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,n._)((0,i._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{filter:"url(#up_active_svg__filter0_d_594_5048)",clipPath:"url(#up_active_svg__clip0_594_5048)",children:(0,o.jsx)("path",{d:"M7.643.608c1.03 0 1.902.843 1.83 1.915-.036.553-.103 1.233-.232 1.82h1.738c1.159 0 2.028 1.061 1.801 2.198l-.773 3.876a2.276 2.276 0 0 1-2.232 1.83H4v-7.4h.196c.659-.119 1.172-.58 1.291-1.195.086-.44.145-.857.185-1.22.108-.983.924-1.824 1.97-1.824zM3 12.248h-.374a1.4 1.4 0 0 1-1.4-1.4l-.004-4.45c-.001-.839.679-1.52 1.518-1.52H3v7.37z",fill:"#fff"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"up_active_svg__filter0_d_594_5048",x:".222",y:".608",width:13.595,height:13.639,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_594_5048"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_594_5048",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"up_active_svg__clip0_594_5048",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h14v14H0z"})})]})]}))),I=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M4 7l5.76 5.76L15.52 7",stroke:"#fff",strokeOpacity:".5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),S=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M16 13l-5.76-5.76L4.48 13",stroke:"#fff",strokeOpacity:".5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),j=e=>{var t,l;let{item:r,isActive:u,overHundredTime:c,onItemClick:m,onClose:h,scrollIntoView:j,isPoint:C,commonLogParams:N,openModal:b,isDefaultOpen:k,isAuthor:E}=e,R=!C&&!!r.detail,T=null!==(l=null===(t=r.points)||void 0===t?void 0:t.filter(e=>"1"===String(e.type)))&&void 0!==l?l:[],F=C&&T.length>0,L=(0,a.useRef)(null),[P,M]=(0,a.useState)(k),[A,D]=(0,a.useState)([]),[U,B]=(0,a.useState)([]),V=(e,t)=>{e.stopPropagation(),A.includes(t)?D(A.filter(e=>e!==t)):(D([...A,t]),B(U.filter(e=>e!==t)),s.logInstance.sendLog("chapterContentClick",(0,n._)((0,i._)({},N),{chapter_knowledge_point:1,knowledge_index_click:t+1,button_name:"knowledge_like"})))},O=(e,t)=>{e.stopPropagation(),U.includes(t)?B(U.filter(e=>e!==t)):(B([...U,t]),D(A.filter(e=>e!==t)),b(t),s.logInstance.sendLog("chapterContentClick",(0,n._)((0,i._)({},N),{chapter_knowledge_point:1,knowledge_index_click:t+1,button_name:"knowledge_dislike"})))},W=e=>{e.stopPropagation(),s.logInstance.sendLog("chapterContentClick",(0,n._)((0,i._)({},N),{chapter_knowledge_point:1,button_name:P?"close":"open"})),M(!P)};return(0,a.useEffect)(()=>{if(u&&L.current){let e=L.current.getBoundingClientRect();j(L.current.offsetTop,e.height)}},[u,L,j]),(0,a.useEffect)(()=>{M(k)},[k]),(0,o.jsxs)("div",{className:d()(v.item,{[v.itemActive]:u,[v.noDetail]:!R,[v.overHundredTime]:c}),onClick:()=>{M(!0),m(r)},ref:L,children:[(0,o.jsxs)("div",{className:v.itemHeader,children:[u?(0,o.jsxs)("div",{className:v.paly_animation_wrap,children:[(0,o.jsx)("div",{className:v.play_loading}),(0,o.jsx)("div",{className:v.playing_loading})]}):(0,o.jsx)("div",{className:v.paly_animation_wrap,children:(0,o.jsx)(p.Z,{src:_,width:22,height:22,viewBox:"0 0 22 22",className:v.itemIcon,onClick:h})}),(0,o.jsx)("div",{className:v.itemTime,children:f(r.timestamp/1e3)}),(0,o.jsx)("div",{className:v.itemTitle,children:r.desc}),F&&(0,o.jsx)(p.Z,{src:P?S:I,width:20,height:20,viewBox:"0 0 20 20",className:v.displayIcon,onClick:e=>W(e)})]}),R&&(0,o.jsx)("div",{className:v.itemDetail,children:(0,o.jsx)("p",{className:v.itemDetailText,children:r.detail})}),F&&P&&T.map((e,t)=>(0,o.jsxs)("div",{className:v.itemPoint,children:[(0,o.jsx)("div",{className:v.pointDesc,children:e.desc}),(0,o.jsx)("div",{className:v.pointDetail,children:e.detail.split("\n").map((e,t)=>(0,o.jsx)("p",{style:{marginTop:0===t?0:8},children:e},t))}),E?null:(0,o.jsxs)("div",{className:v.pointInteraction,children:[(0,o.jsx)("div",{className:d()(v.pointSvg,{[v.activeIcon]:A.includes(t)}),onClick:e=>V(e,t),children:(0,o.jsx)(p.Z,{src:A.includes(t)?y:w,width:14,height:14,viewBox:"0 0 14 14",className:v.interactionIcon})}),(0,o.jsx)("div",{className:d()(v.pointSvg,{[v.activeIcon]:U.includes(t)}),onClick:e=>O(e,t),children:(0,o.jsx)(p.Z,{src:U.includes(t)?x:g,width:14,height:14,viewBox:"0 0 14 14",className:v.interactionIcon})})]})]},t))]})};var C=l("598754"),N=l("103104"),b=l("516599");let k=[{value:"1",label:"和视频不一致"},{value:"2",label:"有错别字"},{value:"3",label:"内容太少"},{value:"4",label:"内容太多"},{value:"5",label:"写得太模糊"},{value:"6",label:"语句不通畅"},{value:"7",label:"对我没帮助"},{value:"8",label:"本章节未提及"}];var E="w6UibfGb",R="l0L8Q_x0",T="W33vPjDF",F="cLs4mmqu",L="UqHY0jMt",P="HSB0bFgT",M="ooPEq3pU",A="CpksupO6",D="GBEAesYo",U="e4ucN7zU",B="TacFOcOX",V="plCdILBS",O=l.p+"media/cry.cb4ddfc6f0420a87.png";let W=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:28,height:28,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M19.59 9.59a.833.833 0 1 0-1.18-1.18L14 12.822l-4.41-4.41a.833.833 0 1 0-1.18 1.178L12.822 14l-4.41 4.412a.833.833 0 1 0 1.178 1.178L14 15.18l4.41 4.41a.833.833 0 0 0 1.18-1.178L15.177 14l4.411-4.41z",fill:"var(--color-text-t3)"})}))),H=e=>{let{visible:t,onClose:l,logParams:r}=e,[u,c]=(0,a.useState)(""),[v,m]=(0,a.useState)([]),f=e=>{v.includes(e)?m(v.filter(t=>t!==e)):m([...v,e])};return(0,a.useEffect)(()=>{m([]),c(""),t&&s.logInstance.sendLog("chapterFeedbackShow",(0,n._)((0,i._)({},r),{message:k.map(e=>e.label).join(",")}))},[t,r]),(0,o.jsxs)(C.u,{className:E,type:"custom",isHide:!t,onCancel:l,children:[(0,o.jsx)(p.Z,{src:W,className:R,viewBox:"0 0 28 28",onClick:()=>{s.logInstance.sendLog("chapterFeedbackClick",(0,n._)((0,i._)({},r),{button_name:"quit"})),l()}}),(0,o.jsxs)("div",{className:T,children:[(0,o.jsx)("img",{src:O,alt:"cry",className:F}),"很抱歉给你带来不好的感受"]}),(0,o.jsx)("div",{className:L,children:k.map((e,t)=>(0,o.jsx)("div",{className:d()(P,{[M]:v.includes(e.value)}),style:{marginRight:t%2==0?8:0},onClick:()=>{f(e.value)},children:e.label},e.value))}),(0,o.jsxs)("div",{className:A,children:[(0,o.jsx)("textarea",{id:"point-feedback-textarea",maxLength:200,value:u,onInput:e=>{c(e.target.value)},placeholder:"如果你还有补充的话，非常感谢。你的反馈是宝藏，我们将努力优化不负你的期待。",className:D,onKeyDown:e=>{e.stopPropagation()}}),(0,o.jsxs)("div",{className:d()(U,{[B]:u.length>200}),children:[u.length,"/",200]})]}),(0,o.jsx)(N.z,{type:"primary",className:V,onClick:()=>{b.F.info("感谢你的反馈"),s.logInstance.sendLog("chapterFeedbackClick",(0,n._)((0,i._)({},r),{button_name:"submit"})),s.logInstance.sendLog("chapterFeedbackResult",(0,n._)((0,i._)({},r),{message:v.map(e=>{var t;return`${e}:${null===(t=k.find(t=>t.value===e))||void 0===t?void 0:t.label}`}).join(","),input_text:u})),l()},disabled:0===v.length&&!u,children:"提交"})]})},Z=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,n._)((0,i._)({width:12,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{clipPath:"url(#warning_circle_svg__clip0_631_1613)",filter:"url(#warning_circle_svg__filter0_d_631_1613)",children:(0,o.jsx)("g",{filter:"url(#warning_circle_svg__filter1_d_631_1613)",children:(0,o.jsx)("path",{d:"M6 1a5 5 0 1 1 0 10A5 5 0 0 1 6 1zm0 1a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm0 5.5a.55.55 0 1 1 0 1.1.55.55 0 0 1 0-1.1zm0-4c.275 0 .497.225.493.5l-.037 2.55a.456.456 0 0 1-.912 0L5.507 4A.493.493 0 0 1 6 3.5z",fill:"#fff",fillOpacity:".75",shapeRendering:"crispEdges"})})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"warning_circle_svg__filter0_d_631_1613",x:-1,y:0,width:14,height:14,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_631_1613"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_631_1613",result:"shape"})]}),(0,o.jsxs)("filter",{id:"warning_circle_svg__filter1_d_631_1613",x:0,y:1,width:12,height:12,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:1}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_631_1613"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_631_1613",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"warning_circle_svg__clip0_631_1613",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z"})})]})]})));var z="nCIiBY97",G="HbwoyxDH";let q=()=>(0,o.jsx)("div",{className:z,children:(0,o.jsx)("span",{className:G,children:"如需修改或关闭，请去精选App"})});var $=e=>{let{isShow:t,player:l,awemeInfo:r,chapterProgress:m,onClose:f,selfUid:_,minSize:g=!1}=e,{list:x=[],chapterAbstract:w,isPoint:y=!1,useRecommendChapter:I,showAiTag:S}=r.chapterInfo,[C,N]=(0,a.useState)([]),[b,k]=(0,a.useState)(-1),[E,R]=(0,a.useState)(!1),T=(0,a.useRef)(null),F=(0,a.useRef)(null),L=(0,a.useRef)(),P=(0,a.useRef)(!1),[M,A]=(0,a.useState)(!1),[D,U]=(0,a.useState)(!1),[B,V]=(0,a.useState)(-1),O=(0,a.useRef)(null),W=(0,a.useRef)({}),z=r.authorInfo.uid===_,{onItemClick:G,getCommonParams:$}=h({player:l,awemeInfo:r,selfUid:_}),J=(0,a.useMemo)(()=>{var e;let t=null===(e=x[x.length-1])||void 0===e?void 0:e.timestamp;return!!t&&t>6e6},[x]),Y=(e,l)=>{if(t&&F.current){let t=F.current.getBoundingClientRect().height,i=e+l<F.current.scrollTop,n=F.current.scrollTop+t<e,o=F.current.scrollHeight-t;(i||n)&&(P.current=!0,F.current.scrollTo(0,Math.min(o,e-t/2)),P.current=!1)}},Q=(0,a.useMemo)(()=>!!z||450>=x.reduce((e,t)=>e+=(Array.isArray(t.points)?t.points:[]).reduce((e,t)=>("1"===String(t.type)&&(e+=t.desc.length+t.detail.length),e),0),0),[z,x]);return(0,a.useEffect)(()=>{t?(s.logInstance.sendLog("chapterContentShow",(0,n._)((0,i._)({},$()),{chapter_status:Q||m>=0?"expand":"fold"})),L.current=Date.now(),V(m)):L.current&&s.logInstance.sendLog("chapterContentExit",(0,n._)((0,i._)({},$()),{duration:Date.now()-L.current}))},[t]),(0,a.useEffect)(()=>{R(!0),N(x),k(m);let e=setTimeout(()=>{R(!1)},300);return()=>{clearTimeout(e)}},[x]),(0,a.useEffect)(()=>{if(F.current){let e=()=>{if(!P.current)s.logInstance.sendLog("chapterContentSlide",$())};return F.current.addEventListener("scrollend",e),()=>{var t;null===(t=F.current)||void 0===t||t.removeEventListener("scrollend",e)}}},[F]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:d()(v.wrapper,{[v.adaptive]:!g}),ref:T,children:[(0,o.jsxs)("div",{className:v.header,children:[(0,o.jsxs)("div",{className:v.headerContent,children:[(0,o.jsx)("div",{className:v.title,children:"章节要点"}),z&&I&&(0,o.jsxs)("div",{className:v.recommendTag,onClick:()=>{U(!0),clearTimeout(O.current),s.logInstance.sendLog("chapterAiDetailsPageClick",{is_knowledge_point:y?1:0,is_auto_chapter:1,enter_from:(0,c.mo)(),group_id:null==r?void 0:r.awemeId,button_name:"平台为你智能生成"}),O.current=setTimeout(()=>{U(!1)},3e3)},children:[(0,o.jsx)(p.Z,{src:Z,className:v.warningIcon,width:12,height:12,viewBox:"0 0 12 13"}),"平台为你智能生成"]})]}),(0,o.jsx)(p.Z,{src:u.Z,width:36,height:36,viewBox:"0 0 36 36",className:v.closeIcon,onClick:f})]}),(0,o.jsxs)("div",{className:v.content,ref:F,style:{display:E?"none":void 0},children:[w&&(0,o.jsx)("div",{className:v.chapterAbstract,children:w}),(0,o.jsx)("div",{className:v.list,children:C.map((e,t)=>(0,o.jsx)(j,{item:e,isActive:t===m,overHundredTime:J,onItemClick:G,onClose:f,scrollIntoView:Y,isPoint:y,commonLogParams:$(),openModal:e=>{W.current={group_id:null==r?void 0:r.awemeId,enter_from:(0,c.mo)(),chapter_index_click:t+1,knowledge_index_click:e+1},A(!0)},isDefaultOpen:Q||t===B,isAuthor:z},t))}),!z&&S&&(0,o.jsxs)("div",{className:v.fromAi,children:[(0,o.jsx)("div",{className:v.fromAiLine}),(0,o.jsx)("div",{className:v.fromAiText,children:"内容由AI生成"}),(0,o.jsx)("div",{className:v.fromAiLine})]})]}),D&&(0,o.jsx)(q,{})]}),y&&(0,o.jsx)(H,{visible:M,onClose:()=>A(!1),logParams:W.current})]})}},307362:function(e,t,l){l.d(t,{T:function(){return d}}),l(874386);var i=l(88648),n=l(720359),o=l(658065),a=l(32167),r=l(794593);let d=e=>{let{awemeInfo:t,isLogin:l,isActive:d,onOpenCard:s}=e,[u,c]=(0,i.useState)(!1),[v,m]=(0,i.useState)(""),[f,h]=(0,i.useState)(null),p=(0,n.d)(t),_=e=>{if("anchor"===e){var t,l,i;r.Z.report("pc_feed_label_click",{action:"close",enter_from:(0,o.yW)(),player_enter_from:(0,a.mo)(),group_id:null===(t=p.current)||void 0===t?void 0:t.awemeId,author_id:String(null!==(i=null===(l=p.current)||void 0===l?void 0:l.authorUserId)&&void 0!==i?i:""),label_type:null==f?void 0:f.activityName,activity_id:null==f?void 0:f.schema})}c(!1)},g=(0,i.useCallback)((e,t)=>{var l,i,n;c(!0),m(e),h(t),s(),r.Z.report("pc_feed_label_click",{action:"open",enter_from:(0,o.yW)(),player_enter_from:(0,a.mo)(),group_id:null===(l=p.current)||void 0===l?void 0:l.awemeId,author_id:String(null!==(n=null===(i=p.current)||void 0===i?void 0:i.authorUserId)&&void 0!==n?n:""),label_type:null==t?void 0:t.activityName,activity_id:null==t?void 0:t.schema})},[]);return(0,i.useEffect)(()=>{!d&&c(!1)},[d]),{isShowActivityCard:u,closeActivityCard:_,openActivityCard:g,activityName:v,anchorData:f,onActivityCardClick:(e,t)=>{u?_("anchor"):g(e,t)}}}},785427:function(e,t,l){l(874386);var i=l(563097),n=l(88648),o=l(734123),a=l(713097),r=l.n(a),d=l(128231),s=l.n(d),u=l(782442),c=l(32167),v=l(330746),m=l(161045),f=l(696332),h=l(208987),p=l(514243),_=l(826110);t.Z=n.memo(e=>{let{children:t,lineClamp:l=2,btnClassName:a,onlyKey:d="",maxLine:g=999,btnOnClick:x,renderContent:w,lineHeight:y=20,renderButton:I,player:S,showExpandButton:j=!0,renderBeforeContent:C,className:N}=e,[b,k]=(0,n.useState)(!1),[E,R]=(0,n.useState)(!1),T=(0,n.useRef)(g);T.current=g;let[F,L]=(0,n.useState)(l),{isFullScreen:P,isCssFullScreen:M}=(0,n.useContext)(h.C),A=(0,n.useRef)(null),[D,U]=(0,n.useState)(!1),[B,V]=(0,n.useState)(()=>{let e=u.Le.getConfig(u.gI.IsInModalVideo),t=(null==e?void 0:e.isInModal)||!1;return"video_detail"===(0,c.vM)()&&!P&&!M&&!t&&!0});(0,n.useEffect)(()=>{if(S){let e=e=>{let t=u.Le.getConfig(u.gI.IsInModalVideo),l=(null==t?void 0:t.isInModal)||!1;"video_detail"!==(0,c.vM)()||e||M||l?V(!1):V(!0)};return S.on(o.Events.FULLSCREEN_CHANGE,e),()=>{S.off(o.Events.FULLSCREEN_CHANGE,e)}}},[]),(0,n.useEffect)(()=>{U((0,v.i7)()&&!(0,v.GP)())},[]);let O=(0,n.useCallback)(s()(()=>{(0,n.startTransition)(()=>{if((null==A?void 0:A.current)&&!E){let{scrollHeight:e,clientHeight:t,clientWidth:i}=null==A?void 0:A.current;if(!!i)t>0&&(e-t>15||e>=y*l+15)?k(!0):k(!1)}})},500),[y,l,E]);return(0,n.useEffect)(()=>{let e=null;return A.current&&(e=m.Z.bind(A.current,O)),()=>{e&&(null==e||e())}},[O]),(0,n.useEffect)(()=>{R(!1),L(l),k(!1),O()},[d,l,y]),(0,i.jsx)("div",{className:r()(p.default.wrapper,{[p.default.notChrome]:!D,[p.default.isDetailSearch]:B,[p.default.isFixAfter]:!j}),children:(0,i.jsxs)("div",{ref:A,className:r()(p.default.text,N,{[p.default.expandText]:E,[p.default.lowChome]:(0,v.h5)("69.0"),[p.default.isSafari]:(0,v.G6)()}),style:{"--lineClamp":F,"--lineHeight":`${y}px`,"--maxHeight":`${y*F}px`},children:[(0,i.jsx)("div",{className:r()(p.default.btnWrap,{[p.default.btnShow]:b,[p.default.isUnfold]:E}),style:{height:`${y-2}px`},children:j&&(0,i.jsx)("button",{type:"button",onClick:e=>{if(!E){let e=(0,_.Y)(y,S);e&&(T.current=e)}L(e=>e===l?T.current:l),R(e=>!e),x&&x(E),(null==e?void 0:e.target)&&e.target.blur()},className:r()(a,p.default.btn),children:I?I(E):E?f.a.t("fold",{},"收起"):f.a.t("expand",{},"展开")})}),C&&C(b),w&&w({isUnfold:E}),"function"==typeof t?t(b):t]})})})},467969:function(e,t,l){l.d(t,{K:function(){return p}});var i=l(520739);l(675373);var n=l(88648),o=l(447298),a=l(516599),r=l(374592),d=l(706077),s=l(234048),u=l(738363),c=l(734017),v=l(744121),m=l(32167),f=l(150566),h=l(631493);let p=e=>{var t,l,p;let{userInfo:_,dispatch:g,awemeInfo:x,isLogin:w,videoToast:y,awemelogPb:I,reportExtraParams:S,logInstance:j}=e,C={selfUid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,awemeInfo:x,defaultCollectStatus:(null==x?void 0:x.userCollected)?s.c.Collected:s.c.Uncollected,isLogin:w,onLoginSuccess:async()=>{var e,t;null==g||g({type:"updateUserInfo"}),await (0,o.a8)({secUid:null==x?void 0:null===(e=x.authorInfo)||void 0===e?void 0:e.secUid,uid:null==x?void 0:null===(t=x.authorInfo)||void 0===t?void 0:t.uid})},success:e=>{let{action:t}=e;"collect"===t&&(y?y(s.a$.CollectSuccess):a.F.info(s.a$.CollectSuccess))},fail:e=>{let{statusCode:t}=e;if(t!==u.ERROR_CODE.ERROR_USER_UNLOGIN){if(t===u.ERROR_CODE.ERROR_COLLECT_TOO_FAST){y?y(s.a$.TooFast):a.F.info(s.a$.TooFast);return}if(t===u.ERROR_CODE.ERROR_COLLECT_RESTRICTED){y?y(s.a$.CollectBan):a.F.info(s.a$.CollectBan);return}y?y(s.a$.CollectFail):a.F.info(s.a$.CollectFail)}}};S&&(C.reportExtraParams=S);let{unCollect:N,collect:b}=(0,r.pD)(C),{collectStatus:k,count:E}=(0,d.u)({selfUid:null==_?void 0:null===(l=_.info)||void 0===l?void 0:l.uid,awemeId:null==x?void 0:x.awemeId,defaultCollectStatus:(null==x?void 0:x.userCollected)?s.c.Collected:s.c.Uncollected,defaultCount:null==x?void 0:null===(p=x.stats)||void 0===p?void 0:p.collectCount}),R=(0,n.useRef)(!1),T=async function(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clickMethod:"icon"},{clickMethod:n}=l||{};if(R.current)return;R.current=!0;let o=h.s.getPlayer((0,v.OB)());k===s.c.Collected?j.sendLog("clickCancelFavoriteVideo",(0,i._)({click_from:"icon",urlParamList:["previous_page","enter_method"],author_id:null==x?void 0:null===(e=x.authorInfo)||void 0===e?void 0:e.uid,group_id:null==x?void 0:x.awemeId,log_pb:I,enter_from:(0,m.mo)(),is_full_screen:"0",tab_name:(0,c.zD)()||(0,f.Rs)("tab_name")||"",play_current_time:Math.floor((null==o?void 0:o.currentTime)||0)},S)):j.sendLog("clickFavoriteVideo",(0,i._)({click_from:"icon",urlParamList:["previous_page","enter_method"],author_id:null==x?void 0:null===(t=x.authorInfo)||void 0===t?void 0:t.uid,group_id:null==x?void 0:x.awemeId,log_pb:I,enter_from:(0,m.mo)(),is_full_screen:"0",click_method:n,tab_name:(0,c.zD)()||(0,f.Rs)("tab_name")||"",play_current_time:Math.floor((null==o?void 0:o.currentTime)||0)},S)),k===s.c.Collected?await N({clickMethod:n}):await b({clickMethod:n}),R.current=!1};return{collectStatus:k,collectCount:E,handleClickCollect:T}}},54251:function(e,t,l){var i=l(520739),n=l(878389),o=l(563097),a=l(88648);let r=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:13,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M12.601 12.601a1.362 1.362 0 0 1-1.927 0L6.5 8.427 2.326 12.6a1.362 1.362 0 0 1-1.927-1.927L4.573 6.5.4 2.326A1.362 1.362 0 1 1 2.326.399L6.5 4.573 10.674.4a1.362 1.362 0 1 1 1.927 1.927L8.427 6.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#2F3035",fillOpacity:".9"})})));t.Z=r}}]);