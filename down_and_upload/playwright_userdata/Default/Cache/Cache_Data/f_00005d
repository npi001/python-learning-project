"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["57610"],{5537:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQzSURBVHgBzVk9aBxHFP52rSaQ+K5JIBDZ16QziQSpHIxO6RICOlcpUkhpQkgRqUgRAkGCgCE/xRFICG4kF8a4uhMYy92d8E9l0Mk/lYs7/4AtubiTZXBje/2+HZ9uZ3Z2ds+3sv3B43ZnZ2a//ebNm5l3wFsOz1q6+7AML5hBEJQRoAjPKwJBEfm+uif996TvjrBoIfBW8d77zVgt7e7J/RKeHlgWMmW8CXheCweeHcc7H3b2ivYePt6eELUa+Ss1NKjqNN79oMUbRVApt7Gv5G7fVb+Hx7PU7mHs+SSV9MPbp35tX8hdvAJ8dRz46GPgyGfKeP3DT8Cdu66WReVqVHD3fhnwG8gbv/wG/Hsy+fkhUXKtpn4T4U+Lgl4FeSONHEEFqaQTzypC0P8UeeL02XRyfdAFXPD8KV9iUQl54sRfe5elUgntdhvLy8uoVCooFi1uftvli0HRV0E4J1CRiPNPTEyEJOfm5lCr1dDtdsOyzJBFws919l7Sh2xmZgYjougjTxg+VS6X09tcv+F8PIZhsPMIuCYdnltTQ7mzo8oLBeDYUSF4ea9qf3hNkHSr1RoUUPWvv0QydreCVLt3K8CvPwcoHAxAz8hg4neBDY1GQ69bKKj+E96dPsQctqNfyOz8WymYEUn+RwUXFhYGBRyFE386enIp9/8/mRUzTWZs4IKQ1NvwXTYOieTOnLK+WBQIJGRoBDY2NgKJdVqdLGAb8dVB/3SjTARvXo35mzh86D9JiPrW0tJS7LkEbGu7arWqi3BoXKlJDokEv/0mRi7pBX2QVL+++SFsm9QH1U50lU+OWAiSeaSSLE+p5KIvYn0T/eEnyZWVFe0Z67t8OR4H/9MX+vn5eWs8azabWF9fD685Y3lP2ILz6upq+NvpdMJlj3VnZ2fDsl6vBzdMBUNZB18w7LDQp0ykqeS22KwZPOQMMxH1NZtxRkcRC8xDmh6ojW24bWjr9TqSwPrmbmVzcxOjwLmS2PZvLp+x+Z/rg7JAJ1g4qN3SqU249nNTU1PaPT+mP3leHaYPHh7XQoy5ZHHS2Jze5q+i3kj+h5gPEsc+1xTQtkZQfiYTIQwXvKYtLi5CJkOsq1GHV8FU8HwttoqkLfw2UGmMqB6sYcYYZhp3HsOS44flRHC7m6YizbYB2H9y6AKPttpWFX/8PtbAtpb2QTfgR4y2asSsLamPLUkawR47ePLnQdwA42P0zMGJZE6mnNCUIX5Qde6qLUq+RqvyXOyOBX/8DtlAZk2b5Y26yg/ubjeQJavK4+a5C3JUvJySssgF9JlJRbArCcyxIROYPB/zTEvCkfNwTuCCPynWyS8FfPHKQN1rNzACSG4aSkEjiR4qyWwrhsjwWMDzM1Ud3h2aYt+JdfoFCX9DMOvKxKbkDpmeG/VvCO4zQ4XXFOFemADoRYxnh/pLghpeAKra17jyXmwUAAAAAElFTkSuQmCC"},743317:function(e,t,l){l.d(t,{E:function(){return g}});var i=l("563097"),n=l("88648"),o=l("713097"),a=l.n(o),r=l("342221"),s=l("860684");l("874386");var d=l("254457"),u=l("88961"),c=l("5537"),v=l("658065"),f=l("794593"),m=l("473677");let p=e=>{let{data:t,onClick:l,awemeInfo:o,activityCardDirectOpen:s}=e,{urlList:p,content:g}=t,[h,_]=(0,u.Z)(),[y,x]=(0,n.useState)(p[0]);return(0,n.useEffect)(()=>{if(_){var e;f.Z.report("pc_feed_label_show",{enter_from:(0,v.yW)(),group_id:null==o?void 0:o.awemeId,author_id:String(null!==(e=null==o?void 0:o.authorUserId)&&void 0!==e?e:""),label_type:null==t?void 0:t.activityName,activity_id:null==t?void 0:t.schema})}},[_]),(0,n.useEffect)(()=>{s&&(null==l||l("jingxuanActivity",t))},[]),(0,i.jsxs)("span",{ref:h,className:a()(r.default.anchor),onClick:e=>{null==l||l("jingxuanActivity",t)},children:[(0,i.jsx)("img",{className:r.default.icon,src:y,onError:()=>x(c||""),alt:""}),(0,i.jsx)("span",{className:r.default.text,children:g}),(0,i.jsx)(m.Z,{className:a()(r.default.arrowSvg),src:d.Z,width:12,height:12,viewBox:"0 0 12 12"})]})},g=e=>{let{awemeInfo:t,className:l,anchorList:n,openActivityCard:o,isDetailPage:d=!1,activityCardDirectOpen:u}=e,c=(0,s.n)();return((null==c?void 0:c.video)||d)&&0!==n.length?(0,i.jsx)("span",{className:a()(r.default.anchorContainer,{[r.default.detail]:d},l),children:n.map(e=>{let{activityKey:l,data:n}=e;return"jingxuanActivity"===l?(0,i.jsx)(p,{data:n,awemeInfo:t,onClick:o,activityCardDirectOpen:u},n.activityName):null})}):null}},617297:function(e,t,l){l.d(t,{e:function(){return d}}),l(250440),l(268917);var i=l(88648),n=l(567754),o=l(903868);let a={strategy:1,candidates:[{business_id:"daily_recommend",priority:9417,type:0,static_label:{style:{container_number:1,padding:null},containers:[{id:"main_frame_label",template:4,style:{color:"#FFFFFF",transparency:100,border_radius:4,padding:[4,3,0,2],height:20},elements:[{type:2,multi_images:{images:[{image:{uri:"aweme-client-static-resource/selected_dark_icon.png",url_list:["https://p9-pc-sign.douyinpic.com/obj/aweme-client-static-resource/selected_dark_icon.png?lk3s=138a59ce&x-expires=1767182400&x-signature=RhHBTovlBNI2KFXDQ1IceLa6I4E%3D&from=327834062","https://p3-pc-sign.douyinpic.com/obj/aweme-client-static-resource/selected_dark_icon.png?lk3s=138a59ce&x-expires=1767182400&x-signature=13pPxcPPGoTvfFhcrSAdjMUC0zU%3D&from=327834062"],width:720,height:720},style:{shape:0,size:12}}]},data_ref:"default_data"},{type:0,text:{content:"抖音精选内容",style:{size:12,bold:!0,omit_strategy:0,max_character:6,font_color:"#161823"}}},{type:2,multi_images:{images:[{image:{uri:"aweme-client-static-resource/ic_s_s_arrowrightmini@3x.png",url_list:["https://p3-pc-sign.douyinpic.com/obj/aweme-client-static-resource/ic_s_s_arrowrightmini@3x.png?lk3s=138a59ce&x-expires=1767182400&x-signature=RuRjFGnqe8jKOy8OKaoHUSn1hGY%3D&from=327834062","https://p9-pc-sign.douyinpic.com/obj/aweme-client-static-resource/ic_s_s_arrowrightmini@3x.png?lk3s=138a59ce&x-expires=1767182400&x-signature=XcubiT13mRNVEDxrwPYc6lY%2F%2BGQ%3D&from=327834062"],width:720,height:720},style:{size:12}}]},data_ref:"default_data"}],event_id:"daily_recommend"}],actions:[{event_id:"daily_recommend",action_type:6,data_ref:"default_data"}],data:null,tracking_info:"",data_map:[{key:"default_data",data:{schema:"sslocal://hunter_popup?enable_canvas=1&radius=0&banner_type=creator_lottery&loading_bg_color=%23FFFFFF00&container_bg_color=%23FFFFFF00&group=yumme_billboard_popup_overlay_daily&enable_code_cache=1&enable_canvas_optimize=1&enable_perf_collection=1&enable_preload=1&thread_strategy=2&channel=yumme_billboard_popup_overlay&bundle=pages%2Findex%2Ftemplate.js&disable_outside_click_close=0&enable_font_scale=1&surl=https%3A%2F%2Flf-normal-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fyumme%2Fbillboard%2Fpopup%2Fyumme_billboard_popup_overlay%2Fpages%2Findex%2Ftemplate.js&entrance_author_id=3935877303122940&entrance_item_id=7584276638897589561&entrance_item_create_time=1765852032&need_vote=0"}}],external_events:null}}]},r=[{business_id:"daily_recommend",activities:[{activity_name:"creator_lottery",download_modal_config:{no_content:!0,background_img:"https://lf3-static.bytednsdoc.com/obj/eden-cn/ild_jw_upfbvk_lm/ljhwZthlaukjlkulzlp/jingxuan_creator_lottery.png",light_style:!0},path:"/weekly_activity/fans-activity"}]}],s=(e,t)=>{try{var l,i,o,a,r,s,d,u,c,v,f,m,p,g,h,_,y,x,w,S,C,N,b,E,I,T,k,j,P;if(!(null==t?void 0:t.length))return null;let L=t.map(e=>e.business_id),R=null==e?void 0:null===(i=e.candidates)||void 0===i?void 0:null===(l=i.find)||void 0===l?void 0:l.call(i,e=>L.includes((null==e?void 0:e.business_id)||""));if(!(null==R?void 0:R.business_id)||!(null==R?void 0:R.static_label))return null;let{business_id:A,static_label:M}=R,O=(null===(a=t.find)||void 0===a?void 0:null===(o=a.call(t,e=>(null==e?void 0:e.business_id)===A))||void 0===o?void 0:o.activities)||[],F=null==M?void 0:null===(d=M.actions)||void 0===d?void 0:null===(s=d.find)||void 0===s?void 0:null===(r=s.call(d,e=>(null==e?void 0:e.event_id)===A))||void 0===r?void 0:r.data_ref,B=null==M?void 0:null===(f=M.data_map)||void 0===f?void 0:null===(v=f.find)||void 0===v?void 0:null===(c=v.call(f,e=>(null==e?void 0:e.key)===F))||void 0===c?void 0:null===(u=c.data)||void 0===u?void 0:u.schema,W=(null===(p=n.parseUrl(B))||void 0===p?void 0:null===(m=p.query)||void 0===m?void 0:m.banner_type)||"",U=null===(g=O.find)||void 0===g?void 0:g.call(O,e=>(null==e?void 0:e.activity_name)===W);if(!U)return null;let z=null==M?void 0:null===(y=M.containers)||void 0===y?void 0:null===(_=y.find)||void 0===_?void 0:null===(h=_.call(y,e=>(null==e?void 0:e.event_id)===A))||void 0===h?void 0:h.elements,D=(null==z?void 0:null===(S=z.find)||void 0===S?void 0:null===(w=S.call(z,e=>(null==e?void 0:e.type)===0))||void 0===w?void 0:null===(x=w.text)||void 0===x?void 0:x.content)||"抖音精选",H=null==z?void 0:null===(T=z.find)||void 0===T?void 0:null===(I=T.call(z,e=>(null==e?void 0:e.type)===2))||void 0===I?void 0:null===(E=I.multi_images)||void 0===E?void 0:null===(b=E.images)||void 0===b?void 0:null===(N=b[0])||void 0===N?void 0:null===(C=N.image)||void 0===C?void 0:C.url_list;if(!D||!(null==H?void 0:H.length))return null;return{content:D,urlList:H,path:(null==U?void 0:U.path)||"",downloadConfig:{noContent:(null==U?void 0:null===(k=U.download_modal_config)||void 0===k?void 0:k.no_content)||!1,backgroundImg:(null==U?void 0:null===(j=U.download_modal_config)||void 0===j?void 0:j.background_img)||"",lightStyle:(null==U?void 0:null===(P=U.download_modal_config)||void 0===P?void 0:P.light_style)||!1},schema:B,activityName:W}}catch(e){return null}},d=e=>{let{awemeInfo:t}=e,{isMainland:l,jingxuanActivity:n}=(0,o.Iq)(e=>{let{isMainland:t,jingxuanActivity:l}=e;return{isMainland:t,jingxuanActivity:l}}),{anchorList:r,hasJingxuanActivity:d}=(0,i.useMemo)(()=>{if(!l)return{anchorList:[],hasJingxuanActivity:!1};let e=[],i=s(null==t?void 0:t.generalLabel,n);localStorage.getItem("isJingxuanActivityTrue")&&!i&&(i=s(a,n));let o=!1;return i&&(o=!0,e.push({activityKey:"jingxuanActivity",data:i})),{anchorList:e,hasJingxuanActivity:o}},[l,t]);return{anchorList:r,hasJingxuanActivity:d}}},277926:function(e,t,l){l.d(t,{ZP:function(){return M}});var i=l("520739"),n=l("878389");l("874386"),l("675373"),l("250440");var o=l("563097"),a=l("713097"),r=l.n(a),s=l("88648"),d=l("337499"),u=l("147613"),c=l("79307"),v=l("606604"),f=l("870105"),m=l("367366"),p=l("387787"),g=l("782442"),h=l("637005"),_=l("101879"),y=l("831202"),x=l("658065"),w=l("161045"),S=l("298123"),C=l("208987"),N=l("55426");let b=e=>{let{containerEl:t,nextSwiperHeaderHeight:l,cardBetween:i,upperSpace:n}=e,o=(0,N.U)(l)?0:100*l,a=(0,N.U)(l)?l:0,r=t?(0,N.U)(i)?0:100*i:0,s=(0,N.U)(i)?i:t?0:24,d=(0,N.U)(n)?0:100*n,u=(0,N.U)(n)?n:0,c=`calc(${100-o-r-d}% - ${u+s+a}px)`,v=`calc(${d}% + ${u}px)`;return{swiperHeight:c,calcUpperSpace:v,calSpaceBetween:s||r/100*(null==t?void 0:t.offsetHeight),spacePixelSum:u+s+a}};var E=l("981551"),I=l("591142"),T=l("288470"),k=l("816096"),j=l("750733"),P=l("631493"),L=l("151681"),R=l("516599"),A=l("903868"),M=function(e){var t,l,a;let{className:N,swiperClassName:M,abTestData:O={},cardBetween:F=T.qF.cardBetween,upperSpace:B=T.qF.upperSpace,nextSwiperHeaderHeight:W=T.qF.nextSwiperHeaderHeight,children:U,onSwiper:z,style:D={},swiperStyle:H={},isDefaultShowSideBar:V,customTop:Z,data:G,scene:Y,defaultCssFullScreen:Q,initIndex:K,useWheelListener:X=!0,splashAdStatus:q,collectionFolderInfo:J,isVideoSupportMP4:$,pagingSpeed:ee,globalAiCardValue:et}=e,{removeSlideListButton:el}=(0,A.Iq)(e=>{let{removeSlideListButton:t}=e;return{removeSlideListButton:t}}),ei=(0,s.useRef)(null),en=(0,s.useRef)(!1),[eo,ea]=(0,s.useState)(null),[er,es]=(0,s.useState)(null),[ed,eu]=(0,s.useState)(),[ec,ev]=(0,s.useState)(),[ef,em]=(0,s.useState)(!1),[ep,eg]=(0,s.useState)(V),[eh,e_]=(0,s.useState)(),[ey,ex]=(0,s.useState)((0,m.r)()),[ew,eS]=(0,s.useState)(Q),[eC,eN]=(0,s.useState)(!1),[eb,eE]=(0,s.useState)(!1),[eI,eT]=(0,s.useState)(ey),ek=(0,p.x)(),[ej,eP]=(0,s.useState)(d.L.Author),eL=(0,s.useRef)(""),eR=(0,s.useRef)();ei.current=er;let eA=()=>{var e;null===(e=ei.current)||void 0===e||e.update()},{awemeFeed:eM}=(0,L.j)();(0,s.useEffect)(()=>{eg(V)},[V]);let eO=(0,s.useRef)(null),eF=(0,s.useRef)(null),eB=(0,s.useCallback)(e=>{R.F.info({text:e},eO.current)},[]);(0,s.useEffect)(()=>{let e=()=>{(0,m.r)()?(eT(!0),(0,s.startTransition)(()=>{ex(!0)})):(eT(!1),ex(!1))};return document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e),g.Le.setConfig(g.gI.SlideStartTime,{slideStartTime:0})}},[]),(0,u.o)(()=>{let e=h.listen(h.EVENT.changeMinWindows,e=>{let{isMiniWin:t}=e;if(!(P.s.getPlayersByScene(c.lT.Modal).length>0)||Y===T.R5.Modal)t&&(eL.current=document.body.style.minWidth),document.body.style.minWidth=t?"auto":eL.current,document.body.style.overflow=t?"hidden":"",en.current=!0,eN(t)});return()=>e()},[]);let[eW,eU]=(0,s.useState)(ew);(0,s.useEffect)(()=>{let e=h.listen(h.EVENT.pageFullScreen,e=>{let{fullScreen:t,fromAuthorCard:l}=e;0===P.s.getPlayersByScene(c.lT.Modal).length&&(eS(e=>null!=t?t:!e),eU(e=>!e&&t&&l?e:null!=t?t:!e))});return()=>{null==e||e()}},[]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{try{let e=(0,_.t)();e instanceof Element&&"flex"!==getComputedStyle(e).display&&(y.oe.event.error({name:y.Mo.CssDroped}),k.Z.sendLog("cssDroped",{enter_from:(0,x.yW)()}))}catch(e){}},5e3);return()=>{clearTimeout(e)}},[]);let ez=(0,s.useRef)(0);(0,s.useEffect)(()=>{if(er){let e=()=>{h.emit(h.EVENT.tabContainerScroll,{tab:"recommend",scrollType:er.activeIndex>ez.current?"down":"up"}),ez.current=er.activeIndex};return er.on("slideChange",e),()=>{er.off("slideChange",e)}}},[er]),(0,s.useEffect)(()=>{if(eo){let e=w.Z.bind(eo,eA);return()=>{e&&(null==e||e())}}},[eo]),(0,s.useEffect)(()=>{if(er){let e=g.Le.getConfig(g.gI.GlobalSwiper);return g.Le.setConfig(g.gI.GlobalSwiper,er),()=>{g.Le.setConfig(g.gI.GlobalSwiper,e)}}},[er]);let eD=eC||ey||eI||eW,eH=(0,s.useMemo)(()=>{let e=W;return eb&&(e-=30),{nextSwiperHeaderHeightIn:e>=0?e:0,cardBetweenIn:F,upperSpaceIn:B}},[eb,W,F,B]),eV=(0,s.useMemo)(()=>{let{nextSwiperHeaderHeightIn:e,cardBetweenIn:t,upperSpaceIn:l}=eH,{calcUpperSpace:i,calSpaceBetween:n,swiperHeight:o}=b({containerEl:eo,nextSwiperHeaderHeight:e,cardBetween:t,upperSpace:l});return setTimeout(()=>null==er?void 0:er.update()),{upperSpace:eD?0:i,swiperHeight:eD||q===v.QB.Fullscreen?"100%":o,spaceBetween:eD?0:n}},[eH,eo,eD,q]),eZ=(0,s.useRef)(new Set),eG=(0,s.useMemo)(()=>(0,i._)({globalIsCommentShow:ed,setIsCommentShowFunc:eu,globalIsCommentTrayPushGuideShow:ec,setIsCommentTrayPushGuideShowFunc:ev,globalCommentTrayPushGuideType:ef,setCommentTrayPushGuideTypeFunc:em,globalIsRelatedShow:eh,setIsRelatedShowFunc:e_,globalIsSideBarShow:ep,setIsSideBarShowFunc:eg,setTargetVideoRef:e=>{eF.current=e.current},swiper:er,isFullScreen:ey,isCssFullScreen:ew,isClientMiniWin:eC,fullScreenTarget:eo,videoToast:eB,slideVideoTab:ej,setSlideVideoTab:eP,dislikeIdList:eZ.current,collectionFolderInfo:J},et||{}),[ed,eh,ep,er,ey,ew,eC,eo,eB,ej,ec,ef,J,et]),eY=(0,f.U)(),eQ=(0,s.useMemo)(()=>({position:"absolute",left:0,top:Z||eV.upperSpace}),[Z,eV]),eK=eD?0:null!==(l=null==H?void 0:H.paddingLeft)&&void 0!==l?l:30,eX=eD?0:null!==(a=null==H?void 0:H.paddingRight)&&void 0!==a?a:60,eq=q===v.QB.Fullscreen?`calc(100% + ${eX}px)`:"100%",eJ=(0,s.useCallback)(()=>{if(window.nextPlayer){var e;let t=null===(e=window)||void 0===e?void 0:e.nextPlayer,l=null==t?void 0:t.buffered;(null==l?void 0:l.length)>0?t.bufferedBeforeActive=1e3*l.end(0):t.bufferedBeforeActive=0,t.loadstartBeforeActive=(null==t?void 0:t.loadstart)?1:0,t.loadeddataBeforeActive=(null==t?void 0:t.loadeddata)?1:0}},[]),e$=(0,s.useMemo)(()=>eC?"unset":Y===T.R5.Recommend?`${495}px`:"400px",[eC,Y]);return s.Children.toArray(U).some(e=>{var t;return(null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===T.t6.OCCUPATION})?(0,o.jsx)(o.Fragment,{children:s.Children.toArray(U).map(e=>{var t;if((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===T.t6.OCCUPATION)return e})}):(0,o.jsxs)(C.C.Provider,{value:eG,children:[s.Children.toArray(U).map(e=>{var t;if((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===T.t6.OUTOFCONTAINER)return e}),(0,o.jsxs)("div",{id:"slidelist","data-active":eY,className:r()(I.default.outerContainer,"slidelist",N,"fullscreen_capture_feedback",{[r()(I.default.isFullScreen,"isCssFullScreen")]:eD,isTrimControls:null==O?void 0:null===(t=O.controls)||void 0===t?void 0:t.fullscreen,isMiniWindow:eC,isMiniWindowOptimize:eC&&ek}),ref:ea,style:D,children:[s.Children.toArray(U).map(e=>{var t;if((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===T.t6.OUTSIDE)return e}),(0,o.jsx)(j.t,{isDisabled:()=>!!eM.getValue("modalAwemeInfo"),onActiveIndexChange:e=>{var t,l;g.Le.setConfig(g.gI.SlideStartTime,{slideStartTime:Date.now()});let i=(null===(t=G[e-1])||void 0===t?void 0:t.awemeType)===101?"live":"video",n=(null===(l=G[e])||void 0===l?void 0:l.awemeType)===101?"live":"video";S.w.createFpsTask(e),S.w.calculateFpsBasedOnDuration(e,i,n),eJ()},direction:1,className:r()(I.default.swiperContainer,"fullscreen_capture_feedback",M,{[I.default.noPaddingLeft]:Y===T.R5.Follow||q===v.QB.Fullscreen,[I.default.removeSlideListButton]:el,[I.default.disableAnimation]:!0}),isVideoSupportMP4:$,style:(0,n._)((0,i._)((0,n._)((0,i._)({},eQ),{width:eq,height:eV.swiperHeight,overflow:"visible"}),H),{paddingLeft:eK,paddingRight:eX,minHeight:e$}),data:G,spaceBetween:eV.spaceBetween,speed:null!=ee?ee:250,touchRatio:2,resistanceRatio:eD?0:.7,ref:eR,onSwiper:e=>{es(e),null==z||z(e)},slideKey:e=>{var t,l;return(null==e?void 0:e.awemeId)||(null==e?void 0:null===(l=e.cellRoom)||void 0===l?void 0:null===(t=l.rawdata)||void 0===t?void 0:t.id_str)},"data-e2e":"slideList","data-active":eY,initIndex:K,children:s.Children.toArray(U).map(e=>{var t;if([T.t6.INSIDE,T.t6.CONTAINERSTART,T.t6.CONTAINEREND,T.t6.WRAPPERSTART,T.t6.WRAPPEREND,T.t6.WRAPPERRIGHT].includes(null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot))return e})}),(0,o.jsx)("div",{style:{marginLeft:eK,marginRight:eX},className:r()(I.default.slidVideoToastContainer,"fullscreen_capture"),ref:eO}),(0,o.jsx)("div",{id:"fullscreen_capture_feedback",children:(0,o.jsx)("div",{id:"fullscreen_capture"})}),X&&(0,o.jsx)(E.J,{abtestData:O,EventListener:er,refContainerStatus:eo,isCssFullScreen:ew,isClientMiniWin:eC})]})]})}},495765:function(e,t,l){l.d(t,{j:function(){return v}});var i=l(520739);l(250440),l(779788);var n=l(88648),o=l(663153),a=l(702726),r=l(734123),s=l(32167),d=l(658065),u=l(44905),c=l(782442);let v=e=>{let{player:t,isActive:l,abValue:v}=e;(0,n.useEffect)(()=>{var e,i;if(t&&l&&(null==v?void 0:null===(e=v.abrConfig)||void 0===e?void 0:e.downSrConfig)){let e=()=>{var e,l;(null===(l=t.abrInstance)||void 0===l?void 0:null===(e=l.module)||void 0===e?void 0:e.setGetTargetSrName)&&t.abrInstance.module.setGetTargetSrName(e=>{var t;let l=null==v?void 0:null===(t=v.SR)||void 0===t?void 0:t.improvePictureQuality;if((null==e?void 0:e.includes("1080"))&&l)return"720"})};return null==t||null===(i=t.once)||void 0===i||i.call(t,r.Events.TIME_UPDATE,e),()=>{var l;null==t||null===(l=t.off)||void 0===l||l.call(t,r.Events.TIME_UPDATE,e)}}},[t,l,v]),(0,n.useEffect)(()=>{if(t){t.upperCount=t.upperCount||0,t.lowerCount=t.lowerCount||0,t.abrCount=t.abrCount||0,t.abrChangeCount=t.abrChangeCount||0,t.upperAbrChangeCount=t.upperAbrChangeCount||0,t.lowerAbrChangeCount=t.lowerAbrChangeCount||0;let e=e=>{var l,n,o;let{v_time:r,buffer:v,target_birate:f,b_seek:m,costTime:p,net_speed:g,is_upper:h}=e;a.logInstance.sendLog("abrChange",(0,i._)({enter_from:(0,s.vM)(),enter_from_merge:(0,d.yW)(),abr_id:`${null===(l=(0,u.Es)())||void 0===l?void 0:l.user_unique_id}_${null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.vid}_${null==t?void 0:t.firstFrameTmp}`,group_id:null==t?void 0:null===(o=t.config)||void 0===o?void 0:o.vid,buffer:v,current_position:r,target_birate:f,internet_speed:g,user_seek:m,costTime:p,is_upper:h,abr_config:JSON.stringify(c.Le.getConfig(c.gI.AbtestData).abrConfig)},e||{})),h?t.upperCount++:t.lowerCount++,t.abrCount++},l=function(){var e,l,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{orgDefinition:r,orgBitrate:v,currentDefinition:f,currentBitrate:m}=o;a.logInstance.sendLog("abrChangeDefinition",(0,i._)({enter_from:(0,s.vM)(),enter_from_merge:(0,d.yW)(),group_id:null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.vid,origin_definition:r,origin_bitrate:v,current_definition:f,current_bitrate:m,is_upper:m>v?1:0,is_upper_definition:f>r?1:0,abr_id:`${null===(l=(0,u.Es)())||void 0===l?void 0:l.user_unique_id}_${null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.vid}_${null==t?void 0:t.firstFrameTmp}`,abr_config:JSON.stringify(c.Le.getConfig(c.gI.AbtestData).abrConfig)},o)),m>v?t.upperAbrChangeCount++:t.lowerAbrChangeCount++,t.abrChangeCount++};return t.on(o._c.ABR_STAT,e),t.on(o._c.ABR_DEFINITION_REAL_CHANGE,l),()=>{t.off(o._c.ABR_STAT,e),t.off(o._c.ABR_DEFINITION_REAL_CHANGE,l)}}},[t])}},563830:function(e,t,l){l.d(t,{T:function(){return r}}),l(874386);var i=l(88648),n=l(147613),o=l(637005),a=l(903868);let r=e=>{let{isFirst:t,isAuthorCardShow:l,isShowRelatedCard:r,isLast:s,canUseListenFeed:d,prevAwemeInfo:u,nextAwemeInfo:c,listenFeedPrevAwemeInfo:v,listenFeedNextAwemeInfo:f,isInnerFeed:m,isActive:p}=e,{isListenVideoMiniWin:g}=(0,a.Iq)(e=>{let{isListenVideoMiniWin:t}=e;return{isListenVideoMiniWin:t}}),[h,_]=(0,i.useState)(),[y,x]=(0,i.useState)();return(0,n.o)(()=>{if(!p)return;let e=t&&!(l||r)||(l||r)&&!u,i=s&&!(l||r)||(l||r)&&!c,n=!v,a=!f,h=!m&&d;o.emit(o.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",type:"disablePrevStatusSync",newVal:h&&g?n:e}),o.emit(o.EVENT.ListenVideoPipWindowStatusSync,{from:"main",to:"pip",newVal:h&&g?a:i,type:"disableNextStatusSync"}),x(h&&g?a:i),_(h&&g?n:e)},[v,f,t,l,r,s,g,d,c,u,m,p]),{listenVideoDisableNext:y,listenVideoDisablePrev:h}}},348447:function(e,t,l){l.d(t,{u:function(){return s}});var i=l(88648),n=l(928673),o=l(782442),a=l(356650),r=l(552167);let s=e=>{let{awemeInfo:t,player:l}=e;(0,i.useEffect)(()=>{let e=(0,a.zJ)(t),i=o.Le.getConfig(o.gI.ImmersiveSwitchStatus);if(e&&i){var s,d;let e=null==l?void 0:null===(d=l.root)||void 0===d?void 0:null===(s=d.closest)||void 0===s?void 0:s.call(d,".basePlayerContainer");e&&(n.ZP.removeClass(e,r.oY),n.ZP.removeClass(e,r.PN),n.ZP.removeClass(e,r.oP),n.ZP.removeClass(e,r.nl))}},[t,l])}},893849:function(e,t,l){l.d(t,{U:function(){return p}});var i=l(520739),n=l(878389);l(675373),l(779788);var o=l(88648),a=l(782442),r=l(150566),s=l(849229),d=l(850063),u=l(797127),c=l(344949);let v=!1,f=()=>{if(v)return null;v=!0;let e=a.Le.getConfig(a.gI.PlayerStateBeforeRefeshForNotUse);if(e&&"object"==typeof e)return a.Le.setConfig(a.gI.PlayerStateBeforeRefeshForNotUse,null),e;if((0,r.Rs)(u.REFRESH_FOR_NOT_USE)){let e=(0,r.Rs)(u.VID)||(0,r.Rs)(u.MODAL_ID),t=Number((0,r.Rs)(u.SEEK_TIME)),l=!!(0,r.Rs)(u.REFRESH_IMMERSIVE_SWITCH),i=(0,r.Rs)(u.REFRESH_VIDEO_TAB);return Promise.resolve().then(()=>{let e=(0,s.q)([u.REFRESH_FOR_NOT_USE,u.VID,u.SEEK_TIME,u.REFRESH_IMMERSIVE_SWITCH,u.REFRESH_VIDEO_TAB],location.href);history.replaceState({},"",e)}),{vid:e,seekTime:t,immersiveSwitch:l,videoTab:i}}return null},m=()=>{let e=a.Le.getConfig(a.gI.PlayerStateFromLynx);(null==e?void 0:e.vid)&&a.Le.setConfig(a.gI.PlayerStateFromLynx,(0,n._)((0,i._)({},e),{hasSeek:!0}))},p=e=>{let{config:t,player:l,isActive:i,awemeInfo:n,setIsSideBarShowFunc:r,setSlideVideoTab:s,playerReady:u}=e,v=(0,o.useRef)(i),p=(0,o.useRef)(void 0),g=(0,o.useRef)(null);if((0,o.useEffect)(()=>{g.current&&g.current!==n.awemeId&&c.Z.sendLog("refreshNoMatchVid",{vid:g.current})},[]),!i)return t.autoplay=i,t.notUseRefreshVid=null,l&&(l.config.notUseRefreshVid=null),t.isOnByOuter=void 0,t;if((0,d.B)()||(0,d.r)())return t.autoplay=!1,t;let h=()=>{m(),a.Le.setConfig(a.gI.PlayerStateFromLynx,void 0),l.off("seeked",h)},_=a.Le.getConfig(a.gI.PlayerStateFromLynx);if(_){let{vid:e,seekTime:o,paused:r,muted:s,hasSeek:d}=_;return i&&e&&(null==n?void 0:n.awemeId)&&e!==(null==n?void 0:n.awemeId)?(a.Le.setConfig(a.gI.PlayerStateFromLynx,void 0),t):(t.autoplay=!1,v.current=!1,t.notUseRefreshVid=n.awemeId,e===n.awemeId&&(t.autoplay=!r,t.startTime=o,l&&!d&&(l.seek(o,r?"pause":"play"),l.on("seeked",h))),l&&(l.muted=s),t)}let y=f();if(y){let{vid:e,seekTime:l,immersiveSwitch:i,videoTab:o}=y;g.current=e,t.autoplay=!1,v.current=!1,t.notUseRefreshVid=n.awemeId,e===n.awemeId&&l&&document.hidden&&(t.startTime=l,i&&(p.current=!0),o&&(null==r||r(!0),null==s||s(o)))}return l&&l.config&&l.config.notUseRefreshVid!==n.awemeId&&(t.notUseRefreshVid=null,l.config.notUseRefreshVid=null,p.current=void 0),t.isOnByOuter=p.current,t.autoplay=v.current,t}},326111:function(e,t,l){l.d(t,{w:function(){return d}}),l(250440);var i=l(88648),n=l(734123),o=l(732365),a=l(637005),r=l(777480),s=l(692784);let d=e=>{let{player:t,isActive:l,abtestData:d,awemeInfo:u={},isInnerFeed:c}=e,{awemeId:v,isAds:f}=u,m=(0,i.useCallback)(()=>{var e,l,i,n,o,a,r,c,v,f,m,p,g,h;let _=(0,s.RH)({abtestData:d,player:t,awemeInfo:u});if(t.claritySr=_,!_){t.cancelSR=1,null===(l=window.TTCommon)||void 0===l||null===(e=l.executeWithElement)||void 0===e||e.call(l,t.video,"updateSrState",0);return}if((null==t?void 0:t.video)&&window.TTCommon&&_){let e=(null==d?void 0:null===(i=d.SR)||void 0===i?void 0:i.videoGpuSrSupportType)||"255",l=null==t?void 0:null===(n=t.curDefinition)||void 0===n?void 0:n.srSharpnessStrength;if((null==d?void 0:null===(o=d.dxsr)||void 0===o?void 0:o.enable)&&l){let e=null==d?void 0:null===(f=d.dxsr)||void 0===f?void 0:null===(v=f.definition)||void 0===v?void 0:v.includes(null==t?void 0:null===(c=t.curDefinition)||void 0===c?void 0:c.definition),i=null==d?void 0:null===(p=d.dxsr)||void 0===p?void 0:null===(m=p.sharpness)||void 0===m?void 0:m.includes(l);e&&i&&(null===(h=window.TTCommon)||void 0===h||null===(g=h.executeWithElement)||void 0===g||g.call(h,t.video,"UpdateSrSharpLevel",l))}null===(r=window.TTCommon)||void 0===r||null===(a=r.executeWithElement)||void 0===a||a.call(r,t.video,"updateSrState",e),t.sr=1}},[t,v,d]),p=(0,i.useCallback)(()=>{var e,l,i,n,o,a,r,s,u;if((null==t?void 0:null===(e=t.curDefinition)||void 0===e?void 0:e.qualityType)>9&&!f){if(null==d?void 0:null===(o=d.SR)||void 0===o?void 0:o.improvePictureQuality){m();return}t.cancelSR=1,null===(r=window.TTCommon)||void 0===r||null===(a=r.executeWithElement)||void 0===a||a.call(r,t.video,"updateSrState",0)}else t.cancelSR=1,null===(u=window.TTCommon)||void 0===u||null===(s=u.executeWithElement)||void 0===s||s.call(u,t.video,"updateSrState",0);f&&(null==t?void 0:null===(l=t.curDefinition)||void 0===l?void 0:l.qualityType)>9&&m(),(null==d?void 0:null===(i=d.SR)||void 0===i?void 0:i.enable1080)&&(null==t?void 0:null===(n=t.curDefinition)||void 0===n?void 0:n.definition)===1&&m()},[t,v,d,f,m]);(0,i.useEffect)(()=>{if(l&&window.TTCommon&&t){var e,i;return t.sr=0,t.currentTime>0&&p(),null==t||null===(e=t.on)||void 0===e||e.call(t,r.Cf.DefinitionChangeOnlyForSr,p),null==t||null===(i=t.on)||void 0===i||i.call(t,o.W.DEFINITION_CHANGE_HINT,p),t.on("ABR_AUTO_DESC_CHANGE",p),()=>{var e,l;null==t||null===(e=t.off)||void 0===e||e.call(t,o.W.DEFINITION_CHANGE_HINT,p),null==t||null===(l=t.off)||void 0===l||l.call(t,r.Cf.DefinitionChangeOnlyForSr,p),t.off("ABR_AUTO_DESC_CHANGE",p)}}},[t,v,l,d,p]),(0,i.useEffect)(()=>{if(window.TTCommon&&t){var e,l;let i=e=>{"firstFrame"===e.eventType&&p()};return null==t||null===(e=t.on)||void 0===e||e.call(t,n.Events.XGLOG,i),null==t||null===(l=t.once)||void 0===l||l.call(t,n.Events.TIME_UPDATE,p),()=>{var e,l;null==t||null===(e=t.off)||void 0===e||e.call(t,n.Events.XGLOG,i),null==t||null===(l=t.off)||void 0===l||l.call(t,n.Events.TIME_UPDATE,p)}}},[t,v,p]),(0,i.useEffect)(()=>{if(!t||!l||c||!(null==d?void 0:d.authorCardSr))return;let e=a.listen(a.EVENT.InnerFeedReady,()=>{var e;(null==t?void 0:null===(e=t.video)||void 0===e?void 0:e.style)&&(t.video.style.display="none")}),i=a.listen(a.EVENT.InnerFeedExit,()=>{var e;(null==t?void 0:null===(e=t.video)||void 0===e?void 0:e.style)&&(t.video.style.display="block")});return()=>{e(),i()}},[t,l,v,c,null==d?void 0:d.authorCardSr])}},744785:function(e,t,l){l.d(t,{e:function(){return T}});var i=l("134761"),n=l("520739");l("874386"),l("429532");var o=l("563097"),a=l("88648"),r=l("734123"),s=l("412679"),d=l("489478"),u=l("147613"),c=l("574138"),v=l("51235"),f=l("32167"),m=l("637005"),p=l("359897"),g=l("330746"),h=l("878389");let _=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,h._)((0,n._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M14.398 3.037c.265 0 .524.029.772.082a1.764 1.764 0 0 1-.108.294c-.028.013-.062.032-.105.049a3.206 3.206 0 0 1-.286.096l-.302.076a2.23 2.23 0 0 0-1.372.93l-.098.159H7.092A1.968 1.968 0 0 0 5.125 6.69v10.34c0 1.086.881 1.967 1.967 1.967h4.443l.33-1.55c.114-.506.369-.969.735-1.334l2.799-2.742c.286-.292.612-.535.967-.723v-2.2a2.294 2.294 0 0 0 1.685.226v1.516l.072-.002a2.902 2.902 0 0 1 2.075.83 3.45 3.45 0 0 1-.352 4.81l-2.798 2.808a2.711 2.711 0 0 1-1.33.735l-3.629.778h-.202a.808.808 0 0 1-.798-1.066l.085-.4H7.092A3.654 3.654 0 0 1 3.44 17.03V6.69a3.654 3.654 0 0 1 3.653-3.653h7.306zm3.725 10.675a2.328 2.328 0 0 0-1.596.726l-2.799 2.817c-.149.145-.253.33-.298.533l-.521 2.485 2.48-.534c.202-.045.387-.15.531-.299l2.798-2.806a1.88 1.88 0 0 0 .352-2.559 1.308 1.308 0 0 0-.947-.363zm-6.749-3.056a.843.843 0 1 1 0 1.686H7.876a.843.843 0 1 1 0-1.686h3.498zm1.124-3.035a.844.844 0 1 1 0 1.686H7.877a.843.843 0 1 1 0-1.686h4.622zm4.993-4.871a.5.5 0 0 1 .244.063c.088.049.185.142.218.289.056.254.142.57.262.87.123.306.27.565.435.73.164.162.423.307.727.428.3.118.614.202.867.258.145.032.239.127.289.215a.496.496 0 0 1 0 .488.443.443 0 0 1-.288.216c-.253.056-.569.14-.868.26-.304.12-.562.266-.726.43-.166.164-.314.423-.437.73-.12.3-.205.618-.262.872a.443.443 0 0 1-.216.288.499.499 0 0 1-.49-.001.443.443 0 0 1-.215-.29 5.793 5.793 0 0 0-.259-.87c-.121-.306-.267-.565-.432-.73-.163-.163-.42-.308-.723-.429a5.768 5.768 0 0 0-.867-.258.444.444 0 0 1-.29-.218.5.5 0 0 1 0-.487.443.443 0 0 1 .291-.218c.255-.056.569-.14.867-.257.303-.12.56-.264.722-.427.165-.164.31-.422.432-.727.119-.3.203-.617.259-.871a.442.442 0 0 1 .216-.29.5.5 0 0 1 .244-.064z",fill:"#fff",fillOpacity:".5"})})));var y=l("198502"),x=l("473677"),w=l("205457"),S=l("679126"),C=l("860684"),N=l("894416");let b=()=>(0,o.jsx)("div",{className:y.default.xgTips,children:"AI 笔记"}),E=e=>{let{isAiNoteIcon:t,aiNoteProps:l,awemeInfo:i}=e,n=(0,a.useCallback)(()=>{if(m.emit(m.EVENT.toggleAiCard,{tab:c.X.Note,awemeId:i.awemeId,aiNoteEnterMethod:"bottom_bar"}),!l.isShow){var e;v.K.sendLog("aiNoteButtonEnter",{enter_method:"bottom_bar",enter_from:(0,f.mo)(),group_id:i.awemeId,author_id:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,player_display_mode:(0,f.Ok)()})}},[l,i]);return(0,a.useEffect)(()=>{var e;v.K.sendLog("aiNoteButtonShow",{enter_method:"bottom_bar",enter_from:(0,f.mo)(),group_id:i.awemeId,author_id:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,player_display_mode:(0,f.Ok)()})},[]),(0,o.jsx)("div",{children:t?(0,o.jsxs)("div",{className:y.default.icon,children:[(0,o.jsx)(x.Z,{src:_,width:24,height:24,viewBox:"0 0 24 24",onClick:n}),(0,o.jsx)(b,{})]}):(0,o.jsxs)("div",{className:y.default.bar,onClick:n,children:[(0,o.jsx)(x.Z,{src:_,width:24,height:24,viewBox:"0 0 24 24"}),(0,o.jsx)("span",{className:y.default.text,children:"AI 笔记"})]})})},I=e=>{let{isActive:t,awemeInfo:l,isAiNoteIcon:c,aiNoteProps:v}=e,f=(0,C.g)(),m=(0,C.n)(),p=(0,a.useMemo)(()=>{let e=f?s.di:r.Plugin;return class extends e{static get pluginName(){return"AiNotePlugin"}static get defaultConfig(){return{position:d.POSITIONS.CONTROLS_LEFT,index:10}}destroy(){(0,S.v)(this)}renderRoot(){(0,S.s)(this,(0,o.jsx)(E,(0,n._)({},this.config)))}updateConfig(e){this.config=e,this.renderRoot()}render(){return`<div data-state="normal" class="${y.default["ai-note-container"]} ai-note-container" data-e2e='ai-note-container' style=""></div>`}constructor(...e){super(...e),(0,i._)(this,"config",void 0)}}},[f]);return(0,u.o)(()=>{if(m&&t){var l;let t=(0,n._)({},e);return f&&Object.assign(t,{position:s.PZ.CONTROL_LEFT,index:2.95}),null===(l=m.registerPlugin)||void 0===l||l.call(m,p,t),()=>{if(m.getPlugin("AiNotePlugin")){var e;null==m||null===(e=m.unRegisterPlugin)||void 0===e||e.call(m,"AiNotePlugin",!0)}}}},[m,t,l,p]),(0,a.useEffect)(()=>{if(m&&t){let t=m.getPlugin("AiNotePlugin");if(t){let l=(0,n._)({},e);f&&Object.assign(l,{position:s.PZ.CONTROL_LEFT,index:2.95}),t.updateConfig(l)}}},[c,v]),null},T=e=>{var t,l,i,a,r;let s=(0,N.N)();return!(((null==e?void 0:null===(t=e.abtestData)||void 0===t?void 0:t.aiNoteV2)===1||(null==e?void 0:null===(l=e.abtestData)||void 0===l?void 0:l.aiNoteV2)===2)&&(null==e?void 0:null===(a=e.awemeInfo)||void 0===a?void 0:null===(i=a.douyinPcVideoExtra)||void 0===i?void 0:i.aiNoteV2)!==1&&!(0,p.R)()||!(null==e?void 0:null===(r=e.aiNoteProps)||void 0===r?void 0:r.useable)||(0,g.km)(78))?(0,o.jsx)(w.k,{componentName:"AiNote",Slardar:s,children:(0,o.jsx)(I,(0,n._)({},e))}):null}},955462:function(e,t,l){l.d(t,{WC:function(){return M}});var i=l("134761"),n=l("520739"),o=l("878389");l("874386");var a=l("563097"),r=l("88648"),s=l("713097"),d=l.n(s),u=l("734123"),c=l("489478"),v=l("784492"),f=l("823685"),m=l("702726"),p=l("410665"),g=l("147613"),h=l("602394"),_=l("32167");let y=e=>{let t=Math.floor(Number(e));if(isNaN(t)||t<0)return"";let l=Math.floor(t/60);return[String(l).padStart(2,"0"),String(t%60).padStart(2,"0")].join(":")};var x=l("209651");let w=(0,r.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M4 1l5 5-5 5",stroke:"#fff",strokeOpacity:".9",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),S=(0,r.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:31,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.54 8a1.04 1.04 0 1 0 0 2.08h13.92a1.04 1.04 0 1 0 0-2.08H8.54zm3.425 13.89a.448.448 0 0 0 0-.772l-3.47-2.043a.448.448 0 0 0-.675.386v4.086c0 .346.377.561.676.386l3.468-2.043zM7.5 15.242c0-.575.466-1.04 1.04-1.04h13.92a1.04 1.04 0 1 1 0 2.08H8.54a1.04 1.04 0 0 1-1.04-1.04zm7.44 5.16a1.04 1.04 0 0 0 0 2.08h7.52a1.04 1.04 0 1 0 0-2.08h-7.52z",fill:"#fff"})}))),C=(0,r.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.113 1.279c-.31.016-.598.167-.786.414-.216.284-.216.803-.216 1.842v8.296c0 1.063 0 1.594.22 1.88.192.248.485.398.798.41.36.012.793-.297 1.656-.916l5.926-4.245c.66-.473.991-.71 1.105-1 .1-.256.097-.54-.009-.792-.12-.289-.455-.518-1.126-.977L6.755 2.14c-.857-.587-1.286-.88-1.642-.861zm.831 2.527v7.746l5.533-3.963-5.533-3.783z",fill:"#fff",fillOpacity:".5"})}))),N=(0,r.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,o._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M3.944 1.198a.5.5 0 0 1 .5.5v12.604a.5.5 0 0 1-.5.5h-.777a.5.5 0 0 1-.5-.5V1.698a.5.5 0 0 1 .5-.5h.777zM8.39 3.466a.5.5 0 0 1 .5.5v8.07a.5.5 0 0 1-.5.5H7.61a.5.5 0 0 1-.5-.5v-8.07a.5.5 0 0 1 .5-.5h.779zm4.443 2.266a.5.5 0 0 1 .5.5v3.535a.5.5 0 0 1-.5.5h-.777a.5.5 0 0 1-.5-.5V6.232a.5.5 0 0 1 .5-.5h.777z",fill:"#fff",fillOpacity:".5"})})));var b=l("860684"),E=l("894416"),I=l("679126"),T=l("473677"),k=l("205457");function j(){return(0,a.jsx)("div",{className:d()(x.default.xgTips,"xgTips"),children:(0,a.jsx)("span",{children:"章节要点"})})}function P(e){let{visible:t,chapterList:l,chapterProgress:i,handleChapterPopoverItemClick:n}=e;return(0,a.jsx)("div",{className:x.default.chapterListPopover,style:{visibility:t?"visible":"hidden"},onWheel:e=>e.stopPropagation(),children:(0,a.jsx)("div",{className:x.default.chapterListContent,children:l.map((e,t)=>{let l=t===i;return(0,a.jsxs)("div",{className:d()(x.default.simpleChapterItem,{[x.default.active]:l}),onClick:()=>n(e,t),children:[l?(0,a.jsx)(N,{className:x.default.playStatusIcon}):(0,a.jsx)(C,{className:x.default.playStatusIcon}),(0,a.jsx)("span",{className:x.default.simpleChapterTitle,children:e.desc})]},e.timestamp)})})})}l("788210");let L=e=>{var t,l,i,s,u;let{awemeInfo:c,isChapterIcon:v,chapterProps:g,chapterMaxWidth:C,player:N,userInfo:b,abtestData:E}=e,I=null!==(s=null==c?void 0:null===(t=c.chapterInfo)||void 0===t?void 0:t.list)&&void 0!==s?s:[],{chapterProgress:k,triggerChapterSliderShow:L}=g,R=(null==c?void 0:null===(l=c.chapterInfo)||void 0===l?void 0:l.isPoint)?1:0,A=c.authorInfo.uid===(null==b?void 0:null===(i=b.info)||void 0===i?void 0:i.uid),[M,O]=(0,r.useState)(!1),F=(0,r.useRef)(null),B=null!==(u=null==E?void 0:E.chapterToggleType)&&void 0!==u?u:f.ChapterToggleType.V0,W=B===f.ChapterToggleType.V1,U=B===f.ChapterToggleType.V2,z=e=>{h.F.info(e,N.innerContainer)},D=e=>{if(e&&(null==N?void 0:N.seek)){let t=e.timestamp/1e3;N.seek(t);let l=y(t);z(`已定位至 ${l}`)}else!e&&z("已定位至最后章节")},H=()=>"number"==typeof k&&-1!==k?k+1:null,V=(e,t)=>{D(e),O(!1),m.logInstance.sendLog("chapterTagHoverClick",(0,o._)((0,n._)({},Y()),{chapter_index_click:t+1}))},Z=()=>{U&&(F.current&&clearTimeout(F.current),O(!0),m.logInstance.sendLog("chapterTagHoverShow",Y()))},G=()=>{U&&(F.current=setTimeout(()=>{O(!1)},200))};(0,r.useEffect)(()=>()=>{F.current&&clearTimeout(F.current)},[]);let Y=()=>{var e;return{enter_from:(0,_.mo)(),enter_from_merge:(0,_.vM)(),group_id:null==c?void 0:c.awemeId,author_id:null==c?void 0:null===(e=c.authorInfo)||void 0===e?void 0:e.uid,chapter_sequence_num_impr:H(),is_knowledge_point:R,is_author:A?1:0,chapter_num:I.length,player_display_mode:(0,_.Ok)()}},Q=(0,p.Y)(()=>{m.logInstance.sendLog("chapterTagShow",(0,o._)((0,n._)({},Y()),{is_chapter_next:W?1:0}))}),K=e=>{m.logInstance.sendLog("chapterTagClick",(0,o._)((0,n._)({},Y()),{click_area:e,chapter_index_click:H()})),L()};if((0,r.useEffect)(()=>{var e,t;v?null===(e=N.root.querySelector(".chapterContainer"))||void 0===e||e.classList.add(x.default.displayIcon):null===(t=N.root.querySelector(".chapterContainer"))||void 0===t||t.classList.remove(x.default.displayIcon)},[v,N]),0===I.length)return null;let X=I[k],q=k+1,J=W?`第${q}章`:`章节要点${q}`;return(0,a.jsx)("div",{ref:Q,children:v?(0,a.jsxs)("div",{className:x.default.chapterIcon,onMouseEnter:Z,onMouseLeave:G,children:[(0,a.jsx)(T.Z,{src:S,width:31,height:32,viewBox:"0 0 31 32",onClick:()=>K("chapter_icon")}),U?(0,a.jsx)(P,{visible:M,chapterList:I,chapterProgress:k,handleChapterPopoverItemClick:V}):(0,a.jsx)(j,{})]}):(0,a.jsxs)("div",{className:x.default.chapterBar,style:C?{maxWidth:`${C}px`}:void 0,children:[(0,a.jsxs)("div",{className:x.default.chapterTitleContainer,onMouseEnter:Z,onMouseLeave:G,children:[(0,a.jsx)("div",{className:x.default.chapterTitle,onClick:()=>K("chapter_title"),children:-1===k?`章节要点：共${I.length}个`:`${J}：${null==X?void 0:X.desc}`}),U&&(0,a.jsx)(P,{visible:M,chapterList:I,chapterProgress:k,handleChapterPopoverItemClick:V})]}),W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:d()(x.default.nextChapterDivider)}),(0,a.jsxs)("div",{className:x.default.chapterNext,onClick:()=>{let e=k+1;D(e<I.length?I[e]:void 0),m.logInstance.sendLog("chapterTagClick",(0,o._)((0,n._)({},Y()),{click_area:"chapter_next",chapter_index_click:H()}))},children:[(0,a.jsx)("span",{className:x.default.chapterNextText,children:"下一章"}),(0,a.jsx)(T.Z,{className:x.default.arrowIcon,src:w,width:12,height:12,viewBox:"0 0 12 12"})]})]}):(0,a.jsx)(T.Z,{className:x.default.arrowIcon,src:w,width:12,height:12,viewBox:"0 0 12 12"})]})})};class R extends u.Plugin{static get pluginName(){return"ChapterPlugin"}static get defaultConfig(){return{position:c.POSITIONS.CONTROLS_LEFT,index:8,className:"xgplayer-chapter"}}afterCreate(){}destroy(){(0,I.v)(this)}renderRoot(){(0,I.s)(this,(0,a.jsx)(L,(0,n._)({},this.config)))}updateConfig(e){this.config=e,this.renderRoot()}render(){return`<div data-state="normal" class="${x.default.chapterContainer} chapterContainer" data-e2e='chapter-container' style=""></div>`}constructor(...e){super(...e),(0,i._)(this,"config",void 0)}}let A=e=>{let{isActive:t,awemeInfo:l,chapterProps:i,isChapterIcon:n,chapterMaxWidth:o,userInfo:a,abtestData:r}=e,s=(0,b.n)();return(0,g.o)(()=>{var e;if(s&&t&&(null==l?void 0:null===(e=l.chapterInfo)||void 0===e?void 0:e.status)){s.registerPlugin(R);let e=s.getPlugin("ChapterPlugin");return e&&e.updateConfig({player:s,awemeInfo:l,chapterProps:i,isChapterIcon:n,chapterMaxWidth:o,userInfo:a,abtestData:r}),()=>{var e,t;(null==s?void 0:null===(e=s.getPlugin)||void 0===e?void 0:e.call(s,"ChapterPlugin"))&&(null==s||null===(t=s.unRegisterPlugin)||void 0===t||t.call(s,"ChapterPlugin",!0))}}},[s,t,l,a]),(0,v.Z)(()=>{var e;if(s&&(null==l?void 0:null===(e=l.chapterInfo)||void 0===e?void 0:e.status)){let e=s.getPlugin("ChapterPlugin");e&&e.updateConfig({player:s,awemeInfo:l,chapterProps:i,isChapterIcon:n,chapterMaxWidth:o,abtestData:r})}},[n,o,i]),null},M=e=>{let t=(0,E.N)();return(0,a.jsx)(k.k,{componentName:"Chapter",Slardar:t,children:(0,a.jsx)(A,(0,n._)({},e))})}},294031:function(e,t,l){l.d(t,{b:function(){return k}}),l(874386);var i=l(563097),n=l(88648),o=l(713097),a=l.n(o),r=l(734123),s=l(747909),d=l(782563),u=l(782442),c=l(375944),v=l(687297),f=l(387787),m=l(572076),p=l(32167),g=l(637005),h=l(761539),_=l(733608),y=l(42264),x=l(384765),w=l(162358),S=l(68137),C=l(731442),N=l(17750),b=l(104514),E=l(575462),I=l(860684),T=l(254897);let k=n.memo(e=>{let{awemeInfo:t,className:l,isActive:o,abtestData:k,mouseHandler:j,electronWarpRef:P}=e,L=(0,d.FJ)().awemePcClient,[R,A]=(0,n.useState)(u.Le.getConfig(u.gI.IsClientTopMode)),[M,O]=(0,n.useState)(u.Le.getConfig(u.gI.IsMiniWinHideMode)),F=(0,n.useRef)(null),B=(0,n.useRef)(null),W=(0,n.useRef)(null),U=(0,d.DT)(),z=!(0,c.dz)()&&(0,v.y)(L,">=","3.7.1"),D=(0,c.dz)()&&(0,v.y)(L,">=","3.7.1"),H=!(0,c.O)()&&(z||D)&&(0,v.y)(L,">=","3.7.0"),V=(0,f.x)(),Z=(0,I.n)(),G=(0,n.useCallback)(()=>{m.invoke("changeMiniWindowHideMode",{data:!1}),O(!1),u.Le.setConfig(u.gI.IsMiniWinHideMode,!1)},[]),Y=n.useCallback(e=>{G(),m.invoke("WINDOW_MIN"),e.stopPropagation(),b.Z.sendLog("smallWindowOps",{action:"minimize",enter_from:(0,p.mo)(),group_id:null==t?void 0:t.awemeId,player_display_mode:(0,p.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:"click_window_minimize"})},[Z,null==t?void 0:t.awemeId]),Q=n.useCallback(e=>{g.emit(g.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"click_bar"}),e.stopPropagation()},[]),K=n.useCallback(e=>{m.invoke("SET_ALWAYS_ON_TOP",{data:!R}),A(e=>(u.Le.setConfig(u.gI.IsClientTopMode,!e),!e)),e.stopPropagation(),null==j||j(),b.Z.sendLog("smallWindowOps",{action:R?"cancel_pin":"pin",enter_from:(0,p.mo)(),group_id:null==t?void 0:t.awemeId,player_display_mode:(0,p.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:R?"click_window_cancel_pin":"click_window_pin"})},[R,Z,null==t?void 0:t.awemeId]),X=(0,n.useCallback)(e=>{m.invoke("changeMiniWindowHideMode",{data:!M}),O(!M),u.Le.setConfig(u.gI.IsMiniWinHideMode,!M),e.stopPropagation(),b.Z.sendLog("smallWindowOps",{action:M?"cancel_invisible":"invisible",enter_from:(0,p.mo)(),group_id:null==t?void 0:t.awemeId,player_display_mode:(0,p.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:M?"click_window_cancel_invisible":"click_window_invisible"})},[M,null==t?void 0:t.awemeId]);return(0,n.useEffect)(()=>{setTimeout(()=>{m.invoke("IS_ALWAYS_ON_TOP").then(e=>{let{data:t}=e;A(t)}),m.invoke("isMiniWindowHideMode").then(e=>{O(null==e?void 0:e.data)})},100)},[o]),(0,i.jsxs)("div",{className:a()(E.default.windowBar,"miniWinToolBar",l),children:[(0,i.jsx)("div",{ref:P,className:a()(E.default.electronWarp)}),(0,i.jsxs)("div",{className:E.default.miniWindowBtn,children:[H?(0,i.jsx)(s.Tooltip,{content:M?"已开启「隐身」，点击关闭":"已关闭「隐身」，点击开启",position:"bottom",getPopupContainer:()=>W.current||document.body,children:(0,i.jsx)("div",{className:E.default.toolItem,onClick:X,ref:W,children:M?(0,i.jsx)(T.z,{className:E.default.icon,svg:(0,i.jsx)(h.Z,{})}):(0,i.jsx)(T.z,{className:E.default.icon,svg:(0,i.jsx)(_.Z,{})})})}):null,(0,i.jsx)(s.Tooltip,{content:(0,i.jsxs)("div",{className:a()(E.default.tipContent),children:["返回大窗播放",!!(U&&N.SHORTCUT_KEY.pip.badgeText)&&(0,i.jsx)("span",{className:E.default.tag,children:N.SHORTCUT_KEY.pip.badgeText})]}),getPopupContainer:()=>B.current||document.body,position:"bottom",children:(0,i.jsx)("div",{ref:B,className:a()(E.default.toolItem,E.default.autoMargin),onClick:e=>{b.Z.sendLog("smallWindowOps",{action:"zoom",enter_from:(0,p.mo)(),group_id:null==t?void 0:t.awemeId,player_display_mode:(0,p.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:"click_window_zoom"}),Q(e)},children:(0,i.jsx)(T.z,{className:a()(E.default.icon,E.default.dropShadow),svg:(0,i.jsx)(y.Z,{})})})}),(0,i.jsx)(s.Tooltip,{content:R?"取消置顶":"窗口置顶",position:"bottom",getPopupContainer:()=>F.current||document.body,children:(0,i.jsx)("div",{ref:F,className:E.default.toolItem,onClick:K,children:R?(0,i.jsx)(T.z,{className:E.default.icon,svg:(0,i.jsx)(x.Z,{})}):(0,i.jsx)(T.z,{className:E.default.icon,svg:(0,i.jsx)(w.Z,{})})})}),(0,i.jsx)("div",{className:E.default.toolItem,onClick:Y,children:(0,i.jsx)(T.z,{className:E.default.icon,svg:(0,i.jsx)(S.Z,{})})}),(0,i.jsx)("div",{className:E.default.toolItem,onClick:e=>{b.Z.sendLog("smallWindowOps",{action:"close",enter_from:(0,p.mo)(),group_id:null==t?void 0:t.awemeId,player_display_mode:(0,p.Ok)()}),null==Z||Z.emit(r.Events.USER_ACTION,{action:"click_window_close"}),V?(G(),m.invoke("WINDOW_CLOSE")):Q(e)},children:(0,i.jsx)(T.z,{className:a()(E.default.icon,E.default.dropShadow),svg:(0,i.jsx)(C.Z,{})})})]})]})})},104514:function(e,t,l){var i=l(544933);t.Z=new i.h({smallWindowOps:{eventName:"small_window_ops",params:{action:"",enter_from:"",group_id:"",player_display_mode:""}}})},644860:function(e,t,l){l.r(t),l.d(t,{MiniWinMask:function(){return P},MiniWinMaskInner:function(){return j}});var i=l("520739"),n=l("878389"),o=l("368200");l("874386"),l("250440");var a=l("563097"),r=l("88648"),s=l("713097"),d=l.n(s),u=l("734123"),c=l("782563"),v=l("387787"),f=l("375944"),m=l("32167"),p=l("782442"),g=l("79307"),h=l("799241"),_=l("226264"),y=l("272442"),x=l("544933"),w=new x.h({pauseVideo:{eventName:"pause_video",params:{enter_from:"",mute_remind:"none",click_method:"click",is_small_window:"0",player_display_mode:"",group_id:""}},smallWindowLoginNotify:{eventName:"small_window_login_notify",params:{enter_from:"",enter_method:""}}}),S=l("294031"),C=l("205457"),N=l("592162"),b=l("765027"),E=l("860684"),I=l("894416"),T=l("631493"),k=l("254897");let j=e=>{var{abtestData:t,enablePlaySwitch:l=!0}=e,s=(0,o._)(e,["abtestData","enablePlaySwitch"]);let x=(0,E.n)(),[C,I]=(0,r.useState)(!1),[j,P]=(0,r.useState)(!1),[L,R]=(0,r.useState)(!1),A=(0,r.useRef)(null),M=(0,r.useRef)(null),O=(0,r.useRef)(null),F=(0,c.DT)(),B=(0,v.x)();(0,r.useEffect)(()=>{let e=()=>{Array.from(document.getElementsByClassName("isMiniWindow")).forEach(e=>{var t,l;null===(t=e.classList)||void 0===t||t.add("isMiniWindowHover"),(null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.includes("slideMode"))&&e.setAttribute("data-mini","isMiniWindowHover")})},t=()=>{document.getElementsByClassName("isMiniWindowHover").length<=0&&e()},l=()=>{let e=document.getElementsByClassName("isMiniWindowHover");e.length>0&&Array.from(e).forEach(e=>{var t,l;null===(t=e.classList)||void 0===t||t.remove("isMiniWindowHover"),(null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.includes("slideMode"))&&e.removeAttribute("data-mini")})},i=t=>{(!(0,f.Q5)()||document.hasFocus())&&e()},n=e=>{let t=document.getElementsByClassName("isMiniWindow"),l={minXY:(0,f.Q5)()?0:5,maxX:(0,f.Q5)()?window.innerWidth:window.innerWidth-5,maxY:(0,f.Q5)()?window.innerHeight:window.innerHeight-5};((null==e?void 0:e.clientY)<l.minXY||(null==e?void 0:e.clientY)>=(null==l?void 0:l.maxY)||(null==e?void 0:e.clientX)<l.minXY||(null==e?void 0:e.clientX)>=l.maxX)&&Array.from(t).forEach(e=>{var t,l;null===(t=e.classList)||void 0===t||t.remove("isMiniWindowHover"),(null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.includes("slideMode"))&&e.removeAttribute("data-mini")})};return document.addEventListener("mouseover",i),document.addEventListener("mouseleave",n),window.addEventListener("blur",l),window.addEventListener("focus",t),()=>{document.removeEventListener("mouseover",i),document.removeEventListener("mouseleave",n),window.removeEventListener("blur",l),window.removeEventListener("focus",t)}},[]);let W=(0,r.useCallback)(()=>{w.sendLog("pauseVideo",{mute_remind:"none",enter_from:(0,m.mo)(),is_small_window:"1",click_method:"click",player_display_mode:(0,m.Ok)(),group_id:(null==s?void 0:s.awemeInfo.awemeId)||""})},[]),U=(0,r.useCallback)(()=>{T.s.getPlayerScene(null==x?void 0:x.playerId)===g.lT.Search&&(null==x||x.emitUserAction(u.Events.USER_ACTION,"switch_play_pause",{action:"switch_play_pause",paused:null==x?void 0:x.paused,pluginName:"click"}))},[null==x?void 0:x.playerId]),z=(0,r.useCallback)(()=>{var e,t;U(),(null==x?void 0:x.paused)?null==x||null===(e=x.play)||void 0===e||e.call(x):(null==x||null===(t=x.pause)||void 0===t||t.call(x),W())},[x,W]);return(0,r.useEffect)(()=>{let e=()=>{I(!(null==x?void 0:x.paused))};return x&&(x.on("play",e),x.on("pause",e)),()=>{x&&(x.off("play",e),x.off("pause",e))}},[x,W]),(0,r.useEffect)(()=>{x&&I(!(null==x?void 0:x.paused))},[x]),(0,r.useEffect)(()=>(p.Le.getConfig(p.gI.PlaySwitchMethods),p.Le.setConfig(p.gI.PlaySwitchMethods,""),()=>{M.current&&(clearTimeout(M.current),M.current=null)}),[]),(0,a.jsxs)("div",{ref:O,className:d()(y.default.wrap,{[y.default.newWrap]:B}),onMouseLeave:e=>{(null==e?void 0:e.target)!==A.current&&P(!1)},children:[(0,a.jsxs)("div",{className:d()(y.default.fullbox),onMouseOver:e=>{(null==e?void 0:e.target)!==A.current&&P(!0)},onMouseLeave:e=>{!F&&(null==e?void 0:e.target)!==A.current&&P(!1)},onClick:z,children:[C?(0,a.jsx)(k.z,{svg:(0,a.jsx)(h.Z,{}),className:d()(y.default.svg,{[y.default.hide]:B||L||!j})}):(0,a.jsx)(k.z,{svg:(0,a.jsx)(_.Z,{}),className:d()(y.default.svg,{[y.default.hide]:!B&&(L||!j)})}),(0,a.jsx)(S.b,{awemeInfo:null==s?void 0:s.awemeInfo,className:d()({[y.default.hide]:!B&&(L||!j),[y.default.miniWindowOptimize]:B}),abtestData:t,electronWarpRef:A}),B&&(0,a.jsx)(N.N,{awemeInfo:null==s?void 0:s.awemeInfo,hitMiniWindowOptimize:B})]}),(0,a.jsx)(b.I,(0,n._)((0,i._)({},s),{playSwitchCb:()=>p.Le.setConfig(p.gI.PlaySwitchMethods,"click_button"),className:d()(y.default.playSwitchContainer,{[y.default.hide]:!l||!B&&(L||!j),[y.default.miniWindowOptimize]:B})}))]})},P=e=>{let t=(0,I.N)();return(0,a.jsx)(C.k,{componentName:"MiniWinMask",Slardar:t,children:(0,a.jsx)(j,(0,i._)({},e))})}},488799:function(e,t,l){l.d(t,{U:function(){return m}});var i=l(520739),n=l(563097);l(88648);var o=l(713097),a=l.n(o),r=l(256277),s=l(422959),d=l(411362),u=l(205457),c=l(894416),v=l(501305);let f=e=>{var t;let{awemeInfo:l}=e,i=null==l?void 0:l.desc,o=null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.nickname,u=null==l?void 0:l.mixInfo,c=(0,r.Jt)(l),f=(0,r.Kf)(l);return(0,n.jsxs)("div",{className:a()("miniInfo",v.default.wrap),children:[(0,n.jsx)("div",{className:v.default.nickname,children:(0,n.jsx)(s.Z,{className:v.default.userText,text:`@${o}`})}),(0,n.jsxs)("div",{className:a()(v.default.title,{[v.default.isAd]:c||f}),children:[(0,n.jsx)(s.Z,{className:v.default.text,text:i,isRemoveRowspan:!0,children:(null==u?void 0:u.currentEpisode)&&(0,n.jsxs)("span",{children:["第",null==u?void 0:u.currentEpisode,"集："]})}),(c||f)&&(0,n.jsx)(d.Vp,{className:a()(v.default.adTag),presetType:"ad",children:"广告"})]})]})},m=e=>{let t=(0,c.N)();return(0,n.jsx)(u.k,{componentName:"MiniWinInfoWeb",Slardar:t,children:(0,n.jsx)(f,(0,i._)({},e))})}},554281:function(e,t,l){l.d(t,{q:function(){return E}});var i=l("520739");l("250440");var n=l("563097"),o=l("88648"),a=l("734123"),r=l("23902"),s=l.n(r),d=l("746864"),u=l("669201"),c=l("782442"),v=l("637005"),f=l("879550"),m=l("616520"),p=l("468145"),g=l("544933"),h=new g.h({addPreloadTask:{eventName:"add_preolad_task",params:{}}}),_=l("40970"),y=l("156053"),x=l("399818"),w=l("860684"),S=l("894416"),C=l("205457");let N=[d.e.Normal],b=e=>{let{isActive:t,abtestData:l,awemeInfo:n,isInnerFeed:r,index:d}=e||{},g=(0,w.n)(),S=(0,o.useMemo)(()=>{if(!s()(l))return(0,_.hG)({abtestData:l})},[l]),C=(0,o.useCallback)(e=>{var t,o;let a=window.playerPreloader,s=e||c.Le.getConfig(c.gI.PreloadList)||[],d=null!==(t=null==S?void 0:S.preloadTime)&&void 0!==t?t:5;if((null==s?void 0:s.length)>0){let e=(0,y.YO)({abtestData:l,awemeInfo:n,isInnerFeed:r}),t=s.filter(e=>{var t;return t=e,N.includes(t.awemeType)}).map((t,n)=>{var o;let a=(0,x.QF)({awemeInfo:t,abtestData:l,filter264InMix:!0,enableSr:e}),r=null==a?void 0:null===(o=a.definition)||void 0===o?void 0:o.list,s=(null==r?void 0:r.find(e=>(null==e?void 0:e.vtype)==="DASH"))?null==l?void 0:l.stepPreloadDashConfig:null==l?void 0:l.stepPreloadConfig;return{order:n,data:(0,i._)({codecType:null==a?void 0:a.codecType,vid:null==t?void 0:t.awemeId,payload:r,preloadTime:d,vtype:null==a?void 0:a.vtype,bizType:(null==t?void 0:t.isAds)?u._6.Ad:u._6.Normal},s)}});(null==t?void 0:t.length)>0&&(null===(o=a.addPreloadList)||void 0===o||o.call(a,t),h.sendLog("addPreloadTask"))}},[n,l,S]);return(0,o.useEffect)(()=>{let e=v.listen(v.EVENT.prefetchLoadMoreFinish,e=>{let l=window.playerPreloader;0===d&&t&&l&&g&&(null==e?void 0:e.length)&&C(e)});return()=>{null==e||e()}},[t,d,g]),(0,o.useEffect)(()=>{let e=window.playerPreloader;g&&t&&e&&2!==l.longtask&&C()},[g,t,l]),(0,o.useEffect)(()=>{if(2===l.longtask){let e=window.playerPreloader;g&&t&&e&&f.p.postTask({task:()=>C()})}},[g,t,l]),(0,o.useEffect)(()=>{let e=window.playerPreloader;if(g&&t&&e){var i,n;let t;let o=()=>{var l,i,n,r;((null==g?void 0:null===(l=g.plugins)||void 0===l?void 0:l.mp4encryptplayer)||(null==g?void 0:null===(i=g.plugins)||void 0===i?void 0:i.dashplugin))&&(null==e||null===(n=e.attachPlayer)||void 0===n||n.call(e,g),null==g||null===(r=g.off)||void 0===r||r.call(g,a.Events.TIME_UPDATE,o),clearTimeout(t))},r=(0,m.En)()?null===(i=(0,p.P)(l))||void 0===i?void 0:i.preloadAttachDelay:null==l?void 0:l.preloadAttachDelay;return r?t=setTimeout(o,r||3e3):null==g||null===(n=g.on)||void 0===n||n.call(g,a.Events.TIME_UPDATE,o),()=>{var i;((null==l?void 0:l.useCache)!==1||t)&&clearTimeout(t),null==g||null===(i=g.off)||void 0===i||i.call(g,a.Events.TIME_UPDATE,o),null==e||e.detachPlayer(g)}}},[t,g,n]),null},E=e=>{let t=(0,S.N)();return(0,n.jsx)(C.k,{componentName:"Preload",Slardar:t,children:(0,n.jsx)(b,(0,i._)({},e))})}},248333:function(e,t,l){l.d(t,{B:function(){return N}});var i=l("520739"),n=l("878389");l("602157"),l("874386");var o=l("563097"),a=l("88648"),r=l("713097"),s=l.n(r),d=l("410665"),u=l("658065"),c=l("122391"),v=l("182424"),f=l("381927"),m=l("544933"),p=new m.h({videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}}}),g=l("906499"),h=l("456128"),_=l("473677"),y=l("205457"),x=l("860684"),w=l("894416");function S(e){let{onClick:t,targetHref:l,className:a,cardHidden:r,style:u,alinkProps:c={},imgSrc:m,description:p,title:y,onShow:x,type:w="",player:S,target:C}=e,N=(0,d.x)(()=>x());return(0,o.jsxs)(g.a,(0,n._)((0,i._)({onClick:e=>{null==t||t(e),null==S||S.pause()},href:l,className:s()(f.default.outerContainer,a,{[f.default.hidden]:r}),style:u,refEl:N},c),{target:C,children:[(0,o.jsxs)("div",{className:f.default.image,children:[(0,o.jsx)(h.Q,{src:m,iconStyle:{width:"100%",height:"100%"}}),"variety"===w&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:f.default.miniTitle,children:"正片"}),(0,o.jsx)(_.Z,{className:f.default.playIcon,src:v.Z,width:32,height:32,viewBox:"0 0 39 39"})]})]}),(0,o.jsxs)("div",{className:f.default.information,children:[(0,o.jsx)("div",{className:f.default.description,children:p}),(0,o.jsx)("div",{className:f.default.title,children:y})]})]}))}function C(e){var t,l,r,s,d,v,f,m,g;let{awemeInfo:h,abtestData:_,isActive:y}=e,w=(0,x.n)(),C=(0,a.useRef)(""),[N,b]=(0,a.useState)(!1),E=(0,a.useCallback)(e=>{b(!e)},[]),{title:I,subtitle:T,roomLink:k,link:j,liveSource:P,type:L,vsContent:R}=(null==h?void 0:null===(t=h.webRawData)||void 0===t?void 0:t.anchorCardInfo)||{},A={dependOnPlayer:!0,title:T,description:I,targetHref:k,imgSrc:j,onShow:()=>null,onClick:()=>null,target:"_self"},M={group_id:null==h?void 0:h.awemeId,enter_from:(0,u.yW)(),type:""};switch(null==h?void 0:null===(r=h.webRawData)||void 0===r?void 0:null===(l=r.anchorCardInfo)||void 0===l?void 0:l.source){case"pc_movie_father":A.hidden=(null==_?void 0:_.showMovie)!==1,A.className="",A.target="_blank",A.targetHref+=`?previous_page=${(0,u.yW)()}`,M.type="movie",A.onShow=()=>{p.sendLog("videoAnchorShow",M)};break;case"variety":A.hidden=!k||(null==R?void 0:null===(s=R.user_statistics)||void 0===s?void 0:s.watch_ratio)>.9,M=(0,n._)((0,i._)({},M),{type:"vs",is_vs:1,author_id:null==R?void 0:null===(v=R.owner_user_id)||void 0===v?void 0:null===(d=v.c)||void 0===d?void 0:d.map(e=>`${e}`).join(""),vs_season_id:null==R?void 0:R.season_id_str,vs_episode_id:null==R?void 0:R.episode_id_str,room_id:"",vs_ep_group_id:null==R?void 0:R.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==R?void 0:null===(f=R.episode_type)||void 0===f?void 0:f.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==R?void 0:null===(m=R.episode_type)||void 0===m?void 0:m.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==R?void 0:null===(g=R.episode_type)||void 0===g?void 0:g.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""}),A.alinkProps={target:"_blank"},A.target="_blank",A.type="variety",A.onShow=()=>{var e,t,l;p.sendLog("videoAnchorShow",M),p.sendLog("vsVideoShow",{enter_from_merge:(0,u.yW)(),enter_method:"video_anchor_module",previous_page:(0,c.z)("web_link"),action_type:"click",is_vs:1,vs_season_id:null==R?void 0:R.season_id_str,vs_episode_id:null==R?void 0:R.episode_id_str,room_id:"",vs_ep_group_id:null==R?void 0:R.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==R?void 0:null===(e=R.episode_type)||void 0===e?void 0:e.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==R?void 0:null===(t=R.episode_type)||void 0===t?void 0:t.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==R?void 0:null===(l=R.episode_type)||void 0===l?void 0:l.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""})}}A.onClick=()=>{p.sendLog("videoAnchorClick",M)};let{imgSrc:O,hidden:F=!0}=A;return(0,a.useEffect)(()=>{var e;return null==w||null===(e=w.on)||void 0===e||e.call(w,"titleIsFold",E),()=>{var e;null==w||null===(e=w.off)||void 0===e||e.call(w,"titleIsFold",E)}},[]),(0,a.useEffect)(()=>{C.current=O},[O]),(0,o.jsx)(o.Fragment,{children:F||C.current!==O||!y?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(S,(0,n._)((0,i._)({},A),{cardHidden:N,player:w}))})}let N=e=>{let t=(0,w.N)();return(0,o.jsx)(y.k,{componentName:"ProgramCard",Slardar:t,children:(0,o.jsx)(C,(0,i._)({},e))})}},527816:function(e,t,l){l.d(t,{S:function(){return p}});var i=l(520739),n=l(563097),o=l(88648),a=l(137425),r=l(555106),s=l(55426),d=l(35730),u=l(860684),c=l(894416),v=l(205457),f=l(597321);let m=e=>{let{isActive:t,startTime:l,awemeInfo:i,isLogin:n=!1,isMiniWin:c=!1}=e,v=(0,u.n)(),m=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(t&&v&&n)return()=>{if((null==v?void 0:v.currentTime)>0){var e,t;let l=1e3>=Math.abs((null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)-(null==v?void 0:v.currentTime)*1e3);(0,a.J$)({item_id:null==i?void 0:i.awemeId,item_duration:Number(null==i?void 0:null===(t=i.video)||void 0===t?void 0:t.duration),item_progress:l?0:Math.floor((null==v?void 0:v.currentTime)*1e3)})}}},[t,i,v,n]),(0,o.useEffect)(()=>{if(v&&n){let e=()=>{if(t&&(null==v?void 0:v.currentTime)>0){var e,l;let t=1e3>=Math.abs((null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)-(null==v?void 0:v.currentTime)*1e3);(0,a.J$)({item_id:null==i?void 0:i.awemeId,item_duration:Number(null==i?void 0:null===(l=i.video)||void 0===l?void 0:l.duration),item_progress:t?0:Math.floor((null==v?void 0:v.currentTime)*1e3)})}};return v.on(f.B.BeforeDestroy,e),()=>{v.off(f.B.BeforeDestroy,e)}}},[v,i,t,n]),(0,o.useEffect)(()=>{if(v&&n){let e=e=>{let{currentTime:t}=e,l=Math.floor(t);if(l>=10&&l%10==0){var n;(0,r.qQ)(d.LocalStorageKeys.CurrentVideoProgress,{awemeType:null==i?void 0:i.awemeType,itemId:null==i?void 0:i.awemeId,preItemDuration:Number(null==i?void 0:null===(n=i.video)||void 0===n?void 0:n.duration),preItemProgress:1e3*l})}};return v.on("timeupdate",e),()=>{v.off("timeupdate",e)}}},[v,i,n]),(0,o.useEffect)(()=>{if(v&&t&&l>=3&&n&&!c&&!m.current){let e=()=>{var e,t;null===(t=v.showPrompt)||void 0===t||t.call(v,{text:`上次播放至：${(0,s.$y)(1e3*l)}`},{mode:"arrow",autoHide:!0,interval:3e3,preventScreenOverflow:!0,style:{left:`${1e3*l/(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)*100}%`,bottom:"10px",padding:"8px 12px",borderRadius:"12px",backgroundColor:"#33343F",color:"#ffffff",fontSize:"12px",transition:"none",zIndex:"20"}}),m.current=!0};return v.once("play",e),()=>{v.off("play",e)}}if(v&&t&&l>=3&&n&&c){var e;null===(e=v.hidePrompt)||void 0===e||e.call(v)}},[v,t,l,i,n,c]),null},p=e=>{let t=(0,c.N)();return(0,n.jsx)(v.k,{componentName:"RecordContinuePlay",Slardar:t,children:(0,n.jsx)(m,(0,i._)({},e))})}},77821:function(e,t,l){l.d(t,{O:function(){return o}});var i=l(88648),n=l(77172);let o=e=>{let{player:t,showContextMenu:l,awemeInfo:o,hideContextMenu:a,containerStatus:r}=e;(0,i.useEffect)(()=>{if(t){var e;let i=(0,n.H)(t),o=e=>{var i,n;(null==t?void 0:null===(n=t.video)||void 0===n?void 0:null===(i=n.parentElement)||void 0===i?void 0:i.contains(null==e?void 0:e.target))&&l(e)};return null===(e=t.root)||void 0===e||e.addEventListener("contextmenu",o,!0),null==i||i.addEventListener("contextmenu",l),document.addEventListener("click",a,!0),()=>{var e;null===(e=t.root)||void 0===e||e.removeEventListener("contextmenu",o,!0),document.removeEventListener("click",a,!0),null==i||i.removeEventListener("contextmenu",l)}}},[t,o,l]),(0,i.useEffect)(()=>{if(r)return r.addEventListener("contextmenu",l),()=>{r.removeEventListener("contextmenu",l)}},[r,l])}},244773:function(e,t,l){l.r(t),l.d(t,{MenuList:function(){return U},MenuListInner:function(){return W}});var i=l(520739),n=l(878389);l(874386),l(338172),l(250440);var o=l(563097),a=l(88648),r=l(713097),s=l.n(r),d=l(734123),u=l(567754),c=l(17750),v=l(746864),f=l(788418),m=l(122691),p=l(102337),g=l(256277),h=l(325982),_=l(371260),y=l(696332),x=l(14108),w=l(367366),S=l(176638),C=l(637005),N=l(658065),b=l(32167),E=l(555106),I=l(945977),T=l(702726),k=l(35730),j=l(966648),P=l(489278),L=l(77821),R=l(774150),A=l(860684),M=l(894416),O=l(906499),F=l(205457),B=l(527965);d.I18N.extend([{LANG:"zh",TEXT:{FULLSCREEN_TIPS:`${y.a.t("full_screen",{},"进入全屏")}<span class="shortcutKey">H</span>`,EXITFULLSCREEN_TIPS:`${y.a.t("full_screen_exit",{},"退出全屏")}<span class="shortcutKey">H</span>`,PIP:`${y.a.t("pip",{},"小窗模式")}<span class="shortcutKey">U</span>`}}]);let W=e=>{let{isActive:t=!1,shortcutDisable:l,shortcutInclude:r,shortcutExclude:y,awemeInfo:M,shortCutFiltered:F=[],showEnterDetail:W=!1,showAdMenu:U=!1,modalEnterFrom:z,userInfo:D,abtestData:H,directJumpToUser:V,showRecommendToFriend:Z}=e,G=(0,A.n)(),{awemeId:Y}=M||{},[Q,K]=(0,a.useState)(!1),[X,q]=(0,a.useState)({x:0,y:0}),[J,$]=(0,a.useState)(null),ee=(0,a.useRef)(null),{isShortcutListShow:et}=(0,j.y)({isNoPlayer:!0,isLogin:null==D?void 0:D.isLogin}),el=(0,a.useMemo)(()=>c.getShortcut({disable:l,include:r,exclude:y}),[l,r,y,et]),ei=e=>{var t;if(!(e&&(null===(t=ee.current)||void 0===t?void 0:t.contains(e.target))))K(!1)},en=(0,a.useCallback)(()=>{var e,t;let l=(null==M?void 0:M.awemeType)===v.e.XgVideo?(0,x.GN)(null==M?void 0:null===(e=M.authorInfo)||void 0===e?void 0:e.uid):(0,x.HC)(null==M?void 0:null===(t=M.authorInfo)||void 0===t?void 0:t.secUid,(0,u.stringify)({is_full_screen:(0,w.r)()?"1":"0",enter_method:"video_title",from_gid:M.groupId,vid:null==M?void 0:M.awemeId}));window.open(l,(0,S.f)()?"_self":"_blank","noopener")},[M]),eo=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("feedback"===e&&C.emit(C.EVENT.showFeedback),"enterDetail"===e&&C.emit(C.EVENT.videoPause,"ShortCut_onEnterDetail"),"showComment"===e&&"video_detail"===(0,N.yW)()&&!(0,w.r)()&&C.emit(C.EVENT.commentFocus),"downloadVideo"===e&&(C.emit(C.EVENT.downloadVideo,M),T.logInstance.sendLog("download",{enter_from:(0,b.mo)(),enter_from_merge:(0,b.vM)(),group_id:null==M?void 0:M.awemeId,click_from:"right_click",boost_task_id:(null==M?void 0:M.boostTaskId)||""})),"createMultitaskingWindow"===e){let e=t;"string"==typeof e&&e.startsWith("//")?e=`https:${t}`:"string"==typeof e&&e.startsWith("/video")&&(e=`https://www.douyin.com${t}`),(0,E.qQ)(k.LocalStorageKeys.MultiWindowMenuListRedDot,1),(0,B.handleCreateMultitaskWindow)(H,e,"right_click_menu",!0)}V&&"onAvatar"===e?en():null==G||G.emit(e,t),K(!1)},[G,M,en,H,V]);(0,a.useEffect)(()=>{if(V&&G)return G.on("onAvatar",en),()=>{G.off("onAvatar",en)}},[en,G,V]);let{menuList:ea,adMenuList:er}=(0,R._)({shortcut:el,emitEvent:eo,position:X,showEnterDetail:W,setIsShow:K,awemeInfo:M,userInfo:D,modalEnterFrom:z,abtestData:H,showRecommendToFriend:Z}),es=(0,a.useMemo)(()=>(U?er:ea).filter(e=>!F.includes(e.key)),[U,er,ea,F]),ed=e=>{switch(!0){case!!e.link:return(0,a.createElement)(O.a,(0,n._)((0,i._)({},e.link),{className:P.default.itemText,key:e.text}),e.text);case!!e.component:return e.component;default:return(0,o.jsxs)("div",{className:P.default.contextMenuItem,onClick:e.handler,children:[(0,o.jsx)("div",{className:P.default.itemText,children:e.text}),e.key&&(0,o.jsxs)("div",{className:P.default.itemTip,children:["（",e.key,"）"]}),e.useRedDot&&(0,R.H)(e.redDotKey)&&(0,o.jsx)("div",{className:s()(P.default.itemRedDotBox,{[P.default.itemMarginLeft]:!e.key}),children:(0,o.jsx)("div",{className:P.default.itemRedDot})})]},e.text)}};(0,a.useEffect)(()=>{ei()},[Y,t]),(0,a.useEffect)(()=>{null==G||G.on(d.Events.FULLSCREEN_CHANGE,ei);let e=C.listen(C.EVENT.pageFullScreen,()=>{ei()});return()=>{null==G||G.off(d.Events.FULLSCREEN_CHANGE,ei),null==e||e()}},[G]);let eu=(0,a.useCallback)(e=>{e.preventDefault();let{width:t,height:l,left:i,right:n,top:o,bottom:a}=G.root.getBoundingClientRect();if(ee.current&&ee.current.contains(e.target))return;let r=ee.current?ee.current.clientWidth:224,s=ee.current?ee.current.clientHeight:26*es.length+32-6,d=(null==e?void 0:e.clientX)+r>n?(null==e?void 0:e.clientX)-r-i:(null==e?void 0:e.clientX)-i;if(q({x:d,y:(null==e?void 0:e.clientY)+s>a?(null==e?void 0:e.clientY)-s-o:(null==e?void 0:e.clientY)-o}),K(!0),(0,f.A)(M)||(0,m.L)(M)||(0,p.u)(M)){let e=(0,g.Rx)(M);(0,h.E)("othershow",{tag:(0,I.f)(),value:e.creative_id,log_extra:e.log_extra,refer:"feedback"})}},[G,M,ee,es]);return(0,L.O)({player:G,showContextMenu:eu,awemeInfo:M,hideContextMenu:ei,containerStatus:J}),Q?(0,o.jsx)("div",{className:P.default.container,ref:$,children:(0,o.jsx)("div",{className:s()(P.default.contextMenuContainer,{[P.default.isAd]:(0,f.A)(M)||(0,_.o4)(M)||(0,m.L)(M)||(0,p.u)(M)}),style:{top:X.y,left:X.x},ref:ee,children:es.map(e=>ed(e))})}):(0,o.jsx)("div",{})},U=e=>{let t=(0,M.N)();return(0,o.jsx)(F.k,{componentName:"MenuList",Slardar:t,children:(0,o.jsx)(W,(0,i._)({},e))})}},136880:function(e,t,l){l.d(t,{h:function(){return v}});var i=l(520739),n=l(563097),o=l(88648),a=l(860684),r=l(894416),s=l(205457),d=l(375944);l(954785);var u=l(597334);let c=e=>{var t,l,i;let{isActive:n}=e||{},{isMobile:r,isiPad:s}=(0,u.X)(),c=(0,a.n)(),v=(0,d.O)()||r||s?null==c?void 0:null===(t=c.getPlugin("progress"))||void 0===t?void 0:t.parent:null==c?void 0:null===(l=c.getPlugin("progress"))||void 0===l?void 0:l.outer,f=null==c?void 0:null===(i=c.getPlugin("volume"))||void 0===i?void 0:i.root;return(0,o.useEffect)(()=>{let e=e=>{null==e||e.stopPropagation()};return null==v||v.addEventListener("pointerdown",e),null==v||v.addEventListener("touchstart",e),null==f||f.addEventListener("pointerdown",e),null==f||f.addEventListener("touchstart",e),()=>{null==v||v.removeEventListener("pointerdown",e),null==v||v.removeEventListener("touchstart",e),null==f||f.removeEventListener("pointerdown",e),null==f||f.removeEventListener("touchstart",e)}},[v,f]),(0,o.useEffect)(()=>{if(c&&n){c.addClass("hide-loading");let e=setTimeout(()=>{c.removeClass("hide-loading")},2e3),t=()=>{c.removeClass("hide-loading"),clearTimeout(e)};return c.once("playing",t),()=>{clearTimeout(e),c.off("playing",t)}}},[n,c]),null},v=e=>{let t=(0,r.N)();return(0,n.jsx)(s.k,{componentName:"SwiperFitPlugin",Slardar:t,children:(0,n.jsx)(c,(0,i._)({},e))})}},874460:function(e,t,l){l.d(t,{k:function(){return f}}),l(874386);var i=l(563097),n=l(88648),o=l(713097),a=l.n(o),r=l(97199),s=l(366637),d=l(597321),u=l(943695),c=l(473677),v=l(254897);function f(e){var t;let{player:l,onMouseLeave:o,isActive:f,awemeInfo:m}=e,p=(0,n.useRef)(!0),[g,h]=(0,u.iu)({isSetLog:!0,awemeInfo:m,plugin:null==l?void 0:null===(t=l.getPlugin)||void 0===t?void 0:t.call(l,"InnerAutoPlayPlugin"),defaultModeRef:p}),_=e=>{null==l||l.emit(d.B.UpdateAutoPlay,{index:e,logParams:{enter_method:"play_setting_panel"}}),h(e),null==o||o()};return(0,i.jsxs)("div",{className:s.default.panel,children:[(0,i.jsxs)("div",{className:s.default.title,children:[(0,i.jsx)(v.z,{onClick:o,svg:(0,i.jsx)(r.Z,{}),style:{marginRight:"4px",fontSize:"12px",height:"12px"}}),(0,i.jsx)("span",{children:"连播"})]}),(0,i.jsx)("div",{className:s.default.virtual,children:u.zQ.map((e,t)=>(0,i.jsxs)("div",{className:a()(s.default.innerItem,{[s.default.selected]:t===g}),onClick:()=>_(t),children:[(0,i.jsx)(c.Z,{width:24,height:24,viewBox:"0 0 24 24",src:u.zf[t],onMouseEnter:()=>{}}),(0,i.jsx)("span",{children:e})]},e))})]})}},96372:function(e,t,l){l.d(t,{G:function(){return d}}),l(874386);var i=l(563097),n=l(88648),o=l(747909),a=l(256229),r=l(407866),s=l(597321);let d=e=>{let{isOnInit:t,player:l,isActive:d,logFn:u}=e,[c,v]=(0,n.useState)(!!t),f=(0,n.useCallback)(()=>{null==l||l.emit(s.B.UpdateImmersiveSwitch,{logParams:{enter_method:"play_setting_panel"}}),(0,a.hB)(),u("pure_mode")},[l]);return(0,n.useEffect)(()=>{let e=()=>{v(e=>!e)};if(l&&d)return null==l||l.on(s.B.UpdateImmersiveSwitch,e),()=>{null==l||l.off(s.B.UpdateImmersiveSwitch,e)}},[l,d]),(0,i.jsxs)("div",{className:r.default.switchBox,children:[(0,i.jsx)("div",{className:r.default.switchLabel,children:"清屏"}),(0,i.jsx)(o.Switch,{checked:c,onChange:f})]})}},923693:function(e,t,l){l.r(t),l.d(t,{SettingList:function(){return ef},SettingListInner:function(){return ev},SettingPlugin:function(){return eu}});var i=l("520739"),n=l("878389");l("874386"),l("179133"),l("826893");var o=l("563097"),a=l("88648"),r=l("489478"),s=l("734123"),d=l("713097"),u=l.n(d),c=l("35730"),v=l("491362"),f=l("658065"),m=l("32167"),p=l("820303"),g=l("782442"),h=l("330746"),_=l("637005"),y=l("362555"),x=l("47324"),w=l("747909"),S=l("256229"),C=l("407866"),N=l("550339"),b=l("597321");let E=e=>{let{autoPlayInit:t,player:l,isActive:i,logFn:n}=e,[r,s]=(0,a.useState)(t),d=(0,a.useCallback)(()=>{n("auto_play");let e={switchBy:N.l7.Shortcut,logParams:{enter_method:"play_setting_panel"}};null==l||l.emit(b.B.UpdateAutoPlaySwitch,e),(0,S.hB)()},[l,n]);return(0,a.useEffect)(()=>{let e=()=>{s(e=>!e)};if(l&&i)return null==l||l.on(b.B.UpdateAutoPlaySwitch,e),()=>{null==l||l.off(b.B.UpdateAutoPlaySwitch,e)}},[l,i]),(0,o.jsxs)("div",{className:C.default.switchBox,children:[(0,o.jsx)("div",{className:C.default.switchLabel,children:"连播"}),(0,o.jsx)(w.Switch,{checked:r,onChange:d})]})};var I=l("96372");let T=e=>{let{isOnInit:t,langInit:l,player:i,isActive:n,logFn:r}=e,[s,d]=(0,a.useState)(t),[c,v]=(0,a.useState)(l),[f,m]=(0,a.useState)(!1),p=(0,a.useCallback)(()=>{null==i||i.emit("switchSubtitles",{isOn:!s}),(0,S.hB)()},[i,s]),g=(0,a.useCallback)(e=>{null==i||i.emit("switchSubtitles",{lang:e,isOn:!0})},[i]);return(0,a.useEffect)(()=>{let e=e=>{let{isOn:t,lang:l}=e;void 0!==t&&d(t),void 0!==l&&v(l)};if(i&&n)return null==i||i.on("switchSubtitlesSuccess",e),()=>{null==i||i.off("switchSubtitlesSuccess",e)}},[i,n]),(0,o.jsxs)("div",{className:u()(C.default.switchBox,C.default.subtitlesBox),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,o.jsx)("div",{className:C.default.switchLabel,children:"字幕"}),(0,o.jsx)(w.Switch,{checked:s,onChange:p}),(0,o.jsxs)("div",{className:u()(C.default.langbox,{[C.default.show]:f}),children:[(0,o.jsx)("div",{className:u()(C.default.langboxItem,{[C.default.selected]:"zh"===c}),onClick:()=>g("zh"),children:"简体中文"}),(0,o.jsx)("div",{className:u()(C.default.langboxItem,{[C.default.selected]:"en"===c}),onClick:()=>g("en"),children:"英文"})]})]})};var k=l("929582"),j=l("254897");let P=e=>{let{onChange:t,logFn:l}=e;return(0,o.jsxs)("div",{className:C.default.switchBox,onClick:()=>{null==t||t(),null==l||l("auto_play")},children:[(0,o.jsx)("div",{className:C.default.switchLabel,children:"连播"}),(0,o.jsx)("div",{className:C.default.select,children:(0,o.jsx)(j.z,{svg:(0,o.jsx)(k.Z,{className:"noTransform"}),className:"noTransform",style:{fontSize:"12px",display:"flex",alignItems:"center"}})})]})};var L=l("544933"),R=new L.h({clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),A=l("288679"),M=l("522376");let O=(e,t,l)=>{let i=M.SELECT_LIST_MAP[l].find(t=>Number(t)===Number(e));return t&&void 0!==i?`${i}x`:"倍速"},F=e=>{let{playbackRate:t,hasSelect:l,onChange:i,disable:n,logFn:r,player:s,disableSpeed:d,setIsShowPlayBackRatio:c,speedType:v}=e,[m,p]=(0,a.useState)(t);return(0,A.u)(s,b.B.ChangePlayRate,e=>{let{rate:t}=e;p(t)}),(0,a.useEffect)(()=>{p(t)},[t]),(0,o.jsxs)("div",{className:u()(C.default.switchBox,{[C.default.disable]:n}),onClick:()=>{if(!n){if(d){R.sendLog("clickHoverLogin",{enter_method:"speed_up",enter_from:(0,f.yW)(),params_for_special:"uc_login"}),_.emit(_.EVENT.loginBlockKeyBoard,{speed:!0,callback:()=>{null==i||i(),null==r||r("speed"),setTimeout(()=>{c(!1)},3e3)}});return}null==i||i(),null==r||r("speed")}},children:[(0,o.jsx)("div",{className:C.default.switchLabel,children:"倍速"}),(0,o.jsx)("div",{className:C.default.select,children:!d||n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:n?"1.0x":O(m,l,v)}),(0,o.jsx)(j.z,{svg:(0,o.jsx)(k.Z,{className:"noTransform"}),className:"noTransform",style:{fontSize:"12px",display:"flex",alignItems:"center"}})]}):(0,o.jsx)(w.Button,{theme:"solid",className:C.default.loginBtn,children:"登录即享"})})]})};var B=l("777480");let W=e=>{let{onChange:t,logFn:l}=e,{currentState:[i]}=(0,B.Jy)(e);return(0,o.jsxs)("div",{className:C.default.switchBox,onClick:()=>{null==t||t(),null==l||l("clarity")},children:[(0,o.jsx)("div",{className:C.default.switchLabel,children:"清晰度"}),(0,o.jsxs)("div",{className:C.default.select,children:[(0,o.jsx)("div",{children:i}),(0,o.jsx)(j.z,{svg:(0,o.jsx)(k.Z,{className:"noTransform"}),className:"noTransform",style:{fontSize:"12px",display:"flex",alignItems:"center"}})]})]})};var U=l("410665"),z=l("97199"),D=l("349998"),H=new L.h({clarityNotifyShow:{eventName:"clarity_notify_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityNotifyClick:{eventName:"clarity_notify_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityCellShow:{eventName:"clarity_cell_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityCellClick:{eventName:"clarity_cell_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:"",enter_from_merge:"",enter_from:"",item_duration_ms:0,player_display_mode:""}},clarityBubbleShow:{eventName:"clarity_bubble_show",params:{group_id:"",clarity:"",is_auto:1,method:"",gear_name:""}}}),V=l("136916");let Z=e=>{H.sendLog("clarityCellShow",(0,i._)({},e))},G=e=>{let{awemeInfo:t,onMouseLeave:l,player:r,userInfo:s,lists:d,indexSelected:c,setIndexSelected:v,setCurrentState:f}=e,m=(0,U.x)(Z.bind(null,(0,n._)((0,i._)({group_id:null==t?void 0:t.awemeId},(0,D.t)()),{enter_method:"play_setting_panel"}))),p=(0,a.useCallback)(e=>{var t;null==r||r.emit(b.B.UpdateClarity,{item:e,logParams:{enter_method:"play_setting_panel"}}),v(e.key),null==f||f(e.label),null==l||l(),_.emit(null==_?void 0:null===(t=_.EVENT)||void 0===t?void 0:t.clarityRel,{exitInner:!0})},[r,l]);return(0,o.jsxs)("div",{ref:m,className:u()(V.default.panel,"clarityPanel",{[V.default.notLogin]:!(null==s?void 0:s.isLogin)}),children:[(0,o.jsxs)("div",{className:V.default.title,children:[(0,o.jsx)(j.z,{onClick:l,svg:(0,o.jsx)(z.Z,{}),style:{marginRight:"4px",fontSize:"12px",height:"12px"}}),(0,o.jsx)("span",{children:"清晰度"})]}),(0,o.jsx)("div",{className:V.default.virtual,children:null==d?void 0:d.map(e=>(0,o.jsx)("div",{className:u()(V.default.item,{[V.default.selected]:e.key===c}),onClick:()=>p(e),children:e.val},e.key))})]})};function Y(e){let{player:t,ratio:l,awemeInfo:i,logParams:n,onMouseLeave:r,speedType:s}=e,[d,c]=(0,a.useState)(l),v=e=>{null==t||t.emit(b.B.UpdateRadio,{rate:e,click_method:"play_setting_panel"}),c(Number(e)),null==r||r()};return(0,A.u)(t,b.B.ChangePlayRate,()=>{null==r||r()}),(0,o.jsxs)("div",{className:V.default.panel,children:[(0,o.jsxs)("div",{className:V.default.title,children:[(0,o.jsx)(j.z,{onClick:r,svg:(0,o.jsx)(z.Z,{}),style:{marginRight:"4px",fontSize:"12px",height:"12px"}}),(0,o.jsx)("span",{children:"倍速"})]}),(0,o.jsx)("div",{className:V.default.virtual,children:M.SELECT_LIST_MAP[s].map(e=>(0,o.jsxs)("div",{className:u()(V.default.item,{[V.default.selected]:Number(d)===Number(e)}),onClick:()=>v(Number(e)),children:[e,"x"]},e))})]})}var Q=l("874460"),K=new L.h({playSettingPanelShow:{eventName:"play_setting_panel_show",params:{enter_from_merge:"",enter_from:""}},playSettingPanelClick:{eventName:"play_setting_panel_click",params:{enter_from_merge:"",enter_from:"",click_position:""}},playSettingIconShow:{eventName:"play_setting_icon_show",params:{enter_from_merge:"",enter_from:"",icon:""}}}),X=l("85599"),q=l("399083"),J=l("860684"),$=l("894416"),ee=l("205457"),et=l("552167"),el=l("517864"),ei=l("679126"),en=l("356650"),eo=l("371738"),ea=l("261745");let er=new Map([[q.p7.AutoPlayer,e=>(0,o.jsx)(E,(0,i._)({},e))],[q.p7.Clear,e=>(0,o.jsx)(I.G,(0,i._)({},e))],[q.p7.Subtitles,e=>(0,o.jsx)(T,(0,i._)({},e))],[q.p7.InnerAutoPlayer,e=>(0,o.jsx)(P,(0,i._)({},e))],[q.p7.PlayBackRatio,e=>(0,o.jsx)(F,(0,i._)({},e))],[q.p7.FakeScreen,e=>(0,o.jsx)(W,(0,i._)({},e))],[q.p7.WatchLater,e=>(0,o.jsx)(X.nf,(0,n._)((0,i._)({},e),{isMini:!0}))]]),es=()=>{K.sendLog("playSettingPanelShow",{enter_from_merge:(0,f.yW)(),enter_from:(0,m.vM)()})},ed=e=>{K.sendLog("playSettingPanelClick",{enter_from_merge:(0,f.yW)(),enter_from:(0,m.vM)(),click_position:e})},eu=e=>{var t,l,r,s,d,f,m,w,S,C,b,E,I,T;let{hideList:k,awemeInfo:P,player:L,isActive:R,userInfo:A,dispatch:M,abtestData:O,isAdAweme:F,search33PxUnify:W}=e,[U,z]=(0,a.useState)(!0),[D,H]=(0,a.useState)(!1),[V,Z]=(0,a.useState)(!1),[K,X]=(0,a.useState)(!1),J=(0,a.useRef)(!1),$=(0,a.useRef)(null),ee=(0,a.useRef)(null),ei=new Map([[q.p7.AutoPlayer,{autoPlayInit:(null===(l=L.getPlugin(N.JI.pluginName))||void 0===l?void 0:null===(t=l.config)||void 0===t?void 0:t.nextAutoPlay)||!1,player:L,isActive:R,logFn:ed}],[q.p7.Clear,{isOnInit:(null===(s=L.getPlugin(et.Yd.pluginName))||void 0===s?void 0:null===(r=s.config)||void 0===r?void 0:r.isOn)||!1,player:L,isActive:R,logFn:ed}],[q.p7.Subtitles,{isOnInit:(null===(f=L.getPlugin(el.EY.pluginName))||void 0===f?void 0:null===(d=f.config)||void 0===d?void 0:d.isOn)||!1,langInit:(null===(w=L.getPlugin(el.EY.pluginName))||void 0===w?void 0:null===(m=w.config)||void 0===m?void 0:m.lang)||"zh",player:L,isActive:R,logFn:ed}],[q.p7.InnerAutoPlayer,{onChange:()=>{z(!0),X(!0)},logFn:ed}],[q.p7.PlayBackRatio,{onChange:()=>{z(!0),Z(!0)},setIsShowPlayBackRatio:Z,hasSelect:null!==(0,p.G)(c.SessionStorageKeys.PlayerPlaybackratio),playbackRate:(0,p.G)(c.SessionStorageKeys.PlayerPlaybackratio)||1,disable:F,logFn:ed,player:L,disableSpeed:g.Le.getConfig(g.gI.disableSpeed),speedType:(0,h.G6)()?v.$.Safari:v.$.Normal}],[q.p7.FakeScreen,{onChange:()=>{z(!0),H(!0)},userInfo:A,abtestData:O,awemeInfo:P,currentDefinition:null==L?void 0:null===(b=L.getPlugin)||void 0===b?void 0:null===(C=b.call(L,"bitrateselector"))||void 0===C?void 0:null===(S=C.curBitRate)||void 0===S?void 0:S.definition,userSelectDefinition:null==L?void 0:L.config.userSelectDefinition,userSelectUpdate:null==L?void 0:L.config.userSelectUpdate,logFn:ed,player:L}],[q.p7.WatchLater,{player:L,isActive:R,logFn:ed,awemeInfo:P,loginDispatch:M,isLogin:null==A?void 0:A.isLogin}]]),eu=(0,a.useCallback)(e=>{var t,l,i;if(!e.target.closest(".semi-portal"))clearTimeout(ee.current),((null==e?void 0:e.target)===(null==$?void 0:$.current)||(null==$?void 0:null===(t=$.current)||void 0===t?void 0:t.contains(null==e?void 0:e.target))||(null==e?void 0:e.target)===(null==L?void 0:null===(i=L.root)||void 0===i?void 0:null===(l=i.querySelector)||void 0===l?void 0:l.call(i,".setting-icon")))&&(z(!1),es()),!J.current&&(_.emit(_.EVENT.videoStopPlayNext),J.current=!0)},[]);(0,a.useEffect)(()=>()=>_.emit(_.EVENT.videoRemoveStopPlayNext),[]);let ec=(0,en.zJ)(P),{indexSelectedState:[ev,ef],lists:em,swichStatus:ep,currentState:[eg,eh]}=(0,B.Jy)(e),e_=-1!==k.findIndex(e=>e[0]===q.p7.FakeScreen),ey=(0,a.useRef)(null);return(0,o.jsxs)("div",{className:x.default.container,onMouseEnter:eu,ref:$,onMouseLeave:()=>{ee.current=setTimeout(()=>{z(!0)},300),H(!1),Z(!1),X(!1),_.emit(_.EVENT.videoRemoveStopPlayNext),J.current=!1},children:[U?null:(0,o.jsx)("div",{className:u()(x.default.panel,"semi-always-dark","setting-panel",{[x.default.search]:W}),children:k.map(e=>{let t=er.get(e[0]),l=ei.get(e[0]);return null==t?void 0:t((0,n._)((0,i._)({},l),{key:e[0]}))})}),D&&(0,o.jsx)(G,{awemeInfo:P,userInfo:A,onMouseLeave:()=>{z(!1),H(!1),z(!0)},dispatch:M,player:L,isActive:R,currentDefinition:null==L?void 0:null===(T=L.getPlugin)||void 0===T?void 0:null===(I=T.call(L,"bitrateselector"))||void 0===I?void 0:null===(E=I.curBitRate)||void 0===E?void 0:E.definition,userSelectDefinition:null==L?void 0:L.config.userSelectDefinition,abtestData:O,userSelectUpdate:null==L?void 0:L.config.userSelectUpdate,lists:em,indexSelected:ev,setIndexSelected:ef,setCurrentState:eh}),V&&(0,o.jsx)(Y,{player:L,ratio:(0,p.G)(c.SessionStorageKeys.PlayerPlaybackratio)||1,awemeInfo:P,logParams:{},onMouseLeave:()=>{z(!1),Z(!1),z(!0)},speedType:(0,h.G6)()?v.$.Safari:v.$.Normal}),K&&!ec&&(0,o.jsx)(Q.k,{onMouseLeave:()=>{z(!1),X(!1)},player:L,isActive:R,awemeInfo:P}),(0,o.jsx)(eo.A,{visible:ep!==ea.N.Off&&e_,current:eg,swichStatus:ep,getPopupContainer:()=>ey.current,children:(0,o.jsx)("div",{className:x.default.iconContainer,ref:ey,children:(0,o.jsx)(j.z,{svg:(0,o.jsx)(y.Z,{className:"noTransform"}),className:"setting-icon"})})})]})};class ec extends s.Plugin{static get pluginName(){return"SettingListPlugin"}static get defaultConfig(){return{position:r.POSITIONS.CONTROLS_RIGHT,index:10,className:"xgplayer-setting-list"}}afterCreate(){this.renderRoot()}destroy(){(0,ei.v)(this)}renderRoot(){this.root&&(0,ei.s)(this,(0,o.jsx)(eu,(0,i._)({},this.config)))}render(){return'<xg-icon class="xgplayer-setting-list" data-state="normal"></xg-icon>'}}let ev=e=>{let{awemeInfo:t,hideList:l,userInfo:o}=e,r=(0,J.n)();return(0,a.useEffect)(()=>{if(r)return r.registerPlugin(ec,(0,n._)((0,i._)({},e),{player:r})),()=>{r.getPlugin("SettingListPlugin")&&r.unRegisterPlugin("SettingListPlugin",!0)}},[r,t,l,o]),null},ef=e=>{let t=(0,$.N)();return(0,o.jsx)(ee.k,{componentName:"SettingListPlugin",Slardar:t,children:(0,o.jsx)(ev,(0,i._)({},e))})}},517864:function(e,t,l){l.d(t,{EY:function(){return w},SE:function(){return C}});var i=l(134761),n=l(520739);l(874386),l(250440);var o=l(563097),a=l(88648),r=l(489478),s=l(713097),d=l.n(s),u=l(734123),c=l(658065),v=l(32167),f=l(782442),m=l(205457);l(148429);var p=l(860684),g=l(894416),h=l(679126),_=l(702726),y=l(602394);let x=e=>{let{player:t,isOn:l,lang:i,onSwitch:n}=e,[r,s]=(0,a.useState)(!1),u=(0,a.useCallback)(e=>{n({lang:e,isOn:!0}),s(!1)},[n]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:d()("xgplayer-icon"),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,o.jsxs)("div",{className:"xgplayer-setting-label",onClick:()=>n({isOn:!l}),children:[(0,o.jsx)("button",{"aria-checked":"true",className:d()("xg-switch",{"xg-switch-checked":l}),"aria-labelledby":"xg-switch-pip",type:"button",children:(0,o.jsx)("span",{className:"xg-switch-inner"})}),(0,o.jsx)("span",{className:"xgplayer-setting-title",children:"字幕"})]}),(0,o.jsxs)("div",{className:d()("xgplayer-setting-slider",{show:r}),children:[(0,o.jsx)("div",{className:d()("xgplayer-setting-slider-item",{selected:"zh"===i}),onClick:()=>u("zh"),children:"简体中文"}),(0,o.jsx)("div",{className:d()("xgplayer-setting-slider-item",{selected:"en"===i}),onClick:()=>u("en"),children:"英文"})]})]})})};class w extends u.Plugin{static get pluginName(){return"SubtitlesSettingPlugin"}static get defaultConfig(){return{position:r.POSITIONS.CONTROLS_RIGHT,index:7.5,className:"xgplayer-subtitles-setting"}}afterCreate(){var e,t;if(!this.config.disable)this.renderRoot(),this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseLeave),null===(e=this.player)||void 0===e||e.on("switchSubtitles",this.updateSwitch),this.updateTargetsVisiblity(),this.config.isOn&&this.player.plugins.texttrack.switchSubTitle({language:this.config.lang}),_.logInstance.sendLog("showSubtitle",{enter_from:(0,c.yW)(),enter_method:this.player.root.clientWidth>=675?"bar":"setting",group_id:null===(t=this.config.awemeInfo)||void 0===t?void 0:t.awemeId,player_display_mode:(0,v.Ok)()})}destroy(){var e,t;this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseLeave),null===(e=this.player)||void 0===e||e.plugins.texttrack.switchOffSubtitle(),null===(t=this.player)||void 0===t||t.off("switchSubtitles",this.updateSwitch),(0,h.v)(this)}update(e){this.config=(0,n._)({},this.config,e)}updateTargetsVisiblity(){this.config.isOn?this.hideTargets():this.showTargets()}showTargets(){let e=this.root.closest(".basePlayerContainer");e&&u.Util.removeClass(e,"subtitles-switch-on")}hideTargets(){let e=this.root.closest(".basePlayerContainer");e&&u.Util.addClass(e,"subtitles-switch-on")}renderRoot(){let e=(0,o.jsx)(x,{player:this.player,isOn:this.config.isOn,lang:this.config.lang,onSwitch:e=>{let{isOn:t,lang:l}=e;this.updateSwitch({isOn:t,lang:l})}});(0,h.s)(this,e)}render(){return`
      <xg-icon class="xgplayer-subtitles-setting" data-state="normal">
      </xg-icon>
    `}constructor(...e){var t;super(...e),t=this,(0,i._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})}),(0,i._)(this,"onMouseLeave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,i._)(this,"updateSwitch",function(){var e,l;let{isOn:i,lang:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.player.plugins.texttrack.config.list,a=null!=n?n:t.config.lang;if(!o.find(e=>e.language===a)){y.F.info(`此视频暂不支持${"zh"===a?"中文":"英文"}字幕`),_.logInstance.sendLog("clickSubtitleError",{enter_from:(0,c.yW)(),enter_method:t.player.root.clientWidth>=675?"bar":"setting",group_id:null===(l=t.config.awemeInfo)||void 0===l?void 0:l.awemeId,button_type:i?"on":"off",button_name:"zh"===a?"cn":"en"});return}void 0!==n&&(t.config.lang=n),t.config.isOn=i,t.renderRoot(),t.updateTargetsVisiblity(),i?(t.player.plugins.texttrack.switchSubTitle({language:t.config.lang}),f.Le.setConfig(f.gI.SubtitlesCacheSwitch,{isOn:!0,lang:t.config.lang})):(t.player.plugins.texttrack.switchOffSubtitle(),f.Le.setConfig(f.gI.SubtitlesCacheSwitch,{isOn:!1,lang:t.config.lang})),t.player.emit("switchSubtitlesSuccess",{isOn:t.config.isOn,lang:t.config.lang}),_.logInstance.sendLog("clickSubtitle",{enter_from:(0,c.yW)(),enter_method:t.player.root.clientWidth>=675?"bar":"setting",group_id:null===(e=t.config.awemeInfo)||void 0===e?void 0:e.awemeId,button_type:t.config.isOn?"on":"off",button_name:"zh"===t.config.lang?"cn":"en",player_display_mode:(0,v.Ok)()})})}}let S=e=>{let{isActive:t,awemeInfo:l,abtestData:i}=e,n=(0,p.n)();return(0,a.useEffect)(()=>{if(n&&t){var e,i;if(l.claInfo){let t=l.claInfo.list.map(e=>({id:e.id,url:e.url,language:e.language.includes("CN")?"zh":"en",text:e.language.includes("CN")?"中文":"英文",default:!1}));null===(e=n.plugins.texttrack)||void 0===e||e.updateSubtitles(t)}else null===(i=n.plugins.texttrack)||void 0===i||i.updateSubtitles([])}},[n,t,l]),(0,a.useEffect)(()=>{if(n&&t&&l.claInfo){var e,o,a,r,s;let t=!1,d="zh";return(null==i?void 0:null===(e=i.subtitles)||void 0===e?void 0:e.cache_switch)&&(t=null!==(r=null===(o=f.Le.getConfig(f.gI.SubtitlesCacheSwitch))||void 0===o?void 0:o.isOn)&&void 0!==r&&r,d=null!==(s=null===(a=f.Le.getConfig(f.gI.SubtitlesCacheSwitch))||void 0===a?void 0:a.lang)&&void 0!==s?s:"zh"),n.registerPlugin(w,{isOn:t,lang:d,awemeInfo:l,abtestData:i}),()=>{n.getPlugin(w.pluginName)&&n.unRegisterPlugin(w.pluginName,!0)}}},[n,t,l,i]),(0,a.useEffect)(()=>{if(n&&t&&!l.claInfo){let e=n.root.closest(".basePlayerContainer");u.Util.removeClass(e,"subtitles-switch-on")}},[n,t,l]),null},C=e=>{let t=(0,g.N)();return(0,o.jsx)(m.k,{componentName:"SubtitlesPlugin",Slardar:t,children:(0,o.jsx)(S,(0,n._)({},e))})}},950081:function(e,t,l){l.d(t,{W:function(){return a}}),l(874386);var i=l(88648),n=l(746864),o=l(256277);function a(e,t,l){let[a,r]=(0,i.useState)(!1),s=(0,i.useMemo)(()=>{var e;return(null==t?void 0:null===(e=t.chapterInfo)||void 0===e?void 0:e.status)&&(null==t?void 0:t.awemeType)!==n.e.Note},[t]),d=(0,o.Kf)(t);return(0,i.useEffect)(()=>{if(d){r(!1);return}r(s)},[s,d]),{hasChapterBar:a}}},182424:function(e,t,l){var i=l(520739),n=l(878389),o=l(563097),a=l(88648);let r=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M10 10.693c0-1.7 0-2.549.354-3.013A1.729 1.729 0 0 1 11.64 7c.582-.03 1.284.45 2.687 1.409l9.697 6.63c1.097.75 1.646 1.126 1.843 1.598.172.414.177.878.014 1.296-.187.476-.727.863-1.808 1.638l-9.697 6.945c-1.413 1.013-2.12 1.52-2.71 1.498a1.728 1.728 0 0 1-1.305-.67C10 26.877 10 26.007 10 24.268V10.693z",fill:"#0A0C20"})})));t.Z=r}}]);