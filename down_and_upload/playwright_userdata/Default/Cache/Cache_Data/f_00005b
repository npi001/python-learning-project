"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["80303"],{132040:function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxMiAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTguODEwODQgMy42MTUxNUM4LjgxMDg0IDUuMDk5NjMgNy41Njk0NyA2LjMwNjg2IDYuMDMzMjggNi4zMjQzMkg1Ljk2Njc4QzQuNDMwNTkgNi4zMDY4NiAzLjE4OTIyIDUuMDk5NjMgMy4xODkyMiAzLjYxNTE1VjIuNzExMzZDMy4xODkyMiAxLjIxMzc4IDQuNDQ4MzIgMCA2LjAwMDAzIDBDNy41NTE3NCAwIDguODEwODQgMS4yMTM3OCA4LjgxMDg0IDIuNzExMzZWMy42MTUxNVpNMS4xNjE1NyA4LjU5MzcxQzIuMzI5NDEgOC4wMzc0MSA0LjY3NDQzIDcuNzI5ODEgNS45OTg5NiA3LjcyOTgxQzcuMzI1NTcgNy43Mjk4MSA5LjY3NDc3IDguMDM3NDEgMTAuODQ0NyA4LjU5ODA3QzExLjUyMzcgOC45Nzc2NiAxMiA5LjgyODQ3IDEyIDEwLjgyMzNWMTEuMzk1M0MxMiAxMi4xMzI3IDExLjYwOTMgMTIuNzUyMiAxMS4wNzI0IDEyLjk1MDhDOS43ODc1OCAxMy4zMTczIDcuMzczNjIgMTMuNTEzNiA2LjAwMTA0IDEzLjUxMzZDNC42MjYzOCAxMy41MTM2IDIuMjEwMzMgMTMuMzEyOSAwLjkyMzQwNyAxMi45NDg2QzAuMzkwNjcyIDEyLjc0NzkgMCAxMi4xMzA1IDAgMTEuMzkzMVYxMC44MjExQzAgOS44MjQxIDAuNDc4NDE3IDguOTcxMTIgMS4xNjE1NyA4LjU5MzcxWiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC45Ii8+Cjwvc3ZnPgo="},31243:function(e,t,i){i.d(t,{GT:function(){return v},HF:function(){return f},MS:function(){return s},pQ:function(){return c},we:function(){return _}});var n=i(520739),r=i(878389),o=i(138871),l=i.n(o),a=i(63746),u=i(270414),d=i(358354);let s=async e=>a.ZP.get("/webcast/privilege/subscribe/panel/",{params:(0,r._)((0,n._)((0,r._)((0,n._)({},(0,u.f)(),(0,d.F)({})),{aid:6383,app_name:"douyin_web"}),e),{vip_lynx_version:2})}),c=async e=>a.ZP.get("/webcast/privilege/subscribe/purchase_list/",{params:(0,r._)((0,n._)((0,r._)((0,n._)({},(0,u.f)(),(0,d.F)({})),{aid:6383,app_name:"douyin_web"}),e),{purchase_type:1,vip_lynx_version:2})}),v=async e=>a.ZP.get("/webcast/privilege/subscribe/info/",{params:(0,r._)((0,n._)((0,r._)((0,n._)({},(0,u.f)(),(0,d.F)({})),{aid:6383,app_name:"douyin_web"}),e),{purchase_type:1}),transformResponse:e=>l()({storeAsString:!0}).parse(e)}),_=async e=>a.ZP.get("/webcast/social/im/conversation/list_visible/",{params:(0,r._)((0,n._)((0,r._)((0,n._)({},(0,u.f)(),(0,d.F)({})),{aid:6383,app_name:"douyin_web"}),e),{purchase_type:1})}),f=async e=>a.ZP.get("/webcast/privilege/paygrade/",{params:(0,n._)((0,r._)((0,n._)({},(0,u.f)(),(0,d.F)({})),{aid:6383,app_name:"douyin_web"}),e)})},77711:function(e,t,i){i.d(t,{h:function(){return u}});var n=i(88648),r=i(159581),o=i(412679),l=i(419631),a=i.n(l);let u=e=>{let{player:t,source:i=""}=e,l=(0,n.useRef)(!1),{playerRef:u}=(0,n.useContext)(o.ET),d=t||u.current;return(0,n.useEffect)(()=>{if(!d)return;l.current=!d.paused;let e=()=>{l.current=!0},t=[d.on("loaddata",e),d.on("canplay",e),d.on("play",e),d.on("timeupdate",e)];return()=>{t.forEach(e=>null==e?void 0:e())}},[d]),(0,n.useEffect)(()=>{let e=a()(()=>{(0,r.vS)({has_receieved:l.current?1:0,source:i}),l.current=!1});return window.addEventListener("beforeunload",e),()=>{e(),window.removeEventListener("beforeunload",e)}},[]),null}},448715:function(e,t,i){i.d(t,{G:function(){return m}});var n=i(520739),r=i(878389),o=i(368200);i(874386),i(413806),i(826893),i(268917);var l=i(563097),a=i(88648),u=i(408749),d=i(176638),s=i(713097),c=i.n(s),v=i(567754),_=i(327984),f=i(114682);let m=e=>{var{href:t,children:i,style:s,className:m,passParamKeys:p=[],spa:h,onClick:g,passParams:E={},firstTabName:y,onClickLog:I,title:M,stopPropagation:N,isHideUrl:C=!1}=e,O=(0,o._)(e,["href","children","style","className","passParamKeys","spa","onClick","passParams","firstTabName","onClickLog","title","stopPropagation","isHideUrl"]);let[A,P]=a.useState(t);a.useEffect(()=>{P(t)},[t]);let D=a.useCallback(e=>{if(N&&e.stopPropagation(),g&&g(e),!t)return;I&&(0,f.Vd)({category_name:y,more_detail:M,enter_from:"hot_hover"});let[i,r]=t.split("?",2),o=[],l=(0,u.U)(p),a=(0,n._)({},window.__INVISIBLE_QUERY__||{},l,E),d=(0,v.stringify)(a);if(d&&o.push(d),r&&o.push(r),o.length>0){P([i,o.join("&")].join("?"));return}P(i)},[t,p,g,E,N]);return h?(0,l.jsx)(_.Link,(0,r._)((0,n._)({to:A||"",style:s,className:c()(m),onClick:D},O),{target:(0,d.f)()?"_self":O.target,children:i})):(0,l.jsx)("a",(0,r._)((0,n._)({href:C?void 0:A,className:m,style:s,onClick:D},O),{target:(0,d.f)()?"_self":O.target,children:i}))}},485019:function(e,t,i){i.d(t,{GZ:function(){return V},ng:function(){return R},ds:function(){return T}});var n=i("520739"),r=i("878389");i("874386"),i("250440");var o=i("563097"),l=i("88648"),a=i("451047"),u=i("782563"),d=i("572076"),s=i("235755"),c=i("999108"),v=i("684434");let _=(0,l.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,n._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M22.707 10.707a1 1 0 0 0-1.414-1.414L16 14.586l-5.293-5.293a1 1 0 0 0-1.414 1.414L14.586 16l-5.293 5.293a1 1 0 1 0 1.414 1.414L16 17.414l5.293 5.293a1 1 0 0 0 1.414-1.414L17.414 16l5.293-5.293z",fill:"#fff"})})));var f=i("58655"),m=i("797973"),p=i("434739"),h=i("297517"),g=i("983096"),E=i("419631"),y=i.n(E);let I=e=>{let{video:t}=e;if(t instanceof HTMLVideoElement){var i;let{clientHeight:n,clientWidth:r,videoHeight:o,videoWidth:l}=t;t.getBoundingClientRect().width;let{clientHeight:a,clientWidth:u}=null==e?void 0:null===(i=e.baseConfig)||void 0===i?void 0:i.el,d=!0;if(l>o&&(d=!1),r>u&&(d=!1),d)return{height:512,width:300}}return{width:512,height:300}},M=y()(()=>{let e=e=>{let{key:t,validRes:i=Boolean}=e,n=document[t];return{key:t,originFn:n,mergedFn:function(){for(var e,r,o=arguments.length,l=Array(o),a=0;a<o;a++)l[a]=arguments[a];let u=n.call(document,...l);try{let n=null===(r=window.documentPictureInPicture)||void 0===r?void 0:null===(e=r.window)||void 0===e?void 0:e.document;if(!n||i(u))return u;return n[t].call(n,...l)}catch(e){return u}}}};return[e({key:"getElementById"}),e({key:"querySelector"}),e({key:"querySelectorAll",validRes:e=>!!e.length}),e({key:"getElementsByName",validRes:e=>!!e.length}),e({key:"getElementsByClassName",validRes:e=>!!e.length}),e({key:"getElementsByTagName",validRes:e=>!!e.length})]});function N(e){M().forEach(t=>{let{key:i,mergedFn:n,originFn:r}=t;document[i]=e?n:r})}var C=i("309931"),O=i("713097"),A=i.n(O),P=i("694987"),D=i("754089"),S=i("756919"),b=i("859231"),w=i("633529");function x(){let{isLivingPip:e}=T(),{singletonStore:{player:t}}=(0,f.o)(),i=(0,l.useRef)(null),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{try{if(!t)return()=>{};let e=0,r=()=>{cancelAnimationFrame(e)},o=()=>{var l;r();let a=null===(l=t.video)||void 0===l?void 0:l.flyVideo,u=n.current;if(!a||!u||!i.current)return;let{videoWidth:d,videoHeight:s}=a,c=u.getContext("2d");if(u.width=d,u.height=s,c.drawImage(a,0,0,u.width,u.height),!t.paused)e=requestAnimationFrame(o)};return t.on("pause",r),t.on("play",o),o(),()=>{r(),t.off("play",o),t.off("pause",r)}}catch(e){}},[e,t]),(0,o.jsx)("div",{ref:i,className:w.default.doubleScreenVideoWrap,children:(0,o.jsx)("canvas",{ref:n})})}var L=i("634199");let T=()=>{let{pipInfo:e,closePipWindow:t,openPipWindow:i}=(0,a.fl)(),o=R(),{playerStore:{playerInstance:l}}=(0,f.o)(),s=(null==e?void 0:e.pipId)===S.CL,c=(0,m.Z)(()=>i((0,r._)((0,n._)({},I(l)),{pipId:S.CL})).then(e=>{var t;let i=null==e?void 0:null===(t=e.pipInfo)||void 0===t?void 0:t.window;if(!!i)"true"===document.documentElement.getAttribute("dark")&&(i.document.documentElement.setAttribute("dark","true"),i.document.body.setAttribute("theme-mode","dark"))})),v=(0,m.Z)(e=>{if(!!s)e&&window.focus(),(0,u.DT)()&&e&&d.invoke("pipParentWinShow"),t(S.CL)});return{isLivingPip:s,pipWin:s?e.window:null,closeLivingPip:v,openLivingPip:c,isNewLivingPipEnabled:o}},R=()=>{let{isSupported:e}=(0,a.fl)();return(0,u.DT)(),e},k=(0,l.memo)(e=>{let{isDoubleScreen:t,className:i}=e,[n,r]=(0,l.useState)(!1),[a,u]=(0,l.useState)(!1),d=(0,l.useRef)(null),E=(0,l.useRef)(null),y=(0,l.useRef)(!1),{isLivingPip:I,closeLivingPip:M,pipWin:O}=T(),{singletonStore:{player:w,message:R},eventStore:{playerEvent:k},linkmicStore:{linkMicLayout:V},pkStore:{pkStatus:j},playerStore:{isPause:F}}=(0,f.o)(),G=(0,m.Z)(()=>{I&&r((0,s.nz)())});(0,p.Z)("resize",()=>G(),{target:O}),(0,p.Z)("pagehide",()=>y.current=!(null==w?void 0:w.paused),{target:O}),(0,h.Z)(()=>G(),I?50:void 0),(0,l.useEffect)(()=>R.on("MemberMessage",e=>{(null==e?void 0:e.some(e=>{var t;return[b.WU.KICK_OUT,b.WU.BLOCK].includes(Number(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.action))}))&&M(!1)}),[R,M]),(0,l.useEffect)(()=>(N(I),()=>{N(!1)}),[I]);let U=(0,l.useMemo)(()=>void 0===V&&!j&&!0,[V,j]),z=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if(!!w)try{var e,t,i,n,r,o,l,a;let u=()=>{let e=requestAnimationFrame(()=>{var e,t;return null===(t=w.plugins.dynamicbg)||void 0===t?void 0:null===(e=t.renderOnce)||void 0===e?void 0:e.call(t)});return()=>{cancelAnimationFrame(e)}};if(I){;return z.current=!0,null==w||null===(t=w.plugins)||void 0===t||null===(e=t.rotate)||void 0===e||e.hide(),(w.paused||!F)&&(null===(n=w.config)||void 0===n?void 0:null===(i=n.baseConfig)||void 0===i?void 0:i.url)&&w.play(),u()}if(z.current){;return z.current=!1,U&&(null===(o=w.plugins.rotate)||void 0===o||null===(r=o.show)||void 0===r||r.call(o)),y.current&&(w.paused||!F)&&(null===(a=w.config)||void 0===a?void 0:null===(l=a.baseConfig)||void 0===l?void 0:l.url)&&w.play(),u()}}catch(e){}},[I,w,U,F]),(0,g.Z)(()=>{M()});let B=()=>M(!0);return(0,D.Z)(P.Hq,B),(0,D.Z)(P.qo,B),(0,D.Z)(P.fC,B),(0,D.Z)(P.Fg,B),(0,o.jsx)(c.F6,{pipId:S.CL,children:(0,o.jsxs)("div",{className:A()(L.default.wrap,i),ref:d,onMouseOver:()=>u(!1),onMouseLeave:e=>{if(!E.current||!e)return;let{pageX:t,pageY:i}=e,{left:n,top:r,width:o,height:l}=E.current.getBoundingClientRect();t>=n&&t<=n+o&&i>=r&&i<=r+l&&u(!0)},children:[(()=>{var e;let t=null==w?void 0:null===(e=w.root)||void 0===e?void 0:e.querySelector(".douyin-player-top-bar");return!t||n?null:(0,C.createPortal)((0,o.jsxs)("div",{className:L.default.headerIcons,children:[(0,o.jsx)("div",{className:L.default.dragBar,ref:E}),(0,o.jsx)("span",{className:L.default.headerIcon,onClick:()=>{M(!0),k.livesdkMiniWindowExit({click_position:"mini_window_exit"})},children:(0,o.jsx)(v.Z,{})}),(0,o.jsx)("span",{className:L.default.headerIcon,onClick:()=>{M(!1),k.livesdkMiniWindowExit({click_position:"mini_window_exit"})},children:(0,o.jsx)(_,{})})]}),t)})(),(0,o.jsxs)("div",{className:L.default.content,children:[(0,o.jsx)(c.pu,{pipAnchorId:S.MA.BasicPlayer,className:A()(L.default.slotContent,{[L.default.forceShowControl]:a})}),t&&(0,o.jsx)(x,{}),(0,o.jsx)(c.pu,{pipAnchorId:S.MA.Background,className:A()(L.default.background,"livingPipBackground")})]})]})})}),V=e=>R()?(0,o.jsx)(k,(0,n._)({},e)):null},651019:function(e,t,i){i.r(t),i.d(t,{AdaptedBySEIPlugin:function(){return A},AdaptedBySEIPluginComponentImpl:function(){return N},OldAdaptedBySEIPlugin:function(){return O}});var n=i(44895),r=i(204771),o=i(520739),l=i(878389);i(250440),i(110006),i(826893);var a=i(563097),u=i(88648),d=i(948375),s=i(544845),c=i(757980),v=i(737074),_=i(412679),f=i(393265),m=i(779773),p=i(725215),h=i(58655),g=i(859231),E=i(489112),y=i(551572),I=i(622307);let M=(e,t,i,n,r,o)=>{if(100===t.code)try{var l,a,u,d,s,v;let n=new TextDecoder().decode(t.content),_=(0,m.KR)(n);try{null==e||null===(l=e.updateConfig)||void 0===l||l.call(e,{baseConfig:{seiOnDemand:!0}})}catch(e){}if(null==_?void 0:_.app_data){let t=JSON.parse(_.app_data);if(y.gb.includes(t.ver)&&"1"===r){if(i)return;let n=(0,E.us)(t.ver,(t.grids||[]).length);e.position(n)}else switch(t.ver){case c.t.VIDEO_TALK_ROOM:case c.t.VIDEO_EQUAL:case c.t.VIDEO_DYNAMIC:case c.t.VIDEO_C:if(i)return;e.position({y:.203,h:.5});break;case c.t.VIDEO_T1B8:if(i)return;e.position({y:.11,h:.7375});break;case c.t.AUDIO_TALK_ROOM:case c.t.VIDEO_DYNAMIC_FLOAT:if(i)return;e.position({y:0,h:1});break;case c.t.VIDEO_CAMERA_NEW:case c.t.C_VIDEO_CAMERA:case c.t.VIDEO_1V8:if(i)return;e.position({y:1-.7375,h:.7375});break;case c.t.VIDEO_DYNAMIC_1V3:case c.t.VIDEO_DYNAMIC_1V6:if(i)return;e.position({y:.203,h:.5});break;case c.t.VIDEO_2V4v4:if(i)return;e.position({y:.203,h:.625});break;case c.t.PK:case c.t.MULTI_ANCHOR:let n,l;if(t.is_game){e.position({y:0,h:1});return}let v=t.ver===c.t.MULTI_ANCHOR&&t.grids.length>=4,f=!!(null===(a=t.anchor_interact_info)||void 0===a?void 0:a.layout_type);if((null==_?void 0:_.live_crop)&&t.ver===c.t.PK)n=_.live_crop.crop_y/_.live_crop.stride_h,l=_.live_crop.crop_h/_.live_crop.stride_h;else if(f){let e=null===(u=t.anchor_interact_info)||void 0===u?void 0:u.focus_id,i=t.grids.find(t=>t.uid_str===e);n=null==i?void 0:i.y,l=null==i?void 0:i.h}else n=null===(d=t.grids[0])||void 0===d?void 0:d.y,l=null===(s=t.grids[0])||void 0===s?void 0:s.h;let m=9===t.grids.length?3:2;e.position({y:n,h:v&&!f?l*m:l});break;case c.t.VIDEO_6V6:if(i)return;e.position({y:.183,h:.52});break;default:if(null==_?void 0:_.live_crop){let t=_.live_crop.crop_y/_.live_crop.stride_h,i=_.live_crop.crop_h/_.live_crop.stride_h;e.position({y:t,h:i})}}null==o||o(t)}else(null==_?void 0:_.game_live_data)||(null==_?void 0:null===(v=_.source)||void 0===v?void 0:v.includes("TTLiveSDK"))&&e.position({y:0,h:1})}catch(e){}},N=e=>{let{disEnabled:t=!1,playerRef:i,isFullScreen:n,doubleScreenInfo:r,gameLiveDataHandler:o,linkmicVideoEqualLayoutFrameOpt:l}=e,a=(0,I.CL)(),c=(0,u.useRef)(!1),f=(0,u.useRef)(null),m=(0,d.Z)(e=>{M(i.current,e.detail||e,t,o,l,a)}),p=(0,u.useCallback)(e=>{if(c.current){c.current=!1;return}i.current.position({y:0,h:1})},[]),h=(0,u.useCallback)(()=>{!c.current&&(c.current=!0),f.current=v.Z.setTimeoutWarp(()=>{c.current&&(c.current=!1),v.Z.clearTimeoutWarp(f.current),f.current=null},3e3)},[]);return(0,u.useEffect)(()=>(i.current.on(_.FP.CHANGE_URL,p),document.addEventListener("webcast_qualityEvent",h),()=>{var e;null===(e=i.current)||void 0===e||e.off(_.FP.CHANGE_URL,p),document.removeEventListener("webcast_qualityEvent",h)}),[]),(0,u.useEffect)(()=>(i.current.on(_.FP.SEI,m),()=>{if(!!i.current)i.current.off(_.FP.SEI,m)}),[n]),(0,s.Z)(()=>{if(!i.current)return;let e=i.current;e.video&&e.position({y:0,h:1})}),null},C=e=>{var t=(0,n._)({},(0,r._)(e));let{player:i}=(0,f.n)(),d=(0,u.useRef)(i);return d.current=i,(0,u.useRef)(t).current=t,i?(0,a.jsx)(N,(0,l._)((0,o._)({},t),{playerRef:d})):null},O=(0,u.memo)(C),A=e=>{let{playerRef:t}=(0,u.useContext)(_.ET);return(0,a.jsx)(N,(0,l._)((0,o._)({},e),{playerRef:t}))};t.default=(0,p.Pi)(()=>{let{linkmicStore:{linkRoomType:e,linkStatus:t,linkmicVideoEqualLayoutFrameOpt:i},playerStore:{isFullScreen:n}}=(0,h.o)(),r=(0,I.eZ)();return(0,a.jsx)(C,{disEnabled:e&&t===g.cK.LINKED&&!r,linkmicVideoEqualLayoutFrameOpt:i,isFullScreen:n})})},622307:function(e,t,i){i.d(t,{X3:function(){return w},CL:function(){return P},RS:function(){return S},tA:function(){return A},eZ:function(){return b},yk:function(){return D}});var n=i("520739"),r=i("878389");i("874386");var o=i("563097"),l=i("58655");i("250440");var a=i("408487");let u=e=>[a.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_STAGE,a.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_ENLARGE_STAGE].includes(e);var d=i("207964"),s=i("56702"),c=i("727233"),v=i("668974"),_=i("797973"),f=i("207813"),m=i.n(f),p=i("96008"),h=i.n(p),g=i("595814"),E=i.n(g),y=i("88648");let I={show_player:!1,ui_layout:0},M=["show_player","ui_layout"],{Context:N,useCtxSelector:C}=(0,v.q)({appData:I,setAppData:h()}),O=(0,y.memo)(e=>{let{children:t,linkmicInfo:i}=e,[n,r]=(0,y.useState)(I),l=(0,d.useInLiveAudioLayoutOptAB)(),a=(0,y.useMemo)(()=>{let{inLink:e,appData:t}=i||{};return((0,c.WH)("SEICtxProvider_trace",{linkmicInfo:i,appData:n,inLiveAudioLayoutOptAB:l}),e&&t)?{appData:t,setAppData:r}:{appData:n,setAppData:r}},[n,r,i]);return l?(0,o.jsx)(N.Provider,{value:a,children:t}):(0,o.jsx)(o.Fragment,{children:t})}),A=e=>{var t;let{children:i}=e,[n,r]=(0,y.useState)(!1),a=(0,l.o)({disableThrowError:!0}),u=null==a?void 0:null===(t=a.singletonStore)||void 0===t?void 0:t.message,d=null==a?void 0:a.linkmicStore;(0,y.useEffect)(()=>{if(!!u)return u.on("LinkmicEcologyMessage",e=>{var t,i;let n=null==e?void 0:null===(i=e[0])||void 0===i?void 0:null===(t=i.payload)||void 0===t?void 0:t.audio_show_media_content,o=(null==n?void 0:n.status)===s.WHS.AudioShowMediaStatus_Show;(0,c.qu)("SEICtx_LinkmicEcologyMessage_trace",{audioShowMediaContent:n,canShowMedia:o}),r(o)})},[u]);let v=!!(null==d?void 0:d.isLinked),_=(null==d?void 0:d.uiLayout)||0,f=(0,y.useMemo)(()=>({inLink:v,appData:{show_player:n,ui_layout:_}}),[v,n,_]);return(0,o.jsx)(O,{linkmicInfo:f,children:i})},P=()=>{let e=C(e=>e.setAppData);return(0,_.Z)(t=>{e(e=>{let i=E()(t,M);return m()(i,e)?e:i})})},D=()=>C(e=>{var t;return u(null===(t=e.appData)||void 0===t?void 0:t.ui_layout)});function S(e){return y.forwardRef((t,i)=>(0,o.jsx)(O,{children:(0,o.jsx)(e,(0,r._)((0,n._)({},t),{ref:i}))}))}let b=()=>{let e=C(e=>{var t;return!!(null===(t=e.appData)||void 0===t?void 0:t.show_player)});return D()&&e},w=()=>b()?"forceShowVideo":""},200224:function(e,t,i){i.r(t),i.d(t,{default:function(){return eb},PlayerEndCover:function(){return eS}}),i("874386"),i("338172");var n=i("563097"),r=i("713097"),o=i.n(r),l=i("88648"),a=i("468185"),u=i("393265"),d=i("716551"),s=i("457388"),c=i("909543"),v=i("520739"),_=i("878389");let f=(0,l.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,_._)((0,v._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M4.17 5.333a4.667 4.667 0 1 1-.497 4.417.667.667 0 0 0-1.237.5A6.002 6.002 0 0 0 14 8 6 6 0 0 0 3.333 4.229v-.896a.667.667 0 1 0-1.333 0V6c0 .368.298.667.667.667h2.666a.667.667 0 0 0 0-1.334H4.17z",fill:"#fff",fillOpacity:".9"})})));var m=i("637005"),p=i("14108"),h=i("725215"),g=i("729883"),E=i.n(g);let y=()=>{let[e,t]=l.useState(),i=l.useCallback(e=>{t(e)},[]),n=l.useMemo(()=>E().debounce(i,200),[i]),r=l.useCallback(()=>{n.cancel(),t(void 0)},[n]);return{hoverId:e,onCardMouseEnter:n,onCardMouseLeave:r}};var I=i("759419"),M=i("852349"),N=i("101966"),C=i("474162"),O=i("645260"),A=i.n(O),P=i("999238"),D=i("481925"),S=i("448715"),b=e=>{let{width:t,title:i,cover:r,meta:l,className:a,onMouseEnter:u,onMouseLeave:d,onClick:s,linkProperty:c={},openMultiTaskWindowInWindow:f=!1,style:m}=e;return(0,n.jsxs)(S.G,(0,_._)((0,v._)({rel:"opener"},c),{style:(0,v._)({width:t},m),onMouseEnter:u,onMouseLeave:d,onClick:s,className:o()(D.default.card,a),openMultiTaskWindowInWindow:f,children:[(0,n.jsx)("div",{className:D.default.cover,children:r}),(0,n.jsx)("div",{className:D.default.title,children:i}),l]}))};let w=(0,l.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,_._)((0,v._)({width:67,height:76,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{opacity:".04",d:"M56.99 15.235c-4.138-2.67-7.126-6.94-8.059-11.918A17.984 17.984 0 0 1 48.62 0H35.411l-.023 52.361c-.22 5.863-5.1 10.57-11.08 10.57-1.858 0-3.609-.46-5.15-1.262-3.533-1.841-5.954-5.505-5.954-9.722 0-6.055 4.983-10.984 11.104-10.984 1.142 0 2.238.189 3.277.509V28.135a24.722 24.722 0 0 0-3.277-.234C10.905 27.901 0 38.69 0 51.951c0 8.137 4.11 15.336 10.38 19.689A24.353 24.353 0 0 0 24.311 76c13.407 0 24.312-10.788 24.312-24.05V25.398A31.637 31.637 0 0 0 67 31.241V18.176c-3.692 0-7.13-1.085-10.01-2.941z",fill:"#fff",fillOpacity:".8"})})));var x=i("45118"),L=i("61812"),T=i("58655"),R=(0,h.Pi)(e=>{let{onLog:t}=e,i=l.useRef(!1),{userStore:{userInfo:n}}=(0,T.o)();return l.useEffect(()=>{n.isReady&&!i.current&&(i.current=!0,t&&t())},[t,n]),null}),k=i("759797"),V=i("852735");let j=e=>{let{imageSrc:t,title:i,fit:r="cover",mask:a,leftMarker:u,rightMarker:d,className:s,hideMarkers:c=!1,onMouseLeave:v,onMouseEnter:_,onClick:f,maskZIndex:m=2,alt:p,animation:h,hideShadow:g,forwardRef:E,coverId:y,onLog:M,lazyLoad:N=!0,hoverImg:C,paidLiveData:O,isSpider:D,leftTag:S=null}=e,[b,T]=l.useState(!!D),j=l.useRef(null);l.useEffect(()=>{j.current&&j.current.complete&&T(!0)},[]);let F=l.useCallback(()=>{!b&&T(!0)},[b]),G=Number(A()(O,"paid_type",0))===k.PAID_LIVE_TYPE.PAID_LIVE,U=l.useMemo(()=>`#${L.IS}`,[]);return(0,n.jsxs)("div",{id:y,ref:E,title:"",className:o()(x.default.cover,s),onMouseEnter:_,onMouseLeave:v,onClick:f,children:[G&&(0,n.jsx)(V.Z,{paidLiveData:O,showCountDown:!1,top:8,left:8}),a&&(0,n.jsx)("div",{style:{zIndex:m},className:x.default.mask,children:a}),(0,n.jsx)("div",{className:x.default.backgroundLoading,children:(0,n.jsx)(w,{})}),(0,n.jsx)(P.default,{scrollContainer:U,height:"100%",offset:200,once:!0,children:(0,n.jsx)(R,{onLog:M})}),!D&&N?(0,n.jsx)(P.default,{scrollContainer:U,height:"100%",offset:I.e,once:!0,children:(0,n.jsx)("img",{alt:p,ref:j,src:t,onLoad:F,className:o()(x.default.background,{[x.default.hideImage]:!b,[x.default.hoverImg]:C}),style:{objectFit:r}})}):(0,n.jsx)("img",{alt:p,ref:j,src:t,onLoad:F,className:o()(x.default.background,{[x.default.hideImage]:!b,[x.default.hoverImg]:C}),style:{objectFit:r}}),!g&&(0,n.jsx)("div",{className:o()(x.default.backgroundMask,{[x.default.backgroundMaskNotLoad]:!b})}),!!S&&(0,n.jsx)("div",{className:x.default.content,children:(0,n.jsx)("div",{className:x.default.leftTag,children:S})}),(0,n.jsxs)("div",{className:o()(x.default.footer,{[x.default.hideMarkersAnimation]:h&&c,[x.default.showMarkersAnimation]:h&&!c,[x.default.hideMarkers]:!h&&c}),children:[void 0!==i&&(0,n.jsx)("div",{className:x.default.title,children:i}),(0,n.jsxs)("div",{className:x.default.markers,children:[u,d]})]})]})};var F=l.forwardRef((e,t)=>(0,n.jsx)(j,(0,_._)((0,v._)({},e),{forwardRef:t}))),G=i("933803"),U=i("132040"),z=i("89785"),B=e=>{let{count:t,className:i}=e;return(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:o()(z.default.userCount,i),children:[t&&(0,n.jsx)("img",{src:U}),(0,n.jsx)("span",{className:z.default.count,"data-e2e":"livecard-usercount",children:t})]})})},H=e=>{let{className:t,data:i,onClick:r,onMouseEnter:a,onMouseLeave:u,focus:d,hideTag:s,coverId:c,onCardFocus:v,onLog:_,hideCover:f,logParams:m,target:h="_blank",isRecommendOnEnd:g=!1,isSpider:E}=e,y=A()(i,"room.paid_live_data",{}),O=l.useRef(null);l.useEffect(()=>{d&&v&&v(i,O)},[d,v,i]);let D=l.useCallback(()=>{r&&r()},[r]),S=l.useMemo(()=>(0,n.jsx)("p",{title:i.room.title,style:g?{color:"white"}:{},className:o()(G.default.cardTitle),"data-e2e":"livecard-title",children:i.room.title}),[i,g]),w=l.useMemo(()=>(0,n.jsxs)("div",{className:G.default.meta,children:[(0,n.jsx)(P.default,{height:32,offset:I.e,once:!0,overflow:!0,children:(0,n.jsx)(C.q,{type:"extraExtraSmall",src:i.avatar||A()(i,"room.owner.avatar_thumb.url_list[0]","")})}),(0,n.jsx)("object",{children:(0,n.jsx)("a",{href:(0,p.HC)(A()(i,"room.owner.sec_uid","")),target:"_blank",rel:"noreferrer",style:g?{color:"white"}:{},className:o()(G.default.metaText),"data-e2e":"livecard-metatext",children:i.room.owner.nickname})})]}),[i,g]);l.useCallback(e=>(0,M.e)(e)?"":e,[]);let x=l.useMemo(()=>({href:i.web_rid?(0,M.X)(`/${i.web_rid}`):(0,M.X)(`/${i.uniq_id}`),target:h,title:`${i.room.owner.nickname}的抖音直播间`,passParams:m}),[i,m]);return(0,n.jsx)(b,{onMouseEnter:a,onMouseLeave:u,onClick:D,linkProperty:x,className:o()(t,G.default.liveCard,{[G.default.liveCardBorder]:!g,[G.default.liveCardNoBorder]:g}),cover:(0,n.jsx)(F,{ref:O,coverId:c,onLog:_,className:o()(G.default.liveCover,{[G.default.transparent]:f&&d}),imageSrc:i.cover||A()(i,"room.cover.url_list[0]",""),leftMarker:(0,n.jsx)(B,{count:(0,N.jQ)(i.room)}),alt:`${i.room.owner.nickname}的抖音直播间`,isSpider:E,paidLiveData:y}),title:S,meta:w})},Z=i("487612"),Y=i("738612"),W=i("859231"),K=i("924809"),$=i("595814"),Q=i.n($),q=i("240026"),X=i("140085"),J=i("388521"),ee=i("312065"),et=i("651019"),ei=i("880060"),en=i("581708"),er=i("306620"),eo=i("63002"),el=i("32167"),ea=i("108374"),eu=i("134761");i("429532");var ed=i("412679");class es{updateMeta(e){this._meta=e,this._updateMainVideoSize()}get _mainVideo(){return this._player.video}_takeOverRotate(){var e,t;if(null===(t=this._player)||void 0===t?void 0:null===(e=t.plugins)||void 0===e?void 0:e.rotate){this._player.plugins.rotate.config.disable=!0;let e=this._player.plugins.rotate.root;this._mainVideo.setAttribute("data-custom-rotate","true");let t=()=>{let e=this._mainVideo,t=Number(e.dataset.rotateDeg||0)-90;t=-360===t?0:t,e.dataset.rotateDeg=`${t}`};this._player.on(ed.FP.ROTATE,t),e.addEventListener("click",t),this._disableTakeOverRotate=()=>{this._player.off(ed.FP.ROTATE,t),this._mainVideo.dataset.rotateDeg="",this._mainVideo.removeAttribute("data-custom-rotate"),e.removeEventListener("click",t),this._player.plugins.rotate.config.disable=!1}}}_createMainVideoContainer(){let e=this._mainVideoContainer=document.createElement("div");Object.assign(e.style,{position:"absolute",overflow:"hidden",height:"100%",width:"100%"}),this._mainVideo.replaceWith(e),e.appendChild(this._mainVideo),this._mainVideo.style.transformOrigin="top left"}_initMain(){this._player.on(ed.FP.FULLSCREEN_CHANGE,this._updateMainVideoSize),this._createMainVideoContainer(),(this._mainResizeObserver=new ResizeObserver(this._updateMainVideoSize)).observe(this._player.root),(this._mainMutationObserver=new MutationObserver(this._updateMainVideoSize)).observe(this._mainVideo,{attributeFilter:["data-rotate-deg"]})}destroy(){try{var e,t;this._isDestory=!0,null===(e=this._mainResizeObserver)||void 0===e||e.disconnect(),null===(t=this._mainMutationObserver)||void 0===t||t.disconnect(),this._player.off(ed.FP.FULLSCREEN_CHANGE,this._updateMainVideoSize),this._player.position=this._originPlayerPostion,this._player.resizePosition=this._originPlayerResizePostion,this._mainVideoContainer.replaceWith(this._mainVideo),this._resetVideoStyle(),this._player.position(...this._positionParams)}catch(e){}}constructor(e){var t=this;(0,eu._)(this,"_isDestory",!1),(0,eu._)(this,"_updateMainVideoSize",()=>{let e;if(!this._meta)return;let{x:t,y:i,w:n,h:r}=this._meta,o=this._mainVideo,{videoHeight:l,videoWidth:a}=o,{width:u,height:d}=this._player.root.getBoundingClientRect(),s=a*n,c=l*r,v=s/c,_=Number(o.dataset.rotateDeg||0),f=_%180!=0;if(0===a&&(clearTimeout(this._updateTimer),!this._isDestory&&(this._updateTimer=setTimeout(()=>{if(this._isDestory){clearTimeout(this._updateTimer);return}this._updateMainVideoSize()},100))),u/d>=(f?c/s:v)){let t=f?d/v:d*v,i={height:"100%",width:`${t}px`,left:"50%",top:"0",transform:"translateX(-50%)"};Object.assign(this._mainVideoContainer.style,i),e=f?{height:`${t/r}px`,width:`${d/n}px`}:{width:`${100/n}%`,height:`${100/r}%`}}else{let t=f?u*v:u/v,i={height:`${t}px`,width:"100%",left:"0",top:"50%",transform:"translateY(-50%)"};Object.assign(this._mainVideoContainer.style,i),e=f?{height:`${u/r}px`,width:`${t/n}px`}:{height:`${t/r}px`,width:`${100/n}%`}}let m=0===_?`translate(-${100*t}%, -${100*i}%)`:-90===_?`translate(-${(n+t)*100}%, -${100*i}%)`:-180===_?`translate(-${(n+t)*100}%, -${(r+i)*100}%)`:`translate(-${100*t}%, -${(r+i)*100}%)`;Object.assign(this._mainVideo.style,e,{rotate:_+"deg",transform:m})}),(0,eu._)(this,"_resetVideoStyle",()=>{this._mainVideo.removeAttribute("style")}),this._player=e,this._initMain(),this._originPlayerPostion=e.position,this._originPlayerResizePostion=e.resizePosition,e.position=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t._positionParams=i},e.resizePosition=()=>{}}}let ec=()=>{let{player:e}=(0,u.n)();return(0,l.useEffect)(()=>{if(e){let t=null;try{(t=new es(e)).updateMeta({x:0,y:.056,w:1,h:.844})}catch(e){}return()=>{try{null==t||t.destroy()}catch(e){}}}},[e]),null},ev=l.memo(e=>{var t,i;let{x:r,y:a,width:u,height:d,visible:s,forwardRef:c,src:_="",onPause:f,onPlay:m,onError:p,sessionId:h,resolutions:g,lowUrl:E,className:y,liveRoomMode:I,loggerOptions:M,hideControl:N=!1,useEnlarge:C=!1,focusRoom:O,basePlayerClassName:A=""}=e,[P,D]=l.useState(_),[S,b]=l.useState(h),w=(0,q.T)(),{userStore:{userInfo:x,odin:L},appStore:{isSpider:R}}=(0,T.o)();l.useEffect(()=>{if(!s){var e,t;let i=null===(t=c.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);(null==i?void 0:i.video)&&(null==i||i.position({y:0,h:1}))}},[s]),l.useMemo(()=>({resolutions:g,lowUrl:E,useArea:(null==w?void 0:w.liveUseArea)===1,useScore:!1,useLongFirstframe:!1,selectedCallback:e=>{}}),[g,E]),l.useEffect(()=>{_&&D(_)},[_]),l.useEffect(()=>{h&&b(h)},[h]);let k=(0,eo.Z)(),V=l.useMemo(()=>({url:P,autoplay:!0,muted:!0}),[P]);return P?(0,n.jsx)("div",{className:o()(er.default.liveCardPlayer,y,{[er.default.hide]:!s,[er.default.hideControl]:N}),style:{left:r,top:a},children:(0,n.jsx)("div",{className:er.default.playerWrap,style:{width:u,height:d},children:(0,n.jsxs)(en.N,{className:o()(er.default.player,A),baseConfig:V,playerRef:c,onPlaying:m,onLoadedData:m,onCanPlay:m,onPause:f,onError:p,sessionId:S,loggerOptions:(0,v._)({user_id:x.id_str,device_id:L.user_unique_id,scene:ee.C.liveCard,definition:(0,ea.iW)(P),live_type:I},(null==M?void 0:M.isH265Data)?{h265_miss:1}:{},M),role:"consumer",children:[(0,n.jsx)(et.AdaptedBySEIPlugin,{}),(0,n.jsx)(ei.PlayerLoggerPlugin,{ext:(0,v._)({_is_new_version:null!==(i=null===(t=window)||void 0===t?void 0:t.isNewVersionFirstOpen)&&void 0!==i?i:"",enter_from_merge:(0,el.vM)(),enter_method:"web_card",is_preview:1},k)}),C&&O&&(0,n.jsx)(ec,{})]})})}):null});var e_=i("554425"),ef=i("885714"),em=e=>{let{abtestData:t,tab:i,url:n,data:r,default_qulity:o}=e,[a,u]=l.useState(!1),{isFeedH265:d,addH265ErrorNum:s,resetH265ErrorNum:c}=(0,ef.Z)({abtestData:t,tab:i});return{playerUrl:l.useMemo(()=>{if(d&&r&&!a){var e,t;let i=(0,ea.i4)(null==r?void 0:null===(e=r.live_core_sdk_data)||void 0===e?void 0:e.pull_data,o)||(0,ea.i4)(null==r?void 0:null===(t=r.live_core_sdk_data)||void 0===t?void 0:t.pull_data);if(i)return i}return n},[n,d,r,a]),isH265Err:a,isFeedH265:d,setIsH265Err:u,addH265ErrorNum:s,resetH265ErrorNum:c}},ep=i("489231"),eh=i("755111"),eg=i("408487"),eE=i("627806");let ey=l.memo(e=>{let{x:t,y:i,width:r,height:l,visible:a,className:u,content:d}=e;return(0,n.jsx)("div",{className:o()(eE.default.liveCardPlayer,u,{[eE.default.hide]:!a}),style:{left:t,top:i},children:(0,n.jsx)("div",{className:eE.default.coverWrapper,style:{width:r,height:l},children:(0,n.jsx)("div",{className:eE.default.playerContainerUnsupportText,children:d||"直播连麦中"})})})});var eI=i("948375"),eM=i("831202"),eN=i("782563"),eC=function(){var e,t,i,r,o,a;let{onPlay:u,className:d,useEnlarge:c,basePlayerClassName:v,useReact:_}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[f,m]=l.useState({x:0,y:0,width:0,height:0}),[p,h]=l.useState(!1),[g,E]=l.useState(),[y,I]=l.useState(!1),M=l.useRef({}),[N,C]=l.useState(""),{appStore:{isSpider:O}}=(0,T.o)(),P=(0,q.T)(),D=l.useRef(0),S=(0,eI.Z)(()=>{if(h(!1),M.current){var e,t;let i=null==M?void 0:null===(t=M.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);i&&(i.pause(),E(void 0))}}),b=(0,eI.Z)((e,t,i)=>{if(!e.streamSrc&&s.ZN.error(eM.Mo.LiveStreamEmpty,{content:{logId:e.requestId,stream_url:e.room.stream_url,is_client:(0,eN.DT)(),room_id:e.room.id_str}}),S(),1!==Number(A()(e,"room.paid_live_data.paid_type",0)))(()=>{let n=t.current;if(!n)return;let r=null==i?void 0:i.current;setTimeout(()=>{E(e)},0),D.current+=1;let o=n.offsetTop;r&&(o=n.offsetTop+(null==r?void 0:r.clientHeight)),_&&(o=n.getBoundingClientRect().top),m({x:n.offsetLeft,y:o,width:Math.floor(n.offsetWidth),height:Math.floor(n.offsetHeight)-1}),h(!0),setTimeout(()=>{if(M.current){var e,t;let i=null==M?void 0:null===(t=M.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);i&&i.paused&&i.retry()}},0)})()}),w=(0,eI.Z)(()=>{!y&&(null==u||u(g)),I(!0)}),x=(0,eI.Z)(()=>{I(!1)}),L=l.useMemo(()=>{var e,t,i,n,r;let o=null==g?void 0:null===(t=g.room)||void 0===t?void 0:null===(e=t.stream_url)||void 0===e?void 0:e.live_core_sdk_data;if(o)try{return null===(n=JSON.parse(null==o?void 0:null===(r=o.pull_data)||void 0===r?void 0:r.stream_data))||void 0===n?void 0:null===(i=n.common)||void 0===i?void 0:i.session_id}catch(e){}return""},[g]),R=l.useMemo(()=>{try{var e,t,i,n;if(!g||(null==P?void 0:P.liveUseArea)!==1)return null;let r=JSON.parse(null==g?void 0:null===(n=g.room)||void 0===n?void 0:null===(i=n.stream_url)||void 0===i?void 0:null===(t=i.live_core_sdk_data)||void 0===t?void 0:null===(e=t.pull_data)||void 0===e?void 0:e.stream_data),o=null==r?void 0:r.data;return Object.keys(o).filter(e=>"ao"!==e).map(e=>{let t;try{t=JSON.parse(o[e].main.sdk_params)}catch(e){t={resolution:"0x0"}}return{quality:e,resolution:t.resolution,url:(0,J.f)(o[e].main.flv)}})}catch(e){return null}},[g,P]),k=l.useMemo(()=>{try{var e,t,i,n;let r=JSON.parse(null==g?void 0:null===(n=g.room)||void 0===n?void 0:null===(i=n.stream_url)||void 0===i?void 0:null===(t=i.live_core_sdk_data)||void 0===t?void 0:null===(e=t.pull_data)||void 0===e?void 0:e.stream_data);return(0,e_.bJ)(null==r?void 0:r.data,"md")||(0,e_.bJ)(null==r?void 0:r.data,"ld")}catch(e){return""}},[g,P]),V=l.useMemo(()=>{try{var e,t,i,n,r,o,l,a,u,d,s,c;let v=null==g?void 0:null===(n=g.room)||void 0===n?void 0:null===(i=n.stream_url)||void 0===i?void 0:null===(t=i.live_core_sdk_data)||void 0===t?void 0:null===(e=t.pull_data)||void 0===e?void 0:e.options,_=JSON.parse((null==g?void 0:null===(a=g.room)||void 0===a?void 0:null===(l=a.stream_url)||void 0===l?void 0:null===(o=l.live_core_sdk_data)||void 0===o?void 0:null===(r=o.pull_data)||void 0===r?void 0:r.stream_data)||"{}"),f=(null==_?void 0:_.data)||{},m=A()(v,"default_quality",{});if(null===(d=f[null==m?void 0:m.sdk_key])||void 0===d?void 0:null===(u=d.main)||void 0===u?void 0:u.flv)return(0,J.f)(null===(c=f[null==m?void 0:m.sdk_key])||void 0===c?void 0:null===(s=c.main)||void 0===s?void 0:s.flv);return null==g?void 0:g.streamSrc}catch(e){return null==g?void 0:g.streamSrc}},[g]),j=l.useMemo(()=>{var e,t,i,n,r,o;let{isVipLive:l}=(0,eh.Rk)(null==g?void 0:null===(e=g.room)||void 0===e?void 0:e.paid_live_data),a=(null==g?void 0:null===(i=g.room)||void 0===i?void 0:null===(t=i.linker_detail)||void 0===t?void 0:t.linker_ui_layout)||0;return l?(C("会员直播中"),!1):-1===eg.PG.indexOf(a)&&(((null==g?void 0:null===(r=g.room)||void 0===r?void 0:null===(n=r.linker_detail)||void 0===n?void 0:n.linker_play_modes)||[]).forEach(e=>{if(-1!==eg.NS.indexOf(e))return!1}),Number(null==g?void 0:null===(o=g.room)||void 0===o?void 0:o.live_room_mode)!==W.ke.AUDIO&&!0)},[g]);l.useEffect(()=>{!j&&I(!0)},[j]);let F=new X.xb(A()(g,"room",{})).getCurrResolution(),G=null==g?void 0:null===(i=g.room)||void 0===i?void 0:null===(t=i.others)||void 0===t?void 0:null===(e=t.web_data)||void 0===e?void 0:e.additional_stream_url,{playerUrl:U,isH265Err:z,isFeedH265:B,setIsH265Err:H}=em({abtestData:P,tab:"category",url:k,data:G,default_qulity:"ld"}),{playerUrl:Z}=em({abtestData:P,tab:"category",url:V,data:null==g?void 0:null===(a=g.room)||void 0===a?void 0:null===(o=a.others)||void 0===o?void 0:null===(r=o.web_data)||void 0===r?void 0:r.additional_stream_url}),Y=(0,eI.Z)(e=>{if(B&&!z){var t,i,n,r;null==M||null===(r=M.current)||void 0===r||null===(n=r.getPlayerLogger)||void 0===n||null===(i=n.call(r))||void 0===i||null===(t=i.updateExt)||void 0===t||t.call(i,{h265_degrade:1}),H(!0)}}),K=l.useMemo(()=>{var e,t,i;let n=null==g?void 0:g.room;if(!n||!c)return!1;null==n||null===(e=n.linker_detail)||void 0===e||e.linker_ui_layout;let r=(null==n?void 0:null===(t=n.linker_detail)||void 0===t?void 0:t.linker_play_modes)||[],o=null==n?void 0:null===(i=n.stream_url)||void 0===i?void 0:i.extra,l=r.length>0,a=(null==o?void 0:o.height)/(null==o?void 0:o.width)>=1.48,u=(null==n?void 0:n.live_room_mode)===W.ke.MEDIA,d=Number(null==n?void 0:n.live_room_mode)===W.ke.AUDIO,{isVipLive:s}=(0,eh.Rk)(null==n?void 0:n.paid_live_data);return!(l||!a||u||d||s)},[null==g?void 0:g.room,c]),$=(0,eI.Z)(()=>{var e,t,i,r,o,l,a,u,s,c,_,m,h,E,I,C;if(!g)return null;let O=g?U||(null==g?void 0:g.streamSrc)||(null==F?void 0:null===(e=F.current)||void 0===e?void 0:e.url)||"default":"",A=`${null!==(C=null==g?void 0:null===(t=g.room)||void 0===t?void 0:t.id_str)&&void 0!==C?C:"live-card"}-${O}`;return j?(0,n.jsx)(ev,{forwardRef:M,x:f.x,y:f.y,width:f.width,height:f.height,visible:p&&y,onPlay:w,onPause:x,sessionId:L,resolutions:R,lowUrl:k,src:O,className:d,onError:Y,liveRoomMode:null==g?void 0:null===(i=g.room)||void 0===i?void 0:i.live_room_mode,loggerOptions:{is_game:null==g?void 0:null===(l=g.room)||void 0===l?void 0:null===(o=l.game_data)||void 0===o?void 0:null===(r=o.game_tag_info)||void 0===r?void 0:r.is_game,is_shopping:!!(null==g?void 0:null===(s=g.room)||void 0===s?void 0:null===(u=s.toolbar_data)||void 0===u?void 0:null===(a=u.entrance_list)||void 0===a?void 0:a.find(e=>e.component_type===ep.Ls.Cart)),isH265Data:!!G,anchor_id:null==g?void 0:null===(_=g.room)||void 0===_?void 0:null===(c=_.owner)||void 0===c?void 0:c.anchor_id,room_id:null==g?void 0:null===(m=g.room)||void 0===m?void 0:m.id_str,is_all_265:!((0,ea.ld)(null==g?void 0:g.stream_url)||(0,ea.ld)(null==g?void 0:null===(I=g.room)||void 0===I?void 0:null===(E=I.others)||void 0===E?void 0:null===(h=E.web_data)||void 0===h?void 0:h.additional_stream_url))},focusRoom:g,hideControl:!0,useEnlarge:K,basePlayerClassName:v},A):(0,n.jsx)(ey,{x:f.x,y:f.y,width:f.width,height:f.height,visible:p&&y,content:N})}),Q=(0,eI.Z)(()=>{var e,t,i,r,o,l,a,u,s,c,_,m;if(!g)return null;let h=Z||(null==g?void 0:g.streamSrc)||(null==F?void 0:null===(e=F.current)||void 0===e?void 0:e.url)||"default",E=`${null!==(m=null==g?void 0:null===(t=g.room)||void 0===t?void 0:t.id_str)&&void 0!==m?m:"live-card"}-${h}`;return j?(0,n.jsx)(ev,{forwardRef:M,x:f.x,y:f.y,width:f.width,height:f.height,visible:p&&y,onPlay:w,onPause:x,sessionId:L,resolutions:R,lowUrl:k,src:h,className:d,onError:Y,focusRoom:g,isGame:null==g?void 0:null===(o=g.room)||void 0===o?void 0:null===(r=o.game_data)||void 0===r?void 0:null===(i=r.game_tag_info)||void 0===i?void 0:i.is_game,isShopping:!!(null==g?void 0:null===(u=g.room)||void 0===u?void 0:null===(a=u.toolbar_data)||void 0===a?void 0:null===(l=a.entrance_list)||void 0===l?void 0:l.find(e=>e.component_type===ep.Ls.Cart)),isH265Data:!!(null==g?void 0:null===(_=g.room)||void 0===_?void 0:null===(c=_.others)||void 0===c?void 0:null===(s=c.web_data)||void 0===s?void 0:s.additional_stream_url),hideControl:!0,useEnlarge:K,basePlayerClassName:v},E):(0,n.jsx)(ey,{x:f.x,y:f.y,width:f.width,height:f.height,visible:p&&y,content:N})});return{cardPlayerRef:M,renderLivePlayer:$,renderLivePlayerHigh:Q,onRoomFocus:b,onRoomBlur:S,isPlay:y,focusRoom:g}},eO=i("819972"),eA=i("81947");let eP=()=>{let[e,t]=l.useState(3),i=l.useCallback(e=>e<=1140?2:3,[]),n=l.useCallback(()=>{t(i(window.innerWidth))},[i]);return l.useEffect(()=>(n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[n]),{columnsNum:e}};var eD=(0,h.Pi)(e=>{var t;let{rooms:i=[],disableLiveRecommendOnEnd:r=!1}=e,{columnsNum:o}=eP(),[a,u]=l.useState(i),{hoverId:d,onCardMouseEnter:s,onCardMouseLeave:c}=y(),{userStore:{userInfo:f},roomStore:{roomInfo:m,liveStatus:p,foldChatroom:h},eventStore:{playerEvent:g,userEvent:E,vsEvent:I}}=(0,T.o)(),{renderLivePlayer:M,onRoomBlur:N,onRoomFocus:C,isPlay:O}=eC();l.useEffect(()=>{u(i)},[i]);let P=l.useCallback(()=>{c(),N&&N()},[N,c]),D=l.useCallback(e=>{var t;let i=(0,K.v6)({id_str:A()(e,"room.id_str",""),type:1}),n=(0,K.v6)(A()(m,"partition_road_map.partition")),r=(0,K.bz)(i,n),o=(0,K.bz)(i,n),l=Y.iT.WEB_CLOSED_PAGE;return(0,v._)({anchor_id:A()(e,"room.owner.id_str",""),room_id:A()(e,"room.id_str",""),web_live_page:r,web_live_tab:o,enter_from_merge:l,enter_method:Y.QX.CARD,game_name:A()(e,"tag_name",""),live_type:"game",is_aweme_tied:f.id_str?1:0,game_live_source:"game_web",more_detail:"",request_id:e.requestId},null!==(t=null==I?void 0:I.getShowEventParams(e))&&void 0!==t?t:{})},[f,m]),S=l.useCallback(e=>()=>{let t=D(e);null==g||g.liveShowEvent((0,_._)((0,v._)({},t),{live_status:W.EY[p]||"normal",is_comments_fold:h?1:0}))},[D]),b=l.useCallback(e=>()=>{let t=D(e);null==E||E.liveCardClickEvent(t),P()},[P,D]),w=(null===(t=m.room)||void 0===t?void 0:t.live_room_mode)===W.ke.MEDIA;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:Z.default.header,children:[(0,n.jsx)("span",{className:Z.default.linel}),(0,n.jsxs)("div",{className:Z.default.text,children:["直播已结束",w||r?"":"，猜你喜欢"]}),(0,n.jsx)("span",{className:Z.default.liner})]}),!w&&!r&&(0,n.jsxs)("div",{className:Z.default.cardGroup,children:[M(),a.slice(0,o).map(e=>(0,n.jsx)(eO.k,{componentName:eA.l.LIVE_CARD,children:(0,n.jsx)(H,{data:e,className:Z.default.card,hideCover:O,hideTag:!1,focus:e.room.id_str===d,onCardFocus:C,onMouseEnter:()=>s(e.room.id_str),onMouseLeave:P,onClick:b(e),target:"_self",isRecommendOnEnd:!0,onLog:S(e),logParams:Q()(D(e),["enter_from_merge","enter_method","game_name","ug_source","web_live_page","web_live_tab","more_detail"])},e.room.id_str)},e.room.id_str))]})]})});let eS=e=>{let{cover:t,children:i="当前直播已结束",className:r,isLiveModal:u=!1,isPreview:v=!1,anchorSecUserId:_,playerEvent:h,isAnchorBan:g=!1,isKickOut:E=!1,roomId:y="",player:I}=e,M=(0,l.useRef)(!1),[N,C]=l.useState(3),O=(0,l.useRef)(null),[A,P]=l.useState(!0),D=l.useCallback(()=>{},[]),S=l.useMemo(()=>({}),[]),b=(0,l.useRef)(0),w=l.useMemo(()=>(0,b.current),[!1]);(0,l.useEffect)(()=>{!u&&!v&&(null==I?void 0:I.exitFullscreen)&&(null==I||I.exitFullscreen())},[]),(0,l.useEffect)(()=>{h&&i[0]===d.kx.LIVE_FINISH&&!M.current&&(null==h||h.livesdkFinishShow(),M.current=!0),h&&i[0]===d.kx.KICK_OUT&&m.emit(m.EVENT.KicKOutLive,{roomID:y}),h&&i[0]&&m.emit(m.EVENT.livePlayerEndCoverShow,{filter_detail:i[0]})},[i,y]);let x=l.useCallback(()=>{document.location.reload()},[y,!1]),{pathname:L}=(0,c.a)(),T=null==L?void 0:L.startsWith("/iframe/"),R=l.useCallback(()=>{T&&_&&(s.kg.event("iframe reflow"),window.open(`${(0,p.HC)(_)}`,"_blank"))},[T,_]),k=e=>e[0]===d.kx.KICK_OUT?(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:a.default.text,children:e}),(0,n.jsxs)("div",{className:a.default.reset,onClick:()=>x(),children:[(0,n.jsx)(f,{}),(0,n.jsx)("div",{className:a.default.resetText,children:"继续看播"})]})]}):e[0]===d.kx.ANCHOR_BAN&&g?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("img",{className:a.default.anchorBanIcon,src:"https://lf1-webcastcdn-tos.douyinstatic.com/obj/webcast/live_audience_block_warning.png"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("span",{className:a.default.text,onClick:R,children:[e,T?(0,n.jsxs)(n.Fragment,{children:["，",(0,n.jsx)("span",{style:{textDecoration:"underline"},children:"点击前往个人页"})]}):null]})}),V=(0,l.useRef)(!1);return(0,l.useEffect)(()=>()=>{clearInterval(O.current),P(!0),C(3)},[!1,E,D,w]),(0,l.useEffect)(()=>{V.current&&!E&&i[0]===d.kx.LIVE_FINISH&&(null==D||D(w)),V.current=!1},[!1,E,D,i,w]),(0,l.useEffect)(()=>m.listen(m.EVENT.DisableLeaveCountDown,()=>{clearInterval(O.current),P(!1),C(3)}),[]),(0,l.useEffect)(()=>{m.emit(m.EVENT.LivePreviewEnd,{roomID:y})},[y]),(0,n.jsxs)("div",{className:o()(a.default.errorCover,r),children:[(0,n.jsx)("img",{className:a.default.cover,src:t}),k(i),!1]})};var eb=(0,h.Pi)(()=>{let{player:e}=(0,u.n)(),{roomStore:{playerCoverText:t,roomInfo:i,isAnchorBan:r,recommendOnEndRoom:o,isMedia:l,disableLiveRecommendOnEnd:a},linkmicStore:{linkRoomType:s},eventStore:{playerEvent:c}}=(0,T.o)(),v=A()(i,"room.id_str");return t&&!(t===d.kx.ANCHOR_BAN&&s)?(0,n.jsxs)(eS,{player:e,cover:A()(i.anchor,"avatar_thumb.url_list[0]",""),playerEvent:c,isAnchorBan:r,isKickOut:t===d.kx.KICK_OUT,roomId:v,children:[((null==o?void 0:o.length)===0||l)&&t,!((null==o?void 0:o.length)===0||l)&&(0,n.jsx)(eD,{rooms:o,target:"_self",disableLiveRecommendOnEnd:a})]}):(0,n.jsx)(n.Fragment,{})})},880060:function(e,t,i){i.r(t),i.d(t,{PlayerLoggerPlugin:function(){return _}});var n=i(520739),r=i(563097),o=i(88648),l=i(393265),a=i(725215),u=i(58655),d=i(645260),s=i.n(d),c=i(859231),v=i(63002);let _=e=>{let{ext:t}=e,{logger:i}=(0,l.n)();return o.useEffect(()=>{i&&i.updateExt(t)},[t]),null};t.default=(0,a.Pi)(()=>{var e,t,i,o;let{roomStore:{roomStatus:l,roomInfo:a},eventStore:{basicEvent:d},streamStore:{streamInfoFromLiving:f,currentQuality:m},playerStore:{loggerOptions:p}}=(0,u.o)(),{common:h}=f||{},g=s()(a,"room.id_str"),E=s()(a,"web_rid"),y=s()(a,"room.live_room_mode"),I=(0,v.Z)(),M=(0,n._)({ignoreEmptyUrlUpload:l===c.LV.END||void 0===l?1:0,roomMode:y,roomId:g,webRid:E,enter_from_merge:null==d?void 0:null===(e=d.getEnterEventParams())||void 0===e?void 0:e.enter_from_merge,enter_method:null==d?void 0:null===(t=d.getEnterEventParams())||void 0===t?void 0:t.enter_method,_is_new_version:null!==(o=null===(i=window)||void 0===i?void 0:i.isNewVersionFirstOpen)&&void 0!==o?o:"",is_preview:1,definition:m},I,p);return(0,r.jsx)(_,{ext:M})})},582493:function(e,t,i){i.d(t,{k:function(){return n}}),i(88648);var n={HourRank:"__hour_rank__",FansClub:"__fans_club__",ECommerce:"__e_commerce__",ECommerceSmall:"__e_commerce_small__",WhishList:"__whish_list__",Exhibition:"__exhibition__",ECommerceCloseEvent:"__e_commerce_close__",ACTIndicatorGroup:"__act_indicator__",Vip:"__vip__",Hybrid:"__hybrid__",ChatRoom:"__chat_room__",GiftPanel:"__right_gift_panel__",CEnlargeRule:"__c_enlarge_rule__"}},466621:function(e,t,i){i.d(t,{Fk:function(){return A},Lq:function(){return P},wz:function(){return D}});var n=i(520739),r=i(878389);i(874386),i(250440),i(268917),i(110006),i(826893);var o=i(907831),l=i.n(o),a=i(645260),u=i.n(a),d=i(96008),s=i.n(d),c=i(877639),v=i.n(c),_=i(779145),f=i.n(_),m=i(88648),p=i(412679),h=i(926012),g=i(393265),E=i(779773),y=i(757980),I=i(408487),M=i(551572),N=i(83188),C=i(637005),O=i(90463);let A=(()=>{let e={};return[...Array(9)].forEach((t,i)=>{e[i]={idx:i}}),e})(),P=e=>{let t={};return[...Array(e)].forEach((e,i)=>{t[i]={idx:i}}),t},D=e=>{let{enable:t,setSeats:i,getUsers:o,getPositions:a,setLayout:d,layout:c,selfLinkMicId:_,onUsersUpdate:D,roomIdStr:S,getSeats:b,audioPower:w,linkRoomType:x="video",uiLayout:L,setUiLayout:T=s(),incomingPlayer:R=null,linkStatus:k,setIsPk:V}=e,{player:j}=(0,g.n)(),F=R||j,G=m.useRef(0),U=m.useCallback(v()((e,t)=>{var d,s;let c=o();if((null==e?void 0:e.length)===0&&(null===(d=Object.keys(c))||void 0===d?void 0:d.length)>1&&t===I.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4)return;let v=a(),_=!1,f=l()(A);if(t===I.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC||t===I.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT?f={}:t===I.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4&&(f=P(10)),e.forEach(e=>{var i,n;let r;let o=c[u()(e,"uid_str","")];"number"==typeof(null==e?void 0:e.type)&&"number"==typeof(null==o?void 0:o.link_type)&&(o.link_type=e.type),"number"==typeof(null==e?void 0:e.p)?r=e.p:"string"==typeof(null==e?void 0:e.p)?r=Number(e.p):o&&"number"==typeof o.user_position&&(r=o.user_position),[I.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC].includes(t)&&o&&"number"==typeof o.user_position&&(r=o.user_position),("number"==typeof r||"string"==typeof r)&&(f[r]={user:null!=o?o:null===(n=f[r])||void 0===n?void 0:n.user,idx:Number(r)}),(null===(i=b()[r])||void 0===i?void 0:i.linkmic_id_str)!==(null==o?void 0:o.linkmic_id_str)&&(_=!0),(!o||o.user_position!==r)&&(_=!0)}),Object.keys(v).forEach(e=>{f[e].info=(0,n._)({},v[e])}),e.length!==Object.keys(c).length&&(![I.V_.LINKMICUILAYOUT_VIDEOCHAT_ENLARGEGUEST1V6,I.V_.LINKMICUILAYOUT_VIDEOCHATFLOATWINDOWLAYOUT].includes(t)||0!==e.length)&&(_=!0),_&&D&&D(),1===Object.keys(f).length&&[I.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC,I.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT].includes(t)&&(f[1]={idx:1}),!(null===(s=f[0])||void 0===s?void 0:s.user)){let e=Object.values(c).find(e=>(null==e?void 0:e.user_position)===0),t=u()(Object.values(f).find(t=>{var i,n,r;return(null==t?void 0:null===(n=t.user)||void 0===n?void 0:null===(i=n.user)||void 0===i?void 0:i.id_str)===(null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.id_str)}),"idx",-1);t>0&&(f[t]={idx:t}),f[0]=(0,r._)((0,n._)({},f[0]),{user:e})}i(f)},500),[_,b,x]),z=m.useCallback(v()(function(e,t){var d,c;arguments.length>2&&void 0!==arguments[2]&&arguments[2];let v=o();if((null==e?void 0:e.length)===0&&(null===(d=Object.keys(v))||void 0===d?void 0:d.length)>1&&[h.yP.AUDIO_1V8,h.yP.AUDIO_GRID].includes(t))return;let _=a(),m=!1,p=l()(A);if(t===h.yP.VIDEO_DYNAMIC&&(p={}),e.forEach(e=>{var i,n,r,o,l,a,d;let c;let _=v[u()(e,"uid_str","")];if("number"==typeof(null==e?void 0:e.type)&&"number"==typeof(null==_?void 0:_.link_type)&&(_.link_type=e.type),"audio"===x&&(null==_?void 0:_.link_type)===1&&(_.link_type=2),"number"==typeof(null==e?void 0:e.p)?c=e.p:"string"==typeof(null==e?void 0:e.p)?c=Number(e.p):_&&"number"==typeof _.user_position&&(c=_.user_position),[h.yP.AUDIO_1V8,h.yP.AUDIO_GRID].includes(t)&&_&&"number"==typeof _.user_position){let e=Object.values(v).find(e=>(null==e?void 0:e.user_position)===0),t=null===(o=window)||void 0===o?void 0:null===(r=o.__STORE__)||void 0===r?void 0:null===(n=r.roomStore)||void 0===n?void 0:null===(i=n.anchor)||void 0===i?void 0:i.id_str;(null==e?void 0:null===(l=e.user)||void 0===l?void 0:l.id_str)===t&&(c=_.user_position)}if(t===h.yP.VIDEO_1V6){let e=f()(v);(null==e?void 0:e.some(e=>{var t,i;return null==e?void 0:null===(i=e.content)||void 0===i?void 0:null===(t=i.linkmic_audience_content)||void 0===t?void 0:t.is_enlarged}))?s()():c+=1}else t===h.yP.VIDEO_1V8?c+=1:t===h.yP.VIDEO_DYNAMIC_FLOAT?c+=1:t===h.yP.VIDEO_6V6&&(c=({0:0,1:1,2:6,3:7,4:2,5:3,6:8,7:9,8:4,9:5,10:10,11:11})[c]);("number"==typeof c||"string"==typeof c)&&(t===h.yP.VIDEO_DYNAMIC?_&&(p[c]={user:_,idx:Number(c)}):p[c]={user:null!=_?_:null===(a=p[c])||void 0===a?void 0:a.user,idx:Number(c)}),void 0!==t&&(null===(d=b()[c])||void 0===d?void 0:d.linkmic_id_str)!==(null==_?void 0:_.linkmic_id_str)&&(m=!0),(!_||_.user_position!==c)&&(m=!0)}),Object.keys(_).forEach(e=>{p[e].info=(0,n._)({},_[e])}),e.length!==Object.keys(v).length&&(t!==h.yP.VIDEO_1V6||0!==e.length)&&(m=!0),m&&D&&D(),1===Object.keys(p).length&&t===h.yP.VIDEO_DYNAMIC&&(p[1]={idx:1}),!(null===(c=p[0])||void 0===c?void 0:c.user)){let e=Object.values(v).find(e=>(null==e?void 0:e.user_position)===0),t=u()(Object.values(p).find(t=>{var i,n,r;return(null==t?void 0:null===(n=t.user)||void 0===n?void 0:null===(i=n.user)||void 0===i?void 0:i.id_str)===(null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.id_str)}),"idx",-1);t>0&&(p[t]={idx:t}),p[0]=(0,r._)((0,n._)({},p[0]),{user:e})}i(p)},500),[_,b,x]),B=m.useCallback(e=>{e.forEach(e=>{let t=u()(e,"uid_str","");if(0!==e.talk)try{null==w||w.push(t,e)}catch(e){}})},[w]),H=m.useCallback(e=>{d(e),D&&D()},[D,d]),Z=m.useCallback(e=>{if(100===(e=e.detail||e).code&&!!t)try{let t=new TextDecoder().decode(e.content),n=(0,E.KR)(t);if(n&&n.app_data){let e=JSON.parse(n.app_data);if(G.current>e.timestamp)return;G.current=e.timestamp;let{ui_layout:t}=e;if((0,M.D)().includes(Number(t))){let i=(0,N.M2)(Number(t));c!==i&&H(i),U(e.grids,t),B(e.grids)}else switch(e.ver){case y.t.AUDIO_TALK_ROOM:c!==h.yP.AUDIO_1V8&&c!==h.yP.AUDIO_GRID&&H(h.yP.AUDIO_1V8),z(e.grids,h.yP.AUDIO_1V8),B(e.grids);break;case y.t.AUDIO_TALK_ROOM_1V8:c!==h.yP.AUDIO_1V8&&H(h.yP.AUDIO_1V8),z(e.grids,h.yP.AUDIO_1V8),B(e.grids);break;case y.t.VIDEO_TALK_ROOM:case y.t.VIDEO_EQUAL:c!==h.yP.VIDEO_GRID&&H(h.yP.VIDEO_GRID),z(e.grids,h.yP.VIDEO_GRID),B(e.grids);break;case y.t.VIDEO_DYNAMIC:c!==h.yP.VIDEO_DYNAMIC&&H(h.yP.VIDEO_DYNAMIC),z(e.grids,h.yP.VIDEO_DYNAMIC),B(e.grids);break;case y.t.VIDEO_DYNAMIC_FLOAT:c!==h.yP.VIDEO_DYNAMIC_FLOAT&&H(h.yP.VIDEO_DYNAMIC_FLOAT),z(e.grids,h.yP.VIDEO_DYNAMIC_FLOAT),B(e.grids);break;case y.t.VIDEO_C:c!==h.yP.VIDEO_1_V_8&&H(h.yP.VIDEO_1_V_8),z(e.grids,h.yP.VIDEO_1_V_8),B(e.grids);break;case y.t.VIDEO_DYNAMIC_1V6:c!==h.yP.VIDEO_1_V_6&&H(h.yP.VIDEO_1_V_6),z(e.grids,h.yP.VIDEO_1_V_6),B(e.grids);break;case y.t.VIDEO_DYNAMIC_1V3:c!==h.yP.VIDEO_1_V_3&&H(h.yP.VIDEO_1_V_3),z(e.grids,h.yP.VIDEO_1_V_3),B(e.grids);break;case y.t.VIDEO_T1B8:c!==h.yP.VIDEO_T1_V_B8&&H(h.yP.VIDEO_T1_V_B8),z(e.grids,h.yP.VIDEO_T1_V_B8),B(e.grids);break;case y.t.C_VIDEO_CAMERA:case y.t.VIDEO_CAMERA_NEW:c!==h.yP.VIDEO_1V6&&H(h.yP.VIDEO_1V6),z(e.grids,h.yP.VIDEO_1V6),B(e.grids);break;case y.t.VIDEO_1V8:c!==h.yP.VIDEO_1V8&&H(h.yP.VIDEO_1V8),z(e.grids,h.yP.VIDEO_1V8),B(e.grids);break;case y.t.VIDEO_2V4v4:c!==h.yP.VIDEO_2V4V4&&H(h.yP.VIDEO_2V4V4),z(e.grids,h.yP.VIDEO_2V4V4),B(e.grids);break;case y.t.VIDEO_6V6:c!==h.yP.VIDEO_6V6&&H(h.yP.VIDEO_6V6),S&&S===e.channel_id&&z(e.grids,h.yP.VIDEO_6V6),B(e.grids);break;case y.t.MULTI_ANCHOR:case y.t.PK:null==V||V(!0),c&&H(void 0);break;default:c&&H(void 0),null==V||V(!1)}}else{var i;(null==n?void 0:null===(i=n.source)||void 0===i?void 0:i.includes("TTLiveSDK"))&&H(void 0)}n&&n.audio_subtitle&&k!==O.cK.LINKED&&C.emit(C.EVENT.AudioStageUpdate,n.audio_subtitle)}catch(e){}},[z,S,c,H,B,t,U,L,T,k]);return m.useEffect(()=>(null==F||F.on(p.FP.SEI,Z),()=>{null==F||F.off(p.FP.SEI,Z)}),[F,Z,t]),null}},852735:function(e,t,i){i(874386);var n=i(563097),r=i(88648),o=i(759797),l=i(637005),a=i(411362),u=i(645260),d=i.n(u),s=i(115979);let c=e=>{let t=String(Math.floor(100+Math.floor(e%60))).slice(1),i=String(100+Math.floor(e/60)).slice(1);return`${i}:${t}`};t.Z=e=>{let{paidLiveData:t,showCountDown:i=!1,top:u=16,left:v=16,showTag:_=!0,isFirstLive:f=!1}=e,[m,p]=r.useState(0),h=Number(d()(t,"paid_type",0))===o.PAID_LIVE_TYPE.PAID_LIVE,g=d()(t,"ticket_session.ticket_session_id_str","");return r.useEffect(()=>{let e=l.listen(l.EVENT.paidLiveDuration,e=>{h&&(null==e?void 0:e.ticket_id_str)&&e.ticket_id_str===g&&p(null==e?void 0:e.last_time)});return()=>e()},[g,h]),(0,n.jsxs)("div",{className:s.default.Tag,style:{top:u,left:v},children:[_&&(0,n.jsx)(a.jR,{isFirstLive:f}),i&&m>0&&(0,n.jsxs)("div",{className:s.default.countDown,children:["试看中 ",c(m)]})]})}},950022:function(e,t,i){i.d(t,{gE:function(){return k},NM:function(){return j},Z4:function(){return z},yG:function(){return L},zS:function(){return x},L4:function(){return V},BC:function(){return G},sk:function(){return U},B7:function(){return B}}),i("874386");var n=i("563097"),r=i("88648"),o=i("737074"),l=i("158041"),a=i("668974"),u=i("234358"),d=i("96008"),s=i.n(d),c=i("797973"),v=i("38555"),_=i("90072"),f=i("58655"),m=i("520739"),p=i("309931"),h=i("624114"),g=i("485019"),E=i("713097"),y=i.n(E),I=i("237987"),M=i("429793");function N(){var e,t;let{singletonStore:{message:i},eventStore:{pkEvent:o}}=(0,f.o)(),{pipWin:l}=(0,g.ds)(),a=(0,r.useRef)(s()),u=r.useRef(null),[d,c]=(0,r.useState)(null),v=j(),_=null==d?void 0:null===(t=d.animation)||void 0===t?void 0:null===(e=t.url_list)||void 0===e?void 0:e[0],E=(null==d?void 0:d.status)!==1;return(0,r.useEffect)(()=>{if(!!v)return null==i?void 0:i.on("BattleDrawPropMessage",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{payload:t}=e[0];t&&c(t)})},[i,v]),(0,r.useEffect)(()=>{var e;if(!_)return;let t=null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect(),i=(null==l?void 0:l.document)||document,r=i===document?(0,M.EF)(h.q):i.getElementById(h.q),v=E?t:(null==r?void 0:r.getBoundingClientRect())||t;if(!v||!t)return;let f=i.createElement("div");i.body.appendChild(f);let g=()=>{try{var e;null===(e=f.parentElement)||void 0===e||e.removeChild(f),(0,p.unmountComponentAtNode)(f),c(null),a.current=s()}catch(e){}};return a.current=g,(0,p.render)((0,n.jsx)("div",{className:y()(I.default.propDraw,(!!(null==l?void 0:l.document)||E)&&I.default.propDrawFail),style:{"--originx":`${t.x+t.width/2}px`,"--originy":`${t.y+t.height/2}px`,"--targetx":`${v.x+v.width/2}px`,"--targety":`${v.y+v.height/2-(v!==t?18:0)}px`},onAnimationEnd:()=>{g()},children:(0,n.jsx)("img",{src:_})}),f),window.collectEvent("livesdk_connection_get_buffer_card_result_show",(0,m._)({get_type:(null==d?void 0:d.reason)===1?"mvp":"high_money",is_get_buffer_card:Number(!E),prop_id:null==d?void 0:d.prop_id},null==o?void 0:o.getPKPropCardCommonParams())),()=>{g()}},[_,E]),(0,r.useEffect)(()=>()=>{a.current()},[]),(0,n.jsx)("div",{className:I.default.propDrawAnchor,ref:u})}var C=i("725215"),O=i.p+"media/fogBothBar.07d92082d098c2bd.webp",A=i.p+"media/fogRightBar.5b1800de8c8d5b6a.webp",P=i.p+"media/leftFreezeBar.11e1c2e40e020858.webp",D=i.p+"media/rightFreezeBar.7ffcfffbdaaa6946.webp";let S={enablePropCard:!1,anchorEffectInfoMap:{},inEffectAnchorEffectInfoMap:{},openPropCardDesc:s(),openPropCardRules:s(),setFakePropInfo:s(),updateAnchorEffectInfoMapByJSON:s()},b=(0,l.kr)(S),w=e=>{let t=(0,u.dP)(e),[i,n]=(0,r.useState)({}),o=(0,c.Z)(()=>{n(t=>(0,u.PG)(e,t,!0))});return(0,v.Z)(()=>{o()},t?void 0:1e3,{immediate:!0}),(0,r.useEffect)(()=>{o()},[e]),i},x=(0,r.memo)((0,C.Pi)(e=>{let{children:t}=e,{singletonStore:{message:i},pkStore:{pkId:l,pkCountDown:a,isInPK:d}}=(0,f.o)(),[s,v]=(0,r.useState)(null),[_,m]=(0,r.useState)({}),p=(0,c.Z)(e=>{if(!e){m({});return}m((0,u.x$)(e))});(0,r.useEffect)(()=>{d||m({})},[d]),(0,r.useEffect)(()=>{null==i||i.on("BattleEffectContainerMessage",e=>{var t,i;let n=null===(i=e.find(e=>{var t;return(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.battle_id)===l}))||void 0===i?void 0:null===(t=i.payload)||void 0===t?void 0:t.battle_effect_info;n&&p(n)}),null==i||i.on("BattleUpdatePropCardTaskMessage",e=>{var t,i;let n=null===(i=e.find(e=>{var t;return(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.battle_id)===l}))||void 0===i?void 0:null===(t=i.payload)||void 0===t?void 0:t.battle_effect_info;n&&p(n)})},[i,l]),(0,r.useEffect)(()=>{!a&&m({})},[!a]);let h=(0,u.dP)(_);(0,r.useEffect)(()=>{if(h)return;let e=o.Z.setIntervalWarp(()=>{m(e=>(0,u.PG)(e,e))});return()=>{o.Z.clearIntervalWarp(e)}},[h]);let g=d?_:{},E=w(g);return(0,n.jsxs)(b.Provider,{value:{anchorEffectInfoMap:g,inEffectAnchorEffectInfoMap:E,openPropCardDesc:()=>{},openPropCardRules:()=>{},fakePropInfo:s,setFakePropInfo:v,updateAnchorEffectInfoMapByJSON:p,enablePropCard:!0},children:[t,(0,n.jsx)(N,{})]})})),L=(0,a.Z)(b),T=()=>L(e=>e.anchorEffectInfoMap),R=()=>L(e=>e.inEffectAnchorEffectInfoMap),k=e=>{let t=R();return(0,r.useMemo)(()=>{var i,n;return(null==t?void 0:null===(n=t[e])||void 0===n?void 0:null===(i=n[u.du.FreezeBuff])||void 0===i?void 0:i.length)>0},[e,t])},V=e=>L(t=>(0,u.PL)(e,t.anchorEffectInfoMap)),j=()=>L(e=>e.enablePropCard),F=e=>{var t;let i=R();return((null==i?void 0:null===(t=i[e])||void 0===t?void 0:t[u.du.Fog])||[]).length>0},G=()=>{let e=R();return(0,r.useMemo)(()=>(0,u.To)(e),[e])},U=e=>{let t=F(e);return{isAnchorInFog:t,isSomeAnchorInSuperFogEffect:!!G()}},z=e=>{let{leftAnchorIdList:t=[],rightAnchorIdList:i=[]}=e,n=T(),o=R(),l=L(e=>e.fakePropInfo),{fakeEffect:a,fakeEffectIsSuperFog:d}=(0,r.useMemo)(()=>{let e={fakeEffect:void 0,fakeEffectIsSuperFog:!1},{type:i,sendTime:r}=l||{};if(!i)return e;for(let e of t){var o,a;let t=null==n?void 0:null===(a=n[e])||void 0===a?void 0:null===(o=a[i])||void 0===o?void 0:o.find(e=>Number(null==e?void 0:e.insert_time)>=r);if(t)return{fakeEffect:t,fakeEffectIsSuperFog:(null==t?void 0:t.is_super_prop)&&(0,u.q7)(null==t?void 0:t.type)}}return e},[n,l,t]),s=G(),c=d?a:s,v=!!c,{leftEffectInfo:_,rightEffectInfo:f,repeatedEffect:m}=(0,r.useMemo)(()=>{let e=e=>{if(!e||!(0,u.gQ)(e))return null;for(let r of t){var i,n;let t=null==o?void 0:null===(n=o[r])||void 0===n?void 0:null===(i=n[null==e?void 0:e.type])||void 0===i?void 0:i.find(t=>(null==t?void 0:t.insert_time)!==(null==e?void 0:e.insert_time));if(t)return t}},n=(()=>{for(let e of t){let{firstEffect:t}=(0,u.PL)(e,o);if(t)return t}})();if((!n||(0,u.q7)(null==n?void 0:n.type))&&c||d)return{leftEffectInfo:c,rightEffectInfo:c,repeatedEffect:e(c)};let r=a||n;return{leftEffectInfo:r,rightEffectInfo:(()=>{for(let n of i){var e,t;let i=null===(e=(0,u.Md)({anchorId:n,anchorEffectInfoMap:o,type:u.du.FreezeBuff}))||void 0===e?void 0:e[0];if(i)return i;let r=null===(t=(0,u.Md)({anchorId:n,anchorEffectInfoMap:o,type:1}))||void 0===t?void 0:t[0];if(r)return r}})(),repeatedEffect:r?e(r):null}},[o,t,i,c,a,d]),p=(0,u.FD)(_),h=(0,u.FD)(f),g=(0,u.FD)(m).barIcon,E=(0,u.q7)(null==_?void 0:_.type),y=(0,u.q7)(null==f?void 0:f.type),I=(0,u.W5)(null==_?void 0:_.type),M=(0,u.W5)(null==f?void 0:f.type),N=M?h.barIcon:p.barIcon,C=E||y||v,S=!_&&y,[b,w]=(0,r.useMemo)(()=>I&&M?[P,D]:I&&!M?[P,void 0]:!I&&M?[void 0,D]:E&&y?[O,O]:E&&!y?[null==p?void 0:p.barAuraIcon,void 0]:!_&&y?[void 0,A]:[null==p?void 0:p.barAuraIcon,void 0],[_,f,v]),x=!w&&h.barMiniIcon;return{leftEffectInfo:_,rightEffectInfo:f,needPkBarAlignCenter:C,needHideCenterIcon:S,centerIcon:N,leftAuraUrl:b,rightAuraUrl:w,rightMiniIcon:x,hideRightScore:(0,r.useMemo)(()=>v||i.some(e=>{var t;return null===(t=(0,u.Md)({anchorId:e,anchorEffectInfoMap:o,type:1}))||void 0===t?void 0:t.length}),[i,o,v]),hideLeftScore:v,isSomeAnchorInSuperFogEffect:v,repeatedCenterIcon:g}},B=e=>{let{anchorId:t,showSelfFrezze:i}=e,{firstEffect:n,effectList:o,anchorEffectMap:l}=V(t),{tipText:a,targetEndTime:d,count:s,value:c}=(0,r.useMemo)(()=>{var e,t,r,a,d,s;if(!n)return{tipText:null,targetEndTime:null};let c=null===(e=l[u.du.FreezeBuff])||void 0===e?void 0:e[0];if(c){let e=(null===(r=c.prop_card_task)||void 0===r?void 0:r.current_value_str)||(null===(a=c.prop_card_task)||void 0===a?void 0:a.current_value)||"0",t=null===(d=c.prop_card_task)||void 0===d?void 0:d.effect_num;return{tipText:i?"你的待解冻值":"定身",count:t,value:e,totalValue:(null===(s=c.prop_card_task)||void 0===s?void 0:s.total_value)||e}}let{name:v,type:_,is_super_prop:f}=n,m=Object.entries(l).some(e=>{let[t,i]=e;return Number(t)!==_&&(null==i?void 0:i.length)}),p=null===(t=l[_])||void 0===t?void 0:t.some(e=>e.is_super_prop!==f);if(!m&&!p)return{tipText:`${v}生效中`,targetEndTime:Math.max(...l[n.type].map(e=>Number(e.end_time))),count:null};let h=(0,u.hN)(o);return{tipText:`${h?"超级":""}道具卡生效中`,targetEndTime:Math.max(...o.map(e=>Number(e.end_time))),count:o.length}},[n,i,l,o]);return{tipText:a,count:s,countDown:Math.floor((0,_.Z)({targetDate:d?new Date(d):void 0})[0]/1e3),firstEffect:n,value:c,totalValue:c}}},234358:function(e,t,i){i.d(t,{FD:function(){return y},IK:function(){return M},Md:function(){return p},PG:function(){return s},PL:function(){return v},To:function(){return f},W5:function(){return E},dP:function(){return c},du:function(){return a},gQ:function(){return _},hN:function(){return m},q7:function(){return h},sG:function(){return g},x$:function(){return d}});var n=i(520739),r=i(878389);i(527785),i(874386),i(429532),i(981168),i(673554),i(784246);var o=i(207813),l=i.n(o),a={EffectDefault:0,0:"EffectDefault",Fog:1,1:"Fog",FierceBuff:2,2:"FierceBuff",BorrowedBuff:3,3:"BorrowedBuff",FreezeBuff:4,4:"FreezeBuff"};let u={},d=e=>{try{var t;let i=JSON.parse(e);return Object.entries(null!==(t=i.anchor_effect_map)&&void 0!==t?t:{}).reduce((e,t)=>{let[i,o]=t;return Object.assign(e,{[i]:Object.entries(o.effect_map||{}).reduce((e,t)=>{let[o,a]=t,d=(null==a?void 0:a.effect_list)||[];if(4===Number(o))for(let e of a.effect_list){if(i in u&&Number(e.prop_card_task.version)<u[i]){d=d.filter(t=>!l()(t,e));continue}u[i]=Number(e.prop_card_task.version)}return(null==d?void 0:d.length)?(0,r._)((0,n._)({},e),{[o]:Array.from(d).sort((e,t)=>Number(null==t?void 0:t.is_super_prop)-Number(null==e?void 0:e.is_super_prop))}):e},{})})},{})}catch(e){return{}}},s=(e,t,i)=>{try{let o=Object.entries(e).reduce((e,t)=>{var o;let[l,a]=t,d=Object.entries(a).reduce((e,t)=>{let[o,a]=t,d=null==a?void 0:a.filter(e=>{if(4===Number(o))return(null==e?void 0:e.prop_card_task.current_value)!==0&&(null==e?void 0:e.prop_card_task.current_value_str)!=="0"||(delete u[l],!1);let t=Date.now(),n=Number(null==e?void 0:e.end_time)>=t;if(!i)return n;let r=Number(null==e?void 0:e.start_time)<=t;return n&&r});return(null==d?void 0:d.length)?(0,r._)((0,n._)({},e),{[o]:d}):e},{});return(null===(o=Object.keys(d))||void 0===o?void 0:o.length)?(0,r._)((0,n._)({},e),{[l]:d}):e},{});if(l()(o,t))return t;return o}catch(e){return{}}},c=e=>!Object.keys(e||{}).length,v=(e,t)=>{let i=t[e]||{},n=[2,3,1,4].map(e=>Array.from(i[e]||[]).sort((e,t)=>Number(null==t?void 0:t.is_super_prop)-Number(null==e?void 0:e.is_super_prop))).filter(Boolean).flat(1),r=n.find(e=>4===e.type);return{effectList:n,firstEffect:r||n[0],anchorEffectMap:i}},_=e=>{let t=Date.now();return Number(e.start_time)<=t&&Number(e.end_time)>=t},f=e=>{for(let t of Object.values(e)){let e=(t[1]||[]).find(e=>null==e?void 0:e.is_super_prop);if(e)return e}return null},m=e=>null==e?void 0:e.some(e=>null==e?void 0:e.is_super_prop),p=e=>{let{anchorId:t,anchorEffectInfoMap:i,type:n}=e;return(i[t]||{})[n]},h=e=>1===e,g=e=>2===e,E=e=>4===e,y=e=>{var t,i,n,r,o,l;let a=null==e?void 0:null===(i=e.bar_icon)||void 0===i?void 0:null===(t=i.url_list)||void 0===t?void 0:t[0],u=null==e?void 0:null===(r=e.bar_aura_url)||void 0===r?void 0:null===(n=r.url_list)||void 0===n?void 0:n[0];return{barIcon:a,barAuraIcon:u,barMiniIcon:null==e?void 0:null===(l=e.bar_min_icon)||void 0===l?void 0:null===(o=l.url_list)||void 0===o?void 0:o[0]}},I={4194:2,4195:3,4196:1},M=e=>[2,3,1].find(t=>I[e]===t)},755111:function(e,t,i){i.d(t,{BA:function(){return P},NN:function(){return D},ZP:function(){return S},Rk:function(){return A}}),i("874386");var n=i("563097"),r=i("58655"),o=i("114217"),l=i("637005"),a=i("33664"),u=i("651185"),d=i("88648"),s=i("393265"),c=i("520739"),v=i("878389");let _=(0,d.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,v._)((0,c._)({width:80,height:80,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.81 10.066a3 3 0 1 0-4.284 4.201l9.707 9.9c-7.179 0-10.822.028-13.619 1.453a13.333 13.333 0 0 0-5.827 5.827c-1.453 2.852-1.453 6.586-1.453 14.053v4c0 7.468 0 11.201 1.453 14.053a13.334 13.334 0 0 0 5.827 5.827c2.852 1.454 6.586 1.454 14.053 1.454h10.667c7.467 0 11.201 0 14.053-1.454a13.334 13.334 0 0 0 5.827-5.826c1.453-2.853 1.453-6.586 1.453-14.054v-4c0-7.467 0-11.2-1.453-14.053a13.333 13.333 0 0 0-5.827-5.827c-2.796-1.425-6.44-1.453-13.619-1.453l9.708-9.9a3 3 0 0 0-4.284-4.2L40.001 21.479 28.809 10.067zM25.833 57.5v-20h5v20h-5zm11.667-16.666v10h5v-10h-5zM49.166 57.5v-20h5v20h-5z",fill:"#fff",fillOpacity:".34"})})));var f=i("404777"),m=i("418831"),p=i("456147"),h=i("859231"),g=i("694987"),E=i("754089"),y=i("725215"),I=i("645260"),M=i.n(I),N=i("441994"),C=i("519"),O=i("655631");let A=function(e){var t,i,n,r,o;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(null==e?void 0:null===(i=e.privilege_info_map)||void 0===i?void 0:null===(t=i[101])||void 0===t?void 0:t.paid_live_type)===101,u=(null==e?void 0:null===(o=e.privilege_info_map)||void 0===o?void 0:null===(r=o[101])||void 0===r?void 0:null===(n=r.paid_live_info)||void 0===n?void 0:n.view_right)===1,d=M()(e,"max_preview_duration",0),s=M()(e,"duration",0),c=!1;return"number"==typeof d&&(c=s<(d=0===d?C.N:d)),{isVipLive:a,isVip:u,freePreview:c=c&&(null==l?void 0:l.vipFreePreview)}},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[i,n]=(0,d.useState)(!1),[r,o]=(0,d.useState)(!1),[l,a]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let i=A(e,t);n(i.isVipLive),o(i.isVip),a(i.freePreview)},[e]),{isVipLive:i,isVip:r,showBoundary:i&&!r&&!l,setIsVipLive:n,setIsVip:o,freePreview:l,setFreePreview:a}},D=()=>(0,n.jsxs)("div",{className:f.default.chatroomPanelContainer,children:[(0,n.jsx)(_,{}),(0,n.jsx)("span",{style:{marginTop:"8px"},children:"开通会员后可在直播间内互动"})]});var S=(0,y.Pi)(e=>{var t;let{paidLiveData:i,onBtnClick:c,onShowBoundary:v,messageInstance:_,isInLivingRoom:y=!1,roomInfo:I,roomId:A,roomStatus:D,customContent:S,abTestData:b}=e,{player:w}=(0,s.n)(),{isVipLive:x,isVip:L,setIsVip:T,setIsVipLive:R,freePreview:k,setFreePreview:V}=P(i,b),j=(0,r.o)(),[F,G]=(0,d.useState)(30),U=(0,d.useRef)(30),z=(0,d.useRef)(null),[B,H]=(0,d.useState)(!1),[Z,Y]=(0,d.useState)(!1),W=(0,d.useCallback)(()=>{if(0===U.current&&(null==z?void 0:z.current))return R(!1),Y(!1),clearInterval(null==z?void 0:z.current);G(--U.current)},[]),K=(0,d.useCallback)(()=>{var e,t;null===(t=window)||void 0===t||null===(e=t.location)||void 0===e||e.reload()},[A,!1]),$=(0,d.useRef)(null),Q=()=>{if(null==$?void 0:$.current){var e,t;null==w||null===(t=w.plugins)||void 0===t||null===(e=t.dynamicBg)||void 0===e||e.updateConfig({target:$.current})}};(0,d.useEffect)(()=>{H(x&&!L&&!k||Z)},[L,x,k,Z]),(0,d.useEffect)(()=>{if(!(null==b?void 0:b.vipFreePreview)&&(null==v||v(B)),B){Q();null==w||w.on("play",()=>{null==w||w.pause()}),w&&(w.play=()=>{null==w||w.pause()})}},[B,w,k]),(0,d.useEffect)(()=>{y&&_.on("ControlMessage",e=>{null==e||e.forEach(e=>{var t,i,n,r,a,d;if(Number(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.action)===h.Rz.FINISH){let e=(0,u.a)();(0,m.wt)({room_id:null==j?void 0:null===(n=j.roomStore)||void 0===n?void 0:null===(i=n.roomInfo)||void 0===i?void 0:i.roomId,sec_anchor_id:null==j?void 0:null===(d=j.roomStore)||void 0===d?void 0:null===(a=d.roomInfo)||void 0===a?void 0:null===(r=a.anchor)||void 0===r?void 0:r.sec_uid,channel:"channel_pc_web",device_type:"douyin_web",os_version:null==e?void 0:e.version_code,webcast_sdk_version:3170}).then(e=>{var t,i,n,r;if((null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:null===(t=i.guide_card_info)||void 0===t?void 0:t.card_type)===4){if(null==j?void 0:null===(r=j.vipStore)||void 0===r?void 0:r.isVip){let e=new o.v0C;e.setImRequestPath("/webcast/im/fetch/live_finish_page/"),null==e||e.start(I.roomId),Y(!0),z.current=setInterval(()=>{W()},1e3),e.on("SubscribeVipLiveMessage",()=>{null==e||e.destroy();setTimeout(()=>{K()},1e4)}),l.emit(l.EVENT.DisableLeaveCountDown,{roomID:A})}else R(!0),T(!1),l.emit(l.EVENT.DisableLeaveCountDown,{roomID:A})}else R(!1)})}})}),null==_||_.on("PaidLiveTypeModifyMessage",e=>{null==e||e.forEach(e=>{(null==e?void 0:e.method)==="WebcastPaidLiveTypeModifyMessage"&&A&&D!==h.LV.END&&(0,p.xL)({ping_type:1,paid_live_type:101,entity_id:A}).then(e=>{var t,i;(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.ret_type)!==2&&(R(!0),T(!1),V(!0))})})})},[A]);let{trigger:q}=(0,E.Z)(g.Hq);return(0,d.useEffect)(()=>{B&&q();let e=l.listen(l.EVENT.VipRechargeSuccess,()=>{(B||x&&!L&&k)&&setTimeout(()=>{K()},5e3)});return()=>null==e?void 0:e()},[B,L,x,k,K]),(0,d.useEffect)(()=>{if(B&&w){var e;null==w||null===(e=w.pause)||void 0===e||e.call(w)}},[w,B]),(0,d.useEffect)(()=>{let e=l.listen(l.EVENT.VipLivePreviewEnd,()=>{V(!1),(0,O.Z)("live")});return()=>null==e?void 0:e()},[]),(0,n.jsxs)(n.Fragment,{children:[x&&!L&&k?(0,n.jsx)(N.Z,{roomInfo:I,paidLiveData:i,player:w}):null,x&&!L&&k?(0,n.jsx)(C.Z,{isFullScreen:null==j?void 0:null===(t=j.playerStore)||void 0===t?void 0:t.isFullScreen,onBuyVip:c,maxDuration:M()(i,"max_preview_duration"),anchorName:M()(I,"anchor.nickname")}):null,B?(0,n.jsx)("div",{className:f.default.wrapper,ref:$,children:S?S:!x||L||(null==i?void 0:i.isMock)?Z?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:f.default.countDownText,children:"会员直播开启中"}),(0,n.jsx)("span",{className:f.default.countDownSubText,children:"主播正在开启会员专属直播"}),(0,n.jsxs)("span",{className:f.default.countDownSubText,children:["预计",(0,n.jsxs)("span",{style:{fontWeight:500,color:"#fff"},children:[F,"s"]}),"后直接进入"]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:f.default.main,children:"本直播为会员直播"}),(0,n.jsx)("span",{className:f.default.sub,children:"在App端购买会员后刷新该页面可观看整场直播"}),(0,n.jsx)(a.zx,{onClick:K,children:"刷新页面"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:f.default.main,children:"本直播为会员直播"}),(0,n.jsx)("span",{className:f.default.sub,children:"购买会员后可观看整场直播"}),(0,n.jsx)(a.zx,{onClick:()=>{null==c||c()},children:"开通会员"})]})}):null]})})},299271:function(e,t,i){i.d(t,{Bn:function(){return F},D$:function(){return r},I$:function(){return g},Iw:function(){return n},L:function(){return f},M4:function(){return y},Nl:function(){return o},Sx:function(){return E},W7:function(){return u},YH:function(){return m},aJ:function(){return h},aR:function(){return p},eA:function(){return l},eS:function(){return x},ec:function(){return s},f6:function(){return M},l:function(){return b},lW:function(){return w},oH:function(){return L},uV:function(){return d},vB:function(){return v},vy:function(){return c},vz:function(){return _},yv:function(){return I},z0:function(){return a}});let n=2,r={REAL:0,VIRTUAL:1},o={Common:0,IconType:1,EnterType:2,EmojiType:3,GroupType:4,CustomPrivilegeType:5,FuliType:6,LotteryType:7,VipLiveType:8,NoticeType:9,LinkmicType:10,CommonPrivilege:"CommonPrivilege",SubscribeGiftType:11,CustomPanelType:12,PriorityService:13,CustomPriceType:"CustomPriceType",VipSpace:14,Ask:15,CourseType:16,ShortVideo:17},l=[o.EmojiType,o.IconType,o.LotteryType,o.CustomPrivilegeType,o.Common,o.VipLiveType,o.PriorityService,o.GroupType],a=[o.GroupType],u={MONTH:0,QUARTER:1,YEAR:2,PURCHASE:3},d={[u.MONTH]:"月度会员",[u.QUARTER]:"季度会员",[u.YEAR]:"年度会员",[u.PURCHASE]:"月度会员"},s={[u.MONTH]:"个月",[u.QUARTER]:"个月",[u.YEAR]:"个月"},c={[u.MONTH]:"1",[u.QUARTER]:"3",[u.YEAR]:"12"},v={new:0,renew:1,rePurchase:2},_={BEFORE:1,AFTER:2,AFTER_SEVEN:3,EXPIRED_FEWDAY:4,EXPIRED:5},f={[_.BEFORE]:"nonactivated",[_.AFTER]:"activated_over_7d",[_.AFTER_SEVEN]:"activated_in_7d",[_.EXPIRED_FEWDAY]:"expired_in_14d",[_.EXPIRED]:"expired_out_14d"},m={MONTH:3,QUARTER:4,YEAR:5},p={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十"},h={NOT_APPLY:0,APPLYING:1,ALREADY_IN:2,GROUP_IS_FULL:3,APPLY_TO_JOIN:4,JOIN_NOW:5,VIEW_CONDITION:6},g={0:"申请",1:"已申请",2:"进群",3:"已满",4:"申请",5:"加入",6:"条件"},E={AUDIT_ING:1,FAIL:2,EFFECT:3,OFFLINE:4,FINISH:5,CAOGAO:6};E.AUDIT_ING,E.FAIL,E.EFFECT,E.OFFLINE,E.FINISH,E.CAOGAO;let y={UNKNOWN:0,FROM_ASK:1,FROM_SPACE:2,FROM_LIVE_FINISH_PAGE:3,FROM_COURSE_FEED:4,FROM_LIVE_FEED:5,FROM_QA_FEED:6,FROM_SPACE_FEED:7,FROM_REPLAY_OR_LIVE:8,FROM_VIDEO:9,FROM_SUPPORT_LIST:10,FROM_PRE_SUPPORT_LIST:11,FROM_FAME_SUPPORT_LIST:12};y.FROM_ASK,y.FROM_SPACE,y.FROM_COURSE_FEED,y.FROM_LIVE_FEED,y.FROM_SPACE_FEED,y.FROM_QA_FEED,y.FROM_REPLAY_OR_LIVE,y.FROM_VIDEO,y.FROM_SUPPORT_LIST,y.FROM_PRE_SUPPORT_LIST,y.FROM_FAME_SUPPORT_LIST;let I=0,M=2,N=0,C=1,O=2,A=3,P=4,D=5,S=999,b={NONE:0,NORMAL:1,DISABLE:2};b.NONE,b.NORMAL,b.DISABLE;let w={NONE:0,NORMAL:1,DONE:2,OVER:3,PENDING:4,NO_PERMISSION:5,TO_APPLY:6,APPLY_METHOD:7,VIRTUAL_DONE:"VIRTUAL_DONE",READY:9},x={[w.NONE]:"",[w.NORMAL]:"领取",[w.DONE]:"已领取",[w.OVER]:"已领完",[w.NO_PERMISSION]:"领取条件",[w.TO_APPLY]:"去连线",[w.APPLY_METHOD]:"连线方式",[w.VIRTUAL_DONE]:"领取方式"},L={ON:1,OFF:2};o.GroupType,o.PriorityService,o.VipLiveType,o.CustomPriceType,o.LinkmicType,o.CustomPrivilegeType,o.EmojiType,o.CourseType,o.Ask,o.ShortVideo;let T=0,R=1,k=2,V=3,j=4;o.CommonPrivilege,o.GroupType,o.PriorityService,o.PriorityService,o.CustomPrivilegeType;let F={[o.GroupType]:"私密圈子资源共享",[o.CustomPrivilegeType]:"灵活创建自己擅长的会员权益",[o.VipLiveType]:"仅会员可见的直播专场",[o.LinkmicType]:"付费连线直播中，会员免费连",[o.PriorityService]:"可向创作者申请提供优先服务",[o.CourseType]:"会员可享受课程免费或折扣优惠",[o.Ask]:"可与创作者进行问答互动"}},624114:function(e,t,i){i.d(t,{q:function(){return n}});let n="gift-icon-id"},694987:function(e,t,i){i.d(t,{Fg:function(){return o},Hq:function(){return l},fC:function(){return r},qo:function(){return n}});let n="short_touch_click",r="apply_link_invite",o="apply_open_camera",l="show_vip_boundry"},759419:function(e,t,i){i.d(t,{e:function(){return n}});let n=600},976976:function(e,t,i){i.d(t,{jQ:function(){return n}});var n={UnknownRule:0,0:"UnknownRule",OrderSingGiftRule:1,1:"OrderSingGiftRule",LinkmicPositionRule:2,2:"LinkmicPositionRule"}},948922:function(e,t,i){i.d(t,{L0:function(){return n},Nq:function(){return r}});var n={GuestBattlePlayerRoleNone:0,0:"GuestBattlePlayerRoleNone",GuestBattlePlayerRoleWinner:1,1:"GuestBattlePlayerRoleWinner",GuestBattlePlayerRoleLoser:2,2:"GuestBattlePlayerRoleLoser",GuestBattlePlayerRoleSecond:3,3:"GuestBattlePlayerRoleSecond",GuestBattlePlayerRoleThird:4,4:"GuestBattlePlayerRoleThird"},r={GuestBattle_NONE:0,0:"GuestBattle_NONE",GuestBattle_ON_GOING:1,1:"GuestBattle_ON_GOING",GuestBattle_SHOW_RESULT:2,2:"GuestBattle_SHOW_RESULT",GuestBattle_FINISH:3,3:"GuestBattle_FINISH",GuestBattle_PAUSE:4,4:"GuestBattle_PAUSE"}},450402:function(e,t,i){i.d(t,{W5:function(){return n},d$:function(){return r}});var n={UNKNOWN_MICROPHONE:0,0:"UNKNOWN_MICROPHONE",SILVER_MICROPHONE:1,1:"SILVER_MICROPHONE",GOLDEN_MICROPHONE:2,2:"GOLDEN_MICROPHONE"},r={NO_SINGER_STAGE:0,0:"NO_SINGER_STAGE",NO_SINGING_SINGER_STAGE:1,1:"NO_SINGING_SINGER_STAGE",SILVER_MIC_PROCESSING_STAGE:2,2:"SILVER_MIC_PROCESSING_STAGE",SILVER_MIC_COMPLETE_STAGE:3,3:"SILVER_MIC_COMPLETE_STAGE",GOLDEN_MIC_PROCESSING_STAGE:4,4:"GOLDEN_MIC_PROCESSING_STAGE",GOLDEN_MIC_COMPLETE_STAGE:5,5:"GOLDEN_MIC_COMPLETE_STAGE"}},489231:function(e,t,i){i.d(t,{Ls:function(){return n},M1:function(){return r}});var n={TUnkown:0,0:"TUnkown",Cart:1,1:"Cart",LiveItem:2,2:"LiveItem",MicroApp:3,3:"MicroApp",WelfareProject:4,4:"WelfareProject",GamePromotion:5,5:"GamePromotion",MiniGame:6,6:"MiniGame",LifeGroupon:7,7:"LifeGroupon",PaidLiveTicket:8,8:"PaidLiveTicket",LittleGame:9,9:"LittleGame",ShareComponent:20,20:"ShareComponent",IMComponent:21,21:"IMComponent",EasterEgg:22,22:"EasterEgg",Vr:23,23:"Vr",MoreComponent:24,24:"MoreComponent",ExchangeCoupon:25,25:"ExchangeCoupon",LinkmicComponent:26,26:"LinkmicComponent",LiuyanComponent:27,27:"LiuyanComponent",GiftComponent:28,28:"GiftComponent",SpeedyGift:29,29:"SpeedyGift",IncomeExchange:30,30:"IncomeExchange",RoomChannel:31,31:"RoomChannel",Operation:32,32:"Operation",SnapShot:33,33:"SnapShot",MultiCamera:34,34:"MultiCamera",Clarity:35,35:"Clarity",Anthology:36,36:"Anthology",MatchMultiCamera:37,37:"MatchMultiCamera",MultiTabs:38,38:"MultiTabs",InteractionPanel:39,39:"InteractionPanel",DecorationPanel:40,40:"DecorationPanel",Treasure:41,41:"Treasure",DouYinMultiStream:42,42:"DouYinMultiStream",Prompt:1001,1001:"Prompt",WishList:1002,1002:"WishList",GiftVote:1003,1003:"GiftVote",Manager:1004,1004:"Manager",DouPlus:1005,1005:"DouPlus",DanmakuSetting:1006,1006:"DanmakuSetting",GiftEffect:1007,1007:"GiftEffect",CleanScreen:1008,1008:"CleanScreen",CastScreen:1009,1009:"CastScreen",PadPlay:1010,1010:"PadPlay",PcPlay:1011,1011:"PcPlay",PadPcPlay:1012,1012:"PadPcPlay",PlaySetting:1013,1013:"PlaySetting",DiggShake:1014,1014:"DiggShake",WindowSetting:1015,1015:"WindowSetting",WindowPlay:1016,1016:"WindowPlay",Record:1017,1017:"Record",VipIM:1018,1018:"VipIM",Collect:1019,1019:"Collect",Definition:1020,1020:"Definition",TimingClose:1021,1021:"TimingClose",GamePointsPlay:1022,1022:"GamePointsPlay",Denounce:1023,1023:"Denounce",DisLike:1024,1024:"DisLike",OptimizeRecommend:1025,1025:"OptimizeRecommend",GiftConsumeRemind:1026,1026:"GiftConsumeRemind",MinorRefund:1027,1027:"MinorRefund",Renqibao:1028,1028:"Renqibao",ScreenSetting:1029,1029:"ScreenSetting",Widget:1030,1030:"Widget",ShakeLinkmic:1031,1031:"ShakeLinkmic",InteractSwitch:1032,1032:"InteractSwitch",MarketWidget:1033,1033:"MarketWidget",ShareStory:1034,1034:"ShareStory",BackRecord:1035,1035:"BackRecord",UnionAnchors:1036,1036:"UnionAnchors",WebcastSetting:1037,1037:"WebcastSetting",LinkmicGame:1038,1038:"LinkmicGame",AudioSubtitle:1039,1039:"AudioSubtitle",AudioEffect:1040,1040:"AudioEffect",EmergencyHelp:1041,1041:"EmergencyHelp",GiftConsumptionManager:1042,1042:"GiftConsumptionManager",LiveListen:1043,1043:"LiveListen",LiveExperienceOpt:1044,1044:"LiveExperienceOpt",PublicAreaSetting:1050,1050:"PublicAreaSetting",LinkmicAnnounce:1051,1051:"LinkmicAnnounce",GameTeamManage:1052,1052:"GameTeamManage",FollowerShare:1053,1053:"FollowerShare",SwitchAccount:1054,1054:"SwitchAccount",ConsumptionProtect:1055,1055:"ConsumptionProtect",Copy:1056,1056:"Copy",QRCode:1057,1057:"QRCode",IMListVirtual:1058,1058:"IMListVirtual",MessageNotification:1059,1059:"MessageNotification",RechargeRecord:1060,1060:"RechargeRecord",MerchantQualifications:1061,1061:"MerchantQualifications",WatchLaterComponent:1062,1062:"WatchLaterComponent",AnchorCompMusic:3001,3001:"AnchorCompMusic",AnchorCompFansGroup:3002,3002:"AnchorCompFansGroup",AnchorCompComment:3003,3003:"AnchorCompComment",AnchorCompPreview:3007,3007:"AnchorCompPreview",AnchorCompContentManage:3051,3051:"AnchorCompContentManage",AnchorCompShare:3053,3053:"AnchorCompShare",AnchorCompRecord:3056,3056:"AnchorCompRecord",AnchorCompContentSelection:3057,3057:"AnchorCompContentSelection",AnchorCompPublicAreaSetting:3058,3058:"AnchorCompPublicAreaSetting",AnchorCompPause:3059,3059:"AnchorCompPause",AnchorStableMode:3060,3060:"AnchorStableMode",AnchorRoomChannel:3061,3061:"AnchorRoomChannel",AnchorPublicAreaHelper:3062,3062:"AnchorPublicAreaHelper",AnchorCompLiveManage:3103,3103:"AnchorCompLiveManage",AnchorCompFunctionSetting:3104,3104:"AnchorCompFunctionSetting"},r={NoOp:0,0:"NoOp",Up:1,1:"Up",Down:2,2:"Down",HasPermission:3,3:"HasPermission",NoPermission:4,4:"NoPermission",UpdateData:5,5:"UpdateData"}},852349:function(e,t,i){i.d(t,{X:function(){return l},e:function(){return o}});var n=i("400985");let r=[],o=e=>{for(let t=0;t<r.length;t++){let i=r[t];if(i===e||i.toLocaleLowerCase()===e.toLocaleLowerCase())return!0}return!1},l=e=>`${(0,n.ZP)().LINK_PREFIX}${e}`},853078:function(e,t,i){i.d(t,{x:function(){return o}}),i(954372),i(826893);var n=i(306537),r=i(827045);let o=e=>{/iframe/.test(location.pathname)?(0,n.dn)({headerText:e.headerText,enterMethod:e.enterMethod}):(0,r.p)().then(t=>{t(e)})}},885714:function(e,t,i){i(429532),i(250440);var n=i(88648),r=i(782563),o=i(381266);t.Z=e=>{let{tab:t,abtestData:i}=e,l=(0,n.useCallback)(()=>{try{let e=window.localStorage.getItem("h265ErrorNum");if("-1"===e)return;e?window.localStorage.setItem("h265ErrorNum",String(Number(e)+1)):window.localStorage.setItem("h265ErrorNum","1")}catch(e){return}},[]),a=(0,n.useCallback)(()=>{if((null==i?void 0:i.liveH265NoStoreErrNumber)===1)return -1;try{let e=window.localStorage.getItem("h265ErrorNum");return e?Number(e):0}catch(e){return 0}},[]),u=(0,n.useCallback)(()=>{try{window.localStorage.setItem("h265ErrorNum","-1")}catch(e){return}},[]),{isFeedH265:d,disable265Reason:s}=(0,n.useMemo)(()=>{let e={};return{isFeedH265:(()=>{var i,n,l,u,d,s,c;if(a()>2||!["recommend","follow","livehead","followLiveHeadPreCreated","search","liveCard","category","home"].includes(t))return Object.assign(e,{step:2,errorNum:a(),msg:"errorNum > 2 ||!supportScene.includes(tab)",tab:t}),!1;if((0,r.DT)()){if(!(null===(u=window)||void 0===u?void 0:null===(l=u.MediaSource)||void 0===l?void 0:null===(n=l.isTypeSupported)||void 0===n?void 0:n.call(l,"video/mp4;codecs=hev1.1.6.L93.B0")))return Object.assign(e,{step:3,msg:"TypeNotSupported",tab:t}),!1;if(!(null===(c=window)||void 0===c?void 0:null===(s=c.MediaSource)||void 0===s?void 0:null===(d=s.isVideoProfilePlatformSupported)||void 0===d?void 0:d.call(s,16)))return Object.assign(e,{step:4,msg:"Client_isVideoProfilePlatformSupported",tab:t}),!1}if(!(0,r.DT)()&&!(0,o.E)())return Object.assign(e,{step:5,msg:"Web_getIsHevcSupported",tab:t}),!1;let v=null===(i=window.navigator)||void 0===i?void 0:i.hardwareConcurrency;return!(v<=4)||(Object.assign(e,{step:6,msg:"low_cpu_gpu_score",tab:t}),(()=>{try{return Number(localStorage.getItem("gpu_score"))>6.4}catch(e){return!1}})())})(),disable265Reason:e}},[t,a]);return{isFeedH265:d,addH265ErrorNum:l,resetH265ErrorNum:u,isLowH265:(0,n.useMemo)(()=>{var e,t,i,n,l,u,d;return!(a()>2||(0,r.DT)()&&(!(null===(n=window)||void 0===n?void 0:null===(i=n.MediaSource)||void 0===i?void 0:null===(t=i.isTypeSupported)||void 0===t?void 0:t.call(i,"video/mp4;codecs=hev1.1.6.L93.B0"))||!(null===(d=window)||void 0===d?void 0:null===(u=d.MediaSource)||void 0===u?void 0:null===(l=u.isVideoProfilePlatformSupported)||void 0===l?void 0:l.call(u,16))))&&(!!(0,r.DT)()||!!(0,o.E)())&&(!!((null===(e=window.navigator)||void 0===e?void 0:e.hardwareConcurrency)<=4)||!1)},[a]),disable265Reason:s}}},63002:function(e,t,i){var n=i(240026);t.Z=()=>{let{liveHighClientH265:e,liveHighWebH265:t}=(0,n.T)();return{liveHighClientH265:e,liveHighWebH265:t}}},277395:function(e,t,i){i.d(t,{HX:function(){return l},MP:function(){return v},RS:function(){return c},Ue:function(){return f},Ul:function(){return d},Ys:function(){return o},_6:function(){return u},mp:function(){return s},ye:function(){return a},zm:function(){return _}});var n=i(134761);class r{start(){this.startDate=Date.now()}getTotal(){return this.startDate?Math.ceil((Date.now()-this.startDate)/1e3):0}getMsTotal(){return this.startDate?Date.now()-this.startDate:0}reset(){this.startDate=void 0}constructor(){(0,n._)(this,"startDate",void 0)}}let o=new r,l=new r,a=new r,u=new r,d=new r,s=new r,c=new r,v=new r,_=new r,f=()=>{o.reset(),l.reset(),a.reset(),d.reset(),s.reset(),c.reset(),u.reset(),v.reset(),_.reset()}},62014:function(e,t,i){i.d(t,{a:function(){return l}});var n=i(134761);i(268917);var r=i(879146),o=i.n(r);class l{push(e,t){this.powers[e]?(this.powers[e].length<2||this.powers[e].pop(),this.powers[e].push(t)):this.powers[e]=[t],0!==this.status[e]&&(this.status[e]=0,clearTimeout(this.timer[e]),this.timer[e]=setTimeout(()=>this.publish(e),100))}on(e,t){this.ee.on(e,t)}off(e,t){this.ee.off(e,t),clearTimeout(this.timer[e])}destroy(){Object.keys(this.timer).forEach(e=>{clearTimeout(this.timer[e])})}publish(e){clearTimeout(this.timer[e]),this.status[e]=0;let t=this.powers[e].shift();t&&this.ee.emit(e,t),this.powers[e].length>0?this.timer[e]=setTimeout(()=>this.publish(e),this.interval):(this.timer[e]=setTimeout(()=>{this.ee.emit(e,{talk:0})},2*this.interval),delete this.status[e])}constructor(){(0,n._)(this,"ee",void 0),(0,n._)(this,"powers",{}),(0,n._)(this,"status",{}),(0,n._)(this,"timer",{}),(0,n._)(this,"interval",850),this.ee=new(o())}}},684434:function(e,t,i){var n=i(520739),r=i(878389),o=i(563097),l=i(88648);let a=(0,l.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,n._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.5 10H10v11h6.25a1 1 0 1 1 0 2H10a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h12.5a2 2 0 0 1 2 2v4.5a1 1 0 1 1-2 0V10zm-4.883 2.384a.878.878 0 0 0-.877-.877h-3.51a.878.878 0 0 0-.878.877v3.511a.878.878 0 1 0 1.755 0v-1.348l2.695 2.696a.878.878 0 0 0 1.242-1.241l-2.74-2.74h1.436a.878.878 0 0 0 .878-.878zm1.491 6.116a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-4z",fill:"#fff"})})));t.Z=a},309244:function(e,t,i){var n=i(520739),r=i(878389),o=i(563097),l=i(88648);let a=(0,l.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,n._)({width:12,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.81 3.615c0 1.485-1.24 2.692-2.777 2.71h-.066C4.43 6.306 3.189 5.1 3.189 3.614v-.904C3.19 1.214 4.45 0 6 0c1.552 0 2.81 1.214 2.81 2.711v.904zM1.163 8.594c1.167-.557 3.512-.864 4.837-.864 1.327 0 3.676.307 4.846.868.679.38 1.155 1.23 1.155 2.225v.572c0 .738-.39 1.357-.928 1.556-1.284.366-3.698.563-5.071.563-1.375 0-3.79-.201-5.078-.565C.391 12.748 0 12.13 0 11.393v-.572c0-.997.478-1.85 1.162-2.227z",fill:"#fff",fillOpacity:".9"})})));t.Z=a}}]);