(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["34850"],{136678:function(e,t,n){"use strict";n.d(t,{X:function(){return f}});var l=n(520739),o=n(878389),i=n(563097),r=n(88648),a=n(713097),s=n.n(a),d=n(477667),c=n(346911),u=n(599271),m=n(473677),f={Close:0,0:"Close",None:1,1:"None",Divide:2,2:"Divide"};let v=r.memo(e=>{let{onCloseClick:t,hideCount:n,commentCount:r,headerSearchInfo:a,tipTextAfter:f,abTestData:v}=e;return(0,i.jsxs)("div",{className:s()(c.default.commentHeaderWithSearch,"comment-header-inner-container"),children:[(0,i.jsxs)("div",{className:s()(c.default.otherDividWrap,c.default.searchDividWrap,"comment-header-with-search"),children:[(0,i.jsx)(u.Z,(0,o._)((0,l._)({},a),{abTestData:v})),(0,i.jsx)(m.Z,{src:d.Z,width:36,height:36,viewBox:"0 0 36 36",className:s()(c.default.closeSvg,"comment-header-close-btn"),onClick:t})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[!n&&(0,i.jsxs)("span",{className:c.default.title,children:["全部评论(",r,")"]}),(0,i.jsx)("div",{style:{flex:"1",marginBottom:"8px"},children:2===f&&(0,i.jsx)("div",{className:c.default.textDivider})})]})]})}),h=r.memo(e=>{let{onCloseClick:t,commentCount:n,hideCount:l,headerSearchInfo:o,tipTextAfter:a=0,abTestData:u}=e;return(0,r.useMemo)(()=>!!o&&!!o.text,[o])?(0,i.jsx)(v,{hideCount:l,onCloseClick:t,commentCount:n,headerSearchInfo:o,tipTextAfter:a,abTestData:u}):(0,i.jsxs)("div",{className:s()(c.default.otherDividWrap,c.default.oneDividWrap,"comment-header-inner-container"),children:[!l&&(0,i.jsxs)("span",{className:c.default.title,children:["全部评论(",n,")"]}),0===a&&(0,i.jsx)(m.Z,{src:d.Z,width:36,height:36,viewBox:"0 0 36 36",className:c.default.closeSvg,onClick:t}),2===a&&(0,i.jsx)("div",{className:c.default.textDivider})]})});t.Z=h},599271:function(e,t,n){"use strict";var l=n(563097),o=n(88648),i=n(346911),r=n(422959),a=n(147002);let s=o.memo(e=>{let{hintText:t,text:n,id:s,abTestData:d,awemeInfo:c,isSearch:u,isDetail:m,getSearchTextUrl:f,onSearchTextClick:v,onSearchTextMounted:h}=e,p=u||m,g=(0,o.useMemo)(()=>(0,a.wp)(c)&&!p,[c,p]);return(0,l.jsxs)("div",{className:i.default.searchInfoTip,children:[(0,l.jsx)("span",{className:i.default.hitText,children:p?"大家都在搜：":t}),(0,l.jsx)(r.Z,{enterMethod:"search_tip",showSearchHighlight:!0,text:n,className:i.default.actionableText,awemeInfo:c,wrapperClassName:i.default.actionableTextWrapper,textExtra:[(0,a.KK)({searchText:n,searchQueryId:s,start:0,end:n.length,isAiGuessWord:g})],searchTextClass:i.default.searchText,abTestData:d,getSearchTextUrl:(e,t)=>f({searchText:e,searchId:t,wordsSource:"comment_related_search"}),onSearchTextClick:(e,t,n,l)=>v({searchText:e,searchId:t,searchTextPos:n,wordsSource:g?"comment_related_search_ai_search":"comment_related_search"},l),onSearchTextMounted:(e,t,n)=>{h({wordsSource:g?"comment_related_search_ai_search":"comment_related_search",searchId:t,searchText:e,searchTextPos:n})}})]})});t.Z=s},900451:function(e,t,n){"use strict";let l;n.d(t,{Z:function(){return nj}});var o=n("520739"),i=n("878389");n("874386"),n("429532"),n("268917"),n("250440");var r=n("563097"),a=n("88648"),s=n("877639"),d=n.n(s),c=n("713097"),u=n.n(c),m=n("88961"),f=n("747909"),v=n("496349"),h=n("720359"),p=n("584878"),g=n("35730"),_=n("79307"),x=n("702726"),C=n("746864"),w=n("250486"),y=n("637005"),E=n("32167"),j=n("658065"),S=n("782563"),N=n("399796"),T=n("746025"),I=n("782442"),R=n("54517"),k=n("555106"),L=n("14108"),b=n("367366"),M=n("287844"),O=n("900674"),D=n("147613"),A=n("687114");let P=(0,a.forwardRef)((e,t)=>(0,r.jsxs)("svg",(0,i._)((0,o._)({width:42,height:42,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,r.jsx)("rect",{x:".5",y:".5",width:41,height:41,rx:20.5,stroke:"#292B35"}),(0,r.jsx)("rect",{x:1,y:1,width:40,height:40,rx:20,fill:"#363741"}),(0,r.jsxs)("g",{clipPath:"url(#defaultAvatarDark_svg__clip0_34277_112092)",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.486 6.307c1.07 0 1.937.867 1.937 1.978.005.407.15 3.688 3.605 4.503.837.197 1.444.918 1.444 1.778v.189a1.82 1.82 0 0 1-2.195 1.778c-.925-.19-1.985-.59-2.854-1.39v6.99l.002.062.002.07a9.458 9.458 0 0 1-6.352 8.934c1.857 1.507 3.524 4.134 3.524 7.096 0 .535-.041 1.058-.116 1.565 0 0-2.935 1.46-6.448 1.147-3.743.215-6.573-1.147-6.573-1.147a10.706 10.706 0 0 1-.115-1.565c0-2.965 1.654-5.595 3.508-7.101a9.458 9.458 0 0 1-6.336-8.928 9.454 9.454 0 0 1 15.03-7.632v-6.39c0-1.07.868-1.937 1.937-1.937z",fill:"url(#defaultAvatarDark_svg__paint0_linear_34277_112092)",fillOpacity:".18"}),(0,r.jsxs)("g",{opacity:".1",children:[(0,r.jsx)("path",{d:"M30.403 15.137l.009.006v.049c.135.845.097 2.148.054 3.596a79.435 79.435 0 0 0-.046 2.389c-.253-3.192-2.276-5.27-3.286-6.118l-.451-.3s-.004-.01-.01-.06c-.07-.05-.108-.075-.108-.075l.006-1.317.036.005c-.022-.897-.041-2.345-.04-4.677.055 2.25.8 3.495 2.262 5.12.547.608 1.5.956 1.574 1.382z",fill:"url(#defaultAvatarDark_svg__paint1_linear_34277_112092)"}),(0,r.jsx)("path",{d:"M26.567 8.29z",fill:"url(#defaultAvatarDark_svg__paint2_linear_34277_112092)"})]})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"defaultAvatarDark_svg__paint0_linear_34277_112092",x1:16,y1:14.5,x2:25.75,y2:28.5,gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#F1F1F1"}),(0,r.jsx)("stop",{offset:1,stopColor:"#B7B7B7"})]}),(0,r.jsxs)("linearGradient",{id:"defaultAvatarDark_svg__paint1_linear_34277_112092",x1:28.75,y1:13.25,x2:27,y2:15.25,gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#131313"}),(0,r.jsx)("stop",{offset:".568",stopColor:"#797979",stopOpacity:".01"}),(0,r.jsx)("stop",{offset:1,stopColor:"#5B5B5B"})]}),(0,r.jsxs)("linearGradient",{id:"defaultAvatarDark_svg__paint2_linear_34277_112092",x1:28.75,y1:13.25,x2:27,y2:15.25,gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#131313"}),(0,r.jsx)("stop",{offset:".568",stopColor:"#797979",stopOpacity:".01"}),(0,r.jsx)("stop",{offset:1,stopColor:"#5B5B5B"})]}),(0,r.jsx)("clipPath",{id:"defaultAvatarDark_svg__clip0_34277_112092",children:(0,r.jsx)("path",{fill:"#fff",transform:"translate(11.519 6.307)",d:"M0 0h23.953v34.744H0z"})})]})]})));var B=n("706646"),U=n("136678"),z=n("346911"),F=n("599271"),V=n("599718"),Z=n("906499");let H=a.memo(e=>{let{keywordList:t}=e;return(0,r.jsxs)("div",{className:z.default.searchInfoTip,children:[(0,r.jsx)("span",{className:z.default.hitText,children:"大家都在搜："}),t.map((e,t)=>(0,r.jsx)(r.Fragment,{children:e&&!(0,V.y2)(e,5)?(0,r.jsx)(Z.a,{className:z.default.seoSearchText,href:`https://www.douyin.com/search/${e}`,target:"_blank",isNeedSeoOpt:!0,children:(0,r.jsx)("span",{className:z.default.text,children:e})},t):(0,r.jsx)("span",{className:z.default.seoSearchText,children:(0,r.jsx)("span",{className:z.default.text,children:e})})}))]})});var $=n("301061"),G=n("90519"),W=n("358003"),K=n("902845"),Y=n("962800"),q=n("474162"),X=n("368200");n("675373"),n("209955"),n("954372"),n("826893"),n("413806");var Q=n("670824"),J=n.n(Q),ee=n("395328"),et=n.n(ee),en=n("871212"),el=n("866460"),eo=n("256277"),ei=n("325982"),er=n("696332"),ea=n("330746"),es=n("150566"),ed=n("94126"),ec=n("349998"),eu=n("945977"),em=n("363706"),ef=n("256229"),ev=n("55426"),eh=n("734017"),ep=n("875571"),eg=n("863648");let e_=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 10H12a2 2 0 0 0-2 2v8.92l2.738-2.19a2 2 0 0 1 2.53.024l1.738 1.45 4.206-3.442a2 2 0 0 1 2.583.043L26 18.734V12a2 2 0 0 0-2-2zm2 11.071l-.159.182-3.363-2.943-4.206 3.441a2 2 0 0 1-2.546-.011l-1.739-1.449L10 23.481V24a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2.929zM12 8a4 4 0 0 0-4 4v12a4 4 0 0 0 4 4h12a4 4 0 0 0 4-4V12a4 4 0 0 0-4-4H12zm4.25 6.25a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0z",fill:"#2F3035",fillOpacity:".9"})}))),ex=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.315 18.314a8 8 0 1 1-16 0 8 8 0 0 1 16 0zm-11.36-3.359a.75.75 0 0 1 1.062 0l2.297 2.298 2.298-2.298a.75.75 0 0 1 1.061 1.06l-2.298 2.298 2.299 2.299a.75.75 0 1 1-1.061 1.06l-2.299-2.298-2.298 2.298a.75.75 0 0 1-1.06-1.06l2.298-2.299-2.298-2.297a.75.75 0 0 1 0-1.061z",fill:"#fff",fillOpacity:".34"})}))),eC=(0,a.forwardRef)((e,t)=>(0,r.jsxs)("svg",(0,i._)((0,o._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 30C23.851 30 29 24.851 29 18.5S23.851 7 17.5 7 6 12.149 6 18.5 11.149 30 17.5 30zm-5.16-13.883a1.16 1.16 0 0 0 1.64 1.64l2.395-2.394v8.838a1.16 1.16 0 0 0 2.321 0v-8.839l1.028 1.028 1.368 1.368a1.16 1.16 0 1 0 1.64-1.641l-4.219-4.22a1.382 1.382 0 0 0-1.954 0l-4.22 4.22h.001z",fill:"#FE2C55"}),(0,r.jsx)("path",{d:"M12.34 16.117a1.16 1.16 0 0 0 1.64 1.64l2.395-2.394v8.838a1.16 1.16 0 0 0 2.321 0v-8.839l1.028 1.028 1.368 1.368a1.16 1.16 0 1 0 1.64-1.641l-4.219-4.22a1.382 1.382 0 0 0-1.954 0l-4.22 4.22h.001z",fill:"#fff"})]})));var ew=n("15332"),ey=n("892497"),eE=n("349232");n("673554"),n("784246");var ej=n("63976"),eS=n("789145");let eN=[],eT=!1;var eI=n("682644"),eR=n("879820");let ek=e=>{let t=[],n={};return Object.values(e).forEach(e=>{!n[e.originUri]&&1!==e.hide&&(t.push(e),n[e.originUri]=!0)}),t},eL=ek((0,eS.kv)());function eb(e){let{onClick:t,className:n}=e,[l,o]=(0,a.useState)(ek(eL)),i=e=>n=>{t(e,n)};return(0,a.useEffect)(()=>{(async()=>{let{statusCode:e,data:t}=await (0,eS.zk)();0===e&&o(eL=ek(t))})()},[]),(0,r.jsx)("div",{className:u()(eR.default.container,n),children:l.map(e=>(0,r.jsx)("span",{className:eR.default.imgWrap,onClick:i({name:e.name}),children:(0,r.jsx)("img",{src:e.img})},e.name))})}var eM=n("82127");let eO=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:29,height:29,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{d:"M19.087 20.784A9.559 9.559 0 0 1 13.2 22.8a9.6 9.6 0 1 1 9.6-9.6 9.558 9.558 0 0 1-2.016 5.887l4.065 4.064a1.2 1.2 0 1 1-1.697 1.698l-4.065-4.065zM20.4 13.2a7.2 7.2 0 1 0-14.4 0 7.2 7.2 0 0 0 14.4 0z",fill:"#fff",fillOpacity:".5"})})));var eD=n("808109"),eA=n("516599");function eP(e){let{onClick:t,stickers:n,className:l,emojiContainerRef:o,onDelete:i,onSearch:s}=e,d=(0,a.useRef)(null);return(0,r.jsxs)("div",{className:u()(eM.default.container,l),children:[s&&(0,r.jsx)("div",{className:eM.default.searchEntry,onClick:e=>{e.stopPropagation(),s()},children:(0,r.jsx)(eO,{})}),null==n?void 0:n.map(e=>(0,r.jsx)("div",{className:eM.default.imgWrap,children:(0,r.jsx)(eD.o,{className:eM.default.imgContent,tipContainerClassName:eM.default.tipContainer,item:e,refImg:d,enterMethod:"comment",refContainer:o,afterDeleted:i&&((t,n)=>{t?(eA.F.info("移除表情成功"),i(e)):n&&eA.F.info(n)}),onClick:n=>{t(e,n)}})},e.id_str))]})}var eB=n("400119"),eU=n("427088"),ez=n("21964");let eF={id:"",stickers:[]};var eV=(0,a.forwardRef)(function(e,t){let{className:n,onEmojiClick:l,onStickerClick:s,isActive:c,trendingStickers:m,favoriteStickers:f,onDeleteFavoriteSticker:v,hitCommentExperience:h,searchKeyword:p,searchMode:g,awemeInfo:_,onSearchMode:x,abtestData:C}=e,w=(0,a.useRef)(null),[y,j]=(0,a.useState)(eU._.Emoji),[S,N]=(0,a.useState)(!1),[T,I]=(0,a.useState)([]),[R,k]=(0,a.useState)(_.awemeId===eF.id?eF.stickers:[]);(0,a.useEffect)(()=>{(null==C?void 0:C.commentRenderOptimize)&&!(null==R?void 0:R.length)&&(null==_?void 0:_.awemeId)&&(0,ej.D2)({groupId:_.awemeId}).then(e=>{0===e.status_code&&(k(e.emoticon_data.stickers),eF={id:_.awemeId,stickers:e.emoticon_data.stickers})})},[_.awemeId,c]);let L=(0,a.useCallback)(d()((e,t)=>{N(!0),(0,eS.no)(e,void 0,0,"comment").then(e=>{if(!t.current){var n,l;0===e.status_code&&(null===(l=e.emoticon_data)||void 0===l?void 0:null===(n=l.sticker_list)||void 0===n?void 0:n.length)?I(e.emoticon_data.sticker_list.map(e=>(0,i._)((0,o._)({display_name:"",hash:""},e),{animate_url:e.origin,static_url:e.origin,static_type:e.animate_type,height:e.origin.height,width:e.origin.width}))):I([])}N(!1)})},500),[]);return(0,a.useEffect)(()=>{if(p){let e={current:!1};return L(p,e),()=>{e.current=!0,L.cancel()}}},[p]),(0,a.useEffect)(()=>{T.length&&ez.Z.sendLog("emojiSearchResultShow",{enter_from:(0,E.vM)(),enter_method:"comment"})},[!T.length]),(0,a.useEffect)(()=>{c&&(0,eI.X)({top:0,left:0},w.current)},[c,y]),(0,a.useEffect)(()=>{ez.Z.sendLog("emojiTabShow",{author_id:`${null==_?void 0:_.authorUserId}`,group_id:null==_?void 0:_.awemeId,log_pb:null==_?void 0:_.logPb,enter_from:(0,E.vM)(),tab_name:{[eU._.Emoji]:"system",[eU._.Gif]:"recommend",[eU._.CustomEmoji]:"favorite"}[y]})},[y]),(0,r.jsxs)("div",{className:u()(eB.default.container,n,"emoji-card-outer-container"),ref:t,children:[(0,r.jsxs)("div",{className:eB.default.innerContainer,ref:w,children:[(0,r.jsx)(eb,{onClick:l,className:(y!==eU._.Emoji||g)&&eB.default.tabHidden}),(null==C?void 0:C.commentRenderOptimize)&&y!==eU._.Gif?null:(0,r.jsx)(eP,{className:(y!==eU._.Gif||g)&&eB.default.tabHidden,onClick:(e,t)=>s((0,i._)((0,o._)({},e),{emoji_comment_type:"recommend"}),t),stickers:(null==C?void 0:C.commentRenderOptimize)?R:m,onSearch:x,emojiContainerRef:w}),g&&(p?S?(0,r.jsx)("div",{className:eB.default.centerContainer,children:(0,r.jsx)($.gb,{})}):T.length?(0,r.jsx)(eP,{onClick:(e,t)=>{s((0,i._)((0,o._)({},e),{emoji_comment_type:"recommend"}),t),ez.Z.sendLog("emojiSearchResultClick",{enter_from:(0,E.vM)(),enter_method:"comment"})},stickers:T,emojiContainerRef:w}):(0,r.jsx)("div",{className:eB.default.centerContainer,children:"搜索无结果"}):(0,r.jsx)("div",{className:eB.default.centerContainer,children:"请在下方输入框中通过关键词搜索表情"})),(0,r.jsx)(eP,{className:(y!==eU._.CustomEmoji||g)&&eB.default.tabHidden,onClick:(e,t)=>s((0,i._)((0,o._)({},e),{emoji_comment_type:"favorite"}),t),onDelete:v,stickers:f,emojiContainerRef:w})]}),h&&!g&&(0,r.jsx)(eU.K,{currentTab:y,onTabChange:j,disableGif:!1,disableCustomEmoji:!f.length,disableInteractionEmoji:!0})]})}),eZ=n("474169");n("338172"),n("882732"),n("544943");var eH=n("610371");let e$=e=>{let t=(0,a.useRef)(),[n,l]=(0,a.useState)(null),[o,i]=(0,a.useState)(!1),[s,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),m=(0,r.jsx)("input",{type:"file",accept:".png,.webp,.jpeg,.pjpeg,.bmp,.jpg",style:{display:"none"},ref:t}),[f,v]=(0,a.useState)(""),p=(0,h.d)(e=>{f||n?(0,eH.Z)({title:`是否清空当前${f?"图片":"表情"}并重新添加`,cancelBtnText:"取消",confirmBtnText:"确定",onConfirm:e}):e()});return(0,a.useEffect)(()=>{let e=t.current;if(e){let t="",n=async()=>{try{if(null==e?void 0:e.files[0]){if(!(null==e?void 0:e.files[0].type.startsWith("image")))return eA.F.info("格式错误");if(e.files[0].size>10485760)return eA.F.info("文件过大");if(!await new Promise(t=>{let n=new FileReader;n.onload=e=>{let{target:n}=e,l=new Image;l.onload=()=>{let{width:e}=l,{height:n}=l;t(e<=1e4&&n<=1e4)},l.onerror=()=>t(!1),l.src=n.result},n.onerror=()=>t(!1),n.readAsDataURL(e.files[0])}))return eA.F.info("图片太大");p.current(()=>{window.URL.revokeObjectURL(t),t=window.URL.createObjectURL(null==e?void 0:e.files[0]),v(t),l(null),e.value=""})}}finally{u(!1)}};return null==e||e.addEventListener("change",n),()=>{null==e||e.removeEventListener("change",n),window.URL.revokeObjectURL(t)}}},[]),{selectedImage:f,fileInputElement:m,selectedSticker:n,updateWithConfirm:p,fileSelecting:c,searchMode:o,searchKeyword:s,setSearchKeyword:d,setSearchMode:i,openImageFileSelector:()=>{if(t.current){var e,n;t.current.value="",null===(e=(n=t.current).click)||void 0===e||e.call(n),u(!0)}},handleStickerSelected:t=>{p.current(()=>{l(t),v("")}),ez.Z.sendLog("clickEmoji",{author_id:`${null==e?void 0:e.authorUserId}`,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,enter_from:(0,E.vM)(),tab_name:t.emoji_comment_type||"system"})},clearSelectedImageAndSticker:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(0,eH.Z)({title:"确认删除选中的图片评论吗？",cancelBtnText:"取消",confirmBtnText:"确定",onConfirm:()=>{l(null),v("")}}):(l(null),v(""))}}};var eG=n("40750");let eW=(0,a.forwardRef)((e,t)=>(0,r.jsxs)("svg",(0,i._)((0,o._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,r.jsx)("circle",{cx:6,cy:6,r:6,fill:"#161823",fillOpacity:".6"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.232 3.525a.5.5 0 1 0-.707.707L5.293 6 3.525 7.768a.5.5 0 1 0 .707.707L6 6.707l1.768 1.768a.5.5 0 1 0 .707-.707L6.707 6l1.768-1.768a.5.5 0 1 0-.707-.707L6 5.293 4.232 3.525z",fill:"currentColor"})]})));var eK=n("643946"),eY=n("731296");let eq=e=>{let{srcList:t,hasImageViewer:n,onClose:l}=e,[o,i]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:eG.default.container,children:[(0,r.jsx)(eK.n,{className:eG.default.content,srcList:t,onClick:()=>{n&&i(!0)}}),(0,r.jsx)(eW,{className:eG.default.closeButton,onClick:l}),o&&(0,r.jsx)(eY.O,{hitCommentExperience:!0,previewUrl:t[0],originUrl:t,onClose:()=>{i(!1)}})]})};var eX=n("422959"),eQ=n("473677"),eJ=n("420918"),e0=n("631493"),e1=n("52533"),e2=n("402971");let{EVENT:e3}=y;function e6(e){var t,n;let{placeHolder:l,className:s,puhlishCommentItem:d,fetchCommentMetionList:c,level:m,levelOneCid:f,cid:v,publishComment:h,isSwiper:p=!1,isSearch:g=!1,isCollapse:_=!1,awemeInfo:x,isShowComment:w=!0,commentLoadedTime:S=Date.now(),shortcutDisable:N,reportExtraParams:T={},replyText:R,cancelReplyFn:k,setShowTrayPushGuide:L,hitCommentExperience:b,player:M}=e,{toast:O,isActive:D,abtestData:A}=(0,a.useContext)(eJ.X),P=(0,a.useRef)(null),B=(0,a.useRef)(null),U=(0,a.useRef)(null),z=(0,a.useRef)(!1),[F,V]=(0,a.useState)(!1),[Z,H]=(0,a.useState)(!1),[$,G]=(0,a.useState)(!1),[W,K]=(0,a.useState)(0),[Y,q]=(0,a.useState)(!1),[X,Q]=(0,a.useState)(!1),ee=void 0!==R&&l,eI=(0,a.useRef)(0),eR=(0,a.useRef)(!1),{userInfo:ek}=null!==(n=(0,e2.useUserInfoContext)())&&void 0!==n?n:{},{fileInputElement:eL,selectedSticker:eb,selectedImage:eM,searchMode:eO,searchKeyword:eD,fileSelecting:eP,setSearchKeyword:eB,setSearchMode:eU,clearSelectedImageAndSticker:eF,openImageFileSelector:eH,handleStickerSelected:eG}=e$(x),eW=er.a.t("post_a_comment",{},"留下你的精彩评论吧"),eK=er.a.t("post_a_comment_search",{},"留下你的评论吧"),eY=l||(g||_?eK:eW);ee&&(eY=g||_?eK:eW);let e6=!!(W||eP||eM||eb||eO);(0,a.useEffect)(()=>{if(e6)return y.emit(e3.videoStopPlayNext),()=>{y.emit(e3.videoRemoveStopPlayNext)}},[!e6]);let{trendingStickers:e5,favoriteStickers:e7,onDeleteFavoriteSticker:e4}=function(e,t,n){let[l,o]=(0,a.useState)([]),[i,r]=(0,a.useState)(eN);return(0,a.useEffect)(()=>y.listen(y.EVENT.StickerCollect,e=>{let{action:t,stickers:n}=e;"add"===t&&r(e=>n.concat(e))}),[]),(0,a.useEffect)(()=>{e&&!(null==n?void 0:n.commentRenderOptimize)&&(0,ej.D2)({groupId:t}).then(e=>{0===e.status_code&&o(e.emoticon_data.stickers)})},[t,e]),(0,a.useEffect)(()=>{eN=i},[i]),(0,a.useEffect)(()=>{let t=null==n||!n.commentRenderOptimize||!eT;if(e&&!eN.length&&t){let e=async function(){var t,n;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{status_code:o,custom_sticker_page_list:i}=await (0,eS.Ol)(l,500,"comment");if(0!==o)return[];let r=(null==i?void 0:null===(n=i.resources)||void 0===n?void 0:null===(t=n.map(e=>{let{stickers:t}=e;return t}))||void 0===t?void 0:t.flat())||[];return(null==i?void 0:i.is_completed)||!((null==i?void 0:i.next_cursor)>l)?(eT=!0,r):r.concat(await e(i.next_cursor))};e().then(r)}},[t,e]),{trendingStickers:l,favoriteStickers:i,onDeleteFavoriteSticker:e=>{r(t=>t.filter(t=>{let{id_str:n}=t;return n!==e.id_str}))}}}(D&&b,x.awemeId,A),[e8,e9]=(0,a.useState)(!1),te=(0,a.useCallback)(async()=>{var e,t,n,l,i,r,a,s,c,u,p,g,_,w;let j;if(eO)return;let N=async()=>eM?await new Promise(async(e,t)=>{var n,l;let{statusCode:o,stsToken:i,serviceId:r}=await (0,ey.Uj)(),a=new(J())({userId:null==ek?void 0:null===(n=ek.info)||void 0===n?void 0:n.uid,appId:en.APP_ID,imageConfig:{serviceId:r||en.IMAGEX_AVATAR_SERVER_ID}});if(0===o){let n=null==a?void 0:null===(l=a.addFile)||void 0===l?void 0:l.call(a,{file:await fetch(eM).then(e=>e.blob()),stsToken:i,type:"image"});a.on("complete",async t=>{let{Uri:n,ImageWidth:l,ImageHeight:o,ImageFormat:i}=t.uploadResult;e({image_uri_list:n,image_widths:l,image_heights:o,image_formats:i})}),a.on("error",e=>{var n;t(Error(null==e?void 0:null===(n=e.extra)||void 0===n?void 0:n.message))}),a.start(n)}else t(Error())}):{},{text:R,textExtra:k,pastedText:b}=P.current.getCommentInfo();if(!eb&&!eM){if(!Z){(null==R?void 0:R.length)>500&&O("字数超过限制");return}if(/^\s+$/.test(R)){O("表达你的态度再评论吧");return}}if(z.current)return;z.current=!0;try{j=await N()}catch(e){eA.F.info((null==e?void 0:e.message)||"发布图片评论失败"),z.current=!1;return}let M=(0,ea.G6)();M?null===(l=P.current)||void 0===l||null===(n=l.clearInput)||void 0===n||n.call(l):e9(!0);let D=eb?{sticker_id:eb.id_str,sticker_uri:null===(e=eb.animate_url)||void 0===e?void 0:e.uri,sticker_width:eb.width,sticker_height:eb.height,sticker_type:eb.sticker_type,sticker_format:eb.animate_type,sticker_author_sec_uid:null===(t=eb.author)||void 0===t?void 0:t.sec_uid}:{},A={paste_edit_method:b.includes(R)?"pure_paste":b.some(e=>et()(e.split(""),R.split("")).length)?"edit_with_paste":"non_paste",one_level_comment_rank:-1},{statusCode:B,successToastMsg:U,comment:F,statusMsg:V,toastType:H}=await d((0,o._)({text:R,textExtra:k,replyId:1===m&&v||2===m&&f||void 0,replyToReplyId:2===m&&v||void 0,commentSendCelltime:Date.now()-eI.current,commentVideoCelltime:eI.current-S},D,j,A));if(eR.current=!1,!M&&e9(!1),B){let e="发布评论失败";19===B&&(e="由于违反社区规定，评论功能受限"),3002575===B&&(e=V||"发布失败，关注健康分分数"),O(el.statusMsg.includes(V)?V:e)}else if(null==L||L(!0),O(U||"已发布"),!M&&(null===(c=P.current)||void 0===c||null===(s=c.clearInput)||void 0===s||s.call(c),null===(p=P.current)||void 0===p||null===(u=p.blur)||void 0===u||u.call(p)),eF(),y.emit(y.EVENT.videoRemoveStopPlayNext),null==h||h(F),ez.Z.sendLog("postComment",(0,o._)({urlParamList:["previous_page","enter_method"],emoji_comment_type:[eM&&"pic",null==eb?void 0:eb.emoji_comment_type,/\[.+\]/.test(R)&&"system"].filter(Boolean).join(","),author_id:`${null==x?void 0:x.authorUserId}`,group_id:null==x?void 0:x.awemeId,log_pb:null==x?void 0:x.logPb,enter_from:(0,E.mo)(),reply_comment_id:v||"",is_full_webscreen:e0.s.getIsPageFullscreen()?"1":"0",tab_name:(0,eh.zD)()||(0,es.Rs)("tab_name")||"",from_follow_list:(null===(i=I.Le.getConfig(I.gI.FromFollowList))||void 0===i?void 0:i.tag)?"1":"0",aweme_type:`${(null==x?void 0:x.isSlides)?C.e.Slides:null==x?void 0:x.awemeType}`,pic_cnt:null!==(g=null==x?void 0:null===(r=x.images)||void 0===r?void 0:r.length)&&void 0!==g?g:0,reply_to_comment_id:1===m&&v||2===m&&f||"",item_duration_ms:(null==x?void 0:null===(a=x.video)||void 0===a?void 0:a.duration)||0,is_from_aweme_search_engine:(0,ed.V)()?1:0},(0,ec.t)(),T)),(0,eo.Jt)(x)){let e=(0,eo.Rx)(x);(0,ei.E)("comment",{tag:(0,eu.f)(),value:e.creative_id,log_extra:e.log_extra})}(3002575===B||U)&&ez.Z.sendLog("cmtHealthToastPublishPc",{enter_from:(0,E.mo)(),author_id:`${null==x?void 0:x.authorUserId}`,group_id:null==x?void 0:x.awemeId,is_author:Number((null==ek?void 0:null===(_=ek.info)||void 0===_?void 0:_.uid)===String(null==x?void 0:x.authorUserId)),user_id:null==ek?void 0:null===(w=ek.info)||void 0===w?void 0:w.uid,type:v?"reply":"post",com_status:H}),z.current=!1},[Z,m,v,f,h,T,x,d,S,null==eb?void 0:eb.id_str,eM,eO,O]);(0,a.useEffect)(()=>{let e=()=>{V(!1),G(!1)};return document.addEventListener("click",e,!1),()=>{document.removeEventListener("click",e,!1)}},[]);let tt=(0,a.useCallback)(e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),G(!1)},[]);(0,a.useEffect)(()=>{v&&(Q(!0),setTimeout(()=>{var e;null===(e=P.current)||void 0===e||e.focus()},0))},[v]);let tn=(0,a.useCallback)(()=>{ez.Z.sendLog("inputText",{author_id:`${null==x?void 0:x.authorUserId}`,group_id:null==x?void 0:x.awemeId,log_pb:null==x?void 0:x.logPb,enter_from:(0,E.vM)(),click_position:v?"reply":"comment"}),!eR.current&&(eI.current=Date.now(),eR.current=!0)},[v,x]);(0,a.useEffect)(()=>((0,em.vP)(()=>{var e,t;return null===(t=P.current)||void 0===t?void 0:null===(e=t.blur)||void 0===e?void 0:e.call(t)}),()=>(0,em.xC)(blur)),[]),(0,a.useEffect)(()=>{var e;w||null===(e=P.current)||void 0===e||e.blur()},[w]);let tl=(0,a.useCallback)(()=>{Q(!0),setTimeout(()=>{var e;null===(e=P.current)||void 0===e||e.focus()},0)},[A]);(0,a.useEffect)(()=>{let e=e=>{if("video_detail"!==(0,j.yW)()&&!!D){if("Enter"===e.code&&(w||!p)){var t;null===(t=P.current)||void 0===t||t.focus(),(0,ef.hB)(),p||y.emit(y.EVENT.commentFocus)}}};return N||v||document.addEventListener("keydown",e),()=>!N&&!v&&document.removeEventListener("keydown",e)},[v,w,p,N,D]);let{loadMoreDefaultAtData:to,loadSearchAtData:ti,handleAtIconClick:tr,atUserDefaultData:ta,atUserSearchData:ts,isAtIconPoint:td,setIsAtIconPoint:tc}=function(e){let{fetchCommentMetionList:t,setIsAtIconSelected:n,isEmojiIconSelected:l,setIsEmojiIconSelected:r,setRenderRichText:s,awemeInfo:d,editorRef:c,focusInputTimeRef:u,isInputFocusRef:m}=e,f=(0,a.useRef)([]),[v,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)({statusCode:0,hasMore:!0,hasFetchData:!1,data:[],preQueryIds:"",searchText:""}),[_,x]=(0,a.useState)({statusCode:0,cursor:0,hasMore:!0,hasFetchData:!1,data:[]}),C=(0,a.useCallback)(async()=>{if(_.hasMore){let{statusCode:e,userList:n,cursor:l,hasMore:r}=await t({needPage:!0,cursor:_.cursor,count:20});n.forEach(e=>{e.name=e.nickname}),0===e?x(e=>e.cursor!==_.cursor?(0,o._)({},e):{statusCode:0,cursor:l,hasMore:r,hasFetchData:!0,data:[...e.data,...n]}):x(t=>t.cursor!==_.cursor?(0,o._)({},t):(0,i._)((0,o._)({},t),{statusCode:e,data:[...t.data]}))}},[_]),w=(0,a.useCallback)(async e=>{let{statusCode:t,userList:n}=await (0,ej.nf)({cursor:20,query:e,penetrateParams:(null==p?void 0:p.searchText)===e?{pre_query_ids:f.current.join()}:null}),l=[];n.forEach(e=>{l.push(e.uid)}),(null==p?void 0:p.searchText)===e?f.current.push(...l):f.current=l,g(l=>({statusCode:t,searchText:e,hasMore:(null==n?void 0:n.length)===20,hasFetchData:!1,data:(null==l?void 0:l.searchText)!==e?n:[].concat(null==l?void 0:l.data,n)}))},[p]);return{loadMoreDefaultAtData:C,loadSearchAtData:w,handleAtIconClick:async e=>{e.stopPropagation(),s(!0),setTimeout(()=>{l&&r(!1),ez.Z.sendLog("atPanelClick",{group_id:null==d?void 0:d.awemeId,enter_from:(0,E.vM)()}),n(e=>{var t,n;return null===(t=c.current)||void 0===t||t.focus(),null===(n=c.current)||void 0===n||n.addAtIcon(),y.emit(y.EVENT.videoStopPlayNext),!0}),h(!0),!m.current&&(u.current=Date.now(),m.current=!0)},100)},atUserDefaultData:_,atUserSearchData:p,isAtIconPoint:v,setIsAtIconPoint:h}}({fetchCommentMetionList:c,setIsAtIconSelected:V,isEmojiIconSelected:$,setIsEmojiIconSelected:G,setRenderRichText:Q,awemeInfo:x,editorRef:P,focusInputTimeRef:eI,isInputFocusRef:eR}),{handleEmojiIconClick:tu,handleEmojiSelected:tm}=function(e){let{isAtIconSelected:t,setIsAtIconSelected:n,awemeInfo:l,setRenderRichText:o,setIsEmojiIconSelected:i,isInputFocusRef:r,focusInputTimeRef:s,editorRef:d}=e,c=async e=>{null==e||e.stopPropagation(),o(!0),t&&n(!1),i(e=>!e),!r.current&&(s.current=Date.now(),r.current=!0)};return{handleEmojiIconClick:c,handleEmojiSelected:(0,a.useCallback)((e,t)=>{null==t||t.preventDefault(),d.current.addEmoji({text:e.name}),ez.Z.sendLog("clickEmoji",{author_id:`${null==l?void 0:l.authorUserId}`,group_id:null==l?void 0:l.awemeId,log_pb:null==l?void 0:l.logPb,enter_from:(0,E.vM)(),tab_name:"system"})},[])}}({isAtIconSelected:F,setIsAtIconSelected:V,awemeInfo:x,setRenderRichText:Q,setIsEmojiIconSelected:G,isInputFocusRef:eR,focusInputTimeRef:eI,editorRef:P});return(0,r.jsxs)("div",{className:u()(s,eE.default.wrapper,{[eE.default.wrapperFocus]:Y,[eE.default.browser360]:(0,ea.a2)()}),style:{height:"100%"},ref:U,onClick:tt,children:[ee&&(0,r.jsxs)("div",{className:eE.default.commentMessage,children:[(0,r.jsx)("div",{className:eE.default.message,children:(0,r.jsx)(eX.Z,{text:`${l}: ${(0,ev.LT)(R)}`,className:eE.default.message})}),(0,r.jsx)(eQ.Z,{width:12,height:12,src:ew.Z,viewBox:"0 0 12 12",className:eE.default.close,onClick:k})]}),(0,r.jsxs)("div",{className:u()(eE.default.container,"comment-input-inner-container",{[eE.default.noRadius]:ee,"comment-input-container-focus":Y}),onClick:tl,children:[(0,r.jsx)("div",{className:eE.default.inputContainer,onKeyDown:e=>{y.emit(y.EVENT.globalEventPrevented),e.stopPropagation(),["Tab","PageUp","PageDown"].includes(e.code)&&!window.a11ySwitch&&e.preventDefault()},onKeyUp:e=>{["KeyD"].includes(e.code)&&e.stopPropagation()},children:X?(0,r.jsx)(eZ.Z,{player:M,placeholder:eO?"通过关键词搜索表情":eY,ref:P,maxLength:eO?20:void 0,onChange:e=>{if(!!P.current){if(eO)return eB(e);K(e.length),0<e.length&&e.length<=500?Z||H(!0):Z&&H(!1)}},loadSearchAtData:ti,atUserDefaultData:ta,loadMoreDefaultAtData:to,atUserSearchData:ts,onEditFocus:()=>{q(!0),G(!1),tn()},handlePublishClick:te,onEditBlur:()=>q(!1),awemeInfo:x,isAtIconSelected:F,setIsAtIconSelected:V,refOuterContainer:U,isAtIconPoint:td,setIsAtIconPoint:tc,readOnly:e8||!D}):(0,r.jsx)("span",{className:eE.default.fakePlaceholder,children:eY})}),(0,r.jsxs)("div",{className:u()(eE.default.rightCt,"commentInput-right-ct",(eb||eM)&&eE.default.rightCtWithExtra),children:[eb&&(0,r.jsx)(eq,{onClose:()=>{eF()},srcList:null==eb?void 0:null===(t=eb.animate_url)||void 0===t?void 0:t.url_list},eb.id),!!eM&&(0,r.jsx)(eq,{hasImageViewer:!0,onClose:()=>{eF(!0)},srcList:[eM]},eM),(0,r.jsxs)("div",{className:eE.default.icons,children:[eL,eO?(0,r.jsx)("span",{className:u()({[eE.default.isSelected]:F,[eE.default.disable]:e8}),onClick:e=>{if(!e8)e.stopPropagation(),B.current&&B.current.then(e=>{B.current=null,P.current.resetInput(e),eB(""),eU(!1)})},children:(0,r.jsx)(eQ.Z,{width:36,height:36,src:ex})}):(0,r.jsxs)(r.Fragment,{children:[500<W&&(0,r.jsxs)("p",{className:eE.default.exceedNum,children:["-",W-500]}),b&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:u()({[eE.default.disable]:e8}),onClick:e=>{if(!e8)e.stopPropagation(),eH(),ez.Z.sendLog("picCommentButtonClick",{enter_from:(0,E.vM)()})},children:(0,r.jsx)(eQ.Z,{width:36,height:36,src:e_})})}),(0,r.jsx)("span",{className:u()({[eE.default.isSelected]:F,[eE.default.disable]:e8}),onClick:e=>{if(!e8)tr(e)},children:(0,r.jsx)(eQ.Z,{width:36,height:36,src:ep.Z})}),(0,r.jsx)("span",{className:u()({[eE.default.isSelected]:$,[eE.default.disable]:e8}),onClick:e=>{if(!e8)tu(e)},children:(0,r.jsx)(eQ.Z,{width:36,height:36,src:eg.Z})}),(0,r.jsx)("span",{className:u()(eE.default.publishBtn,{[eE.default.publishRedBtn]:Z||eb||eM}),onClick:te,children:(0,r.jsx)(eQ.Z,{width:36,height:36,src:eC})})]})]})]}),(0,r.jsx)(e1.r,{children:($||eO)&&(0,r.jsx)(eV,{trendingStickers:e5,favoriteStickers:e7,hitCommentExperience:b,awemeInfo:x,className:u()(eE.default.emoticonsBox,{[eE.default.isSwiper]:p,[eE.default.isSearch]:g,[eE.default.hidden]:!$&&!eO}),onDeleteFavoriteSticker:e4,onStickerClick:e=>{eG(e),eU(!1),eB(""),eO&&B.current&&B.current.then(e=>{P.current.resetInput(e),B.current=null})},onEmojiClick:tm,refOuterContainer:U,isActive:$,searchKeyword:eD,searchMode:eO,onSearchMode:()=>{eU(!0),ez.Z.sendLog("emojiSearchClick",{enter_from:(0,E.vM)(),enter_method:"comment"}),B.current=P.current.clearInput().then(e=>(P.current.focus(),e))},abtestData:A})})]})]})}var e5=n("18199");function e7(e){let{cid:t,fullScreenTarget:n,changeLoginStatus:l}=e;return(0,r.jsx)("div",{className:u()(e5.default.container,"comment-input-un-login-container"),onClick:e=>{var o,i,r;null==e||null===(o=e.preventDefault)||void 0===o||o.call(e),(0,W.default)({success:async()=>{l?l():window.location.reload()},enterMethod:t?"reply":"comment",headerText:"登录即可发表评论",next:`https://${null===(r=window)||void 0===r?void 0:null===(i=r.location)||void 0===i?void 0:i.host}`},(0,b.r)()&&n)},children:(0,r.jsxs)("div",{className:e5.default.textContainer,children:[er.a.t("please_go_first",{},"请先"),(0,r.jsx)("span",{className:e5.default.loginText,children:er.a.t("login_1",{},"登录")}),er.a.t("leave_a_comment_later",{},"后发表评论")]})})}var e4=n("176638"),e8=n("930322");function e9(e){let{awemeInfo:t}=e;return(0,r.jsx)("div",{className:e8.default.container,onClick:()=>{y.emit(y.EVENT.videoPause,"XgCommentInput_onClick"),ez.Z.sendLog("xiguaPostCommentClick",{author_id:null==t?void 0:t.authorUserId,group_id:null==t?void 0:t.awemeId}),window.open((0,L.Tl)({videoid:null==t?void 0:t.awemeId,param:"comment_focus",value:"1"}),(0,e4.f)()?"_self":void 0)},children:(0,r.jsxs)("div",{className:e8.default.textContainer,children:["前往",(0,r.jsx)("span",{className:e8.default.loginText,children:"\xa0西瓜视频\xa0"}),"发布评论"]})})}function te(e){var t,n,{isLogin:l=!0}=e,i=(0,X._)(e,["isLogin"]);if(l)return(null==i?void 0:null===(t=i.awemeInfo)||void 0===t?void 0:t.awemeType)===C.e.XgVideo?(0,r.jsx)(e9,{awemeInfo:null==i?void 0:i.awemeInfo}):(0,r.jsx)(e6,(0,o._)({},i));return(null==i?void 0:null===(n=i.awemeInfo)||void 0===n?void 0:n.awemeType)===C.e.XgVideo?(0,r.jsx)(e9,{awemeInfo:null==i?void 0:i.awemeInfo}):(0,r.jsx)(e7,(0,o._)({},i))}var tt=n("985180"),tn=n("370928"),tl=n("54291"),to=n("493449");let ti=a.memo(function(e){let{hintText:t,style:n,showBar:l=!1,showAnimate:o=!1,hideBar:i}=e,s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{l&&to.Z.sendLog("addToDesktopShow",{enter_from:(0,E.vM)(),type:"comment",channel_id:M.g.Notice,ug_channel_id:I.Le.getConfig(I.gI.WebUgChannelId)||""})},[l]),(0,r.jsx)(r.Fragment,{children:l?(0,r.jsxs)("div",{className:tt.default.downloadBarContainer,style:n,children:[(0,r.jsx)("div",{className:tt.default.hintText,children:t}),(0,r.jsx)(tn.o6,{channelId:M.g.Notice,onDownload:()=>{to.Z.sendLog("addToDesktopClick",{enter_from:(0,E.vM)(),guide_type:"comment",type:"comment",channel_id:M.g.Notice,ug_channel_id:I.Le.getConfig(I.gI.WebUgChannelId)||""}),i()},alinkRef:s,className:tt.default.downloadButton}),(0,r.jsx)(tn.PZ,{onClick:()=>{to.Z.sendLog("addToDesktopClose",{type:"comment"}),i()}}),o&&(0,r.jsx)(tl.Z,{onClick:()=>{var e;null===(e=s.current)||void 0===e||e.click()}})]}):null})});var tr=n("288182"),ta=n("32639"),ts=n("831202"),td=n("228861"),tc=n("544933");let tu={loginButtonShow:{eventName:"login_button_show",params:{enter_from:(0,E.vM)(),page_type:(0,j.yW)()}},loginButtonClick:{eventName:"login_button_click",params:{enter_from:(0,E.vM)(),page_type:(0,j.yW)(),action:""}},commentLoginGuideShow:{eventName:"comment_login_guide_show",params:{enter_from:(0,j.yW)(),page_type:(0,j.yW)()}},commentLoginGuideClick:{eventName:"comment_login_guide_click",params:{enter_from:(0,j.yW)(),action:""}}};var tm=new tc.h(tu);n("139483");let tf=e=>{let{success:t=null,host:n=null,next:l=null,enterMethod:s="comment_login_guide",destroy:d=null,change:c=null,commentLoginType:m=""}=e,v=(0,a.useRef)(null),h=(0,a.useRef)(null),p=()=>{var e;c("none"),null===(e=h.current)||void 0===e||e.call(h),null==d||d()},g=e=>{e.stopPropagation()};(0,a.useEffect)(()=>()=>{var e,t;null===(e=h.current)||void 0===e||e.call(h),null==v||null===(t=v.current)||void 0===t||t.remove(),null==d||d()},[]),(0,a.useEffect)(()=>{tm.sendLog("commentLoginGuideShow")},[]);let _=a.useCallback(async e=>{if(!e)return;let n=await (0,td.HJ)({success:t,next:l,ScanCodeDescription:()=>(0,r.jsxs)("div",{className:"scan",children:[(0,r.jsx)("div",{className:"scan__title",onClick:g,children:"打开【抖音APP】扫描二维码"}),(0,r.jsx)("div",{className:"scan__desc",onClick:g,children:"登录后即可参与发布讨论，视频推荐更个性化哦"}),(0,r.jsx)(f.Button,{theme:"solid",className:"scan__button",onClick:e=>{var t,l;e.stopPropagation(),tm.sendLog("commentLoginGuideClick",{action:"login"}),"force_login"!==m&&p(),(0,W.default)({headerText:"登录即可发表评论",success:e=>{var t;setTimeout(p,0),null==n||null===(t=n.success)||void 0===t||t.call(n,e),null==c||c("none")},enterMethod:"comment_login_guide",next:`https://${null===(l=window)||void 0===l?void 0:null===(t=l.location)||void 0===t?void 0:t.host}`,isActive:"1"}),tm.sendLog("loginButtonClick",{action:"login"})},children:"立即登录"}),"force_login"!==m?(0,r.jsx)(f.Button,{className:"scan__button scan__button-continue",onClick:()=>{p(),tm.sendLog("commentLoginGuideClick",{action:"continue"})},theme:"solid",children:"继续看评论"}):null]}),enterMethod:s}),a=new(await (0,td._j)())((0,i._)((0,o._)({},n),{success:e=>{var t;setTimeout(p,0),null==n||null===(t=n.success)||void 0===t||t.call(n,e),null==c||c("none"),(0,ta.a)()},ele:e}));ts.oe.event.info({name:ts.Mo.PassportLoginEntry,report:{enterMethod:s,entry:"CLoginFull"}}),h.current=a.init()},[]);return(0,r.jsx)("div",{className:u()("recommend-comment-login",{"recommend-comment-login-mask":"login_guide"===m}),ref:v,onClick:e=>{e.stopPropagation()},children:(0,r.jsx)("div",{className:"recommend-comment-login__contain",ref:_})})};n("832241");let tv=e=>{let{success:t=null,enterMethod:n="",destroy:l=null,change:o=null}=e,i=(0,a.useRef)(null),s=()=>{null==l||l()};return(0,a.useEffect)(()=>{tm.sendLog("loginButtonShow")},[]),(0,r.jsx)("div",{className:"video-comment-high",ref:i,children:(0,r.jsxs)("div",{className:"video-comment-high__contain",children:[(0,r.jsx)("div",{className:"video-comment-high__contain__desc",children:"登录后即可查看所有精彩评论，还可以参与视频讨论哦"}),(0,r.jsx)(f.Button,{className:"video-comment-high__contain__btn",onClick:()=>{var e,n;(0,W.default)({success:()=>{setTimeout(s,0),null==t||t(),null==o||o("")},enterMethod:"comment_login_button",next:`https://${null===(n=window)||void 0===n?void 0:null===(e=n.location)||void 0===e?void 0:e.host}`}),tm.sendLog("loginButtonClick")},theme:"solid",children:"立即登录"})]})})};n("878161");let th=e=>{let{success:t=null,enterMethod:n="",destroy:l=null,change:o=null,commentLoginType:i="",title:s="登录后即可参与发布讨论，视频推荐更个性化哦",canClose:d=!0}=e,[c,u]=(0,a.useState)(!0),m=()=>{if(!!d)u(!1),null==l||l()};return((0,a.useEffect)(()=>{tm.sendLog("commentLoginGuideShow")},[]),c)?(0,r.jsxs)("div",{className:"video-comment-cover",onClick:m,children:[(0,r.jsx)("div",{className:"video-comment-cover__desc",children:s}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Button,{className:"video-comment-cover__btn",onClick:e=>{var n,i;e.stopPropagation(),tm.sendLog("commentLoginGuideClick",{action:"login"}),(0,W.default)({success:()=>{setTimeout(()=>{null==l||l()},0),null==t||t(),null==o||o("none")},enterMethod:"comment_login_button",next:`https://${null===(i=window)||void 0===i?void 0:null===(n=i.location)||void 0===n?void 0:n.host}`})},children:"立即登录"}),d&&(0,r.jsx)(f.Button,{className:"video-comment-cover__btn video-comment-cover__btn-no",onClick:e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),tm.sendLog("commentLoginGuideClick",{action:"continue"}),m()},theme:"solid",children:"暂不登录"})]})]}):null};n("631875");let tp=e=>{let{success:t=null,host:n=null,next:l=null,enterMethod:s="",destroy:d=null,showHeader:c=!0,className:u}=e,m=(0,a.useRef)(null),[f,v]=(0,a.useState)(!0),h=(0,a.useRef)(null),p=()=>{var e;null===(e=m.current)||void 0===e||e.call(m),null==d||d()},g=async()=>{v(!0);let e=await (0,td.HJ)({success:t,next:l,enterMethod:s,isShowOtherLogin:!0,onShowOtherLogin:()=>{var e,n;(0,W.default)({isKX:!1,success:e=>{null==t||t(e),setTimeout(p,0),(0,ta.a)()},enterMethod:s,next:l||`https://${null===(n=window)||void 0===n?void 0:null===(e=n.location)||void 0===e?void 0:e.host}`})}}),n=await (0,td._j)();h.current=new n((0,i._)((0,o._)({},e),{success:t=>{var n;setTimeout(p,0),null==e||null===(n=e.success)||void 0===n||n.call(e,t),(0,ta.a)()}})),v(!1)},_=(0,a.useCallback)(()=>{var e,t;return(null===(e=h.current)||void 0===e?void 0:e.LoginContainer)?null===(t=h.current)||void 0===t?void 0:t.LoginContainer():(0,r.jsx)("div",{})},[]);return(0,a.useEffect)(()=>{g()},[]),(0,r.jsxs)("div",{id:"comment-login-detail-cover",className:u,children:[c&&!f&&(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("span",{children:"登录后可查看评论"})}),f?null:(0,r.jsx)(_,{})]})};var tg=n("33441"),t_=n("536216");let tx=e=>{let{abtestData:t}=e,[n,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),r=(0,a.useCallback)(async()=>{let{canShowGuide:e}=(0,t_.DR)("comment"),t=(0,tg.JL)("comment"),n=await (0,tg.k4)(!0);e&&n&&t&&e?((0,t_.bj)("comment"),l(!0),i(!0)):(l(!1),i(!1))},[t]);return{showBar:r,hideBar:(0,a.useCallback)(()=>{(0,t_.zh)("comment"),l(!1)},[]),isShow:n,showAnimation:o}};var tC=n("567754"),tw=n("909543"),ty=n("149250"),tE=n("553173"),tj=n("577786"),tS=n("801849");function tN(){return(tN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let tT=a.forwardRef(function(e,t){return a.createElement("svg",tN({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:t},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.29289 7.29289C2.90237 7.68342 2.90237 8.31658 3.29289 8.70711L11.2929 16.7071C11.6834 17.0976 12.3166 17.0976 12.7071 16.7071L20.7071 8.70711C21.0976 8.31658 21.0976 7.68342 20.7071 7.29289C20.3166 6.90237 19.6834 6.90237 19.2929 7.29289L12 14.5858L4.70711 7.29289C4.31658 6.90237 3.68342 6.90237 3.29289 7.29289Z",fill:"currentColor"}))});tT.elementType="Icon";var tI=n("903868"),tR=n("466776"),tk=function(e){var t;let{commentInfo:n,awemeInfo:l,awemelogPb:o,level:i,isSpider:s=!1,abtestData:d,refAvatar:c}=e,{user:f}=n,{nickname:v,avatarUri:h,secUid:p}=f,g=(null==l?void 0:l.awemeType)===C.e.XgVideo,{reportExtraParams:_,isDetail:x}=(0,a.useContext)(eJ.X),[w,E]=(0,m.Z)(),j=(0,a.useRef)(!1),{isListenVideoMiniWin:S}=(0,tI.Iq)(e=>{let{isListenVideoMiniWin:t}=e;return{isListenVideoMiniWin:t}}),N=(0,a.useMemo)(()=>!!j.current||!!E&&(j.current=!0,!0),[E]),T=(e,t)=>{var n;let o={author_id:null==l?void 0:null===(n=l.authorInfo)||void 0===n?void 0:n.uid,group_id:null==l?void 0:l.awemeId,log_pb:e,from_gid:null==l?void 0:l.groupId,enter_from:null==t?void 0:t.enter_from,tab_name:null==t?void 0:t.tab_name};return(0,L.HC)(p,`enter_method=comment&${(0,tC.stringify)(o)}`)},I=(0,a.useCallback)(e=>{if(!g)S&&ty.T.exit(),(0,tS.$)(d)&&(e.preventDefault(),y.emit(y.EVENT.changeRoute,{to:T(o,_)}))},[g,d,o,_,T,S]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:u()(tR.default.avatar,"comment-item-avatar"),ref:e=>{w.current=e},children:N?(0,r.jsx)("div",{"data-click-from":"click_icon",ref:c,className:tR.default.avatarPannelWrapper,children:(0,r.jsx)(Z.a,{href:g?(0,L.GN)(null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.uid):T(o,_),target:"_blank",rel:"noopener noreferrer nofollow",isNeedSeoOpt:!0,onClick:I,children:(0,r.jsx)(q.q,{src:h,className:u()(tR.default.commentAvatar,{[tR.default.commentAvatarPerf]:!x,[tR.default.replyCommentAvatar]:2===i,[tR.default.replyCommentAvatarPerf]:!x&&2===i}),type:2===i?"extraExtraSmall":"extraSmall",alt:`${v}头像`,isSpider:s})})}):(0,r.jsx)("div",{ref:c,className:u()(tR.default.commentAvatar,tR.default.noAvatar,{[tR.default.commentAvatarPerf]:!x,[tR.default.replyCommentAvatar]:2===i,[tR.default.replyCommentAvatarPerf]:2===i}),style:{border:"1px solid transparent",boxSizing:"content-box",position:"relative"}})})})};let tL=(0,a.forwardRef)((e,t)=>(0,r.jsxs)("svg",(0,i._)((0,o._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,r.jsx)("path",{d:"M5.409 3.6a.591.591 0 1 1 1.182 0L6.547 6.66a.547.547 0 0 1-1.094 0L5.41 3.6zM6 9.12A.66.66 0 1 0 6 7.8a.66.66 0 0 0 0 1.32z",fill:"#fff",fillOpacity:".5"}),(0,r.jsx)("path",{d:"M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12zm0-1.08a4.92 4.92 0 1 1 0-9.84 4.92 4.92 0 0 1 0 9.84z",fill:"#fff",fillOpacity:".5"})]}))),tb=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.646 4.168c-2.238 0-4.035 1.919-4.035 4.152l.002.13a.834.834 0 0 0-.001.073c.006.3.075.66.15.962.074.294.178.622.294.86.467 1.004 1.284 1.979 2.071 2.78a23.69 23.69 0 0 0 2.646 2.323l.015.012.012.01c.174.175.543.54 1.2.54h.019c.186 0 .63 0 1.028-.387l.033-.027c.033-.029.08-.067.14-.117l.003-.003c.436-.359 1.456-1.2 2.462-2.214.644-.646 1.312-1.396 1.822-2.17a7.94 7.94 0 0 0 .2-.318.84.84 0 0 0 .063-.13.956.956 0 0 1 .11-.214.835.835 0 0 0 .074-.144c.029-.073.05-.121.066-.154l.003-.007a.832.832 0 0 0 .147-.29c.125-.444.21-.835.219-1.316a.82.82 0 0 0-.002-.067 5.39 5.39 0 0 0 .002-.16c-.015-2.22-1.807-4.124-4.035-4.124-.845 0-1.667.262-2.316.789a4.029 4.029 0 0 0-2.392-.789zm7.076 4.153V8.424l-.002.07c0 .008 0 .022.002.039a3.065 3.065 0 0 1-.121.721 1.9 1.9 0 0 0-.078.144 3.297 3.297 0 0 0-.089.2c-.083.135-.137.24-.193.38a6.64 6.64 0 0 1-.124.195v.001c-.425.644-1.007 1.305-1.613 1.912l-.002.001a31.607 31.607 0 0 1-2.342 2.106l-.032.026-.12.1-.048-.046c-.05-.05-.119-.105-.152-.131l-.006-.005A22.003 22.003 0 0 1 7.32 11.96l-.003-.003c-.747-.76-1.408-1.577-1.753-2.323a3.149 3.149 0 0 1-.185-.555 3.468 3.468 0 0 1-.1-.553.964.964 0 0 0 0-.104V8.42a3.56 3.56 0 0 1-.001-.099c0-1.373 1.11-2.485 2.368-2.485.662 0 1.288.269 1.848.85a.833.833 0 0 0 1.282-.099c.33-.47.892-.751 1.578-.751 1.258 0 2.368 1.113 2.368 2.485z",fill:"#fff",fillOpacity:".7",opacity:".9"})}))),tM=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.106 5.412c.571-.814 1.51-1.244 2.542-1.244 1.966 0 3.602 1.706 3.602 3.734l-.002.134V8.1a.03.03 0 0 0 .002.009c-.008.427-.081.78-.212 1.245-.074.084-.143.241-.212.415-.108.168-.15.25-.212.415a8.504 8.504 0 0 1-.298.464c-.488.71-1.108 1.414-1.734 2.05-1.13 1.154-2.304 2.121-2.806 2.535-.134.11-.22.182-.245.206-.177.177-.354.177-.531.177h-.025c-.338-.009-.51-.182-.683-.355a1.39 1.39 0 0 0-.083-.07 25.514 25.514 0 0 1-3.037-2.685c-.814-.845-1.582-1.799-2.014-2.732-.177-.354-.398-1.197-.408-1.665.004-.004.003-.026.002-.071l-.002-.136c0-2.03 1.634-3.734 3.602-3.734 1.03 0 1.97.43 2.754 1.244z",fill:"#FE2C55",opacity:".9"})}))),tO=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{d:"M8.331 6.612l1.24 1.005c.08.065.12.166.107.267l-.222 1.71c-.014.11.12.178.203.1l1.954-1.857a.294.294 0 0 0 .036-.386l-.582-.806a.293.293 0 0 1-.03-.295l.763-1.655.356-.67A3.06 3.06 0 0 1 12.55 4C14.44 4 16 5.504 16 7.723c0 2.462-2.093 4.906-5.297 6.968-.246.163-.522.309-.706.309-.184 0-.454-.146-.7-.31C6.093 12.63 4 10.186 4 7.724 4 5.503 5.56 4 7.45 4c.402 0 .768.075 1.095.211l-.06.382-.26 1.747a.295.295 0 0 0 .106.272z",fill:"#fff",fillOpacity:".8"})})));var tD=function(e){let{isSpider:t,isDigged:n,otherDiggCount:l,diggClick:o,stepOnClick:i,isXgVideo:s,abtestData:d}=e,[c,m]=(0,a.useState)(!1),v=(0,a.useRef)(0),h=(0,a.useRef)(null);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:tR.default.stepOnContainer,children:[(0,r.jsxs)("div",{className:tR.default.stepOnText,onClick:()=>{m(!0),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{m(!1),v.current=0},2e3)},onMouseOut:()=>{m(!1)},children:[(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:tL,width:12,height:12,viewBox:"0 0 12 12",className:tR.default.warningSvg}),(0,r.jsx)("span",{children:"该评论被折叠"})]}),(0,r.jsxs)("div",{className:tR.default.diggAndStepOn,children:[(0,r.jsxs)("p",{className:u()(tR.default.stats,{[tR.default.isSelected]:n}),onClick:o,children:[!t&&(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:n?tM:tb,width:20,height:20,viewBox:"0 0 20 20",className:tR.default.diggSvg}),(0,r.jsx)("span",{children:(0,ev.qe)(l+Number(n)||0)})]}),!s&&(0,r.jsx)(f.Tooltip,{position:"bottom",trigger:"custom",visible:c,content:(0,r.jsx)("div",{className:"isDark",children:"取消点踩展开评论"}),getPopupContainer:()=>h.current||document.body,children:(0,r.jsx)("p",{ref:h,className:u()(tR.default.stepOn,tR.default.isSelected),onClick:i,children:!t&&(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:tO,width:20,height:20,viewBox:"0 0 20 20",className:tR.default.diggSvg})})})]})]})})};n("284961"),n("927234");let tA=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 17.617C6 11.561 11.578 7 18 7s12 4.561 12 10.617c0 3.036-1.51 5.529-3.749 7.728-.187.184-.381.364-.58.54-1.925 2.082-3.911 3.417-5.847 3.973-.77.221-1.702.242-2.454-.381-.68-.564-.837-1.361-.878-1.823a3.848 3.848 0 0 1-.01-.136C10.898 26.91 6 23.264 6 17.617zM18 10c-5.177 0-9 3.602-9 7.617 0 3.867 3.794 6.992 9.152 6.992h1.5v1.717l-.06.206c0-.001-.03.104-.06.259 1.155-.46 2.515-1.394 3.984-2.996l.056-.06.063-.055c.182-.16.353-.318.514-.475C26.075 21.312 27 19.543 27 17.617 27 13.602 23.177 10 18 10z",fill:"#2F3035",fillOpacity:".9"})}))),tP=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{d:"M15.58 8.58c0 .1 0 .21-.01.31v.13l-.01.06c-.04.44-.13.8-.27 1.22-.02.08-.06.15-.12.21h.01c-.04.07-.07.13-.1.19a.37.37 0 0 1-.05.11c-.07.11-.09.14-.13.23-.01.04-.03.07-.05.1-.67 1.09-1.71 2.14-2.56 2.91-.43.39-.83.72-1.12.97-.13.1-.25.19-.33.26l-.03.03-.11.08h-.01l-.01.02h-.01c-.1.11-.33.33-.67.41h-.01c-.09.04-.19.07-.29.08-.58.08-.95-.23-1.11-.37l-.03-.03c-.64-.45-1.27-.93-1.87-1.43-.98-.83-2.16-1.95-2.84-3.13-.14-.24-.26-.5-.36-.77-.11-.29-.2-.59-.25-.89h-.01v-.06l-.02-.14c-.29-2.05.92-4.16 2.92-4.45.15-.02.29-.03.43-.03.88 0 1.7.36 2.41.99.14.13.23.31.23.5l.02 1.29 1.3.96c.14.1.23.26.26.44.03.17-.01.35-.12.5l-.94 1.32.63 1.34c.07.17.08.35.02.51a.69.69 0 0 1-.35.38c-.16.08-.34.09-.51.03a.67.67 0 0 1-.38-.34l-.81-1.7a.702.702 0 0 1-.06-.35c.01-.12.05-.23.12-.33l.79-1.11-1.02-.76a.55.55 0 0 1-.2-.23.641.641 0 0 1-.08-.3l-.02-1.31c-.43-.32-.86-.47-1.28-.47-.08 0-.17 0-.25.02-1.07.15-1.98 1.39-1.77 2.92l.02.1v.02s.01.05.01.08c.03.14.09.36.18.59.09.26.19.46.24.55h.01c.57.98 1.6 1.98 2.55 2.79.54.45 1.09.87 1.66 1.28l.03.02c.07.06.16.12.2.15.03.03.06.05.09.07.03-.01.07-.02.11-.03l.09-.09c.05-.04.13-.11.2-.16l.02-.02.03-.03.32-.26c.36-.29.72-.6 1.07-.91.81-.74 1.72-1.67 2.29-2.58.06-.13.11-.23.19-.36.03-.06.06-.13.09-.19.02-.04.05-.09.09-.14.09-.31.14-.53.17-.78v-.2c.12-1.49-.85-2.63-1.89-2.7h-.12c-.57 0-1.19.26-1.49.68-.05.07-.11.14-.19.18a.55.55 0 0 1-.25.1c-.09.02-.18.02-.27 0a.545.545 0 0 1-.24-.12.54.54 0 0 1-.18-.19.825.825 0 0 1-.1-.26.576.576 0 0 1 .02-.26c.02-.09.06-.17.11-.24.6-.84 1.67-1.25 2.59-1.25.08 0 .15 0 .22.01 1.87.12 3.16 1.92 3.16 3.83z",fill:"#fff",fillOpacity:".5"})})));var tB=n("375944");let tU=(0,a.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,i._)((0,o._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{d:"M12.066 5.295l-.553.578.553-.578zM10.281 7.3v.8h.8v-.8h-.8zm-.213.002l-.022.8h.035l-.013-.8zM4.823 9.35l.585.545-.585-.545zm-1.821 4.688l.8.024v-.049l-.8.025zm.632.765l-.703-.383.703.383zm6.647-2.056h.8v-.67l-.658-.118-.142.787zm1.754 1.965l.53.6-.53-.6zm4.275-3.776l.53.599-.53-.6zm.03-1.554l.553-.578-.553.578zm-5.259-3.326c0-.224.27-.34.432-.184l1.106-1.156c-1.18-1.13-3.138-.293-3.138 1.34h1.6zm0 1.244V6.057h-1.6v1.244h1.6zm-1 .801l.2-.001V6.5c-.076 0-.152 0-.228.002l.028 1.6zM5.408 9.896c1.605-1.72 3.93-1.813 4.638-1.794l.043-1.6c-.813-.021-3.754.054-5.851 2.303l1.17 1.091zm-1.607 4.118c-.014-.44.096-1.169.373-1.963.275-.79.69-1.572 1.234-2.155l-1.17-1.09c-.738.79-1.25 1.788-1.575 2.718-.322.924-.483 1.853-.461 2.54l1.6-.05zm-.87.407a.463.463 0 0 1 .234-.208.558.558 0 0 1 .485.034c.158.09.187.207.178.177a1.205 1.205 0 0 1-.027-.36l-1.6-.049c-.01.335.02.639.104.9.084.26.247.546.55.72.318.183.66.165.921.056.246-.101.442-.286.56-.504l-1.405-.766zm7.35-1.673l.141-.788h-.002l-.005-.001-.014-.003a3.758 3.758 0 0 0-.232-.034 11.84 11.84 0 0 0-2.684-.053c-1.532.15-3.549.708-4.554 2.552l1.405.766c.61-1.12 1.916-1.59 3.305-1.726a10.234 10.234 0 0 1 2.492.073h.007v.001l.141-.787zm.8 1.174v-1.175h-1.6v1.175h1.6zm.425.192a.255.255 0 0 1-.425-.192h-1.6c0 1.599 1.886 2.449 3.084 1.39l-1.06-1.198zm4.274-3.777l-4.274 3.777 1.059 1.199 4.274-3.777-1.059-1.199zm.007-.376a.255.255 0 0 1-.007.376l1.06 1.199c.813-.72.838-1.98.053-2.731L15.787 9.96zm-4.274-4.088l4.274 4.088 1.106-1.156-4.274-4.088-1.106 1.156z",fill:"#fff"})})));var tz=n("915800"),tF=n("322642"),tV=function(e){let{userInfo:t,handleUnLoginClick:n,commentInfo:l,abtestData:o,toast:i,awemelogPb:s,awemeInfo:d,divider:c}=e,m=(0,a.useRef)(null),f=(0,a.useRef)(-240),v=(0,a.useRef)(0),h=(0,a.useRef)(0),p=(0,a.useRef)(300),[g,_]=(0,a.useState)(!1),x=!!t;return(0,a.useEffect)(()=>{try{var e,t;let n=null===(e=m.current)||void 0===e?void 0:e.closest(".comment-mainContent");return g&&n&&(n.style.overflow="hidden",n.style.paddingRight=(null===(t=(0,tB.fV)())||void 0===t?void 0:t.os)==="Windows"?"16px":""),()=>{n&&(n.style.overflow="",n.style.paddingRight="")}}catch(e){}},[g]),(0,r.jsxs)("div",{className:u()(tR.default.shareContainer,{[tR.default.noDivider]:!c}),ref:m,onClick:()=>{if(!x){n("share_comment");return}if(void 0!==l.status&&![5,1].includes(l.status))return i("此评论不支持分享");if(_(!0),!m.current)return;let e=x?407:295;(null==d?void 0:d.awemeType)===C.e.XgVideo&&(e=116);let t=m.current.offsetHeight||0,o=m.current.closest(".comment-mainContent");if(o){var r,a,s,c;let n=o.getBoundingClientRect(),l=n.x,i=n.y,d=n.bottom,u=null!==(s=null===(r=m.current.getBoundingClientRect())||void 0===r?void 0:r.x)&&void 0!==s?s:0,g=null!==(c=null===(a=m.current.getBoundingClientRect())||void 0===a?void 0:a.y)&&void 0!==c?c:0,_=m.current.getBoundingClientRect().bottom;p.current=Math.min(n.width-24,300),f.current=-Math.min(u-l-12,240);let x=Math.max(g-i-12,0),C=Math.max(d-_-12,0);x>e?(v.current=e,h.current=0):C>e?(v.current=-t,h.current=0):x>C?(v.current=x,h.current=x):(v.current=-t,h.current=C)}},onMouseLeave:()=>{var e;if((null===(e=document.activeElement)||void 0===e?void 0:e.tagName)!=="INPUT")_(!1)},children:[g?(0,r.jsx)("div",{style:{position:"relative",left:`${f.current}px`,bottom:v.current?`${v.current}px`:"unset",alignSelf:"start"},children:(0,r.jsx)(tz.Z,{shareShowMethod:"comment",abtestData:o,toast:i,awemelogPb:s,awemeInfo:d,commentInfo:l,hidden:!g,loginUserInfo:{isLogin:x,info:t},className:u()(tR.default.shareBox),shareType:tF.y.Comment,handleClose:()=>{_(!1)},hideShareContent:!0,shareeListHeight:h.current,width:p.current})}):null,c&&(0,r.jsx)("div",{className:u()(tR.default.columnDivider,"comment-item-stats-columnDivider")}),(0,r.jsxs)("div",{className:u()(tR.default.shareButtonLabel),children:[(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:tU,width:20,height:20,className:tR.default.shareSvg,viewBox:"0 0 20 20"}),(0,r.jsx)("div",{children:"分享"})]})]})},tZ=n("34644"),tH=n("469505"),t$=n("893168"),tG=n("801923");let tW=e=>{let{url:t,onError:n,wrapperClassName:l,onRetry:s}=e,d=(0,X._)(e,["url","onError","wrapperClassName","onRetry"]),[c,m]=(0,a.useState)(0),[f,v]=(0,a.useState)(!1);return(0,a.useLayoutEffect)(()=>{m(0),v(!1)},[t]),(0,r.jsxs)("div",{className:u()(t$.default.autoRetryImage,{[t$.default.error]:f,error:f},l),children:[!f&&(0,r.jsx)("img",(0,i._)((0,o._)({},d),{src:t[c],onError:e=>{if(c<t.length-1){m(c+1);return}v(!0),null==n||n(e)}})),f&&(0,r.jsx)(tG.t,{className:t$.default.retryIcon,onClick:()=>{null==s||s(),m(0),v(!1)}})]})};var tK=function(){let{imagePreview:e,imageOrigin:t,getImageViewerContainer:n,className:o,previewClassName:i,hitCommentExperience:s,onClick:d,commentList:c,contextMenu:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[v,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(),[_,x]=(0,a.useState)(),C=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(p)return null==l||l(void 0),l=g,()=>{l===g&&(l=void 0)}},[p]);let w="showImageViewer";return e&&t?(0,r.jsxs)("div",{className:u()(tH.default.portalImageContainer,o),onContextMenu:e=>{if(m&&s){e.preventDefault();let t=Array.from(document.querySelectorAll(".comment-mainContent")||[]).pop();if(t){let{currentTarget:n}=e;t.onscroll=()=>{g(void 0)},t.onclick=()=>{g(void 0)},n.getBoundingClientRect().top-t.getBoundingClientRect().top>50?g("top"):g("bottom")}}},children:[(0,r.jsx)(f.Tooltip,{visible:!!p,content:(0,r.jsx)("div",{className:tH.default.tipContent,onClickCapture:null==m?void 0:m.onClick,children:null==m?void 0:m.label}),trigger:"custom",position:p,getPopupContainer:()=>C.current||document.body,children:(0,r.jsx)("div",{ref:C,style:{position:"relative"},children:(0,r.jsx)(tW,{url:Array.isArray(e)?e:[e],onClick:e=>{(Array.isArray(t)&&t.length>0||t)&&(y.emit(y.EVENT.videoStopPlayNext),x(e.target.src),h(!0),(0,tZ.o)({pauseCustomShortcut:!0,pausePlayControlShortcut:!0,pauseGlobalShortcut:!0},w),null==d||d(e))},className:u()(tH.default.portalImg,i)})})}),v&&(0,r.jsx)(eY.O,{hitCommentExperience:s,getContainer:n,previewUrl:_,commentList:c,onClose:()=>{y.emit(y.EVENT.videoRemoveStopPlayNext),h(!1),(0,tZ.m)(w)},originUrl:t})]}):null},tY=n("411362"),tq=new tc.h({cancelLikeComment:{eventName:"cancel_like_comment",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",comment_id:"",comment_user_id:""}},likeComment:{eventName:"like_comment",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",comment_id:"",comment_user_id:"",from_xigua:0,comment_category:"",post_time:"",relation:"",tab_name:""}},deleteComment:{eventName:"delete_comment",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",comment_id:"",comment_user_id:""}},clickReplyIcon:{eventName:"click_reply_icon",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",comment_id:"",comment_user_id:"",from_xigua:0}},enterPersonalHomepage:{eventName:"enter_personal_homepage",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",to_user_id:"",enter_method:""}},enterPersonalDetail:{eventName:"enter_personal_detail",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",to_user_id:"",enter_method:""}},trendingWordsShow:{eventName:"trending_words_show",params:{words_source:"",enter_group_id:"",group_id:"",words_content:"",words_position:0,enter_from:"",comment_id:""}},trendingWordsClick:{eventName:"trending_words_click",params:{words_source:"",enter_group_id:"",group_id:"",words_content:"",words_position:0,enter_from:"",comment_id:""}},dislikeComment:{eventName:"dislike_comment",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",comment_id:"",comment_user_id:"",from_xigua:0,comment_category:"",post_time:"",relation:"",tab_name:""}},cancelDislikeComment:{eventName:"cancel_dislike_comment",params:{enter_from:"",group_id:""}},commentListShow:{eventName:"comment_list_show",params:{enter_from:"",group_id:"",duration:0,comment_panel_position:"",comment_related_search_type:""}},commentShow:{eventName:"comment_show",params:{enter_from:"",group_id:"",comment_time:"",comment_type:"",comment_id:"",comment_level:""}},commentStayTime:{eventName:"comment_stay_time",params:{enter_from:"",group_id:"",comment_id:"",comment_level:"",duration:0,comment_named_entity_search_type:""}},comment_duration:{eventName:"comment_duration",params:{enter_from:"",group_id:"",comment_id:"",comment_level:"",duration:0,comment_panel_position:"",comment_category:"",comment_named_entity_search_type:""}},unfoldReplyComment:{eventName:"unfold_reply_comment",params:{enter_from:"",group_id:"",comment_id:"",count:0}},show_more_reply:{eventName:"show_more_reply",params:{enter_from:"",group_id:"",comment_id:"",count:0,comment_panel_position:""}},foldReplyComment:{eventName:"fold_reply_comment",params:{enter_from:"",group_id:""}},clickCommentPic:{eventName:"click_comment_pic",params:{comment_type:"",enter_from:""}},favoriteEmojiAdd:{eventName:"favorite_emoji_add",params:{enter_method:""}},hoverAuthorHead:{eventName:"hover_author_head",params:{enter_from:"",click_from:""}}}),tX=n("147002"),tQ=function(e){var t;let{isSpider:n,isDigged:l,otherDiggCount:o,diggClick:i,stepOnClick:s,awemeInfo:d,renderTextWithTag:c,abtestData:m,player:v,commentInfo:h,setIsShowCommentInput:p,userInfo:g,handleUnLoginClick:_,awemelogPb:x,isFirstShowCommentInput:w,isShowCommentInput:j,asyncPublishComment:S,level:N,levelOneCid:T,commentLoadedTime:I,commentList:R,hitCommentExperience:k,setIsFirstShowCommentInput:b,enableDomId:M}=e,{puhlishCommentItem:O,fetchEmoticonGif:D,fetchCommentMetionList:A,setSelectedReply:P,setCurrentReplyCid:B,isDetail:U,isNeedCommentInput:z,changeLoginStatus:F,toast:V,getSearchTextUrl:Z,onSearchTextClick:H,onSearchTextMounted:$,isSearch:G}=(0,a.useContext)(eJ.X),{cid:W,user:K,text:Y,textExtra:q,createTime:X,isTop:Q,labelList:J,stickyInfo:ee,forwardId:et,ipLabel:en,imageList:el=[]}=h,{nickname:eo,uid:ei}=K,er=!U,ea=!!g,es=(0,a.useRef)(null),ed=G||U,ec=(0,a.useMemo)(()=>el.map(e=>{var t,n;return{previewUrl:((null==e?void 0:null===(t=e.mediumUrl)||void 0===t?void 0:t.urlList)||[]).filter(e=>!!e),originUrl:null==e?void 0:null===(n=e.originUrl)||void 0===n?void 0:n.urlList}}).filter(e=>!!e.previewUrl.length),[el]),eu=(0,a.useCallback)(e=>(0,tX.NK)(h,e)&&!ed,[h,ed]),em=el.length>0,ef=Y,eh=!!(ee&&ee.url);if(ee&&ee.url){ef=Y.replace(/\[表情\]$/,"");let{width:e,height:t}=ee;eh=e>0&&t>0}let ep=eh||em,eg=(0,a.useMemo)(()=>(ed&&(null==q?void 0:q.length)&&q.map(e=>{e.searchExtra.query_type=""}),q),[G,U,q]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{"data-comment-content":M?W:void 0,className:tR.default.contentText,children:[ef&&(0,r.jsx)("span",{className:tR.default.actionText,children:(0,r.jsx)(eX.Z,{text:ef,textExtra:eg,awemeInfo:d,enterMethod:"comment_at",userTextClassName:tR.default.hoverName,showSearchHighlight:!0,seoInfo:{isSpider:n,awemeId:""},abTestData:m,getSearchTextUrl:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],Z({searchId:t,searchText:e,wordsSource:"comment_named_entity_search"})},onSearchTextClick:function(e,t,n,l){return arguments.length>4&&void 0!==arguments[4]&&arguments[4],H({searchId:t,searchText:e,searchTextPos:n,wordsSource:eu(t)?"comment_named_entity_search_ai_search":"comment_named_entity_search",commentId:W},l)},onSearchTextMounted:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3],$({searchId:t,searchText:e,searchTextPos:n,wordsSource:eu(t)?"comment_named_entity_search_ai_search":"comment_named_entity_search",commentId:W})},renderTextWithTag:c,children:et?(0,r.jsx)("span",{children:"转发 \xb7 "}):""})}),ep&&(0,r.jsxs)("div",{className:tR.default.commentImageList,children:[eh&&(0,r.jsx)(tK,{imagePreview:ee.url,imageOrigin:ee.url,previewClassName:tR.default.stickyImage,hitCommentExperience:k,className:tR.default.stickyImageWrapper,onClick:()=>{tq.sendLog("clickCommentPic",{comment_type:"gif",enter_from:(0,E.vM)()})},contextMenu:(null==h?void 0:null===(t=h.stickyInfo)||void 0===t?void 0:t.type)===19?void 0:{label:"添加到表情",onClick:async()=>{tq.sendLog("favoriteEmojiAdd",{enter_method:"comment"});let{status_code:e,status_msg:t,success_items:n}=await (0,eS.kA)({action:"1",sticker_id:h.stickyInfo.id,sticker_uri:h.stickyInfo.uri,sticker_url:h.stickyInfo.url});0===e?(eA.F.info("添加成功"),y.emit(y.EVENT.StickerCollect,{action:"add",stickers:n||[]})):eA.F.info(t)}}}),em&&(0,r.jsx)(tK,{imagePreview:ec[0].previewUrl,imageOrigin:ec[0].originUrl,previewClassName:tR.default.commentImage,className:tR.default.commentImageWrapper,hitCommentExperience:k,commentList:R,onClick:()=>{tq.sendLog("clickCommentPic",{comment_type:"pic",enter_from:(0,E.vM)()})}})]}),!!(J&&J[0])&&(0,r.jsx)(tY.Vp,{presetType:"default",type:"solid",className:u()(tR.default.tag,"comment-item-tag",tR.default.defaultTag),children:(0,r.jsx)("span",{className:"comment-item-tag-text text-no-shadow",children:J[0].text})}),!!Q&&(0,r.jsx)(tY.Vp,{presetType:"default",className:u()(tR.default.tag,"comment-item-tag",tR.default.defaultTag),children:(0,r.jsx)("span",{className:"comment-item-tag-text text-no-shadow",children:"置顶"})})]}),(0,r.jsx)("div",{className:tR.default.timeAndLocation,children:(0,r.jsx)("span",{suppressHydrationWarning:!0,children:`${(0,ev.YW)(1e3*X)}${en?`\xb7${en}`:""}`})}),(0,r.jsxs)("div",{className:tR.default.opContainer,children:[(0,r.jsxs)("div",{className:u()(tR.default.statsContainer,tR.default.containerOpt,"comment-item-stats-container"),children:[(0,r.jsxs)("div",{className:u()(tR.default.diggAndStepOn,tR.default.diggAndStepOnOpt),children:[(0,r.jsxs)("p",{className:u()(tR.default.stats,{[tR.default.isSelected]:l}),onClick:i,children:[!n&&(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:l?tM:tb,width:20,height:20,viewBox:"0 0 20 20",className:tR.default.diggSvg}),(0,r.jsx)("span",{children:(0,ev.qe)(o+Number(l)||0)})]}),(null==d?void 0:d.awemeType)!==C.e.XgVideo&&(0,r.jsx)("p",{className:u()(tR.default.stepOn),onClick:s,children:!n&&(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:tP,width:20,height:20,viewBox:"0 0 20 20",className:tR.default.diggSvg})})]}),(0,r.jsx)(tV,{userInfo:g,handleUnLoginClick:_,commentInfo:h,abtestData:m,toast:V,awemelogPb:x,awemeInfo:d,divider:!1}),!!z&&(0,r.jsx)(f.Tooltip,{position:"bottom",style:(null==d?void 0:d.awemeType)===C.e.XgVideo?{}:{display:"none"},content:(0,r.jsx)("div",{className:"isDark",children:"前往西瓜视频回复评论"}),getPopupContainer:()=>es.current||document.body,children:(0,r.jsx)("div",{ref:es,className:tR.default.replyTipContainer,children:(0,r.jsxs)("div",{className:u()(tR.default.reply,tR.default.noMarginLeft,{[tR.default.isSelected]:w&&j}),onClick:e=>{var t,n;if(!ea){_("reply");return}if(w&&j)P((null==m?void 0:m.commentRenderOptimize)?null:{});else{let e=Y;em&&(e=Y+ec.map(()=>"[图片]").join("")),ee&&ee.url&&(e=`${Y}[表情]`),P({cid:W,nickName:eo,level:N,levelOneCid:T,publishComment:S,setIsShowCommentInput:p,text:e}),B(W)}if(null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(n=e.stopPropagation)||void 0===n||n.call(e),tq.sendLog("clickReplyIcon",{author_id:`${null==d?void 0:d.authorUserId}`,group_id:null==d?void 0:d.awemeId,log_pb:null==d?void 0:d.logPb,enter_from:(0,E.vM)(),comment_id:W,comment_user_id:ei,from_xigua:(null==d?void 0:d.awemeType)===C.e.XgVideo?1:0}),(null==d?void 0:d.awemeType)===C.e.XgVideo){y.emit(y.EVENT.videoPause,"NoStepOnComponent_handleReplyClick");let e=Math.floor(null==v?void 0:v.currentTime).toString();window.open(`${(0,L.Tl)({videoid:null==d?void 0:d.awemeId,param:"comment_focus",value:W})}&start=${e}`,(0,e4.f)()?"_self":void 0)}w?p(e=>!e):b(!0)},children:[(0,r.jsx)(eQ.Z,{needRenderInSSR:!1,src:tA,width:20,height:20,className:tR.default.commentSvg,viewBox:"0 0 36 36"}),G?(0,r.jsx)("span",{children:"回复"}):(0,r.jsx)("span",{children:w&&j?"回复中":"回复"})]})})})]}),!er&&z&&w&&(0,r.jsx)("div",{className:u()(tR.default.commentInputWrapper,{[tR.default.hidden]:!j||er}),children:(0,r.jsx)(te,{player:v,isLogin:ea,changeLoginStatus:F,placeHolder:eo&&`回复@${eo}`,puhlishCommentItem:O,fetchEmoticonGif:D,fetchCommentMetionList:A,publishComment:e=>{p(!1),S(e)},cid:W,level:N||0,levelOneCid:T,awemeInfo:d,commentLoadedTime:I})})]})]})},tJ=n("534389");function t0(e){let{width:t=5,height:n=4,color:l="rgba(255, 255, 255, 0.6)",className:o=""}=e;return(0,r.jsx)("div",{className:u()(tJ.default.container,o),style:{borderTopWidth:n,borderBottomWidth:n,borderLeftWidth:t,borderLeftColor:l}})}var t1=n("254897");n("779788");var t2=n("907831"),t3=n.n(t2),t6=n("669201"),t5=n("327306");let t7=e=>{let{awemeInfo:t,getSearchTextUrl:n,onSearchTextClick:l,isDetail:o,isSearch:i}=e,r=(0,t5._)(),s=(0,a.useCallback)(e=>n?n(e):`https://www.douyin.com/search/${encodeURIComponent(e.searchText)}?source=${e.wordsSource}&enter_from=${(0,E.vM)()}&gid=${t.groupId}&aweme_id=${t.awemeId}`,[n,t]),d=(0,a.useCallback)((e,n)=>{var o;let{wordsSource:i,searchText:a,searchId:s,searchTextPos:d,commentId:c}=e;tq.sendLog("trendingWordsClick",{words_source:i,enter_group_id:t.awemeId,words_content:a,group_id:s,words_position:d,enter_from:(0,j.yW)(),comment_id:c});let u=null==r?void 0:r.searchOpenCurrentTab;((null==u?void 0:u.save_status)!==1||(0,S.DT)()||(null===(o=window)||void 0===o?void 0:o.location.pathname)==="/")&&!["comment_related_search_ai_search","comment_named_entity_search_ai_search"].includes(i)&&y.emit(y.EVENT.videoPause,"Comment_innerOnSearchTextClick"),l&&l(e,n)},[l,t]),c=(0,a.useCallback)(e=>{let{wordsSource:n,searchId:l,searchText:o,searchTextPos:i,commentId:r}=e;tq.sendLog("trendingWordsShow",{words_source:n,enter_group_id:t.awemeId,words_content:o,group_id:l,words_position:i,comment_id:r,enter_from:(0,j.yW)()})},[t]);return{headerSearchInfo:(0,a.useMemo)(()=>{let{suggestWords:e}=t||{};if(!e)return;let n=e.find(e=>e.scene===t6.gQ.CommentTopRec);if(n){let{hintText:e,words:l}=n;if(l.length)return{hintText:e,awemeInfo:t,isDetail:o,isSearch:i,text:l[0].word,id:l[0].wordId,getSearchTextUrl:s,onSearchTextClick:d,onSearchTextMounted:c}}},[t,s,d,c,o,i]),onSearchTextclick:d,getSearchTextUrl:s,onSearchTextMounted:c}},t4=e=>{let{commentInfo:t}=e,[n,l]=(0,a.useState)(),[o,i]=(0,a.useState)("init"),[r,s]=(0,a.useState)(!1);return{handleTranslateComment:async()=>{var e,r,a,d,c,u,m,f,v,h;if("loading"===o)return;if(n){s(!0);return}let p=t3()(t),g=(null===(d=navigator)||void 0===d?void 0:null===(a=d.language)||void 0===a?void 0:null===(r=a.split("-"))||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.startsWith("zh"))?null===(c=navigator)||void 0===c?void 0:c.language:null===(f=navigator)||void 0===f?void 0:null===(m=f.language)||void 0===m?void 0:null===(u=m.split("-"))||void 0===u?void 0:u[0];i("loading");let[_,x]=await Promise.all([(0,ej.NZ)({commentId:null==t?void 0:t.cid,targetLanguage:g,commentText:null==t?void 0:t.text,commentTextExtra:JSON.stringify((null==t?void 0:t.textExtra)||[])}),(0,ej.O9)({sourceText:null==t?void 0:t.ipLabel,targetLanguage:g})]);0===_.statusCode?(p.text=_.translateComment,0===x.statusCode&&(p.ipLabel=null===(h=x.translation)||void 0===h?void 0:null===(v=h[0])||void 0===v?void 0:v.translation),i("success"),s(!0),l(p)):i("error")},handleShowOriginText:()=>{s(!1)},translatedCommentInfo:n,showTranslated:r,requestStatus:o}},t8=e=>{var t;let{secUid:n,awemeInfo:l,logPb:o,logParams:i,highLightAwemeId:r,showTab:a}=e||{},s={author_id:null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid,group_id:null==l?void 0:l.awemeId,log_pb:o,from_gid:null==l?void 0:l.groupId,enter_from:null==i?void 0:i.enter_from,tab_name:null==i?void 0:i.tab_name,high_light_aweme_id:r,showTab:a};return(0,L.HC)(n,`enter_method=comment&${(0,tC.stringify)(s)}`)};var t9=(0,a.forwardRef)(function(e,t){var n,l,s,d,c;let{type:v="clarity",commentInfo:h,isNeedReply:p=!0,children:g,awemeInfo:_,awemelogPb:x,userInfo:w,deleteComment:S,level:N,hitCommentExperience:T,levelOneCid:I,publishComment:R,fullScreenTarget:k,isSpider:b=!1,isSearch:M=!1,commentLoadedTime:A,defaultCommentId:P,className:B,player:U,renderTextWithTag:z,abtestData:F,updateReplyList:V,commentList:H,dispatch:$,enableDomId:G=!1,scrollContainerEl:K,isRelatedCard:Y}=e,[q,X]=(0,a.useState)((null==h?void 0:h.userDigged)===1),[Q,J]=(0,a.useState)(null==h?void 0:h.userBuried),[ee,et]=(0,a.useState)(!!(null==h?void 0:null===(n=h.replyComment)||void 0===n?void 0:n.length)),[en,eo]=(0,a.useState)(!1),[ei,ea]=(0,a.useState)(!0),{cid:es,user:ed,diggCount:ec,createTime:eu,replyTotal:em,labelText:ef,labelType:eh,replyToUserName:ep,replyToUserId:eg,replySecUid:e_}=h,{pathname:ex}=(0,tw.a)(),eC=(0,a.useRef)(null),[ew,ey]=(0,a.useState)(!1),eE=(0,a.useRef)(null),ej=(0,a.useRef)(null),eS=(0,a.useRef)(null);(0,a.useRef)(236),(0,a.useRef)(236);let[eN,eT]=(0,a.useState)("bottom"),[eI,eR]=(0,a.useState)("bottom");(0,a.useRef)(),(0,a.useRef)();let[ek,eL]=(0,a.useState)(),{nickname:eb,avatarUri:eM,secUid:eO,uid:eD}=ed,eA=ec-((null==h?void 0:h.userDigged)===1?1:0),{isMainland:eP,isListenVideoMiniWin:eB}=(0,tI.Iq)(e=>{let{isMainland:t,isListenVideoMiniWin:n}=e;return{isMainland:t,isListenVideoMiniWin:n}}),eU=(null==_?void 0:_.awemeType)===C.e.XgVideo,ez=(0,a.useContext)(eJ.X),{setGlobalCommentCount:eF}=null!==(c=(0,a.useContext)(O.v))&&void 0!==c?c:{},{diggCommentItem:eV,deleteCommentItem:eZ,currentReplyCid:eH,isDetail:e$,scrollCid:eG,container:eW,changeLoginStatus:eK,toast:eY,reportExtraParams:eq,isPageVisible:eQ}=ez,e0=M||e$,[e1,e2]=(0,m.Z)(void 0,{threshold:.1}),e3=e2&&eQ,e6=(0,a.useRef)(!1),e5=(0,a.useRef)(0);(0,D.o)(()=>{if(e3&&!e6.current){e6.current=!0;let{imageList:e,stickyInfo:t}=h||{},n="text";(null==e?void 0:e.length)>0?n="pic":(null==t?void 0:t.url)&&(n="gif"),tq.sendLog("commentShow",{enter_from:(0,E.vM)(),group_id:null==_?void 0:_.awemeId,comment_time:(0,ev.MH)(1e3*eu),comment_type:n,comment_id:es,comment_level:(null==h?void 0:h.replyId)==="0"?"primary":"reply"})}if(e3)return e5.current=Date.now(),()=>{let e=Date.now()-e5.current;if(e5.current=0,e>0){let t=(0,tX.NK)(h)&&!e0,n=(0,tX.VH)(h)||e0,l="";t?l="ai_search":n&&(l="general_search");let o={enter_from:(0,E.vM)(),group_id:null==_?void 0:_.awemeId,comment_id:es,comment_level:(null==h?void 0:h.replyId)==="0"?"primary":"reply",duration:e,comment_panel_position:e$?"bar":"sidebar",comment_category:(null==h?void 0:h.replyId)==="0"?"original":"reply",comment_named_entity_search_type:l};tq.sendLog("commentStayTime",o),tq.sendLog("comment_duration",o)}}},[e3,e$]);let e7=a.useMemo(()=>!!w,[w]),{handleShowOriginText:e8,handleTranslateComment:e9,translatedCommentInfo:te,showTranslated:tt,requestStatus:tn}=t4({commentInfo:h});(0,a.useImperativeHandle)(t,()=>({setShowReply:()=>{et(!0)}}),[]),(0,a.useEffect)(()=>{eH!==es&&(en&&eo(!1),ei||ea(!0))},[eH]),(0,a.useEffect)(()=>{if(eG===es&&e1.current){let t=e1.current.offsetParent,n=e1.current.offsetTop;if(!!t){for(;t!==eW;)n+=t.offsetTop,t=t.offsetParent;if(!(eW.scrollTop<n&&n<eW.scrollTop+eW.clientHeight)){var e;null==eW||null===(e=eW.scrollTo)||void 0===e||e.call(eW,0,n)}}}},[eG]);let tl=(0,a.useCallback)(e=>new Promise(t=>{var n,l;let o="登录后即可操作";switch(e){case"reply":o="登录后即可回复喜欢的内容";break;case"like_comment":o="登录后可以点赞评论";break;case"step_on_comment":o="登录后可以点踩评论";break;case"share_comment":o="登录后即可分享评论"}(0,W.default)({success:async()=>{eK?await eK():window.location.reload(),t(!0)},onClose:()=>{t(!1)},headerText:o,enterMethod:e,next:`https://${null===(l=window)||void 0===l?void 0:null===(n=l.location)||void 0===n?void 0:n.host}`})}),[eK]),to=(0,a.useCallback)(async()=>{if(!e7&&!await tl("like_comment"))return;X(e=>!e),Q&&J(!1),null==V||V((0,i._)((0,o._)({},h),{userDigged:q?0:1,userBuried:!Q&&h.userBuried,diggCount:h.diggCount+=q?-1:1}));let e=await eV({diggType:q?2:1,cid:es,level:1===N?1:3});0!==e.statusCode?(null==V||V((0,i._)((0,o._)({},h),{userDigged:q?0:1,diggCount:h.diggCount+=q?-1:1})),X(e=>!e),el.statusMsg.includes(e.statusMsg)?eY(e.statusMsg):eY("点赞失败")):q?tq.sendLog("cancelLikeComment",{author_id:`${null==_?void 0:_.authorUserId}`,group_id:null==_?void 0:_.awemeId,log_pb:null==_?void 0:_.logPb,enter_from:(0,E.vM)(),comment_id:es,comment_user_id:eD}):tq.sendLog("likeComment",(0,o._)({author_id:`${null==_?void 0:_.authorUserId}`,group_id:null==_?void 0:_.awemeId,log_pb:null==_?void 0:_.logPb,enter_from:(0,E.vM)(),comment_id:es,comment_user_id:eD,from_xigua:(null==_?void 0:_.awemeType)===C.e.XgVideo?1:0,comment_category:(null==h?void 0:h.replyId)==="0"?"original":"reply"},eq))},[q,e7,tl,Q]),ti=(0,a.useCallback)(async()=>{if(!e7&&!await tl("step_on_comment"))return;J(e=>!e),q&&X(!1),null==V||V((0,i._)((0,o._)({},h),{userDigged:q?0:h.userDigged,userBuried:!Q,diggCount:h.diggCount+=q?-1:0}));let e=await eV({diggType:Q?4:3,cid:es,level:1===N?1:3});0!==e.statusCode?(null==V||V((0,i._)((0,o._)({},h),{userBuried:!Q})),J(e=>!e),el.statusMsg.includes(e.statusMsg)?eY(e.statusMsg):eY("点踩失败")):Q?tq.sendLog("cancelDislikeComment",{group_id:null==_?void 0:_.awemeId,enter_from:(0,E.vM)()}):tq.sendLog("dislikeComment",(0,o._)({author_id:`${null==_?void 0:_.authorUserId}`,group_id:null==_?void 0:_.awemeId,log_pb:null==_?void 0:_.logPb,enter_from:(0,E.vM)(),comment_id:es,comment_user_id:eD,from_xigua:(null==_?void 0:_.awemeType)===C.e.XgVideo?1:0,comment_category:(null==h?void 0:h.replyId)==="0"?"original":"reply"},eq))},[q,e7,tl,Q]),tr=async()=>{try{let e=await eZ({cid:es});0===e.statusCode&&"success"===e.msg?(S(es),eY("评论删除成功"),tq.sendLog("deleteComment",(0,o._)({author_id:`${null==_?void 0:_.authorUserId}`,group_id:null==_?void 0:_.awemeId,log_pb:null==_?void 0:_.logPb,enter_from:(0,E.vM)(),comment_id:es,comment_user_id:eD},eq))):eY("评论删除失败")}catch(e){eY("评论删除失败")}},[ta,ts]=(0,a.useState)(!1),td=(0,a.useCallback)((e,t)=>{eB&&ty.T.exit(),(0,tS.$)(F)&&(e.preventDefault(),y.emit(y.EVENT.changeRoute,{to:t}))},[F,eB]);(0,a.useCallback)(e=>{(0,tS.$)(F)?y.emit(y.EVENT.changeRoute,{to:e}):window.open(e,"_blank")},[F]);let tc=(0,a.useCallback)(e=>{ts(e)},[]),tu=1===eh,tm=!!ef&&(0,r.jsx)(tY.Vp,{type:"solid",presetType:tu?"label":"default",className:u()(tR.default.tag,"comment-item-tag",!tu&&tR.default.defaultTag),children:(0,r.jsx)("span",{className:u()("comment-item-tag-text","text-no-shadow"),children:ef})});return(0,r.jsxs)("div",{ref:e1,className:u()(tR.default.commentItemContainer,B,{[tR.default[v]]:!!tR.default[v]}),"data-e2e":"comment-item","data-comment-uid":G?null==h?void 0:null===(l=h.user)||void 0===l?void 0:l.uid:void 0,"data-comment-id":G?null==h?void 0:h.cid:void 0,children:[!b&&(0,r.jsx)(tk,{commentInfo:h,awemeInfo:_,awemelogPb:x,level:N,isSpider:b,abtestData:F,refAvatar:eS}),(0,r.jsxs)("div",{className:tR.default.contentContainer,children:[(0,r.jsxs)("div",{className:u()(tR.default.contentMain,tR.default.hoverShowMoreBtn,{[tR.default.activeComment]:en&&ei}),children:[es===P&&(0,r.jsx)("div",{className:u()({[tR.default.highlight]:es===P,[tR.default.isReplyItem]:2===N})}),(0,r.jsxs)("div",{className:u()(tR.default.infoWrap,"comment-item-info-wrap"),children:[(0,r.jsxs)("div",{className:tR.default.nickWrap,children:[(0,r.jsxs)("div",{className:tR.default.nickname,children:[(0,r.jsxs)(Z.a,{href:eU?(0,L.GN)(null==h?void 0:null===(s=h.user)||void 0===s?void 0:s.uid):t8({secUid:eO,awemeInfo:_,logPb:x,logParams:eq}),target:"_blank",rel:"noopener noreferrer",isNeedSeoOpt:!0,onClick:e=>{!eU&&td(e,t8({secUid:eO,awemeInfo:_,logPb:x,logParams:eq}))},children:[(0,r.jsx)("span",{ref:eE,"data-click-from":"title",className:u()({[tR.default.mgr9]:tu}),children:(0,r.jsx)(eX.Z,{text:eb,className:tR.default.nicknameInner,seoInfo:{isSpider:b,awemeId:""},abTestData:F})}),tu&&tm]}),ep&&eg&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t0,{className:tR.default.triggle}),(0,r.jsx)(Z.a,{href:t8({secUid:e_,awemeInfo:_,logPb:x,logParams:eq}),target:"_blank",rel:"noopener noreferrer",onClick:e=>{td(e,t8({secUid:e_,awemeInfo:_,logPb:x,logParams:eq}))},children:(0,r.jsx)("span",{ref:ej,"data-click-from":"title",children:(0,r.jsx)(eX.Z,{text:ep,className:tR.default.nicknameInner,seoInfo:{isSpider:b,awemeId:""}})})})]})]}),!tu&&tm]}),(0,r.jsx)("div",{className:tR.default.more,"data-e2e":"video-comment-more",children:(0,r.jsx)(f.Tooltip,{content:(0,r.jsxs)(r.Fragment,{children:[!eP&&!!(null==F?void 0:F.i18nAb)&&(0,r.jsx)("div",{className:u()(tR.default.moreInfoText,"isDark"),onClick:tt?e8:e9,children:tt?er.a.t("see_original",{},"查看原文"):"loading"===tn?er.a.t("translating",{},"翻译中"):er.a.t("translate_comment",{},"翻译")}),!w||w&&h.user.uid!==w.uid?(0,r.jsx)("div",{onClick:()=>{if(eU)y.emit(y.EVENT.videoPause,"Comment_Item_handleCommentReport"),window.open((0,L.Tl)({videoid:null==_?void 0:_.awemeId,param:"envoke_comment_tipoff",value:h.cid}),(0,e4.f)()?"_self":void 0);else{var e,t,n;(0,tE.m)({title:"举报评论",type:"comment",object_id:h.cid,userInfo:w,loginDispatch:$,comment_with_emoji:(null==h?void 0:null===(e=h.stickyInfo)||void 0===e?void 0:e.url)?1:0,pipeline_id:"158",enter_from:(0,j.yW)(),owner_id:(null==h?void 0:null===(t=h.user)||void 0===t?void 0:t.uid)||"",video_id:null==_?void 0:_.awemeId,onClose:()=>{y.emit(y.EVENT.videoRemoveStopPlayNext)},onShow:()=>{y.emit(y.EVENT.videoStopPlayNext)},logParams:{comment_id:h.cid,comment_panel_position:e$?"bar":"sidebar",comment_category:(null==h?void 0:h.replyId)==="0"?"original":"reply",follow_status:(0,tj.F)(null==h?void 0:null===(n=h.user)||void 0===n?void 0:n.followStatus)?"1":"0"}},k)}},className:u()(tR.default.moreInfoText,"isDark"),"data-e2e":"video-comment-more-report",children:er.a.t("report",{},"举报评论")}):(0,r.jsx)("div",{onClick:tr,className:u()(tR.default.moreInfoText,"isDark"),children:er.a.t("delete",{},"删除评论")})]}),position:e$&&"left"||"bottomRight",spacing:10,showArrow:!1,onVisibleChange:tc,getPopupContainer:()=>eC.current||document.body,children:(0,r.jsx)("div",{ref:eC,className:u()(tR.default.moreInfo,{[tR.default.hover]:ta}),id:`tooltip_${h.cid}`,children:"..."})})})]}),Q?(0,r.jsx)(tD,{isSpider:b,isDigged:q,otherDiggCount:eA,diggClick:to,stepOnClick:ti,isXgVideo:eU,abtestData:F}):(0,r.jsx)(tQ,{isSpider:b,isDigged:q,otherDiggCount:eA,diggClick:to,stepOnClick:ti,commentList:H,awemeInfo:_,isSearch:M,isDetail:e$,renderTextWithTag:z,hitCommentExperience:T,abtestData:F,player:U,commentInfo:tt?te:h,setIsShowCommentInput:ea,userInfo:w,handleUnLoginClick:tl,awemelogPb:x,isFirstShowCommentInput:en,isShowCommentInput:ei,asyncPublishComment:e=>{null==eF||eF(e=>e+1),R(e)},level:N,levelOneCid:I,commentLoadedTime:A,setIsFirstShowCommentInput:eo,enableDomId:G})]}),!!(p&&!ee&&em)&&(0,r.jsxs)("button",{type:"button",className:u()(tR.default.replyExpandBtn,"comment-reply-expand-btn"),children:[(0,r.jsx)("div",{className:tR.default.replyLine}),(0,r.jsxs)("div",{className:tR.default.hoverStyle,onClick:()=>{et(!0);let e={group_id:null==_?void 0:_.awemeId,enter_from:(0,E.vM)(),count:em,comment_id:es,comment_panel_position:e$?"bar":"sidebar"};tq.sendLog("unfoldReplyComment",e),tq.sendLog("show_more_reply",e)},children:[(0,r.jsxs)("span",{children:["展开",em,"条回复"]}),!b&&(0,r.jsx)(t1.z,{needRenderInSSR:!1,svg:(0,r.jsx)(tT,{className:tR.default.replySvg})})]})]}),p&&ee&&(em||(null==h?void 0:null===(d=h.replyComment)||void 0===d?void 0:d.length))&&g||null]})]})}),ne=n("590098"),nt=n.n(ne),nn=n("251526"),nl=n.n(nn),no=n("813481");function ni(){return(ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let nr=a.forwardRef(function(e,t){return a.createElement("svg",ni({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:t},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.7071 16.7071C21.0976 16.3166 21.0976 15.6834 20.7071 15.2929L12.7071 7.29289C12.3166 6.90237 11.6834 6.90237 11.2929 7.29289L3.29289 15.2929C2.90237 15.6834 2.90237 16.3166 3.29289 16.7071C3.68342 17.0976 4.31658 17.0976 4.70711 16.7071L12 9.41421L19.2929 16.7071C19.6834 17.0976 20.3166 17.0976 20.7071 16.7071Z",fill:"currentColor"}))});nr.elementType="Icon";var na=n("224632");let{WHALE_CUT_HEADER:ns}=v;function nd(e){let{replyInfo:t,userInfo:n,deleteComment:l,publishComment:o,levelOneCid:i,fullScreenTarget:a,awemeInfo:s,isSpider:d,commentLoadedTime:c,defaultCommentId:u,player:m,abtestData:f,updateReplyList:v,hitCommentExperience:h,commentList:p,dispatch:g,enableDomId:_=!1,scrollContainerEl:x,isRelatedCard:C}=e;return(0,r.jsx)(t9,{commentInfo:t,userInfo:n,hitCommentExperience:h,deleteComment:l,level:2,publishComment:o,levelOneCid:i,fullScreenTarget:a,awemeInfo:s,isSpider:d,commentList:p,commentLoadedTime:c,defaultCommentId:u,player:m,abtestData:f,updateReplyList:v,dispatch:g,enableDomId:_,scrollContainerEl:x,isRelatedCard:C})}var nc=(0,a.forwardRef)(function(e,t){var n;let{defaultReply:l=[],userInfo:o,replyTotal:i,fetchReply:s,firstReplyCount:d=3,replyCount:c=10,scrollContainerEl:m,levelOneCid:f,newPublishTopReply:v,setNewPublishTopReply:h,onClearNewPublishReply:p,publishComment:_,setNowComment:x,fullScreenTarget:C,awemeInfo:w,isSpider:y,originCommentInfo:j,commentLoadedTime:S,defaultCommentId:N,player:T,abtestData:I,hitCommentExperience:R,dispatch:L,changeLoginStatus:b,isLogin:M,setBlockNum:D,loginBlock:A,actionCloseBlock:P,setActionCloseBlock:B,enableDomId:U=!1,isRelatedCard:z}=e,{setGlobalCommentCount:F}=null!==(n=(0,a.useContext)(O.v))&&void 0!==n?n:{},{toast:V,isDetail:Z}=(0,a.useContext)(eJ.X),[H,G]=(0,a.useState)([...l,...v]),K=(0,a.useMemo)(()=>H.map(e=>e.cid),[H]),Y=i>((null==H?void 0:H.length)||0),[q,X]=(0,a.useState)([]),Q=(0,a.useRef)(0);Q.current=q.length;let J=(0,a.useRef)(0),ee=(0,a.useRef)(Y),et=(0,a.useRef)(null),[en,el]=(0,a.useState)(!1),[eo,ei]=(0,a.useState)(!0),er=(0,a.useRef)(null),ea=(0,a.useRef)(!1),es=(0,a.useRef)([]),ed=(0,a.useRef)(P);(0,a.useEffect)(()=>{ed.current=P},[P]),(0,a.useEffect)(()=>{es.current=q},[q]),(0,a.useEffect)(()=>{G([...l,...v])},[l,v]);let ec=e=>{j.replyTotal-=1,q.some(t=>(null==t?void 0:t.cid)===e)&&X(t=>t.filter(t=>(null==t?void 0:t.cid)!==e)),v.some(t=>(null==t?void 0:t.cid)===e)&&h(t=>t.filter(t=>(null==t?void 0:t.cid)!==e)),H.some(t=>(null==t?void 0:t.cid)===e)&&G(t=>t.filter(t=>(null==t?void 0:t.cid)!==e)),x(j),null==F||F(e=>e?e-1:0)};(0,a.useImperativeHandle)(t,()=>({getIsExpand:()=>eo,publishComment:_,setIsExpand:ei,unshiftReply:e=>{X(t=>[e,...t])},pushReply:e=>{X(t=>[...t,e])}}),[eo]),(0,a.useEffect)(()=>{var e;P&&!(null==I?void 0:null===(e=I.commentBlock)||void 0===e?void 0:e.is_force)&&A&&(ea.current=!1)},[P,I,A]);let eu=(e,t)=>{let n=[];for(let l=0;l<t.length;l++)!e.find(e=>{var n;return(null==e?void 0:e.cid)===(null===(n=t[l])||void 0===n?void 0:n.cid)})&&n.push(t[l]);return n},em=a.useCallback(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!en&&ee.current){var t,n;el(!0);let{statusCode:l,comments:o,cursor:i,hasMore:r,whaleInfo:a,logPb:u}=await s(J.current,e?d:c,et.current);if(0!==l||!nl()(i)||!nt()(r)||!(null==o?void 0:o.length)){V("展开回复失败"),el(!1),ts.oe.event.error({name:ts.Mo.CommentExpandFailed,report:{message:"展开回复失败",statusCode:l,cursor:i,hasMore:r,commentsLength:null==o?void 0:o.length,logId:(null==u?void 0:u.impr_id)||""}});return}et.current=null==a?void 0:a.whaleCutToken;let m=!1;if(Q.current+o.length>=3&&A&&((null==I?void 0:null===(t=I.commentBlock)||void 0===t?void 0:t.is_force)||!(null==I?void 0:null===(n=I.commentBlock)||void 0===n?void 0:n.is_force)&&!ed.current)&&(m=!0),en||(null==a?void 0:a.whaleDecisionCustom)!==ns&&(!m||M)?ea.current=!1:ea.current=!0,0===l){ee.current=!!ea.current||r,J.current=i;let e=eu(v,eu(es.current,o));X(t=>[...t,...e])}el(!1)}},[d,c,en,I,P,M]),ef=a.useCallback(()=>{if(m=m||window,er.current&&m&&er.current.getBoundingClientRect().top<122){ei(!1);let{clientHeight:e}=er.current,{x:t,y:n}=(0,no.F)(m);m.scrollTo(t,Math.max(n-e-25,0))}else ei(!1);p(),tq.sendLog("foldReplyComment",{group_id:null==w?void 0:w.awemeId,enter_from:(0,E.vM)()})},[m,p]),ev=0===q.length&&0===H.length;(0,a.useEffect)(()=>{ev&&em(!0)},[]);let eh=i-H.length,ep=null;if(en)ep=(0,r.jsx)($.gb,{text:""});else if(eh>0){let e=!ea.current||M||P?(0,r.jsx)("span",{children:"展开更多"}):(0,r.jsx)("span",{className:na.default.loginBtn,onClick:e=>{var t,n,l,o;if(!(null==I?void 0:null===(t=I.commentBlock)||void 0===t?void 0:t.is_force)&&A){let e=0;D(t=>(e=t+1,(0,k.qQ)(g.LocalStorageKeys.CommentBlock,{total:e,lastTimes:Date.now(),actionClose:e>1}),e)),e>1&&(em(),B(!0))}null==e||null===(n=e.preventDefault)||void 0===n||n.call(e),(0,W.default)({success:async()=>{b?null==b||b():window.location.reload()},enterMethod:"comment",headerText:"登录后展开更多回复",next:`https://${null===(o=window)||void 0===o?void 0:null===(l=o.location)||void 0===l?void 0:l.host}`})},children:"登录后展开更多"});ep=(0,r.jsxs)(r.Fragment,{children:[(ee.current||!eo)&&(0,r.jsxs)("button",{type:"button",className:u()(na.default.replyExpandBtn),children:[(0,r.jsx)("div",{className:na.default.replyLine}),(0,r.jsxs)("div",{className:na.default.hoverStyle,onClick:()=>{if(q.length>0&&!eo)ei(!0);else{if(ea.current&&!M)return;em(0===q.length)}p();let e={group_id:null==w?void 0:w.awemeId,enter_from:(0,E.vM)(),count:q.length>0&&eo?0:eh,comment_id:null==j?void 0:j.cid,comment_panel_position:Z?"bar":"sidebar"};tq.sendLog("unfoldReplyComment",e),tq.sendLog("show_more_reply",e)},children:[q.length>0&&eo?e:(0,r.jsxs)("span",{children:["展开",eh,"条回复"]}),(0,r.jsx)(t1.z,{svg:(0,r.jsx)(tT,{className:na.default.replySvg})})]})]}),q.length>0&&eo&&(0,r.jsxs)("button",{type:"button",className:u()(na.default.replyExpandBtn,na.default.hoverStyle,{[na.default.hasMore]:ee.current}),onClick:ef,children:[(0,r.jsx)("span",{children:"收起"}),(0,r.jsx)(t1.z,{svg:(0,r.jsx)(nr,{className:na.default.replySvg}),className:na.default.align})]})]})}let eg=eo?q.filter(e=>!K.includes(null==e?void 0:e.cid)):q;return(0,r.jsxs)("div",{className:u()(na.default.conatainer,"replyContainer"),ref:er,children:[H.map(e=>(0,r.jsx)(nd,{replyInfo:e,userInfo:o,commentList:H,deleteComment:ec,publishComment:_,levelOneCid:f,fullScreenTarget:C,awemeInfo:w,isSpider:y,commentLoadedTime:S,defaultCommentId:N,player:T,abtestData:I,dispatch:L,hitCommentExperience:R,enableDomId:U,scrollContainerEl:m,isRelatedCard:z},e.cid)),eo&&eg.map(e=>(0,r.jsx)(nd,{replyInfo:e,userInfo:o,commentList:eg,deleteComment:ec,publishComment:_,levelOneCid:f,fullScreenTarget:C,awemeInfo:w,commentLoadedTime:S,defaultCommentId:N,player:T,hitCommentExperience:R,abtestData:I,dispatch:L,enableDomId:U,scrollContainerEl:m,isRelatedCard:z,updateReplyList:e=>{X(t=>{let n=t.findIndex(t=>t.cid===e.cid);return -1!==n&&(t[n]=e),[...t]})}},e.cid)),en?(0,r.jsx)($.gb,{text:""}):ep]})}),nu=function(e){let{type:t="clarity",commentInfo:n,fetchReply:l=null,isNeedReply:o=!0,scrollContainerEl:i,awemeInfo:s,userInfo:d,awemelogPb:c,deleteComment:u,fullScreenTarget:m,isSpider:f,isSearch:v,isDetail:h,commentLoadedTime:p,defaultCommentId:g,player:_,isActive:x,renderTextWithTag:C,abtestData:w,dispatch:y,changeLoginStatus:E,isLogin:j,setBlockNum:S,loginBlock:N,actionCloseBlock:T,setActionCloseBlock:I,commentList:R,hitCommentExperience:k,enableDomId:L=!1,isRelatedCard:b}=e,[M,O]=(0,a.useState)(n),D=(0,a.useRef)(null),A=(0,a.useRef)(null),{cid:P}=M,B=a.useCallback((e,t,n)=>null==l?void 0:l(P,e,t,n),[l,P]),[U,z]=(0,a.useState)([]),F=e=>{var t,l,o,i;n.replyTotal+=1,O(n),(null===(l=D.current)||void 0===l?void 0:null===(t=l.getIsExpand)||void 0===t?void 0:t.call(l))?D.current.pushReply(e):(z(t=>[...t,e]),A.current.setShowReply(),null===(i=D.current)||void 0===i||null===(o=i.unshiftReply)||void 0===o||o.call(i,e))};return(0,r.jsx)("div",{children:(0,r.jsx)(t9,{ref:A,awemelogPb:c,type:t,hitCommentExperience:k,commentInfo:M,isSpider:f,isSearch:v,isDetail:h,isNeedReply:o,awemeInfo:s,userInfo:d,isNeedDivid:!0,deleteComment:u,level:1,publishComment:F,fullScreenTarget:m,commentLoadedTime:p,defaultCommentId:g,player:_,renderTextWithTag:C,commentList:R,abtestData:w,dispatch:y,enableDomId:L,scrollContainerEl:i,isRelatedCard:b,children:(0,r.jsx)(nc,{onClearNewPublishReply:()=>{if(U&&U.length>0){var e,t;null===(t=D.current)||void 0===t||null===(e=t.unshiftReply)||void 0===e||e.call(t,...U)}z([])},hitCommentExperience:k,originCommentInfo:M,isSpider:f,userInfo:d,fetchReply:B,scrollContainerEl:i,replyTotal:(null==M?void 0:M.replyTotal)||0,defaultReply:(null==M?void 0:M.replyComment)||[],newPublishTopReply:U,setNewPublishTopReply:z,setNowComment:O,levelOneCid:P,ref:D,publishComment:F,fullScreenTarget:m,awemeInfo:s,commentLoadedTime:p,defaultCommentId:g,player:_,abtestData:w,dispatch:y,changeLoginStatus:E,isLogin:j,setBlockNum:S,loginBlock:N,actionCloseBlock:T,setActionCloseBlock:I,enableDomId:L,isRelatedCard:b})})})},nm=n("469306"),nf=n("490314");let nv={[B.YY.Tray]:{[B.bu.Comment]:"开启「开机自启动」，及时接收与你相关的互动消息。",[B.bu.CommentMentioned]:"开启「开机自启动」，及时接收与你相关的互动消息。"},[B.YY.Push]:{[B.bu.Comment]:"开启「评论」开关，及时接收评论回复消息。",[B.bu.CommentMentioned]:"开启「提及」开关，及时接收与你相关的互动消息。"}},nh=e=>{var t;let{scene:n,isShowComment:l,setGlobalGuideType:o,commentGuideType:i,setShowTrayPushGuide:s,isUpperFeed:d}=e;return((0,a.useEffect)(()=>{var e;let t=(null===(e=I.Le.getConfig(I.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||!1;!l&&(!t||!0===d)&&(null==o||o(!1),null==s||s(!1))},[l,o,s]),(0,a.useEffect)(()=>{(async()=>{if(!i){let e=await nm.Gq.getGuideType(n);e&&(nm.Gq.onShow(n,e),o(e))}})()},[n,o,i]),i)?(0,r.jsx)("div",{className:nf.default.wrap,children:(0,r.jsxs)("div",{className:nf.default.left,children:[(0,r.jsx)("div",{className:nf.default.text,children:null==nv?void 0:null===(t=nv[i])||void 0===t?void 0:t[n]}),(0,r.jsx)("div",{onClick:()=>{nm.Gq.onOpen(n,i),null==o||o(!1),null==s||s(!1)},className:nf.default.openBtn,children:"点击开启"})]})}):null};var np=n("227266"),ng=n("585068"),n_=n("494833"),nx=n("597321");let{WHALE_CUT_HEADER:nC}=v;function nw(e){let{reload:t}=e;return(0,r.jsxs)("div",{className:z.default.noMoreText,children:["服务异常，",(0,r.jsx)("span",{onClick:t,className:z.default.opBtn,children:"刷新"}),"拉取数据"]})}let ny=()=>[(0,a.useRef)(null),!1],nE=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?m.Z:ny};var nj=a.forwardRef(function(e,t){var n,l,s,c,m,v,V,X,Q,J;let{isDetailPage:ee=!1,isDetail:et=!0,hideCount:en=!1,isSearch:el=!1,isCollapse:eo=!1,defaultTotal:ei=0,onCloseCommentClick:er,isShowComment:ea=!1,isInit:es=!1,defaultCommentList:ed=[],defaultCursor:ec=0,defaultWhaleCutToken:eu,defaultWhaleDecisionCustom:em,defaultHotsoonHasMoreRef:ef=0,defaultHasMore:ev=!0,defaultStatusCode:eh=0,defaultCommentId:ep="",count:eg=20,scrollContainerEl:e_=null,fetchComment:ex,fetchReply:eC,fetchEmoticonGif:ew,fetchCommentMetionList:ey,diggCommentItem:eE,deleteCommentItem:ej,puhlishCommentItem:eS,awemeInfo:eN,userInfo:eT,awemelogPb:eI,needFirstPause:eR=!1,fullScreenTarget:ek,isNeedCommentInput:eL,changeLoginStatus:eb,isSpider:eM=!1,player:eO,shortcutDisable:eD,shortcutMode:eP,reportExtraParams:eB,abtestData:eU,className:ez="",getSearchTextUrl:eF,onSearchTextClick:eV,tipTextAfter:eZ=U.X.Close,isActive:eH=!0,logParams:e$={},keywordList:eG=[],renderTextWithTag:eW,dispatch:eK,globalIsCommentTrayPushGuideShow:eY,globalCommentTrayPushGuideType:eq,setCommentTrayPushGuideTypeFunc:eX,setIsCommentTrayPushGuideShowFunc:e0,tab:e1="",enableDomId:e2=!1,isUpperFeed:e3=!1,scene:e6,isRelatedCard:e5=!1,forceLoginCover:e7=!1}=e,e4=w._.isInViewLoading(eU)?$.VF:$.gb,[e8,e9]=(0,a.useState)(!0),{globalCommentCount:tt,setGlobalCommentCount:tn}=(0,a.useContext)(O.v)||{},[tl,to]=(0,a.useState)(!0),[ta,ts]=(0,a.useState)(ed),[td,tc]=(0,a.useState)((null==eU?void 0:eU.commentRenderOptimize)?null:{}),[tu,tm]=(0,a.useState)((null==eU?void 0:eU.commentRenderOptimize)?"":null),[tg,t_]=(0,a.useState)(eh),[tC,tw]=(0,a.useState)(),[ty,tE]=(0,a.useState)(""),[tj,tS]=(0,a.useState)(eg),tN=(0,a.useRef)(ex),tT=(0,a.useRef)(ec),tI=(0,a.useRef)(eu),tR=(0,a.useRef)(ev),tk=(0,a.useRef)(ef),tL=(0,a.useRef)(es),tb=(0,a.useRef)(!1),tM=(0,a.useRef)((null==ed?void 0:ed.length)?1:0),tO=(0,a.useRef)(null);tN.current=ex;let{info:tD,isLogin:tA}=eT||{},tP=(0,a.useRef)(!tA&&em===nC),tB=(null==eU?void 0:eU.commentRenderOptimize)===2?10:20,[tU,tz]=(0,a.useState)(!1),tF=(0,a.useRef)(0),tV=(0,a.useRef)(null==eO?void 0:null===(s=eO.plugins)||void 0===s?void 0:null===(l=s.autoplaysettingplugin)||void 0===l?void 0:null===(n=l.config)||void 0===n?void 0:n.nextAutoPlay),tZ=(0,a.useRef)((null==ed?void 0:ed.length)||0);tZ.current=null==ta?void 0:ta.length;let[tH,t$]=nE(ee)(),tG=(0,a.useRef)(!1),tW=(0,a.useRef)(ed),{blockNum:tK,setBlockNum:tY,actionCloseBlock:tQ,setActionCloseBlock:tJ,refBlockShowMore:t0,handleJumpBlock:t1,refLoginBlock:t2,getBlockNum:t3,transition:t6,isShowDebounce:t5,isHideDebounce:t4}=(0,ng._0)({effectiveTime:null==eU?void 0:null===(c=eU.commentBlock)||void 0===c?void 0:c.effective_time,type:null==eU?void 0:null===(m=eU.commentBlock)||void 0===m?void 0:m.type,abtestData:eU,isLogin:tA,defaultCommentList:ed}),t8=el||et,{EVENT:t9}=y,[ne,nt]=(0,a.useState)(tU),[nn,nl]=(0,a.useState)(!1),no=(0,a.useRef)(tU),ni=(0,a.useRef)(Date.now()),nr=(0,a.useRef)();void 0===nr.current&&(nr.current=Date.now());let na=!(!tA&&(t0.current&&!tQ||tP.current));(0,a.useEffect)(()=>{tU&&(nt(!0),y.emit(t9.videoStopPlayNext)),!tU&&ne&&y.emit(t9.videoRemoveStopPlayNext),no.current=tU},[tU]),(0,a.useEffect)(()=>()=>{var e;null===(e=tO.current)||void 0===e||e.call(tO),no.current&&y.emit(t9.videoRemoveStopPlayNext)},[]);let{isShow:ns,showBar:nd,isHighlight:nc,canShowLightComment:nm}=(0,G.d)({canShowDownloadBar:!0,type:"comment"}),{isShow:nf,showBar:nv,showAnimation:ny,hideBar:nj}=tx({abtestData:eU}),nS=(0,a.useRef)(null),nN=(0,a.useCallback)((e,t)=>{let n=z.default.commentToast;return eA.F.info(Object.assign({text:e,className:n},t),nS.current)},[nS.current]);(0,a.useEffect)(()=>{(null==ta?void 0:ta.length)&&to(!1),tb.current=!1;let e=()=>{tm(""),tc((null==eU?void 0:eU.commentRenderOptimize)?null:{})};return document.addEventListener("click",e),()=>{tb.current=!0,document.removeEventListener("click",e)}},[]);let nT=(0,a.useCallback)(()=>{tu&&(tm(""),tc((null==eU?void 0:eU.commentRenderOptimize)?null:{}))},[tu]);(0,a.useEffect)(()=>{tA&&(tE("none"),tS(tB))},[tA]);let[nI,nR]=(0,a.useState)(!0);(0,a.useEffect)(()=>{nR("visible"===document.visibilityState);let e=()=>{nR("visible"===document.visibilityState)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]);let nk=nI&&(et?t$:ea),nL=(0,h.d)(eN);(0,D.o)(()=>{eH&&nk&&!tF.current&&(tF.current=Date.now());let e=()=>{var e;tq.sendLog("commentListShow",{enter_from:(0,E.vM)(),group_id:null===(e=nL.current)||void 0===e?void 0:e.awemeId,duration:Date.now()-tF.current,comment_panel_position:et?"bar":"sidebar",comment_related_search_type:(0,tX.wp)(nL.current)&&!t8?"ai_search":"general_search"}),tF.current=0};return()=>{eH&&nk&&tF.current&&e()}},[eH,nk,et]),(0,a.useEffect)(()=>{(async()=>{if(tA||"video_detail"!==(0,j.yW)()&&"note_detail"!==(0,j.yW)()){tE("none");return}try{if((null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)&&(0!==eU.passportNotLoginCanSeeCommentCount||-1!==eU.passportNotLoginCanSeeCommentCount)&&!(0,S.VW)()){tE("login_guide");return}let n=await p.getComment(p.LoginSense.COMMENT_DETAIL,eU);if(n.shouldShow){var e,t;(null===(e=n.extra)||void 0===e?void 0:e.intensity)!==p.LoginIntensityType.FORCE&&tE("login_guide"),(null===(t=n.extra)||void 0===t?void 0:t.intensity)===p.LoginIntensityType.FORCE&&tE("force_login")}else tE("none")}catch(e){tE("none")}})()},[]),(0,a.useEffect)(()=>{let e=N.Q.getItem({sKey:g.CookieKeys.Theme});e9((0,T.Dr)(e)===g.ThemeValues.Dark);let t=y.listen(y.EVENT.changeTheme,e=>{let{theme:t}=e;e9(t===g.ThemeValues.Dark)});return()=>{null==t||t()}},[eU]);let nb=e=>{let t=ta.find(t=>t.cid===e).replyTotal||0;tn(e=>e-(1+t)>=0?e-(1+t):0),ts(t=>t.filter(t=>(null==t?void 0:t.cid)!==e))},nM=e=>{var t,n;"recommend"===e6&&!e3&&(0,I.xL)(eN,eO,"comment"),tn(e=>e+1),ts(t=>[(0,i._)((0,o._)({},e),{newComment:!0}),...t]),null==tH||null===(n=tH.current)||void 0===n||null===(t=n.scrollTo)||void 0===t||t.call(n,0,0)},{onSearchTextclick:nO,getSearchTextUrl:nD,headerSearchInfo:nA,onSearchTextMounted:nP}=t7({awemeInfo:eN,getSearchTextUrl:eF,onSearchTextClick:eV,isDetail:et,isSearch:el}),nB=(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)&&0!==eU.passportNotLoginCanSeeCommentCount&&-1!==eU.passportNotLoginCanSeeCommentCount&&!tA?eU.passportNotLoginCanSeeCommentCount:tQ||!t0.current||tA?1e4:null==eU?void 0:null===(v=eU.commentBlock)||void 0===v?void 0:v.comment_total,nU=ta.slice(0,nB),nz=(0,a.useCallback)(e=>{var t,n;let l=null!==(n=null==nU?void 0:null===(t=nU.filter(e=>{let{newComment:t}=e;return!t}))||void 0===t?void 0:t.findIndex(t=>{let{cid:n}=t;return n===e.replyId}))&&void 0!==n?n:-1;return eS((0,i._)((0,o._)({},e),{one_level_comment_rank:l>-1?l+1:-1}))},[eS,nU]),nF={diggCommentItem:eE,deleteCommentItem:ej,puhlishCommentItem:nz,fetchEmoticonGif:ew,fetchCommentMetionList:ey,setSelectedReply:tc,currentReplyCid:tu,setCurrentReplyCid:tm,isDetail:et,isSearch:el,isNeedCommentInput:eL,scrollCid:tC,container:tH.current,changeLoginStatus:eb,toast:nN,reportExtraParams:eB,getSearchTextUrl:nD,onSearchTextClick:nO,onSearchTextMounted:nP,isActive:eH,abtestData:eU,awemeInfo:eN,isPageVisible:nI},nV=e=>t=>{var n,l,o;null==t||null===(n=t.preventDefault)||void 0===n||n.call(t),(0,W.default)({success:async()=>{eb?eb():window.location.reload()},enterMethod:"comment",headerText:e,next:`https://${null===(o=window)||void 0===o?void 0:null===(l=o.location)||void 0===l?void 0:l.host}`})};(0,a.useImperativeHandle)(t,()=>({reset:()=>{tT.current=0,tR.current=!0,tk.current=0,tL.current=!1,tM.current=0,ts([]),t_(0),nH()}}));let nZ=(e,t)=>{let n=[];for(let l=0;l<t.length;l++)!e.find(e=>{var n;return(null==e?void 0:e.cid)===(null===(n=t[l])||void 0===n?void 0:n.cid)})&&n.push(t[l]);return n},nH=a.useCallback(async()=>{if((1!==tM.current||!eR)&&(!tP.current&&!t0.current&&!tG.current||!!tA)){if(!tL.current&&tR.current){tL.current=!0;let o=(0,R.sb)();try{var e,t,n,l;let{statusCode:i,comments:r,cursor:a,hasMore:s,hotsoonHasMore:d,total:c,whaleInfo:u}=await tN.current(tT.current,o===R.CK.Auto?Math.min(10,tj):tj,o,tO,ep,tI.current)||{},{actionClose:m}=t3(g.LocalStorageKeys.CommentBlock),f=m||tQ;if(tI.current=null==u?void 0:u.whaleCutToken,tZ.current+r.length>=(null==eU?void 0:null===(e=eU.commentBlock)||void 0===e?void 0:e.comment_total)&&t2.current&&!tA&&((null==eU?void 0:null===(t=eU.commentBlock)||void 0===t?void 0:t.is_force)||!(null==eU?void 0:null===(n=eU.commentBlock)||void 0===n?void 0:n.is_force)&&!f)&&(t0.current=!0),!tA&&(null==u?void 0:u.whaleDecisionCustom)===nC&&(tP.current=!0),ep&&tM.current<1){(null==r?void 0:r.length)===0&&eA.F.info("此评论已被删除");let e=null==r?void 0:r[0],t=null==r?void 0:null===(l=r[0])||void 0===l?void 0:l.replyComment,n=e&&(null==e?void 0:e.cid)!==ep,o=!(null==t?void 0:t.find(e=>e.cid===ep));n&&o&&eA.F.info("此评论已被删除"),(null==e?void 0:e.cid)===ep&&(null==e?void 0:e.replyId)!=="0"&&(eA.F.info("评论对话已删除"),r.length>1&&r.splice(0,1))}if(tM.current<1&&tM.current++,tb.current)return;t_(i),0===i&&(tT.current=a,tR.current=s,tk.current=d,ts(e=>[...e,...nZ(e,r)]),tW.current=[...tW.current,...nZ(tW.current,r)],c>0&&tn(c),ni.current=Date.now());let v=null==eU?void 0:eU.passportNotLoginCanSeeCommentCount;tA||0!==v?!tA&&-1!==v&&tW.current.length>=v&&(tG.current=!0,c>v&&tW.current.length>=v&&nl(!0)):tG.current=!0}catch(e){t_(-1)}tL.current=!1,to(!1);let i=np.cy.getPreloadCache(np.mM.COMMENT_BTN_CLICKED);tl&&e1===_.lT.Recommend&&i&&x.logInstance.sendLog("webCommentLoadDuration",{load_duration:Date.now()-(null==nr?void 0:nr.current),is_ad:(null==eN?void 0:eN.isAds)?1:0})}}},[tj,ep,tn,eR,tA,eU,tQ]);(0,a.useEffect)(()=>{let e=d()(e=>{if(e&&(0,R.i0)(R.CK.User),tH&&tH.current){let{clientHeight:e,scrollHeight:t,scrollTop:n}=tH.current;n+e+250>t&&nH()}},200);return(e_=et?e_||document:tH.current)&&tR.current&&0===tg&&(e_.addEventListener("scroll",e),e_.addEventListener("wheel",e),e_.addEventListener("DOMMouseScroll",e),window.addEventListener("resize",e),e()),()=>{e_&&tR.current&&(e_.removeEventListener("scroll",e),e_.removeEventListener("wheel",e),e_.removeEventListener("DOMMouseScroll",e),window.removeEventListener("resize",e))}},[e_,nH,tg,ty,tH.current,eU]),(0,a.useEffect)(()=>{let e=e=>{tV.current=null==e?void 0:e.isOn};return null==eO||eO.on(nx.B.AutoPlaySwitchChange,e),()=>{null==eO||eO.off(nx.B.AutoPlaySwitchChange,e)}},[eO]),(0,a.useEffect)(()=>{var e;let t=d()(()=>{(null==eU?void 0:eU.commentRenderOptimize)?tV.current&&((null==eO?void 0:eO.duration)-(null==eO?void 0:eO.currentTime)<=5||(null==eN?void 0:eN.awemeType)===C.e.Note)&&tz(!0):((null==eO?void 0:eO.duration)-(null==eO?void 0:eO.currentTime)<=5||(null==eN?void 0:eN.awemeType)===C.e.Note)&&tz(!0)},5e3),n=()=>tz(!1);return null==eO||eO.on("replay",n),null===(e=tH.current)||void 0===e||e.addEventListener("scroll",t),()=>{var e;null==eO||eO.off("replay",n),null===(e=tH.current)||void 0===e||e.removeEventListener("scroll",t)}},[eO,eU]);let n$=null;0===tg?tR.current||t0.current?n$=null==eU||null===(X=eU.commentBlock)||void 0===X||!X.type||(null==eU?void 0:null===(Q=eU.commentBlock)||void 0===Q?void 0:Q.is_btn_style)||!t0.current||tQ||tA?(null==eU?void 0:null===(J=eU.commentBlock)||void 0===J?void 0:J.type)&&t0.current&&!tQ&&!tA?(0,r.jsx)(n_.E,{isDetail:et,blockNum:tK,refBlockShowMore:t0.current,handleJumpBlock:t1,handleUnLogin:e=>{var t,n,l;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,W.default)({success:async()=>{eb?eb():window.location.reload()},enterMethod:"comment_force_click",headerText:"登录后查看更多评论",next:`https://${null===(l=window)||void 0===l?void 0:null===(n=l.location)||void 0===n?void 0:n.host}`})},text:"登录后查看更多评论",blockText:"跳过登录，继续看评论",enterMethod:"comment_force_click",onShow:()=>{var e;!(null==eU?void 0:null===(e=eU.commentBlock)||void 0===e?void 0:e.is_force)&&t2.current&&tY(e=>{let t=e<2?e+1:e;return(0,k.qQ)(g.LocalStorageKeys.CommentBlock,{total:t,lastTimes:Date.now()}),t})}}):tP.current&&!tA?(0,r.jsxs)("div",{className:u()(z.default.loginBtnWrapper,{[z.default.isDetail]:et}),children:[(0,r.jsx)("div",{children:"登录后查看更多评论"}),(0,r.jsx)(f.Button,{theme:"solid",className:z.default.loginBtn,onClick:nV("登录后查看更多评论"),children:"立即登录"})]}):eR&&1===tM.current?(0,r.jsx)("div",{className:z.default.firstReqBtnWrapper,children:(0,r.jsx)(f.Button,{style:{width:"100%"},size:"small",type:"secondary",onClick:async()=>{tM.current++,await nH()},children:"点击加载更多"})}):(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)===-1||tA?(0,r.jsx)(e4,{className:"",text:"加载中"}):null:(0,r.jsx)(n_.w,{close:()=>{t0.current=!1,tJ(!0),(0,k.qQ)(g.LocalStorageKeys.CommentBlock,{lastTimes:Date.now(),actionClose:!0})},blockNum:tK,enterMethod:"comment_force_qrcode",change:()=>{eK({type:"updateUserInfo"}),t0.current=!1},onShow:()=>{var e;!(null==eU?void 0:null===(e=eU.commentBlock)||void 0===e?void 0:e.is_force)&&tY(e=>{let t=e<2?e+1:e;return(0,k.qQ)(g.LocalStorageKeys.CommentBlock,{total:t,lastTimes:Date.now()}),t})},text:"登录后查看更多评论",notAnimate:!0}):tk.current?n$=(0,r.jsx)("p",{className:u()(z.default.noMoreText,{[z.default.isDetail]:et,[z.default.isSwiper]:!et}),children:"部分评论因未授权抖音，暂不支持查看"}):0===ta.length?(tl&&to(!1),n$=(0,r.jsx)("div",{className:u()(z.default.noMoreText,z.default.noText,{[z.default.isDetail]:et}),children:(0,r.jsx)(K.xH,{desc:"暂无评论",title:"",className:u()(z.default.emptyComment,{[z.default.isDetail]:et})})})):n$=(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)!==-1&&!tA&&tW.current.length>(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)?null:(0,r.jsx)("div",{className:u()(z.default.noMoreText,{[z.default.isDetail]:et}),children:"暂时没有更多评论"}):n$=(0,r.jsx)(nw,{reload:()=>{t_(0),nH()}});let nG=[_.lT.Recommend,_.lT.Follow,_.lT.Friend,_.lT.Modal].includes(e1);return(0,r.jsx)(eJ.X.Provider,{value:nF,children:(0,r.jsxs)("div",{className:u()(z.default.commentContainer,ez,{[z.default.isDetail]:et}),children:[(0,r.jsx)("div",{className:z.default.commentToastContainer,ref:nS}),et?(0,r.jsxs)("div",{className:u()(z.default.detailCommentHeader,{[z.default.hide]:!et}),children:[(0,r.jsxs)("div",{className:z.default.detailDividWrap,children:[(0,r.jsx)("span",{className:u()(z.default.title,"comment-title"),children:"全部评论"}),(0,r.jsx)("div",{className:z.default.divider,children:(0,r.jsx)(Y.i,{})})]}),(0,r.jsx)("div",{className:z.default.commentInputContainer,id:"comment-input-container","data-bytereplay-mask":"strict",children:tA?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:z.default.avatar,children:(0,r.jsx)(Z.a,{href:(0,L.HC)(null==tD?void 0:tD.secUid,"enter_method=comment"),target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(q.q,{src:null==tD?void 0:tD.avatarUrl,type:"extraSmall",alt:`${null==tD?void 0:tD.nickname}头像`})})}),(0,r.jsx)("div",{className:z.default.commentInput,onClickCapture:nT,children:(0,r.jsx)(te,{player:eO,fullScreenTarget:ek,isLogin:!0,hitCommentExperience:nG,puhlishCommentItem:nz,fetchEmoticonGif:ew,fetchCommentMetionList:ey,publishComment:nM,awemeInfo:eN,changeLoginStatus:eb,shortcutDisable:eD,shortcutMode:eP,isShowComment:ea,isSwiper:!et,commentLoadedTime:ni.current,abtestData:eU,reportExtraParams:eB})})]}):!eM&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:z.default.avatar,children:(0,r.jsx)("div",{onClick:nV("登录即可发表评论"),children:(0,r.jsx)(eQ.Z,{src:e8?P:A.Z,viewBox:"0 0 42 42",width:40,height:40})})}),(0,r.jsx)("div",{className:z.default.commentInput,children:(0,r.jsx)(te,{player:eO,hitCommentExperience:nG,fullScreenTarget:ek,isLogin:!1,changeLoginStatus:eb,commentLoadedTime:ni.current,abtestData:eU})})]})}),!!eM&&!!(nA||eG)&&(0,r.jsx)("div",{className:z.default.searchTip,children:(0,r.jsx)(H,{keywordList:nA&&!(eG||[]).find(e=>e===nA.text)?[nA.text,...eG||[]]:eG})}),nA&&!eM&&(0,r.jsx)("div",{className:z.default.searchTip,children:(0,r.jsx)(F.Z,(0,i._)((0,o._)({},nA),{abTestData:eU,isDetail:et,isSearch:el}))})]}):(0,r.jsxs)("div",{className:u()(z.default.relatedCommentHeader,{[z.default.hide]:et}),children:[isInClient()?(0,r.jsx)(tr.eD,{className:u()(z.default.enhanceDownloadBar,{[z.default.videoPageComment]:nm}),downloadHintClassName:z.default.enhanceDownloadHint,isShow:ns,hintText:"下载客户端，及时接收评论回复",style:{marginTop:"12px"},showDivider:!0,defaultHeighlight:nc,log:{enterFrom:(0,E.vM)(),type:"comment",channelId:M.g.Notice},showAnimation:!0}):(0,r.jsx)(ti,{hintText:"下载客户端，及时接收评论回复",style:{marginTop:16},showBar:nf,showAnimate:ny,hideBar:nj}),!tA&&!en&&["login_guide"].includes(ty)&&0!==ta.length&&!(null==eU?void 0:null===(V=eU.commentBlock)||void 0===V?void 0:V.type)&&(0,r.jsx)(tf,{change:e=>{tE(e)},success:eb,commentLoginType:ty}),tA&&(eY||ep)&&(0,r.jsx)(nh,{scene:ep?B.bu.CommentMentioned:B.bu.Comment,isShowComment:ea,commentGuideType:eq,setGlobalGuideType:eX,setShowTrayPushGuide:e0,isUpperFeed:e3}),(0,r.jsx)(U.Z,{hideCount:en,commentCount:tt||ei,onCloseClick:er,headerSearchInfo:nA,tipTextAfter:eZ,abTestData:eU})]}),(0,r.jsxs)("div",{ref:tH,"data-e2e":"comment-list",className:u()(z.default.commentMainContent,"comment-mainContent",{[z.default.mainContent]:!et,[z.default.flex]:tl&&!et}),children:[!tA&&!en&&"force_login"===ty&&!et&&!e7&&(0,r.jsx)(tf,{change:tE,success:eb,commentLoginType:ty}),["force_login"].includes(ty)?null:(0,r.jsxs)(r.Fragment,{children:[nU.map(e=>(0,r.jsx)(nu,{fullScreenTarget:ek,userInfo:tD,hitCommentExperience:nG,isSpider:eM,isSearch:el,isDetail:et,awemeInfo:eN,defaultCommentId:ep,commentInfo:e,fetchReply:eC,scrollContainerEl:et?tH.current:e_,awemelogPb:eI,deleteComment:nb,commentLoadedTime:ni.current,player:eO,renderTextWithTag:eW,abtestData:eU,dispatch:eK,isLogin:tA,changeLoginStatus:eb,setBlockNum:tY,loginBlock:t2.current,actionCloseBlock:tQ,setActionCloseBlock:tJ,commentList:nU,enableDomId:e2,isRelatedCard:e5},e.cid)),!eM&&n$,!eM&&nn&&"video_detail"!==(0,j.yW)()&&"note_detail"!==(0,j.yW)()&&(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)!==-1&&!tA&&(0,r.jsxs)("div",{className:z.default.hasMoreWithLoginDesc,children:[(0,r.jsx)("span",{className:z.default.hasMoreLine}),(0,r.jsx)("span",{className:z.default.hasMoreText,children:"登录后可看更多"}),(0,r.jsx)("span",{className:z.default.hasMoreLine})]})]}),!tA&&["login_guide","force_login"].includes(ty)&&("video_detail"===(0,j.yW)()||"note_detail"===(0,j.yW)())&&!(0,b.r)()&&0!==ta.length&&!tP.current&&!t2.current&&!e7&&("force_login"===ty?(0,r.jsx)(tv,{change:tE,success:()=>{eb(),tS(tB)},commentLoginType:ty}):(0,r.jsx)(th,{change:tE,success:()=>{eb(),tS(tB)},commentLoginType:ty,canClose:(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)===-1,title:(null==eU?void 0:eU.passportNotLoginCanSeeCommentCount)===-1?"登录后即可参与发布讨论，视频推荐更个性化哦":nn?"登录后可查看更多评论":"登录后即可参与互动讨论"}))]}),!et&&!["login_guide","force_login"].includes(ty)&&eL&&(0,r.jsxs)("div",{className:u()(z.default.swiperInput,"comment-input-container"),"data-bytereplay-mask":"strict",children:[(0,r.jsx)("div",{className:u()("comment-input-linear-bg",{[z.default.linearBG]:na})}),(0,r.jsx)(te,{player:eO,changeLoginStatus:eb,fullScreenTarget:ek,isLogin:tA,hitCommentExperience:nG,puhlishCommentItem:nz,fetchEmoticonGif:ew,fetchCommentMetionList:ey,placeHolder:(null==td?void 0:td.nickName)&&`回复@${null==td?void 0:td.nickName}`,replyText:null==td?void 0:td.text,level:(null==td?void 0:td.level)||0,levelOneCid:null==td?void 0:td.levelOneCid,cid:null==td?void 0:td.cid,publishComment:e=>{var t;null==td||null===(t=td.setIsShowCommentInput)||void 0===t||t.call(td,!1),(null==td?void 0:td.cid)?(null==td||td.publishComment(e),tw(null==e?void 0:e.cid)):nM(e),isInClient()?nd("comment"):nv(),tc((null==eU?void 0:eU.commentRenderOptimize)?null:{})},isSwiper:!et,isSearch:el,isCollapse:eo,awemeInfo:eN,shortcutDisable:eD,shortcutMode:eP,isShowComment:ea,reportExtraParams:eB,commentLoadedTime:ni.current,abtestData:eU,cancelReplyFn:()=>{tc((null==eU?void 0:eU.commentRenderOptimize)?null:{}),tm("")},setSelectedReply:tc,setShowTrayPushGuide:e0})]})||null,e7&&0!==ta.length&&!(0,b.r)()&&!tA&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:z.default.loginOverlayBg,id:"login-overlay-bg"}),(0,r.jsx)(tp,{success:()=>{eb()}})]})]})})})},420918:function(e,t,n){"use strict";n.d(t,{X:function(){return l}});let l=(0,n(88648).createContext)(null)},147002:function(e,t,n){"use strict";n.d(t,{KK:function(){return r},NK:function(){return s},VH:function(){return d},wp:function(){return a}});var l=n(159467),o=n(669201),i=n(55426);let r=e=>{let{searchHideWords:t,searchText:n,searchQueryId:o,start:i,end:r,isAiGuessWord:a}=e;return{type:l.w.Search,searchHideWords:t,searchQueryId:o,searchText:n,start:i,end:r,secUid:"",userId:"",hashtagId:"",hashtagName:"",awemeId:"",isCommerce:!1,searchRank:0,searchExtra:{query_type:a?"ai":""}}},a=e=>{try{let{suggestWords:n}=e||{};if(!n)return!1;let l=n.find(e=>e.scene===o.gQ.CommentTopRec);if(l){let{words:e}=l;if(e.length&&e[0].info){var t;return(null===(t=(0,i.As)(e[0].info))||void 0===t?void 0:t.query_type)==="ai"}}}catch(e){}return!1},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;try{let{textExtra:n}=e||{};if(!n)return null;let o=n.find(e=>{var n;let o=e.type===l.w.Search,i=!t||e.searchQueryId===t,r=(null===(n=e.searchExtra)||void 0===n?void 0:n.query_type)==="ai";return o&&i&&r});if(o)return o}catch(e){}return null},d=(e,t)=>{try{let{textExtra:n}=e||{};if(!n)return null;let o=n.find(e=>{var n;let o=e.type===l.w.Search,i=!t||e.searchQueryId===t,r=(null===(n=e.searchExtra)||void 0===n?void 0:n.query_type)==="ai";return o&&i&&!r});if(o)return o}catch(e){}return null}},474169:function(e,t,n){"use strict";n.d(t,{Z:function(){return ej}});var l=n("520739"),o=n("878389");n("874386"),n("950331"),n("675373"),n("268917");var i=n("563097"),r=n("88648"),a=n("64053"),s=n("115766"),d=n("713097"),c=n.n(d),u=n("637005"),m=n("422959"),f=n("128231"),v=n.n(f);let h=(0,r.createContext)(null);n("209955");var p=n("902239"),g=n("973725"),_=n("301061"),x=n("420918");function C(e){let{searchText:t}=e;return(0,i.jsx)("div",{className:g.default.middle,children:t?"没有搜索到相关用户":"没有数据"})}function w(e){let{isMiddle:t}=e;return(0,i.jsx)("div",{className:c()({[g.default.middle]:t}),children:(0,i.jsx)(_.gb,{})})}function y(e){let{isMiddle:t,onLoadMoreData:n}=e;return(0,i.jsxs)("div",{className:c()({[g.default.middle]:t}),children:["用户信息获取失败，请",(0,i.jsx)("span",{className:g.default.reload,onMouseDown:()=>{n()},children:"刷新"}),"重试"]})}function E(e){var t,n,l;let{suggestData:o,searchText:r,onLoadMoreData:a,isLoading:s}=e,d=null;return(null==o?void 0:o.statusCode)===0||s?(null==o?void 0:o.hasMore)?d=(0,i.jsx)(w,{isMiddle:(null==o?void 0:null===(l=o.data)||void 0===l?void 0:l.length)===0}):(null==o?void 0:o.hasFetchData)&&(null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.length)===0&&(d=(0,i.jsx)(C,{searchText:r})):d=(0,i.jsx)(y,{isMiddle:(null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.length)===0,onLoadMoreData:a}),d}function j(e){let{children:t,className:n,targetEl:l,isSearch:o,searchText:a,onLoadMoreData:s,suggestData:d}=e,u=(0,r.useRef)(null),[m,f]=(0,r.useState)(null),[_,C]=(0,r.useState)(!1),w=(0,r.useRef)(null),y=(0,r.useRef)(!1),j=(0,r.useContext)(x.X),{isDetail:S}=null!=j?j:{},{refOuterContainer:N}=(0,r.useContext)(h)||{},{styles:T}=(0,p.D)(l,m,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,16]}}]}),I=(0,r.useCallback)(()=>{var e,t;return S?{}:{marginTop:-((null==N?void 0:null===(t=N.current)||void 0===t?void 0:null===(e=t.querySelector(".richtext-container"))||void 0===e?void 0:e.offsetHeight)+200)}},[]);w.current=s;let R=(0,r.useCallback)(v()(async()=>{if(!!m&&!y.current){if(m.scrollTop+m.clientHeight+100>m.scrollHeight){var e;await (null===(e=w.current)||void 0===e?void 0:e.call(w))}}},500),[m]);return(0,r.useEffect)(()=>{m&&(m.scrollTop=0)},[a,m]),(0,r.useEffect)(()=>{if(!!m&&(null==d?void 0:d.statusCode)===0&&!!(null==d?void 0:d.hasMore))return y.current=!1,m.addEventListener("scroll",R),()=>{y.current=!0,m&&m.removeEventListener("scroll",R)}},[m,R,d]),(0,i.jsxs)("div",{className:c()(g.default.container,n,"atBox-outside-container",g.default.atIcon),ref:f,style:I(),onMouseDown:e=>{e.preventDefault()},children:[(0,i.jsx)("div",{className:c()(g.default.innerContainer,"atBox-inner-container",{[g.default.isSearch]:o}),ref:u,children:t}),(0,i.jsx)(E,{suggestData:d,searchText:a,isLoading:_,onLoadMoreData:async()=>{C(!0),await s(),C(!1)}})]})}function S(e){let{children:t,store:n}=e,{onLoadMoreData:l,suggestData:o,searchText:a,isAtIconSelected:s}=(0,r.useContext)(h);return(0,i.jsx)(j,{searchText:a,targetEl:null==n?void 0:n.getReferenceElement(),onLoadMoreData:l,suggestData:o,isAtIconSelected:s,children:t})}var N=n("368200"),T=n("32167"),I=n("21964"),R=n("410665");let k=(0,r.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,o._)((0,l._)({width:13,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.611 11a4.889 4.889 0 1 0 0-9.777 4.889 4.889 0 0 0 0 9.777z",fill:"#FE2C55"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.691 7.23a.612.612 0 0 0 0 .863.612.612 0 0 0 .863 0l2.697-2.697a.61.61 0 1 0-.864-.864L5.691 7.23z",fill:"url(#icon-avater-select_svg__paint0_linear_37464_5518)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.418 7.229a.612.612 0 0 1-.864 0l-.431-.432-1.288-1.288a.612.612 0 0 0-.864 0 .612.612 0 0 0 0 .864l1.72 1.72a.612.612 0 0 0 .863 0l.864-.864z",fill:"#fff"}),(0,i.jsx)("rect",{x:1.355,y:".856",width:10.511,height:10.511,rx:5.256,stroke:"#363741",strokeWidth:".733"}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"icon-avater-select_svg__paint0_linear_37464_5518",x1:7.925,y1:3.112,x2:5.088,y2:5.809,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#fff"}),(0,i.jsx)("stop",{offset:1,stopColor:"#ECEDED"})]})})]})));var L=n("836619"),b=n("473677"),M=n("474162");function O(e){var{className:t,mention:n,awemeInfo:a,selectOn:s,onClick:d}=e,u=(0,N._)(e,["className","mention","awemeInfo","selectOn","onClick"]);let[m,f]=(0,r.useState)(!1),v=(0,R.x)(()=>{I.Z.sendLog("commentAtShow",{author_id:`${null==a?void 0:a.authorUserId}`,group_id:null==a?void 0:a.awemeId,log_pb:null==a?void 0:a.logPb,enter_from:(0,T.vM)(),to_user_id:null==n?void 0:n.uid})}),h=(0,r.useCallback)(e=>{null==d||d(e),s&&f(e=>!e)},[d,s]),p=(0,r.useCallback)(()=>(0,i.jsx)("i",{className:L.default.mask}),[]);return(0,i.jsx)("div",(0,o._)((0,l._)({className:c()(L.default.container,t),onClick:e=>h(e)},u),{ref:v,children:(0,i.jsxs)("div",{className:L.default.innerContainer,children:[m?(0,i.jsx)(b.Z,{width:14,height:14,viewBox:"0 0 14 14",src:k,className:L.default.icon}):null,(0,i.jsx)(M.q,{src:n.avatarUri,type:"extraSmall",maskConf:{showMask:m,MaskItem:p}}),(0,i.jsx)("span",{className:L.default.userName,children:n.remarkName||n.nickname||""})]})}))}function D(e){var{children:t,mention:n,onMouseDown:l,onMouseUp:o,onMouseEnter:a}=e;(0,N._)(e,["children","mention","onMouseDown","onMouseUp","onMouseEnter"]);let{awemeInfo:s}=(0,r.useContext)(h);return(0,i.jsx)("div",{onMouseDown:l,onMouseUp:o,onMouseEnter:a,onMouseDown:e=>{l(e)},onMouseDownCapture:e=>{l(e)},onMouseUp:e=>{I.Z.sendLog("commentAtClick",{author_id:`${null==s?void 0:s.authorUserId}`,group_id:null==s?void 0:s.awemeId,log_pb:null==s?void 0:s.logPb,enter_from:(0,T.vM)(),to_user_id:null==n?void 0:n.uid}),o(e)},onClick:e=>{o(e)},onMouseEnter:()=>{},children:(0,i.jsx)(O,{mention:n,awemeInfo:s})})}function A(e){let{SuggestionComponent:t,loadSearchAtData:n,loadMoreDefaultAtData:l,atUserDefaultData:o,atUserSearchData:a,awemeInfo:s,editorState:d,addUserMention:c,isAtIconSelected:u,setIsAtIconSelected:m,refOuterContainer:f,setIsAtIconPoint:p}=e,[g,_]=(0,r.useState)(!1),[C,w]=(0,r.useState)(null==a?void 0:a.searchText),y=(0,r.useMemo)(()=>(null==a?void 0:a.hasMore)&&u,[a,u]),E=(0,r.useMemo)(()=>C?a:o,[a,o,C]),j=(0,r.useContext)(x.X),{isActive:N=!0}=null!=j?j:{};(0,r.useEffect)(()=>{(g||u)&&0===o.data.length&&0===o.statusCode&&o.hasMore&&l()},[g,o,l,u,N]),(0,r.useEffect)(()=>{!N&&_(!1)},[N]),(0,r.useEffect)(()=>{C&&n(C)},[C]);let T=(0,r.useCallback)(()=>C?n(C):l(),[C,n,l]),I=(0,r.useCallback)(v()(e=>{w(e.value)},300,{leading:!1,trailing:!0}),[]);return(0,i.jsx)(h.Provider,{value:{onLoadMoreData:T,suggestData:E,searchText:C,awemeInfo:s,editorState:d,addUserMention:c,isAtIconSelected:u,setIsAtIconSelected:m,refOuterContainer:f,setIsAtIconPoint:p},children:(0,i.jsx)(t,{open:g,onOpenChange:e=>{_(e)},suggestions:E.data,onSearchChange:e=>{I(e)},renderEmptyPopup:y,popperOptions:{loadMoreDefaultAtData:l,loadSearchAtData:n,suggestData:E,searchText:C},popoverContainer:S,entryComponent:D,hasMore:null==E?void 0:E.hasMore,isActive:N})})}n("981168"),n("242079"),n("851912"),n("826893"),n("927234"),n("791154");var P=n("352816"),B=n.n(P),U=(e,t,n)=>{let l=t.getAnchorKey(),o=t.getAnchorOffset();return function(e,t,n){let l=e.substr(0,t),o=n.map(e=>B()(e)).join("|"),i=RegExp(`(${o})`,"g"),r=l.matchAll(i),a=0,s=0;for(let e of r){let t=e[1].length;s=(a=e.index||0)+t}let d=l.slice(s);return{begin:a,end:l.length,matchingString:d}}(e.getCurrentContent().getBlockForKey(l).getText(),o,n)};function z(e){return"@"===e?"mention":`${e}mention`}function F(e,t,n,l,o){let i=e.getCurrentContent().createEntity(z(l),o,{mention:t}).getLastCreatedEntityKey(),r=e.getSelection(),{begin:s,end:d}=U(e,r,[l]),c=r.merge({anchorOffset:s,focusOffset:d}),u=a.Modifier.replaceText(e.getCurrentContent(),c,`${n}${t.name}`,void 0,i),m=c.getAnchorKey();e.getCurrentContent().getBlockForKey(m).getLength()===d&&(u=a.Modifier.insertText(u,u.getSelectionAfter()," "));let f=a.EditorState.push(e,u,"insert-fragment");return a.EditorState.forceSelection(f,u.getSelectionAfter())}let V=e=>{let t=e.getCurrentContent(),n=t.createEntity("mention","IMMUTABLE",{}).getLastCreatedEntityKey(),l=a.Modifier.insertText(t,t.getSelectionAfter(),"@",null,n);return a.EditorState.push(e,l,"insert-fragment")},Z=(e,t)=>F(e,t,"@","@","IMMUTABLE"),H=(e,t)=>{let n=e.getCurrentContent(),l=n.createEntity("mention","IMMUTABLE",{mention:t}).getLastCreatedEntityKey(),o=e.getSelection(),i=a.Modifier.removeRange(n,o,"backward"),r=a.Modifier.insertText(i,i.getSelectionAfter()," "),s=a.Modifier.insertText(r,r.getSelectionAfter(),`@${t.name}`,void 0,l);s=a.Modifier.insertText(s,s.getSelectionAfter()," ");let d=a.EditorState.push(e,s,"insert-fragment");return a.EditorState.forceSelection(d,s.getSelectionAfter())},$=(e,t)=>{let n=e.getCurrentContent(),l=n.createEntity("emoji","IMMUTABLE",{emojiInfo:t}).getLastCreatedEntityKey(),o=e.getSelection(),i=a.Modifier.removeRange(n,o,"backward"),r=a.Modifier.insertText(i,i.getSelectionAfter()," "),s=a.Modifier.insertText(r,r.getSelectionAfter(),`${t.text}`,void 0,l);s=a.Modifier.insertText(s,s.getSelectionAfter()," ");let d=a.EditorState.push(e,s,"insert-fragment");return a.EditorState.forceSelection(d,s.getSelectionAfter())};function G(e,t,n){let i=[],r=-1;return t.findEntityRanges(t=>{let l=t.getEntity();if(!l)return!1;let o=e.getEntity(l),a="mention"===o.getType();if(a){var s,d;let e=o.getData();i[++r]={user_id:null===(s=e.mention)||void 0===s?void 0:s.uid,sec_uid:null===(d=e.mention)||void 0===d?void 0:d.secUid,type:0,start:n+0,end:n+0}}return a},(e,t)=>{i[r]=(0,o._)((0,l._)({},i[r]),{start:n+e,end:n+t})}),i}let W=e=>({text:K(e),textExtra:(function(e){let t=e.getCurrentContent(),n=t.getFirstBlock(),l=t.getLastBlock(),o=n.getKey();if(o===l.getKey())return G(t,n,0);{let e=[];for(let n=o,l=0;n;n=t.getKeyAfter(n)){let o=t.getBlockForKey(n);e.push(...G(t,o,l)),l+=o.text.length+1}return e}})(e).filter(e=>null==e?void 0:e.user_id)}),K=e=>{let t=e.getCurrentContent().getBlocksAsArray(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].text);return n.join("\n")},Y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=e.getCurrentContent();if(0===n.length)return r=a.Modifier.insertText(r,r.getSelectionAfter(),t),a.EditorState.push(e,r,"insert-fragment");let s=n.sort((e,t)=>e.start-t.start);for(;t.length>i;)if(s.length>0&&s[0].start===i){let e=s[0],n=(0,o._)((0,l._)({},e),{uid:e.userId,name:t.slice(e.start,e.end)}),d=r.createEntity("mention","IMMUTABLE",{mention:n}),c=d.getLastCreatedEntityKey();r=a.Modifier.insertText(d,d.getSelectionAfter(),`${n.name}`,void 0,c),s.shift(),i=e.end}else{let e=s.length>0?s[0]:{start:t.length},n=t.slice(i,e.start);r=a.Modifier.insertText(r,r.getSelectionAfter(),n),i=e.start}return a.EditorState.push(e,r,"insert-fragment")},q=13;var X=n("308450"),Q=n("135729");function J(e){let{mention:t,children:n,className:l}=e;return(0,i.jsx)("a",{href:t.link,className:l,spellCheck:!1,"data-testid":"mentionLink",children:n})}function ee(e){let{children:t,className:n}=e;return(0,i.jsx)("span",{className:n,spellCheck:!1,"data-testid":"mentionText",children:t})}function et(e){let{entityKey:t,theme:n={},mentionComponent:l,children:o,decoratedText:r,className:a,contentState:s}=e,d=(0,Q.default)(n.mention,a),c=s.getEntity(t).getData().mention,u=l||(c.link?J:ee);return(0,i.jsx)(u,{entityKey:t,mention:c,theme:n,className:d,decoratedText:r,children:o})}var en=n("134761"),el=n("201845"),eo=n.n(el);let ei=e=>{let{onMentionSelect:t,mention:n,theme:l,index:o,onMentionFocus:a,isFocused:s,id:d,searchValue:c,entryComponent:u}=e,m=(0,r.useRef)(!1),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{s&&requestAnimationFrame(()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"nearest"})})},[s]),(0,r.useEffect)(()=>{m.current=!1});let v=s?l.mentionSuggestionsEntryFocused:l.mentionSuggestionsEntry;return(0,i.jsx)("div",{ref:f,children:(0,i.jsx)(u,{className:v,onMouseDown:e=>{e.preventDefault(),m.current=!0},onMouseUp:()=>{m.current&&(t(n),m.current=!1)},onMouseEnter:()=>{a(o)},role:"option",id:d,"aria-selected":s?"true":void 0,theme:l,mention:n,isFocused:s,searchValue:c})})};ei.propTypes={entryComponent:eo().any.isRequired,searchValue:eo().string,onMentionSelect:eo().func};function er(e){let{mention:t,theme:n={}}=e;return t.avatar?(0,i.jsx)("img",{src:t.avatar,className:n.mentionSuggestionsEntryAvatar,role:"presentation"}):null}function ea(e){let{mention:t,theme:n,isFocused:r,searchValue:a}=e,s=(0,N._)(e,["mention","theme","isFocused","searchValue"]);return(0,i.jsxs)("div",(0,o._)((0,l._)({},s),{children:[(0,i.jsx)(er,{mention:t,theme:n}),(0,i.jsx)("span",{className:null==n?void 0:n.mentionSuggestionsEntryText,children:t.name})]}))}let es=e=>e?"static"!==window.getComputedStyle(e).getPropertyValue("position")?e:es(e.parentElement):null;function ed(e){let t,n,l,{decoratorRect:o,popover:i,props:r}=e,a=es(i.parentElement);if(a){let e=a.getBoundingClientRect();t={scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,left:o.left-e.left,top:o.bottom-e.top}}else t={scrollTop:window.pageYOffset||document.documentElement.scrollTop,scrollLeft:window.pageXOffset||document.documentElement.scrollLeft,top:o.bottom,left:o.left};let s=t.left+t.scrollLeft,d=t.top+t.scrollTop;return r.open&&(r.suggestions.length>0?(n="scale(1)",l="all 0.25s cubic-bezier(.3,1.2,.2,1)"):(n="scale(0)",l="all 0.35s cubic-bezier(.3,1,.2,1)")),{left:`${s}px`,top:`${d}px`,transform:n,transformOrigin:"1em 0%",transition:l}}n("413806"),n("897860");var ec=e=>{let[t,n,l]=e.split("-");return{blockKey:t,decoratorKey:parseInt(n,10),leafKey:parseInt(l,10)}};function eu(e){return void 0!==e}function em(e){let{store:t,children:n,theme:a,popperOptions:s={placement:"bottom-start"}}=e,[d,c]=(0,r.useState)(()=>(0,Q.default)(a.mentionSuggestions,a.mentionSuggestionsPopup)),[u,m]=(0,r.useState)(null),{styles:f,attributes:v}=(0,p.D)(t.getReferenceElement(),u,s);return(0,r.useEffect)(()=>{requestAnimationFrame(()=>c((0,Q.default)(a.mentionSuggestions,a.mentionSuggestionsPopup,a.mentionSuggestionsPopupVisible)))},[a]),(0,i.jsx)("div",(0,o._)((0,l._)({ref:m,style:f.popper},v.popper),{className:d,children:n}))}var ef=n("419631");let ev=n.n(ef)()(e=>{});class eh extends r.Component{componentDidUpdate(){if(this.popover){let e=this.props.suggestions.length;if(e>0&&this.state.focusedOptionIndex>=e&&this.setState({focusedOptionIndex:e-1}),!this.props.store.getAllSearches().has(this.activeOffsetKey))return;let t=this.props.store.getPortalClientRect(this.activeOffsetKey);for(let[e,n]of Object.entries((this.props.positionSuggestions||ed)({decoratorRect:t,props:this.props,popover:this.popover})))this.popover.style[e]=n}}componentWillUnmount(){this.props.callbacks.onChange=void 0}render(){if(!this.props.open)return null;let e=this.props,{entryComponent:t,popoverComponent:n,popperOptions:a,popoverContainer:s=em,onOpenChange:d,onAddMention:c,onSearchChange:u,suggestions:m,ariaProps:f,callbacks:v,theme:h={},store:p,entityMutability:g,positionSuggestions:_,mentionTriggers:x,mentionPrefix:C}=e,w=(0,N._)(e,["entryComponent","popoverComponent","popperOptions","popoverContainer","onOpenChange","onAddMention","onSearchChange","suggestions","ariaProps","callbacks","theme","store","entityMutability","positionSuggestions","mentionTriggers","mentionPrefix"]);return n||_?(ev("The properties `popoverComponent` and `positionSuggestions` are deprecated and will be removed in @draft-js-plugins/mentions 6.0 . Use `popperOptions` instead"),r.cloneElement(n||(0,i.jsx)("div",{}),(0,o._)((0,l._)({},w),{className:h.mentionSuggestions,role:"listbox",id:`mentions-list-${this.key}`,ref:e=>{this.popover=e}}),null==m?void 0:m.map((e,n)=>(0,i.jsx)(ei,{onMentionSelect:this.onMentionSelect,onMentionFocus:this.onMentionFocus,isFocused:this.state.focusedOptionIndex===n,mention:e,index:n,id:`mention-option-${this.key}-${n}`,theme:h,searchValue:this.lastSearchValue,entryComponent:t||ea},null!==e.id?e.id:e.name)))):this.props.renderEmptyPopup||0!==m.length?(0,i.jsx)(s,{store:this.props.store,popperOptions:a,theme:h,children:null==m?void 0:m.map((e,n)=>(0,i.jsx)(ei,{onMentionSelect:this.onMentionSelect,onMentionFocus:this.onMentionFocus,isFocused:this.state.focusedOptionIndex===n,mention:e,index:n,id:`mention-option-${this.key}-${n}`,theme:h,searchValue:this.lastSearchValue,entryComponent:t||ea},null!==e.id?e.id:e.uid))}):null}constructor(e){super(e),(0,en._)(this,"state",{focusedOptionIndex:0}),(0,en._)(this,"key",(0,a.genKey)()),(0,en._)(this,"popover",void 0),(0,en._)(this,"activeOffsetKey",void 0),(0,en._)(this,"lastSearchValue",void 0),(0,en._)(this,"lastActiveTrigger",""),(0,en._)(this,"lastSelectionIsInsideWord",void 0),(0,en._)(this,"onEditorStateChange",e=>{let t=this.props.store.getAllSearches();if(0===t.size)return e;let n=function(e,t,n){let l=e.getSelection(),o=l.getAnchorKey(),i=l.getAnchorOffset();if(!l.isCollapsed()||!l.getHasFocus())return null;let r=t.map(e=>ec(e)).filter(e=>e.blockKey===o).map(t=>{var n;return null==e?void 0:null===(n=e.getBlockTree(t.blockKey))||void 0===n?void 0:n.getIn([t.decoratorKey])});if(r.every(e=>void 0===e))return null;let a=e.getCurrentContent().getBlockForKey(o).getText(),s=r.filter(eu).map(e=>{let{start:t,end:l}=e;return n.map(e=>0===t&&i>=t+e.length&&a.substr(0,e.length)===e&&i<=l||n.length>1&&i>=t+e.length&&(a.substr(t+1,e.length)===e||a.substr(t,e.length)===e)&&i<=l||1===n.length&&i>=t+e.length&&i<=l?e:void 0).filter(eu)[0]}).filter(eu);if(s.isEmpty())return null;let[d,c]=s.entrySeq().first();return{activeOffsetKey:d,activeTrigger:c}}(e,t,this.props.mentionTriggers);if(!n)return(()=>(this.props.store.resetEscapedSearch(),this.closeDropdown(),e))();let l=this.activeOffsetKey;return this.activeOffsetKey=n.activeOffsetKey,this.onSearchChange(e,e.getSelection(),this.activeOffsetKey,l,n.activeTrigger),!this.props.store.isEscaped(this.activeOffsetKey||"")&&this.props.store.resetEscapedSearch(),!this.props.open&&!this.props.store.isEscaped(this.activeOffsetKey||"")&&this.openDropdown(),l!==this.activeOffsetKey&&this.setState({focusedOptionIndex:0}),e}),(0,en._)(this,"onSearchChange",(e,t,n,l,o)=>{let{matchingString:i}=U(e,t,[o]);(this.lastActiveTrigger!==o||this.lastSearchValue!==i||n!==l)&&(this.lastActiveTrigger=o,this.lastSearchValue=i,this.props.onSearchChange({trigger:o,value:i}))}),(0,en._)(this,"onDownArrow",e=>{e.preventDefault();let t=this.state.focusedOptionIndex+1;this.onMentionFocus(t>=this.props.suggestions.length?0:t)}),(0,en._)(this,"onTab",e=>{e.preventDefault(),this.commitSelection()}),(0,en._)(this,"onUpArrow",e=>{if(e.preventDefault(),this.props.suggestions.length>0){let e=this.state.focusedOptionIndex-1;this.onMentionFocus(e<0?this.props.suggestions.length-1:e)}}),(0,en._)(this,"onEscape",e=>{e.preventDefault(),this.props.store.escapeSearch(this.activeOffsetKey||""),this.closeDropdown(),this.props.store.setEditorState(this.props.store.getEditorState())}),(0,en._)(this,"onMentionSelect",e=>{if(!e)return;this.props.onAddMention&&this.props.onAddMention(e),this.closeDropdown();let t=F(this.props.store.getEditorState(),e,this.props.mentionPrefix,this.lastActiveTrigger||"",this.props.entityMutability);this.props.store.setEditorState(t)}),(0,en._)(this,"onMentionFocus",e=>{let t=`mention-option-${this.key}-${e}`;this.props.ariaProps.ariaActiveDescendantID=t,this.setState({focusedOptionIndex:e}),this.props.store.setEditorState(this.props.store.getEditorState())}),(0,en._)(this,"commitSelection",()=>{let e=this.props.suggestions[this.state.focusedOptionIndex];return this.props.store.getIsOpened()&&e?(this.onMentionSelect(e),"handled"):"not-handled"}),(0,en._)(this,"openDropdown",()=>{this.props.callbacks.handleReturn=this.commitSelection,this.props.callbacks.keyBindingFn=e=>{40===e.keyCode&&this.onDownArrow(e),38===e.keyCode&&this.onUpArrow(e),27===e.keyCode&&this.onEscape(e),9===e.keyCode&&this.onTab(e)};let e=`mention-option-${this.key}-${this.state.focusedOptionIndex}`;this.props.ariaProps.ariaActiveDescendantID=e,this.props.ariaProps.ariaOwneeID=`mentions-list-${this.key}`,this.props.ariaProps.ariaHasPopup="true",this.props.ariaProps.ariaExpanded=!0,this.props.onOpenChange(!0)}),(0,en._)(this,"closeDropdown",()=>{this.props.callbacks.handleReturn=void 0,this.props.callbacks.keyBindingFn=void 0,this.props.ariaProps.ariaHasPopup="false",this.props.ariaProps.ariaExpanded=!1,this.props.ariaProps.ariaActiveDescendantID=void 0,this.props.ariaProps.ariaOwneeID=void 0,this.props.onOpenChange(!1)}),this.props.callbacks.onChange=this.onEditorStateChange}}(0,en._)(eh,"propTypes",{open:eo().bool.isRequired,onOpenChange:eo().func.isRequired,entityMutability:eo().oneOf(["SEGMENTED","IMMUTABLE","MUTABLE"]),entryComponent:eo().func,onAddMention:eo().func,suggestions:eo().array.isRequired});let ep="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function eg(e){let t=(0,r.useRef)(),n=e=>{e.store.updatePortalClientRect(e.offsetKey,()=>t.current.getBoundingClientRect())};return ep(()=>(e.store.register(e.offsetKey),e.store.setIsOpened(!0),n(e),e.store.setEditorState(e.store.getEditorState()),()=>{e.store.unregister(e.offsetKey),e.store.setIsOpened(!1),e.store.setReferenceElement(null)}),[]),(0,r.useEffect)(()=>{n(e)}),(0,i.jsx)("span",{ref:n=>{t.current=n,e.store.setReferenceElement(n)},children:e.children})}var e_=e=>(t,n,l)=>{t.findEntityRanges(t=>{let n=t.getEntity();return null!==n&&e.some(e=>l.getEntity(n).getType()===z(e))},n)};n("954372");let ex=/\s/,eC=(e,t,n,l)=>{let o=t.getText();t.findEntityRanges(e=>!e.getEntity(),(t,i)=>{let r=o.slice(t,i);n?!function(e,t,n,l){let o,i;let r=e.lastIndex;for(;null!==(o=e.exec(t));){var a,s;if(e.lastIndex===r)break;r=e.lastIndex;let t=(i=n+o.index)+o[0].length;a=0,s=o.index;l(i,t)}}(e,r,t,l):!function(e,t,n,l){let o,i;let r=e.lastIndex;for(;null!==(o=e.exec(t))&&e.lastIndex!==r;){;r=e.lastIndex;let a=(i=n+o.index)+o[0].length;ex.test(t[i])&&(i+=1),l(i,a)}}(e,r,t,l)})};var ew=(e,t,n)=>{let l=`(${e.map(e=>B()(e)).join("|")})`,o=t?RegExp(`${l}(${n}|\\s)*`,"g"):RegExp(`(\\s|^)${l}${n}*`,"g");return(e,n)=>{eC(o,e,t,n)}},ey=n("784492"),eE=e=>{let{suggestions:t,onSearchChange:n,popoverContainer:l,hasMore:o}=e,{editorState:s,awemeInfo:d,addUserMention:c,isAtIconSelected:u,setIsAtIconSelected:m,setIsAtIconPoint:f}=(0,r.useContext)(h);return((0,ey.Z)(()=>{var e,t,l,o,i;let r=s.getCurrentContent(),d=r.getPlainText(),c=s.getSelection().getAnchorOffset(),u=null===(l=(0,a.convertToRaw)(r))||void 0===l?void 0:null===(t=l.blocks)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.entityRanges,v=null==u?void 0:null===(i=u.reverse)||void 0===i?void 0:null===(o=i.call(u))||void 0===o?void 0:o.find(e=>e.offset<c);if(d){if(v){let{offset:e,length:t}=v,l=d.substring(e+t-1,c),o=l.indexOf("@");o>-1?n({value:l.slice(o+1)}):m(!1)}else{let e=d.indexOf("@");e>-1?n({value:d.slice(e+1)}):m(!1)}}else m(!1),f(!1),n({value:""})},[s,n]),u&&((null==t?void 0:t.length)||!1!==o))?(0,i.jsx)(l,{children:null==t?void 0:t.map(e=>(0,i.jsx)("div",{id:`search_${e.uid}`,children:(0,i.jsx)(O,{mention:e,awemeInfo:d,onClick:t=>{t.stopPropagation(),I.Z.sendLog("commentAtClick",{author_id:`${null==d?void 0:d.authorUserId}`,group_id:null==d?void 0:d.awemeId,log_pb:null==d?void 0:d.logPb,enter_from:(0,T.vM)(),to_user_id:null==e?void 0:e.uid}),c(e),n({value:""}),m(!1),f(!1)}})},`search_${e.uid}`))}):null};n("418982"),n("130604");var ej=r.forwardRef(function(e,t){let{placeholder:n,onChange:d,loadSearchAtData:f,loadMoreDefaultAtData:v,atUserDefaultData:h,atUserSearchData:p,onEditFocus:g,onEditBlur:_,awemeInfo:x,handlePublishClick:C,isAtIconSelected:w,setIsAtIconSelected:y,refOuterContainer:E,setIsAtIconPoint:j,isAtIconPoint:S,className:N,readOnly:T,maxLength:I,player:R}=e,k=(0,r.useRef)(null),L=(0,r.useRef)(null),[b,M]=(0,r.useState)(()=>a.EditorState.createEmpty()),O=(0,r.useRef)([]),D=(0,r.useRef)(!1),[P,B]=(0,r.useState)(!1),U=(0,r.useMemo)(()=>(function(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={keyBindingFn:void 0,handleKeyCommand:void 0,handleReturn:void 0,onChange:void 0},a={ariaHasPopup:"false",ariaExpanded:!1,ariaOwneeID:void 0,ariaActiveDescendantID:void 0},s=(0,X.Map)(),d=(0,X.Map)(),c=!1,u={getEditorState:void 0,setEditorState:void 0,getPortalClientRect:e=>d.get(e)(),getAllSearches:()=>s,isEscaped:t=>e===t,escapeSearch:t=>{e=t},resetEscapedSearch:()=>{e=void 0},register:e=>{s=s.set(e,e)},updatePortalClientRect:(e,t)=>{d=d.set(e,t)},unregister:e=>{s=s.delete(e),d=d.delete(e)},getIsOpened:()=>c,setIsOpened:e=>{c=e},getReferenceElement:()=>t,setReferenceElement:e=>{t=e}},{mentionPrefix:m="",theme:f={},positionSuggestions:v,mentionComponent:h,mentionSuggestionsComponent:p=eh,entityMutability:g="SEGMENTED",mentionTrigger:_="@",mentionRegExp:x="[\\w-\xc0-\xd6\xd8-\xf6\xf8-\xffĀ-ňŊ-ſА-я぀-ゟ゠-ヿ㄰-㆏가-힣一-龥؀-ۿ\xc0-ỹ。.><》《+。。,，]",supportWhitespace:C=!1,popperOptions:w}=n,y="string"==typeof _?[_]:_,E={ariaProps:a,callbacks:r,theme:f,store:u,entityMutability:g,positionSuggestions:v,mentionTriggers:y,mentionPrefix:m,popperOptions:w};return{MentionSuggestions:e=>(0,i.jsx)(p,(0,l._)({},e,E)),decorators:[{strategy:e_(y),component:e=>(0,i.jsx)(et,(0,o._)((0,l._)({},e),{theme:f,mentionComponent:h}))},{strategy:ew(y,C,x),component:e=>(0,i.jsx)(eg,(0,o._)((0,l._)({},e),{store:u}))}],getAccessibilityProps:()=>({role:"combobox",ariaAutoComplete:"list",ariaHasPopup:a.ariaHasPopup,ariaExpanded:a.ariaExpanded,ariaActiveDescendantID:a.ariaActiveDescendantID,ariaOwneeID:a.ariaOwneeID}),initialize:e=>{let{getEditorState:t,setEditorState:n}=e;u.getEditorState=t,u.setEditorState=n},keyBindingFn:e=>r.keyBindingFn&&r.keyBindingFn(e),handleReturn:e=>r.handleReturn&&r.handleReturn(e),onChange:e=>r.onChange?r.onChange(e):e}})({entityMutability:"IMMUTABLE",mentionPrefix:"@",mentionTrigger:"@",supportWhitespace:!0,mentionComponent:e=>(0,i.jsx)("span",{className:c()(e.className,"douyin_mention_word"),children:e.children})}),[]),{MentionSuggestions:z}=U||{},F=[];F.unshift(U);let G=(0,r.useCallback)(e=>{let t=Z(b,e);M(t),null==d||d(K(t)),u.emit(u.EVENT.videoStopPlayNext)},[b,d]);(0,r.useImperativeHandle)(t,()=>({addUserMention:e=>{let t=H(b,e);M(t),null==d||d(K(t)),u.emit(u.EVENT.videoStopPlayNext)},addEmoji:e=>{let t=$(b,{text:`${(null==e?void 0:e.text)||"[微笑]"}`});M(t),null==d||d(K(t)),u.emit(u.EVENT.videoStopPlayNext)},getCommentInfo:()=>{let e=W(b);return(0,o._)((0,l._)({},e),{pastedText:O.current})},getCommentText:()=>K(b),clearInput:()=>new Promise(e=>{M(t=>(O.current=[],e(t),a.EditorState.createEmpty())),null==d||d("")}),resetInput:e=>{let t=e.getSelection(),n=e.getCurrentContent().getBlockMap().last(),l=t.merge({anchorKey:n.getKey(),anchorOffset:n.getLength(),focusKey:n.getKey(),focusOffset:n.getLength(),isBackward:!1,hasFocus:!0}),o=a.EditorState.forceSelection(e,l);M(o),null==d||d(K(o))},focus:()=>{setTimeout(()=>{var e,t;null===(t=k.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},200)},blur:()=>{setTimeout(()=>{var e,t;null===(t=k.current)||void 0===t||null===(e=t.blur)||void 0===e||e.call(t)},200)},addAtIcon:()=>{let e=V(b),t=a.EditorState.moveFocusToEnd(e);M(t),null==d||d(K(t))},setContent:(e,t)=>{let n=Y(b,e,t);M(n),null==d||d(K(n))}}),[b,d]);let Q=(0,r.useCallback)(e=>{let{keyCode:t}=e,n=e.ctrlKey||e.metaKey;return t!==q||n?(0,a.getDefaultKeyBinding)(e):(C(),"noop")},[C,R]);return(0,r.useEffect)(()=>{B(!0)},[]),(0,i.jsx)("div",{className:c()("richtext-container",N),ref:L,children:P?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ZP,{readOnly:T,editorState:b,onChange:e=>{M(e),null==d||d(K(e))},stripPastedStyles:!0,keyBindingFn:Q,plugins:F,handlePastedText:(e,t,n)=>I>0&&n.getCurrentContent().getPlainText().length+e.length>I?"handled":(O.current.push(e),"not-handled"),placeholder:(0,i.jsx)(m.Z,{text:n}),handleBeforeInput:(e,t)=>I>0&&t.getCurrentContent().getPlainText().length+e.length>I?"handled":"not-handled",ref:k,onFocus:()=>{var e;!D.current&&setTimeout(()=>{M(e=>{let t=e.getCurrentContent().getLastBlock(),n=t.getKey(),l=t.getLength(),o=a.SelectionState.createEmpty(n).merge({anchorOffset:l,focusOffset:l});return a.EditorState.forceSelection(e,o)})}),D.current=!0,null==g||g(),u.emit(u.EVENT.videoStopPlayNext),S&&(null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.length)>0&&y(!0)},onBlur:()=>{D.current=!1,null==_||_(),u.emit(u.EVENT.videoRemoveStopPlayNext)},isAtIconSelected:w}),(0,i.jsx)(A,{SuggestionComponent:w?eE:z,loadSearchAtData:f,loadMoreDefaultAtData:v,atUserDefaultData:h,atUserSearchData:p,awemeInfo:x,editorState:b,addUserMention:G,isAtIconSelected:w,setIsAtIconSelected:y,refOuterContainer:E,setIsAtIconPoint:j})]}):(0,i.jsx)("div",{className:"placeholder-default",children:(0,i.jsx)("span",{children:n})})})})},21964:function(e,t,n){"use strict";var l=n(520739),o=n(544933),i=n(998848);let r=(0,l._)({},(0,i.n)({includeEnterMethod:!0,includeExtendedParams:!0}),(0,i.z)());t.Z=new o.h(r)},288182:function(e,t,n){"use strict";n.d(t,{eD:function(){return g}}),n(874386);var l=n(563097),o=n(88648),i=n(713097),r=n.n(i),a=n(659364),s=n(782563),d=n(931887),c=n(782442),u=n(523659),m=n(891283),f=n(493449),v=n(473677),h=n(733507),p=n(531471);let g=(0,o.memo)(e=>{let{className:t,hintText:n,log:i,isLogin:g,defaultHeighlight:_=!0,isShow:x,style:C,textContainerClassName:w,showDivider:y=!1,defaultShow:E=!0,showAnimation:j=!1,downloadHintClassName:S,downloadButtonClassNmae:N,autoCancelHeighlight:T=!0,onClick:I,onVisibilityChange:R}=e,{downloadHref:k,downloadAttr:L}=(0,h.o)({channelId:i.channelId}),[b,M]=(0,a.C)({value:x,defaultValue:E}),[O,D]=(0,o.useState)(_),A=(0,o.useRef)(null);return((0,o.useEffect)(()=>{null==R||R(b)},[b,R]),(0,o.useEffect)(()=>{(async()=>{!(0,s.DT)()&&!(0,s.tq)()&&(0,p.D5)()&&!b&&g&&!await (0,d.Y)(!0)&&M(!0)})(),b&&f.Z.sendLog("addToDesktopShow",{enter_from:null==i?void 0:i.enterFrom,type:null==i?void 0:i.type,guide_type:null==i?void 0:i.guideType,channel_id:null==i?void 0:i.channelId,ug_channel_id:c.Le.getConfig(c.gI.WebUgChannelId)||""})},[b,g,i,M]),(0,o.useEffect)(()=>(O&&!A.current&&b&&T&&(A.current=setTimeout(()=>{D(!1),clearTimeout(A.current),A.current=null},5e3)),()=>{clearTimeout(A.current),A.current=null}),[O,b]),j||b)?(0,l.jsxs)("div",{className:r()(u.default.container,t,{[u.default.withDivider]:y,[u.default.hide]:!b}),style:C,children:[(0,l.jsxs)("div",{className:r()(u.default.downloadHint,S),children:[(0,l.jsx)("div",{className:r()(u.default.downloadHintText,w),children:null!=n?n:"下载电脑客户端，随时访问抖音"}),(0,l.jsxs)("a",{href:k,download:L,className:r()(u.default.downloadButton,N,{[u.default.highlight]:O}),onClick:()=>{if(I)return I(),!1;f.Z.sendLog("addToDesktopClick",{enter_from:null==i?void 0:i.enterFrom,type:null==i?void 0:i.type,guide_type:null==i?void 0:i.guideType,group_id:null==i?void 0:i.groupId,channel_id:null==i?void 0:i.channelId,ug_channel_id:c.Le.getConfig(c.gI.WebUgChannelId)||""})},children:[(0,l.jsx)(v.Z,{className:u.default.downloadIcon,src:m.Z,width:14,height:14,viewBox:"0 0 14 14"}),(0,l.jsx)("span",{children:"下载"})]})]}),y&&(0,l.jsx)("div",{className:u.default.divider})]}):(0,l.jsx)(l.Fragment,{})})},643946:function(e,t,n){"use strict";n.d(t,{n:function(){return g}});var l=n(520739),o=n(878389),i=n(368200);n(874386),n(284961),n(826893);var r=n(563097),a=n(88648),s=n(419936),d=n.n(s),c=n(713097),u=n.n(c),m=n(485941),f=n(668258),v=n(184644),h=n(851182),p=n(593231);let g=(0,a.forwardRef)((e,t)=>{let{className:n,srcList:s,size:c,style:g,uniqKey:_,onClick:x,onLoad:C,needCenterZoom:w=!1,sendUseLog:y,abTestData:E}=e,j=(0,i._)(e,["className","srcList","size","style","uniqKey","onClick","onLoad","needCenterZoom","sendUseLog","abTestData"]),[S,N]=(0,a.useState)(s),[T,I]=(0,a.useState)(null),[R,k]=(0,a.useState)({}),[L,b]=(0,a.useState)(!1),M=(0,a.useRef)(0),O=(0,a.useRef)(!1),D=(0,a.useRef)(!1),A=async e=>{if(!e||O.current)return;O.current=!0;let[t,n]=await (0,p.Z)((0,f.FF)(e));if(t)return;let l=null==n?void 0:n.UrlList;(null==l?void 0:l.length)&&(M.current=0,N(l))},P=(0,a.useCallback)(e=>{b(!1),I(e)},[]),B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&b(!0),!d()(S)){e&&A(S);return}let t=M.current;t<S.length?(P(S[t]),M.current++):e&&A(S[0])};if((0,a.useEffect)(()=>{N(s)},[s]),(0,a.useEffect)(()=>{d()(S)?B():!(null==R?void 0:R[_])&&P(S)},[S]),!T)return(0,r.jsx)("div",(0,o._)((0,l._)({},j),{ref:t,onClick:x,style:g,className:u()(v.default.imgReal,n)}));let U=(0,h.Z)(String(T)).replace("https://p1.pstatp.","https://sf1-cdn-tos.douyinstatic.").replace("https://p3.pstatp.","https://sf3-cdn-tos.douyinstatic.").replace("https://p6.pstatp.","https://sf6-cdn-tos.douyinstatic.").replace("https://p9.pstatp.","https://sf6-cdn-tos.douyinstatic.");return(c&&(U=U.replace(/~\d+x\d+\.image$/,`~${c}.image`).replace(/~noop\.image$/,`~${c}.image`)),U&&_&&k((0,o._)((0,l._)({},R),{[_]:U})),L)?(0,r.jsx)("div",(0,o._)((0,l._)({},j),{ref:t,onClick:x,style:g,className:u()(v.default.imgReal,n)})):w?(0,r.jsx)(m.k,(0,o._)((0,l._)({},j),{ref:t,onClick:x,style:g,onLoad:C,className:u()(v.default.imgReal,n),src:U,onError:B,onMouseEvent:e=>{!D.current&&"wheel"===e&&(null==y||y(),D.current=!0)}})):(0,r.jsx)("img",(0,o._)((0,l._)({},j),{ref:t,onClick:x,style:g,onLoad:C,className:u()(v.default.imgReal,n),src:U,onError:B}))})},808109:function(e,t,n){"use strict";n.d(t,{o:function(){return g}}),n("874386");var l=n("563097"),o=n("88648"),i=n("747909"),r=n("713097"),a=n.n(r),s=n("702726"),d=n("520739"),c=n("878389");let u=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,c._)((0,d._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsxs)("g",{filter:"url(#ic_cemera_delete_svg__filter0_d_9838_5464)",children:[(0,l.jsxs)("mask",{id:"ic_cemera_delete_svg__a",maskUnits:"userSpaceOnUse",x:1,y:0,width:16,height:5,fill:"#000",children:[(0,l.jsx)("path",{fill:"#fff",d:"M1 0h16v5H1z"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.072 1a.65.65 0 0 0-.635.509l-.176.791H2.812a.813.813 0 0 0 0 1.625H15.489a.813.813 0 0 0 0-1.625h-3.449l-.176-.791A.65.65 0 0 0 11.23 1H7.072z"})]}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.072 1a.65.65 0 0 0-.635.509l-.176.791H2.812a.813.813 0 0 0 0 1.625H15.489a.813.813 0 0 0 0-1.625h-3.449l-.176-.791A.65.65 0 0 0 11.23 1H7.072z",fill:"#fff"}),(0,l.jsx)("path",{d:"M6.437 1.509l-.158-.035.158.035zm-.176.791v.163a.163.163 0 0 0 .159-.128L6.261 2.3zM2.812 3.925v.163-.163zm3.088 0v-.162.162zm6.5 0v-.162.162zm3.088 0v.163-.163zM12.039 2.3l-.159.035a.163.163 0 0 0 .16.127V2.3zm-.176-.791l-.158.035.158-.035zm-5.267.035a.488.488 0 0 1 .476-.381V.837c-.381 0-.71.265-.793.637l.317.07zm-.176.791l.176-.79-.317-.071-.176.79.317.071zm-3.607.127H6.26v-.325H2.812v.325zm-.65.65a.65.65 0 0 1 .65-.65v-.325a.975.975 0 0 0-.976.975h.326zm.65.65a.65.65 0 0 1-.65-.65h-.325c0 .539.436.976.974.976v-.325zm3.087 0H2.812v.326H5.9v-.325zm6.5 0H5.9v.326h6.5v-.325zm3.088 0H12.4v.326h3.088v-.325zm.65-.65a.65.65 0 0 1-.65.65v.326a.975.975 0 0 0 .974-.976h-.325zm-.65-.65a.65.65 0 0 1 .65.65h.324a.975.975 0 0 0-.974-.974v.325zm-3.449 0h3.449v-.325h-3.449v.325zm-.334-.918l.175.791.318-.07-.176-.791-.317.07zm-.476-.381c.228 0 .426.158.476.381l.317-.07a.812.812 0 0 0-.793-.636v.325zm-4.157 0h4.157V.837H7.072v.326z",fill:"#fff",mask:"url(#ic_cemera_delete_svg__a)"})]}),(0,l.jsxs)("g",{filter:"url(#ic_cemera_delete_svg__filter1_d_9838_5464)",children:[(0,l.jsxs)("mask",{id:"ic_cemera_delete_svg__b",maskUnits:"userSpaceOnUse",x:2.473,y:4.225,width:13,height:12,fill:"#000",children:[(0,l.jsx)("path",{fill:"#fff",d:"M2.473 4.225h13v12h-13z"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.473 5.225l.62 9.374c.058.762.693 1.351 1.458 1.351h7.2c.765 0 1.4-.589 1.459-1.35l.62-9.375H13.2l-.6 9.1h-6.9l-.6-9.1H3.473z"})]}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.473 5.225l.62 9.374c.058.762.693 1.351 1.458 1.351h7.2c.765 0 1.4-.589 1.459-1.35l.62-9.375H13.2l-.6 9.1h-6.9l-.6-9.1H3.473z",fill:"#fff"}),(0,l.jsx)("path",{d:"M4.092 14.6l-.162.01v.002l.162-.013zm-.62-9.375v-.162a.162.162 0 0 0-.161.173l.162-.011zm10.738 9.374l.162.013v-.002l-.162-.01zm.62-9.374l.162.01a.163.163 0 0 0-.162-.172v.162zm-1.629 0v-.162a.162.162 0 0 0-.162.151l.162.011zm-.6 9.1v.163a.163.163 0 0 0 .162-.152l-.162-.011zm-6.9 0l-.162.01a.162.162 0 0 0 .162.152v-.162zm-.6-9.1l.162-.01a.162.162 0 0 0-.162-.152v.162zm-.846 9.364l-.62-9.375-.324.022.62 9.374.324-.021zm1.296 1.198a1.3 1.3 0 0 1-1.297-1.2l-.324.025c.065.847.771 1.5 1.62 1.5v-.324zm7.2 0h-7.2v.325h7.2v-.324zm1.297-1.2a1.3 1.3 0 0 1-1.296 1.2v.325c.849 0 1.555-.653 1.62-1.5l-.324-.025zm.62-9.373l-.62 9.374.324.022.62-9.374-.325-.022zm.162-.151H13.2v.325h1.629v-.325zm-2.067 9.273l.6-9.1-.324-.022-.6 9.1.324.022zm-7.062.152h6.9v-.325h-6.9v.325zM4.94 5.236l.6 9.1.324-.022-.6-9.1-.324.022zm.162-.173H3.473v.325H5.1v-.325z",fill:"#fff",mask:"url(#ic_cemera_delete_svg__b)"})]}),(0,l.jsxs)("defs",{children:[(0,l.jsxs)("filter",{id:"ic_cemera_delete_svg__filter0_d_9838_5464",x:".863",y:".187",width:16.575,height:5.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,l.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,l.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,l.jsx)("feOffset",{dy:".325"}),(0,l.jsx)("feGaussianBlur",{stdDeviation:".487"}),(0,l.jsx)("feColorMatrix",{values:"0 0 0 0 0.0862745 0 0 0 0 0.0941176 0 0 0 0 0.137255 0 0 0 0.119622 0"}),(0,l.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_9838_5464"}),(0,l.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_9838_5464",result:"shape"})]}),(0,l.jsxs)("filter",{id:"ic_cemera_delete_svg__filter1_d_9838_5464",x:2.336,y:4.412,width:13.632,height:13,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,l.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,l.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,l.jsx)("feOffset",{dy:".325"}),(0,l.jsx)("feGaussianBlur",{stdDeviation:".487"}),(0,l.jsx)("feColorMatrix",{values:"0 0 0 0 0.0862745 0 0 0 0 0.0941176 0 0 0 0 0.137255 0 0 0 0.119622 0"}),(0,l.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_9838_5464"}),(0,l.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_9838_5464",result:"shape"})]})]})]})));var m=n("789145"),f=n("643946"),v=n("184644"),h=n("129150"),p=n("473677");let g=e=>{var t;let n;let{item:r,onClick:d,refImg:c,className:g,refContainer:_,tipContainerClassName:x,enterMethod:C,afterDeleted:w}=e,[y,E]=(0,o.useState)(!1),[j,S]=(0,o.useState)("top"),N=(0,o.useRef)(null),T=(0,o.useRef)(null),I=(0,o.useRef)(null),R=(0,o.useCallback)(async e=>{var t,n,l;e.stopPropagation(),s.logInstance.sendLog("favoriteEmojiDeleteConfirm",{enter_method:C||h.eY.CHAT_PANEL});let{status_code:o,status_msg:i,success_items:a}=await (0,m.kA)({action:"0",sticker_id:BigInt(r.id_str),sticker_uri:null===(t=r.animate_url)||void 0===t?void 0:t.uri,sticker_url:null===(l=r.animate_url)||void 0===l?void 0:null===(n=l.url_list)||void 0===n?void 0:n[0]});0===o&&a?null==w||w(!0):w(!1,i||"未知错误")},[C,w]);(0,o.useEffect)(()=>{let e=()=>{E(!1)};return y&&document.addEventListener("mousedown",e,!0),()=>{document.removeEventListener("mousedown",e)}},[y]);let k=(0,o.useCallback)(e=>{var t,n;if(!e){null===(n=T.current)||void 0===n||n.removeEventListener("mousedown",R);return}null===(t=T.current)||void 0===t||t.addEventListener("mousedown",R,!0)},[R]);return(0,l.jsx)(i.Tooltip,{position:j,className:v.default.tip,content:(0,l.jsxs)("div",{className:v.default.menuContainer,ref:T,children:[(0,l.jsx)(p.Z,{src:u,viewBox:"0 0 18 18"}),(0,l.jsx)("span",{children:"移除表情"})]}),trigger:"custom",visible:y,getPopupContainer:()=>I.current||document.body,onVisibleChange:k,children:(0,l.jsx)("div",{ref:I,className:a()(v.default.imgWrap,x),children:(0,l.jsx)(f.n,{ref:N,className:g,srcList:null==r?void 0:null===(t=r.animate_url)||void 0===t?void 0:t.url_list,onClick:(n=r,e=>{d(n,e)}),onContextMenu:e=>{var t,n,l,o,i,r;if(e.preventDefault(),y||!w)return;null===(n=c.current)||void 0===n||null===(t=n.closeTip)||void 0===t||t.call(n);let a=null===(o=N.current)||void 0===o?void 0:null===(l=o.getBoundingClientRect)||void 0===l?void 0:l.call(o),d=null===(r=_.current)||void 0===r?void 0:null===(i=r.getBoundingClientRect)||void 0===i?void 0:i.call(r);a.top-d.top>a.height+4?S("top"):S("bottom"),c.current={closeTip:()=>E(!1)},s.logInstance.sendLog("favoriteEmojiDelete",{enter_method:C||h.eY.CHAT_PANEL}),E(!0)}},r.id)})})}},427088:function(e,t,n){"use strict";n.d(t,{_:function(){return h},K:function(){return p}});var l=n("563097"),o=n("88648"),i=n("713097"),r=n.n(i),a=n("863648"),s=n("520739"),d=n("878389");let c=(0,o.forwardRef)((e,t)=>(0,l.jsx)("svg",(0,d._)((0,s._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.167 18a9.167 9.167 0 1 1-18.334 0 9.167 9.167 0 0 1 18.334 0zM29 18c0 6.075-4.925 11-11 11S7 24.075 7 18 11.925 7 18 7s11 4.925 11 11zm-12.083 2.996a4.977 4.977 0 0 1-1.325.513c-.46.105-.93.158-1.409.158-.51 0-.979-.086-1.408-.257-.43-.17-.801-.414-1.114-.729a3.46 3.46 0 0 1-.737-1.163A4.256 4.256 0 0 1 10.667 18c0-.559.086-1.064.257-1.518.178-.453.424-.838.737-1.153a3.163 3.163 0 0 1 1.114-.74c.43-.17.899-.256 1.408-.256.522 0 1 .07 1.436.207a2.73 2.73 0 0 1 1.16.69l-1.012 1.183a2.02 2.02 0 0 0-.663-.493c-.246-.111-.552-.167-.92-.167-.308 0-.587.056-.838.167-.246.112-.458.27-.636.473a2.092 2.092 0 0 0-.414.71 2.817 2.817 0 0 0-.138.897c0 .328.046.63.138.907.098.27.236.506.414.71.178.197.39.351.635.463.252.111.531.167.838.167.313 0 .583-.036.81-.108.227-.079.409-.158.543-.237V18.77h-1.169v-1.42h2.55v3.647zm1.246-6.485h1.436v6.978h-1.436v-6.978zm7.17 0h-4.372v6.978h1.436v-2.72h2.715v-1.42h-2.715V15.93h2.936v-1.42z",fill:"#2F3035",fillOpacity:".7"})})));var u=n("320616");let m=(0,o.forwardRef)((e,t)=>(0,l.jsx)("svg",(0,d._)((0,s._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.752 10.187a4.565 4.565 0 0 0-4.56 4.765c.001.046 0 .093-.004.139.025.826.372 1.784 1.015 2.835.66 1.079 1.577 2.17 2.586 3.197 1.933 1.97 4.103 3.605 5.146 4.352 1.043-.747 3.213-2.383 5.146-4.352 1.01-1.027 1.927-2.118 2.586-3.197.643-1.05.99-2.009 1.015-2.835a1.096 1.096 0 0 1-.003-.14 4.565 4.565 0 0 0-7.936-3.274 1.094 1.094 0 0 1-1.616 0 4.55 4.55 0 0 0-3.375-1.49zm15.116 4.74l.002.071c0 1.415-.567 2.81-1.337 4.069-.777 1.271-1.817 2.495-2.891 3.589-2.15 2.188-4.544 3.966-5.57 4.694a1.956 1.956 0 0 1-2.274 0c-1.026-.728-3.42-2.506-5.57-4.694-1.074-1.094-2.114-2.318-2.891-3.589C7.567 17.807 7 16.413 7 14.998c0-.023 0-.047.002-.07A6.752 6.752 0 0 1 17.935 9.45a6.752 6.752 0 0 1 10.933 5.476z",fill:"#FE2C55"})})));var f=n("103012"),v=n("473677"),h={Emoji:0,0:"Emoji",Gif:1,1:"Gif",CustomEmoji:2,2:"CustomEmoji",InteractionEmoji:3,3:"InteractionEmoji"};let p=e=>{let{disableInteractionEmoji:t,disableCustomEmoji:n,disableGif:o,currentTab:i,onTabChange:s}=e;return(0,l.jsxs)("div",{className:f.default.bottomBox,children:[(0,l.jsx)("span",{className:r()({[f.default.isSelected]:0===i}),onMouseUp:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),s(0)},children:(0,l.jsx)(v.Z,{src:a.Z,width:36,height:36,viewBox:"0 0 36 36"})}),!o&&(0,l.jsx)("span",{className:r()({[f.default.isSelected]:1===i}),onMouseUp:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),s(1)},children:(0,l.jsx)(v.Z,{src:c,width:36,height:36,viewBox:"0 0 36 36"})}),!n&&(0,l.jsx)("span",{className:r()({[f.default.isSelected]:2===i}),onMouseUp:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),s(2)},children:(0,l.jsx)(v.Z,{src:m,width:36,height:36,viewBox:"0 0 36 36"})}),!t&&(0,l.jsx)("span",{className:r()({[f.default.isSelected]:3===i}),onMouseUp:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),s(3)},children:(0,l.jsx)(v.Z,{src:u.Z,width:36,height:36,viewBox:"0 0 36 36"})})]})}},129150:function(e,t,n){"use strict";n.d(t,{$u:function(){return l},DK:function(){return _},GB:function(){return r},Hv:function(){return g},IM:function(){return h},Lo:function(){return d},XJ:function(){return s},_3:function(){return C},_t:function(){return w},dF:function(){return f},de:function(){return x},dx:function(){return a},eD:function(){return u},eY:function(){return c},pt:function(){return v},ql:function(){return m},rS:function(){return i},tQ:function(){return p},vW:function(){return o}});var l={FollowRelationUnknown:-1,"-1":"FollowRelationUnknown",NoRelationStatus:0,0:"NoRelationStatus",FollowingStatus:1,1:"FollowingStatus",FollowEachOtherStatus:2,2:"FollowEachOtherStatus",FollowRequestStatus:4,4:"FollowRequestStatus"},o={Created:0,0:"Created",Preparing:1,1:"Preparing",Inflight:2,2:"Inflight",Succeeded:3,3:"Succeeded",Received:4,4:"Received",Failed:-1,"-1":"Failed",Rejected:-2,"-2":"Rejected",SelfVisible:-3,"-3":"SelfVisible"},i={light:"light",dark:"dark"},r={MEMBER:0,0:"MEMBER",OWNER:1,1:"OWNER",ADMIN:2,2:"ADMIN"},a={SCENE_TYPE_DEFAULT:0,0:"SCENE_TYPE_DEFAULT",SCENE_TYPE_REPLY_OTHER:1,1:"SCENE_TYPE_REPLY_OTHER",SCENE_TYPE_REPLY_SELF:2,2:"SCENE_TYPE_REPLY_SELF",SCENE_TYPE_AWEME_MENTION:3,3:"SCENE_TYPE_AWEME_MENTION",SCENE_TYPE_COMMENT_MENTION:4,4:"SCENE_TYPE_COMMENT_MENTION",SCENE_TYPE_SHARE:5,5:"SCENE_TYPE_SHARE",SCENE_TYPE_REPLY_INPUT:6,6:"SCENE_TYPE_REPLY_INPUT",SCENE_TYPE_NOTICE_REPLY_DIGG:7,7:"SCENE_TYPE_NOTICE_REPLY_DIGG",SCENE_TYPE_NOTICE_REPLY_COMMENT:8,8:"SCENE_TYPE_NOTICE_REPLY_COMMENT",SCENE_TYPE_NOTICE_REPLY_ATME:9,9:"SCENE_TYPE_NOTICE_REPLY_ATME"},s={AVAILABLE:0,0:"AVAILABLE",NOT_EXTST:1,1:"NOT_EXTST",INVISIBLE:2,2:"INVISIBLE",RECALLED:3,3:"RECALLED",DELETED:4,4:"DELETED"},d={AUDIT_NOT_PASS:1,1:"AUDIT_NOT_PASS",AUDIT_ONLY_SELF:2,2:"AUDIT_ONLY_SELF",REVIEWING:3,3:"REVIEWING",ONLY_FRIEND:4,4:"ONLY_FRIEND",ONLY_SELF:5,5:"ONLY_SELF",AUTHOR_SECRET:6,6:"AUTHOR_SECRET",DELETE:7,7:"DELETE",UNKNOWN:8,8:"UNKNOWN",STORY:9,9:"STORY",PART_SEE:10,10:"PART_SEE"},c={CHAT_NOTIFY:"chat_notif",CHAT_PANEL:"chat_panel",PUSH:"push",CLIENT_PUSH:"client_push"},u={GROUP:"group",PRIVATE:"private"},m={SYSTEM:"system",RECOMMAND:"recommend",INTERACTION:"interaction",FAVORITE:"favorite"},f={CHAT:"chat",CHAT_HEAD:"chat_head",CHAT_LIST:"chat_list"},v={CHAT:"chat"},h={ISME:"1",NOISME:"0"},p={REGULAR:0,0:"REGULAR",STRANGER:1,1:"STRANGER"},g={REGULAR:0,0:"REGULAR",REGULAR_USER:1,1:"REGULAR_USER",REGULAR_GROUP:2,2:"REGULAR_GROUP",REGULAR_SELF:3,3:"REGULAR_SELF",STARNGER_ITEM:4,4:"STARNGER_ITEM",STRANGER_BOX:5,5:"STRANGER_BOX",REGULAR_DAREN_USER:6,6:"REGULAR_DAREN_USER"},_={INIT_VALUE:0,0:"INIT_VALUE",DELETE_CONVERSATION:1,1:"DELETE_CONVERSATION",STICK_ON_TOP:2,2:"STICK_ON_TOP",REPORT:3,3:"REPORT",SET_MUTED:4,4:"SET_MUTED",BLOCK_USER:5,5:"BLOCK_USER",QUIT_GROUP:6,6:"QUIT_GROUP",ENABLE_PIGEON_SYNC:7,7:"ENABLE_PIGEON_SYNC",DISSOLVE_GROUP:8,8:"DISSOLVE_GROUP"},x={TEXT:1,1:"TEXT",PIC:2,2:"PIC",BIG_EMOJI:3,3:"BIG_EMOJI",VIDEO:4,4:"VIDEO"},C={LOGIN:0,0:"LOGIN",IM:1,1:"IM"},w={USE_VIDEO_INFO:0,0:"USE_VIDEO_INFO",USE_VIDEO_INFO_ISLOADING:1,1:"USE_VIDEO_INFO_ISLOADING",USE_VIDEO_INFO_NOT_ALLOW_LOOK:2,2:"USE_VIDEO_INFO_NOT_ALLOW_LOOK",USE_VIDEO_INFO_DEL_STATUS:3,3:"USE_VIDEO_INFO_DEL_STATUS",USE_VIDEO_MODAL_MAIN_URL:4,4:"USE_VIDEO_MODAL_MAIN_URL"}},593231:function(e,t,n){"use strict";n.d(t,{F:function(){return l}}),n(209955);let l=e=>{let t="function"==typeof e?e():e;return(null==t?void 0:t.then)?t.then(e=>[null,e]).catch(e=>[e||Error("err"),void 0]):[Error("not promise or function"),void 0]};t.Z=l},851182:function(e,t,n){"use strict";n(284961),n(826893);t.Z=function(e){return e?e.replace(/^http:\/\//g,"https://"):e}},71104:function(e,t,n){"use strict";n.d(t,{h:function(){return _},n:function(){return g}});var l=n(91907),o=n(562017),i=n(260211),r=n(134761);n(990921),n(874386),n(675373),n(268917),n(209955);var a=n(866674),s=n.n(a),d=n(877639),c=n.n(d),u=n(918294),m=n.n(u),f=n(212138),v=n.n(f),h=new WeakMap,p=new WeakMap;class g{add(e){return new Promise((t,n)=>{this.runList.push({param:e,resolve:t,reject:n}),(0,l._)(this,h).call(this)})}constructor({max:e,timeWait:t,runOperation:n}){(0,r._)(this,"max",0),(0,r._)(this,"runList",[]),(0,r._)(this,"runOperation",e=>{}),(0,o._)(this,h,{writable:!0,value:()=>{(0,l._)(this,p).call(this)}}),(0,o._)(this,p,{writable:!0,value:()=>{let e=this.runList;this.runList=[];let t=(null==e?void 0:e.length)||0,{max:n}=this;if(n<=0||t<=n){this.runOperation(e);return}for(let l=0;l<t;l+=n){let t=m()(e,l,l+n);if(null==t?void 0:t.length)this.runOperation(t);else break}}}),this.max=e||0;if(!n)throw Error("MultiRun runOperation 执行函数必须设置");if(!s()(n))throw Error("MultiRun runOperation 执行函数必须为函数形式");this.runOperation=n,(0,i._)(this,h,c()(()=>{(0,l._)(this,p).call(this)},t||300,{leading:!1,trailing:!0}))}}let _=(e,t)=>{v()(e,e=>{var n;null==e||null===(n=e.reject)||void 0===n||n.call(e,t||"error")})}},668258:function(e,t,n){"use strict";n.d(t,{FF:function(){return E},aC:function(){return N},do:function(){return x}});var l=n(520739);n(268917),n(675373);var o=n(496349),i=n(738363),r=n(408609),a=n(231755),s=n(71104),d=n(212138),c=n.n(d);let{COMMON_SEARCH_PARAMS:u,DISABLE_SECRET_VIDEO_PARAMS:m,CHANNEL_PC_WEB:f}=o||{},{ERROR_CODE:v}=i||{},h="large",p="medium",g="thumb",_="still",x={SIZE_ORIGIN:"",SIZE_LARGE:h,SIZE_MEDIUM:p,SIZE_THUMB:g,SIZE_STILL:_},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(!e&&(e=""),e){case"":return r.uZ?"tplv-3kqv52n45a-get:.image":"tplv-x-get:.image";case g:return r.uZ?"tplv-3kqv52n45a-get:thumb.image":"tplv-x-get:thumb.image";case p:return r.uZ?"tplv-3kqv52n45a-get:medium.image":"tplv-x-get:medium.image";case h:return r.uZ?"tplv-3kqv52n45a-get:large.image":"tplv-x-get:large.image";case _:return r.uZ?"tplv-3kqv52n45a-get:still.image":"tplv-x-get:still.image";default:return r.uZ?"tplv-3kqv52n45a-get:.image":"tplv-x-get:.image"}};async function w(e){let t=[];return e.forEach(e=>{t.push({url:e})}),await (0,a.v_)("/aweme/v1/web/privacy/batch_convert_image/",(0,l._)({},u),{},{data:{convert_params:t},headers:{"Content-Type":"application/json; charset=UTF-8"}})}let y=new s.n({max:20,timeWait:300,runOperation:e=>{let t=[];c()(e,e=>{let{param:n}=e;t.push(n)}),w(t).then(t=>{var n;let l=null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.pack_results;(null==t?void 0:t.status_code)===0&&(null==l?void 0:l.length)?c()(e,(e,t)=>{var n,o;let i=l[t];i?null==e||null===(n=e.resolve)||void 0===n||n.call(e,i):null==e||null===(o=e.reject)||void 0===o||o.call(e,"error")}):(0,s.h)(e,"")}).catch(t=>{(0,s.h)(e,t)})}});async function E(e){return y.add(e)}async function j(e){let t=[];return e.forEach(e=>{let{uri:n,size:l,tpl:o}=e;t.push({uri:n,format:C(l),tpl:o||(""===o?"":"%s://%v/%v~%v")})}),await (0,a.v_)("/aweme/v1/web/privacy/batch_build_image/",(0,l._)({},u),{},{data:{convert_params:t},headers:{"Content-Type":"application/json; charset=UTF-8"}})}let S=new s.n({max:20,timeWait:300,runOperation:e=>{let t=[];c()(e,e=>{let{param:n}=e;t.push(n)}),j(t).then(t=>{var n;let l=null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.pack_results;(null==t?void 0:t.status_code)===0&&(null==l?void 0:l.length)?c()(e,(e,t)=>{var n,o;let i=l[t];i?null==e||null===(n=e.resolve)||void 0===n||n.call(e,i):null==e||null===(o=e.reject)||void 0===o||o.call(e,"error")}):(0,s.h)(e,"")}).catch(t=>{(0,s.h)(e,t)})}});async function N(e,t){return S.add({uri:e,size:t})}},485941:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var l=n("520739"),o=n("368200");n("874386");var i=n("563097"),r=n("88648"),a=n("713097"),s=n.n(a),d=e=>{let t,n,l,o,i,a,s="",d=1,c={x:0,y:0},u=(0,r.useCallback)(t=>{if(!e)return;let n=-.005*t.deltaY,r=d*n+d;if(r<.1||r>20)return;d=r;let s={x:n*o*.5,y:n*l*.5},u=t.pageX-i-c.x,m=t.pageY-a-c.y;c.x-=n*u-s.x,c.y-=n*m-s.y,e.style.transform=`translate(${c.x}px, ${c.y}px) scale(${d})`},[e]);(0,r.useEffect)(()=>{let t=()=>{var t;let n=null==e?void 0:null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e);o=(null==n?void 0:n.width)||0,l=(null==n?void 0:n.height)||0,i=(null==n?void 0:n.left)||0,a=(null==n?void 0:n.top)||0};if(null==e?void 0:e.complete)t();else{var n;null==e||null===(n=e.addEventListener)||void 0===n||n.call(e,"load",t)}return()=>{var n;null==e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"load",t)}},[e]);let m=(0,r.useCallback)(l=>{var o,i,r;if(!!e)l.preventDefault(),s="start",t=l.pageX,n=l.pageY,(null===(o=l.changedTouches)||void 0===o?void 0:o[0])&&(t=null===(i=l.changedTouches)||void 0===i?void 0:i[0].pageX,n=null===(r=l.changedTouches)||void 0===r?void 0:r[0].pageY)},[e]),f=(0,r.useCallback)(l=>{var o,i,r;if(!e||"start"!==s&&"move"!==s)return;s="move",l.preventDefault();let a=l.pageX,u=l.pageY;(null===(o=l.changedTouches)||void 0===o?void 0:o[0])&&(a=null===(i=l.changedTouches)||void 0===i?void 0:i[0].pageX,u=null===(r=l.changedTouches)||void 0===r?void 0:r[0].pageY);let m=a-t,f=u-n;t=a,n=u,c.x+=m,c.y+=f,e.style.transform=`translate(${c.x}px, ${c.y}px) scale(${d})`},[e]),v=(0,r.useCallback)(t=>{if(s="",!!e&&"move"===s)t.preventDefault()},[e]);return{onContainerMouseLeave:(0,r.useCallback)(()=>{s=""},[e]),onWheel:u,onMouseUp:v,onMouseDown:m,onMouseMove:f,onTouchStart:m,onTouchEnd:v,onTouchMove:f}},c=n("499966");let u=(0,r.forwardRef)((e,t)=>{let{style:n,imageStyle:a,className:u,imageClassName:m,src:f,onClick:v,onLoad:h,onError:p,onMouseEvent:g}=e,_=(0,o._)(e,["style","imageStyle","className","imageClassName","src","onClick","onLoad","onError","onMouseEvent"]),[x,C]=(0,r.useState)(null),w=(0,r.useRef)();(0,r.useEffect)(()=>{w.current&&C(w.current)},[w.current]),(0,r.useImperativeHandle)(t,()=>({getRef:()=>w.current}));let{onMouseMove:y,onMouseUp:E,onMouseDown:j,onContainerMouseLeave:S,onWheel:N,onTouchStart:T,onTouchEnd:I,onTouchMove:R}=d(x);return(0,i.jsx)("div",{style:(0,l._)({},n),className:s()(c.default.wrapper,u),onMouseMove:y,onMouseLeave:S,onTouchMove:R,children:(0,i.jsx)("img",(0,l._)({onClick:v,onMouseDown:j,onMouseUp:E,onTouchStart:T,onTouchEnd:I,onWheelCapture:e=>{N(e),null==g||g("wheel")},onLoad:h,onError:p,ref:w,className:s()(c.default.img,m),style:(0,l._)({},a),src:f},_))})})},15332:function(e,t,n){"use strict";var l=n(520739),o=n(878389),i=n(563097),r=n(88648);let a=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M6 12A6 6 0 1 0 6 0a6 6 0 0 0 0 12zm2.524-7.676L6.85 6l1.675 1.676a.6.6 0 1 1-.848.848L6 6.85 4.324 8.524a.6.6 0 0 1-.848-.848L5.152 6 3.476 4.324a.6.6 0 1 1 .848-.848L6 5.15l1.676-1.675a.6.6 0 0 1 .848.848z",fill:"#fff",fillOpacity:".4"})})));t.Z=a},875571:function(e,t,n){"use strict";var l=n(520739),o=n(878389),i=n(563097),r=n(88648);let a=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.559 10.14c-2.612 2.392-3.566 5.145-3.566 8.376C6.993 21.817 8.836 29 19.215 29c1.505 0 2.974-.21 4.405-.654 1.57-.487 2.783-1.277 3.798-2.173l.15-.133c.29-.258.606-.537.86-.898.426-.523.71-.905.741-1.198.032-.293.008-.551-.189-.74-.197-.19-.517-.267-.876-.123-.322.129-.663.434-1.02.753l-.125.11c-2.434 2.134-5.158 3.007-7.744 3.007-8.219 0-10.095-5.489-10.095-8.435 0-2.947.856-4.956 2.606-6.798 1.75-1.843 4.62-2.723 7.25-2.723 5.681 0 7.745 4.598 7.745 6.964 0 3.145-1.802 4.54-2.591 5.076-.592.402-1.213.517-1.549.517h-.01c-.365 0-.89 0-1.03-.517-.09-.34.08-1.06.263-1.828.097-.405.197-.824.262-1.207l.94-4.722c.014-.092.021-.177.021-.254 0-.72-.146-1.1-1.103-1.1-.46 0-.77.074-.931.222-.161.148-.274.44-.34.878-.365-.487-.734-.815-1.107-.984-.343-.155-.833-.233-1.468-.233-1.636 0-3.053.783-4.252 2.349-1.103 1.439-1.654 2.977-1.654 4.613 0 1.277.358 2.398 1.074 3.365.796 1.065 1.833 1.597 3.112 1.597 1.095 0 2.147-.366 3.155-1.1.453.74 1.23 1.177 2.323 1.111 5.654-.339 6.962-5.275 6.896-7.783C28.647 12.75 26.288 7 18.976 7c-3.382 0-5.806.747-8.417 3.14zm3.702 9.173c-.068-1.127.093-1.976.814-3.235 1.171-2.046 2.576-2.537 3.502-2.428.898.107 1.128.5 1.27.743l.014.023c.142.24.367.648.367 1.225 0 .938-.292 1.839-.922 3.398-.732 1.84-1.483 2.19-2.4 2.4-1.512.348-2.576-.999-2.645-2.126z",fill:"#2F3035",fillOpacity:".9"})})));t.Z=a},863648:function(e,t,n){"use strict";var l=n(520739),o=n(878389),i=n(563097),r=n(88648);let a=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 18a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-9 11c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-2-13.5c0 1.105-.672 2-1.5 2s-1.5-.895-1.5-2 .672-2 1.5-2 1.5.895 1.5 2zm5.5 2c.828 0 1.5-.895 1.5-2s-.672-2-1.5-2-1.5.895-1.5 2 .672 2 1.5 2zM18 22.03c-1.657 0-3-.96-3-2.143 0-1.183 6-1.183 6 0 0 1.184-1.343 2.143-3 2.143z",fill:"#2F3035",fillOpacity:".9"})})));t.Z=a},687114:function(e,t,n){"use strict";var l=n(520739),o=n(878389),i=n(563097),r=n(88648);let a=(0,r.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,o._)((0,l._)({width:42,height:42,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("rect",{x:".5",y:".5",width:41,height:41,rx:20.5,stroke:"#EFF0F3"}),(0,i.jsx)("rect",{x:1,y:1,width:40,height:40,rx:20,fill:"#F3F3F4"}),(0,i.jsxs)("g",{clipPath:"url(#defaultAvatarLight_svg__clip0_34277_112039)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.486 6.307c1.07 0 1.937.867 1.937 1.978.005.407.15 3.688 3.605 4.503.837.197 1.444.918 1.444 1.778v.189a1.82 1.82 0 0 1-2.195 1.778c-.925-.19-1.985-.59-2.854-1.39v6.99l.002.062.002.07a9.458 9.458 0 0 1-6.352 8.934c1.857 1.507 3.524 4.134 3.524 7.096 0 .535-.041 1.058-.116 1.565 0 0-2.935 1.46-6.448 1.147-3.743.215-6.573-1.147-6.573-1.147a10.706 10.706 0 0 1-.115-1.565c0-2.965 1.654-5.595 3.508-7.101a9.458 9.458 0 0 1-6.336-8.928 9.454 9.454 0 0 1 15.03-7.632v-6.39c0-1.07.868-1.937 1.937-1.937z",fill:"url(#defaultAvatarLight_svg__paint0_linear_34277_112039)",fillOpacity:".18"}),(0,i.jsxs)("g",{opacity:".1",children:[(0,i.jsx)("path",{d:"M30.403 15.137l.009.006v.049c.135.845.097 2.148.054 3.596-.022.771-.046 1.584-.046 2.389-.253-3.192-2.276-5.27-3.286-6.118l-.451-.3s-.004-.01-.01-.06a3.064 3.064 0 0 0-.108-.075l.006-1.317s-.01-.326-.006-.162c-.023-.897 0-2.178.002-4.51.056 2.25.8 3.495 2.262 5.12.548.608 1.5.956 1.574 1.382z",fill:"url(#defaultAvatarLight_svg__paint1_linear_34277_112039)"}),(0,i.jsx)("path",{d:"M26.567 8.29v.345a6.764 6.764 0 0 1 0-.346z",fill:"url(#defaultAvatarLight_svg__paint2_linear_34277_112039)"})]})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"defaultAvatarLight_svg__paint0_linear_34277_112039",x1:16,y1:14.5,x2:25.75,y2:28.5,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#CCC"}),(0,i.jsx)("stop",{offset:1,stopColor:"#969696"})]}),(0,i.jsxs)("linearGradient",{id:"defaultAvatarLight_svg__paint1_linear_34277_112039",x1:28.75,y1:13.25,x2:27,y2:15.25,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#434343"}),(0,i.jsx)("stop",{offset:".568",stopColor:"#797979",stopOpacity:".01"}),(0,i.jsx)("stop",{offset:1,stopColor:"#5B5B5B"})]}),(0,i.jsxs)("linearGradient",{id:"defaultAvatarLight_svg__paint2_linear_34277_112039",x1:28.75,y1:13.25,x2:27,y2:15.25,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#434343"}),(0,i.jsx)("stop",{offset:".568",stopColor:"#797979",stopOpacity:".01"}),(0,i.jsx)("stop",{offset:1,stopColor:"#5B5B5B"})]}),(0,i.jsx)("clipPath",{id:"defaultAvatarLight_svg__clip0_34277_112039",children:(0,i.jsx)("path",{fill:"#fff",transform:"translate(11.519 6.307)",d:"M0 0h23.953v34.744H0z"})})]})]})));t.Z=a},320616:function(e,t,n){"use strict";var l=n(520739),o=n(878389),i=n(563097),r=n(88648);let a=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.329 15a5.98 5.98 0 0 1-1.668 4.151 9.562 9.562 0 0 1 .1 2.51 8 8 0 1 0-11.646-10.123 9.523 9.523 0 0 1 2.498-.248A6 6 0 0 1 26.33 15zM15.5 27a6.5 6.5 0 1 0 0-13 6.5 6.5 0 0 0 0 13zm8.5-6.5a8.5 8.5 0 1 1-17 0 8.5 8.5 0 0 1 17 0zm-11.204-.386c.64 0 1.159-.692 1.159-1.546 0-.853-.52-1.545-1.16-1.545-.64 0-1.159.692-1.159 1.545 0 .854.52 1.546 1.16 1.546zm6.568-1.546c0 .854-.52 1.546-1.16 1.546-.64 0-1.159-.692-1.159-1.546 0-.853.52-1.545 1.16-1.545.64 0 1.159.692 1.159 1.545zm-6.182 3.39c0 .915 1.038 1.656 2.318 1.656s2.318-.741 2.318-1.655c0-.915-4.636-.915-4.636 0z",fill:"#FE2C55"})})));t.Z=a},891283:function(e,t,n){"use strict";var l=n(520739),o=n(878389),i=n(563097),r=n(88648);let a=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:14,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.646 7.146L8 9.793V2.5H7v7.293L4.354 7.146l-.708.708 3.5 3.5.354.353.354-.353 3.5-3.5-.708-.708zM3 12.5v1h9v-1H3z",fill:"#fff",stroke:"#fff",strokeWidth:".5"})})));t.Z=a},737963:function(e,t,n){var l=n(212670),o=n(698436),i=n(610095),r=n(512710),a=n(271277),s=n(477886),d=Math.min;e.exports=function(e,t,n){for(var c=n?i:o,u=e[0].length,m=e.length,f=m,v=Array(m),h=1/0,p=[];f--;){var g=e[f];f&&t&&(g=r(g,a(t))),h=d(g.length,h),v[f]=!n&&(t||u>=120&&g.length>=120)?new l(f&&g):void 0}g=e[0];var _=-1,x=v[0];e:for(;++_<u&&p.length<h;){var C=g[_],w=t?t(C):C;if(C=n||0!==C?C:0,!(x?s(x,w):c(p,w,n))){for(f=m;--f;){var y=v[f];if(!(y?s(y,w):c(e[f],w,n)))continue e}x&&x.push(w),p.push(C)}}return p}},525407:function(e,t,n){var l=n(563e3);e.exports=function(e){return l(e)?e:[]}},395328:function(e,t,n){var l=n(512710),o=n(737963),i=n(730865),r=n(525407),a=i(function(e){var t=l(e,r);return t.length&&t[0]===e[0]?o(t):[]});e.exports=a}}]);