/*! For license information please see player-4.374201ef.js.LICENSE.txt */
!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n="undefined"!=typeof globalThis?globalThis:n||self).xss={})}(this,function(n){"use strict";var r=function(){return(r=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n}).apply(this,arguments)};function i(n,r,i){if(i||2==arguments.length)for(var a,o=0,s=r.length;o<s;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return n.concat(a||Array.prototype.slice.call(r))}var a=/[^a-zA-Z0-9\\_:.-]/gim,o=/</g,s=/>/g,u=/&#([a-zA-Z0-9]*);?/gim,c=/&quot;/g,d=/&colon;?/gim,l=/&newline;?/gim,f=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,h=/u\s*r\s*l\s*\(.*/gi,p=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/"/g,g=function(n){return n.replace(o,"&lt;").replace(s,"&gt;")},_={indexOf:function(n,r){var i,a;for(i=0,a=n.length;i<a;i++)if(n[i]===r)return i;return -1},forEach:function(n,r,i){var a,o;for(a=0,o=n.length;a<o;a++)r.call(i,n[a],a,n)},some:function(n,r,i){var a,o;for(a=0,o=n.length;a<o;a++)if(r.call(i,n[a],a,n))return!0;return!1},trim:function(n){return n.replace(/(^\s*)|(\s*$)/g,"")},includes:function(n,r){if("string"==typeof n)return -1!==n.indexOf(r);for(var i=0;i<n.length;i++)if(n[i]===r)return!0;return!1},spaceIndex:function(n){var r=/\s|\n|\t/.exec(n);return r?r.index:-1},uniq:function(n){for(var r={},i=[],a=0;a<n.length;a++)r[n[a]]||(i.push(n[a]),r[n[a]]=!0);return i},from:function(n){for(var r=[],i=0;i<n.length;i++)r.push(n[i]);return r},keys:function(n){var r=[];for(var i in n)r.push(i);return r}};function y(n){return null==n}function m(n){var r;return'"'===(r=n)[0]&&'"'===r[r.length-1]||"'"===r[0]&&"'"===r[r.length-1]?n.substr(1,n.length-2):n}function b(n){var r,i,a,o,s,u,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",f=0;for(n=function(n){n=n.replace(/rn/g,"n");for(var r="",i=0;i<n.length;i++){var a=n.charCodeAt(i);a<128?r+=String.fromCharCode(a):a>127&&a<2048?r+=String.fromCharCode(a>>6|192)+String.fromCharCode(63&a|128):r+=String.fromCharCode(a>>12|224)+String.fromCharCode(a>>6&63|128)+String.fromCharCode(63&a|128)}return r}(n);f<n.length;)o=(r=n.charCodeAt(f++))>>2,s=(3&r)<<4|(i=n.charCodeAt(f++))>>4,u=(15&i)<<2|(a=n.charCodeAt(f++))>>6,c=63&a,isNaN(i)?u=c=64:isNaN(a)&&(c=64),l=l+d.charAt(o)+d.charAt(s)+d.charAt(u)+d.charAt(c);return l}function A(n){var r,i,a,o,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",l=0;for(n=n.replace(/[^A-Za-z0-9+/=]/g,"");l<n.length;)r=c.indexOf(n.charAt(l++))<<2|(o=c.indexOf(n.charAt(l++)))>>4,i=(15&o)<<4|(s=c.indexOf(n.charAt(l++)))>>2,a=(3&s)<<6|(u=c.indexOf(n.charAt(l++))),d+=String.fromCharCode(r),64!==s&&(d+=String.fromCharCode(i)),64!==u&&(d+=String.fromCharCode(a));return function(n){for(var r="",i=0,a=0,o=0,s=0;i<n.length;)(a=n.charCodeAt(i))<128?(r+=String.fromCharCode(a),i++):a>191&&a<224?(r+=String.fromCharCode((31&a)<<6|63&(s=n.charCodeAt(i+1))),i+=2):(s=n.charCodeAt(i+1),r+=String.fromCharCode((15&a)<<12|(63&s)<<6|63&(o=n.charCodeAt(i+2))),i+=3);return r}(d)}function I(n,r,i){var a="",o=0,s=!1,u=!1,c=0,d=n.length,l="",f="";e:for(c=0;c<d;c++){var h=n.charAt(c);if(!1===s){if("<"===h){s=c;continue}}else if(!1===u){if("<"===h){a+=i(n.slice(o,c)),s=c,o=c;continue}if(">"===h||c===d-1){a+=i(n.slice(o,s)),l=function(n){var r,i=_.spaceIndex(n);return r=-1===i?n.slice(1,-1):n.slice(1,i+1),"/"===(r=_.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}(f=n.slice(s,c+1)),a+=r(s,a.length,l,f,"</"===f.slice(0,2)),o=c+1,s=!1;continue}if('"'===h||"'"===h)for(var p=1,v=n.charAt(c-p);""===v.trim()||"="===v;){if("="===v){u=h;continue e}v=n.charAt(c-++p)}}else if(h===u){u=!1;continue}}return o<d&&(a+=i(n.substr(o))),a}function k(n,r){var i=0,o=0,s=[],u=!1,c=n.length;function d(n,i){if(!((n=(n=_.trim(n)).replace(a,"").toLowerCase()).length<1)){var o=r(n,i||"");o&&s.push(o)}}for(var l=0;l<c;l++){var f=n.charAt(l),h=void 0;if(!1!==u||"="!==f){if(!1===u||l!==o){if(/\s|\n|\t/.test(f)){if(n=n.replace(/\s|\n|\t/g," "),!1===u){if(-1===(h=function(n,r){for(;r<n.length;r++){var i=n[r];if(" "!==i)return"="===i?r:-1}return -1}(n,l))){d(_.trim(n.slice(i,l))),u=!1,i=l+1;continue}l=h-1;continue}if(-1===(h=function(n,r){for(;r>0;r--){var i=n[r];if(" "!==i)return"="===i?r:-1}return -1}(n,l-1))){d(u,m(_.trim(n.slice(i,l)))),u=!1,i=l+1;continue}}}else{if(-1===(h=n.indexOf(f,l+1)))break;d(u,_.trim(n.slice(o+1,h))),u=!1,i=(l=h)+1}}else u=n.slice(i,l),i=l+1,o='"'===n.charAt(i)||"'"===n.charAt(i)?i:function(n,r){for(;r<n.length;r++){var i=n[r];if(" "!==i)return"'"===i||'"'===i?r:-1}return -1}(n,l+1)}return i<n.length&&(!1===u?d(n.slice(i)):d(u,m(_.trim(n.slice(i))))),_.trim(s.join(" "))}function E(n,r,i){if(i=function(n){return n=function(n){for(var r="",i=0,a=n.length;i<a;i++)r+=32>n.charCodeAt(i)?" ":n.charAt(i);return _.trim(r)}(n=(n=(n=n.replace(c,'"')).replace(u,function(n,r){return"x"===r[0]||"X"===r[0]?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})).replace(d,":").replace(l," "))}(i),"href"===r||"src"===r){if("#"===(i=_.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===r){if(f.lastIndex=0,f.test(i))return""}else if("style"===r&&(p.lastIndex=0,p.test(i)||(h.lastIndex=0,h.test(i)&&(f.lastIndex=0,f.test(i)))))return"";return i=function(n){return n=g(n=n.replace(v,"&quot;"))}(i)}var T=function(n){return"string"==typeof n?n.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},S=function(){function n(n){var r=function(n){var r={};for(var i in n)r[i]=n[i];return r}(n||{});r.stripIgnoreTag&&(r.onIgnoreTag,r.onIgnoreTag=function(){return""}),r.whiteList={},r.onTag=function(){},r.onTagAttr=function(){},r.onIgnoreTag=function(){},r.onIgnoreTagAttr=function(){},r.safeAttrValue=E,r.escapeHtml=g,this.options=Object.assign(r,n)}return n.prototype.process=function(n){if(!(n=(n=n||"").toString()))return"";var r,i,a,o,s,u,c=this.options,d=c.whiteList,l=c.onTag,f=c.onIgnoreTag,h=c.onTagAttr,p=c.onIgnoreTagAttr,v=c.safeAttrValue,g=c.escapeHtml;c.stripBlankChar&&(n=(r=(r=n.split("")).filter(function(n){var r=n.charCodeAt(0);return!(127===r||r<=31&&10!==r&&13!==r)})).join("")),c.allowCommentTag||(n=function(n){for(var r="",i=0;i<n.length;){var a=n.indexOf("\x3c!--",i);if(-1===a){r+=n.slice(i);break}r+=n.slice(i,a);var o=n.indexOf("--\x3e",a);if(-1===o)break;i=o+3}return r}(n));var y=!1;c.stripIgnoreTagBody&&(i=c.stripIgnoreTagBody,"function"!=typeof(a=f)&&(a=function(){}),o=!Array.isArray(i),s=[],u=!1,f=(y={onIgnoreTag:function(n,r,c){var d;if(d=n,o||-1!==_.indexOf(i,d)){if(c.isClosing){var l="[/removed]",f=c.position+l.length;return s.push([!1!==u?u:c.position,f]),u=!1,l}return u||(u=c.position),"[removed]"}return a(n,r,c)},remove:function(n){var r="",i=0;return _.forEach(s,function(a){r+=n.slice(i,a[0]),i=a[1]}),r+=n.slice(i)}}).onIgnoreTag);var m=I(n,function(n,r,i,a,o){var s={sourcePosition:n,position:r,isClosing:o,isWhite:Object.prototype.hasOwnProperty.call(d,i)},u=l(i,a,s);if(null!=u)return u;if(s.isWhite){if(s.isClosing)return"</".concat(i,">");var c=function(n){var r=_.spaceIndex(n);if(-1===r)return{html:"",closing:"/"===n[n.length-2]};var i="/"===(n=_.trim(n.slice(r+1,-1)))[n.length-1];return i&&(n=_.trim(n.slice(0,-1))),{html:n,closing:i}}(a),y=d[i],m=k(c.html,function(n,r){var a=-1!==_.indexOf(y,n),o=h(i,n,r,a);return null==o?a?(r=v(i,n,r,null))?"".concat(n,'="').concat(r,'"'):n:null==(o=p(i,n,r,a))?void 0:o:o});return a="<".concat(i),m&&(a+=" ".concat(m)),c.closing&&(a+=" /"),a+=">"}return null==(u=f(i,a,s))?g(a):u},g);return y&&(m=y.remove(m)),m},n}(),C=Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")(),x=new(function(){function n(){var n=this;this.batchData=[],this.uniqKeys=new Set,this.timeout=2e3,this.lock=!1,this.getSlardarBid=function(){var r,i,a="douyin_web";if(!_.includes(a,"bid"))return a;if(n.config&&n.config.bid)return n.config.bid;if(C&&C._xssBid)return C._xssBid;if(C&&C.slardar&&"function"==typeof C.slardar.config){var o=(C.slardar.config()||{}).bid;if(o)return o}if(C&&C.Slardar&&"function"==typeof C.Slardar.config){var s=(C.Slardar.config()||{}).bid;if(s)return s}return(null===(i=null===(r=null==C?void 0:C.Slardar)||void 0===r?void 0:r._baseParams)||void 0===i?void 0:i.bid)||"argus"},this.getConfigRegion=function(){var r;return _.includes("cn","region")?n.config&&n.config.region?n.config.region:((null===(r=null==C?void 0:C.gfdatav1)||void 0===r?void 0:r.region)||"cn").toLowerCase():"cn"},this.gerReportUrl=function(){var r={cn:A("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:A("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:A("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:A("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:A("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:A("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:A("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")}[n.getConfigRegion()];if(r)return r+n.getSlardarBid()}}return n.prototype.setConfig=function(n){this.config=n},n.prototype.upload=function(){var n=this,r=this.gerReportUrl();!this.lock&&r&&0!==this.batchData.length&&(this.lock=!0,setTimeout(function(){var i=n.batchData.slice(0,100);n.batchData=n.batchData.slice(100),C.fetch(r,{method:"post",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).catch(function(n){}),n.lock=!1,n.upload()},this.timeout))},n.prototype.generateKey=function(n){return n.collectKey?[n.collectMode,n.collectKey].join("___"):""},n.prototype.push=function(n){this.batchData.push(n),this.upload()},n.prototype.report=function(n){var r=this.generateKey(n);if(C.fetch&&n.collectKey){var i="object"==typeof window?window.location.href:"SSR";n.documentUrl=i;var a={age:Math.floor(Date.now()),type:"xss",url:i,body:n,"user-agent":""};"enforce"===n.disposition&&"SSR"!==i||(a.url=r),"SSR"===i&&(a.url="SSR___".concat(a.url),a.body.ssr=!0),this.push(a)}},n}()),w=function(n){for(var r=0,i=function(i){Array.isArray(n[i])?0===n[i].length?delete n[i]:(n[i]=_.from(_.uniq(n[i])),r+=n[i].length):0===_.keys(n[i]).length?delete n[i]:_.keys(n[i]).forEach(function(a){n[i][a]=_.from(_.uniq(n[i][a])),r+=n[i][a].length})},a=0,o=_.keys(n);a<o.length;a++)i(o[a]);return{count:r,ret:n}};function R(n,r){return x.setConfig(r),new S(r).process(n)}function D(n){var r,i=(r=/\s|\n|\t/.exec(n))?r.index:-1;if(-1===i)return{html:"",closing:"/"===n[n.length-2]};var a="/"===(n=n.slice(i+1,-1).trim())[n.length-1];return a&&(n=n.slice(0,-1).trim()),{html:n,closing:a}}var L=function(n){return -1===(n=(n=(n=(n=n.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?n.trim().toLowerCase():n.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,function(n,r,i,a){return String.fromCharCode(r?parseInt(i,16):parseInt(a))}).replace(/(\t|\n|\r)/g,"").toLowerCase()};function O(n,r){if(void 0===n&&(n=""),"string"!=typeof n)return!0;if(n=L(n),_.includes(n,"base64")&&!function(n){if(""===n||""===n.trim())return!0;try{return!_.includes(n,"data:text/html;base64")}catch(n){return!0}}(n))return r&&r("data:text/html;base64"),!1;var i=["expression(","behavior:","view-source:"];if(_.some(i,function(r){return -1!==n.indexOf(r)}))return _.forEach(i,function(i){-1!==n.indexOf(i)&&r&&r(i)}),!1;var a=["data:application","data:javascript","data:text/html","data:texthtml"];if(_.some(a,function(r){return -1!==n.indexOf(r)}))return _.forEach(a,function(i){-1!==n.indexOf(i)&&r&&r(i)}),!1;if(n.indexOf("javascript:")>0)return r&&r("javascript:"),!1;if(/^javascript:/i.test(n)){var o=n.slice(11).replace(/\s/g,"").trim();return!!_.some(["void","void(0)","void0","false","undefined",";"],function(n){return n===o})||(r&&r("javascript:"),!1)}return!0}var P=function(n,r){var i,a,o="<%= isSaveValidUrl =>";if("string"!=typeof n||(a=Number("<%= urlLimit =>"),void 0!==i&&(a=i),"NaN"!==n.toString()&&-1!==a&&n.length>=a)||O(n,r))return n;try{if(!0===(o=JSON.parse(o))||"true"===o){var s=new URL(n);return s.origin+s.pathname}}catch(n){}return"#"};function B(n,r,a){if(void 0===n&&(n=""),void 0===r&&(r=[]),"string"!=typeof n)return!0;if(!O(n=L(n)))return!1;var o,s={url:(o=n.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/)||[])[0],scheme:o[1],slash:o[2],host:o[3],port:o[4],path:o[5],query:o[6],hash:o[7]},u=s.scheme,c=s.host;return a?!!a(n):!(!u||!c)&&(!_.includes(["http","https","file"],u)||("object"==typeof window&&window&&(r=i(i([],r,!0),[location.host],!1)),_.some(r,function(n){return!!(n instanceof RegExp&&n.test(c))||n===c})))}var N={a:["target","title","spellcheck","rel"],canvas:[],abbr:["title"],address:[],area:["shape","coords","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["dir"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["alt","title","width","height","decoding"],ins:["datetime"],li:[],mark:[],nav:[],ol:["start"],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],delete:[],form:[],strong:[],mask:["maskunits","x","y","width","height","fill"],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],wbr:[],video:["autoplay","controls","loop","preload","height","width"],svg:["viewBox","version","xmlns","fill","width","height","stroke","stroke-width","style"],path:["d","fill","opacity","stroke","p-id","fill-rule","clip-rule","stroke-width","stroke-linecap","stroke-linejoin","fill-opacity","mask"],rect:["x","y","width","height","fill","stroke","rx"],g:[]},M={collect:null,initCollect:function(){this.collect={whiteList:{},filterProtocol:[]}},removeCollect:function(){var n=w(this.collect),r=n.count,i=n.ret;return this.collect=null,{collectKey:0===r?null:JSON.stringify(i),collectMode:"white"}},onIgnoreTagAttr:function(n,r,a){return n&&_.indexOf(["href","src"],r)>-1?M.domainWhiteList&&Array.isArray(M.domainWhiteList)&&M.domainWhiteList.length>0&&!B(a,i([],M.domainWhiteList,!0))?"":"".concat(r,'="').concat(P(a,function(n){var r;null===(r=M.collect)||void 0===r||r.filterProtocol.push(n)}),'"'):n&&(_.indexOf(["style","class","id"],r)>-1||r.indexOf("data-")>-1)?"".concat(r,'="').concat(a,'"'):(M.collect.whiteList[n]=M.collect.whiteList[n]||[],void M.collect.whiteList[n].push(r))},onIgnoreTag:function(n,r){if("style"===n)return r;I(r,function(n,r,i,a){k(D(a).html.replace("/",""),function(n){M.collect.whiteList[i]=M.collect.whiteList[i]||[],M.collect.whiteList[i].push(n)})},g)},whiteList:N,mergeWhiteList:function(n){for(var r,i={},a=0,o=_.keys(N);a<o.length;a++)i[r=o[a]]=_.from(N[r]);for(var s=0,u=_.keys(n);s<u.length;s++)i[r=u[s]]=r in N?N[r].concat(n[r]):_.from(n[r]);return i},setWhiteList:function(n){for(var r=0,i=_.keys(n);r<i.length;r++){var a=i[r];this.whiteList[a]=a in N?N[a].concat(n[a]):_.from(n[a])}}};try{var Z={},V="merge";_.includes(V,"override")&&(M.whiteList=Z.whiteList),_.includes(V,"merge")&&M.setWhiteList(Z.whiteList)}catch(n){}var U=function(n,r){for(var i={},a=0,o=_.keys(n);a<o.length;a++){var s=o[a];Array.isArray(n[s])?i[s]=_.from(n[s]):i[s]=U({},n[s])}for(var u=0,c=_.keys(r);u<c.length;u++)(s=c[u])in n?Array.isArray(n[s])?i[s]=n[s].concat(r[s]):i[s]=U(n[s],r[s]):Array.isArray(r[s])?i[s]=_.from(r[s]):i[s]=U({},r[s]);return i},F={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content"]};try{var j={};j.blackAttrRegExps&&(j.blackAttrRegExps=j.blackAttrRegExps.map(function(n){return new RegExp(n.toString().slice(1,n.toString().length-1))}));var G="merge";_.includes(G,"override")&&(F=j),_.includes(G,"merge")&&(F=U(F,j))}catch(n){}var W={mode:"black",whiteList:{},blackConfig:F,collect:null,initCollect:function(){W.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var n=w(W.collect),r=n.count,i=n.ret;return W.collect=null,{collectKey:0===r?null:JSON.stringify(i),collectMode:"black"}},onIgnoreTag:function(n,r){var i;if(!_.includes(F.blackTags,n))return I(r,function(n,r,i,a,o){if(-1!==i.indexOf("/"))return g(a);if(o)return"</".concat(i,">");var s=D(a),u=k(s.html,function(n,r){var a,o=0;if(F.blackList[i]&&_.includes(F.blackList[i],n)&&(W.collect.blackList[i]=W.collect.blackList[i]||[],W.collect.blackList[i].push(n),o++),F.blackAttrRegExps.length&&F.blackAttrRegExps.some(function(r){return r.test(n)})&&_.forEach(F.blackAttrRegExps,function(r){r.test(n)&&(W.collect.blackAttrRegExps.push("".concat(r.toString(),"->").concat(n)),o++)}),F.blackAttrs.length&&_.includes(F.blackAttrs,n)&&(F.blackAttrs.push(n),o++),!o){if(F.filterList&&F.filterList[i]&&_.includes(F.filterList[i],n)){var s=P(r,function(n){var r;null===(r=W.collect)||void 0===r||r.filterProtocol.push(n)});return s!==r&&(W.collect.filterList[i]=W.collect.filterList[i]||[],W.collect.filterList[i].push(n)),r?"".concat(n,"='").concat(s,"'"):n}return F.filterAttrs&&_.includes(F.filterAttrs,n)?((s=P(r,function(n){var r;null===(r=W.collect)||void 0===r||r.filterProtocol.push(n)}))!==r&&(null===(a=W.collect)||void 0===a||a.filterAttrs.push(n)),r?"".concat(n,"='").concat(s,"'"):n):r?"".concat(n,"='").concat(r,"'"):n}});return a="<".concat(i),u&&(a+=" ".concat(u)),s.closing&&(a+=" /"),a+=">"},g);null===(i=W.collect)||void 0===i||i.blackTags.push(n)}},Y=function(n){var r=n.reportOnly,i=void 0===r||r,a=n.block;return i&&"all"===i?"report":("string"==typeof i&&("true"===i&&(i=!0),"false"===i&&(i=!1)),a?"enforce":i?"report":"enforce")},H=function(n){return function(i,a,o){if(!i||"string"!=typeof i)return i;var s=a;n===R&&(s=M).initCollect();var u=n(i,s);if(T(u)===T(i))return i;if(!o)return u;var c=o.logType,d=Y(o),l=s.removeCollect();return x.report(r(r({type:c,disposition:d},l),{sourceText:b(i),filterText:b(u)})),"enforce"===d?u:i}},K=H(function(n,r){return void 0===r&&(r={}),r&&r.whiteList||(r.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}),new S(r).process(n)}),X=H(R),z=function(n,r,i){var a=[],o=P(n,function(n){a.push(n)});if(o===n)return n;a=_.from(_.uniq(a));var s=r||i||{};if(!s)return o;var u=s.logType,c=Y(i);return x.report({type:u,disposition:c,collectKey:a.join("___"),collectData:JSON.stringify(a),collectMode:"black",sourceText:b(n),filterText:b(o)}),"enforce"===c?o:n},q=C._xssProject||{},Q=C.xssNamespace||{},J="3.0.26",$={FilterXSS:S,version:J,webpackPluginVersion:"<%= webpackPluginVersion =>",reportOnly:"<%= reportOnly =>",filterXSS:K,_filterXSS:X,filterUrl:z,Config:M,BlackConfig:W,project:q,setProjectName:function(n){q[n]=this,C._xssProjectName=n}};Q.douyin_web=$,C.xssNamespace=Q,C.Math&&!C.Math.xssNamespace&&(C.Math.xssNamespace=Q),q[J]=$,C.globalThis=C,C.getFilterXss=function(){return void 0!==this._xssProjectName?this._xssProject[this._xssProjectName]:$},C.xss=$,C.isSafeUrl=B,C.isSafeDomain=B,C.isSafeProtocol=O,C._xssProject=q,C._xssProjectName&&(q[C._xssProjectName]=$);var ee=$.setProjectName.bind($);n.BlackConfig=W,n.Config=M,n.FilterXSS=S,n._filterXSS=X,n.filterUrl=z,n.filterXSS=K,n.isSafeDomain=B,n.isSafeProtocol=O,n.isSafeUrl=B,n.project=q,n.setProjectName=ee,n.setXssNamespace=function(n){var r=n.appId,i=n.bid,a=n.region;Q[r]=$;M.bid=i,M.region=a,M.enabled=!0},n.xssNamespace=Q,Object.defineProperty(n,"__esModule",{value:!0})}),(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["75431"],{24138:function(n,r,i){"use strict";i.d(r,{Z:function(){return C}});var a=i("515842");i("836654"),i("743465"),i("464135"),i("499953"),i("47513"),i("721911"),i("777180"),i("98601"),i("110617"),i("675373"),i("819117"),i("927234"),i("319015"),i("742611");var o=i("526956"),s=i("458756"),u=i("493722");i("826893"),i("284961");var c=[];"undefined"!=typeof window&&function(){try{new window.PerformanceObserver(function(n){var r=n.getEntriesByType("resource");c.length>30&&c.splice(0,c.length-30);for(var i=0;i<r.length;i++)c.push(r[i])}).observe({entryTypes:["resource"]})}catch(n){}}();var d=function(){return function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(n){return!1}}()&&!function(){var n="_localstorage_support_test";try{return window.localStorage.setItem(n,!0),window.localStorage.removeItem(n),!1}catch(n){return!0}}()}(),l=d?window.localStorage:{},f="__xgplayerlogkey",h={set:function(n){try{var r=this.get();r.push(n),l.setItem(f,JSON.stringify(r))}catch(n){}},get:function(){try{var n=l.getItem(f);return n=n?JSON.parse(n):[]}catch(n){return[]}},remove:function(){try{l.removeItem(f)}catch(n){}},clear:function(){try{l.clear()}catch(n){}}};i("511141"),i("851702"),i("914613"),i("406044"),i("611928"),i("609936"),i("156017"),i("336952"),i("784844"),i("52815"),i("771915"),i("212319"),i("993444"),i("815792"),i("518878"),i("126244"),i("804462"),i("669421"),i("77566"),i("874386");var p=new Set,v=new Set;function g(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"!=typeof performance&&!!n)try{var i=performance.mark(n,r);i&&p.add(i)}catch(n){}}function _(n,r,i){if("undefined"!=typeof performance&&!!n)try{var a=performance.measure(n,r,i);a&&v.add(a)}catch(n){}}var y=i("120696"),m=i("183582"),b=i("323806"),A=["try_req_num","req_node_succ","conn_req_num","has_ret_node","conn_fail_num","conn_jump_num"];(0,m.cM)("xgVodLogger version is ".concat(b.Z));var I=(0,m.P9)("Object"),k=1300,E="__tea_cache_tokens_".concat(k),T="",S=null,C=function(){function n(r,i){var d=this;if((0,a.PA)(this,n),(0,a._x)(this,"initializeUrlLog",function(n){var r=n&&n.url?n.url:"String"===(0,m.kM)(n)?n:"";"String"!==(0,m.kM)(r)&&(r=""),d.urlLog={initial_url:r,initial_host:(0,m._P)(r),initial_ip:""}}),(0,a._x)(this,"onXgLogCache",function(){var n,r=d._getLogCache();r&&(d._templog={vtype:null===(n=d.player)||void 0===n?void 0:n.vtype,log:r},d.onOneTemp())}),(0,a._x)(this,"onPrfDataSize",function(n){d._progressInfo.upDateDownload(n)}),(0,a._x)(this,"onDegrade",function(n){n&&(n.local_time=new Date().getTime(),d.onOneEvent({end_type:"degrade"},n))}),(0,a._x)(this,"onMediaFormatError",function(n){d.onOneEvent({end_type:"".concat(n.error_type||"","Error")})}),(0,a._x)(this,"onReplayBtnClick",function(){d.resetLoggerParams()}),(0,a._x)(this,"onBeforeDefinitionChange",function(){d.resLogs.ldst=(0,m.je)(),d._endType="switch"}),(0,a._x)(this,"onDefinitionChangeDetail",function(n){var r=d._progressInfo;r.updateDefInfo(n,d.player.currentTime),r.lastBitrate&&"video"===n.mediaType&&d.sendSwitchOpera("changedetail")}),(0,a._x)(this,"onDefinitionChange",function(n){var r=n.from,i=n.to;d.changeResolution({from:r,to:i,startTime:d.resLogs.ldst,operaType:"switch"}),(0,m.cM)("onDefinitionChange from:".concat(r,", to:").concat(i))}),(0,a._x)(this,"onDefiChangeSuccess",function(){(0,m.cM)("onDefinitionChangeSuccess"),d.updateVideoSize(),d.triggerTask("start")}),(0,a._x)(this,"onAbrChange",function(n){var r=n.prev,i=n.cur,a=n.abrInfo;if(d.player.abrInstance){var o=d.player.abrInstance.eventInfo;(0,m.cM)("abrChange",o),o.last_definition=r,o.now_definition=i,d.abrInfo.abr_event_info.video_switch.push(o),d.changeResolution({from:r,to:i,startTime:(0,m.je)(),operaType:"abr_switch",abrInfo:a})}}),(0,a._x)(this,"onTimeUpdate",function(){var n=d.playlogs,r=d.resLogs,i=d.player;if(d.errorLog.try_err_c=0,!n.vt&&1===d.startStep&&(n.vt=(0,m.L8)(),(0,m.cM)("onTimeUpdate: first frame inited","currentTime11:".concat(i.currentTime," vt-pt:").concat(n.vt-n.pt," vt-nt:").concat(n.vt-n.nt," vt-rt:").concat(n.vt-n.rt)),d.startStep=2),!r.initial_resolution){var a=i.currentDefitionFromPlayer&&i.currentDefitionFromPlayer.definition?i.currentDefitionFromPlayer.definition:i.config.defaultDefinition||"".concat(i.video.videoHeight,"p")||"";a=(0,m.fC)(a),r.initial_resolution=a}!r.final_resolution&&(r.final_resolution=r.initial_resolution);var o=n.played.length;o<1?n.played.push({begin:i.currentTime,end:-1}):n.played[o-1].end=i.currentTime,d._progressInfo.updatePlayed(i.currentTime),d._progressInfo.checkNextBitrate(i.currentTime);var s=r.played.length;s<1?r.played.push({begin:i.currentTime,end:-1}):r.played[s-1].end=i.currentTime,d.lastVideoTime=i.currentTime||0}),(0,a._x)(this,"onVideoProgress",function(){d.updateBuffers(),d._progressInfo.updateBuffered(d.player.buffered)}),(0,a._x)(this,"onCanplay",function(){(0,m.cM)("onCanplay","this.startStep:".concat(d.startStep," ").concat((0,m.L8)())),d.setVt()}),(0,a._x)(this,"onLoadeddata",function(){(0,m.cM)("onLoadeddata","this.startStep:".concat(d.startStep," ").concat((0,m.L8)())),d.setVt(),d.updateVideoSize(),g("playerLoadeddata_".concat(d.vid)),_("playerFirstFrame_".concat(d.vid),"playerLoadStart_".concat(d.vid),"playerLoadeddata_".concat(d.vid)),!function(){if("undefined"!=typeof performance)try{p.forEach(function(n){performance.clearMarks(n.name)}),p.clear()}catch(n){}}(),function(){if("undefined"!=typeof performance)try{v.forEach(function(n){performance.clearMeasures(n.name)}),v.clear()}catch(n){}}()}),(0,a._x)(this,"onLoadStart",function(){d.commonParams.web_url=location.href;var n=(0,m.LM)(d.player.currentSrc);d.triggerTask("start"),(0,m.cM)("onLoadStart","this.startStep:".concat(d.startStep," ").concat((0,m.L8)()," isSrcEmpty:").concat(n," player.src:").concat(d.player.src)),0===d.startStep&&!n&&"visible"===document.visibilityState&&d.setPt(),g("playerLoadStart_".concat(d.vid))}),(0,a._x)(this,"onMSEAttaching",function(){g("playerMSEBind_".concat(d.vid)),_("playerSourceReady_".concat(d.vid),"playerLoggerReady_".concat(d.vid),"playerMSEBind_".concat(d.vid))}),(0,a._x)(this,"onMSEAttached",function(){g("playerMSEOpen_".concat(d.vid)),_("playerMSEReady_".concat(d.vid),"playerMSEBind_".concat(d.vid),"playerMSEOpen_".concat(d.vid))}),(0,a._x)(this,"onBufferedChange",function(){var n=d.player.video&&d.player.video.buffered;if(n){var r=n.length;r>0&&n.end(r-1)+1>d.player.duration&&(d.bft=(0,m.L8)())}}),(0,a._x)(this,"onPlayerInited",function(){(0,m.cM)("player init"),d._playerCreatedTime=(0,m.L8)(),d.playlogs.rt=(0,m.L8)(),g("playerComplete_".concat(d.vid))}),(0,a._x)(this,"onNotAutoPlay",function(){(0,m.cM)("onNotAutoPlay","autoplay:".concat(d.isAutoplay)),0===d.isAutoplay?d.isAutoplay=2:1===d.isAutoplay&&(d.isAutoplay=3)}),(0,a._x)(this,"onPlayerError",function(n){n=n||{};var r=d.errorLog,i=d.player;if((0,m.cM)("onPlayerError","this.player.type:".concat(d.player.type," this.player.replayRunning:").concat(d.player.replayRunning," isSupportMP4:").concat(u.ZP.isSupportMP4," isPC:").concat(u.ZP.isPC)),(0,m.cM)("onPlayerError",n),d.load_state=o.fp.ERROR,d._endType="error",d.suspendWaitingStatus("onPlayerError"),d._progressInfo.calculatePlaySize(),"dash"!==i.type||!i.replayRunning){if(!n.url&&(n.url=d.player.currentSrc),u.ZP.isPC&&!u.ZP.isSupportMP4||u.ZP.isSpider){r.errc=o.O1["5"],r.errt=o.iR.notSupport,d.onOneError({errorType:r.errt,code:r.errc,url:n.url,headers:n.headers||{},message:n.message||""},0),d._isOnePlayReport=!0;return}r.errt=n.errorTypeCode||(n.errorType&&o.iR[n.errorType]?o.iR[n.errorType]:9999),r.message=n.message||"",n.errorCode?r.errc=n.errorCode>0&&o.O1[n.errorCode]?o.O1[n.errorCode]:n.errorCode:n.code&&(r.errc=n.code>0&&o.O1[n.code]?o.O1[n.code]:n.code),r.last_errors.push(r.errc),0===r.fir_errc&&(r.fir_errc=r.errc),d.sendSwitchOpera(o.av.ERROR),d.onOnePlay(o.av.ERROR),d.onOneTemp(o.av.ERROR),d.sendDegradeLog("playCatch_end",d.playlogs.degrade);var a=!1,s=n.mediaError;s&&d._options.needXhrCheck&&(4===s.code||2===s)&&(a=!0),d.onOneError({endState:o.av.PLAY_ERROR,errorType:r.errt,code:r.errc,url:n.url,headers:n.headers||{},message:n.message||""},0,a),d.sendEventsQueue()}}),(0,a._x)(this,"onPlayInterfaceInfo",function(n){(0,m.cM)("onPlayInterfaceInfo",n);var r=d.errorLog,i=d.apiLog,a=d.playlogs;if(n&&Object.keys(n).map(function(r){"code"===r?i.vsc=n[r]:"message"===r?i.vsc_message=n.message||"success，视频可正常播放":i[r]=n[r]}),a.at=n.timestamep||new Date().getTime(),!n.error||-9988!==n.error.errc){if(i.vsc=n.code||10,i.vsc_message=n.message||"success，视频可正常播放",n.error){var o=n.error;r.errt=1e3,r.errc=o.errc||-9998,r.last_errors.push(o.errc||-9998),0===r.fir_errc&&(r.fir_errc=o.errc||-9998),r.accu_errc++,1===r.accu_errc&&(r.fir_errt=(0,m.je)()),d.onOneError({errorType:1e3,code:o.errc||-9998,url:"",headers:{}})}}}),(0,a._x)(this,"onProgressEvent",function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=d.netLog;if(n.speed){var i=n.speed>1e6?Math.floor(n.speed/1e3):n.speed;r.downloadSpeed=i,r.totalSpeed+=i,r.rqCount++}"oversize"!==n.type&&r.requestCount++,n.connectTime&&(r.connectCost=n.connectTime);var o=r.rqCount<7?100:n.costTime>=5e3?20:10;if(!("success"===n.type&&parseInt(100*Math.random(),10)<=o)){var s=function(n){var r={};try{n=n.replace(/^http:|^https:/,"");for(var i=c||[],a=function(a){if(i[a].name.replace(/^http:|^https:/,"")===n)return["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"].map(function(n){r[n]=Math.round(i[a][n])}),r.url=i[a].name,r.duration=Math.round(i[a].duration),r.domainDuration=r.domainLookupEnd-r.domainLookupStart,r.connectDuration=r.connectEnd-r.connectStart,1},o=i.length-1;o>=0&&!a(o);o--);return r}catch(n){return r}}(n.cdnUrl),u=n.xhr||{},l=n.type?"progress_".concat(n.type):"progress",f=n.headers;!f&&(f=(0,m.rg)(u)),f=(0,m.xV)(f);var h=(0,a.Zj)((0,a.Zj)({},f),{},{download_speed:r.downloadSpeed,connect_cost:r.connectCost,c_dur:s.connectDuration||0,d_dur:s.domainDuration||0,r_dur:s.duration||0,rqtt:new Date().getTime(),x_cache:f.x_response_cache||"",server_ip:f.x_response_sinfo});n.status?r.status=n.status:u&&u instanceof window.XMLHttpRequest&&(r.status=u.status||0),h.status=r.status;var p=n.cdnUrl||n.url;"error"===n.type&&d.merror.cdn.push((0,a.Zj)((0,a.Zj)({costTime:n.costTime,cur_play_pos:n.pos,cdn_url:p,cdn_host:(0,m._P)(p)},h),f)),d.onOneEvent({costTime:n.costTime,vid:n.vid,end_type:l,cur_play_pos:n.pos,cdn_url:p,cdn_host:(0,m._P)(p)},h,"error"===n.type?0:2)}}),(0,a._x)(this,"onNext",function(){if((0,m.cM)("onNext:startStep:",d.startStep),d.startStep>0){if(d._reportInvalidVV(o.av.NEXT))return;d.sendSwitchOpera(o.av.NEXT),d.onOnePlay(o.av.NEXT),d.onOneTemp(o.av.NEXT),d.sendEventsQueue()}d.vtype=null,d.playlogs.lc=0,d.resetLoggerParams()}),(0,a._x)(this,"onNextEnded",function(){var n=d.player,r=d.resLogs,i=(0,m.fC)(n.config.defaultDefinition||"");r.initial_resolution=i,r.final_resolution=i}),(0,a._x)(this,"onXgLogWaiting",function(n){var r=d.playlogs,i=d.resLogs,a=d.stall;if(!!d._options.checkByInnerLog&&0===n.type){(0,m.cM)("onXgLogWaiting",n);var o=n.endType,s=n.costTime,u=n.start,c={download_speed:d.realSpeed,avg_speed:d.avgSpeed,mse_op:d.mp4MseOpLength,mp4_load_range:d.mp4LoadSegmentTimeRange,bitrate:d.curBitrate};if("waitingStart"===n.eventType){d.onOneEvent({costTime:s,end_type:"waitstart"},c,2),d.appendStallInfo("start",u);return}if("waitingEnd"===n.eventType){var l=(0,m.je)();(0,m.cM)("onXgLogWaiting>>".concat(o,"|costTime:").concat(s,"  vt:").concat(r.vt)),d.appendStallInfo("end",l,o),r.bc++,d.checkInBuffer(d.player.currentTime)?(r.de_bu_acu_t+=s,r.dbc++):(r.nbc++,r.n_bu_acu_t+=s),i.bc++,r.bu_acu_t+=s,i.bu_acu_t+=s,a.end=d.cur_play_pos,a.cost=s,a.acc+=a.cost,1===a.sc&&(a.endf=d.cur_play_pos),d.onOneEvent({costTime:s,end_type:"waitend"},c,2)}}}),(0,a._x)(this,"onSeeking",function(){if(!(0,m.LM)(d.player.src)){var n=d.resLogs,r=d.playlogs,i=d.player,a=d.seekLog;(0,m.cM)("onSeeking","currentTime:".concat(i.currentTime)),0===d.startStep&&d.setPt(),d.suspendWaitingStatus("seek"),d.isSeeking&&d.suspendSeekStatus("seek",!1),d.isSeeking=!0,r.played.push({begin:i.currentTime,end:-1}),n.played.push({begin:i.currentTime,end:-1}),d._progressInfo.updatePlayed(i.currentTime,0),a.lastSeekStartTime=(0,m.je)(),a.seekBefore=d.lastVideoTime.toString(),a.buf_include=d.checkInBuffer(d.player.currentTime)?1:0,a.intervalId=setTimeout(function(){d.isSeeking&&d.suspendSeekStatus("seekTimeout",!0)},o.co)}}),(0,a._x)(this,"onSeeked",function(){if(!(0,m.LM)(d.player.src))d.isSeeking&&d.suspendSeekStatus("seeked",!0)}),(0,a._x)(this,"onPlaying",function(){d.suspendWaitingStatus("play"),d.load_state=o.fp.PLAYABLE;var n=(0,m.je)();d.pauseLog.isPausing&&(d.pauseLog.isPausing=!1,d.pauseLog.pause_acu_t+=n-d.pauseLog.pause_start)}),(0,a._x)(this,"onPlayCatch",function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0};if((0,m.cM)("onPlayCatch",n,r),!!n){switch(n){case"mp42dash":d.vtype="DASH_2";break;case"dash2mp4":d.vtype="MP4_2";break;case"dash1mp4":d.vtype="MP4_1";break;default:d.vtype=n}var i=d.errorLog,s=d.playlogs;d.merror.playCatch.push((0,a.Zj)({errc:r.errorCode,errt:r.errorType},r.headers)),d.setBr("playcatch"),i.accu_errc++,i.try_err_c++,i.fir_errc=r.errorCode,r.errorCode&&i.last_errors.push(r.errorCode),d.suspendWaitingStatus("playcatch"),d.suspendSeekStatus("playcatch"),d.sendDegradeLog("playCatch",s.degrade,{cdn_url:r.url}),s.degrade=n,d.onOneError({errorType:r.errorTypeCode,code:r.errorCode,url:r.url||"",status:r.httpCode||r.status,headers:r.headers||{},vid:r.vid||d.vid,preload_hit:r.preloadHit||0,preload_cached:r.preloadCached||0,endState:o.av.PLAY_CATCH,costTime:r.costTime,message:r.errorMessage||r.message,interval_time:r.timerStep||0},0)}}),(0,a._x)(this,"onMediaExpied",function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0},r=d.errorLog,i=d.playlogs;(0,m.cM)("onMediaExpied",n),d.suspendWaitingStatus("expied"),d.setBr("expied"),r.accu_errc++,r.try_err_c++,r.last_errors.push(n.errorCode),i.at=new Date().getTime(),d.merror.expied.push((0,a.Zj)({errorType:n.errorTypeCode||n.errorType,code:n.errorCode,url:n.url||"",status:n.status},(0,m.xV)(n.headers||{}))),d.onOneError({errorType:n.errorTypeCode||n.errorType,code:n.errorCode,url:n.url||"",status:n.status,headers:n.headers||{}},0)}),(0,a._x)(this,"onLog",function(n){(0,m.cM)("onLog",n);var r=n.type;if(delete n.type,!!r)switch(r){case o.LH.RETRY:break;case o.LH.ONETEMP:!d._templog&&(d._templog={}),d._templog=(0,m.yc)(d._templog,n.data,n.action),d._templog.preload_hit&&(d._cacheFile=o.c3.CACHED);break;case o.LH.ONEERROR:var i=d.errorLog;i.accu_errc++,i.try_err_c++,d.setBr("mp4error"),i.last_errors.push(n.code),d.onOneError(n,0);break;case o.LH.ONEEVENT:var a=(0,m.lv)(n,{costTime:"costTime",vid:"vid",end_type:"end_type",pos:"cur_play_pos",cdnUrl:"cdn_url"});a.ext&&["start","end"].map(function(n){a.ext[n]&&(a.ext["ext_".concat(n)]=a.ext[n],delete a.ext[n])}),d.onOneEvent(a.data,a.ext,2)}}),(0,a._x)(this,"onReady",function(){(0,m.cM)("onReady");var n,r=null===(n=d.player)||void 0===n?void 0:n.getPlugin("progress");null==r||r.addCallBack("mouseleaveFinished",function(){var n;if(null==r||null===(n=r.statistic)||void 0===n?void 0:n.hasActive){var i="";try{i=JSON.stringify((null==r?void 0:r.statistic)||{})}catch(n){}if(!i)return;d._templog={progress:i},d.onOneTemp(o.av.PROGRESS_LEAVE)}})}),(0,a._x)(this,"onPlay",function(){(0,m.cM)("onPlay","this.startStep :".concat(d.startStep," this.isEnded:").concat(d.isEnded)),d.isEnded&&(d.resetLoggerParams(),d.setPt())}),(0,a._x)(this,"onPause",function(){(0,m.cM)("onPause");var n=d.pauseLog;n.isPausing=!0,n.pause_start=(0,m.je)()}),(0,a._x)(this,"onWaiting",function(){var n=d._options;if(d.updateCurBuffer("onWaiting"),n.checkByInnerLog)return;if((0,m.cM)("onWaiting>","isSeeking:".concat(d.isSeeking," startStep:").concat(d.startStep," intervalId:").concat(d.stallIntervalId)),d.wait_buf_include=d.checkInBuffer(d.player.currentTime,-1e3)?1:0,!d.isSeeking&&0!==d.playlogs.vt&&!(d.inWaitingStart>0))d.stallIntervalId&&(window.clearTimeout(d.stallIntervalId),d.stallIntervalId=null),d.inWaitingStart=(0,m.je)(),d.waitStartTime=d.cur_play_pos,d.stallIntervalId=window.setTimeout(function(){var n=d.stall;(0,m.cM)("this.stallIntervalId>>".concat(d.stallIntervalId," cost: ").concat((0,m.je)()-d.inWaitingStart)),d._endType="wait",d.load_state=o.fp.STALLED,d.vtype.indexOf("MP4")>-1&&d.player.currentTime>10&&d.task&&(d.triggerTask("waiting",d.initial_url),d.requestCount++),n.start=d.waitStartTime,n.bc++,1===n.bc&&(n.startf=d.waitStartTime),window.clearTimeout(d.stallIntervalId),d.stallIntervalId=null,d.startWaitingStatus(d.inWaitingStart,(0,m.je)()-d.inWaitingStart),d.stallIntervalId=setTimeout(function(){d.inWaitingStart>0&&d.suspendWaitingStatus("timeout")},o.co)},o.bJ)}),(0,a._x)(this,"onEnded",function(){if(!!d.initial_url){(0,m.cM)("onEnded","watchDur:".concat(d.watchDur," vt:").concat(d.vt," pt:").concat(d.pt)),d.isEnded=!0;var n=d.resLogs.df,r=d._progressInfo;r.calculatePlaySize(),r.cachedSize<1?d.changeResolution({from:n,to:n,startTime:(0,m.je)(),operaType:"leave_switch",endType:"ended"}):d.sendSwitchOpera(o.av.ENDED),d.onOnePlay(o.av.ENDED),d.sendDegradeLog("playCatch_end",d.playlogs.degrade),d.onOneTemp(o.av.ENDED),d.sendEventsQueue(),d.playlogs.lc++}}),(0,a._x)(this,"onUnload",function(){if(0===d.startStep||!d.initial_url)return;if(d.onOneTemp(o.av.UNLOAD),d.sendDegradeLog("playCatch_end",d.playlogs.degrade),!d._reportInvalidVV(o.av.UNLOAD))d.sendSwitchOpera(o.av.UNLOAD),d.onOnePlay(o.av.UNLOAD,!0)}),(0,a._x)(this,"onVisibilitychange",function(){var n=d.playlogs.vt;"visible"===document.visibilityState&&!n&&d.setPt()}),(0,a._x)(this,"onDestroy",function(){(0,m.cM)("onDestroy:this.startStep:".concat(d.startStep," initial_url:").concat(d.initial_url," ").concat(!!d.initial_url)),d.onOnePlay(o.av.DESTROY),d.startStep>0&&d.initial_url&&(d.onOneTemp(o.av.DESTROY),d.sendDegradeLog("playCatch_end",d.playlogs.degrade));var n=d.resLogs.df;d._progressInfo.cachedSize<1?d.changeResolution({from:n,to:n,startTime:(0,m.je)(),operaType:"leave_switch",endType:"destroy"}):d.sendSwitchOpera(o.av.ENDED),d.sendEventsQueue(),u.ZP.isPC?window.removeEventListener("beforeunload",d.onUnload):(u.ZP.isMobile||u.ZP.isPad)&&window.removeEventListener("pagehide",d.onUnload),document.removeEventListener("visibilitychange",d.onVisibilitychange),d.listeners.forEach(function(n){d.player.off(n.evt,n.handler)}),d.clearTimers(),d.player.off("destroy",d.onDestroy),d.task&&d.task.clear()}),(0,a._x)(this,"onOnePlay",function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,m.cM)("onOnePlay _isOnePlayReport:".concat(d._isOnePlayReport," isLeave: ").concat(r," endState:").concat(n)),!d._isOnePlayReport){var i=d.errorLog,s=d.playlogs,c=d.abrInfo,l=d.resLogs,f=d.player,h=d.apiLog,p=d.pauseLog,v=d.stall,g=d.netLog,_=d.watchDur;d._isOnePlayReport=!0;var y=(0,m.L8)();d.getBufferTime(f);var b=d.getFrameInfo(),A=d.getPerformance(),I=i.errc,k=d._progressInfo,E=k.playedSize,T=k.cachedSize,S=k.pcdnCached,C=k.cachedVideoSize,x=k.pcdnVideoCached,w=d._progressInfo.getFileSize(f.duration),R=d.seekLog,D=R.sc,L=R.sat,O={bc:(0,m.RB)(_,d.bc),bu_acu_t:(0,m.RB)(_,d.bu_acu_t),sc:(0,m.RB)(_,D),sat:(0,m.RB)(_,L)};d.setExt();var P=d._getCompatibilityInfo();d.setNovv(null,n);var B=(0,a.Zj)((0,a.Zj)((0,a.Zj)((0,a.Zj)({local_time:new Date().getTime(),log_type:"video_playq",plugin_exception:0,player_create_exception:"",v:d.vid,initial_url:d.initial_url,initial_host:d.initial_host,initial_ip:d.curHeaders.x_response_sinfo||0,initial_type:d.initial_type},d.curHeaders),{},{initial_resolution:l.initial_resolution,final_resolution:l.final_resolution,pt:d.pt,prepare_start_time:s.nt,prepare_end_time:s.rt||(0,m.L8)(),vt:d.vt,lt:d.lt,lpt:d.lpt,fvt:d.fvt,nvt:d.nvt,bft:d.bft,sc:D,sat:L,bc:d.bc,dbc:s.dbc||0,nbc:s.nbc||0,video_net_s:d.videoNetworkState,status:d.curStatus,first_buf_startt:v.startf,first_buf_endt:v.endf,lc:s.lc,bu_acu_t:d.bu_acu_t,de_bu_acu_t:s.de_bu_acu_t||0,n_bu_acu_t:s.n_bu_acu_t||0,pause_acu_t:p.pause_acu_t,cur_play_pos:d.cur_play_pos,load_state:d.load_state,play_speed:d.playbackRate,playback_state:d.playback_state,end_state:n,watch_dur:_,switch_resolution_c:d.switchResolutionCount,is_start_play_automatically:d.isAutoplay,start_time:d.start_time,finish:d.finish,errt:i.errt,errc:I,vsc:h.vsc,vsc_message:i.message||h.vsc_message,api_str:h.api_str,auth:h.auth||h.logid,width:d.videoWidth,height:d.videoHeight,vd:d.vd,video_length:w.video,audio_length:w.audio,df:d.resolution,lf:l.lf,play_c:0,player_created_t:d.player_created_t,fir_errt:i.fir_errt,fir_errc:i.fir_errc,lv_method:0,ldst:l.ldst,ldet:l.ldet,is_disable_short_seek:0,mute:d.mute,volume:d.volume,download_speed:d.realSpeed?d.realSpeed:d.task&&d.task.speed?d.task.speed:g.downloadSpeed,avg_speed:d.avgSpeed?d.avgSpeed:g.rqCount>0?parseInt(g.totalSpeed/g.rqCount,10):0,bitrate:d.curBitrate,preload_state:d.preloadState,preload_hit:d.preLoadData.hit||0,preload_cached:d.preLoadData.duration||d.preLoadData.byteLength||0,mdl_req_num:g.requestCount,watingcost:d.watingCost,br:s.br,fbrt:s.fbrt,try_err_c:i.try_err_c,accu_errc:i.accu_errc,merror:(0,m.LQ)(d.merror),ex:(0,m.LQ)(d.exInfo),perf:(0,m.LQ)(A),bufs:(0,m.LQ)(d.buffers.allBuffer),vds:T,pvds:S,vps:E,vvds:C,pvvds:x,pcdn:(0,m.LQ)(d.getPCDNStat())},d.buffers.curBuffer),{},{degrade:s.degrade,cache_file:d._cacheFile},b),{},{fullScreen:d._getFullScreenType(),encryptedInfo:(0,m.LQ)(d.encryptedInfo),per100_info:(0,m.LQ)(O)},P);0!==d.vt&&(B.et=y);var N=d._logstrcache||d._getLogCache();0===B.fvt&&N&&(B.log=N,d._logstrcache=null),null!=f&&f.softDecoder&&(B.soft_decoder=f.softDecoder),f&&f.dashState&&(B.dash_state=f.dashState),null!=f&&f.softDecoder&&(B.soft_decoder=f.softDecoder),c.abr_init_opts=f.config.autoBitrateOpts||{},B.abr_info=(0,m.LQ)(d.abrInfo);var M=P.is_support_mp4&&P.is_support_mse_mp4;if(P.is_spider||u.ZP.isPC&&!M&&0===d.fvt){(0,m.cM)("is_spider",P.is_spider,"is_support_mp4",P.is_support_mp4);return}if(B.isLeave=r,r){var Z=!d._options.disableLocalCache;d.reportLog(o.bT.ONE_PLAY,B,Z?1:0)}else d.reportLog(o.bT.ONE_PLAY,B)}}),(0,a._x)(this,"onOneEvent",function(n){var r=n.costTime,i=n.vid,s=n.end_type,u=n.cur_play_pos,c=n.cdn_url,l=n.cdn_host,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0;(0,m.cM)("onOneEvent",s);var p=d.buffers,v=p.curBuffer,g=p.allBuffer,_=d.getFrameInfo(),y=(0,a.Zj)((0,a.Zj)({local_time:new Date().getTime(),v:i||d.vid,cost_time:r,end_type:s||d.end_type,cdn_url:c||d.url,cdn_host:l||"",initial_type:d.initial_type,resolution:d.resolution,play_speed:d.playbackRate,first_frame_interval:(0,m.je)()-d.pt,last_switch_interval:d.getLastInterval("lastSwitchStartTime",d.resLogs,!1),last_seek_interval:d.updateSeekPt(!1),last_event_interval:d.getLastInterval("lastEventTime"),cur_play_pos:u||d.cur_play_pos,video_ready_s:d.videoReadyState,video_seeking:d.videoSeeking,video_paused:d.videoPaused,bufs:(0,m.LQ)(g),retry_count:d._retryCount,at:d.playlogs.at,bc:d.stall.bc,stay_seconds:parseInt((new Date().getTime()-d.playlogs.at)/1e3,10),preload_state:d.preloadState,preload_hit:d.preLoadData.hit,preload_cached:d.preLoadData.duration||d.preLoadData.byteLength},v),_);s.indexOf("waitend")>=0&&r>3e3&&(y.log=d._getLogCache());var b=d.player,A=b.currentTime,I=b.duration;if(s.indexOf("waitstart")>=0&&I-A<=1){var k=y.local_time,E=y.v,T=y.cost_time,S=y.cdn_url,C=y.first_frame_interval,x=y.cur_play_pos,w=y.video_ready_s,R=y.video_seeking,D=y.video_paused,L=y.bufs,O=y.bc,P=y.preload_hit;d.reportLog(o.bT.ONE_EVENT,(0,a.Zj)({end_type:"longwait",local_time:k,v:E,cost_time:T,cdn_url:S,first_frame_interval:C,cur_play_pos:x,video_ready_s:w,video_seeking:R,video_paused:D,bufs:L,bc:O,preload_hit:P},v),h)}if("waitstart"===s&&"function"==typeof d._options.getPageFPS){var B=d._options.getPageFPS();y.cur_fps=B.curFPS||0,y.avg_fps=B.avgFPS||0}s.indexOf("wait")>-1&&(y.buf_include=d.wait_buf_include),s.indexOf("timeout")>-1&&y.cost_time>o.YL&&(y.cost_time=o.YL);var N=d.player;N&&N.dashState&&(y.dash_state=d.player.dashState),Object.keys(f).forEach(function(n){y[n]=f[n]}),y.ex=(0,m.LQ)(d.getPlayerExt()),d.addIfExist("drm_type",d._options,y),d.reportLog(o.bT.ONE_EVENT,y,h)}),(0,a._x)(this,"onOneTemp",function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.av.UNSPECIFIED;if((0,m.cM)("onOneTemp>>",!d._templog),!!d._templog){var r=d.player,i=d.playlogs,s=d.pauseLog,u=d.errorLog,c=d.resLogs,l=d.watchDur,f=(0,a.Zj)((0,a.Zj)((0,a.Zj)({local_time:new Date().getTime()},d._templog),{},{end_state:n,v:d.vid,initial_type:d.initial_type,pt:d.pt,vt:d.vt,lt:d.lt,fvt:d.fvt,bc:d.bc,bu_acu_t:d.bu_acu_t>o.bB?0:d.bu_acu_t,pause_acu_t:s.pause_acu_t,cur_play_pos:d.cur_play_pos,watch_dur:l>o.bB?0:l,finish:d.finish,errt:u.errt,errc:u.errc,vd:d.vd,df:d.resolution,lf:c.lf,br:i.br,fbrt:i.fbrt,try_err_c:u.try_err_c,accu_errc:u.accu_errc,dash_break:2===r.dashBufferBreak?1:0,bufs:(0,m.LQ)(d.buffers.allBuffer),vs:c.vs,vds:c.vds,vps:c.vps},d.buffers.curBuffer),{},{degrade:i.degrade});0!==d.vt&&(f.et=(0,m.L8)()),["drm_type","dynamic_type"].forEach(function(n){d.addIfExist(n,d._options,f)}),d.reportLog(o.bT.ONE_TEMP,f,0),d._templog=null}}),this.player=r,void 0===this.player||null===this.player)throw Error("player is ".concat(this.player));if(!!i&&!!i.line_app_id){i.isTask&&(this.task=new y.Z),this.eventQueue=[],this._instanceCreateTime=new Date().getTime(),i.codec_type=i.codec_type||"h264",this._envInfo=i.envInfo||{},this._options=i,this._options.maxQueueCount||(this._options.maxQueueCount=5),this.line_app_id=parseInt(i.line_app_id,10)||0,this.line_user_id=(i.line_user_id||"").toString(),this.playerCoreVersion=r.version,this.playerVersion=i.playerVersion,this.closeSeekLog=i.closeSeekLog||!1,this.start_time=1e3*(i.start_time||0),this._initial_resolution="",this.__vtype=null,this.__dt="",this._progressInfo=new s.Z,this.resetLoggerParams();try{this.initializeTracker(),this.sendLocalLog(),this.bindEvt(),(0,m.cM)("logger constructor:".concat(this.player.video))}catch(n){}g("playerLoggerReady_".concat(this.vid))}}return(0,a.qH)(n,[{key:"resetLoggerParams",value:function(){(0,m.cM)("resetLoggerParams");var n=this.playlogs?this.playlogs.lc:0;this.playlogs={nt:(0,m.L8)(),vt:0,rt:this.isEnded?(0,m.L8)():0,at:0,pt:0,bu_acu_t:0,bc:0,br:0,fbrt:"",dbc:0,de_bu_acu_t:0,nbc:0,n_bu_acu_t:0,played:[{begin:0,end:-1}],degrade:"none",lc:n},this.degradeLog={bu_acu_t:0,bc:0,watch_dur:0,hasSendEnd:!1},this.buffers={allBuffer:[],curBuffer:{buf_diff:0,buf_s_pos:0,buf_e_pos:0,buf_include:0}},this.netLog={downloadSpeed:0,requestCount:0,connectCost:0,totalSpeed:0,rqCount:0,status:0},this.merror={cdn:[],player:[],playCatch:[],expied:[]},this.exInfo={stall:[]},this._templog=null,this._isOnePlayReport=!1,this.startStep=0,this.bft=0,this._progressInfo.reset(),this._novv={log_pt:(0,m.L8)()},this.initializeLogDatas(),this.initializeUrlLog()}},{key:"setNovv",value:function(n,r){if(!!this._novv&&!(this.fvt>0))n&&(this._novv.errc=n.code,this._novv.errt=n.errorType,this._novv.errorMessage=n.message),this._novv.end_state=r,!this._novv.novv_pt&&(this._novv.novv_pt=(0,m.L8)(),this._novv.novv_lpt=(0,m.L8)()-this._novv.log_pt),this.player&&(this._novv.vtype=this.player.vtype,this.player.novv=this._novv)}},{key:"initializeLogDatas",value:function(){this.startStep=0,this.inWaitingStart=0,this.waitStartTime=0,this.lastVideoTime=0,this._endType="",this._retryCount=0,this.lastOperaTime=-1,this.lastEventTime=-1,this.stallIntervalId=null,this.seekLog={intervalId:0,lastSeekStartTime:(0,m.je)(),seekBefore:0,sat:0,sc:0,buf_include:0},this.resLogs={lastSwitchStartTime:-1,switch_count:0,abr_switch_count:0,initial_resolution:"",final_resolution:"",ldst:0,ldet:0,df:"",lf:"",played:[],bc:0,bu_acu_t:0,sc:0,sat:0,buf:0,lbuf:0,lplayed:0,vs:0,vds:0,vps:0,vis:0,bitrate:0},this.apiLog={code:0,message:"",logid:"",api:"",auth:"",error:{}},this.errorLog={accu_errc:0,try_err_c:0,errt:0,errc:0,fir_errt:0,fir_errc:u.ZP.isSupportMP4?0:1005,last_errors:[],message:""},this.pauseLog={pause_acu_t:0,isPausing:!1,pause_start:0},this.stall={sc:0,startf:0,endf:0,start:0,end:0,cost:0,acc:0},this._playerCreatedTime=0,this.load_state=o.fp.UNKNOWN,this.lv_method=6,this.isSeeking=!1,this.isEnded=!1,this.startStep=0,this.isAutoplay=this.player.config&&this.player.config.autoplay?1:0,this.abrInfo={abr_general_info:{},abr_event_info:{video_switch:[],video_stall:[],video_exit:{}},abr_play_info:{start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[]}},abr_user_info:{cancel_abr:0},abr_init_opts:this.player.config.autoBitrateOpts||{}},this._cacheFile=o.c3.NO_CACHE}},{key:"initSessionId",value:function(){var n="0";try{n=window.localStorage.getItem(E).web_id||"0"}catch(r){n="0"}this._sessionId=(0,m.xv)(n),(0,m.cM)("sessionId ".concat(this._sessionId))}},{key:"initializeTracker",value:function(){var n=this,r=this._options;if(window.__xgplayer_vod_log__)this.tracker=window.__xgplayer_vod_log__;else{this.tracker=window.__xgplayer_vod_log__=new S("tracker");var i=r.channel||"cn",o={app_id:"cn"===(i="va"===i||"sg"===i?i:"cn")?k:1300===k?323254:k,channel:i,log:!1,disable_sdk_monitor:!0,disable_heartbeat:!0};r.channelDomain&&(o.channel_domain=r.channelDomain),o.enable_ab_test=!!r.enableAbTest,this.tracker.init(o)}this.initSessionId();var s=navigator?navigator.hardwareConcurrency:0,c=navigator?navigator.deviceMemory:0;this.commonParams={play_type:0,source_type:"vid",sdk_version:b.Z,pc:this.playerCoreVersion,pv:this.playerVersion,line_app_id:this.line_app_id,line_user_id:this.line_user_id,app_version:r.appVersion||"",platform:u.ZP.isPad?"pad":u.ZP.isMobile?"mobile":"pc",cpu_core:Number(s)||0,memory_size:Number(c)||0,support:(0,u.Cy)(),webdriver:navigator&&navigator.webdriver?1:0,player_sessionid:this.sessionId,web_url:window.location.href,user_agent:navigator.userAgent};var d=r.trackerConfig||{};(0,m.cM)("commonParams ",this.commonParams,d);var l=(0,a.Zj)({evtParams:this.commonParams,disable_auto_pv:!0},d);u.ZP.name&&!u.ZP.isChrome&&!u.ZP.isSafari&&(l.browser=u.ZP.name,u.ZP.appVersion&&(l.browser_version=u.ZP.appVersion)),this.line_user_id&&(l.user_unique_id=this.line_user_id,r.enableTeaWebId||(l.web_id=this.line_user_id)),r.referrer&&(l.referrer=r.referrer,l.referrer_host=(0,m._P)(r.referrer)),r.ext&&Object.keys(r.ext).map(function(i){n.exInfo[i]=r.ext[i]}),(0,m.cM)("trackConfig",l),this.tracker.config(l),this.tracker.start()}},{key:"resetDefiInfo",value:function(){var n=this.resLogs;n.played=[],n.bc=0,n.bu_acu_t=0,n.sc=0,n.sat=0}},{key:"sendLocalLog",value:function(){var n=this,r=h.get();h.remove(),r.map(function(r){Object.keys(r).map(function(i){if((0,m.cM)("sendLocalLog",i,r[i]),n.player){n.player.emit("abLog",i,r[i]);var a=n._options.sendLocalCallback;a&&"function"==typeof a&&a(i,r[i])}n._track(i,r[i])})})}},{key:"_track",value:function(n,r){var i=r.isLeave;delete r.isLeave,"function"==typeof this.tracker?this.tracker(n,r):this._options.enableBeacon&&n===o.bT.ONE_PLAY&&i?this.tracker.beaconEvent(n,r):this.tracker.event(n,r)}},{key:"bindEvt",value:function(){var n=this;this.listeners=[{evt:"ready",handler:this.onReady},{evt:"play",handler:this.onPlay},{evt:"playing",handler:this.onPlaying},{evt:"pause",handler:this.onPause},{evt:"waiting",handler:this.onWaiting},{evt:"playInterfaceInfo",handler:this.onPlayInterfaceInfo},{evt:"ended",handler:this.onEnded},{evt:"loadeddata",handler:this.onLoadeddata},{evt:"loadstart",handler:this.onLoadStart},{evt:"canplay",handler:this.onCanplay},{evt:"progress",handler:this.onVideoProgress},{evt:"autoplay_was_prevented",handler:this.onNotAutoPlay},{evt:"seeking",handler:this.onSeeking},{evt:"seeked",handler:this.onSeeked},{evt:"complete",handler:this.onPlayerInited},{evt:"timeupdate",handler:this.onTimeUpdate},{evt:"mseAttaching",handler:this.onMSEAttaching},{evt:"mseAttached",handler:this.onMSEAttached},{evt:"bufferedChange",handler:this.onBufferedChange},{evt:"beforeDefinitionChange",handler:this.onBeforeDefinitionChange},{evt:"definitionChange",handler:this.onDefinitionChange},{evt:"definitionChangeSuccess",handler:this.onDefiChangeSuccess},{evt:"replayBtnClick",handler:this.onReplayBtnClick},{evt:"initialUrl",handler:this.initializeUrlLog},{evt:"ABR_CHANGE",handler:this.onAbrChange},{evt:"playCatch",handler:this.onPlayCatch},{evt:"log",handler:this.onLog},{evt:"progress_event",handler:this.onProgressEvent},{evt:"logger_next",handler:this.onNext},{evt:"playnext",handler:this.onNext},{evt:"nextEnded",handler:this.onNextEnded},{evt:"media_format_error",handler:this.onMediaFormatError},{evt:"xglog",handler:this.onXgLogWaiting},{evt:"xglog_cache",handler:this.onXgLogCache},{evt:"degrade",handler:this.onDegrade},{evt:"definitionChangeDetail",handler:this.onDefinitionChangeDetail},{evt:"prf_data_size",handler:this.onPrfDataSize}];var r=this.player.config.errorKey;(0,m.cM)(">>>errorKey",r);var i={evt:"error",handler:this.onPlayerError};r&&(i.evt=r),this.listeners.push(i),this.listeners.forEach(function(r){n.player.on(r.evt,r.handler)}),this.bindUnload()}},{key:"_getLogCache",value:function(){var n,r;return(null===(n=this.player)||void 0===n?void 0:n.logCache)||(null===(r=this.player)||void 0===r?void 0:r.getLogCache)}},{key:"addIfExist",value:function(n,r,i){if(!!I(r)){var a=r[n];null!=a&&(i[n]=a)}}},{key:"sendSwitchOpera",value:function(n){var r=this._progressInfo,i=r.lastBitrate,a=r.curBitrate,o=r.nextBitrate,s={costTime:0,operaType:"detail_switch",stateBefore:"",stateAfter:"",endType:n},u=null;if("changedetail"===n){if(!i)return;u=i,s.stateBefore=i.definition,s.stateAfter=o.definition}else u=a,s.stateBefore=a.definition,s.stateAfter="";var c={vds:u.cdnSize,pvds:u.pcdnSize,fileid:u.fileid};this.onOneOperator(s,c)}},{key:"changeResolution",value:function(n){var r=n.from,i=n.to,a=n.startTime,o=n.operaType,s=n.abrInfo,u=n.endType,c=this.resLogs;r=(0,m.fC)(r),i=(0,m.fC)(i),c.ldet=(0,m.je)(),c.df=i,c.lf=r,c.final_resolution=i,c.switch_count++;var d=c.ldet-a,l={bc:c.bc,bu_acu_t:c.bu_acu_t,sc:c.sc,sat:c.sat,watch_dur:(0,m.uV)(c.played)};s&&(l.abrInfo=s),this.updateVds(),this.resetDefiInfo(),!this._options.closeResolutionLog&&this.onOneOperator({costTime:d,operaType:o,endType:void 0===u?"":u,stateBefore:r,stateAfter:i},l,0)}},{key:"getLastInterval",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=r[n],o=(0,m.je)();return i&&(r[n]=o),-1===a?-1:o-a}},{key:"updateSeekPt",value:function(n){return this.getLastInterval("lastSeekStartTime",this.seekLog,n)}},{key:"_reportInvalidVV",value:function(n){return!!this._isInvaidVV()&&(this.onOneError({endState:n,errorType:9998,code:-1,url:this.player.currentSrc,headers:{}},0),this._isOnePlayReport=!0,!0)}},{key:"_isInvaidVV",value:function(){return 0===this.vt&&-1===this.curStatus}},{key:"bindUnload",value:function(){u.ZP.isPC?window.addEventListener("beforeunload",this.onUnload):(u.ZP.isMobile||u.ZP.isPad)&&window.addEventListener("pagehide",this.onUnload),document.addEventListener("visibilitychange",this.onVisibilitychange),this.player.once("destroy",this.onDestroy)}},{key:"clearTimers",value:function(){var n=this.seekLog;n.intervalId&&window.clearTimeout(n.intervalId),this.stallIntervalId&&window.clearTimeout(this.stallIntervalId)}},{key:"sendDegradeLog",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playCatch",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,m.cM)("sendDegradeLog",n,r,i);var s=this.degradeLog;if(!s.hasSendEnd&&("playCatch_end"!==n||"none"!==r)){"playCatch_end"===n&&(s.hasSendEnd=!0);var u=this.bu_acu_t-s.bu_acu_t;this.onOneEvent({costTime:this.vd,vid:this.vid,end_type:n,cur_play_pos:this.player.currentTime,cdn_url:i.url},(0,a.Zj)({degrade:r,vt:this.vt,pt:this.pt,fvt:this.fvt,bc:this.bc-s.bc,bu_acu_t:u>o.bB?0:u,watch_dur:this.watchDur-s.watch_dur},i),0)}}},{key:"_getFullScreenType",value:function(){return this.player.isFullscreen?o.UK.FULLSCREEN_TYPE:this.player.isCssfullScreen?o.UK.CSS:o.UK.NO_FULLSCREEN}},{key:"getBufferTime",value:function(n){var r=0,i=0,a=n.video&&n.video.buffered;if(a){for(var o=a.length,s=0,u=0;u<o;u++)s+=a.end(u)-a.start(u);r=i=1e3*s}return{video:r,audio:i}}},{key:"updateAbrInfo",value:function(n,r,i){n.abr_general_info=r.generalInfo,n.abr_event_info.video_exit={local_time_ms:new Date().getTime(),buffer_length:r.bufferLength,internet_speed:r.downloadSpeed,now_bitrate:r.nowBitrate,play_speed:i},r.getAbrPlayInfo&&(n.abr_play_info=r.getAbrPlayInfo())}},{key:"getPerformance",value:function(){return this.player.performance||{}}},{key:"setExt",value:function(){var n=this,r=this.player.ext||{};r.performance&&delete r.performance,Object.keys(r).map(function(i){"performance"!==i&&(n.exInfo[i]=r[i])})}},{key:"onOneOperator",value:function(n){var r=n.costTime,i=n.operaType,a=n.stateBefore,s=n.stateAfter,u=n.endType,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,l=this.getLastInterval("lastOperaTime"),f={local_time:new Date().getTime(),v:this.vid,opera_type:i,state_before:a,state_after:s,cost_time:r,end_type:u||this.end_type,cdn_url:this.url,resolution:this.resolution,last_interval:l,bufs:(0,m.LQ)(this.buffers.allBuffer),cur_play_pos:this.cur_play_pos,retry_count:this._retryCount};"seek"===i&&(f.buf_include=this.seekLog.buf_include,this.seekLog.buf_include=0);var h=this.player;h&&h.dashState&&(f.dash_state=this.player.dashState),Object.keys(c).forEach(function(n){f[n]=c[n]}),this.addIfExist("drm_type",this._options,f),this.reportLog(o.bT.ONE_OPERA,f,d)}},{key:"onOneError",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorType:0,code:0,url:"",headers:{},costTime:0,vid:"",message:"",preload_hit:0,preload_cached:0,interval_time:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,m.cM)("onOneError",r);var u=this.errorLog,c=this.apiLog,d=this.resLogs,l=this.player,f=this.playlogs,h=(0,m.xV)(r.headers||{}),p=this.getPerformance(),v=r.code>0?0-r.code:r.code;this.setExt();var g=this._getCompatibilityInfo();this.setNovv(r,r.endState||o.av.ERROR);var _=(0,a.Zj)((0,a.Zj)((0,a.Zj)({v:r.vid||this.vid,video_pos:this.cur_play_pos,local_time:new Date().getTime(),cost_time:r&&r.costTime?r.costTime:0,errt:r.errorType,errc:v,es:this.es,cdn_url:r.url||this.url,bufs:(0,m.LQ)(this.buffers.allBuffer),resolution:d.final_resolution,last_errors:u.last_errors.join(";"),vsc:c.vsc,vsc_message:r.message||c.vsc_message,server_ip:h.x_response_sinfo||0,initial_url:this.initial_url,initial_host:this.initial_host},h),{},{cur_play_pos:this.cur_play_pos},this.buffers.curBuffer),{},{degrade:f.degrade,end_state:r.endState||o.av.ERROR,preload_hit:r.preload_hit||0,preload_cached:r.preload_cached||0,ex:(0,m.LQ)(this.exInfo),pref:(0,m.LQ)(p),video_ready_s:this.videoReadyState,interval_time:r.interval_time||0},g);l&&l.dashState&&(_.dash_state=l.dashState);var y=this.player.currentSrc,b=(0,m.ky)(y)?(0,m.ky)(r.url)?this.initial_url:r.url:y,A={connectTime:0,status:0,statusText:"",isexpired:0,isBlob:(0,m.ky)(y)?1:0};if(s&&"String"===(0,m.kM)(b)){var I={};(0,m.vR)(b,{range:"0-8",timeout:2e3}).then(function(n){(0,m.cM)("getXhr>>check result ",n);var r=(0,m.xV)(n.headers||{});_.server_ip=r.x_response_sinfo,I=(0,a.Zj)((0,a.Zj)({},A),{},{statusText:n.statusText||"",status:n.status||0,connectTime:0|n.connectTime,sinfo:r.x_response_sinfo||"",cinfo:r.x_response_cinfo||""})}).catch(function(n){I=(0,a.Zj)((0,a.Zj)({},A),{},{statusText:-2===n.status?"timeout":"error",status:n.status})}).finally(function(){var r=(0,m.qP)(b);I.isexpired=r,_.net=(0,m.LQ)(I),n.reportLog(o.bT.ONE_ERROR,_,i)})}else _.net=(0,m.LQ)(A),this.reportLog(o.bT.ONE_ERROR,_,i)}},{key:"_getCompatibilityInfo",value:function(){var n=(0,u._M)();return{is_spider:u.ZP.isSpider?1:0,is_support_mp4:u.ZP.isSupportMP4?1:0,is_support_hevc:(0,u.G9)()?1:0,is_support_mse_mp4:n.support?1:0,support_mse_mp4:n.message}}},{key:"reportLog",value:function(r,i,a){var s=this,c=this._options,d=this.player.ABTestTag,l=this.commonParams;i.dynamic_type=this.dynamicType;var f="Array"===(0,m.kM)(c.absdkVersion)?c.absdkVersion.join(","):c.absdkVersion;i.absdkVersion=f||n.AB_SDK_VERSION,null!=d&&(i.abtest_tag=d);var p=this._options;i.codec_type=this.codecType,I(p)&&(o.qC.forEach(function(n){s.addIfExist(n,p,i)}),Object.keys(l).forEach(function(n){s.addIfExist(n,l,i)}),i.vtype=this.vtype),i.env_info=(0,m.LQ)(this._envInfo||{}),i.support=(0,u.Cy)(),i.visible=(0,m.ab)();var v=function(){if(1===a){var n={};n[r]=i,h.set(n);return}if(2===a){s.addEventsQueue(r,i);return}s.player&&s.player.emit("abLog",r,i),s._track(r,i)};if("function"==typeof c.onReportLog){var g=c.onReportLog(r,i);null!=g&&g.then?g.finally(function(){return v()}):v()}else v()}},{key:"addEventsQueue",value:function(n,r){this.eventQueue.push({event:n,params:r}),this.eventQueue.length>=this._options.maxQueueCount&&this.sendEventsQueue()}},{key:"sendEventsQueue",value:function(){for(;this.eventQueue.length>0;){var n=this.eventQueue.pop();this._track(n.event,n.params)}}},{key:"startWaitingStatus",value:function(n,r){this.appendStallInfo("start",n),this.updateCurBuffer("startWaitingStatus"),this.onOneEvent({costTime:r,end_type:"waitstart"},{},2)}},{key:"triggerTask",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",r=arguments.length>1?arguments[1]:void 0;(0,m.cM)("triggerTask>>",n),r=r||this.player.src,!(0,m.LM)(r)&&this.vtype.indexOf("MP4")>-1&&this.task&&this.task.trigger(r,n)}},{key:"appendStallInfo",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;!this.exInfo.stall&&(this.exInfo.stall=[]);var a=this.exInfo.stall;if("start"===n){a.length>6&&a.splice(0,a.length-6);var o=this.buffers.curBuffer;a.push({start:r,end:-1,endType:"waitstart",cost:0,cur:this.cur_play_pos,buf_s:o.buf_s_pos,buf_e:o.buf_e_pos,buf_i:o.buf_include})}else if("end"===n){var s=a.length-1;if(s<0)return;a[s].end<0&&(a[s].end=r,a[s].endType=i,a[s].cost=r-a[s].start)}(0,m.cM)("appendStallInfo",a)}},{key:"suspendWaitingStatus",value:function(n){var r=(0,m.je)(),i=this.playlogs,a=this.resLogs,s=this.stall,u=this.inWaitingStart;if(!(u<=0)&&!this.isSeeking&&!(i.vt<=0)){if((0,m.cM)("suspendWaitingStatus>>".concat(n,"|costTime:").concat(r-u," isSeeking:").concat(this.isSeeking)),this.appendStallInfo("end",r,n),r-u>o.bJ){var c=r-this.inWaitingStart;if(i.bc++,this.checkInBuffer(this.player.currentTime)?(i.de_bu_acu_t+=c,i.dbc++):(i.nbc++,i.n_bu_acu_t+=c),a.bc++,i.bu_acu_t+=c,a.bu_acu_t+=c,s.end=this.cur_play_pos,s.cost=c,s.acc+=s.cost,1===s.sc&&(s.endf=this.cur_play_pos),this.player.abrInstance&&!this.isSeeking&&this.playlogs.vt){var d=this.player.abrInstance;this.abrInfo.abr_event_info.video_stall.push({local_time_ms:new Date().getTime(),stall_duration:parseFloat((c/1e3).toFixed(2)),buffer_length:d.bufferLength,internet_speed:d.downloadSpeed,now_bitrate:d.nowBitrate,play_speed:this.player.playbackRate,is_abr:d.isCurrentInAbr?1:0})}this.onOneEvent({costTime:c,end_type:"waitend_".concat(n)||"waitend"},{},2)}this._endType="",this.load_state=o.fp.PLAYABLE,this.inWaitingStart=0,this.waitStartTime=0,window.clearTimeout(this.stallIntervalId),this.stallIntervalId=null}}},{key:"suspendSeekStatus",value:function(n){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!!this.isSeeking){var i=this.seekLog,a=this.resLogs,s=this.player,u=(0,m.je)()-i.lastSeekStartTime;(0,m.cM)("suspendSeekStatus>>","".concat(n," currentTime:").concat(s.currentTime," costTime:").concat(u," sat:").concat(i.sat," resLogs.sat:").concat(a.sat)),i.intervalId&&window.clearTimeout(i.intervalId),i.intervalId=null,this.isSeeking=!1;var c=this._endType="seek",d=i.seekBefore,l=(s.currentTime||0).toString();i.sc++,i.sat+=u>o.YL?0:u,a.sc++,a.sat+=u>o.YL?0:u,u>o.YL&&(u=o.YL),this.updateSeekPt(!0),!this.closeSeekLog&&r&&this.onOneOperator({costTime:u,operaType:c,stateBefore:d,stateAfter:l,endType:n})}}},{key:"setPt",value:function(){var n=this.playlogs;this.startStep=1,!n.pt&&this.player.currentTime&&(this.isSeeking=!0),!n.pt&&(n.pt=(0,m.L8)(),(0,m.cM)("setPt","init pt :".concat(n.pt,", document.visibilityState:").concat(document.visibilityState)))}},{key:"setVt",value:function(){var n=this.playlogs;1===this.startStep&&(!n.vt&&(n.vt=(0,m.L8)(),(0,m.cM)("setVt: first frame inited","vt-pt:".concat(n.vt-n.pt," vt-nt:").concat(n.vt-n.nt))),this.startStep=2)}},{key:"setBr",value:function(n){var r=this.playlogs;r.vt>0&&(0===r.br&&(r.fbrt=n||""),r.br++)}},{key:"codecType",get:function(){var n=this.player;return n&&n.config&&n.config.codecType?n.config.codecType:this._options.codec_type||"h264"}},{key:"url",get:function(){var n=this.player;return n&&n.config?n.config.url:""}},{key:"vid",get:function(){var n=this.player;return n&&n.config?n.config.vid:""}},{key:"bc",get:function(){return this.playlogs.bc}},{key:"bu_acu_t",get:function(){var n=this.playlogs.bu_acu_t;return n>o.bB?0:n}},{key:"pt",get:function(){return this.playlogs.pt||(0,m.L8)()}},{key:"vt",get:function(){var n=this.playlogs,r=n.vt;return n.pt>0?r:0}},{key:"fvt",get:function(){var n=this.playlogs,r=n.vt,i=n.pt,a=0;return r>0&&i>0&&(a=parseInt(r-i,10)),a>o.T3?o.T3:a}},{key:"nvt",get:function(){var n=this.playlogs,r=n.vt,i=n.nt;return r>0&&i>0?parseInt(r-i,10):0}},{key:"getFrameInfo",value:function(){if(!this.player||!this.player.videoFrameInfo)return{f_total:0,drop_count:0,drop_rate:0,corrupted:0};var n=this.player.videoFrameInfo,r=n.dropped,i=n.corrupted,a=n.droppedRate;return{f_total:n.total,drop_count:r,drop_rate:a,corrupted:i}}},{key:"vd",get:function(){var n=this.player;return n.duration&&"number"==typeof n.duration&&n.duration>0?parseInt(1e3*n.duration,10):n.config.duration&&"number"==typeof n.config.duration?parseInt(1e3*n.config.duration,10):0}},{key:"cur_play_pos",get:function(){return parseInt(1e3*this.player.currentTime,10)}},{key:"volume",get:function(){return this.player.volume}},{key:"buffer_time",get:function(){var n=0;try{var r=this.player.getBufferedRange();n=r[1]-r[0]}catch(r){n=0}return n}},{key:"player_created_t",get:function(){return this._playerCreatedTime}},{key:"playbackRate",get:function(){return this.player.playbackRate}},{key:"mute",get:function(){return this.player.muted?0:1}},{key:"videoWidth",get:function(){var n=this.player;return n&&n.video?n.video.videoWidth:0}},{key:"videoHeight",get:function(){var n=this.player;return n&&n.video?n.video.videoHeight:0}},{key:"preload",get:function(){var n=this.player;return!!n&&!!n.video&&n.video.preload}},{key:"initial_url",get:function(){var n=this.player.currentSrc;return n.indexOf("blob:")>-1&&this.urlLog.initial_url?this.urlLog.initial_url:(0,m.LM)(n)?"":n}},{key:"initial_host",get:function(){var n=this.player.currentSrc;return n.indexOf("blob:")>-1&&this.urlLog.initial_host?this.urlLog.initial_host:(0,m._P)((0,m.LM)(n)?"":n)}},{key:"curHeaders",get:function(){var n=this.player,r=this.task;if(n&&n.__dash__&&n.__dash__.curReqVideoSegInfo){var i=n.__dash__.curReqVideoSegInfo.headers||{};return(0,m.xV)(i)}return r?r.headers:{}}},{key:"curStatus",get:function(){var n=this.task,r=this.vtype,i=this.netLog;return r.indexOf("MP4")>-1?n?n.status:0:i.status}},{key:"play_type",get:function(){return 0}},{key:"resolution",get:function(){var n=this.player.curDefinition;return n?"".concat(n.definition):this.resLogs.df}},{key:"sessionId",get:function(){return this._sessionId}},{key:"finish",get:function(){return this.isEnded?1:0}},{key:"end_type",get:function(){return this._endType}},{key:"avgSpeed",get:function(){return this.player&&this.player.avgSpeed?this.player.avgSpeed:0}},{key:"realSpeed",get:function(){return this.player&&this.player.realTimeSpeed?this.player.realTimeSpeed:0}},{key:"mp4MseOpLength",get:function(){if(!this.player||!this.player.plugins)return -1;var n=this.player.plugins.mp4encryptplayer;return n?n.opQueueLen||0:-1}},{key:"mp4LoadSegmentTimeRange",get:function(){if(!this.player||!this.player.plugins)return"";var n=this.player.plugins.mp4encryptplayer;return n?n.loadSegmentTimeRange.join(","):""}},{key:"preLoadData",get:function(){if(!this.player||!this.player.plugins)return[];var n=this.player.plugins.mp4encryptplayer;if(n&&n.preLoadData)return{hit:1,duration:n.preLoadData.duration,length:n.preLoadData.byteLength};var r=this.player.stat||{};if(r.preLoadData){var i=r.preLoadData.length;return{hit:i>0,length:i}}return{hit:0,duration:0,length:0}}},{key:"preloadState",get:function(){if(!this.player||!this.player.plugins)return 0;if(void 0!==this.player.preloadState)return this.player.preloadState||0;var n=this.player.plugins.mp4encryptplayer;return n&&n.preloadState?n.preloadState:0}},{key:"curBitrate",get:function(){var n=this.player,r=n.config,i=n.curDefinition;return i&&i.bitrate?i.bitrate:r.defaultBitrate?r.defaultBitrate:0}},{key:"videoReadyState",get:function(){var n=this.player;return n&&n.video?n.video.readyState:-1}},{key:"videoSeeking",get:function(){var n=this.player;return n&&n.video&&n.video.seeking?1:0}},{key:"videoPaused",get:function(){var n=this.player;return n&&n.video&&n.video.paused?1:0}},{key:"switchResolutionCount",get:function(){return this.resLogs.switch_count}},{key:"isError",get:function(){return this.player._isError||this.player.video.error}},{key:"isPlaying",get:function(){return(0,m.pv)(this.player.root,"xgplayer-playing")}},{key:"isStop",get:function(){return(0,m.pv)(this.player.root,"xgplayer-ended")||(0,m.pv)(this.player.root,"xgplayer-nostart")}},{key:"isPause",get:function(){return(0,m.pv)(this.player.root,"xgplayer-pause")}},{key:"isLoading",get:function(){return(0,m.pv)(this.player.root,"xgplayer-isloading")}},{key:"es",get:function(){return this.isPlaying?"playing":"beforePlay"}},{key:"lt",get:function(){var n=0;return 0===this.vt&&((0,m.cM)("lt init",this.playlogs.lt),n=(0,m.L8)()),n}},{key:"lpt",get:function(){return this.lt?this.lt-this.pt:0}},{key:"playback_state",get:function(){return this.isError?o.kU.ERROR:this.isStop?o.kU.STOP:this.isPause?o.kU.PAUSE:this.isLoading?o.kU.LOADING:o.kU.PLAYING}},{key:"is_start_play_automatically",get:function(){return"".concat(this.isAutoplay)}},{key:"watchDur",get:function(){var n=this.player,r=this.playlogs,i=n.cumulateTime?n.cumulateTime:(0,m.uV)(r.played);return i>=0?i>o.bB?o.bB:i:0}},{key:"vtype",get:function(){if(this.__vtype)return this.__vtype;var n=this.player?this.player.vtype||this.player.config.vtype:"";return n||(this.player.dash?"DASH":this._options.vtype||"MP4")},set:function(n){this.__vtype=n}},{key:"envInfo",get:function(){return this._envInfo},set:function(n){if(!!n)this._envInfo=n}},{key:"getPlayerExt",value:function(){var n=this.player.ext;if(n)return n}},{key:"watingCost",get:function(){if(!(this.inWaitingStart>0))return 0;var n=(0,m.je)()-this.inWaitingStart;return n>o.YL?0:n}},{key:"videoNetworkState",get:function(){var n=this.player;return n&&n.video?n.video.networkState:-1}},{key:"eagleid",get:function(){var n=this.player;return n&&n.__dash__&&n.__dash__.curReqVideoSegInfo?(n.__dash__.curReqVideoSegInfo.headers||{}).eagleid:""}},{key:"initial_type",get:function(){var n=this.player.config||{};return n&&n.vodLogOpts&&void 0!==n.vodLogOpts.currentDashType?parseInt(n.vodLogOpts.currentDashType,10):-1}},{key:"dynamicType",get:function(){var n=this.player;return this.__dt?this.__dt:n&&n.__dash__&&n.__dash__.dash&&n.__dash__.dash.mpd?(this.__dt=n.__dash__.dash.mpd.dashType,this.__dt):""}},{key:"updateBuffers",value:function(){var n=this.player.buffered,r=[];if(!n||n.length<1){this.buffers.allBuffer=[];return}for(var i=0;i<n.length;i++){var a=parseInt(1e3*n.start(i),10),o=parseInt(1e3*n.end(i),10);r.push({s:a,e:o})}this.buffers.allBuffer=r}},{key:"updateCurBuffer",value:function(n){var r=this.player,i=r.buffered,a=r.currentTime,o={buf_s_pos:0,buf_e_pos:0,buf_include:0,buf_diff:0};if(!i||i.length<1)return o;for(var s=-1,u=-1,c=parseInt(1e3*a,10),d=i.length-1;d>-1;d--){var l=parseInt(1e3*i.start(d),10),f=parseInt(1e3*i.end(d),10);if(c>=l&&c<=f){o.buf_include=1,o.buf_s_pos=l,o.buf_e_pos=f,o.buf_diff=f-c;break}c<l&&(s<0||l-c<s)?(s=l-c,u=d):c>f&&(s<0||c-f<s)&&(s=c-f,u=d)}1!==o.buf_include&&(u<0&&(u=i.length-1),o.buf_s_pos=parseInt(1e3*i.start(u),10),o.buf_e_pos=parseInt(1e3*i.end(u),10)),this.buffers.curBuffer=o}},{key:"checkInBuffer",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.player.buffered;if(!i)return!1;n=parseInt(1e3*n,10);for(var a=0;a<i.length;a++){var o=parseInt(1e3*i.start(a),10),s=parseInt(1e3*i.end(a),10)+r;if(n>o&&n<s)return!0}return!1}},{key:"getPCDNStat",value:function(){if(!this.player||!this.player.pcdnVVStat)return{};var n=this.player.pcdnVVStat,r=n.try_req_num,i=n.req_node_succ,o=n.conn_req_num,s=n.has_ret_node,u=n.conn_fail_num,c=n.conn_jump_num,d=(0,a.Kd)(n,A);return(0,a.Zj)({try_req:r,req_succ:i,has_ret:s,conn_req:o,conn_fail:u,conn_jump:c},d)}},{key:"updateVideoSize",value:function(){var n=this._options,r=this.player,i=this.resLogs,a=0,o=0;if(r.__dash__&&r.__dash__.dash&&r.__dash__.dash.mpd.mediaList){var s=r.__dash__.dash.mpd.mediaList.video,u=s[s.selectedIdx];(0,m.cM)("updateVideoSize》》videoItem",u),o=u?u.bitrate||u.bandwidth:0,a=u?u.size:0}else{var c=this.player.curDefinition;c?(o=c.bitrate||r.config.bitrate||0,a=parseInt(c.bitrate*r.duration/8,10)):(a=n.videoSize||r.config.videoSize||0,o=n.bitrate||r.config.bitrate||0)}(0,m.cM)("updateVideoSize","bitrate:".concat(o,", vs:").concat(a)),a&&(i.vs=a,i.vis=parseInt(a/r.duration,10),i.bitrate=o||i.vis)}},{key:"updateVds",value:function(){var n=this.resLogs,r=this.playlogs,i=this.player;if(0===n.vis){(0,m.cM)("updateVds","vis:".concat(n.vis));return}for(var a=parseInt((0,m.uV)(r.played)/1e3,10),o=i.buffered,s=0,u=0;u<o.length;u++)s+=parseInt(o.end(u)-o.start(u),10);(0,m.cM)("updateVds","pdur:".concat(a," bdur:").concat(s," \n         lbuf:").concat(n.lbuf," lplayed:").concat(n.lplayed," bitrate: ").concat(n.bitrate," vis:").concat(n.vis," vs:").concat(n.vs)),n.lplayed=a,n.lbuf=s}},{key:"encryptedInfo",get:function(){return this.player.encryptedInfo||{encryptedType:0}}}],[{key:"TEA_ID",get:function(){return k},set:function(n){k=n,E="__tea_cache_tokens_".concat(k)}},{key:"AB_SDK_VERSION",get:function(){return T},set:function(n){T="Array"===(0,m.kM)(n)?n.join(","):n}},{key:"Collector",set:function(n){S=n}},{key:"defaultConfig",value:function(){return{line_app_id:"",line_user_id:"",isTask:!1,codec_type:"",playerCoreVersion:"",playerVersion:"",start_time:0,maxQueueCount:5,channel:"cn",channelDomain:"",absdkVersion:"",checkByInnerLog:!0,drm_type:0,vtype:"MP4",tag:"普通视频",subtag:"",dynamic_type:"",sendLocalCallback:function(){},disableLocalCache:!1,closeResolutionLog:!1,closeSeekLog:!1,needXhrCheck:!1,trackerConfig:{},envInfo:{},enableTeaWebId:!1,enableBeacon:!1}}}])}()},359101:function(n,r,i){"use strict";i.d(r,{Vk:function(){return u}}),i("466951");var a=i("229813");i("110617"),i("675373");var o=i("357289"),s=null;function u(n,r){return new Promise(function(i,u){s||(s=new o.Z),s.onmessage=function(n){!r.keepWorkerAlive&&(s.terminate(),s=null),i(n.data)},s.postMessage({type:"cmd",data:(0,a.Zj)({type:"perfReport",url:n},r)})})}i("836654"),i("429532"),i("819117"),i("826893")},295542:function(n,r,i){"use strict";i.d(r,{Z:function(){return d}});var a,o=i(452006);i(836654),i(110617),i(742611);var s=i(663153),u=i(855381),c={FIXED:"FIXED",AUTO:"AUTO"};var d=(0,o.qH)(function n(r,i){var a=this;(0,o.PA)(this,n),this.bitrateMap={},this.defIdMap={},this._startPlay=!1,this.canplayHandler=function(){a._startPlay=!0},this.onAbrChange=function(n){var r=n.prevBitrate,i=n.curBitrate,o=a.pluginInst.player,s=a.bitrateMap[r],u=a.bitrateMap[i],c=s?s.definition:"",d=null!=u&&u.definition?u.definition:c;if(c!==d&&!!a._startPlay)a._abrSwitchHandler(u),o.emit("ABR_CHANGE",{prev:c,cur:d,prevName:null==s?void 0:s.definitionName,curName:null==u?void 0:u.definitionName})},this.onAutoDescChange=function(n){var r=n.definition,i=n.reset,o=n.fps,s=n.item;a.updateAutoDefiDesc(r,i,o,s)};var s=r.player;this.pluginInst=r;var u=this.pluginInst.config.autoBitrateOpts||{};this.isPlayAutoDefi=!!u.isPlayAutoDefi,this.isOpenAutoDefi=!!u.isOpenAutoDefi,this.isCurrentAutoDefi=this.isOpenAutoDefi&&this.isPlayAutoDefi,this._abrSwitchHandler=i,s.once("playing",this.canplayHandler)},[{key:"init",value:(a=(0,o.x)((0,o.l5)().mark(function n(r){var i,a,d,l;return(0,o.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isOpenAutoDefi){n.next=2;break}return n.abrupt("return",{type:c.FIXED});case 2:return a=(i=this.pluginInst).player,d=i.playerConfig,l=i.config,a.on(s._c.UPDATE_AUTO_DESC,this.onAutoDescChange),this.bitrateMap={},this.defIdMap={},this.abrInstance=new s.ZP(a,l,0,{dynamic_video_list:d.definition.list.concat()},5e3,{logger:u.cM,openLog:u.i5}),n.next=9,this.abrInstance.init(r);case 9:a.on(s._c.ABR_CHANGE,this.onAbrChange),this.abrInstance&&(this.abrInstance.isCurrentInAbr=this.isCurrentAutoDefi);case 11:case"end":return n.stop()}},n,this)})),function(n){return a.apply(this,arguments)})},{key:"execute",value:function(){var n,r=null===(n=this.abrInstance)||void 0===n?void 0:n.execute();return{bitrate:r,type:-1===r?c.FIXED:c.AUTO}}},{key:"updateBitrate",value:function(n){var r;null===(r=this.abrInstance)||void 0===r||r.updateBitrate(n)}},{key:"updateCurrentHDRStatus",value:function(n){this.abrInstance&&(this.abrInstance.isCurrentHDR=!!n)}},{key:"enable",value:function(){this.isCurrentAutoDefi=!0,this.abrInstance&&(this.abrInstance.start(),this.abrInstance.isCurrentInAbr=!0,this.abrInstance.execTimeUpdate(!0))}},{key:"disable",value:function(){if(!!this.abrInstance)this.updateAutoDefiDesc("",!0),this.isCurrentAutoDefi=!1,this.abrInstance.isCurrentInAbr=!1,this.abrInstance.stop(!0)}},{key:"isCurrentInAbr",value:function(){return!!this.abrInstance&&this.abrInstance.isCurrentInAbr}},{key:"updateAutoDefiDesc",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this.pluginInst,s=o.player,u=(o.config.autoBitrateOpts||{}).autoDefiText||"auto";s.emit("ABR_AUTO_DESC_CHANGE",u,r?void 0:n,i,a),!r&&(s._currentDefinitionFromPlayer={definition:"自动 ".concat(n),item:a})}},{key:"updateAbrCacheData",value:function(){var n=this,r=this.pluginInst,i=r.player,a=r.config,o=r.playerConfig,s=a.autoBitrateOpts||{},u=o.definition.list,c=!1;if(u.forEach(function(r){n.bitrateMap[r.bitrate]={url:r.url,definition:r.definition,definitionName:r.text},n.defIdMap[r.definition]={bitrate:r.bitrate,definition:r.definition},("auto"===r.definition||"自动"===r.definition)&&(c=!0)}),this.isOpenAutoDefi&&!c){var d=s.autoDefiText||"auto",l={definition:"自动",bitrate:i.curDefinition.bitrate,text:d,url:"__auto__",selected:this.isPlayAutoDefi,name:"自动",vwidth:i.curDefinition.vwidth,vheight:i.curDefinition.vheight};o.definition.list.push(l)}}},{key:"destroy",value:function(){var n=this.pluginInst.player;if(!!n)n.off(s._c.ABR_CHANGE,this.onAbrChange),n.off("playing",this.canplayHandler),this.abrInstance&&(n.off(s._c.UPDATE_AUTO_DESC,this.onAutoDescChange),this.abrInstance.destroy(),this.abrInstance=void 0)}}])},122174:function(n,r,i){"use strict";i.d(r,{g:function(){return s}});var a=i(336397),o=i(298028),s={onlyInit:!1,useWaterLevel:!1,maxBufferLength:10,minBufferLength:5,tickInSeconds:.2,getLicenseUrl:"",xhrSetup:{},retryCount:1,retryDelay:1e3,timeout:3e3,processMaxGapTime:1/0,preloadCacheType:1,needPreloadRangeList:!1,isOpenPreload:!0,needPreloadCheck:!1,preloadTime:0,preloadMaxCacheCount:0,needAutoBitrate:!0,keyValue:null,drm:null,switchBitRateWay:!1,enableWorker:!1,bufferThreshold:10,removeBufferLen:60,removeBufferAtSeek:!0,resumePlayWaterLevel:2,waitJampBufferMaxCnt:3,waitingInBufferTimeOut:5e3,waitingTimeOut:1e4,notDegradeErrorList:["timeout",403,404],h265Degrade:!1,forceVideoPlay:!1,segmentMinDuration:3,supportHevc:void 0,H264Config:null,reqOptions:{},rangeMaxDuration:15,getRequestOptionsCallback:null,closeDowngrade:!1,loaderType:"fetch",reUseMSE:!1,urlExpireDisableErrorEvent:!1,logCacheConfig:{logCacheLevel:a._.LOG,logMaxSize:204800},noPreloadAddBufferLen:0,enableFPSStuckHandle:!1,loadRangeType:o.TJ.SIZE,timerInWorker:!1,waitingRetrySeekTimes:null,waitingRetryDuration:null,disableInactiveWaitingCheck:!1,alwaysStreamingLoad:!0,enableCusExpiryCheck:!1,enableCheckTrackGap:!1,trackGap:1,reqParams:{},isAddRange:!1,disableRepeatRange:!1,audioGroupingStrategy:2,reuseSecretKey:!1,bindSrcTiming:o.Iv.META_READY,enableMsePatches:!1}},298028:function(n,r,i){"use strict";i.d(r,{Ef:function(){return h},Im:function(){return g},Iv:function(){return A},TJ:function(){return v},XZ:function(){return f},Z1:function(){return k},_X:function(){return y},a1:function(){return d},eT:function(){return u},fD:function(){return o},fp:function(){return b},he:function(){return m},kW:function(){return s},of:function(){return c},sW:function(){return _},tE:function(){return l},zK:function(){return p},zb:function(){return I}}),i(721911);var a,o={MEDIA_EXPIRED:"MEDIA_EXPIRED",INIT_FAIL:"INIT_FAIL",PARSE_ERROR:"PARSE_ERROR",PLAYER_LOG:"PLAYER_LOG",BUFFERED_RESET:"BUFFERED_RESET",MEDIA_LIST:"MEDIA_LIST",FIRST_MET_MUX_NOT_CONTINUE:"FIRST_MET_MUX_NOT_CONTINUE"},s="real_time_speed",u="is unsupported",c="buffer_control",d={WAITING:"waiting",PLAYING:"playing"},l={app_id:6383,sid:5,task_type:1},f=10,h=2,p=10;var v=((a=v||{}).GOP="gop",a.SIZE="size",a.UNMUX="un_mux",a.ONLY_SIZE="only_size",a),g={BUFFER_CONTROLS:"buffer_control"},_="timer_update",y=.2,m=5,b={PRELOAD_ERROR:"PRELOAD_ERROR",PRELOAD_CHECK:"PRELOAD_CHECK",PRELOAD_OK:"PRELOAD_OK",PRELOAD_MATCH:"PRELOAD_MATCH",USER_DEFI_CHECK:"USER_DEFI_CHECK"},A={META_READY:"meta_ready",INIT:"init"},I=[{range:[0,1800],time:5e3},{range:[1800,3600],time:1e4},{range:[3600,7200],time:15e3},{range:[7200,18e3],time:2e4},{range:[18e3,Number.MAX_VALUE],time:3e4}],k="progress dataLen not match"},843544:function(n,r,i){"use strict";i.d(r,{He:function(){return u},Xz:function(){return s},xj:function(){return o}}),i(98601),i(110617),i(742611);var a={"x-cache":"x_cache","x-response-sinfo":"server_ip","x-response-cinfo":"x-response-cinfo","content-range":"content-range","content-length":"content-length","content-type":"content-type"};function o(n){var r={};return Object.keys(a).forEach(function(i){var o,s=null==n||null===(o=n.get)||void 0===o?void 0:o.call(n,i);s&&(r[a[i]]=s)}),r}function s(n){var r,i=a["content-range"],o=null==n||null===(r=n.get)||void 0===r?void 0:r.call(n,i);if(o){var s=o.split("/");if(Array.isArray(s)&&2===s.length)return s[1]}return null}function u(n){var r,i=a["content-length"];return(null==n||null===(r=n.get)||void 0===r?void 0:r.call(n,i))||null}},855381:function(n,r,i){"use strict";i.d(r,{XO:function(){return u},cM:function(){return d},i5:function(){return s},qw:function(){return c}}),i(836654);var a={1:"debug",2:"log",3:"warn",4:"error"},o=function(){return function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(n){return!1}}()&&!function(){var n="local_storage_support_test";try{return window.localStorage.setItem(n,"true"),window.localStorage.removeItem(n),!1}catch(n){return!0}}()}(),s=c(),u=function(){if(o)try{return!!window.localStorage.getItem("playertestlog")}catch(n){}return!1}();function c(){if(o)try{return!!window.localStorage.getItem("playerlog")}catch(n){}return!1}function d(n,r,i){var o=a[r];if(o&&null!=n&&n[o]){for(var s=arguments.length,u=Array(s>3?s-3:0),c=3;c<s;c++)u[c-3]=arguments[c];n[o].apply(n,[i].concat(u))}}},422533:function(n,r,i){"use strict";i.d(r,{Z:function(){return c}});var a=i(452006),o=i(879146),s=i.n(o),u=i(487275),c=function(n){function r(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.PA)(this,r),(n=(0,a.$w)(this,r)).options=i,n.worker=new u.Z,n.worker.onmessage=function(r){n.emit(r.data.method,r.data)};var o=n.options,s=o.memoryOpt,c=o.openLog,d=o.supportHevc,l=o.codecType;return n.worker.postMessage({method:"init",id:i.id||0,args:{memoryOpt:s,openLog:c,supportHevc:d,codecType:l}}),n}return(0,a.XW)(r,n),(0,a.qH)(r,[{key:"updateValue",value:function(n){var r,i;null===(r=this.worker)||void 0===r||r.postMessage({method:"updateValue",id:(null===(i=this.options)||void 0===i?void 0:i.id)||0,args:{value:n}})}},{key:"transmux",value:function(n,r,i,a,o,s,u,c,d,l,f,h,p){var v,g=r.buffer;null===(v=this.worker)||void 0===v||v.postMessage({method:"transmux",id:n,buffer:g,args:{start:i,videoIdx:a,audioIdx:o,moov:s,useEME:u,kidValue:c,context:d,videoTrak:l,audioTrak:f,lastUnMuxData:h,pos:p}},h?[g,h.buffer]:[g])}},{key:"reset",value:function(){this.worker&&this.worker.postMessage({method:"reset"})}},{key:"destroy",value:function(){this.worker&&this.worker.postMessage({method:"destroy"}),this.worker&&this.worker.terminate()}}])}(s())},943495:function(n,r){var i;i=0,function(n){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{};function i(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var a=function(n){return n&&n.Math==Math&&n},o=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof r&&r)||function(){return this}()||Function("return this")(),s={},u=function(n){try{return!!n()}catch(n){return!0}},c=!u(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),d={},l={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,h=f&&!l.call({1:2},1);d.f=h?function(n){var r=f(this,n);return!!r&&r.enumerable}:l;var p=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},v={}.toString,g=function(n){return v.call(n).slice(8,-1)},_="".split,y=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(n){return"String"==g(n)?_.call(n,""):Object(n)}:Object,m=function(n){if(null==n)throw TypeError("Can't call method on "+n);return n},b=function(n){return y(m(n))},A=function(n){return"object"==typeof n?null!==n:"function"==typeof n},I=function(n,r){var i,a;if(!A(n))return n;if(r&&"function"==typeof(i=n.toString)&&!A(a=i.call(n))||"function"==typeof(i=n.valueOf)&&!A(a=i.call(n))||!r&&"function"==typeof(i=n.toString)&&!A(a=i.call(n)))return a;throw TypeError("Can't convert object to primitive value")},k=function(n){return Object(m(n))},E={}.hasOwnProperty,T=function(n,r){return E.call(k(n),r)},S=o.document,C=A(S)&&A(S.createElement),x=function(n){return C?S.createElement(n):{}},w=!c&&!u(function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a}),R=Object.getOwnPropertyDescriptor;s.f=c?R:function(n,r){if(n=b(n),r=I(r,!0),w)try{return R(n,r)}catch(n){}if(T(n,r))return p(!d.f.call(n,r),n[r])};var D={},L=function(n){if(!A(n))throw TypeError(String(n)+" is not an object");return n},O=Object.defineProperty;D.f=c?O:function(n,r,i){if(L(n),r=I(r,!0),L(i),w)try{return O(n,r,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(n[r]=i.value),n};var P=c?function(n,r,i){return D.f(n,r,p(1,i))}:function(n,r,i){return n[r]=i,n},B={exports:{}},N=function(n,r){try{P(o,n,r)}catch(i){o[n]=r}return r},M="__core-js_shared__",Z=o[M]||N(M,{}),V=Function.toString;"function"!=typeof Z.inspectSource&&(Z.inspectSource=function(n){return V.call(n)});var U=Z.inspectSource,F=o.WeakMap,j="function"==typeof F&&/native code/.test(U(F)),G={exports:{}};(G.exports=function(n,r){return Z[n]||(Z[n]=void 0!==r?r:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"});var W,Y,H,K=G.exports,X=0,z=Math.random(),q=function(n){return"Symbol("+String(void 0===n?"":n)+")_"+(++X+z).toString(36)},Q=K("keys"),J=function(n){return Q[n]||(Q[n]=q(n))},$={},ee="Object already initialized",et=o.WeakMap;if(j||Z.state){var en=Z.state||(Z.state=new et),er=en.get,ei=en.has,ea=en.set;W=function(n,r){if(ei.call(en,n))throw TypeError(ee);return r.facade=n,ea.call(en,n,r),r},Y=function(n){return er.call(en,n)||{}},H=function(n){return ei.call(en,n)}}else{var eo=J("state");$[eo]=!0,W=function(n,r){if(T(n,eo))throw TypeError(ee);return r.facade=n,P(n,eo,r),r},Y=function(n){return T(n,eo)?n[eo]:{}},H=function(n){return T(n,eo)}}var es={set:W,get:Y,has:H,enforce:function(n){return H(n)?Y(n):W(n,{})},getterFor:function(n){return function(r){var i;if(!A(r)||(i=Y(r)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return i}}},eu=es.get,ec=es.enforce,ed=String(String).split("String");(B.exports=function(n,r,i,a){var s,u=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof r||T(i,"name")||P(i,"name",r),(s=ec(i)).source||(s.source=ed.join("string"==typeof r?r:""))),n!==o?(u?!d&&n[r]&&(c=!0):delete n[r],c?n[r]=i:P(n,r,i)):c?n[r]=i:N(r,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&eu(this).source||U(this)});var el=B.exports,ef=function(n){return"function"==typeof n?n:void 0},eh=function(n,r){return arguments.length<2?ef(o[n])||ef(o[n]):o[n]&&o[n][r]||o[n]&&o[n][r]},ep={},ev=Math.ceil,eg=Math.floor,e_=function(n){return isNaN(n=+n)?0:(n>0?eg:ev)(n)},ey=Math.min,em=function(n){return n>0?ey(e_(n),9007199254740991):0},eb=Math.max,eA=Math.min,eI=function(n,r){var i=e_(n);return i<0?eb(i+r,0):eA(i,r)},ek=function(n){return function(r,i,a){var o,s=b(r),u=em(s.length),c=eI(a,u);if(n&&i!=i){for(;u>c;)if((o=s[c++])!=o)return!0}else for(;u>c;c++)if((n||c in s)&&s[c]===i)return n||c||0;return!n&&-1}},eE={includes:ek(!0),indexOf:ek(!1)},eT=eE.indexOf,eS=function(n,r){var i,a=b(n),o=0,s=[];for(i in a)!T($,i)&&T(a,i)&&s.push(i);for(;r.length>o;)T(a,i=r[o++])&&(~eT(s,i)||s.push(i));return s},eC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ex=eC.concat("length","prototype");ep.f=Object.getOwnPropertyNames||function(n){return eS(n,ex)};var ew={};ew.f=Object.getOwnPropertySymbols;var eR=eh("Reflect","ownKeys")||function(n){var r=ep.f(L(n)),i=ew.f;return i?r.concat(i(n)):r},eD=/#|\.prototype\./,eL=function(n,r){var i=eP[eO(n)];return i==eN||i!=eB&&("function"==typeof r?u(r):!!r)},eO=eL.normalize=function(n){return String(n).replace(eD,".").toLowerCase()},eP=eL.data={},eB=eL.NATIVE="N",eN=eL.POLYFILL="P",eM=s.f,eZ=function(n,r){for(var i=eR(r),a=D.f,o=s.f,u=0;u<i.length;u++){var c=i[u];T(n,c)||a(n,c,o(r,c))}},eV=function(n,r){var i,a,s,u,c,d=n.target,l=n.global,f=n.stat;if(i=l?o:f?o[d]||N(d,{}):(o[d]||{}).prototype)for(a in r){if(u=r[a],s=n.noTargetGet?(c=eM(i,a))&&c.value:i[a],!eL(l?a:d+(f?".":"#")+a,n.forced)&&void 0!==s){if(typeof u==typeof s)continue;eZ(u,s)}(n.sham||s&&s.sham)&&P(u,"sham",!0),el(i,a,u,n)}};function eU(){eU=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(n,r,i){n[r]=i.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(n,r,i){return Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),n[r]}try{d({},"")}catch(n){d=function(n,r,i){return n[r]=i}}function l(n,r,i,o){var s=Object.create((r&&r.prototype instanceof p?r:p).prototype);return a(s,"_invoke",{value:function(n,r,i){var a="suspendedStart";return function(o,s){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===o)throw s;return{value:void 0,done:!0}}for(i.method=o,i.arg=s;;){var u=i.delegate;if(u){var c=function n(r,i){var a=i.method,o=r.iterator[a];if(void 0===o)return i.delegate=null,"throw"===a&&r.iterator.return&&(i.method="return",i.arg=void 0,n(r,i),"throw"===i.method)||"return"!==a&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+a+"' method")),h;var s=f(o,r.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,h;var u=s.arg;return u?u.done?(i[r.resultName]=u.value,i.next=r.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,h):u:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,h)}(u,i);if(c){if(c===h)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var d=f(n,r,i);if("normal"===d.type){if(a=i.done?"completed":"suspendedYield",d.arg===h)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(a="completed",i.method="throw",i.arg=d.arg)}}}(n,i,new T(o||[]))}),s}function f(n,r,i){try{return{type:"normal",arg:n.call(r,i)}}catch(n){return{type:"throw",arg:n}}}n.wrap=l;var h={};function p(){}function v(){}function g(){}var _={};d(_,s,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&i.call(m,s)&&(_=m);var b=g.prototype=p.prototype=Object.create(_);function A(n){["next","throw","return"].forEach(function(r){d(n,r,function(n){return this._invoke(r,n)})})}function I(n,r){var o;a(this,"_invoke",{value:function(a,s){function u(){return new r(function(o,u){!function a(o,s,u,c){var d=f(n[o],n,s);if("throw"!==d.type){var l=d.arg,h=l.value;return h&&"object"==typeof h&&i.call(h,"__await")?r.resolve(h.__await).then(function(n){a("next",n,u,c)},function(n){a("throw",n,u,c)}):r.resolve(h).then(function(n){l.value=n,u(l)},function(n){return a("throw",n,u,c)})}c(d.arg)}(a,s,o,u)})}return o=o?o.then(u,u):u()}})}function k(n){var r={tryLoc:n[0]};1 in n&&(r.catchLoc=n[1]),2 in n&&(r.finallyLoc=n[2],r.afterLoc=n[3]),this.tryEntries.push(r)}function E(n){var r=n.completion||{};r.type="normal",delete r.arg,n.completion=r}function T(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(k,this),this.reset(!0)}function S(n){if(n){var r=n[s];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,o=function r(){for(;++a<n.length;)if(i.call(n,a))return r.value=n[a],r.done=!1,r;return r.value=void 0,r.done=!0,r};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=g,a(b,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=d(g,c,"GeneratorFunction"),n.isGeneratorFunction=function(n){var r="function"==typeof n&&n.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,g):(n.__proto__=g,d(n,c,"GeneratorFunction")),n.prototype=Object.create(b),n},n.awrap=function(n){return{__await:n}},A(I.prototype),d(I.prototype,u,function(){return this}),n.AsyncIterator=I,n.async=function(r,i,a,o,s){void 0===s&&(s=Promise);var u=new I(l(r,i,a,o),s);return n.isGeneratorFunction(i)?u:u.next().then(function(n){return n.done?n.value:u.next()})},A(b),d(b,c,"Generator"),d(b,s,function(){return this}),d(b,"toString",function(){return"[object Generator]"}),n.keys=function(n){var r=Object(n),i=[];for(var a in r)i.push(a);return i.reverse(),function n(){for(;i.length;){var a=i.pop();if(a in r)return n.value=a,n.done=!1,n}return n.done=!0,n}},n.values=S,T.prototype={constructor:T,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!n)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function a(i,a){return u.type="throw",u.arg=n,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),d=i.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(n,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===n||"continue"===n)&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var u=s?s.completion:{};return u.type=n,u.arg=r,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(u)},complete:function(n,r){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&r&&(this.next=r),h},finish:function(n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===n)return this.complete(i.completion,i.afterLoc),E(i),h}},catch:function(n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===n){var a=i.completion;if("throw"===a.type){var o=a.arg;E(i)}return o}}throw Error("illegal catch attempt")},delegateYield:function(n,r,i){return this.delegate={iterator:S(n),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},n}function eF(n){return(eF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function ej(n,r,i,a,o,s,u){try{var c=n[s](u),d=c.value}catch(n){return void i(n)}c.done?r(d):Promise.resolve(d).then(a,o)}function eG(n){return function(){var r=this,i=arguments;return new Promise(function(a,o){var s=n.apply(r,i);function u(n){ej(s,a,o,u,c,"next",n)}function c(n){ej(s,a,o,u,c,"throw",n)}u(void 0)})}}function eW(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function")}function eY(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,e$(a.key),a)}}function eH(n,r,i){return r&&eY(n.prototype,r),i&&eY(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function eK(n,r,i){return(r=e$(r))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function eX(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&eq(n,r)}function ez(n){return(ez=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function eq(n,r){return(eq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n})(n,r)}function eQ(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eJ(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var i,a=ez(n);return i=r?Reflect.construct(a,arguments,ez(this).constructor):a.apply(this,arguments),function(n,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return eQ(n)}(this,i)}}function e$(n){var r=function(n,r){if("object"!=typeof n||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(n)}(n,"string");return"symbol"==typeof r?r:String(r)}eV({global:!0},{globalThis:o});var e0,e1,e2=eh("navigator","userAgent")||"",e3=o.process,e7=e3&&e3.versions,e6=e7&&e7.v8;e6?e1=(e0=e6.split("."))[0]<4?1:e0[0]+e0[1]:e2&&(!(e0=e2.match(/Edge\/(\d+)/))||e0[1]>=74)&&(e0=e2.match(/Chrome\/(\d+)/))&&(e1=e0[1]);var e4,e5=e1&&+e1,e8=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())||!Symbol.sham&&e5&&e5<41}),e9=e8&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,te=K("wks"),tt=o.Symbol,tn=e9?tt:tt&&tt.withoutSetter||q,tr=function(n){return T(te,n)&&(e8||"string"==typeof te[n])||(e8&&T(tt,n)?te[n]=tt[n]:te[n]=tn("Symbol."+n)),te[n]},ti=Object.keys||function(n){return eS(n,eC)},ta=c?Object.defineProperties:function(n,r){L(n);for(var i,a=ti(r),o=a.length,s=0;o>s;)D.f(n,i=a[s++],r[i]);return n},to=eh("document","documentElement"),ts="prototype",tu="script",tc=J("IE_PROTO"),td=function(){},tl=function(n){return"<"+tu+">"+n+"</"+tu+">"},tf=function(){try{e4=document.domain&&new ActiveXObject("htmlfile")}catch(n){}tf=e4?((n=e4).write(tl("")),n.close(),r=n.parentWindow.Object,n=null,r):(a=x("iframe"),o="java"+tu+":",a.style.display="none",to.appendChild(a),a.src=String(o),(i=a.contentWindow.document).open(),i.write(tl("document.F=Object")),i.close(),i.F);for(var n,r,i,a,o,s=eC.length;s--;)delete tf[ts][eC[s]];return tf()};$[tc]=!0;var th=Object.create||function(n,r){var i;return null!==n?(td[ts]=L(n),i=new td,td[ts]=null,i[tc]=n):i=tf(),void 0===r?i:ta(i,r)},tp=tr("unscopables"),tv=Array.prototype;null==tv[tp]&&D.f(tv,tp,{configurable:!0,value:th(null)});var tg,t_,ty,tm={},tb=!u(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),tA=J("IE_PROTO"),tI=Object.prototype,tk=tb?Object.getPrototypeOf:function(n){return T(n=k(n),tA)?n[tA]:"function"==typeof n.constructor&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?tI:null},tE=tr("iterator"),tT=!1;[].keys&&("next"in(ty=[].keys())?(t_=tk(tk(ty)))!==Object.prototype&&(tg=t_):tT=!0),(null==tg||u(function(){var n={};return tg[tE].call(n)!==n}))&&(tg={}),T(tg,tE)||P(tg,tE,function(){return this});var tS=tg,tC=tT,tx=D.f,tw=tr("toStringTag"),tR=function(n,r,i){n&&!T(n=i?n:n.prototype,tw)&&tx(n,tw,{configurable:!0,value:r})},tD=function(){return this},tL=function(n){if(!A(n)&&null!==n)throw TypeError("Can't set "+String(n)+" as a prototype");return n},tO=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,i={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),r=i instanceof Array}catch(n){}return function(i,a){return L(i),tL(a),r?n.call(i,a):i.__proto__=a,i}}():void 0),tP=function(n,r,i){var a=r+" Iterator";return n.prototype=th(tS,{next:p(1,i)}),tR(n,a,!1),tm[a]=tD,n},tB=tS,tN=tC,tM=tr("iterator"),tZ="keys",tV="values",tU="entries",tF=function(){return this},tj=function(n,r,i,a,o,s,u){tP(i,r,a);var c,d,l,f=function(n){if(n===o&&_)return _;if(!tN&&n in v)return v[n];switch(n){case tZ:case tV:case tU:return function(){return new i(this,n)}}return function(){return new i(this)}},h=r+" Iterator",p=!1,v=n.prototype,g=v[tM]||v["@@iterator"]||o&&v[o],_=!tN&&g||f(o),y="Array"==r&&v.entries||g;if(y&&(c=tk(y.call(new n)),tB!==Object.prototype&&c.next&&(tk(c)!==tB&&(tO?tO(c,tB):"function"!=typeof c[tM]&&P(c,tM,tF)),tR(c,h,!0))),o==tV&&g&&g.name!==tV&&(p=!0,_=function(){return g.call(this)}),v[tM]!==_&&P(v,tM,_),tm[r]=_,o){if(d={values:f(tV),keys:s?_:f(tZ),entries:f(tU)},u)for(l in d)!tN&&!p&&l in v||el(v,l,d[l]);else eV({target:r,proto:!0,forced:tN||p},d)}return d},tG=function(n){tv[tp][n]=!0},tW="Array Iterator",tY=es.set,tH=es.getterFor(tW),tK=tj(Array,"Array",function(n,r){tY(this,{type:tW,target:b(n),index:0,kind:r})},function(){var n=tH(this),r=n.target,i=n.kind,a=n.index++;return!r||a>=r.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:a,done:!1}:"values"==i?{value:r[a],done:!1}:{value:[a,r[a]],done:!1}},"values");tm.Arguments=tm.Array,tG("keys"),tG("values"),tG("entries");var tX={};tX[tr("toStringTag")]="z";var tz="[object z]"===String(tX),tq=tr("toStringTag"),tQ="Arguments"==g(function(){return arguments}()),tJ=tz?g:function(n){var r,i,a;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(i=function(n,r){try{return n[r]}catch(n){}}(r=Object(n),tq))?i:tQ?g(r):"Object"==(a=g(r))&&"function"==typeof r.callee?"Arguments":a};tz||el(Object.prototype,"toString",tz?({}).toString:function(){return"[object "+tJ(this)+"]"},{unsafe:!0});var t$={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},t0=tr("iterator"),t1=tr("toStringTag"),t2=tK.values;for(var t3 in t$){var t7=o[t3],t6=t7&&t7.prototype;if(t6){if(t6[t0]!==t2)try{P(t6,t0,t2)}catch(n){t6[t0]=t2}if(t6[t1]||P(t6,t1,t3),t$[t3]){for(var t4 in tK)if(t6[t4]!==tK[t4])try{P(t6,t4,tK[t4])}catch(n){t6[t4]=tK[t4]}}}}var t5={exports:{}},t8=tr("iterator"),t9=!1;try{var ne=0,nt={next:function(){return{done:!!ne++}},return:function(){t9=!0}};nt[t8]=function(){return this},Array.from(nt,function(){throw 2})}catch(n){}var nn,nr=function(n,r){if(!r&&!t9)return!1;var i=!1;try{var a={};a[t8]=function(){return{next:function(){return{done:i=!0}}}},n(a)}catch(n){}return i},ni="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,na=D.f,no=o.Int8Array,ns=no&&no.prototype,nu=o.Uint8ClampedArray,nc=nu&&nu.prototype,nd=no&&tk(no),nl=ns&&tk(ns),nf=Object.prototype,nh=nf.isPrototypeOf,np=tr("toStringTag"),nv=q("TYPED_ARRAY_TAG"),ng=ni&&!!tO&&"Opera"!==tJ(o.opera),n_=!1,ny={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},nm={BigInt64Array:8,BigUint64Array:8},nb=function(n){if(!A(n))return!1;var r=tJ(n);return T(ny,r)||T(nm,r)};for(nn in ny)o[nn]||(ng=!1);if((!ng||"function"!=typeof nd||nd===Function.prototype)&&(nd=function(){throw TypeError("Incorrect invocation")},ng))for(nn in ny)o[nn]&&tO(o[nn],nd);if((!ng||!nl||nl===nf)&&(nl=nd.prototype,ng))for(nn in ny)o[nn]&&tO(o[nn].prototype,nl);if(ng&&tk(nc)!==nl&&tO(nc,nl),c&&!T(nl,np))for(nn in n_=!0,na(nl,np,{get:function(){return A(this)?this[nv]:void 0}}),ny)o[nn]&&P(o[nn],nv,nn);var nA={NATIVE_ARRAY_BUFFER_VIEWS:ng,TYPED_ARRAY_TAG:n_&&nv,aTypedArray:function(n){if(nb(n))return n;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(n){if(tO){if(nh.call(nd,n))return n}else for(var r in ny)if(T(ny,nn)){var i=o[r];if(i&&(n===i||nh.call(i,n)))return n}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(n,r,i){if(c){if(i)for(var a in ny){var s=o[a];if(s&&T(s.prototype,n))try{delete s.prototype[n]}catch(n){}}nl[n]&&!i||el(nl,n,i?r:ng&&ns[n]||r)}},exportTypedArrayStaticMethod:function(n,r,i){var a,s;if(c){if(tO){if(i){for(a in ny)if((s=o[a])&&T(s,n))try{delete s[n]}catch(n){}}if(nd[n]&&!i)return;try{return el(nd,n,i?r:ng&&nd[n]||r)}catch(n){}}for(a in ny)(s=o[a])&&(!s[n]||i)&&el(s,n,r)}},isView:function(n){if(!A(n))return!1;var r=tJ(n);return"DataView"===r||T(ny,r)||T(nm,r)},isTypedArray:nb,TypedArray:nd,TypedArrayPrototype:nl},nI=nA.NATIVE_ARRAY_BUFFER_VIEWS,nk=o.ArrayBuffer,nE=o.Int8Array,nT=!nI||!u(function(){nE(1)})||!u(function(){new nE(-1)})||!nr(function(n){new nE,new nE(null),new nE(1.5),new nE(n)},!0)||u(function(){return 1!==new nE(new nk(2),1,void 0).length}),nS=function(n,r,i){for(var a in r)el(n,a,r[a],i);return n},nC=function(n,r,i){if(!(n instanceof r))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return n},nx=function(n){if(void 0===n)return 0;var r=e_(n),i=em(r);if(r!==i)throw RangeError("Wrong length or index");return i},nw=Math.abs,nR=Math.pow,nD=Math.floor,nL=Math.log,nO=Math.LN2,nP=function(n){for(var r=k(this),i=em(r.length),a=arguments.length,o=eI(a>1?arguments[1]:void 0,i),s=a>2?arguments[2]:void 0,u=void 0===s?i:eI(s,i);u>o;)r[o++]=n;return r},nB=function(n,r,i){var a,o,s,u=Array(i),c=8*i-r-1,d=(1<<c)-1,l=d>>1,f=23===r?nR(2,-24)-nR(2,-77):0,h=n<0||0===n&&1/n<0?1:0,p=0;for((n=nw(n))!=n||n===1/0?(o=n!=n?1:0,a=d):(a=nD(nL(n)/nO),n*(s=nR(2,-a))<1&&(a--,s*=2),(n+=a+l>=1?f/s:f*nR(2,1-l))*s>=2&&(a++,s/=2),a+l>=d?(o=0,a=d):a+l>=1?(o=(n*s-1)*nR(2,r),a+=l):(o=n*nR(2,l-1)*nR(2,r),a=0));r>=8;u[p++]=255&o,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;u[p++]=255&a,a/=256,c-=8);return u[--p]|=128*h,u},nN=function(n,r){var i,a=n.length,o=8*a-r-1,s=(1<<o)-1,u=s>>1,c=o-7,d=a-1,l=n[d--],f=127&l;for(l>>=7;c>0;f=256*f+n[d],d--,c-=8);for(i=f&(1<<-c)-1,f>>=-c,c+=r;c>0;i=256*i+n[d],d--,c-=8);if(0===f)f=1-u;else{if(f===s)return i?NaN:l?-Infinity:1/0;i+=nR(2,r),f-=u}return(l?-1:1)*i*nR(2,f-r)},nM=ep.f,nZ=D.f,nV=es.get,nU=es.set,nF="ArrayBuffer",nj="DataView",nG="prototype",nW="Wrong index",nY=o[nF],nH=nY,nK=o[nj],nX=nK&&nK[nG],nz=Object.prototype,nq=o.RangeError,nQ=nB,nJ=nN,n$=function(n){return[255&n]},n0=function(n){return[255&n,n>>8&255]},n1=function(n){return[255&n,n>>8&255,n>>16&255,n>>24&255]},n2=function(n){return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},n3=function(n){return nQ(n,23,4)},n7=function(n){return nQ(n,52,8)},n6=function(n,r){nZ(n[nG],r,{get:function(){return nV(this)[r]}})},n4=function(n,r,i,a){var o=nx(i),s=nV(n);if(o+r>s.byteLength)throw nq(nW);var u=nV(s.buffer).bytes,c=o+s.byteOffset,d=u.slice(c,c+r);return a?d:d.reverse()},n5=function(n,r,i,a,o,s){var u=nx(i),c=nV(n);if(u+r>c.byteLength)throw nq(nW);for(var d=nV(c.buffer).bytes,l=u+c.byteOffset,f=a(+o),h=0;h<r;h++)d[l+h]=f[s?h:r-h-1]};if(ni){if(!u(function(){nY(1)})||!u(function(){new nY(-1)})||u(function(){return new nY,new nY(1.5),new nY(NaN),nY.name!=nF})){for(var n8,n9=(nH=function(n){return nC(this,nH),new nY(nx(n))})[nG]=nY[nG],re=nM(nY),rt=0;re.length>rt;)(n8=re[rt++])in nH||P(nH,n8,nY[n8]);n9.constructor=nH}tO&&tk(nX)!==nz&&tO(nX,nz);var rn=new nK(new nH(2)),rr=nX.setInt8;rn.setInt8(0,2147483648),rn.setInt8(1,2147483649),!rn.getInt8(0)&&rn.getInt8(1)||nS(nX,{setInt8:function(n,r){rr.call(this,n,r<<24>>24)},setUint8:function(n,r){rr.call(this,n,r<<24>>24)}},{unsafe:!0})}else nH=function(n){nC(this,nH,nF);var r=nx(n);nU(this,{bytes:nP.call(Array(r),0),byteLength:r}),c||(this.byteLength=r)},nK=function(n,r,i){nC(this,nK,nj),nC(n,nH,nj);var a=nV(n).byteLength,o=e_(r);if(o<0||o>a)throw nq("Wrong offset");if(o+(i=void 0===i?a-o:em(i))>a)throw nq("Wrong length");nU(this,{buffer:n,byteLength:i,byteOffset:o}),c||(this.buffer=n,this.byteLength=i,this.byteOffset=o)},c&&(n6(nH,"byteLength"),n6(nK,"buffer"),n6(nK,"byteLength"),n6(nK,"byteOffset")),nS(nK[nG],{getInt8:function(n){return n4(this,1,n)[0]<<24>>24},getUint8:function(n){return n4(this,1,n)[0]},getInt16:function(n){var r=n4(this,2,n,arguments.length>1?arguments[1]:void 0);return(r[1]<<8|r[0])<<16>>16},getUint16:function(n){var r=n4(this,2,n,arguments.length>1?arguments[1]:void 0);return r[1]<<8|r[0]},getInt32:function(n){return n2(n4(this,4,n,arguments.length>1?arguments[1]:void 0))},getUint32:function(n){return n2(n4(this,4,n,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(n){return nJ(n4(this,4,n,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(n){return nJ(n4(this,8,n,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(n,r){n5(this,1,n,n$,r)},setUint8:function(n,r){n5(this,1,n,n$,r)},setInt16:function(n,r){n5(this,2,n,n0,r,arguments.length>2?arguments[2]:void 0)},setUint16:function(n,r){n5(this,2,n,n0,r,arguments.length>2?arguments[2]:void 0)},setInt32:function(n,r){n5(this,4,n,n1,r,arguments.length>2?arguments[2]:void 0)},setUint32:function(n,r){n5(this,4,n,n1,r,arguments.length>2?arguments[2]:void 0)},setFloat32:function(n,r){n5(this,4,n,n3,r,arguments.length>2?arguments[2]:void 0)},setFloat64:function(n,r){n5(this,8,n,n7,r,arguments.length>2?arguments[2]:void 0)}});tR(nH,nF),tR(nK,nj);var ri={ArrayBuffer:nH,DataView:nK},ra=function(n){var r=e_(n);if(r<0)throw RangeError("The argument can't be less than 0");return r},ro=function(n,r){var i=ra(n);if(i%r)throw RangeError("Wrong offset");return i},rs=tr("iterator"),ru=function(n){if(null!=n)return n[rs]||n["@@iterator"]||tm[tJ(n)]},rc=tr("iterator"),rd=Array.prototype,rl=function(n){return void 0!==n&&(tm.Array===n||rd[rc]===n)},rf=function(n){if("function"!=typeof n)throw TypeError(String(n)+" is not a function");return n},rh=function(n,r,i){if(rf(n),void 0===r)return n;switch(i){case 0:return function(){return n.call(r)};case 1:return function(i){return n.call(r,i)};case 2:return function(i,a){return n.call(r,i,a)};case 3:return function(i,a,o){return n.call(r,i,a,o)}}return function(){return n.apply(r,arguments)}},rp=nA.aTypedArrayConstructor,rv=Array.isArray||function(n){return"Array"==g(n)},rg=tr("species"),r_=function(n,r){var i;return rv(n)&&("function"==typeof(i=n.constructor)&&(i===Array||rv(i.prototype))?i=void 0:A(i)&&null===(i=i[rg])&&(i=void 0)),new(void 0===i?Array:i)(0===r?0:r)},ry=[].push,rm=function(n){var r=1==n,i=2==n,a=3==n,o=4==n,s=6==n,u=7==n,c=5==n||s;return function(d,l,f,h){for(var p,v,g=k(d),_=y(g),m=rh(l,f,3),b=em(_.length),A=0,I=h||r_,E=r?I(d,b):i||u?I(d,0):void 0;b>A;A++)if((c||A in _)&&(v=m(p=_[A],A,g),n)){if(r)E[A]=v;else if(v)switch(n){case 3:return!0;case 5:return p;case 6:return A;case 2:ry.call(E,p)}else switch(n){case 4:return!1;case 7:ry.call(E,p)}}return s?-1:a||o?o:E}},rb={forEach:rm(0),map:rm(1),filter:rm(2),some:rm(3),every:rm(4),find:rm(5),findIndex:rm(6),filterOut:rm(7)},rA=tr("species"),rI=function(n){var r=eh(n),i=D.f;c&&r&&!r[rA]&&i(r,rA,{configurable:!0,get:function(){return this}})},rk=function(n,r,i){var a,o;return tO&&"function"==typeof(a=r.constructor)&&a!==i&&A(o=a.prototype)&&o!==i.prototype&&tO(n,o),n},rE=ep.f,rT=function(n){var r,i,a,o,s,u,c=k(n),d=arguments.length,l=d>1?arguments[1]:void 0,f=void 0!==l,h=ru(c);if(null!=h&&!rl(h))for(u=(s=h.call(c)).next,c=[];!(o=u.call(s)).done;)c.push(o.value);for(f&&d>2&&(l=rh(l,arguments[2],2)),i=em(c.length),a=new(rp(this))(i),r=0;i>r;r++)a[r]=f?l(c[r],r):c[r];return a},rS=rb.forEach,rC=es.get,rx=es.set,rw=D.f,rR=s.f,rD=Math.round,rL=o.RangeError,rO=ri.ArrayBuffer,rP=ri.DataView,rB=nA.NATIVE_ARRAY_BUFFER_VIEWS,rN=nA.TYPED_ARRAY_TAG,rM=nA.TypedArray,rZ=nA.TypedArrayPrototype,rV=nA.aTypedArrayConstructor,rU=nA.isTypedArray,rF="BYTES_PER_ELEMENT",rj="Wrong length",rG=function(n,r){for(var i=0,a=r.length,o=new(rV(n))(a);a>i;)o[i]=r[i++];return o},rW=function(n,r){rw(n,r,{get:function(){return rC(this)[r]}})},rY=function(n){var r;return n instanceof rO||"ArrayBuffer"==(r=tJ(n))||"SharedArrayBuffer"==r},rH=function(n,r){return rU(n)&&"symbol"!=typeof r&&r in n&&String(+r)==String(r)},rK=function(n,r){return rH(n,r=I(r,!0))?p(2,n[r]):rR(n,r)},rX=function(n,r,i){return!(rH(n,r=I(r,!0))&&A(i)&&T(i,"value"))||T(i,"get")||T(i,"set")||i.configurable||T(i,"writable")&&!i.writable||T(i,"enumerable")&&!i.enumerable?rw(n,r,i):(n[r]=i.value,n)};c?(rB||(s.f=rK,D.f=rX,rW(rZ,"buffer"),rW(rZ,"byteOffset"),rW(rZ,"byteLength"),rW(rZ,"length")),eV({target:"Object",stat:!0,forced:!rB},{getOwnPropertyDescriptor:rK,defineProperty:rX}),t5.exports=function(n,r,i){var a=n.match(/\d+$/)[0]/8,s=n+(i?"Clamped":"")+"Array",u="get"+n,c="set"+n,d=o[s],l=d,f=l&&l.prototype,h={},p=function(n,r){rw(n,r,{get:function(){var n,i,o;return n=this,i=r,(o=rC(n)).view[u](i*a+o.byteOffset,!0)},set:function(n){var o,s,u,d;return o=this,s=r,u=n,d=rC(o),void(i&&(u=(u=rD(u))<0?0:u>255?255:255&u),d.view[c](s*a+d.byteOffset,u,!0))},enumerable:!0})};rB?nT&&(l=r(function(n,r,i,o){return nC(n,l,s),rk(A(r)?rY(r)?void 0!==o?new d(r,ro(i,a),o):void 0!==i?new d(r,ro(i,a)):new d(r):rU(r)?rG(l,r):rT.call(l,r):new d(nx(r)),n,l)}),tO&&tO(l,rM),rS(rE(d),function(n){n in l||P(l,n,d[n])}),l.prototype=f):(l=r(function(n,r,i,o){nC(n,l,s);var u,c,d,f=0,h=0;if(A(r)){if(!rY(r))return rU(r)?rG(l,r):rT.call(l,r);u=r,h=ro(i,a);var v=r.byteLength;if(void 0===o){if(v%a||(c=v-h)<0)throw rL(rj)}else if((c=em(o)*a)+h>v)throw rL(rj);d=c/a}else u=new rO(c=(d=nx(r))*a);for(rx(n,{buffer:u,byteOffset:h,byteLength:c,length:d,view:new rP(u)});f<d;)p(n,f++)}),tO&&tO(l,rM),f=l.prototype=th(rZ)),f.constructor!==l&&P(f,"constructor",l),rN&&P(f,rN,s),h[s]=l,eV({global:!0,forced:l!=d,sham:!rB},h),rF in l||P(l,rF,a),rF in f||P(f,rF,a),rI(s)}):t5.exports=function(){};var rz=t5.exports;rz("Uint8",function(n){return function(r,i,a){return n(this,r,i,a)}});var rq=Math.min,rQ=[].copyWithin||function(n,r){var i=k(this),a=em(i.length),o=eI(n,a),s=eI(r,a),u=arguments.length>2?arguments[2]:void 0,c=rq((void 0===u?a:eI(u,a))-s,a-o),d=1;for(s<o&&o<s+c&&(d=-1,s+=c-1,o+=c-1);c-- >0;)s in i?i[o]=i[s]:delete i[o],o+=d,s+=d;return i},rJ=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("copyWithin",function(n,r){return rQ.call(rJ(this),n,r,arguments.length>2?arguments[2]:void 0)});var r$=rb.every,r0=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("every",function(n){return r$(r0(this),n,arguments.length>1?arguments[1]:void 0)});var r1=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("fill",function(n){return nP.apply(r1(this),arguments)});var r2=tr("species"),r3=function(n,r){var i,a=L(n).constructor;return void 0===a||null==(i=L(a)[r2])?r:rf(i)},r7=nA.aTypedArrayConstructor,r6=rb.filter,r4=function(n,r){for(var i=r3(n,n.constructor),a=0,o=r.length,s=new(r7(i))(o);o>a;)s[a]=r[a++];return s},r5=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("filter",function(n){var r=r6(r5(this),n,arguments.length>1?arguments[1]:void 0);return r4(this,r)});var r8=rb.find,r9=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("find",function(n){return r8(r9(this),n,arguments.length>1?arguments[1]:void 0)});var ie=rb.findIndex,it=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("findIndex",function(n){return ie(it(this),n,arguments.length>1?arguments[1]:void 0)});var ir=rb.forEach,ii=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("forEach",function(n){ir(ii(this),n,arguments.length>1?arguments[1]:void 0)});var ia=eE.includes,io=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("includes",function(n){return ia(io(this),n,arguments.length>1?arguments[1]:void 0)});var is=eE.indexOf,iu=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("indexOf",function(n){return is(iu(this),n,arguments.length>1?arguments[1]:void 0)});var ic=tr("iterator"),id=o.Uint8Array,il=tK.values,ih=tK.keys,ip=tK.entries,iv=nA.aTypedArray,ig=nA.exportTypedArrayMethod,i_=id&&id.prototype[ic],iy=!!i_&&("values"==i_.name||null==i_.name),im=function(){return il.call(iv(this))};ig("entries",function(){return ip.call(iv(this))}),ig("keys",function(){return ih.call(iv(this))}),ig("values",im,!iy),ig(ic,im,!iy);var ib=nA.aTypedArray,iA=[].join;(0,nA.exportTypedArrayMethod)("join",function(n){return iA.apply(ib(this),arguments)});var iI=function(n,r){var i=[][n];return!!i&&u(function(){i.call(null,r||function(){throw 1},1)})},ik=Math.min,iE=[].lastIndexOf,iT=!!iE&&1/[1].lastIndexOf(1,-0)<0,iS=iI("lastIndexOf"),iC=iT||!iS?function(n){if(iT)return iE.apply(this,arguments)||0;var r=b(this),i=em(r.length),a=i-1;for(arguments.length>1&&(a=ik(a,e_(arguments[1]))),a<0&&(a=i+a);a>=0;a--)if(a in r&&r[a]===n)return a||0;return -1}:iE,ix=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("lastIndexOf",function(n){return iC.apply(ix(this),arguments)});var iw=rb.map,iR=nA.aTypedArray,iD=nA.aTypedArrayConstructor;(0,nA.exportTypedArrayMethod)("map",function(n){return iw(iR(this),n,arguments.length>1?arguments[1]:void 0,function(n,r){return new(iD(r3(n,n.constructor)))(r)})});var iL=function(n){return function(r,i,a,o){rf(i);var s=k(r),u=y(s),c=em(s.length),d=n?c-1:0,l=n?-1:1;if(a<2)for(;;){if(d in u){o=u[d],d+=l;break}if(d+=l,n?d<0:c<=d)throw TypeError("Reduce of empty array with no initial value")}for(;n?d>=0:c>d;d+=l)d in u&&(o=i(o,u[d],d,s));return o}},iO={left:iL(!1),right:iL(!0)},iP=iO.left,iB=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("reduce",function(n){return iP(iB(this),n,arguments.length,arguments.length>1?arguments[1]:void 0)});var iN=iO.right,iM=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("reduceRight",function(n){return iN(iM(this),n,arguments.length,arguments.length>1?arguments[1]:void 0)});var iZ=nA.aTypedArray,iV=nA.exportTypedArrayMethod,iU=Math.floor;iV("reverse",function(){for(var n,r=iZ(this).length,i=iU(r/2),a=0;a<i;)n=this[a],this[a++]=this[--r],this[r]=n;return this});var iF=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("set",function(n){iF(this);var r=ro(arguments.length>1?arguments[1]:void 0,1),i=this.length,a=k(n),o=em(a.length),s=0;if(o+r>i)throw RangeError("Wrong length");for(;s<o;)this[r+s]=a[s++]},u(function(){new Int8Array(1).set({})}));var ij=nA.aTypedArray,iG=nA.aTypedArrayConstructor,iW=[].slice;(0,nA.exportTypedArrayMethod)("slice",function(n,r){for(var i=iW.call(ij(this),n,r),a=r3(this,this.constructor),o=0,s=i.length,u=new(iG(a))(s);s>o;)u[o]=i[o++];return u},u(function(){new Int8Array(1).slice()}));var iY=rb.some,iH=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("some",function(n){return iY(iH(this),n,arguments.length>1?arguments[1]:void 0)});var iK=nA.aTypedArray,iX=[].sort;(0,nA.exportTypedArrayMethod)("sort",function(n){return iX.call(iK(this),n)});var iz=nA.aTypedArray;(0,nA.exportTypedArrayMethod)("subarray",function(n,r){var i=iz(this),a=i.length,o=eI(n,a);return new(r3(i,i.constructor))(i.buffer,i.byteOffset+o*i.BYTES_PER_ELEMENT,em((void 0===r?a:eI(r,a))-o))});var iq=o.Int8Array,iQ=nA.aTypedArray,iJ=nA.exportTypedArrayMethod,i$=[].toLocaleString,i0=[].slice,i1=!!iq&&u(function(){i$.call(new iq(1))});iJ("toLocaleString",function(){return i$.apply(i1?i0.call(iQ(this)):iQ(this),arguments)},u(function(){return[1,2].toLocaleString()!=new iq([1,2]).toLocaleString()})||!u(function(){iq.prototype.toLocaleString.call([1,2])}));var i2=nA.exportTypedArrayMethod,i3=o.Uint8Array,i7=i3&&i3.prototype||{},i6=[].toString,i4=[].join;u(function(){i6.call({})})&&(i6=function(){return i4.call(this)});var i5=i7.toString!=i6;i2("toString",i6,i5);var i8=rb.forEach,i9=iI("forEach")?[].forEach:function(n){return i8(this,n,arguments.length>1?arguments[1]:void 0)};for(var ae in t$){var at=o[ae],an=at&&at.prototype;if(an&&an.forEach!==i9)try{P(an,"forEach",i9)}catch(n){an.forEach=i9}}eV({target:"Object",stat:!0,forced:u(function(){ti(1)})},{keys:function(n){return ti(k(n))}});var ar,ai,aa,ao=o.Promise,as=function(n){var r=n.return;if(void 0!==r)return L(r.call(n)).value},au=function(n,r){this.stopped=n,this.result=r},ac=function(n,r,i){var a,o,s,u,c,d,l,f=i&&i.that,h=!(!i||!i.AS_ENTRIES),p=!(!i||!i.IS_ITERATOR),v=!(!i||!i.INTERRUPTED),g=rh(r,f,1+h+v),_=function(n){return a&&as(a),new au(!0,n)},y=function(n){return h?(L(n),v?g(n[0],n[1],_):g(n[0],n[1])):v?g(n,_):g(n)};if(p)a=n;else{if("function"!=typeof(o=ru(n)))throw TypeError("Target is not iterable");if(rl(o)){for(s=0,u=em(n.length);u>s;s++)if((c=y(n[s]))&&c instanceof au)return c;return new au(!1)}a=o.call(n)}for(d=a.next;!(l=d.call(a)).done;){try{c=y(l.value)}catch(n){throw as(a),n}if("object"==typeof c&&c&&c instanceof au)return c}return new au(!1)},ad=/(?:iphone|ipod|ipad).*applewebkit/i.test(e2),al="process"==g(o.process),af=o.location,ah=o.setImmediate,ap=o.clearImmediate,av=o.process,ag=o.MessageChannel,a_=o.Dispatch,ay=0,am={},ab="onreadystatechange",aA=function(n){if(am.hasOwnProperty(n)){var r=am[n];delete am[n],r()}},aI=function(n){return function(){aA(n)}},ak=function(n){aA(n.data)},aE=function(n){o.postMessage(n+"",af.protocol+"//"+af.host)};ah&&ap||(ah=function(n){for(var r=[],i=1;arguments.length>i;)r.push(arguments[i++]);return am[++ay]=function(){("function"==typeof n?n:Function(n)).apply(void 0,r)},ar(ay),ay},ap=function(n){delete am[n]},al?ar=function(n){av.nextTick(aI(n))}:a_&&a_.now?ar=function(n){a_.now(aI(n))}:ag&&!ad?(aa=(ai=new ag).port2,ai.port1.onmessage=ak,ar=rh(aa.postMessage,aa,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&af&&"file:"!==af.protocol&&!u(aE)?(ar=aE,o.addEventListener("message",ak,!1)):ar=ab in x("script")?function(n){to.appendChild(x("script"))[ab]=function(){to.removeChild(this),aA(n)}}:function(n){setTimeout(aI(n),0)});var aT,aS,aC,ax,aw,aR,aD,aL,aO=ah,aP=/web0s(?!.*chrome)/i.test(e2),aB=s.f,aN=o.MutationObserver||o.WebKitMutationObserver,aM=o.document,aZ=o.process,aV=o.Promise,aU=aB(o,"queueMicrotask"),aF=aU&&aU.value;aF||(aT=function(){var n,r;for(al&&(n=aZ.domain)&&n.exit();aS;){r=aS.fn,aS=aS.next;try{r()}catch(n){throw aS?ax():aC=void 0,n}}aC=void 0,n&&n.enter()},ad||al||aP||!aN||!aM?aV&&aV.resolve?((aD=aV.resolve(void 0)).constructor=aV,aL=aD.then,ax=function(){aL.call(aD,aT)}):ax=al?function(){aZ.nextTick(aT)}:function(){aO.call(o,aT)}:(aw=!0,aR=aM.createTextNode(""),new aN(aT).observe(aR,{characterData:!0}),ax=function(){aR.data=aw=!aw}));var aj=aF||function(n){var r={fn:n,next:void 0};aC&&(aC.next=r),aS||(aS=r,ax()),aC=r},aG={},aW=function(n){var r,i;this.promise=new n(function(n,a){if(void 0!==r||void 0!==i)throw TypeError("Bad Promise constructor");r=n,i=a}),this.resolve=rf(r),this.reject=rf(i)};aG.f=function(n){return new aW(n)};var aY,aH,aK,aX,az="object"==typeof window,aq=aO,aQ=function(n,r){if(L(n),A(r)&&r.constructor===n)return r;var i=aG.f(n);return(0,i.resolve)(r),i.promise},aJ=function(n,r){var i=o.console;i&&i.error&&(1==arguments.length?i.error(n):i.error(n,r))},a$=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}},a0=tr("species"),a1="Promise",a2=es.get,a3=es.set,a7=es.getterFor(a1),a6=ao&&ao.prototype,a4=ao,a5=a6,a8=o.TypeError,a9=o.document,oe=o.process,ot=aG.f,on=ot,or=!!(a9&&a9.createEvent&&o.dispatchEvent),oi="function"==typeof PromiseRejectionEvent,oa="unhandledrejection",oo=!1,os=eL(a1,function(){var n=U(a4)!==String(a4);if(!n&&66===e5)return!0;if(e5>=51&&/native code/.test(a4))return!1;var r=new a4(function(n){n(1)}),i=function(n){n(function(){},function(){})};return(r.constructor={})[a0]=i,!(oo=r.then(function(){}) instanceof i)||!n&&az&&!oi}),ou=os||!nr(function(n){a4.all(n).catch(function(){})}),oc=function(n){var r;return!(!A(n)||"function"!=typeof(r=n.then))&&r},od=function(n,r){if(!n.notified){n.notified=!0;var i=n.reactions;aj(function(){for(var a=n.value,o=1==n.state,s=0;i.length>s;){var u,c,d,l=i[s++],f=o?l.ok:l.fail,h=l.resolve,p=l.reject,v=l.domain;try{f?(o||(2===n.rejection&&op(n),n.rejection=1),!0===f?u=a:(v&&v.enter(),u=f(a),v&&(v.exit(),d=!0)),u===l.promise?p(a8("Promise-chain cycle")):(c=oc(u))?c.call(u,h,p):h(u)):p(a)}catch(n){v&&!d&&v.exit(),p(n)}}n.reactions=[],n.notified=!1,r&&!n.rejection&&of(n)})}},ol=function(n,r,i){var a,s;or?((a=a9.createEvent("Event")).promise=r,a.reason=i,a.initEvent(n,!1,!0),o.dispatchEvent(a)):a={promise:r,reason:i},!oi&&(s=o["on"+n])?s(a):n===oa&&aJ("Unhandled promise rejection",i)},of=function(n){aq.call(o,function(){var r,i=n.facade,a=n.value;if(oh(n)&&(r=a$(function(){al?oe.emit("unhandledRejection",a,i):ol(oa,i,a)}),n.rejection=al||oh(n)?2:1,r.error))throw r.value})},oh=function(n){return 1!==n.rejection&&!n.parent},op=function(n){aq.call(o,function(){var r=n.facade;al?oe.emit("rejectionHandled",r):ol("rejectionhandled",r,n.value)})},ov=function(n,r,i){return function(a){n(r,a,i)}},og=function(n,r,i){n.done||(n.done=!0,i&&(n=i),n.value=r,n.state=2,od(n,!0))},o_=function(n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===r)throw a8("Promise can't be resolved itself");var a=oc(r);a?aj(function(){var i={done:!1};try{a.call(r,ov(o_,i,n),ov(og,i,n))}catch(r){og(i,r,n)}}):(n.value=r,n.state=1,od(n,!1))}catch(r){og({done:!1},r,n)}}};if(os&&(a5=(a4=function(n){nC(this,a4,a1),rf(n),aY.call(this);var r=a2(this);try{n(ov(o_,r),ov(og,r))}catch(n){og(r,n)}}).prototype,(aY=function(n){a3(this,{type:a1,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=nS(a5,{then:function(n,r){var i=a7(this),a=ot(r3(this,a4));return a.ok="function"!=typeof n||n,a.fail="function"==typeof r&&r,a.domain=al?oe.domain:void 0,i.parent=!0,i.reactions.push(a),0!=i.state&&od(i,!1),a.promise},catch:function(n){return this.then(void 0,n)}}),aH=function(){var n=new aY,r=a2(n);this.promise=n,this.resolve=ov(o_,r),this.reject=ov(og,r)},aG.f=ot=function(n){return n===a4||n===aK?new aH(n):on(n)},"function"==typeof ao&&a6!==Object.prototype)){aX=a6.then,oo||(el(a6,"then",function(n,r){var i=this;return new a4(function(n,r){aX.call(i,n,r)}).then(n,r)},{unsafe:!0}),el(a6,"catch",a5.catch,{unsafe:!0}));try{delete a6.constructor}catch(n){}tO&&tO(a6,a5)}eV({global:!0,wrap:!0,forced:os},{Promise:a4}),tR(a4,a1,!1),rI(a1),aK=eh(a1),eV({target:a1,stat:!0,forced:os},{reject:function(n){var r=ot(this);return r.reject.call(void 0,n),r.promise}}),eV({target:a1,stat:!0,forced:os},{resolve:function(n){return aQ(this,n)}}),eV({target:a1,stat:!0,forced:ou},{all:function(n){var r=this,i=ot(r),a=i.resolve,o=i.reject,s=a$(function(){var i=rf(r.resolve),s=[],u=0,c=1;ac(n,function(n){var d=u++,l=!1;s.push(void 0),c++,i.call(r,n).then(function(n){l||(l=!0,s[d]=n,--c||a(s))},o)}),--c||a(s)});return s.error&&o(s.value),i.promise},race:function(n){var r=this,i=ot(r),a=i.reject,o=a$(function(){var o=rf(r.resolve);ac(n,function(n){o.call(r,n).then(i.resolve,a)})});return o.error&&a(o.value),i.promise}});var oy=function(n,r,i){var a=I(r);a in n?D.f(n,a,p(0,i)):n[a]=i},om=tr("species"),ob=function(n){return e5>=51||!u(function(){var r=[];return(r.constructor={})[om]=function(){return{foo:1}},1!==r[n](Boolean).foo})},oA=tr("isConcatSpreadable"),oI="Maximum allowed index exceeded",ok=e5>=51||!u(function(){var n=[];return n[oA]=!1,n.concat()[0]!==n}),oE=ob("concat"),oT=function(n){if(!A(n))return!1;var r=n[oA];return void 0!==r?!!r:rv(n)};eV({target:"Array",proto:!0,forced:!ok||!oE},{concat:function(n){var r,i,a,o,s,u=k(this),c=r_(u,0),d=0;for(r=-1,a=arguments.length;r<a;r++)if(oT(s=-1===r?u:arguments[r])){if(d+(o=em(s.length))>9007199254740991)throw TypeError(oI);for(i=0;i<o;i++,d++)i in s&&oy(c,d,s[i])}else{if(d>=9007199254740991)throw TypeError(oI);oy(c,d++,s)}return c.length=d,c}}),rz("Uint16",function(n){return function(r,i,a){return n(this,r,i,a)}});var oS={exports:{}};!function(n){var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(n,r,i){this.fn=n,this.context=r,this.once=i||!1}function s(n,r,a,s,u){if("function"!=typeof a)throw TypeError("The listener must be a function");var c=new o(a,s||n,u),d=i?i+r:r;return n._events[d]?n._events[d].fn?n._events[d]=[n._events[d],c]:n._events[d].push(c):(n._events[d]=c,n._eventsCount++),n}function u(n,r){0==--n._eventsCount?n._events=new a:delete n._events[r]}function c(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),c.prototype.eventNames=function(){var n,a,o=[];if(0===this._eventsCount)return o;for(a in n=this._events)r.call(n,a)&&o.push(i?a.slice(1):a);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},c.prototype.listeners=function(n){var r=i?i+n:n,a=this._events[r];if(!a)return[];if(a.fn)return[a.fn];for(var o=0,s=a.length,u=Array(s);o<s;o++)u[o]=a[o].fn;return u},c.prototype.listenerCount=function(n){var r=i?i+n:n,a=this._events[r];return a?a.fn?1:a.length:0},c.prototype.emit=function(n,r,a,o,s,u){var c=i?i+n:n;if(!this._events[c])return!1;var d,l,f=this._events[c],h=arguments.length;if(f.fn){switch(f.once&&this.removeListener(n,f.fn,void 0,!0),h){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,a),!0;case 4:return f.fn.call(f.context,r,a,o),!0;case 5:return f.fn.call(f.context,r,a,o,s),!0;case 6:return f.fn.call(f.context,r,a,o,s,u),!0}for(l=1,d=Array(h-1);l<h;l++)d[l-1]=arguments[l];f.fn.apply(f.context,d)}else{var p,v=f.length;for(l=0;l<v;l++)switch(f[l].once&&this.removeListener(n,f[l].fn,void 0,!0),h){case 1:f[l].fn.call(f[l].context);break;case 2:f[l].fn.call(f[l].context,r);break;case 3:f[l].fn.call(f[l].context,r,a);break;case 4:f[l].fn.call(f[l].context,r,a,o);break;default:if(!d)for(p=1,d=Array(h-1);p<h;p++)d[p-1]=arguments[p];f[l].fn.apply(f[l].context,d)}}return!0},c.prototype.on=function(n,r,i){return s(this,n,r,i,!1)},c.prototype.once=function(n,r,i){return s(this,n,r,i,!0)},c.prototype.removeListener=function(n,r,a,o){var s=i?i+n:n;if(!this._events[s])return this;if(!r)return u(this,s),this;var c=this._events[s];if(c.fn)c.fn!==r||o&&!c.once||a&&c.context!==a||u(this,s);else{for(var d=0,l=[],f=c.length;d<f;d++)(c[d].fn!==r||o&&!c[d].once||a&&c[d].context!==a)&&l.push(c[d]);l.length?this._events[s]=1===l.length?l[0]:l:u(this,s)}return this},c.prototype.removeAllListeners=function(n){var r;return n?(r=i?i+n:n,this._events[r]&&u(this,r)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,n.exports=c}(oS);var oC=i(oS.exports),ox=function(){var n=L(this),r="";return n.global&&(r+="g"),n.ignoreCase&&(r+="i"),n.multiline&&(r+="m"),n.dotAll&&(r+="s"),n.unicode&&(r+="u"),n.sticky&&(r+="y"),r},ow={};function oR(n,r){return RegExp(n,r)}ow.UNSUPPORTED_Y=u(function(){var n=RegExp("a","y");return n.lastIndex=2,null!=n.exec("abcd")}),ow.BROKEN_CARET=u(function(){var n=RegExp("^r","gy");return n.lastIndex=2,null!=n.exec("str")});var oD,oL,oO=RegExp.prototype.exec,oP=K("native-string-replace",String.prototype.replace),oB=oO,oN=(oD=/a/,oL=/b*/g,oO.call(oD,"a"),oO.call(oL,"a"),0!==oD.lastIndex||0!==oL.lastIndex),oM=ow.UNSUPPORTED_Y||ow.BROKEN_CARET,oZ=void 0!==/()??/.exec("")[1];(oN||oZ||oM)&&(oB=function(n){var r,i,a,o,s=oM&&this.sticky,u=ox.call(this),c=this.source,d=0,l=n;return s&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),l=String(n).slice(this.lastIndex),this.lastIndex>0&&(!this.multiline||this.multiline&&"\n"!==n[this.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,d++),i=RegExp("^(?:"+c+")",u)),oZ&&(i=RegExp("^"+c+"$(?!\\s)",u)),oN&&(r=this.lastIndex),a=oO.call(s?i:this,l),s?a?(a.input=a.input.slice(d),a[0]=a[0].slice(d),a.index=this.lastIndex,this.lastIndex+=a[0].length):this.lastIndex=0:oN&&a&&(this.lastIndex=this.global?a.index+a[0].length:r),oZ&&a&&a.length>1&&oP.call(a[0],i,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)}),a});var oV=oB;eV({target:"RegExp",proto:!0,forced:/./.exec!==oV},{exec:oV});var oU=tr("species"),oF=RegExp.prototype,oj=!u(function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}),oG="$0"==="a".replace(/./,"$0"),oW=tr("replace"),oY=!!/./[oW]&&""===/./[oW]("a","$0"),oH=!u(function(){var n=/(?:)/,r=n.exec;n.exec=function(){return r.apply(this,arguments)};var i="ab".split(n);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}),oK=function(n,r,i,a){var o=tr(n),s=!u(function(){var r={};return r[o]=function(){return 7},7!=""[n](r)}),c=s&&!u(function(){var r=!1,i=/a/;return"split"===n&&((i={}).constructor={},i.constructor[oU]=function(){return i},i.flags="",i[o]=/./[o]),i.exec=function(){return r=!0,null},i[o](""),!r});if(!s||!c||"replace"===n&&(!oj||!oG||oY)||"split"===n&&!oH){var d=/./[o],l=i(o,""[n],function(n,r,i,a,o){var u=r.exec;return u===oV||u===oF.exec?s&&!o?{done:!0,value:d.call(r,i,a)}:{done:!0,value:n.call(i,r,a)}:{done:!1}},{REPLACE_KEEPS_$0:oG,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:oY}),f=l[0],h=l[1];el(String.prototype,n,f),el(oF,o,2==r?function(n,r){return h.call(n,this,r)}:function(n){return h.call(n,this)})}a&&P(oF[o],"sham",!0)},oX=function(n){return function(r,i){var a,o,s=String(m(r)),u=e_(i),c=s.length;return u<0||u>=c?n?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?n?s.charAt(u):a:n?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}},oz={codeAt:oX(!1),charAt:oX(!0)},oq=oz.charAt,oQ=function(n,r,i){return r+(i?oq(n,r).length:1)},oJ=Math.floor,o$="".replace,o0=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o1=/\$([$&'`]|\d{1,2})/g,o2=function(n,r){var i=n.exec;if("function"==typeof i){var a=i.call(n,r);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==g(n))throw TypeError("RegExp#exec called on incompatible receiver");return oV.call(n,r)},o3=function(n,r,i,a,o,s){var u=i+n.length,c=a.length,d=o1;return void 0!==o&&(o=k(o),d=o0),o$.call(s,d,function(s,d){var l;switch(d.charAt(0)){case"$":return"$";case"&":return n;case"`":return r.slice(0,i);case"'":return r.slice(u);case"<":l=o[d.slice(1,-1)];break;default:var f=+d;if(0===f)return s;if(f>c){var h=oJ(f/10);return 0===h?s:h<=c?void 0===a[h-1]?d.charAt(1):a[h-1]+d.charAt(1):s}l=a[f-1]}return void 0===l?"":l})},o7=Math.max,o6=Math.min;oK("replace",2,function(n,r,i,a){var o=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,s=a.REPLACE_KEEPS_$0,u=o?"$":"$0";return[function(i,a){var o=m(this),s=null==i?void 0:i[n];return void 0!==s?s.call(i,o,a):r.call(String(o),i,a)},function(n,a){if(!o&&s||"string"==typeof a&&-1===a.indexOf(u)){var c=i(r,n,this,a);if(c.done)return c.value}var d=L(n),l=String(this),f="function"==typeof a;f||(a=String(a));var h=d.global;if(h){var p=d.unicode;d.lastIndex=0}for(var v=[];;){var g=o2(d,l);if(null===g||(v.push(g),!h))break;""===String(g[0])&&(d.lastIndex=oQ(l,em(d.lastIndex),p))}for(var _,y="",m=0,b=0;b<v.length;b++){g=v[b];for(var A=String(g[0]),I=o7(o6(e_(g.index),l.length),0),k=[],E=1;E<g.length;E++)k.push(void 0===(_=g[E])?_:String(_));var T=g.groups;if(f){var S=[A].concat(k,I,l);void 0!==T&&S.push(T);var C=String(a.apply(void 0,S))}else C=o3(A,l,I,k,T,a);I>=m&&(y+=l.slice(m,I)+C,m=I+A.length)}return y+l.slice(m)}]});var o4="toString",o5=RegExp.prototype,o8=o5[o4],o9=u(function(){return"/a/b"!=o8.call({source:"a",flags:"b"})}),se=o8.name!=o4;(o9||se)&&el(RegExp.prototype,o4,function(){var n=L(this),r=String(n.source),i=n.flags;return"/"+r+"/"+String(void 0===i&&n instanceof RegExp&&!("flags"in o5)?ox.call(n):i)},{unsafe:!0});var st=ob("slice"),sn=tr("species"),sr=[].slice,si=Math.max;eV({target:"Array",proto:!0,forced:!st},{slice:function(n,r){var i,a,o,s=b(this),u=em(s.length),c=eI(n,u),d=eI(void 0===r?u:r,u);if(rv(s)&&("function"==typeof(i=s.constructor)&&(i===Array||rv(i.prototype))?i=void 0:A(i)&&null===(i=i[sn])&&(i=void 0),i===Array||void 0===i))return sr.call(s,c,d);for(a=new(void 0===i?Array:i)(si(d-c,0)),o=0;c<d;c++,o++)c in s&&oy(a,o,s[c]);return a.length=o,a}});var sa="ArrayBuffer",so=ri[sa];eV({global:!0,forced:o[sa]!==so},{ArrayBuffer:so}),rI(sa);var ss=[].join,su=y!=Object,sc=iI("join",",");eV({target:"Array",proto:!0,forced:su||!sc},{join:function(n){return ss.call(b(this),void 0===n?",":n)}});var sd=rb.map;eV({target:"Array",proto:!0,forced:!ob("map")},{map:function(n){return sd(this,n,arguments.length>1?arguments[1]:void 0)}});var sl="[	\n\v\f\r \xa0              　\u2028\u2029\uFEFF]",sf=RegExp("^"+sl+sl+"*"),sh=RegExp(sl+sl+"*$"),sp=function(n){return function(r){var i=String(m(r));return 1&n&&(i=i.replace(sf,"")),2&n&&(i=i.replace(sh,"")),i}},sv={start:sp(1),end:sp(2),trim:sp(3)},sg=ep.f,s_=s.f,sy=D.f,sm=sv.trim,sb="Number",sA=o[sb],sI=sA.prototype,sk=g(th(sI))==sb,sE=function(n){var r,i,a,o,s,u,c,d,l=I(n,!1);if("string"==typeof l&&l.length>2){if(43===(r=(l=sm(l)).charCodeAt(0))||45===r){if(88===(i=l.charCodeAt(2))||120===i)return NaN}else if(48===r){switch(l.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(u=(s=l.slice(2)).length,c=0;c<u;c++)if((d=s.charCodeAt(c))<48||d>o)return NaN;return parseInt(s,a)}}return+l};if(eL(sb,!sA(" 0o1")||!sA("0b1")||sA("+0x1"))){for(var sT,sS=function(n){var r=arguments.length<1?0:n,i=this;return i instanceof sS&&(sk?u(function(){sI.valueOf.call(i)}):g(i)!=sb)?rk(new sA(sE(r)),i,sS):sE(r)},sC=c?sg(sA):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),sx=0;sC.length>sx;sx++)T(sA,sT=sC[sx])&&!T(sS,sT)&&sy(sS,sT,s_(sA,sT));sS.prototype=sI,sI.constructor=sS,el(o,sb,sS)}function sw(n){for(var r="",i=0;i<n.length;i+=16e3){var a=n.subarray(i,i+16e3);r+=String.fromCharCode.apply(null,a)}return r}oK("match",1,function(n,r,i){return[function(r){var i=m(this),a=null==r?void 0:r[n];return void 0!==a?a.call(r,i):new RegExp(r)[n](String(i))},function(n){var a=i(r,n,this);if(a.done)return a.value;var o=L(n),s=String(this);if(!o.global)return o2(o,s);var u=o.unicode;o.lastIndex=0;for(var c,d=[],l=0;null!==(c=o2(o,s));){var f=String(c[0]);d[l]=f,""===f&&(o.lastIndex=oQ(s,em(o.lastIndex),u)),l++}return 0===l?null:d}]});var sR,sD,sL,sO,sP,sB,sN,sM,sZ=(sL="vodTimestampSalt",sO=function(n){return n.split("").map(function(n){return n.charCodeAt(0)})},sP=function(n){return"0".concat(Number(n).toString(16)).substr(-2)},sB=function(n){return sO(sL).reduce(function(n,r){return n^r},n)},function(n){return n.split("").map(sO).map(sB).map(sP).join("")}),sV=(sR="vodTimestampSalt",sD=function(n){return sR.split("").map(function(n){return n.charCodeAt(0)}).reduce(function(n,r){return n^r},n)},function(n){return n.match(/.{1,2}/g).map(function(n){return parseInt(n,16)}).map(sD).map(function(n){return String.fromCharCode(n)}).join("")}),sU={str2hex:function(n){if(""===n)return"";for(var r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return r},Base64ToHex:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window.atob(n.replace(/-/g,"+").replace(/_/g,"/"));if(r){for(var a=[],o=0;o<i.length;o++)a.push(i.charCodeAt(o));return new Uint8Array(a).buffer}for(var s="",u=0;u<i.length;u++)s+="0".concat(i.charCodeAt(u).toString(16)).substr(-2);return s},checkUnionInfoExpired:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(0===r.indexOf(n)){var a=parseInt(sV(r.slice(n.length))),o=(new Date).getTime()-a;if(o>0&&o<=1e3*i)return!0}return!1},getUnionInfo:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(sZ((new Date).getTime().toString()))},StringToArrayBuffer:function(n){for(var r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return r},ArrayBufferToString:function(n){var r=[];n=ArrayBuffer.isView(n)?n:new Uint8Array(n);for(var i=0;i<n.length;i++)r.push(String.fromCharCode(n[i]));return r.join("")},isBase64:function(n){return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(n)},fromCharCode:sw,fromHex:function(n){for(var r=new Uint8Array(n.length/2),i=0;i<n.length;i+=2)r[i/2]=window.parseInt(n.substr(i,2),16);return r},toUTF8:function(n){for(var r=encodeURIComponent(n),i=unescape(r),a=new Uint8Array(i.length),o=0;o<i.length;++o)a[o]=i.charCodeAt(o);return a.buffer},toBase64:function(n,r){var i=sw(n);r=void 0===r||r;var a=window.btoa(i).replace(/\+/g,"-").replace(/\//g,"_");return r?a:a.replace(/=*$/,"")}};n.EVENT_EME=void 0,function(n,r,i){function a(n,r){var i=parseInt(n.slice(r,r+2),16);return i>>>7==0?[1,i]:i>>>6==2?[2,i=((63&i)<<8)+parseInt(n.slice(r+2,r+4),16)]:[3,i=((63&i)<<16)+parseInt(n.slice(r+2,r+6),16)]}var o,s=0,u=[],c=[];for(o=0;o<4;++o)s+=(3&parseInt(n.slice(8+2*o,10+2*o),16))<<2*o;var d=parseInt(n.slice(16,24),16),l=2*parseInt(n.slice(32,40),16);for(o=40;o<l+40;o+=2)u.push(parseInt(n.slice(o,o+2),16));var f=l+40,h=parseInt(n.slice(f,f+4),16);for(f+=4,o=0;o<h;++o){var p=a(n,f);f+=2*p[0];for(var v="",g=0;g<p[1];++g){var _=a(n,f);v+=String.fromCharCode(s^_[1]),f+=2*_[0]}c.push(v)}r.p=null,function n(r,i,a,o,s){var d,l,f,h,p,v=-1,g=[],_=null,y=[i];for(l=Math.min(i.length,a),f=0;f<l;++f)y.push(i[f]);y.p=o;for(var m=[];;)try{switch(u[r++]){case 31:g[++v]=!1;break;case 67:g[++v]=null;break;case 61:d=u[r++],g[++v]=d<<24>>24;break;case 36:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=d<<16>>16;break;case 37:d=((d=((d=u[r++])<<8)+u[r++])<<8)+u[r++],g[++v]=(d<<8)+u[r++];break;case 58:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=c[d];break;case 29:g[++v]=void 0;break;case 28:g[++v]=s;break;case 53:d=(u[r]<<8)+u[r+1],r+=2,v=v-d+1,l=g.slice(v,v+d),g[v]=l;break;case 18:g[++v]={};break;case 9:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],g[v][l]=f;break;case 46:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;g[++v]=h[f];break;case 32:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],g[v]=g[v][l];break;case 42:l=g[v--],g[v]=g[v][l];break;case 8:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;h[f]=g[v--];break;case 6:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],h=g[v--],f[l]=h;break;case 48:l=g[v--],f=g[v--],h=g[v--],f[l]=h;break;case 65:for(l=u[r++],f=u[r++],h=y,h=y;l>0;--l)h=h.p;g[++v]=h,g[++v]=f;break;case 15:l=g[v--],h=(f=g[v--])[l]++,g[++v]=h;break;case 24:l=g[v--],g[v]=g[v]===l;break;case 76:l=g[v--],g[v]=g[v]!==l;break;case 72:g[v]=!g[v];break;case 54:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?--v:r+=d;break;case 35:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?r+=d:--v;break;case 14:l=g[v--],(f=g[v--])[l]=g[v];break;case 13:g[v]=void 0;break;case 62:l=g[v--],h=delete(f=g[v--])[l],g[++v]=h;break;case 1:d=u[r++],l=g[v--],(f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)})._v=[l,d,y],f._u=n,g[++v]=f;break;case 17:d=u[r++],l=g[v--],(h=[f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)}]).p=y,f._v=[l,d,h],f._u=n,g[++v]=f;break;case 11:throw l=g[v--];case 21:for(l=g[v--],f=null;h=m.pop();)if(2===h[0]||3===h[0]){f=h;break}if(f)r=f[2],f[0]=0,m.push(f);else{if(!_)return l;r=_[1],s=_[2],y=_[3],m=_[4],g[++v]=l,_=_[0]}break;case 74:v-=d=u[r++],f=g.slice(v+1,v+d+1),l=g[v--],h=g[v--],l._u===n?(l=l._v,_=[_,r,s,y,m],r=l[0],null==h&&(h=function(){return this}()),s=h,(y=[f].concat(f)).length=Math.min(l[1],d)+1,y.p=l[2],m=[]):(p=l.apply(h,f),g[++v]=p);break;case 73:for(d=u[r++],h=[void 0],p=d;p>0;--p)h[p]=g[v--];f=g[v--],p=new(l=Function.bind.apply(f,h)),g[++v]=p;break;case 20:r+=2+(d=(d=(u[r]<<8)+u[r+1])<<16>>16);break;case 16:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=g[v--])||(r+=d);break;case 2:--v;break;case 51:l=g[v],g[++v]=l;break;default:throw Error("ioe")}}catch(n){for(;(d=m.pop())&&!d[0];);if(!d){t:for(;_;){for(l=_[4];d=l.pop();)if(d[0])break t;_=_[0]}if(!_)throw n;r=_[1],s=_[2],y=_[3],m=_[4],_=_[0]}1===(l=d[0])?(r=d[2],d[0]=0,m.push(d),g[++v]=n):2===l?(r=d[2],d[0]=0,m.push(d)):(r=d[3],d[0]=2,m.push(d),g[++v]=n)}}(d,[],0,r,i)}("504B0101df0839f000000f58f1380bdf00000f8a3a00012e00013a0002303a00032e00013a0004303a00052e00013a0005303a00062e00013a0006302e000115250000013d0101080003432e02112e00032e00014a0202432e02122e00034a01080002432e020f2e0003123a002b09002d25000008b71102090031123a003209002d25000009741101090031123a003309002d25000009ae1100090031123a002709002d25000009ec1101090031123a002209002d2500000a0c1101090031123a004909002d2500000b061100090031123a001809002d2500000b081103090031123a005009002d2500000b9e1101090031123a005109002d2500000bb01101090031123a005409002d2500000c521101090031123a002309002d2500000c801101090031123a007809002d2500000eac1101090031123a008009002d2500000f49110009003135000d4a02022e000315432e030e1c2e01034a02022e0102332000071c4a010800023a00082e0002060009122e000206000a3d000d2e000206000b2e03152e0002060000432e000206000c3d002e000206000d25000001c001012e000206002a3500002e00020600192e00023320002b2e00014a01022e00023320002c3a00032e000220002a4a02022e000215432e04102e01024a010800022e000220000c080003432e04102e01024a010800042e0003481000021d152e01022000093a000e181000333a000f0800052e040033200010123a00113500010900124a010800062e04012e0414332000132e00064a01490108000714054f2e01022000093a0014181000b93a00150800052e000136000b2e04012e000120001649012300992e04013d003d003d003d433d703d733d733d683d003d003d003d002400ed2400ef24008b2400a93d792400d63d4a2400ce2400a32400c83d272400dc2400d53d1d3d212400ed3d003d003d003d233d083d013d123d103d333d333d333d333d333d333d333d333d333d333d333d333d003d003d003d003d1a3d0a3d693d6e3d743d653d723d743d723d753d733d743d223d013d2a35004349010800071404892e01022000093a00171810047c3a00150800052e000136000b2e04012e0001200016490123045f2e04013d003d003d023d263d703d733d733d683d003d003d003d0024009a3d042400f03d792400983d403d422400862400ab2400922400e63d5b2400e02400883d5f2400953d003d003d023d063d063d023d003d003d013d003d013d002400fc3d013d3c3d003d573d003d523d003d4d3d003d483d003d453d003d413d003d443d003d453d003d523d003d203d003d783d003d6d3d003d6c3d003d6e3d003d733d003d3d3d003d223d003d683d003d743d003d743d003d703d003d3a3d003d2f3d003d2f3d003d733d003d633d003d683d003d653d003d6d3d003d613d003d733d003d2e3d003d6d3d003d693d003d633d003d723d003d6f3d003d733d003d6f3d003d663d003d743d003d2e3d003d633d003d6f3d003d6d3d003d2f3d003d443d003d523d003d4d3d003d2f3d003d323d003d303d003d303d003d373d003d2f3d003d303d003d333d003d2f3d003d503d003d6c3d003d613d003d793d003d523d003d653d003d613d003d643d003d793d003d483d003d653d003d613d003d643d003d653d003d723d003d223d003d203d003d763d003d653d003d723d003d733d003d693d003d6f3d003d6e3d003d3d3d003d223d003d343d003d2e3d003d303d003d2e3d003d303d003d2e3d003d303d003d223d003d3e3d003d3c3d003d443d003d413d003d543d003d413d003d3e3d003d3c3d003d503d003d523d003d4f3d003d543d003d453d003d433d003d543d003d493d003d4e3d003d463d003d4f3d003d3e3d003d3c3d003d4b3d003d453d003d593d003d4c3d003d453d003d4e3d003d3e3d003d313d003d363d003d3c3d003d2f3d003d4b3d003d453d003d593d003d4c3d003d453d003d4e3d003d3e3d003d3c3d003d413d003d4c3d003d473d003d493d003d443d003d3e3d003d413d003d453d003d533d003d433d003d543d003d523d003d3c3d003d2f3d003d413d003d4c3d003d473d003d493d003d443d003d3e3d003d3c3d003d2f3d003d503d003d523d003d4f3d003d543d003d453d003d433d003d543d003d493d003d4e3d003d463d003d4f3d003d3e3d003d3c3d003d4b3d003d493d003d443d003d3e3d003d4d3d003d7a3d003d4d3d003d7a3d003d4d3d003d7a3d003d4d3d003d7a3d003d4d3d003d7a3d003d4d3d003d7a3d003d4d3d003d7a3d003d4d3d003d7a3d003d413d003d413d003d413d003d413d003d413d003d413d003d3d3d003d3d3d003d3c3d003d2f3d003d4b3d003d493d003d443d003d3e3d003d3c3d003d433d003d483d003d453d003d433d003d4b3d003d533d003d553d003d4d3d003d3e3d003d413d003d313d003d353d003d423d003d593d003d573d003d443d003d343d003d713d003d733d003d493d003d3d3d003d3c3d003d2f3d003d433d003d483d003d453d003d433d003d4b3d003d533d003d553d003d4d3d003d3e3d003d3c3d003d2f3d003d443d003d413d003d543d003d413d003d3e3d003d3c3d003d2f3d003d573d003d523d003d4d3d003d483d003d453d003d413d003d443d003d453d003d523d003d3e3d0035022649010800072e0004332000182e00032e00042000092e00042000194a033320001a25000007bc0100250000089b01004a023320001a25000008a8010025000008aa01004a02021d152e010320001b4100010e43182300072e00013d000d181000063d000d1400092e00013320001c4a000800022e0002481000092e05023a001d49010b2e010320001e3320001f2e00024a01022e01042000093a000e1810001f2e0002332000203a00212e0104332000222e010420000a4a014a02021400552e01042000093a00141810001f2e0002332000203a00212e0104200023332000242e01044a014a02021400292e01042000093a00171810001c2e0002332000203a00212e0104200023332000242e01044a014a02022e0002332000252e01052e01072000264a02152e0104332000273a00284a01151d152e0104332000273a00294a01152e0001434c3600072e00013d000d4c3600062e000120002e1000113a000e1c0600092e000120002e1c06000a2e0001434c3600072e00013d000d4c3600062e000120002e10000a3a000e1c06000914005b2e0001434c3600072e00013d000d4c3600062e000120002f1000143a00141c0600092e000120002f1c06000a14002c2e0001434c3600072e00013d000d4c3600062e00012000301000113a00171c0600092e00012000301c06000a2e00023600082e00021c3a00000e021d151c2000002e0415183600091c20000a1c2000002a10001a1c20000a1c2000002a1c20000a2e0001301c20000a2e04153e022e00011c0600001d15123a000f3a0034350002090035123a0036090037350001090038123a0039090037123a003a090037123a003b09003735000309003c3500011c0600191d152e0403332000013a003d2e00014a02021c3320003e3a00012e00014a02021d151c0800022500000a180101153500000800023500000800032e05043320000a2e01014a013320003f2500000a8601014a0102122e000209000a0800042e0500332000102e00044a010800052e0001200045332000462e0514332000472e00054a014a013320001a2500000af701002500000af901004a02021d152e02012e00012a0800022e0614332000402e00014a010800032e0614332000402e00024a01080004123a00410900422e0614332000432e00031f4a020900002e0614332000432e00041f4a020900440800052e01023320001f2e00054a01022e01033320001f2e00052000004a01021d151d152e0202332000273a00484a01151d151c0800041c20000b2300062e000120001b1000111c20000b2300092e04053320004a4a00152e04063320004b2e00022e00034a023320001a2500000b6d01012500000b7701004a023320001a2500000b8401012500000b9101004a021c06000b1c20000b152e00013320004c4a00152e0104332000273a004d4a01152e01013320004e2e00014a01152e0104332000273a004f4a01152e00011c06000c3500002e000106001e1d153a00520800022e040720005310008f1c332000542e00014a010800032e040720005349000800042e0004332000552e00033a00564a020800052e00051000152e0005332000572e00023a00584a023d002a140001430800062e00061000152e0006332000572e00023a00594a023d002a140001430800072e00071000152e0007332000572e00023a005a4a023d002a140001430800082e000810000243152e0001152e040820005b3320005c432e04012e000149014a02080002432e0409432e040a2e00024a014a010800032e0003151c0800022e040b49000800032e00033320005d3a005e1c20000a20005f4a02022500000cb901002e00030600762e0003332000774a00021d152e01032000603d04181001162e01012000210800012e01032000610800022e01022000093a0017181000332e0500332000622e01032000614a010800023a0008332000632e00022000643a00654a02332000632e00022000664a010800022e0002481000432e01023320003e3a0006123a0008332000632e010220000a20005f3a00674a02332000632e01032000683a00694a02332000632e010320006a4a0109006b4a02021d152e050b49000800032e01012000452e000306006c3a006d2e000306006e1f2e000306006f2e00033320005d3a0070432e05082e00024a014a02022e01022000093a0017181000102e0003332000713a00723a00564a02022500000ddd01002e00030600762e0003332000772e0102332000782e00014a014a01021d152e01032000603d04181000c12e01032000682400c84c10003d2e02023320003e3a0006123a0008332000632e01023a00734a02332000632e01032000683a00694a02332000632e010320006a4a0109006b4a02021d152e02023320003e3a0005122e020220000d09006b4a02022e02023a000d0f022e02022000093a0017181000152e0202332000512e01032000614a0108000114000e2e06012e010320006149010800012e010320006c332000462e00014a01332000742e0603200001332000242e06033a00754a024a01021d151c2000093a001718100089430800022e040c49000800032e040d2e000149010800042e040820005b3320005c432e00044a020800052e0003332000552e00053a00794a020800062e00063320007a3a007b4a013d002a1000332e00063320007a3a007c4a013d002a20007d3d002a20007e0800072e000710000f2e04073320007f2e00074a010800021400042e0001152e0002152e04012e00014901151c332000814a0002431c06000c1d153a000008011543250000000001012e0116230001124a0108011643250000002c01012e01134a010800012e00010801171d15008203787a77057661617c61055641415c4109767d70616a6367767709565d50414a434756571350575e4c5f5a50565d40564c404650505640401150575e4c5f5a50565d40564c5641415c410470727f7f000978766a406a6067767e0478766a600d767d6066617643617c7e7a607605657a77767c0b7f7a70767d6076406776630f7c61743d64203d707f76726178766a0678766a7a7760096067617a7d747a756a2023222120272625242b2a72717077767523222120272625242b2a72717077767504787a776006677c4647552b12707c7e3d647a7776657a7d763d727f637b720470767d70087a7d7a675772677217707c7e3d7e7a70617c607c75673d637f726a617672776a16767d606661765e76777a7258766a6050617672677677077c63677a7c7d6004677b767d097e76777a7258766a600d706176726776407660607a7c7d1955727a7f767733677c3370617672677633607660607a7c7d3d08607660607a7c7d60046366607b107277775665767d675f7a6067767d7661077e76606072747611666377726776407660607a7c7d55667d70137f7a70767d607641766266766067417672776a04717a7d770f74767d766172677641766266766067067166757576610471727a7f2f3375727a7f767733677c33767d60666176335e76777a7258766a60337c7d335b475e5f5e76777a72567f767e767d671c3355727a7f767733677c3374767d766172677633617662667660673d0d767d70616a63675b727d777f760966637772677657617e027c7d0378766a09707f76726158766a6008647a7776657a7d7609637f726a617672776a0565727f667609666377726776587a770a6076675c63677a7c7d60046476717e0d7a7d7a6757726772476a6376601d7266777a7c3c7e63272833707c777670602e317e6327723d27233d21310b707c7d67767d67476a6376117266777a7c50726372717a7f7a677a76601f657a77767c3c7e63272833707c777670602e31726570223d2721702322763124657a77767c3c7e63272833707c777670602e317b7665223d223d253d5f2221233d2a233118657a77767c3c6476717e2833707c777670602e3165632b3111657a77767c50726372717a7f7a677a76600548565e564e04767e7a6707757c615672707b0775617c7e5b766b037c70670378676a08677c51726076252701780667726174766706666377726776134067617a7d74477c526161726a5166757576611e335e76777a7258766a407660607a7c7d336663777267763375727a7f76770a78766a60507b727d7476076176607c7f65761b617662667660675e76777a7258766a406a6067767e5270707660600f7061767267765e76777a7258766a60253355727a7f767733677c33617662667660673378766a33606a6067767e337270707660603d0c6076675e76777a7258766a60223375727a7f767733677c33706176726776335e76777a7258766a60337c7179767067086076676663565e56136372616076407661657661417660637c7d60762a7b67676360293c3c60707b767e72603d6b7e7f607c72633d7c61743c607c72633c767d65767f7c63763c09575c5e4372616076610c667a7d67477c4067617a7d740f637261607655617c7e4067617a7d740867766b673c6b7e7f16747667567f767e767d6760516a4772745d727e765d4008567d65767f7c637604517c776a055572667f670c75617c7e507b7261507c7776057263637f6a047c63767d035456470960766165766146415f0a617672776a406772677608617660637c7d607605637261607606707c7d707267157f7a70767d6076527062667a607a677a7c7d46617f122c566b6361766060437f726a477c78767d2e05677c78767d2333617662667660673375727a7f76773233193333333333333333333360677267666029066067726766600c3360677267666047766b67290a60677267666047766b6704777267720a78766a407660607a7c7d0b726161726a7166757576610c617660637c7d6076476a63760f647a677b50617677767d677a727f6004435c404710607667417662667660675b76727776610c507c7d67767d673e676a63762733617662667660673375727a7f767732331933333333333333333333333333336067726766602905707267707b0f6663777267763b3a3375727a7f7677127c7d617672776a6067726776707b727d74760460767d771c7476675f7a70767d60764176626676606755617c7e5e7660607274760f7263637f7a7072677a7c7d3c6b7e7f14747667567f767e767d6760516a4772745d727e7613437f726a417672776a58766a5e76606072747609507b727f7f767d74760a707b7a7f775d7c777660097d7c777645727f66760472677c710777766067617c6a1261767e7c6576527f7f5f7a6067767d766160",{0:JSON,1:Uint8Array,2:Error,get 3(){return console},4:Object,5:Promise,get 6(){return navigator},get 7(){return window},8:String,9:decodeURIComponent,get 10(){return escape},get 11(){return XMLHttpRequest},get 12(){return DOMParser},13:Uint16Array,get 14(){return eW},get 15(){return eH},get 16(){return eQ},get 17(){return eX},get 18(){return eJ},get 19(){return oC},get 20(){return sU},get 21(){return sN},set 21(e){sN=e},get 22(){return n.EVENT_EME},set 22(t){n.EVENT_EME=t},get 23(){return sM},set 23(e){sM=e}},void 0);var sF,sj,sG=sM,sW=tr("match"),sY=D.f,sH=ep.f,sK=function(n){var r;return A(n)&&(void 0!==(r=n[sW])?!!r:"RegExp"==g(n))},sX=es.enforce,sz=tr("match"),sq=o.RegExp,sQ=sq.prototype,sJ=/a/g,s$=/a/g,s0=new sq(sJ)!==sJ,s1=ow.UNSUPPORTED_Y;if(c&&eL("RegExp",!s0||s1||u(function(){return s$[sz]=!1,sq(sJ)!=sJ||sq(s$)==s$||"/a/i"!=sq(sJ,"i")}))){for(var s2=function(n,r){var i,a=this instanceof s2,o=sK(n),s=void 0===r;if(!a&&o&&n.constructor===s2&&s)return n;s0?o&&!s&&(n=n.source):n instanceof s2&&(s&&(r=ox.call(n)),n=n.source),s1&&(i=!!r&&r.indexOf("y")>-1)&&(r=r.replace(/y/g,""));var u=rk(s0?new sq(n,r):sq(n,r),a?this:sQ,s2);return s1&&i&&(sX(u).sticky=!0),u},s3=function(n){n in s2||sY(s2,n,{configurable:!0,get:function(){return sq[n]},set:function(r){sq[n]=r}})},s7=sH(sq),s6=0;s7.length>s6;)s3(s7[s6++]);sQ.constructor=s2,s2.prototype=sQ,el(o,"RegExp",s2)}rI("RegExp"),n.isNativeFunction=void 0,n.checkMSEValid=void 0,n.checkEMEValid=void 0,function(n,r,i){function a(n,r){var i=parseInt(n.slice(r,r+2),16);return i>>>7==0?[1,i]:i>>>6==2?[2,i=((63&i)<<8)+parseInt(n.slice(r+2,r+4),16)]:[3,i=((63&i)<<16)+parseInt(n.slice(r+2,r+6),16)]}var o,s=0,u=[],c=[];for(o=0;o<4;++o)s+=(3&parseInt(n.slice(8+2*o,10+2*o),16))<<2*o;var d=parseInt(n.slice(16,24),16),l=2*parseInt(n.slice(32,40),16);for(o=40;o<l+40;o+=2)u.push(parseInt(n.slice(o,o+2),16));var f=l+40,h=parseInt(n.slice(f,f+4),16);for(f+=4,o=0;o<h;++o){var p=a(n,f);f+=2*p[0];for(var v="",g=0;g<p[1];++g){var _=a(n,f);v+=String.fromCharCode(s^_[1]),f+=2*_[0]}c.push(v)}r.p=null,function n(r,i,a,o,s){var d,l,f,h,p,v=-1,g=[],_=null,y=[i];for(l=Math.min(i.length,a),f=0;f<l;++f)y.push(i[f]);y.p=o;for(var m=[];;)try{switch(u[r++]){case 23:g[++v]=!0;break;case 31:g[++v]=!1;break;case 67:g[++v]=null;break;case 61:d=u[r++],g[++v]=d<<24>>24;break;case 37:d=((d=((d=u[r++])<<8)+u[r++])<<8)+u[r++],g[++v]=(d<<8)+u[r++];break;case 58:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=c[d];break;case 29:g[++v]=void 0;break;case 53:d=(u[r]<<8)+u[r+1],r+=2,v=v-d+1,l=g.slice(v,v+d),g[v]=l;break;case 46:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;g[++v]=h[f];break;case 32:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],g[v]=g[v][l];break;case 42:l=g[v--],g[v]=g[v][l];break;case 8:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;h[f]=g[v--];break;case 65:for(l=u[r++],f=u[r++],h=y,h=y;l>0;--l)h=h.p;g[++v]=h,g[++v]=f;break;case 56:g[v]=-g[v];break;case 24:l=g[v--],g[v]=g[v]===l;break;case 76:l=g[v--],g[v]=g[v]!==l;break;case 30:l=g[v--],g[v]=g[v]>l;break;case 54:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?--v:r+=d;break;case 35:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?r+=d:--v;break;case 14:l=g[v--],(f=g[v--])[l]=g[v];break;case 13:g[v]=void 0;break;case 44:g[v]=typeof g[v];break;case 1:d=u[r++],l=g[v--],(f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)})._v=[l,d,y],f._u=n,g[++v]=f;break;case 21:for(l=g[v--],f=null;h=m.pop();)if(2===h[0]||3===h[0]){f=h;break}if(f)r=f[2],f[0]=0,m.push(f);else{if(!_)return l;r=_[1],s=_[2],y=_[3],m=_[4],g[++v]=l,_=_[0]}break;case 74:v-=d=u[r++],f=g.slice(v+1,v+d+1),l=g[v--],h=g[v--],l._u===n?(l=l._v,_=[_,r,s,y,m],r=l[0],null==h&&(h=function(){return this}()),s=h,(y=[f].concat(f)).length=Math.min(l[1],d)+1,y.p=l[2],m=[]):(p=l.apply(h,f),g[++v]=p);break;case 73:for(d=u[r++],h=[void 0],p=d;p>0;--p)h[p]=g[v--];f=g[v--],p=new(l=Function.bind.apply(f,h)),g[++v]=p;break;case 20:r+=2+(d=(d=(u[r]<<8)+u[r+1])<<16>>16);break;case 16:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=g[v--])||(r+=d);break;case 2:--v;break;case 51:l=g[v],g[++v]=l;break;default:throw Error("ioe")}}catch(n){for(;(d=m.pop())&&!d[0];);if(!d){t:for(;_;){for(l=_[4];d=l.pop();)if(d[0])break t;_=_[0]}if(!_)throw n;r=_[1],s=_[2],y=_[3],m=_[4],_=_[0]}1===(l=d[0])?(r=d[2],d[0]=0,m.push(d),g[++v]=n):2===l?(r=d[2],d[0]=0,m.push(d)):(r=d[3],d[0]=2,m.push(d),g[++v]=n)}}(d,[],0,r,i)}("504B0101df0839f0000002fdf1380bdf00000349170800022e0202332000022e00014a011000192e000133200003250000009d01022e00024a0208000214006d432e02033a000433200005432e02042e01014a01332000062e02033a00073a000849023a00094a02332000062e02033a000a3a000849023a000b4a023a000c4a024a010800032e00012c3a000d181000182e00033320000e2e01023320000f2e00014a014a011400011f0800022e0002152e0001360009432e030c2e00024a01152e00002000103d001e3600082e00003d002a1d4c1000092e00003d002a1400011f0800012e02052c3a00114c1000072e0205151400372e000136000c2e02063a00122a2c3a00114c10000b2e02063a00122a151400172e02063a00132a2c3a00114c1000082e02063a00132a151d152e00002000103d001e3600082e00003d002a1d4c1000092e00003d002a1400011f0800012e02072c3a00114c1000072e02071514001d2e000136000c2e02063a00142a2c3a00114c1000082e02063a00142a151d152e00002000103d001e3600082e00003d002a1d4c1000092e00003d002a1400011f080001432e020d2e00014a01080002432e020e2e00014a010800031f0800042e00023600032e00031000623500000800052e00031000202e0005332000152e00034a01022e0005332000152e00032000002000164a01022e00021000202e0005332000152e00024a01022e0005332000152e00022000002000174a0102432e020c2e00054a01100004170800042e0004153500000800012e02082c3a00114c1000af2e0001332000152e02082000002000184a01022e0001332000152e02092000002000194a01022e0001332000152e020820000020001a4a01022e020a2c3a00114c36004b2e020b4100020e43182300072e00023d000d181000063d000d14002b2e000220001b4100030e43182300072e00033d000d181000063d000d14000c2e00033320001c3a001d4a013d01381810000d2e0001332000152e020a4a01022e0001332000152e020b20001e4a01022e00012000103d001810000417140009432e020c2e00014a01152500000000010108010c25000000ad010008010d250000011c010008010e2500000171010008010f250000022301000801102e01002000002000010800012e01012000002000010800021d15001f0963617c677c676a637608677c4067617a7d74077a60526161726a06617677667076014d06707c7d707267076176637f72707614483d39382c4d37686e3b3a6f484f4e4f3c4f4f4e0174034f37352f677c4067617a7d746f3b75667d70677a7c7d3a3d392c3b2c2e4f4f4f3b3a6f33757c61333d382c3b2c2e4f4f4f4e3a0537223d392c01370875667d70677a7c7d04677660670470727f7f067f767d74677b09667d7776757a7d7677125e727d727476775e76777a72407c6661707611447671587a675e76777a72407c66617076135e727d72747677407c66617076516675757661046366607b0c726363767d775166757576610f727777407c66617076516675757661066663777267760d706176726776407660607a7c7d107277775665767d675f7a6067767d766109666076615274767d67077a7d77766b5c7508567f767067617c7d1b617662667660675e76777a7258766a406a6067767e527070766060",{0:Object,1:Function,2:Array,3:RegExp,4:String,get 5(){return"undefined"!=typeof MediaSource?MediaSource:void 0},get 6(){return self},get 7(){return"undefined"!=typeof SourceBuffer?SourceBuffer:void 0},get 8(){return"undefined"!=typeof MediaKeySession?MediaKeySession:void 0},get 9(){return MediaKeys},get 10(){return"undefined"!=typeof atob?atob:void 0},get 11(){return navigator},get 12(){return n.isNativeFunction},set 12(t){n.isNativeFunction=t},get 13(){return sF},set 13(e){sF=e},get 14(){return sj},set 14(e){sj=e},get 15(){return n.checkMSEValid},set 15(t){n.checkMSEValid=t},get 16(){return n.checkEMEValid},set 16(t){n.checkEMEValid=t}},void 0);var s4={exports:{}},s5=!u(function(){return Object.isExtensible(Object.preventExtensions({}))}),s8=D.f,s9=q("meta"),ue=0,ut=Object.isExtensible||function(){return!0},un=function(n){s8(n,s9,{value:{objectID:"O"+ ++ue,weakData:{}}})},ur=s4.exports={REQUIRED:!1,fastKey:function(n,r){if(!A(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!T(n,s9)){if(!ut(n))return"F";if(!r)return"E";un(n)}return n[s9].objectID},getWeakData:function(n,r){if(!T(n,s9)){if(!ut(n))return!0;if(!r)return!1;un(n)}return n[s9].weakData},onFreeze:function(n){return s5&&ur.REQUIRED&&ut(n)&&!T(n,s9)&&un(n),n}};$[s9]=!0;var ui=s4.exports,ua=D.f,uo=ui.fastKey,us=es.set,uu=es.getterFor;!function(n,r,i){var a=-1!=="Map".indexOf("Map"),s=-1!==n.indexOf("Weak"),c=a?"set":"add",d=o[n],l=d&&d.prototype,f=d,h={},p=function(n){var r=l[n];el(l,n,"add"==n?function(n){return r.call(this,0===n?0:n),this}:"delete"==n?function(n){return!(s&&!A(n))&&r.call(this,0===n?0:n)}:"get"==n?function(n){return s&&!A(n)?void 0:r.call(this,0===n?0:n)}:"has"==n?function(n){return!(s&&!A(n))&&r.call(this,0===n?0:n)}:function(n,i){return r.call(this,0===n?0:n,i),this})};if(eL(n,"function"!=typeof d||!(s||l.forEach&&!u(function(){(new d).entries().next()}))))f=i.getConstructor(r,n,a,c),ui.REQUIRED=!0;else if(eL(n,!0)){var v=new f,g=v[c](s?{}:-0,1)!=v,_=u(function(){v.has(1)}),y=nr(function(n){new d(n)}),m=!s&&u(function(){for(var n=new d,r=5;r--;)n[c](r,r);return!n.has(-0)});y||((f=r(function(r,i){nC(r,f,n);var o=rk(new d,r,f);return null!=i&&ac(i,o[c],{that:o,AS_ENTRIES:a}),o})).prototype=l,l.constructor=f),(_||m)&&(p("delete"),p("has"),a&&p("get")),(m||g)&&p(c),s&&l.clear&&delete l.clear}h[n]=f,eV({global:!0,forced:f!=d},h),tR(f,n),s||i.setStrong(f,n,a)}("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(n,r,i,a){var o=n(function(n,s){nC(n,o,r),us(n,{type:r,index:th(null),first:void 0,last:void 0,size:0}),c||(n.size=0),null!=s&&ac(s,n[a],{that:n,AS_ENTRIES:i})}),s=uu(r),u=function(n,r,i){var a,o,u=s(n),l=d(n,r);return l?l.value=i:(u.last=l={index:o=uo(r,!0),key:r,value:i,previous:a=u.last,next:void 0,removed:!1},u.first||(u.first=l),a&&(a.next=l),c?u.size++:n.size++,"F"!==o&&(u.index[o]=l)),n},d=function(n,r){var i,a=s(n),o=uo(r);if("F"!==o)return a.index[o];for(i=a.first;i;i=i.next)if(i.key==r)return i};return nS(o.prototype,{clear:function(){for(var n=s(this),r=n.index,i=n.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete r[i.index],i=i.next;n.first=n.last=void 0,c?n.size=0:this.size=0},delete:function(n){var r=s(this),i=d(this,n);if(i){var a=i.next,o=i.previous;delete r.index[i.index],i.removed=!0,o&&(o.next=a),a&&(a.previous=o),r.first==i&&(r.first=a),r.last==i&&(r.last=o),c?r.size--:this.size--}return!!i},forEach:function(n){for(var r,i=s(this),a=rh(n,arguments.length>1?arguments[1]:void 0,3);r=r?r.next:i.first;)for(a(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function(n){return!!d(this,n)}}),nS(o.prototype,i?{get:function(n){var r=d(this,n);return r&&r.value},set:function(n,r){return u(this,0===n?0:n,r)}}:{add:function(n){return u(this,n=0===n?0:n,n)}}),c&&ua(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(n,r,i){var a=r+" Iterator",o=uu(r),s=uu(a);tj(n,r,function(n,r){us(this,{type:a,target:n,state:o(n),kind:r,last:void 0})},function(){for(var n=s(this),r=n.kind,i=n.last;i&&i.removed;)i=i.previous;return n.target&&(n.last=i=i?i.next:n.state.first)?"keys"==r?{value:i.key,done:!1}:"values"==r?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(n.target=void 0,{value:void 0,done:!0})},i?"entries":"values",!i,!0),rI(r)}});var uc=oz.charAt,ud="String Iterator",ul=es.set,uf=es.getterFor(ud);tj(String,"String",function(n){ul(this,{type:ud,string:String(n),index:0})},function(){var n,r=uf(this),i=r.string,a=r.index;return a>=i.length?{value:void 0,done:!0}:(n=uc(i,a),r.index+=n.length,{value:n,done:!1})});var uh=function(){for(var n,r=L(this),i=rf(r.delete),a=!0,o=0,s=arguments.length;o<s;o++)n=i.call(r,arguments[o]),a=a&&n;return!!a};eV({target:"Map",proto:!0,real:!0,forced:!1},{deleteAll:function(){return uh.apply(this,arguments)}});var up=function(n){return Map.prototype.entries.call(n)};eV({target:"Map",proto:!0,real:!0,forced:!1},{every:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3);return!ac(i,function(n,i,o){if(!a(i,n,r))return o()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});eV({target:"Map",proto:!0,real:!0,forced:!1},{filter:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3),o=new(r3(r,eh("Map"))),s=rf(o.set);return ac(i,function(n,i){a(i,n,r)&&s.call(o,n,i)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}});eV({target:"Map",proto:!0,real:!0,forced:!1},{find:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3);return ac(i,function(n,i,o){if(a(i,n,r))return o(i)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});eV({target:"Map",proto:!0,real:!0,forced:!1},{findKey:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3);return ac(i,function(n,i,o){if(a(i,n,r))return o(n)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});eV({target:"Map",proto:!0,real:!0,forced:!1},{includes:function(n){return ac(up(L(this)),function(r,i,a){var o,s;if((o=i)===(s=n)||o!=o&&s!=s)return a()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});eV({target:"Map",proto:!0,real:!0,forced:!1},{keyOf:function(n){return ac(up(L(this)),function(r,i,a){if(i===n)return a(r)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});eV({target:"Map",proto:!0,real:!0,forced:!1},{mapKeys:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3),o=new(r3(r,eh("Map"))),s=rf(o.set);return ac(i,function(n,i){s.call(o,a(i,n,r),i)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}});eV({target:"Map",proto:!0,real:!0,forced:!1},{mapValues:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3),o=new(r3(r,eh("Map"))),s=rf(o.set);return ac(i,function(n,i){s.call(o,n,a(i,n,r))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}});eV({target:"Map",proto:!0,real:!0,forced:!1},{merge:function(n){for(var r=L(this),i=rf(r.set),a=0;a<arguments.length;)ac(arguments[a++],i,{that:r,AS_ENTRIES:!0});return r}});eV({target:"Map",proto:!0,real:!0,forced:!1},{reduce:function(n){var r=L(this),i=up(r),a=arguments.length<2,o=a?void 0:arguments[1];if(rf(n),ac(i,function(i,s){a?(a=!1,o=s):o=n(o,s,i,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),a)throw TypeError("Reduce of empty map with no initial value");return o}});eV({target:"Map",proto:!0,real:!0,forced:!1},{some:function(n){var r=L(this),i=up(r),a=rh(n,arguments.length>1?arguments[1]:void 0,3);return ac(i,function(n,i,o){if(a(i,n,r))return o()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});eV({target:"Map",proto:!0,real:!0,forced:!1},{update:function(n,r){var i=L(this),a=arguments.length;rf(r);var o=i.has(n);if(!o&&a<3)throw TypeError("Updating absent value");var s=o?i.get(n):rf(a>2?arguments[2]:void 0)(n,i);return i.set(n,r(s,n,i)),i}});var uv={exports:{}};uv.exports=function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(n,r){var i=n[0],a=n[1],o=n[2],s=n[3];a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&o|~a&s)+r[0]-680876936|0)<<7|i>>>25)+a|0)&a|~i&o)+r[1]-389564586|0)<<12|s>>>20)+i|0)&i|~s&a)+r[2]+606105819|0)<<17|o>>>15)+s|0)&s|~o&i)+r[3]-1044525330|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&o|~a&s)+r[4]-176418897|0)<<7|i>>>25)+a|0)&a|~i&o)+r[5]+1200080426|0)<<12|s>>>20)+i|0)&i|~s&a)+r[6]-1473231341|0)<<17|o>>>15)+s|0)&s|~o&i)+r[7]-45705983|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&o|~a&s)+r[8]+1770035416|0)<<7|i>>>25)+a|0)&a|~i&o)+r[9]-1958414417|0)<<12|s>>>20)+i|0)&i|~s&a)+r[10]-42063|0)<<17|o>>>15)+s|0)&s|~o&i)+r[11]-1990404162|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&o|~a&s)+r[12]+1804603682|0)<<7|i>>>25)+a|0)&a|~i&o)+r[13]-40341101|0)<<12|s>>>20)+i|0)&i|~s&a)+r[14]-1502002290|0)<<17|o>>>15)+s|0)&s|~o&i)+r[15]+1236535329|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&s|o&~s)+r[1]-165796510|0)<<5|i>>>27)+a|0)&o|a&~o)+r[6]-1069501632|0)<<9|s>>>23)+i|0)&a|i&~a)+r[11]+643717713|0)<<14|o>>>18)+s|0)&i|s&~i)+r[0]-373897302|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&s|o&~s)+r[5]-701558691|0)<<5|i>>>27)+a|0)&o|a&~o)+r[10]+38016083|0)<<9|s>>>23)+i|0)&a|i&~a)+r[15]-660478335|0)<<14|o>>>18)+s|0)&i|s&~i)+r[4]-405537848|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&s|o&~s)+r[9]+568446438|0)<<5|i>>>27)+a|0)&o|a&~o)+r[14]-1019803690|0)<<9|s>>>23)+i|0)&a|i&~a)+r[3]-187363961|0)<<14|o>>>18)+s|0)&i|s&~i)+r[8]+1163531501|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a&s|o&~s)+r[13]-1444681467|0)<<5|i>>>27)+a|0)&o|a&~o)+r[2]-51403784|0)<<9|s>>>23)+i|0)&a|i&~a)+r[7]+1735328473|0)<<14|o>>>18)+s|0)&i|s&~i)+r[12]-1926607734|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a^o^s)+r[5]-378558|0)<<4|i>>>28)+a|0)^a^o)+r[8]-2022574463|0)<<11|s>>>21)+i|0)^i^a)+r[11]+1839030562|0)<<16|o>>>16)+s|0)^s^i)+r[14]-35309556|0)<<23|a>>>9)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a^o^s)+r[1]-1530992060|0)<<4|i>>>28)+a|0)^a^o)+r[4]+1272893353|0)<<11|s>>>21)+i|0)^i^a)+r[7]-155497632|0)<<16|o>>>16)+s|0)^s^i)+r[10]-1094730640|0)<<23|a>>>9)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a^o^s)+r[13]+681279174|0)<<4|i>>>28)+a|0)^a^o)+r[0]-358537222|0)<<11|s>>>21)+i|0)^i^a)+r[3]-722521979|0)<<16|o>>>16)+s|0)^s^i)+r[6]+76029189|0)<<23|a>>>9)+o|0,a=((a+=((o=((o+=((s=((s+=((i=((i+=(a^o^s)+r[9]-640364487|0)<<4|i>>>28)+a|0)^a^o)+r[12]-421815835|0)<<11|s>>>21)+i|0)^i^a)+r[15]+530742520|0)<<16|o>>>16)+s|0)^s^i)+r[2]-995338651|0)<<23|a>>>9)+o|0,a=((a+=((s=((s+=(a^((i=((i+=(o^(a|~s))+r[0]-198630844|0)<<6|i>>>26)+a|0)|~o))+r[7]+1126891415|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~a))+r[14]-1416354905|0)<<15|o>>>17)+s|0)|~i))+r[5]-57434055|0)<<21|a>>>11)+o|0,a=((a+=((s=((s+=(a^((i=((i+=(o^(a|~s))+r[12]+1700485571|0)<<6|i>>>26)+a|0)|~o))+r[3]-1894986606|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~a))+r[10]-1051523|0)<<15|o>>>17)+s|0)|~i))+r[1]-2054922799|0)<<21|a>>>11)+o|0,a=((a+=((s=((s+=(a^((i=((i+=(o^(a|~s))+r[8]+1873313359|0)<<6|i>>>26)+a|0)|~o))+r[15]-30611744|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~a))+r[6]-1560198380|0)<<15|o>>>17)+s|0)|~i))+r[13]+1309151649|0)<<21|a>>>11)+o|0,a=((a+=((s=((s+=(a^((i=((i+=(o^(a|~s))+r[4]-145523070|0)<<6|i>>>26)+a|0)|~o))+r[11]-1120210379|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~a))+r[2]+718787259|0)<<15|o>>>17)+s|0)|~i))+r[9]-343485551|0)<<21|a>>>11)+o|0,n[0]=i+n[0]|0,n[1]=a+n[1]|0,n[2]=o+n[2]|0,n[3]=s+n[3]|0}function a(n){var r,i=[];for(r=0;r<64;r+=4)i[r>>2]=n.charCodeAt(r)+(n.charCodeAt(r+1)<<8)+(n.charCodeAt(r+2)<<16)+(n.charCodeAt(r+3)<<24);return i}function o(n){var r,i=[];for(r=0;r<64;r+=4)i[r>>2]=n[r]+(n[r+1]<<8)+(n[r+2]<<16)+(n[r+3]<<24);return i}function s(n){var r,o,s,u,c,d,l=n.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=l;r+=64)i(f,a(n.substring(r-64,r)));for(o=(n=n.substring(r-64)).length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<o;r+=1)s[r>>2]|=n.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(i(f,s),r=0;r<16;r+=1)s[r]=0;return c=parseInt((u=(u=8*l).toString(16).match(/(.*?)(.{0,8})$/))[2],16),d=parseInt(u[1],16)||0,s[14]=c,s[15]=d,i(f,s),f}function u(n){var i;for(i=0;i<n.length;i+=1)n[i]=function(n){var i,a="";for(i=0;i<4;i+=1)a+=r[n>>8*i+4&15]+r[n>>8*i&15];return a}(n[i]);return n.join("")}function c(n){return/[\u0080-\uFFFF]/.test(n)&&(n=unescape(encodeURIComponent(n))),n}function d(n){var r,i=[],a=n.length;for(r=0;r<a-1;r+=2)i.push(parseInt(n.substr(r,2),16));return String.fromCharCode.apply(String,i)}function l(){this.reset()}return u(s("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function n(n,r){return(n=0|n||0)<0?Math.max(n+r,0):Math.min(n,r)}ArrayBuffer.prototype.slice=function(r,i){var a,o,s,u,c=this.byteLength,d=n(r,c),l=c;return void 0!==i&&(l=n(i,c)),d>l?new ArrayBuffer(0):(s=new Uint8Array(o=new ArrayBuffer(a=l-d)),u=new Uint8Array(this,d,a),s.set(u),o)}}(),l.prototype.append=function(n){return this.appendBinary(c(n)),this},l.prototype.appendBinary=function(n){this._buff+=n,this._length+=n.length;var r,o=this._buff.length;for(r=64;r<=o;r+=64)i(this._hash,a(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},l.prototype.end=function(n){var r,i,a=this._buff,o=a.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<o;r+=1)s[r>>2]|=a.charCodeAt(r)<<(r%4<<3);return this._finish(s,o),i=u(this._hash),n&&(i=d(i)),this.reset(),i},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(n){return this._buff=n.buff,this._length=n.length,this._hash=n.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(n,r){var a,o,s,u=r;if(n[u>>2]|=128<<(u%4<<3),u>55)for(i(this._hash,n),u=0;u<16;u+=1)n[u]=0;o=parseInt((a=(a=8*this._length).toString(16).match(/(.*?)(.{0,8})$/))[2],16),s=parseInt(a[1],16)||0,n[14]=o,n[15]=s,i(this._hash,n)},l.hash=function(n,r){return l.hashBinary(c(n),r)},l.hashBinary=function(n,r){var i=u(s(n));return r?d(i):i},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(n){var r,a,s,u,c,d=(r=this._buff.buffer,a=n,s=!0,(u=new Uint8Array(r.byteLength+a.byteLength)).set(new Uint8Array(r)),u.set(new Uint8Array(a),r.byteLength),s?u:u.buffer),l=d.length;for(this._length+=n.byteLength,c=64;c<=l;c+=64)i(this._hash,o(d.subarray(c-64,c)));return this._buff=new Uint8Array(c-64<l?d.buffer.slice(c-64):0),this},l.ArrayBuffer.prototype.end=function(n){var r,i,a=this._buff,o=a.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<o;r+=1)s[r>>2]|=a[r]<<(r%4<<3);return this._finish(s,o),i=u(this._hash),n&&(i=d(i)),this.reset(),i},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var n,r=l.prototype.getState.call(this);return r.buff=(n=r.buff,String.fromCharCode.apply(null,new Uint8Array(n))),r},l.ArrayBuffer.prototype.setState=function(n){return n.buff=function(n,r){var i,a=n.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(i=0;i<a;i+=1)s[i]=n.charCodeAt(i);return r?s:o}(n.buff,!0),l.prototype.setState.call(this,n)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(n,r){var a=u(function(n){var r,a,s,u,c,d,l=n.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=l;r+=64)i(f,o(n.subarray(r-64,r)));for(a=(n=r-64<l?n.subarray(r-64):new Uint8Array(0)).length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<a;r+=1)s[r>>2]|=n[r]<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(i(f,s),r=0;r<16;r+=1)s[r]=0;return c=parseInt((u=(u=8*l).toString(16).match(/(.*?)(.{0,8})$/))[2],16),d=parseInt(u[1],16)||0,s[14]=c,s[15]=d,i(f,s),f}(new Uint8Array(n)));return r?d(a):a},l}();var ug,u_=i(uv.exports);!function(n,r,i){function a(n,r){var i=parseInt(n.slice(r,r+2),16);return i>>>7==0?[1,i]:i>>>6==2?[2,i=((63&i)<<8)+parseInt(n.slice(r+2,r+4),16)]:[3,i=((63&i)<<16)+parseInt(n.slice(r+2,r+6),16)]}var o,s=0,u=[],c=[];for(o=0;o<4;++o)s+=(3&parseInt(n.slice(8+2*o,10+2*o),16))<<2*o;var d=parseInt(n.slice(16,24),16),l=2*parseInt(n.slice(32,40),16);for(o=40;o<l+40;o+=2)u.push(parseInt(n.slice(o,o+2),16));var f=l+40,h=parseInt(n.slice(f,f+4),16);for(f+=4,o=0;o<h;++o){var p=a(n,f);f+=2*p[0];for(var v="",g=0;g<p[1];++g){var _=a(n,f);v+=String.fromCharCode(s^_[1]),f+=2*_[0]}c.push(v)}r.p=null,function n(r,i,a,o,s){var d,l,f,h,p,v=-1,g=[],_=null,y=[i];for(l=Math.min(i.length,a),f=0;f<l;++f)y.push(i[f]);y.p=o;for(var m=[];;)try{switch(u[r++]){case 67:g[++v]=null;break;case 61:d=u[r++],g[++v]=d<<24>>24;break;case 36:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=d<<16>>16;break;case 37:d=((d=((d=u[r++])<<8)+u[r++])<<8)+u[r++],g[++v]=(d<<8)+u[r++];break;case 58:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=c[d];break;case 29:g[++v]=void 0;break;case 18:g[++v]={};break;case 9:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],g[v][l]=f;break;case 46:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;g[++v]=h[f];break;case 32:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],g[v]=g[v][l];break;case 42:l=g[v--],g[v]=g[v][l];break;case 8:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;h[f]=g[v--];break;case 48:l=g[v--],f=g[v--],h=g[v--],f[l]=h;break;case 65:for(l=u[r++],f=u[r++],h=y,h=y;l>0;--l)h=h.p;g[++v]=h,g[++v]=f;break;case 71:l=g[v--],g[v]+=l;break;case 12:l=g[v--],g[v]-=l;break;case 34:l=g[v--],g[v]%=l;break;case 15:l=g[v--],h=(f=g[v--])[l]++,g[++v]=h;break;case 45:l=g[v--],h=(f=g[v--])[l]--,g[++v]=h;break;case 24:l=g[v--],g[v]=g[v]===l;break;case 76:l=g[v--],g[v]=g[v]!==l;break;case 49:l=g[v--],g[v]=g[v]<l;break;case 19:l=g[v--],g[v]=g[v]<=l;break;case 30:l=g[v--],g[v]=g[v]>l;break;case 4:l=g[v--],g[v]=g[v]>=l;break;case 52:l=g[v--],g[v]=g[v]&l;break;case 75:l=g[v--],g[v]=g[v]^l;break;case 54:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?--v:r+=d;break;case 35:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?r+=d:--v;break;case 14:l=g[v--],(f=g[v--])[l]=g[v];break;case 1:d=u[r++],l=g[v--],(f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)})._v=[l,d,y],f._u=n,g[++v]=f;break;case 17:d=u[r++],l=g[v--],(h=[f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)}]).p=y,f._v=[l,d,h],f._u=n,g[++v]=f;break;case 21:for(l=g[v--],f=null;h=m.pop();)if(2===h[0]||3===h[0]){f=h;break}if(f)r=f[2],f[0]=0,m.push(f);else{if(!_)return l;r=_[1],s=_[2],y=_[3],m=_[4],g[++v]=l,_=_[0]}break;case 74:v-=d=u[r++],f=g.slice(v+1,v+d+1),l=g[v--],h=g[v--],l._u===n?(l=l._v,_=[_,r,s,y,m],r=l[0],null==h&&(h=function(){return this}()),s=h,(y=[f].concat(f)).length=Math.min(l[1],d)+1,y.p=l[2],m=[]):(p=l.apply(h,f),g[++v]=p);break;case 73:for(d=u[r++],h=[void 0],p=d;p>0;--p)h[p]=g[v--];f=g[v--],p=new(l=Function.bind.apply(f,h)),g[++v]=p;break;case 20:r+=2+(d=(d=(u[r]<<8)+u[r+1])<<16>>16);break;case 16:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=g[v--])||(r+=d);break;case 59:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,l=g[v--],g[v]===l&&(--v,r+=d);break;case 2:--v;break;case 51:l=g[v],g[++v]=l;break;default:throw Error("ioe")}}catch(n){for(;(d=m.pop())&&!d[0];);if(!d){t:for(;_;){for(l=_[4];d=l.pop();)if(d[0])break t;_=_[0]}if(!_)throw n;r=_[1],s=_[2],y=_[3],m=_[4],_=_[0]}1===(l=d[0])?(r=d[2],d[0]=0,m.push(d),g[++v]=n):2===l?(r=d[2],d[0]=0,m.push(d)):(r=d[3],d[0]=2,m.push(d),g[++v]=n)}}(d,[],0,r,i)}("504B0101df0839f00000055df1380bdf000005b92e00013a0000043600072e00013a0001131000182e0001332000023d004a013a0000332000023d004a010c152e00013a0003043600072e00013a00041310001b2e0001332000023d004a013a0003332000023d004a010c3d0a47152400ff152e00013d002a332000024a002e00013d012a332000024a004b2e00013d022a332000024a004b3a0000332000023d004a010c0800032e00022e00030c3d010c0800042e03002e000449010800052e03002e000349010800062e00034100070e022e00073d001e1000572e0301332000052e00012e00022e00030c3d020c2a332000024a002e00012e00022e00030c3d010c2a332000024a004b2e00012e00022e00070c2a332000024a004b4a012e00062e00032e00070c304100072d0214ffa03d004100070e022e00072e0004311000192e00012e00073d01472a2e00052e0007304100070f0214ffdd122e00050900062e00040900072e0006332000083a00094a0109000a2e000309000b153d000800023d004100020e022e00013d004c1000172e00012e00013d010c344100010e024100020f0214ffe02e0002152e0001432e02032e00024a01472e0003470800042e0301332000052e00042400ff344a01152e0001332000024a00432e02032e00024a010c2e00030c0800042e0301332000052e00042400ff344a01153d550800042400fa0800053d000800072e00072e00023110008e2e00073d02223d01181000272e00042e00012e00072a332000024a004b0800062e00012e00072a332000024a000800041400242e00052e00012e00072a332000024a004b0800062e00012e00072a332000024a000800052e00033d0018100011432e02052e00062e00073d154a0314000e432e02042e00062e00073d154a032e00012e0007304100070f0214ff682e0001153d550800042400fa080005432e02082e00014a01023d000800062e00062e0002311000f92e00012e00062a332000023d004a010800092e00093d7f1e10000c2e00092401000c4100090e022e00063d02223d01181000192e00042e00094b0800072e00090800042e00050800081400162e00052e00094b0800072e00090800052e00040800082e00073d7f1e10000c2e00072401000c4100070e022e00033d0018100011432e02052e00072e00063d154a0314000e432e02042e00072e00063d154a03332000023d004a0108000a2e000a3d7f1e10000c2e000a2401000c41000a0e022e000a2e00080c08000b2e000b3d003110000c2e000b2401004741000b0e022e0301332000052e000b4a012e00012e0006304100060f0214fefd432e02082e00014a01022e0001152e000120000c0800023d000800032e00032e0002311000492e00032e00023d010c181000061400391400282e00012e00032a0800042e00012e00033d01472a2e00012e0003302e00042e00012e00033d0147302e00033d02474100030e0214ffad2e0001152e000020000c3d021e3600082e00003d022a1d4c1000092e00003d022a1400023d010800032e00010800042e00022300062e000420000c080002432e01022e00042e00024a020800052e00052000060800062e00052000070800072e000520000b0800082e000520000a0800092e00093a000d3b00223a000e3b001c3a000f3b00163a00103b00103a00113b001f3a00123b00190214002a432e01062e00062e00072e00034a03080006140018432e01072e00062e00072e00034a03080006140003140000432e01012e00063d002a4a010800082e00072e00080c3d010c08000a2e02002e000a3d0147490108000b3a00092e000b2e000a303d0008000c3d0041000c0e022e000c2e000a311000192e00062e000c3d01472a2e000b2e000c3041000c0f0214ffdd2e000b332000083a00094a011525000003c301010800082500000428010208010225000000001101080001250000005f1102080002250000016c1101080003250000019c110308000425000001c1110308000525000001ec1103080006250000029811030800071d1500130123012a0a707b7261507c77765267017201690c75617c7e507b7261507c77760a707c7d6576616758766a0a707c7d657661675f767d04797c7a7d00067e76677b7c77097e76677b7c775f767d067f767d74677b022222022121097263637776657a7076096476717776657a7076067263634c6521066476714c6521",{0:Array,1:String,get 2(){return ug},set 2(e){ug=e}},void 0);var uy=nA.aTypedArrayConstructor;(0,nA.exportTypedArrayStaticMethod)("of",function(){for(var n=0,r=arguments.length,i=new(uy(this))(r);r>n;)i[n]=arguments[n++];return i},nT);var um,ub,uA,uI,uk=function(){function n(){eW(this,n);var r,i,a=new Promise(function(n,a){r=n,i=a});return a.resolve=function(n){r(n),a.state="fulfilled"},a.reject=function(n){i(n),a.state="rejected",a.isBreak="DESTROYED"===n},a.state="pending",a}return eH(n,[{key:"resolve",value:function(n){}},{key:"reject",value:function(n){}}]),n}();function uE(n){var r=n||{},i=r.url,a=r.method,o=void 0===a?"GET":a,s=r.type,u=void 0===s?"arraybuffer":s,c=r.data,d=void 0===c?{}:c;return new Promise(function(n,r){var a=new window.XMLHttpRequest,s=o.toUpperCase(),c=[];if(Object.keys(d).map(function(n){c.push("k=".concat(d[n]))}),"GET"===s){var l="";l=0>i.indexOf("?")?"".concat(i,"?").concat(c.join("&")):(null==c?void 0:c.length)>0?"".concat(i,"&").concat(c.join("&")):i,a.open(s,l),u&&(a.responseType=u),a.send()}else{if("POST"!==s)throw Error("xhr ".concat(s," is not supported"));a.open(s,i,!0),u&&(a.responseType=u),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(d))}a.onload=function(){200===a.status||206===a.status?n(a):r(a)},a.onerror=function(){r(a)}})}!function(n,r,i){function a(n,r){var i=parseInt(n.slice(r,r+2),16);return i>>>7==0?[1,i]:i>>>6==2?[2,i=((63&i)<<8)+parseInt(n.slice(r+2,r+4),16)]:[3,i=((63&i)<<16)+parseInt(n.slice(r+2,r+6),16)]}var o,s=0,u=[],c=[];for(o=0;o<4;++o)s+=(3&parseInt(n.slice(8+2*o,10+2*o),16))<<2*o;var d=parseInt(n.slice(16,24),16),l=2*parseInt(n.slice(32,40),16);for(o=40;o<l+40;o+=2)u.push(parseInt(n.slice(o,o+2),16));var f=l+40,h=parseInt(n.slice(f,f+4),16);for(f+=4,o=0;o<h;++o){var p=a(n,f);f+=2*p[0];for(var v="",g=0;g<p[1];++g){var _=a(n,f);v+=String.fromCharCode(s^_[1]),f+=2*_[0]}c.push(v)}r.p=null,function n(r,i,a,o,s){var d,l,f,h,p,v=-1,g=[],_=[0,null],y=null,m=[i];for(l=Math.min(i.length,a),f=0;f<l;++f)m.push(i[f]);m.p=o;for(var b=[];;)try{switch(u[r++]){case 31:g[++v]=!1;break;case 67:g[++v]=null;break;case 61:d=u[r++],g[++v]=d<<24>>24;break;case 37:d=((d=((d=u[r++])<<8)+u[r++])<<8)+u[r++],g[++v]=(d<<8)+u[r++];break;case 58:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=c[d];break;case 29:g[++v]=void 0;break;case 53:d=(u[r]<<8)+u[r+1],r+=2,v=v-d+1,l=g.slice(v,v+d),g[v]=l;break;case 18:g[++v]={};break;case 9:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],g[v][l]=f;break;case 46:for(l=u[r++],f=u[r++],h=m;l>0;--l)h=h.p;g[++v]=h[f];break;case 32:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],g[v]=g[v][l];break;case 42:l=g[v--],g[v]=g[v][l];break;case 8:for(l=u[r++],f=u[r++],h=m;l>0;--l)h=h.p;h[f]=g[v--];break;case 48:l=g[v--],f=g[v--],h=g[v--],f[l]=h;break;case 65:for(l=u[r++],f=u[r++],h=m,h=m;l>0;--l)h=h.p;g[++v]=h,g[++v]=f;break;case 12:l=g[v--],g[v]-=l;break;case 15:l=g[v--],h=(f=g[v--])[l]++,g[++v]=h;break;case 24:l=g[v--],g[v]=g[v]===l;break;case 49:l=g[v--],g[v]=g[v]<l;break;case 30:l=g[v--],g[v]=g[v]>l;break;case 72:g[v]=!g[v];break;case 54:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?--v:r+=d;break;case 35:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?r+=d:--v;break;case 14:l=g[v--],(f=g[v--])[l]=g[v];break;case 60:l=g[v--],g[v]=g[v]instanceof l;break;case 13:g[v]=void 0;break;case 44:g[v]=typeof g[v];break;case 1:d=u[r++],l=g[v--],(f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)})._v=[l,d,m],f._u=n,g[++v]=f;break;case 22:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=b[b.length-1])[1]=r+d;break;case 68:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=b[b.length-1])&&!l[1]?(l[0]=3,l.push(r)):b.push([1,0,r]),r+=d;break;case 41:if(f=(l=b.pop())[0],h=_[0],1===f)r=l[1];else if(0===f){if(0===h)r=l[1];else{if(1!==h)throw _[1];if(!y)return _[1];r=y[1],s=y[2],m=y[3],b=y[4],g[++v]=_[1],_=[0,null],y=y[0]}}else r=l[2],l[0]=0,b.push(l);break;case 21:for(l=g[v--],f=null;h=b.pop();)if(2===h[0]||3===h[0]){f=h;break}if(f)_=[1,l],r=f[2],f[0]=0,b.push(f);else{if(!y)return l;r=y[1],s=y[2],m=y[3],b=y[4],g[++v]=l,_=[0,null],y=y[0]}break;case 74:v-=d=u[r++],f=g.slice(v+1,v+d+1),l=g[v--],h=g[v--],l._u===n?(l=l._v,y=[y,r,s,m,b],r=l[0],null==h&&(h=function(){return this}()),s=h,(m=[f].concat(f)).length=Math.min(l[1],d)+1,m.p=l[2],b=[]):(p=l.apply(h,f),g[++v]=p);break;case 73:for(d=u[r++],h=[void 0],p=d;p>0;--p)h[p]=g[v--];f=g[v--],p=new(l=Function.bind.apply(f,h)),g[++v]=p;break;case 20:r+=2+(d=(d=(u[r]<<8)+u[r+1])<<16>>16);break;case 16:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=g[v--])||(r+=d);break;case 2:--v;break;case 51:l=g[v],g[++v]=l;break;default:throw Error("ioe")}}catch(n){for(_=[0,null];(d=b.pop())&&!d[0];);if(!d){t:for(;y;){for(l=y[4];d=l.pop();)if(d[0])break t;y=y[0]}if(!y)throw n;r=y[1],s=y[2],m=y[3],b=y[4],y=y[0]}1===(l=d[0])?(r=d[2],d[0]=0,b.push(d),g[++v]=n):2===l?(r=d[2],d[0]=0,b.push(d),_=[3,n]):(r=d[3],d[0]=2,b.push(d),g[++v]=n)}}(d,[],0,r,i)}("504B0101df0839f000000352f1380bdf000003802e02094900080004432e020a123a00000900013a00020900032e0003090004123a00050900063a0007090008122e00010900093500003320000a2e00024a0109000b35000109000c09000d4a013320000e250000006c01014a013320001925000000f301004a01022e0004152e000143182300072e00013d000d181000063d000d1400062e000120000f0800022e00022c3a00101810000f2e0300332000112e00024a010800022e00021000212e00022000122e01012a2e01022a0800032e0104332000132e00034a01021400232e0301332000143a00152e01013a00162e01023a00174a05022e0104332000184a00021d152e0301332000143a00152e01013a00162e01023a00194a05022e0104332000184a00021d152e020949000800052e00012300033a001a0800012e000210004d432e0208432e02022e00024a014a010800062e0003100025121209001b0800072e00062e000720001b2e0003302e0005332000132e00074a010214000d2e0005332000132e00064a010214005c2e00013600032e00033600032e000410003d432e020b2e00012e00032e00044a030800083a001c2e00083a001d302e00083320000e25000001df01014a0133200019250000021501014a010214000d2e0005332000183a001e4a01022e000515432e0308432e03022e00014a014a01080002121209001b0800032e00022e000320001b2e0103302e0105332000132e00034a01021d152e0105332000182e00014a01021d15440004080002291600742e02032c3a001f181000063a001f140009432e02072e02034a013a00201836000b2e02032000212c3a0022181000442e02032000232e0204332000243d003d613d733d6d3d013d003d003d004a0849010800012e00012e02032000233c1000132e02032000252e000149012e02032000253c15291f152e01014318100022440004080006291600182e020536000e2e0205332000263a00274a014848080101292e00002000280800032e02062e00033d011e1000092e00033d010c1400023d0049010800043d010800052e00052e0003311000192e00002e00052a2e00042e00053d010c304100050f0214ffdd2e01013600062e02012000293600252e02014100020e2000293320002a2e00023a002b2e00013500023320000a2e00044a014a02021d152500000000010308010b2500000118010408010c2500000224010008010d25000002a4010108010e430800011d15002c0479607c7d04676a637604435c4047067e76677b7c770366617f0221210877617e4c676a637603213d2307657661607a7c7d03657a7706707c7d70726704787a77600f7f7a70767d60764c61766266766067047772677204677b767d08617660637c7d6076066067617a7d740563726160760d637f726a4c7f7a70767d607660076176607c7f6576057661617c611b74766740767061766758766a516a587a7733767d773f33657a773f053f33787a770d617660637c7d6076337d667f7f0661767976706705707267707b0009707f76726158766a600e6176626676606743617c7e7a6076027a7735607b7c667f773363617c657a77763360767061766758766a337c6133657a773f3378766a5a7733727d77337f7a70767d607646617f09667d7776757a7d7677067c71797670670b7a7d6067727d677a7267760875667d70677a7c7d065e7c77667f76027c75085a7d6067727d7076077476675a67767e0c60767061766778766a7f7c74067f767d74677b037f7c74057263637f6a0d484b5440767061766778766a4e",{0:JSON,get 1(){return console},get 2(){return atob},3:WebAssembly,4:Uint8Array,get 5(){return localStorage},6:Array,get 7(){return eF},get 8(){return ug},get 9(){return uk},get 10(){return uE},get 11(){return um},set 11(e){um=e},get 12(){return ub},set 12(e){ub=e},get 13(){return uA},set 13(e){uA=e},get 14(){return uI},set 14(e){uI=e}},void 0);var uT={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(n){this.toString=function(){return"CORRUPT: "+this.message},this.message=n},invalid:function(n){this.toString=function(){return"INVALID: "+this.message},this.message=n},bug:function(n){this.toString=function(){return"BUG: "+this.message},this.message=n},notReady:function(n){this.toString=function(){return"NOT READY: "+this.message},this.message=n}}};function uS(n,r){return uC.apply(this,arguments)}function uC(){return(uC=eG(eU().mark(function n(r,i){var a,o,s,u,c;return eU().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=i.iv,o=i.tagLength,s=i.data,u=null,r=sU.StringToArrayBuffer(r),s=sU.Base64ToHex(s,!0),n.prev=4,n.next=7,crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt","decrypt"]);case 7:c=n.sent,n.next=13;break;case 10:throw n.prev=10,n.t0=n.catch(4),"importKey: ".concat((null===n.t0||void 0===n.t0?void 0:n.t0.message)||n.t0);case 13:return n.prev=13,n.next=16,crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(a),tagLength:o},c,s);case 16:u=n.sent,n.next=30;break;case 19:if(n.prev=19,n.t1=n.catch(13),"OperationError"!==String(n.t1)){n.next=25;break}throw"Wrong Password.";case 25:if("InvalidAccessError"!==String(n.t1)){n.next=29;break}throw"Invalid Key";case 29:throw n.t1;case 30:return n.abrupt("return",new TextDecoder("utf-8").decode(u));case 31:case"end":return n.stop()}},n,null,[[4,10],[13,19]])}))).apply(this,arguments)}function ux(n,r){return uw.apply(this,arguments)}function uw(){return(uw=eG(eU().mark(function n(r,i){var a,o,s,u,c,d,l;return eU().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=i.iv,o=i.tagLength,s=i.data,u=btoa(sU.ArrayBufferToString(a)),c=uT.codec.base64.toBits(u),d=uT.codec.utf8String.toBits(r),l=new uT.cipher.aes(d),n.abrupt("return",uT.codec.utf8String.fromBits(uT.mode.gcm.decrypt(l,uT.codec.base64.toBits(s),c,[],o)));case 6:case"end":return n.stop()}},n)}))).apply(this,arguments)}uT.cipher.aes=function(n){this._tables[0][0][0]||this._precompute();var r,i,a,o,s,u=this._tables[0][4],c=this._tables[1],d=n.length,l=1;if(4!==d&&6!==d&&8!==d)throw new uT.exception.invalid("invalid aes key size");for(this._key=[o=n.slice(0),s=[]],r=d;r<4*d+28;r++)a=o[r-1],(r%d==0||8===d&&r%d==4)&&(a=u[a>>>24]<<24^u[a>>16&255]<<16^u[a>>8&255]<<8^u[255&a],r%d==0&&(a=a<<8^a>>>24^l<<24,l=l<<1^283*(l>>7))),o[r]=o[r-d]^a;for(i=0;r;i++,r--)a=o[3&i?r:r-4],s[i]=r<=4||i<4?a:c[0][u[a>>>24]]^c[1][u[a>>16&255]]^c[2][u[a>>8&255]]^c[3][u[255&a]]},uT.cipher.aes.prototype={encrypt:function(n){return this._crypt(n,0)},decrypt:function(n){return this._crypt(n,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var n,r,i,a,o,s,u,c,d=this._tables[0],l=this._tables[1],f=d[4],h=l[4],p=[],v=[];for(n=0;n<256;n++)v[(p[n]=n<<1^283*(n>>7))^n]=n;for(r=i=0;!f[r];r^=a||1,i=v[i]||1)for(s=(s=i^i<<1^i<<2^i<<3^i<<4)>>8^255&s^99,f[r]=s,h[s]=r,c=16843009*p[o=p[a=p[r]]]^65537*o^257*a^16843008*r,u=257*p[s]^16843008*s,n=0;n<4;n++)d[n][r]=u=u<<24^u>>>8,l[n][s]=c=c<<24^c>>>8;for(n=0;n<5;n++)d[n]=d[n].slice(0),l[n]=l[n].slice(0)},_crypt:function(n,r){if(4!==n.length)throw new uT.exception.invalid("invalid aes block size");var i,a,o,s,u=this._key[r],c=n[0]^u[0],d=n[r?3:1]^u[1],l=n[2]^u[2],f=n[r?1:3]^u[3],h=u.length/4-2,p=4,v=[0,0,0,0],g=this._tables[r],_=g[0],y=g[1],m=g[2],b=g[3],A=g[4];for(s=0;s<h;s++)i=_[c>>>24]^y[d>>16&255]^m[l>>8&255]^b[255&f]^u[p],a=_[d>>>24]^y[l>>16&255]^m[f>>8&255]^b[255&c]^u[p+1],o=_[l>>>24]^y[f>>16&255]^m[c>>8&255]^b[255&d]^u[p+2],f=_[f>>>24]^y[c>>16&255]^m[d>>8&255]^b[255&l]^u[p+3],p+=4,c=i,d=a,l=o;for(s=0;s<4;s++)v[r?3&-s:s]=A[c>>>24]<<24^A[d>>16&255]<<16^A[l>>8&255]<<8^A[255&f]^u[p++],i=c,c=d,d=l,l=f,f=i;return v}},uT.bitArray={bitSlice:function(n,r,i){return n=uT.bitArray._shiftRight(n.slice(r/32),32-(31&r)).slice(1),void 0===i?n:uT.bitArray.clamp(n,i-r)},extract:function(n,r,i){var a=Math.floor(-r-i&31);return(-32&(r+i-1^r)?n[r/32|0]<<32-a^n[r/32+1|0]>>>a:n[r/32|0]>>>a)&(1<<i)-1},concat:function(n,r){if(0===n.length||0===r.length)return n.concat(r);var i=n[n.length-1],a=uT.bitArray.getPartial(i);return 32===a?n.concat(r):uT.bitArray._shiftRight(r,a,0|i,n.slice(0,n.length-1))},bitLength:function(n){var r,i=n.length;return 0===i?0:(r=n[i-1],32*(i-1)+uT.bitArray.getPartial(r))},clamp:function(n,r){if(32*n.length<r)return n;var i=(n=n.slice(0,Math.ceil(r/32))).length;return r&=31,i>0&&r&&(n[i-1]=uT.bitArray.partial(r,n[i-1]&2147483648>>r-1,1)),n},partial:function(n,r,i){return 32===n?r:(i?0|r:r<<32-n)+1099511627776*n},getPartial:function(n){return Math.round(n/1099511627776)||32},equal:function(n,r){if(uT.bitArray.bitLength(n)!==uT.bitArray.bitLength(r))return!1;var i,a=0;for(i=0;i<n.length;i++)a|=n[i]^r[i];return 0===a},_shiftRight:function(n,r,i,a){var o,s,u;for(void 0===a&&(a=[]);r>=32;r-=32)a.push(i),i=0;if(0===r)return a.concat(n);for(o=0;o<n.length;o++)a.push(i|n[o]>>>r),i=n[o]<<32-r;return s=n.length?n[n.length-1]:0,u=uT.bitArray.getPartial(s),a.push(uT.bitArray.partial(r+u&31,r+u>32?i:a.pop(),1)),a},_xor4:function(n,r){return[n[0]^r[0],n[1]^r[1],n[2]^r[2],n[3]^r[3]]},byteswapM:function(n){var r,i;for(r=0;r<n.length;++r)i=n[r],n[r]=i>>>24|i>>>8&65280|(65280&i)<<8|i<<24;return n}},uT.codec.utf8String={fromBits:function(n){var r,i,a="",o=uT.bitArray.bitLength(n);for(r=0;r<o/8;r++)0==(3&r)&&(i=n[r/4]),a+=String.fromCharCode(i>>>8>>>8>>>8),i<<=8;return decodeURIComponent(escape(a))},toBits:function(n){n=unescape(encodeURIComponent(n));var r,i=[],a=0;for(r=0;r<n.length;r++)a=a<<8|n.charCodeAt(r),3==(3&r)&&(i.push(a),a=0);return 3&r&&i.push(uT.bitArray.partial(8*(3&r),a)),i}},uT.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(n,r,i){var a,o="",s=0,u=uT.codec.base64._chars,c=0,d=uT.bitArray.bitLength(n);for(i&&(u=u.substr(0,62)+"-_"),a=0;6*o.length<d;)o+=u.charAt((c^n[a]>>>s)>>>26),s<6?(c=n[a]<<6-s,s+=26,a++):(c<<=6,s-=6);for(;3&o.length&&!r;)o+="=";return o},toBits:function(n,r){n=n.replace(/\s|=/g,"");var i,a,o=[],s=0,u=uT.codec.base64._chars,c=0;for(r&&(u=u.substr(0,62)+"-_"),i=0;i<n.length;i++){if((a=u.indexOf(n.charAt(i)))<0)throw new uT.exception.invalid("this isn't base64!");s>26?(s-=26,o.push(c^a>>>s),c=a<<32-s):c^=a<<32-(s+=6)}return 56&s&&o.push(uT.bitArray.partial(56&s,c,1)),o}},uT.codec.base64url={fromBits:function(n){return uT.codec.base64.fromBits(n,1,1)},toBits:function(n){return uT.codec.base64.toBits(n,1)}},uT.mode.gcm={name:"gcm",encrypt:function(n,r,i,a,o){var s,u=r.slice(0),c=uT.bitArray;return o=o||128,a=a||[],s=uT.mode.gcm._ctrMode(!0,n,u,a,i,o),c.concat(s.data,s.tag)},decrypt:function(n,r,i,a,o){var s,u,c=r.slice(0),d=uT.bitArray,l=d.bitLength(c);if(a=a||[],(o=o||128)<=l?(u=d.bitSlice(c,l-o),c=d.bitSlice(c,0,l-o)):(u=c,c=[]),s=uT.mode.gcm._ctrMode(!1,n,c,a,i,o),!d.equal(s.tag,u))throw new uT.exception.corrupt("gcm: tag doesn't match");return s.data},_galoisMultiply:function(n,r){var i,a,o,s,u,c=uT.bitArray._xor4;for(o=[0,0,0,0],s=r.slice(0),i=0;i<128;i++){for(0!=(n[Math.floor(i/32)]&1<<31-i%32)&&(o=c(o,s)),u=0!=(1&s[3]),a=3;a>0;a--)s[a]=s[a]>>>1|(1&s[a-1])<<31;s[0]=s[0]>>>1,u&&(s[0]=-520093696^s[0])}return o},_ghash:function(n,r,i){var a,o,s=i.length;for(a=r.slice(0),o=0;o<s;o+=4)a[0]^=4294967295&i[o],a[1]^=4294967295&i[o+1],a[2]^=4294967295&i[o+2],a[3]^=4294967295&i[o+3],a=uT.mode.gcm._galoisMultiply(a,n);return a},_ctrMode:function(n,r,i,a,o,s){var u,c,d,l,f,h,p,v,g,_,y,m,b=uT.bitArray;for(g=i.length,_=b.bitLength(i),y=b.bitLength(a),m=b.bitLength(o),u=r.encrypt([0,0,0,0]),96===m?(c=o.slice(0),c=b.concat(c,[1])):(c=uT.mode.gcm._ghash(u,[0,0,0,0],o),c=uT.mode.gcm._ghash(u,c,[0,0,Math.floor(m/4294967296),4294967295&m])),d=uT.mode.gcm._ghash(u,[0,0,0,0],a),h=c.slice(0),p=d.slice(0),n||(p=uT.mode.gcm._ghash(u,d,i)),f=0;f<g;f+=4)h[3]++,l=r.encrypt(h),i[f]^=l[0],i[f+1]^=l[1],i[f+2]^=l[2],i[f+3]^=l[3];return i=b.clamp(i,_),n&&(p=uT.mode.gcm._ghash(u,d,i)),v=[Math.floor(y/4294967296),4294967295&y,Math.floor(_/4294967296),4294967295&_],p=uT.mode.gcm._ghash(u,p,v),l=r.encrypt(c),p[0]^=l[0],p[1]^=l[1],p[2]^=l[2],p[3]^=l[3],{tag:b.bitSlice(p,0,s),data:i}}};var uR,uD={webCryptoDecrypt:uS,decrypt:(uR=eG(eU().mark(function n(r,i){var a,o;return eU().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("string"==typeof i&&(i=JSON.parse(i)),!i.enableSoftwareAES&&null!==(a=crypto)&&void 0!==a&&a.subtle){n.next=7;break}return n.next=4,ux(r,i);case 4:case 10:o=n.sent,n.next=18;break;case 7:return n.prev=7,n.next=10,uS(r,i);case 13:return n.prev=13,n.t0=n.catch(7),n.next=17,ux(r,i);case 17:o=n.sent;case 18:return n.abrupt("return",o);case 19:case"end":return n.stop()}},n,null,[[7,13]])})),function(n,r){return uR.apply(this,arguments)})};function uL(n,r,i){function a(n,r){var i=parseInt(n.slice(r,r+2),16);return i>>>7==0?[1,i]:i>>>6==2?[2,i=((63&i)<<8)+parseInt(n.slice(r+2,r+4),16)]:[3,i=((63&i)<<16)+parseInt(n.slice(r+2,r+6),16)]}var o,s=0,u=[],c=[];for(o=0;o<4;++o)s+=(3&parseInt(n.slice(8+2*o,10+2*o),16))<<2*o;var d=parseInt(n.slice(16,24),16),l=2*parseInt(n.slice(32,40),16);for(o=40;o<l+40;o+=2)u.push(parseInt(n.slice(o,o+2),16));var f=l+40,h=parseInt(n.slice(f,f+4),16);for(f+=4,o=0;o<h;++o){var p=a(n,f);f+=2*p[0];for(var v="",g=0;g<p[1];++g){var _=a(n,f);v+=String.fromCharCode(s^_[1]),f+=2*_[0]}c.push(v)}return r.p=null,function n(r,i,a,o,s){var d,l,f,h,p,v=-1,g=[],_=null,y=[i];for(l=Math.min(i.length,a),f=0;f<l;++f)y.push(i[f]);y.p=o;for(var m=[];;)try{switch(u[r++]){case 23:g[++v]=!0;break;case 31:g[++v]=!1;break;case 67:g[++v]=null;break;case 61:d=u[r++],g[++v]=d<<24>>24;break;case 37:d=((d=((d=u[r++])<<8)+u[r++])<<8)+u[r++],g[++v]=(d<<8)+u[r++];break;case 58:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=c[d];break;case 29:g[++v]=void 0;break;case 28:g[++v]=s;break;case 53:d=(u[r]<<8)+u[r+1],r+=2,v=v-d+1,l=g.slice(v,v+d),g[v]=l;break;case 18:g[++v]={};break;case 9:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],g[v][l]=f;break;case 46:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;g[++v]=h[f];break;case 32:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],g[v]=g[v][l];break;case 42:l=g[v--],g[v]=g[v][l];break;case 8:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;h[f]=g[v--];break;case 6:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],h=g[v--],f[l]=h;break;case 48:l=g[v--],f=g[v--],h=g[v--],f[l]=h;break;case 65:for(l=u[r++],f=u[r++],h=y,h=y;l>0;--l)h=h.p;g[++v]=h,g[++v]=f;break;case 71:l=g[v--],g[v]+=l;break;case 56:g[v]=-g[v];break;case 24:l=g[v--],g[v]=g[v]===l;break;case 30:l=g[v--],g[v]=g[v]>l;break;case 72:g[v]=!g[v];break;case 54:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?--v:r+=d;break;case 35:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,g[v]?r+=d:--v;break;case 14:l=g[v--],(f=g[v--])[l]=g[v];break;case 13:g[v]=void 0;break;case 44:g[v]=typeof g[v];break;case 1:d=u[r++],l=g[v--],(f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)})._v=[l,d,y],f._u=n,g[++v]=f;break;case 17:d=u[r++],l=g[v--],(h=[f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)}]).p=y,f._v=[l,d,h],f._u=n,g[++v]=f;break;case 11:throw l=g[v--];case 21:for(l=g[v--],f=null;h=m.pop();)if(2===h[0]||3===h[0]){f=h;break}if(f)r=f[2],f[0]=0,m.push(f);else{if(!_)return l;r=_[1],s=_[2],y=_[3],m=_[4],g[++v]=l,_=_[0]}break;case 74:v-=d=u[r++],f=g.slice(v+1,v+d+1),l=g[v--],h=g[v--],l._u===n?(l=l._v,_=[_,r,s,y,m],r=l[0],null==h&&(h=function(){return this}()),s=h,(y=[f].concat(f)).length=Math.min(l[1],d)+1,y.p=l[2],m=[]):(p=l.apply(h,f),g[++v]=p);break;case 73:for(d=u[r++],h=[void 0],p=d;p>0;--p)h[p]=g[v--];f=g[v--],p=new(l=Function.bind.apply(f,h)),g[++v]=p;break;case 20:r+=2+(d=(d=(u[r]<<8)+u[r+1])<<16>>16);break;case 16:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=g[v--])||(r+=d);break;case 59:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,l=g[v--],g[v]===l&&(--v,r+=d);break;case 2:--v;break;case 51:l=g[v],g[++v]=l;break;default:throw Error("ioe")}}catch(n){for(;(d=m.pop())&&!d[0];);if(!d){t:for(;_;){for(l=_[4];d=l.pop();)if(d[0])break t;_=_[0]}if(!_)throw n;r=_[1],s=_[2],y=_[3],m=_[4],_=_[0]}1===(l=d[0])?(r=d[2],d[0]=0,m.push(d),g[++v]=n):2===l?(r=d[2],d[0]=0,m.push(d)):(r=d[3],d[0]=2,m.push(d),g[++v]=n)}}(d,[],0,r,i)}n.TRANSFORM_IV=void 0,n.transformUnionKey=void 0,function(n,r,i){function a(n,r){var i=parseInt(n.slice(r,r+2),16);return i>>>7==0?[1,i]:i>>>6==2?[2,i=((63&i)<<8)+parseInt(n.slice(r+2,r+4),16)]:[3,i=((63&i)<<16)+parseInt(n.slice(r+2,r+6),16)]}var o,s=0,u=[],c=[];for(o=0;o<4;++o)s+=(3&parseInt(n.slice(8+2*o,10+2*o),16))<<2*o;var d=parseInt(n.slice(16,24),16),l=2*parseInt(n.slice(32,40),16);for(o=40;o<l+40;o+=2)u.push(parseInt(n.slice(o,o+2),16));var f=l+40,h=parseInt(n.slice(f,f+4),16);for(f+=4,o=0;o<h;++o){var p=a(n,f);f+=2*p[0];for(var v="",g=0;g<p[1];++g){var _=a(n,f);v+=String.fromCharCode(s^_[1]),f+=2*_[0]}c.push(v)}r.p=null,function n(r,i,a,o,s){var d,l,f,h,p,v=-1,g=[],_=null,y=[i];for(l=Math.min(i.length,a),f=0;f<l;++f)y.push(i[f]);y.p=o;for(var m=[];;)try{switch(u[r++]){case 67:g[++v]=null;break;case 61:d=u[r++],g[++v]=d<<24>>24;break;case 36:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=d<<16>>16;break;case 37:d=((d=((d=u[r++])<<8)+u[r++])<<8)+u[r++],g[++v]=(d<<8)+u[r++];break;case 58:d=(u[r]<<8)+u[r+1],r+=2,g[++v]=c[d];break;case 29:g[++v]=void 0;break;case 28:g[++v]=s;break;case 53:d=(u[r]<<8)+u[r+1],r+=2,v=v-d+1,l=g.slice(v,v+d),g[v]=l;break;case 18:g[++v]={};break;case 9:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],g[v][l]=f;break;case 46:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;g[++v]=h[f];break;case 32:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],g[v]=g[v][l];break;case 8:for(l=u[r++],f=u[r++],h=y;l>0;--l)h=h.p;h[f]=g[v--];break;case 6:d=(u[r]<<8)+u[r+1],r+=2,l=c[d],f=g[v--],h=g[v--],f[l]=h;break;case 14:l=g[v--],(f=g[v--])[l]=g[v];break;case 1:d=u[r++],l=g[v--],(f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)})._v=[l,d,y],f._u=n,g[++v]=f;break;case 17:d=u[r++],l=g[v--],(h=[f=function n(){var r=n._v;return(0,n._u)(r[0],arguments,r[1],r[2],this)}]).p=y,f._v=[l,d,h],f._u=n,g[++v]=f;break;case 21:for(l=g[v--],f=null;h=m.pop();)if(2===h[0]||3===h[0]){f=h;break}if(f)r=f[2],f[0]=0,m.push(f);else{if(!_)return l;r=_[1],s=_[2],y=_[3],m=_[4],g[++v]=l,_=_[0]}break;case 74:v-=d=u[r++],f=g.slice(v+1,v+d+1),l=g[v--],h=g[v--],l._u===n?(l=l._v,_=[_,r,s,y,m],r=l[0],null==h&&(h=function(){return this}()),s=h,(y=[f].concat(f)).length=Math.min(l[1],d)+1,y.p=l[2],m=[]):(p=l.apply(h,f),g[++v]=p);break;case 73:for(d=u[r++],h=[void 0],p=d;p>0;--p)h[p]=g[v--];f=g[v--],p=new(l=Function.bind.apply(f,h)),g[++v]=p;break;case 20:r+=2+(d=(d=(u[r]<<8)+u[r+1])<<16>>16);break;case 16:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,(l=g[v--])||(r+=d);break;case 59:d=(d=(u[r]<<8)+u[r+1])<<16>>16,r+=2,l=g[v--],g[v]===l&&(--v,r+=d);break;case 2:--v;break;case 51:l=g[v],g[++v]=l;break;default:throw Error("ioe")}}catch(n){for(;(d=m.pop())&&!d[0];);if(!d){t:for(;_;){for(l=_[4];d=l.pop();)if(d[0])break t;_=_[0]}if(!_)throw n;r=_[1],s=_[2],y=_[3],m=_[4],_=_[0]}1===(l=d[0])?(r=d[2],d[0]=0,m.push(d),g[++v]=n):2===l?(r=d[2],d[0]=0,m.push(d)):(r=d[3],d[0]=2,m.push(d),g[++v]=n)}}(d,[],0,r,i)}("504B0101df0839f0000000d9f1380bdf0000011a2e0101332000011c2e00004a0215432e0202432e02014a0033200002250000003811024a014a010801012e0101332000011c2e00004a0215432e04014a0033200003250000004f11012e01004a02153d011000832e00012000042e00013a00050e3d003b00143d033b00463d053b005a3a00063b00540214005a2e0604332000072e02024a010802033d032e00010600042e0603332000082e0203122e02010900092e060509000a24008009000b4a02152e000120000c0802042e00013320000d3a000e2e02044a02152e00013320000f4a001514ff781d1525000000000102080106250000000e01000800012e01003d5b3d683d453d4b24009c2400ab2400ee3d472400ca3d042400f43d0535000c49012000000801051d15001006716675757661057263637f6a047e7261780464617263047d766b67046361766503767d77047b72607b07777670616a63670477726772027a65096772745f767d74677b0460767d67067271616663670661766766617d0460677c63",{0:Uint8Array,get 1(){return eU},get 2(){return eG},get 3(){return uD},get 4(){return u_},get 5(){return n.TRANSFORM_IV},set 5(t){n.TRANSFORM_IV=t},get 6(){return n.transformUnionKey},set 6(t){n.transformUnionKey=t}},void 0);var uO="volcvui",uP=new Map,uB=function(r){eX(o,oC);var i,a=eJ(o);function o(r){var i;return eW(this,o),(i=a.call(this)).EMEError=function(r){i.emit(n.EVENT_EME.ERROR,r)},i.encryptHandle=function(){var r;null===(r=i.eme)||void 0===r||r.emit(n.EVENT_EME.ENCRYPTED)},i.config=o.defaultConfig,i.updateConfig(r),i.config.isEncrypt=!!(i.config.kid||i.config.drm||i.config.secretKey||i.config.drmKeyToken||i.config.keyValue||i.config.drm),i.on(n.EVENT_EME.ENCRYPTED,i.encryptHandle),i}return eH(o,[{key:"updateConfig",value:function(n){var r=this;Object.keys(n).map(function(i){void 0!==n[i]&&null!==n[i]&&void 0!==r.config[i]&&(r.config[i]=n[i])}),this.log("set config",JSON.stringify(this.config))}},{key:"setupEME",value:function(n){this.eme&&this.eme.setupEME(n)}},{key:"setOptions",value:function(n){this.eme&&this.eme.setOptions(n)}},{key:"getSecretKeyByToken",value:function(n,r,i){var a=this,o=this.config,s=n||o.kid,u=r||o.playDomain;0>u.indexOf("//")&&(u="//".concat(u));var c=i||o.drmKeyToken,d=sU.isBase64(c)?window.atob(c):c,l="".concat(u,"?").concat(d,"&PlayAuthIds=").concat(s,"&ssl=true");0>d.indexOf("DrmType=")&&(l+="&DrmType=".concat(o.useUnionInfoDRM?"webdevice":"22")),this.log("getSecretKeyByToken start, vid,",o.vid,l);var f=Promise.withResolvers(),h=f.promise,p=f.resolve,v=f.reject;return uE({type:"json",method:"GET",url:l}).then(function(n){var r,i,s=n.response;if("string"==typeof s&&(s=JSON.parse(s)),s&&null!==(r=s)&&void 0!==r&&r.Result&&(null===(i=s.Result.PlayAuthInfoList)||void 0===i?void 0:i.length)>0){var u=s.Result.PlayAuthInfoList[0].PlayAuthContent;a.log("getSecretKeyByToken end, vid,",o.vid,",res,",JSON.stringify(s)),p(u)}}).catch(function(n){v(n)}),h}},{key:"getLicense",value:function r(){return uL("504B0101df0839f0000002f4f1380bdf0000036e432e03034a003320000a250000002211012e0100433d053d203500023500014a04153d011002cb2e000120000b2e00013a000c0e3d003b00463d033b00673d0a3b01003d0b3b01043d133b01cd3d163b01dc3d173b01e03d193b01e63d1a3b01e73d203b022c3d253b025e3d273b02643d293b02703a000d3b026a02140270123a000e09000f1f0900100802013d032e000106000b2e0401332000112e02012e04094a02152e04012000004102020e022e02022000124102030e022e02022000134102040e022e04042300032e02032300032e02042300092e04012000002000144810000b3d272e000106000b1401ff3d052e000106000c2e04012000002000142300032e02040802052e02032300092e04043600032e04054810000b3d0b2e000106000b1401c73d0a2e000106000b432e05042e04032e02032e04042e04054a04152e00012000150802052e02053600062e020520001610000d2e02052000162e04042a1400032e02050802062e04012000004102080e022e02082000174102090e022e020820001841020a0e022e020820001941020b0e022e05053320001a2e02094a0108020c2e02064836000d2e04012000002000134102060e022e020a3600182e05063320001b2e020c20001c2e020c20001d2e020b4a034810000b3d192e000106000b1401042e05072c3a001e184810000b3d162e000106000b1400ed3d132e000106000b432e05072e02062e020c20001d4a02152e00012000150802073d172e000106000b1400c12e05083a001f49010b3d1a2e000106000b1400ad2e02060802072e02053600062e02052000161000162e02072e02052000162e0404302e02052e02010600142e02072e0201060013172e0201060010432e04082e02014a01023d252e000106000b14005d3d202e000106000c2e0001333a00202a3d054a012e00010600211f2e02010600102e00012000212e0201060022432e04092e02014a01023d292e000106000b14001b172e0201060010432e04082e02014a01022e0001332000234a001514fd301d151c0800011c2000000800022e00022000010800032e00022000020800042e00022000030800052e0101332000044a000800062e00062000050800072e00062000060800082e00062000070800092e0101332000064a0033200008432e0102432e01034a0033200009250000000011004a014a014a01022e000715002406707c7d757a7403657a7703787a770d7476675f7a70767d607646617f0d647a677b4176607c7f657661600763617c7e7a6076076176607c7f65760661767976706704677b767d047e7261780464617263047d766b67046361766503767d770a7476675f7a70767d6076067e76677b7c770760667070766060174c67616a54766740767061766758766a516a477c78767d0960767061766758766a0878766a45727f66760377617e0460767d6709707f76726158766a6009607660607a7c7d5a770f666076467d7a7c7d5a7d757c57415e1778766a477c78767d566b637a61767757666172677a7c7d0374766715707b767078467d7a7c7d5a7d757c566b637a61767707667d7a7c7d5a5709667d7a7c7d5a7d757c0875667d70677a7c7d49477b7633316761727d60757c617e467d7a7c7d58766a3133607b7c667f773371763363617c657a777677337a7d33707c7d757a74666172677a7c7d33726033723375667d70677a7c7d05707267707b026723057661617c610460677c63",{get 0(){return r},1:Promise,get 2(){return eG},get 3(){return eU},get 4(){return ub},get 5(){return uP},get 6(){return sU},get 7(){return void 0!==n.transformUnionKey?n.transformUnionKey:void 0},8:Error,9:arguments},this)}},{key:"_tryGetSecretKeyByToken",value:(i=eG(eU().mark(function n(r,i){var a,o,s,u;return eU().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(a=this.config).kid,s=a.drmKeyToken,u=a.playDomain,!(o&&s&&u)){n.next=13;break}return n.prev=2,n.next=5,this.getSecretKeyByToken(o,u,s);case 5:this.config.secretKey=n.sent,n.next=13;break;case 8:n.prev=8,n.t0=n.catch(2),r.success=!1,r.error=n.t0,i(r);case 13:case"end":return n.stop()}},n,this,[[2,8]])})),function(n,r){return i.apply(this,arguments)})},{key:"updateKid",value:function n(r){return uL("504B0101df0839f000000000f1380bdf000000171c20000036000d1c200000332000012e01024a01021d15000203767e7609666377726776587a77",{get 0(){return n},1:arguments,2:r},this)}},{key:"getLicenseSecret",value:function r(){return uL("504B0101df0839f00000029ff1380bdf000003f42e01013320000b2e020220000a2e00014a02021d152e01013320000b2e020220000c2e00014a02021d15432e03074a003320001d250000004c11012e0100433d093d173500023500014a04153d0110024c2e000120001e2e00013a001f0e3d003b00323d033b00533d073b008c3d083b00903d103b01533d113b01573d123b01703d173b01d33d1c3b02053a00203b01ff02140205123a00210900221f0900230802013d032e000106001e2e0401332000242e02012e040e4a02152e04012000002000250802022e0202483600042e0407484810000b3d082e000106001e1401b93d072e000106001e432e05082e04032e04042e04054a03152e00012000260802022e04061000282e0202360013432e0509432e050a2e02024a014a014102020e022e04073600072e04074102020e023d092e000106001f2e04012000004102030e022e02032000274102040e022e02032000284102050e022e02032000294102060e022e050b3320002a2e02044a010802072e02053600182e050c3320002b2e020720002c2e020720002d2e02064a034810000b3d122e000106001e1400fa2e04064810000b3d112e000106001e1400e83d102e000106001e432e050d2e02022e020720002d4a02152e00012000260802022e050c3320002e2e050e3320002f2e020720002d4a014a012e02010600302e040610003d12120900310802082e04042300032e050f0802092e02022e02082000312e0209302e0401200006332000162e02084a01023d000d2e02010600251400092e02022e0201060025172e0201060023432e040d2e02014a01023d1c2e000106001e1400413d172e000106001f2e0001333a00322a3d094a012e00010600331f2e02010600232e00012000332e0201060034432e040e2e02014a01022e0001332000354a001514fdaf1d151c0800011c2000000800022e00022000010800032e00022000020800042e00022000030800052e00022000040800062e00022000050800071c2000002000041000bf2e010149001c0600061c200006332000072e01022000081c2000094a02021c200006332000072e010220000a250000000001014a02021c200006332000072e010220000c250000001501014a02021c20000020000d0800082e00043600032e000810005b2e010320000e20000f332000104a00332000113a00124a013d01381e1000063a00131400033a0014080009432e0104122e0009122e00082e0004470900154a0308000a1c200006332000162e000a4a01022e0105332000174a00152e0105332000184a0008000b2e000b20001908000c2e000b20001708000d2e000b20001a08000e2e0105332000174a003320001b432e0106432e01074a003320001c250000002a11004a014a014a01022e000c15003606707c7d757a7403657a7703787a770d7476675f7a70767d607646617f06666076565e560878766a45727f667603767e76027c7d055641415c4108565e565661617c611350575e4c5f5a50565d40564c4046505056404004767e7a671150575e4c5f5a50565d40564c5641415c41137a7d677661676166606740766165766146415f097d72657a7472677c6109666076615274767d6711677c5f7c70727f765f7c64766150726076077a7d77766b5c7506707b617c7e7608647a7776657a7d7609637f726a617672776a0960766165766146415f0966637772677657617e076176607c7f65760d647a677b4176607c7f657661600763617c7e7a60760661767976706704677b767d047e7261780464617263047d766b67046361766503767d770a7476675f7a70767d6076067e76677b7c770760667070766060174c67616a54766740767061766758766a516a477c78767d0960767061766758766a0460767d6709607660607a7c7d5a770f666076467d7a7c7d5a7d757c57415e1778766a477c78767d566b637a61767757666172677a7c7d0374766715707b767078467d7a7c7d5a7d757c566b637a61767707667d7a7c7d5a5709667d7a7c7d5a7d757c134067617a7d74477c526161726a516675757661047b72607b0a777670616a636758766a09707f76726158766a6005707267707b026723057661617c610460677c63",{get 0(){return r},get 1(){return sG},get 2(){return n.EVENT_EME},get 3(){return window},get 4(){return eK},5:Promise,get 6(){return eG},get 7(){return eU},get 8(){return um},get 9(){return ug},get 10(){return atob},get 11(){return uP},get 12(){return sU},get 13(){return n.transformUnionKey},get 14(){return u_},get 15(){return sN},16:arguments},this)}},{key:"destroy",value:function(){this.removeAllListeners(),this.eme&&(this.eme.destroy(),this.eme=null)}},{key:"log",value:function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];uI.apply(void 0,[n].concat(i))}},{key:"getSecretKey",value:function(){var n=this.config,r=n.vid,i=n.kid,a=n.getLicenseUrl,o=n.drmKeyToken,s=n.playDomain,u=n.secretKey;return a&&i?um(r,i,a):o&&i&&s?this.getSecretKeyByToken(i,s,o):u||null}},{key:"getKeyValue",value:function n(){return uL("504B0101df0839f000000000f1380bdf0000003e1c2000000800012e00012000010800022e00012000020800032e00012000030800042e0001200004080005432e01012e00022e00052e00032e00044a0415000506707c7d757a7403657a7703787a770d7476675f7a70767d607646617f0960767061766758766a",{get 0(){return n},get 1(){return ub},2:arguments},this)}}],[{key:"pluginName",get:function(){return"XGSecretKey"}},{key:"defaultConfig",get:function(){return{keyValue:null,kid:null,getLicenseUrl:"",secretKey:null,drm:null,vid:"",useUnionInfoDRM:!1,transformUnionKey:null,drmKeyToken:null,keyTokenExpiredDuration:null,playDomain:null,sessionId:uO,useEME:!0,intertrustServerURL:null}}},{key:"updateUnionInfo",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uO,i=sU.getUnionInfo(n);return uP.set(r,{unionID:n,unionInfo:i}),i}}]),o}();uB.isWebAssemblySupported=uA,n.XGSecretKey=uB,n.aes4js=uD,n.util=sU}(r)},779517:function(n,r,i){"use strict";i.d(r,{Z:function(){return I}});var a,o,s=i(22450);i(836654),i(691842),i(465132),i(511141),i(891555),i(981168),i(469577),i(110617),i(675373),i(927234),i(914613),i(86877),i(742611),i(874386);var u=i(734123),c=i(262416),d=i(663153),l=i(258817),f=i(749517),h=i(810815),p=i(806394),v=i(775135),g=i(907769),_=i(212401),y=i(21976),m=i(638858),b=i(546041),A=h.iS;let I=(0,s.qH)(function n(r){var i=this;(0,s.PA)(this,n),(0,s._x)(this,"_onChangeConfig",function(n){if(n){var r,a=n.nextBufferLength===(null===(r=i.config)||void 0===r?void 0:r.minBufferLength);if(i._nextBufferLength=n.nextBufferLength,n.nextBufferLength&&!a)try{i.loadData()}catch(n){}}}),(0,s._x)(this,"startProgressTimer",function(){i._pluginInst.info({msg:"startProgressTimer"});i._loadDataTime=0;var n=i.player,r=i.config;if(!!n&&!!i&&!!i.isDashCanUse&&!!i.dash.mse)i.dash.mse.progressTimer=new c.zh,i.dash.mse.progressTimer.repeat(function(){i._checkAndLoadData("timer")},1e3*r.tickInSeconds||r.progressTimer||h.vG),i._startCheckBufferBreakTimer(),i.player.on(u.Events.TIME_UPDATE,i._onTimeUpdate)}),(0,s._x)(this,"_onTimeUpdate",function(){var n,r;if(!!i.isDashCanUse&&!!i.config.dashOpts&&!!(null!==(n=i.dash)&&void 0!==n&&n.mse))i._checkAndLoadData("timeupdate"),i.isEnded(),null===(r=i.dash)||void 0===r||r.onTimeUpdate(),i._seekingCheckBuffer()}),(0,s._x)(this,"_checkAndLoadData",function(){var n=i.config;if(!!i.isDashCanUse&&!!i.dash.mse&&!!i.dash.mse.progressTimer){var r=1e3*n.tickInSeconds||n.progressTimer||h.vG,a=l.Z.nowTime();a-i._loadDataTime>=r&&(i._loadDataTime=a,i.checkRemoveBuffer(),i.handleUrlExpire(),i.loadData(void 0),i.isEnded())}}),(0,s._x)(this,"_onAutoDescChange",function(n){var r,a=n.definition,o=n.reset,u=n.fps,c=n.item;!o&&(i.player.curDefinition=(0,s.Zj)({},c)),i.setAudioDefinition(),f.ZP.log(i.config.vid,"abritem autoDescChange",null===(r=i.player.curDefinition)||void 0===r?void 0:r.definition),i.updateAutoDefiDesc(a,o,u,c)}),this._pluginInst=r.pluginInst;var a=this._pluginInst,o=a.player,d=a.config;this._minDuration=1/0,this.player=o,this.config=d,this.startTimestamp=new Date().getTime(),this.lastDefiIdx=void 0,this.__isDashCanUse=!1,this.preloadBufferThreshold=this.config.preloadBufferThreshold||.5,this.abrInstance=null,this.definitions=[];var p=this.config.autoBitrateOpts||{};this.isPlayAutoDefi=!!p.isPlayAutoDefi,this.isOpenAutoDefi=!!p.isOpenAutoDefi,this.isCurrentAutoDefi=this.isOpenAutoDefi&&this.isPlayAutoDefi,this.bitrateMap={},this.curBitrate=0,this.defiIdMap={},this.definition2item={},this.bandwidth2item={},(this.preloadBufferThreshold<=0||this.preloadBufferThreshold>1)&&(this.preloadBufferThreshold=.5),this.curVideoInitSegmentIdx=-1,this.curVideoFileId=void 0,this.getPlayInfoTimestamp=this.startTimestamp/1e3;var g=d.dashOpts.dynamic_video.dynamic_video_list,_=d.dashOpts.dynamic_video.dynamic_audio_list;g&&g.length>0?this.urlExpireTimestamp=d.dashOpts.dynamic_video.dynamic_video_list[0].url_expire||0:_&&_.length>0&&(this.urlExpireTimestamp=d.dashOpts.dynamic_video.dynamic_audio_list[0].url_expire||0),this.gapJumpInst=new v.Z(o,d),l.Z.on(o,"addVideoBufferEnd",function(){i.gapJumpInst.onSegmentAppend()},"dashDestroy"),this._nextBufferLength=this.config.nextBufferLength,l.Z.on(o,m.J.CHANGE_FLYING_PLUGIN_CONFIG,this._onChangeConfig,"dashDestroy"),this._lastRemoveTimestamp=0},[{key:"initDash",value:function(n){var r=this;this.dash=n;var i=this.config;i.dashOpts.dynamic_video.dynamic_video_list.length>0&&(this.initAbr(),i.dashOpts.dynamic_video.dynamic_video_list.sort(function(n,r){return r.vheight-n.vheight}),i.dashOpts.dynamic_video.dynamic_video_list.forEach(function(n,a){n.definition===i.defaultDefinition&&(r.dash.selectedIdx=a)}),this.dashVideoEncrypted=i.dashOpts.dynamic_video.dynamic_video_list.some(function(n){return!!n.kid})),i.dashOpts.dynamic_video.dynamic_audio_list.length>0&&(this.dashAudioEncrypted=i.dashOpts.dynamic_video.dynamic_audio_list.some(function(n){return!!n.kid}))}},{key:"isDashCanUse",get:function(){return this.__isDashCanUse},set:function(n){this.__isDashCanUse=n}},{key:"encryptedType",get:function(){if(this.dashVideoEncrypted||this.dashAudioEncrypted){var n,r=!!this.config.intertrustServerURL||(null===(n=this.player.plugins)||void 0===n||null===(n=n.drm)||void 0===n?void 0:n.serverCertificatePath);return this.config.useEME?r?1:3:2}return 0}},{key:"isSuspendLoading",get:function(){return this._suspendLoading}},{key:"isEnded",value:function(){var n=this.dash,r=this.player,i=this.mse,a=this.config;if("vod"===n.type){if(r.ended)f.ZP.log("player.ended === true"),"safari"===u.Sniffer.browser&&(r.pause(),r.emit("ended"));else{var o=a.duration||r.duration||n.mpd.duration;if(r.duration&&(o=Math.min(o,r.duration)),n.mpd.duration&&(o=Math.min(o,n.mpd.duration)),o-this._minDuration<10&&(o=Math.min(o,this._minDuration)),o>0&&o-r.currentTime<h.Z6){var s=this._findRangeForPlaybackTime(r.currentTime)||{start:0,end:0};f.ZP.log("range",s,"current",r.currentTime,"duration",o);var c=Math.min(s.end,r.duration),d=r.currentTime-c>=0&&s.end>0,l=c-r.currentTime<h.Z6&&s.end>0;(d||l)&&(f.ZP.log("isEnded execute, isOver",d,"isClosed",l),i.endOfStream(),this.clearProgressTimer())}}}}},{key:"dashDestroy",value:function(){var n=this.player,r=this.dash;for(var i in r&&r.mse&&r.mse.unbindMedia&&r.mse.unbindMedia(),r&&r.eme&&(r.eme.emit("destroy"),r.eme.destroy()),r&&n.errorHandler&&(r.abortLoadingTasks(),r.emit("destroy")),r&&r.mpd&&r.mpd.timer&&(clearTimeout(r.mpd.timer),r.mpd.timer=null),this.crypto&&this.crypto.destroy(),r&&r.destroy(),this.clearCheckCanplayTimer(),this.clearProgressTimer(),this.clearBufferBreakTimer(),this.destroyAbr(),this.gapJumpInst&&this.gapJumpInst.destroy(),n&&(this.player.off(u.Events.TIME_UPDATE,this._onTimeUpdate),n.__dash__=null,this._pluginInst.unloadVideo(),"function"==typeof n.video.setMediaKeys&&n.video.setMediaKeys(null).catch(function(){})),r)delete r[i];for(var a in this)delete this[a]}},{key:"bindComEvent",value:function(){var n,r=this;this._lastSeekTime=null;var i=this.player,a=this.config;l.Z.on(i,"error",r.clearProgressTimer.bind(r),"dashDestroy"),l.Z.on(i,"ended",r.clearProgressTimer.bind(r),"dashDestroy"),l.Z.on(i,"ended",function(){r.ended=!0},"dashDestroy");var o=(n=(0,s.x)((0,s.l5)().mark(function n(){var o,u,c,d,l,h,p,v,_,y;return(0,s.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f.ZP.log(null==a?void 0:a.vid,"dash onSeeking",i.currentTime,"duration",i.duration),!i._invalidSeekTag){n.next=5;break}return i._invalidSeekTag=!1,f.ZP.log("auto seek 0.001, return"),n.abrupt("return");case 5:if(!(!r.isDashCanUse||!a.dashOpts||!r.mse)){n.next=7;break}return n.abrupt("return");case 7:if(u=r.ended,r.ended=i.ended,!u){n.next=12;break}return this.isOpenAutoDefi?this._pluginInst.next(i.currentTime,"NEXT",i.config.DASHPlugin,!0):r.startProgressTimer(),n.abrupt("return");case 12:if(d=0===(c=i.getBufferedRange(i.buffered)[1]),f.ZP.log(null==a?void 0:a.vid,"dash onseeking, bufferEnd:".concat(c,", outBuffer:").concat(d,", \n      switching:").concat(r.switching,", isFull:").concat(null===(o=r.mse)||void 0===o?void 0:o.isFull(g.d1.VIDEO))),!(d&&!r.switching)){n.next=20;break}return r.abortLoading=!0,n.next=19,r.dash.abortLoadingTasks();case 19:f.ZP.log("dash cancel loading task execute");case 20:if(r.dash){n.next=22;break}return n.abrupt("return");case 22:if(r.dash.mpd.setSegmentIndexByTime(i.currentTime),r.mse){n.next=25;break}return n.abrupt("return");case 25:if((l=r.mse).isFull&&(l.isFull(g.d1.VIDEO)||l.isFull(g.d1.AUDIO)))r.checkRemoveBuffer(!0,!0);else if(!d&&a.removeBufferWhenSeekInBuffer)try{h=i.getBufferedRange(r.mse.buffered("video"))[1],p=i.getBufferedRange(r.mse.buffered("audio"))[1],r._clearBufferByTime(Math.max(h,p),i.duration)}catch(n){}r.abortLoading=!1,d&&r._checkAndLoadData(),v=a.useDurationBackoff||!1,_=Date.now()/1e3,y=i.duration-i.currentTime<1,v&&y&&(!this._lastSeekTime||this._lastSeekTime<_-1)&&(this._lastSeekTime=_,i.currentTime=i.duration-1),r.gapJumpInst&&r.gapJumpInst.onSeeking();case 34:case"end":return n.stop()}},n,this)})),function(){return n.apply(this,arguments)});l.Z.on(i,"seeking",o,"dashDestroy");l.Z.on(i,"seeked",function(){f.ZP.log("dash onSeeked",i.currentTime),r.seeking=!1,r.isEnded(),r.dash.isAllAppend()&&(r.mse.endOfStream(),f.ZP.log("dash seeked endofstream"))},"dashDestroy"),l.Z.on(i,"dashDestroy",r.dashDestroy.bind(this))}},{key:"_seekingCheckBuffer",value:function(){var n=this;if(!!this.dash)for(var r=[g.d1.VIDEO,g.d1.AUDIO],i=0;i<r.length;i++){for(var a=r[i],o=this.dash.getCurrentTask(a),s=this.dash.mpd.getBuffered(a),u=0;u<s.length;u++)!function(){var r,i=s[u],c=n.player.currentTime,d=i.start<=c&&c<=i.end,l=!1;if(o&&null!==(r=o._config)&&void 0!==r&&null!==(r=r.priOptions)&&void 0!==r&&r.extData){var h=o._config.priOptions.extData;l=h.startRaw-.1<=i.start&&i.end<=h.endRaw+.1}if(!d&&i.end-i.start<.5&&!l){f.ZP.log("remove buffer _seekingCheckBuffer",i.start,i.end,"curTime",c,"inBuffer",d,"mediaType",a,"mediaBuffered",s);var p=n.removeBuffer(a,i.start,i.end);p&&p.catch(function(n){f.ZP.log("_seekingCheckBuffer start",i.start,"end",i.end,n.message)})}}()}}},{key:"destroy",value:function(){var n=this.player;null==n||n.emit("dashDestroy")}},{key:"_findRangeForPlaybackTime",value:function(n){var r=this.player.buffered;if(!!r){for(var i=0;i<r.length;i++)if(l.Z.round(r.start(i))<=l.Z.round(n)&&l.Z.round(r.end(i))>=l.Z.round(n))return{start:l.Z.round(r.start(i)),end:l.Z.round(r.end(i)),rawStart:r.start(i),rawEnd:r.end(i)}}}},{key:"loadData",value:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.player,o=this.config;if(this.switching||this.abortLoading){f.ZP.log(o.vid,"loadData switching",this.switching);return}if(!this.dash||this._suspendLoading)return;var s=o.maxBufferLength||o.preloadTime||h.VC,u=this.dash.mpd.mediaList.video;if(u&&u.length>0&&u[u.selectedIdx]){var c=u[u.selectedIdx].bandwidth;r=u[u.selectedIdx].definition||this.bandwidth2item[c].definition}if(o.dynamicPreloadTimeOpts&&r){var l=o.dynamicPreloadTimeOpts[r];l&&(s=l)}var p=!1;a.paused&&(p=!0),s=p?a.isInstNext&&this._nextBufferLength>=0?this._nextBufferLength:o.minBufferLength:this.dash.getAdaptCacheBuffer(s),this.preloadTime!==s&&(this.preloadTime=s,f.ZP.log("maxCacheTimeAudio change",s),a.emit(d._c.MAX_BUFFER_CHANGE,{videoCacheTime:s,audioCacheTime:s}));var v=n||a.currentTime;!n&&(n=a.currentTime);var g=this._findRangeForPlaybackTime(n),_=g&&Math.ceil(Math.max(g.end,g.rawEnd))||Math.floor(n);if(this.dash.isOpenPCDN((null==g?void 0:g.end)||0),!(_>n+s)){var y=this.dash.getPCDNInOutBuffer(),m={force_set_min:p,buffer_dur:s,load_size:-1,load_tar_dur:-1,load_dur:-1,in_buf:y.PCDNInBuffer||-1,out_buf:y.PCDNOutBuffer||-1};this.dash.pushDynamicBufferServiceRes(m),this.dash.seek(n>0,v,i,s)}}},{key:"startCheckCanplayTimer",value:function(){var n=this,r=this.player,i=this.config;if(!!r&&!i.disableCanplayCheck)f.ZP.log("未起播计时开始！持续".concat(i.canplayTimeout,"毫秒未启播降级")),this.checkCanplayTimer=setTimeout(function(){f.ZP.log("确认没有起播！！！"),n.clearCheckCanplayTimer(),null==r||r.errorHandler(new p.Z(_.wb.RUNTIME,_.wb.SUB_TYPES.NO_CANPLAY_ERROR,{message:"NO_CANPLAY_ERROR"}))},i.canplayTimeout)}},{key:"clearCheckCanplayTimer",value:function(){this.checkCanplayTimer&&(clearTimeout(this.checkCanplayTimer),this.checkCanplayTimer=null)}},{key:"clearBufferBreakTimer",value:function(){this.bufferCheckTimer&&(clearTimeout(this.bufferCheckTimer),this.bufferCheckTimer=null)}},{key:"handleUrlExpire",value:function(){var n;null===(n=this._pluginInst)||void 0===n||n.handleUrlExpire(this)}},{key:"_startCheckBufferBreakTimer",value:function(){var n=this,r=this.config;if(!!r&&!r.disableBufferBreakCheck)this.clearBufferBreakTimer(),this.bufferCheckTimer=setTimeout(function(){n._onBufferBreakCheck(),n._startCheckBufferBreakTimer()},h.vG)}},{key:"_onBufferBreakCheck",value:function(){var n=this,r=this.player,i=this.config;if(!i){this.clearBufferBreakTimer();return}!i.disableBufferBreakCheck&&(Math.abs(r.currentTime-(n.lastCurrentTime||0))>.1||r.paused?(1===n.dashBufferBreak||2===n.dashBufferBreak)&&(f.ZP.log(null==i?void 0:i.vid,"视频没有卡死，重置卡死标记"),n.dashBufferBreak=0,clearTimeout(n.dashBufferBreakTimer),n.dashBufferBreakTimer=null):!n.dashBufferBreak&&(n.dashBufferBreak=1,f.ZP.log(null==i?void 0:i.vid,"卡死计时开始！持续".concat(i.waitingTimeOut,"毫秒则确认卡死")),n.dashBufferBreakTimer=setTimeout(function(){if(1===n.dashBufferBreak){n.dashBufferBreak=2,f.ZP.log("确认卡死！！！");var r=document.hidden||"hidden"===document.visibilityState?_.wb.SUB_TYPES.WAITING_TIMEOUT_ERROR:_.wb.SUB_TYPES.BUFFERBREAK_ERROR;n.dash.emit("error",new p.Z(_.wb.RUNTIME,r))}n.dashBufferBreakTimer=null},i.waitingTimeOut)),n.lastCurrentTime=r.currentTime)}},{key:"_isMseFull",value:function(){return!!this.mse&&!!this.mse.isFull&&(this.mse.isFull(g.d1.VIDEO)||this.mse.isFull(g.d1.AUDIO))}},{key:"checkRemoveBuffer",value:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player,a=this.config,o=new Date().getTime(),s=this._isMseFull(),u=n||s;if(!(o-this._lastRemoveTimestamp<1e3*a.removeBufferLen)||!!u){this._lastRemoveTimestamp=o;var c=i.currentTime,d=i.getBufferedRange(),l=d&&d[0]>=0&&c-d[0]>a.removeBufferLen;f.ZP.log("checkRemoveBuffer","mseFull",s,"force",n,"needRemove",l),(u||l)&&this._clearBuffer(u,r)}}},{key:"_checkBufferFull",value:function(n){var r=this;clearTimeout(this._fullTimer),this._isMseFull()&&(this._fullTimer=setTimeout(function(){clearTimeout(r._fullTimer),r._clearBuffer(!0)},1e3*n))}},{key:"_clearBuffer",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.player;if(!!this.isDashCanUse&&!!this.mse){var o=a.getBufferedRange()[1]>0,s=a.currentTime,u=l.Z.getBufferData(null==a?void 0:a.buffered,s),c=u.beforeBufLen,d=u.afterBufLen,h=u.beforeLastBuffEnd,p=u.afterFirstBuffEnd,v=u.afterFirstBuffStart;!o&&(s=s-h<15?h:s);var g=this._findClosetGop(s,!1),_=r&&i&&!o,y=_?.1:5;if(g&&this._clearBufferByTime(0,g,function(r){_&&(null==r?void 0:r.removeDur)<5&&n._clearBuffer(!0,!0)}),r){f.ZP.log("clearBuffer isFull","isSeeking",i,"isInBuffer",o,"beforeBufLen",c,"afterBufLen",d,"afterFirstBuffEnd",p,"afterFirstBuffStart",v,"beforeLastBuffEnd",h);var m=0,b=0;if(i&&!o){if(b=this._findClosetGop(v,!0,2),m=this._findClosetGop(p,!1,1),f.ZP.log("clearBuffer isFull removeStart",b,"removeEnd",m),0===c){for(var A=this.player.video.buffered,I=0,k=A.length-1;k>=0;k--){var E=A.start(k),T=A.end(k);if((I+=T-E)>10){b=l.Z.round(E),m=l.Z.round(T);break}}f.ZP.log("clearBuffer isFull beforeBufLen 0 removeStart",b,"removeEnd",m)}b<m?this._clearBufferByTime(b,m,function(r){_&&(null==r?void 0:r.removeDur)<5&&n._clearBuffer(!0,!0)}):this._checkBufferFull(y)}else this._checkBufferFull(y)}}}},{key:"_findClosetGop",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=this.dash.mpd.mediaList.video;!a[a.selectedIdx]&&(a=this.dash.mpd.mediaList.audio);var o=a[a.selectedIdx].mediaSegments;if(r){for(var s=0,u=0;u<o.length;u++)if(o[u].startRaw>n&&++s>i)return o[u].start}else{for(var c=0,d=o.length-1;d>-1;d--)if(o[d].endRaw<n&&++c>i)return o[d].end}}},{key:"_getFirstGopEnd",value:function(){var n,r=this.dash.mpd.mediaList,i=r.video.length>0,a=this.dash.mpd.mediaList.audio.length>0,o=0;if(i&&(o=Math.max(o,r.video[r.video.selectedIdx].mediaSegments[0].end)),a){;o=Math.max(o,(null===(n=r.audio[r.audio.selectedIdx].mediaSegments[0])||void 0===n?void 0:n.end)||0)}return{clearMinStart:o,hasVideo:i,hasAudio:a}}},{key:"clearBufferDirect",value:function(n,r){var i=r.startRaw,a=r.endRaw;if(!(i>=a)){var o=this.removeBuffer(n,i+1e-5,a);o&&o.catch(function(){f.ZP.log("mediaType",n,"catch clearBufferDirect start: ".concat(i," end: ").concat(a))})}}},{key:"_clearBufferByTime",value:function(n,r,i){var a=this,o=[],s=this._getFirstGopEnd(),u=s.clearMinStart,c=s.hasVideo,d=s.hasAudio;n=Math.max(u,n),f.ZP.log("removeBuffer clearBufferByTime start: ".concat(n," end: ").concat(r," clearMinStart:").concat(u));var l=this.getBufferDur();if(n>r){f.ZP.log("clearBuffer return clearBufferByTime start: ".concat(n," end: ").concat(r," clearMinStart:").concat(u)),i({removeDur:0});return}if(c){var h=this.removeBuffer(g.d1.VIDEO,n,r);h&&o.push(h)}if(d){var p=this.removeBuffer(g.d1.AUDIO,n,r);p&&o.push(p)}Promise.all(o).then(function(){var n=a.getBufferDur(),r=l-n;r>0&&(a.player.emit("removeBuffer",{removeDur:r}),f.ZP.log("removeBuffer dur,",r,"oldTotalBuffer",l,"newTotalBuffer",n),a.player.emit("removeBufferEnd"),i&&i({removeDur:r}))}).catch(function(n){f.ZP.log("removeBuffer error",n),i&&i({removeDur:0})})}},{key:"removeBuffer",value:function(n,r,i){var a=this;if(f.ZP.log("removeBuffer start",n,r,i),void 0===i){var o,s,u,c=this.dash.mpd.mediaList[n];if(null!==(o=c[c.selectedIdx])&&void 0!==o&&null!==(o=o.mediaSegments)&&void 0!==o&&o[0])i=null===(s=c[c.selectedIdx])||void 0===s||null===(s=s.mediaSegments)||void 0===s?void 0:s[0].endRaw;else{;i=this.config.duration||this.player.duration||(null===(u=this.dash)||void 0===u||null===(u=u.mpd)||void 0===u?void 0:u.duration)}f.ZP.log("removeBuffer end undefined, fix",n,r,i)}if(this.mse&&this.mse.remove&&!this._pluginInst.softVideo){var d=this.mse.remove(n,r,i);return d&&d.then(function(){var n,o=a.player.currentTime;r<o&&o<i&&a._pluginInst&&(a._pluginInst.removedCurrBuf=!0,f.ZP.log("removeBuffer currentTime",null===(n=a.player)||void 0===n?void 0:n.currentTime))}).catch(function(){}),d}return null}},{key:"getBufferDur",value:function(){if(!(null!==(n=this.player)&&void 0!==n&&n.buffered))return 0;for(var n,r=this.player.buffered,i=0,a=0,o=r.length;a<o;a++)i+=r.end(a)-r.start(a);return i}},{key:"abort",value:function(n){if(this.mse&&this.mse.abort&&this.dash.mpd.mediaList[n].length>0){var r=this.mse.abort(n,{mediaType:n});r&&r.catch(function(){})}}},{key:"clearProgressTimer",value:function(){this.isDashCanUse&&this.dash.mse&&this.dash.mse.progressTimer&&(this.dash.mse.progressTimer.clear(),this.dash.mse.progressTimer=null),this.dashBufferBreakTimer&&(clearTimeout(this.dashBufferBreakTimer),this.dashBufferBreakTimer=null,this.dashBufferBreak=void 0)}},{key:"emitMenuResolutionChange",value:function(){var n=this.player;try{var r=this.dash.mpd.mediaList.video;if(r){var i=r[r.selectedIdx],a={width:i.width,height:i.height};n.emit("RESOLUTION_UPDATE",a)}else n.emit("RESOLUTION_UPDATE")}catch(r){n.emit("RESOLUTION_UPDATE")}}},{key:"updateDashType",value:function(){var n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=c.Xb.getItem(h.WV),a=h.sp;n=r?a.MAIN:i===a.BACK?a.MAIN:a.BACK,c.Xb.setItem(h.WV,n)}},{key:"changeMainBackUrl",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.INIT,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!r&&!!this._pluginInst){var i=this._pluginInst.config,a=c.Xb.getItem(h.WV),o=!1,s=h.sp;if((n===A.INIT&&a===s.BACK||n===A.ERR)&&(o=!0),f.ZP.log(i.vid,"curDashType",a,"changeState",n,"needChange",o),o){var u=i.dashOpts.dynamic_video.main_url,d=i.dashOpts.dynamic_video.backup_url_1;i.dashOpts.dynamic_video.main_url=d,i.dashOpts.dynamic_video.backup_url_1=u,l.Z.exchangeListUrl(i.dashOpts.dynamic_video.dynamic_video_list),l.Z.exchangeListUrl(i.dashOpts.dynamic_video.dynamic_audio_list)}var p=i.dashOpts.dynamic_video.main_url;return this._checkUrlRange(p),i}}},{key:"_checkUrlRange",value:function(n){var r=this._pluginInst.config,i=r.url_range_domains||[],a=l.Z.validateUrlRange(i,n);r.useUrlRange=a}},{key:"updateAutoDefiDesc",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this.player,s=(this.config.autoBitrateOpts||{}).autoDefiText||"auto";o.emit("ABR_AUTO_DESC_CHANGE",s,r?void 0:n,i,a),!r&&this._pluginInst.setCurrentDefitionInfos("自动 ".concat(n),a)}},{key:"_abrLoadMetaSuccess",value:function(n,r,i,a){if(a===g.d1.VIDEO){var o,s=this.dash,u=this.config,c=s.mpd.mediaList.video,d=this.defiIdMap[n].bitrate;null===(o=this.abrInstance)||void 0===o||o.updateBitrate(d);var l=this.definitions.filter(function(n){return n.bitrate===d&&"__auto__"!==n.url})[0];this.abrInstance&&l&&(this.abrInstance.isCurrentHDR=!!l.isHDR),i&&(this.lastDefiIdx=n),this.selectedIdx=r,u.defaultDefinition=c[this.selectedIdx].definition}}},{key:"_startLoadInitSegment",value:function(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"video",o=new c.XK,s=this,u=this.dash,d=this.config;if(!u.mpd){f.ZP.log("_startLoadInitSegment dash.mpd is null"),o.reject();return}var l=u.mpd.mediaList[a],h=l.selectedIdx;return l.every(function(c,p){if(c.id!==n)return!0;h=p,s.setSwitching(a,!0);var v=l[h].wrapperData,g=u.isProgressiveLoading(a).isCancellable;return f.ZP.log("mediaType",a,"isCancellable",g),v&&g?((s.dashVideoEncrypted||s.dashAudioEncrypted)&&!1===d.useEME&&s.crypto&&s.crypto.updateHeaderId(),r._abrLoadMetaSuccess(n,h,i,a),o.resolve(v)):s._makeInitSegemntRequestWithRetry(a,h,!1,function(){s.setSwitching(a,!1)}).then(function(s){r._abrLoadMetaSuccess(n,h,i,a),o.resolve(s)}).catch(function(n){s.setSwitching(a,!1),f.ZP.log("_makeInitSegemntRequestWithRetry",JSON.stringify({msg:n.message}))}),!1}),o}},{key:"setCurrentDefinition",value:function(){try{var n=this.dash,r=n.mpd.mediaList.video,i=r[r.selectedIdx],a=i.definition,o=i.bandwidth;this._pluginInst.setCurrentDefitionInfos(a,this.definition2item[a]),n.updateDynamicBufferServiceBitrate(o),n.checkPCDN()}catch(n){}}},{key:"_emitDefinitionChangeDetailEvent",value:function(n){this.player.emit("definitionChangeDetail",n)}},{key:"setPlayerCurDefinition",value:function(n){var r=this._pluginInst.player;n&&"__auto__"===n.url||(r.curDefinition=n),this.setAudioDefinition()}},{key:"setAudioDefinition",value:function(){var n=this._pluginInst.player;if(n.curDefinition&&"object"===(0,s.Ac)(n.curDefinition)){var r=n.curDefinition.audio_file_id,i=this.config.dashOpts.dynamic_video.dynamic_audio_list;if(i.length>0)try{n.curDefinition.audioDefinition=i.filter(function(n){return n.file_id===r})[0]}catch(n){f.ZP.log("setAudioFaild",n)}}}},{key:"switchURL",value:function(n){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=this;if(!n)return;if(!Array.isArray(n)){var a=n.toString();n=a.split("/")[a.split("/").length-1]}var o=i.definitions.filter(function(r){return r.url===n})[0];if(!!o){this.setPlayerCurDefinition(o);var s=n===d.UV;if(f.ZP.log("switchURL",n,r),s){i.abrInstance.start(),i.isCurrentAutoDefi=!0,i.abrInstance.isCurrentInAbr=!0,setTimeout(function(){i.abrInstance._onTimeUpdate(null,!0)});return}i.isCurrentAutoDefi&&(i.updateAutoDefiDesc("",!0),i.isCurrentAutoDefi=!1,i.abrInstance.isCurrentInAbr=this.isCurrentAutoDefi),r&&i.abrInstance.stop(!0),this._doChangeDefinition(g.d1.VIDEO,n),this._audioChangeDefinition(n)}}},{key:"_audioChangeDefinition",value:function(n){var r=this.dash.selectAudio(n,!1);if(r>-1)try{f.ZP.log("switch url audio change",r);var i=this.dash.mpd.mediaList.audio[r].id;if(i!==this.dash.mpd.mediaList.audio.selectedIdx){f.ZP.log("switch url audio same no need change");return}this._doChangeDefinition(g.d1.AUDIO,i)}catch(n){}}},{key:"_doChangeDefinition",value:function(n,r){var i,a=this,o=this._pluginInst.player,c=this;c._startLoadInitSegment(r,!0,n).then((i=(0,s.x)((0,s.l5)().mark(function r(i){var d,h,p,v,_,y,m,b,A,I,k;return(0,s.l5)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!((d=c.dash.mpd.mediaList[n])[c.selectedIdx].definition!==i.definition&&n===g.d1.VIDEO)){r.next=7;break}return c._videoSwiting=!1,f.ZP.log("definitionSwitchTime cancel, current:",c.selectedIdx,"self",i.newIdx),r.abrupt("return");case 7:return i.newIdx!==c.selectedIdx&&(f.ZP.log("definitionSwitch fix:",c.selectedIdx,"newIdx",i.newIdx),i.newIdx=c.selectedIdx),r.next=10,c._switch(i.newIdx,n);case 10:if(h=r.sent,p=o.currentTime,v=null,v=d[h||0].mediaSegments.find(function(n){return n.start-p>2.5}),_=!1,!v&&(v=(y=d[h||0].mediaSegments)[y.length-1],_=!0),v){r.next=19;break}return c._doAppendInitSegment(n,i,v),r.abrupt("return");case 19:m=l.Z.round(v.start),b=l.Z.round(o.getBufferedRange(o.buffered)[1]),f.ZP.log("切换清晰度 curTime: ".concat(p," start: ").concat(m," end: ").concat(b),p),n===g.d1.VIDEO&&(c.setCurrentDefinition(),!c.isCurrentInAbr()&&(f.ZP.log("definitionSwitchTime emit, current",c.selectedIdx),o.emit("definitionSwitchTime",m)),a._emitDefinitionChangeDetailEvent({start:m,bitrate:null===(A=d[i.newIdx])||void 0===A?void 0:A.bandwidth,mediaType:n,definition:i.definition,url:i.url,fileid:i.fileId})),b-m>0&&"safari"!==u.Sniffer.browser&&!_&&n===g.d1.VIDEO&&(f.ZP.log("switch seek removeBuffer: ".concat(m," ").concat(o.duration),"currentTime",o.currentTime),c.removeBuffer(n,v.startRaw,o.duration),I=Math.max(1,v.idx-1),(k=d[h||0].mediaSegments[I-1]).start>0&&k.start<p&&c.removeBuffer(n,0,k.startRaw-.001)),c._doAppendInitSegment(n,i,v);case 25:case"end":return r.stop()}},r)})),function(n){return i.apply(this,arguments)}))}},{key:"_doAppendInitSegment",value:function(n,r,i){var a=this;f.ZP.log("switchURL appendInitSegment start",r.newIdx),this._appendInitSegment(n,r,r.newIdx).then(function(){if(f.ZP.log("switchURL appendInitSegment",r.newIdx),a.setSwitching(n,!1),i&&a.loadData((i.start+i.end)/2,!1),a.emitMenuResolutionChange(),a.config.loadFirstGopData){var o;null===(o=a.dash)||void 0===o||o.loadFirstVideoGop()}})}},{key:"switching",get:function(){return this._switching}},{key:"setSwitching",value:function(n,r){n===g.d1.VIDEO?this._videoSwiting=r:this._audioSwiting=r,this._switching=this._videoSwiting||this._audioSwiting,f.ZP.log("setSwitching",n,"video",this._videoSwiting,"audio",this._audioSwiting)}},{key:"abrSwitchURL",value:function(n){var r,i=this,a=this.dash,o=this.player,u=this.config;n=n.split("/")[n.split("/").length-1],f.ZP.log("abrSwitchURL",n),this._startLoadInitSegment(n).then((r=(0,s.x)((0,s.l5)().mark(function n(r){var c,d,l,h;return(0,s.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=a.mpd.mediaList.video,n.next=3,i._switch(r.newIdx,g.d1.VIDEO);case 3:if(d=n.sent,l=o.getBufferedRange(o.buffered)[1],h=c[d].mediaSegments.find(function(n){return n.start-l>=0})){n.next=9;break}return i._doAppendInitSegment(g.d1.VIDEO,r,h),n.abrupt("return");case 9:i._pluginInst.info({msg:"abr switch",data:{bd:c[d].definition,d:c[r.newIdx].definition,start:0===l?o.currentTime:h.start},add:!0}),i.setCurrentDefinition(),i._appendInitSegment("video",r,r.newIdx).then(function(){f.ZP.log(null==u?void 0:u.vid,"abrSwitchURL appendInitSegment",r.newIdx),i.setSwitching(g.d1.VIDEO,!1),i.loadData(void 0,!1)}).catch(function(n){f.ZP.log(null==u?void 0:u.vid,"appendInitSegment",n)});case 12:case"end":return n.stop()}},n)})),function(n){return r.apply(this,arguments)})).catch(function(n){f.ZP.log("startLoadInitSegemnt",n)}),f.ZP.log("abrSwitchURLAudioStart",n),this._audioChangeDefinition(n)}},{key:"_switch",value:(a=(0,s.x)((0,s.l5)().mark(function n(r,i){var a,o,u,c;return(0,s.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.dash,u=(o=i===g.d1.VIDEO?a.mpd.mediaList.video:a.mpd.mediaList.audio).selectedIdx,o.selectedIdx=r,n.next=6,a.abortLoadingTasks(i);case 6:return o[u].mediaSegments.every(function(n){return n.downloaded=h.Kc.NO_START,!0}),(c=a.mpd.mediaList.audio)[c.selectedIdx]&&c[c.selectedIdx].mediaSegments&&c[c.selectedIdx].mediaSegments.forEach(function(n){n.downloaded===h.Kc.GOING&&(n.downloaded=h.Kc.NO_START)}),n.abrupt("return",u);case 10:case"end":return n.stop()}},n,this)})),function(n,r){return a.apply(this,arguments)})},{key:"_handleInitData",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,s=this.dash,u=new c.XK;if(n instanceof ArrayBuffer){var d=0===r.length?n:n.slice(r[0],r[1]+1),l=null===i?null:n.slice(i[0],i[1]+1);s&&!1===s.useEME&&this.crypto?this.crypto.decryptHeader(d,"video"===o,!this._pluginInst.softVideo).then(function(r){var i=r.data,o=i.res,s=i.videoTrack,c=i.audioTrack;u.resolve({initSegmentRes:o,data:n,sidxSegmentRes:l,headers:a,videoTrack:s,audioTrack:c})}):u.resolve({initSegmentRes:d,data:n,sidxSegmentRes:l,vid:null,headers:a})}return u}},{key:"_appendInitSegment",value:function(n,r,i){var a=this,o=this.player,s=this.config,u=s.duration;this.dash.mpd.duration>0&&(u=this.dash.mpd.duration);var d=new c.XK,l=this.dash.mpd.mediaList[n],h=r.initSegmentRes,v=r.sidxSegmentRes;if(!r.fromCache&&(r.fromCache=!0,l[l.selectedIdx].wrapperData=r,v))try{if(this.dash.mpd.getSidx(v,n,i,u),this.abrInstance&&n===g.d1.VIDEO){var m=l[l.selectedIdx].mediaSegments[0].segmentDuration;this.abrInstance.readyPromise().then(function(){a.abrInstance.updateSegmentDuration(m)})}}catch(n){o.errorHandler(n);return}if(n===g.d1.VIDEO){var A=(0,y.Ww)(l[l.selectedIdx].codecs);this._pluginInst.setCodeInfo(A)}return f.ZP.log(null==s?void 0:s.vid,"appendInitSegment mediaType:".concat(n,", index: ").concat(i)),this.dash.changeType(n,l[l.selectedIdx].codecs),this._pluginInst._kernal.setNodeTime("init_".concat(n,"_appendStart")),this.dash.appendBuffer(n,h,{mediaType:n,index:i,initSegment:!0,allSegment:!0},r.videoTrack,r.audioTrack).then(function(r){if(a._pluginInst.info({msg:"appendBuffer",data:{mediaType:n,index:i}}),a._pluginInst._kernal.setNodeTime("init_".concat(n,"_appendDone"),r),f.ZP.log(null==s?void 0:s.vid,"appendInitSegment success mediaType:".concat(n,", index: ").concat(i,", \n      curVideoInitSegment:").concat(a.curVideoInitSegmentIdx)),l[l.selectedIdx].inited=!0,l.switchTag=!0,d.resolve(),"video"===n&&a.curVideoInitSegmentIdx!==i){a.curVideoInitSegmentIdx=i,a.curVideoFileId=l[l.selectedIdx].fileId,f.ZP.log(null==s?void 0:s.vid,"appendInitSegment",i,"fileId",a.curVideoFileId);var u=a._findClosetGop(o.currentTime,!0,0);a.dash.mpd.clearBuffer(u,o.duration,"video")}}).catch(function(r){var i,u="appendInitSegment type-".concat(n,"-appendCatch,range:").concat(JSON.stringify(h),",\n      message:").concat(r.message);f.ZP.log(null==s?void 0:s.vid,u),null===(i=a._pluginInst)||void 0===i||i.setStartTimelines(b.l1.MSE_ERROR,{message:u}),r&&r.errorCode&&o&&o.emit(new p.Z(_.wb.MEDIA,r.errorCode,{message:"appendInit ".concat(r.message)}))}),this.dash.appendFirstSegment(n),d}},{key:"_makeInitSegemntRequest",value:(o=(0,s.x)((0,s.l5)().mark(function n(){var r,i,a,o,u,d,l,h,p,v,g,_,y,m,b,A,I,k,E,T,S,C,x,w,R,D,L=arguments;return(0,s.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=L.length>0&&void 0!==L[0]?L[0]:"video",a=L.length>1&&void 0!==L[1]?L[1]:0,o=L.length>2&&void 0!==L[2]?L[2]:null,u=this.dash,d=this.config,l=new c.XK,h=u.mpd&&u.mpd.mediaList[i][a],p=[],v="",h){n.next=12;break}return l.reject({mediaType:i,index:a,initSegmentRange:p,url:v,rejected:!0,msg:"list is null"}),f.ZP.log("initSegmentRequest error"),n.abrupt("return",l);case 12:return p=(h.initSegmentRange||[]).concat(),(g="segment_base"===u.mpd.dashType)&&(p[1]=h.sidxRange[1]),v=h.initSegment,_="video"===i&&(h.definition||this.bandwidth2item[h.bandwidth].definition),this._checkUrlRange(v),y=d.useInitTimeout?d.initTimeout:0,m={mediaType:i,vid:d.vid,definition:"video"===i?_:void 0,useUrlRange:d.useUrlRange,timeout:y,bitrate:h.avg_bitrate||h.bandwidth||h.bitrate,initSegment:!0,codecType:(null===(r=u.mpd)||void 0===r?void 0:r.videoCodecType)||"h264",fileId:h.fileId,checkPreload:!0},b=!1,A=function(){o&&o(),b=!0},n.next=24,u.getData(v,p,i,m,!1,null,A,y);case 24:return k=(I=n.sent||{}).res,E=I.headers,T=I.status,S=I.readyState,C=I.fromCache,x=I.error,w=I.orgDefinition,k&&"error"!==k?(w&&_===(null===(D=this.player.curDefinition)||void 0===D?void 0:D.definition)&&(this.player.curDefinition.orgDefinition=w),this._handleInitData(k,h.initSegmentRange,g?h.sidxRange:null,E,i).then(function(n){n.newIdx=a,n.mediaType=i,n.initSegmentRange=p,n.cache=C,n.definition=m.definition,n.bitrate=m.bitrate,n.url=v,n.fileId=m.fileId,l.resolve(n)})):(R=!1,h.fallbackUrl&&!h.hasFallback&&g&&(h.hasFallback=!0,R=!0,h.initSegment=h.fallbackUrl),l.reject({mediaType:i,index:a,initSegmentRange:p,url:v,rejected:!0,reason:k||(b?"isCanceled":"initData is null"),status:T,readyState:S,ext:x instanceof Error?{msg:x.message}:x,retry:R})),n.abrupt("return",l);case 28:case"end":return n.stop()}},n,this)})),function(){return o.apply(this,arguments)})},{key:"_makeInitSegemntRequestWithRetry",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.handleUrlExpire();var u=s||new c.XK;return a&&this._pluginInst._kernal.setNodeTime("init".concat(r,"_metastart")),this._makeInitSegemntRequest(r,i,o).then(function(o){if(!n._pluginInst){u.reject(new p.Z(_.wb.RUNTIME,p.Z.INIT_SEGMENT_ERROR,{message:"".concat(r," initSegment has destroyed"),mediaType:r,index:i,destroy:!0}));return}n._pluginInst.info({msg:"initSegmentRequest succ"}),a&&(n._pluginInst._kernal.setNodeTime("init".concat(r,"_metadone"),{fromCache:o.cache,byteLength:o.data.byteLength,mediaType:r,index:i,definition:o.definition,isInitSegment:!0},!0),n._emitDefinitionChangeDetailEvent({start:0,bitrate:o.bitrate,mediaType:r,definition:o.definition,url:o.url,fileid:o.fileId})),u.resolve(o)}).catch(function(a){if(a.retry){n._makeInitSegemntRequestWithRetry(r,i,!1,o,u);return}var s,c=a.message?a.message:a;u.reject(new p.Z(_.wb.RUNTIME,p.Z.INIT_SEGMENT_ERROR,{line:329,mediaType:r,index:i,error:c,message:"reason ".concat((null==a||null===(s=a.ext)||void 0===s?void 0:s.msg)||(null==c?void 0:c.reason)," status ").concat(null==c?void 0:c.status),retry:a.retry}))}),u}},{key:"updateAbrCacheData",value:function(n,r,i){var a=this.dash,o=this.config,s=o.autoBitrateOpts||{},u=a.mpd.mediaList.video,c=i.definition,l=o.definitionText&&o.definitionText[c]||c,f=u[n],h=i.bitrate;this.bitrateMap[h]={url:f.id,definition:c,definitionName:l},this.defiIdMap[f.id]={bitrate:h,definition:c},n===u.length-1&&this.isOpenAutoDefi&&this.definitions.push({name:s.autoDefiText||"auto",url:d.UV,selected:r,definition:"自动",fps:void 0})}},{key:"destroyAbr",value:function(){var n=this.player;this.abrInstance&&(n&&n.off(d._c.UPDATE_AUTO_DESC,this._onAutoDescChange),this.abrInstance.destroy(),this.abrInstance=null)}},{key:"initAbr",value:function(){var n,r=this,i=this,a=this.player,o=this.config;l.Z.on(a,d._c.UPDATE_AUTO_DESC,this._onAutoDescChange,"dashDestroy"),this.bitrateMap={},this.defiIdMap={};var u=f.qu;i.abrInstance=new d.ZP(a,o,0,o.dashOpts.dynamic_video,5e3,{logger:f.ZP.abr,openLog:u}),l.Z.once(a,d._c.ABR_START_PROGRESS,this.startProgressTimer,"dashDestroy"),i.abrInstance.onAbrChange=function(n){var r=n.prevBitrate,o=n.curBitrate,s=i.bitrateMap[r],u=i.bitrateMap[o],c=null==s?void 0:s.definition,d=null==u?void 0:u.definition;if(f.ZP.abr("abr change prevD:",c,"curDef:".concat(d)),c!==d&&!!u)i.abrSwitchURL(u.url),a.emit("ABR_CHANGE",{prev:c,cur:d,prevName:s.definitionName,curName:u.definitionName})},l.Z.on(a,d._c.ABR_CHANGE,i.abrInstance.onAbrChange,"dashDestroy"),l.Z.on(a,d._c.ABR_LIMIT_BITRATE,(n=(0,s.x)((0,s.l5)().mark(function n(o){var u,c,d;return(0,s.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u=o.removed,f.ZP.log("ABR_LIMIT_BITRATE, currentTime",a.currentTime,"removed",u),!(i.isCurrentInAbr()&&u)){n.next=8;break}return n.next=5,null===(c=i.dash)||void 0===c?void 0:c._doCancel(g.d1.VIDEO);case 5:d=r._findClosetGop(a.currentTime,!0,2),f.ZP.log("ABR_LIMIT_BITRATE, currentTime",a.currentTime,"removeStart",d),r.removeBuffer(g.d1.VIDEO,d,a.duration);case 8:case"end":return n.stop()}},n)})),function(r){return n.apply(this,arguments)}),"dashDestroy"),i.abrInstance.isCurrentInAbr=this.isCurrentAutoDefi}},{key:"isCurrentInAbr",value:function(){return!!this.abrInstance&&this.abrInstance.isCurrentInAbr}},{key:"resumeLoading",value:function(){var n;if(!!this._suspendLoading)this._suspendLoading=!1,f.ZP.log(null===(n=this.config)||void 0===n?void 0:n.vid,"resumeLoading"),this.startProgressTimer()}},{key:"suspendLoading",value:function(){var n,r;if(!this._suspendLoading)this._suspendLoading=!0,f.ZP.log(null===(n=this.config)||void 0===n?void 0:n.vid,"suspendLoading"),null===(r=this.dash)||void 0===r||r.abortLoadingTasks(),this.clearProgressTimer()}}])},810815:function(n,r,i){"use strict";i.d(r,{Ck:function(){return m},Ef:function(){return P},Hy:function(){return Z},Im:function(){return M},Kc:function(){return T},Lc:function(){return c},OU:function(){return u},U2:function(){return k},VC:function(){return o},WV:function(){return L},WX:function(){return v},X4:function(){return w},Y2:function(){return f},Y9:function(){return E},Z6:function(){return s},_6:function(){return g},_R:function(){return O},a1:function(){return N},c9:function(){return C},h4:function(){return p},i4:function(){return y},iS:function(){return D},kI:function(){return h},mD:function(){return b},ne:function(){return l},of:function(){return B},sp:function(){return R},uD:function(){return x},vG:function(){return a},vL:function(){return _},vp:function(){return d},wL:function(){return A},wW:function(){return S},x3:function(){return I}});var a=1e3,o=50,s=1,u="danger_d_speed",c=5e9,d=300,l={"x-cache":"x_cache","x-response-sinfo":"server_ip"},f={"360p":.45,"480p":.75,"720p":1.6,"1080p":5,"2k":7.5,"4k":12.5},h="player_start",p="wasm_start",v="wasm_ready",g="init_finished",_="core_start",y="start_play",m="error_handler",b="error_catching",A="error_no_mp4opts",I="error_catch_finished",k="next_start",E="next_finished",T={NO_START:0,GOING:1,APPEND:2},S="media_exception",C="mp4_source_exception",x="task_request_expired",w="task_request_error",R={MAIN:"0",BACK:"1"},D={INIT:"init",ERR:"error"},L="currentDashType",O={CDN:"cdn",PCDN:"pcdn"},P=2,B="buffer_control",N={WAITING:"waiting",PLAYING:"playing"},M={BUFFER_CONTROLS:"buffer_control"},Z="mse_not_open_count"},118608:function(n,r,i){"use strict";i.d(r,{Z:function(){return y}});var a=i(22450);i(836654),i(511141),i(891555),i(981168),i(469577),i(98601),i(110617),i(826893),i(927234),i(284961),i(792315),i(329913),i(868352),i(17322),i(63249),i(950665),i(180138),i(911234),i(387605),i(936097),i(786120),i(339597),i(877193),i(391375),i(632637),i(645524),i(800599),i(69896),i(660999),i(12946),i(416555),i(747644),i(404948),i(789680),i(742611);var o=i(696452),s=i.n(o),u=i(258817),c=i(806394),d=i(810815),l=i(262416),f=i(749517),h=i(21976),p=i(721560),v=i(669141),g=i(212401);function _(n,r,i,a){return n[r]?a?a(n[r]):n[r]:i}let y=function(){var n;function r(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0;(0,a.PA)(this,r),s()(this),this.url=n,this.options=o,this.dash=u,this.useSeparationMode=null===(i=this.dash.config)||void 0===i?void 0:i.useSeparationMode,this.mediaList={video:[],audio:[]},this.mediaList.audio.selectedIdx=0,this.retryMax=10,this.retry=0,this.type="live",this.isEnd=!1,this.duration=0,this.videoCodecType=null,this.videoCodecs=null,this.hasSync=!1,this._readyPromise=new l.XK,this._loadStates={video:this._createLoadingState(),audio:this._createLoadingState()}}return(0,a.qH)(r,[{key:"_createLoadingState",value:function(){return{currentIndex:0,isLoading:!1}}},{key:"readyPromise",get:function(){return this._readyPromise}},{key:"setLoadingState",value:function(n,r){this._loadStates[n].isLoading=r}},{key:"calcVideoCodeType",value:function(n,r){if(!!n||!!r){var i=null;r?i=r.split(".")[0]:n&&(i=n.split(".")[0]);for(var a=Object.keys(h.$V),o=0;o<a.length;o++){var s=a[o],u=h.$V[s];if(u.types.concat(u.visualEntryBox).indexOf(i)>-1){this.videoCodecType=s,"hevc"===s?this.videoCodecType="h265":"bvc2"===s?this.videoCodecType="h266":"avc"===s&&(this.videoCodecType="h264"),this.videoCodecs=u.codecs;break}}f.ZP.log("mpd dataType:",n,"codecs:",r,"cal type:",this.videoCodecType,"videoCodecs",this.videoCodecs),!this.videoCodecType&&(this.videoCodecType="h264",this.videoCodecs=h.$V[h.d0.AVC].codecs),this.dash&&this.dash._pluginInst&&this.dash._pluginInst.setCodeInfo(this.videoCodecType)}}},{key:"fetch",value:(n=(0,a.x)((0,a.l5)().mark(function n(i){var o,s,u,d,l,f,h,p;return(0,a.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=this,s={TYPE:"LIVE",ENDLIST:""},u=[],n.prev=3,d=new v.mf({}),n.next=7,d.load(i);case 7:if(!(l=n.sent.data)){n.next=21;break}if(f=r.parseMPD(l)){n.next=13;break}throw Error("parse mpd error");case 13:return this._parseMeta(s,f),this._parseSegments(f,i),["video","audio"].forEach(function(n){o.mediaList[n].length>0&&(o.mediaList[n].selectedIdx="video"===n&&o.dash.selectedIdx||0,o.mediaList[n].sort(function(r,i){return"video"===n?i.height-r.height:i.bandwidth-r.bandwidth}))}),0===o.mediaList.video.length&&0===o.mediaList.audio.length&&(null===(h=o.dash)||void 0===h||h.emit("error",new c.Z(g.wb.MANIFEST,g.wb.SUB_TYPES.DASH,{url:i,message:"NO_MEDIALIST fetch"}))),n.abrupt("return",{meta:s,segments:u});case 21:throw o.dash.emit("error",new c.Z(g.wb.MANIFEST,g.wb.SUB_TYPES.DASH,{url:i,message:"mpd parse error"})),Error("MPD_PARSE_ERROR");case 23:n.next=29;break;case 25:throw n.prev=25,n.t0=n.catch(3),o.dash.emit("error",new c.Z(g.wb.RUNTIME,c.Z.MPD_INIT_ERROR,{httpCode:null===(p=n.t0.response)||void 0===p?void 0:p.status,url:i,message:null===n.t0||void 0===n.t0?void 0:n.t0.message})),Error(n.t0);case 29:case"end":return n.stop()}},n,this,[[3,25]])})),function(r){return n.apply(this,arguments)})},{key:"_parseMeta",value:function(n,r){"static"===r.type&&(n.TYPE="VOD"),r.minBufferTime&&(n.minBufferTime=u.Z.durationConvert(r.minBufferTime)),r.maxSegmentDuration&&(n.maxSegmentDuration=u.Z.durationConvert(r.maxSegmentDuration)),r.mediaPresentationDuration&&(this.duration=u.Z.durationConvert(r.mediaPresentationDuration));var i=r.Period[0];!this.duration&&i&&i.duration&&(this.duration=u.Z.durationConvert(i.duration)),n.duration=this.duration}},{key:"_parseST",value:function(n,r,i,a,o){for(var s=parseFloat(n.timescale),c=Math.round(parseFloat(n.duration)/s),d=parseInt(n.startNumber,10),l=d+Math.ceil(this.duration/c)-1,f=d;f<=l;f++){var h=c*(f-d),p=c*(f-d+1);f===l&&(c=this.duration-c*(l-d),p=this.duration),r.push({idx:f,start:Math.round(h),end:Math.round(p),url:a+n.media.replace("$RepresentationID$",i).replace("$Number%04d$",u.Z.preFixInterge(f,4)),downloaded:0,segmentDuration:c,height:o})}}},{key:"_getVideoSegments",value:function(n){var r,i,a,o,s,u=n.bandwidth,c=n.id,d=n.baseURL,l=n.initSegment,f=n.mediaSegments,h=n.mimeType,p=n.codecs,v=n.width,g=n.height,_=n.frameRate,y=n.sar,m=n.startWithSAP,b=n.timescale,A=n.duration,I=n.encrypted;if(this.options.dynamic_video&&this.options.dynamic_video.dynamic_video_list)for(var k=0;k<this.options.dynamic_video.dynamic_video_list.length;k++){var E=this.options.dynamic_video.dynamic_video_list[k];E.bitrate===u&&(r=E.size,i=E.definition,a=E.file_id,o=E.audio_file_id,s=E.codecType||E.codec_type)}this.mediaList.video.push({id:c,baseURL:d,initSegment:d+l.replace("$RepresentationID$",c),inited:!1,mediaSegments:f,mimeType:h,codecs:p,width:v,height:g,size:r,frameRate:_,sar:y,startWithSAP:m,bandwidth:u,timescale:b,duration:A,encrypted:I,definition:i,fileId:a,audioFileId:o,codecType:s})}},{key:"_getAudioSegments",value:function(n){var r,i=n.bandwidth,a=n.id,o=n.baseURL,s=n.initSegment,u=n.mediaSegments,c=n.mimeType,d=n.codecs,l=n.startWithSAP,f=n.timescale,h=n.duration,p=n.encrypted;if(this.options.dynamic_video&&this.options.dynamic_video.dynamic_audio_list)for(var v=0;v<this.options.dynamic_video.dynamic_audio_list.length;v++)this.options.dynamic_video.dynamic_audio_list[v].bitrate===i&&(r=this.options.dynamic_video.dynamic_audio_list[v].size);this.mediaList.audio.push({id:a,baseURL:o,initSegment:o+s.replace("$RepresentationID$",a),inited:!1,mediaSegments:u,mimeType:c,codecs:d,startWithSAP:l,bandwidth:i,size:r,timescale:f,duration:h,encrypted:p})}},{key:"_parseSegments",value:function(n,r){var i=this,a=[],o="";n.BaseURL&&(o=n.BaseURL[0]);var s=n.Period[0];s.AdaptationSet&&s.AdaptationSet.length>1&&s.AdaptationSet.forEach(function(n){var s="video/mp4",u="avc1.64001E",c="640",d="360",l="25",f="1:1",h="1",p="588633";n.mimeType&&("video/mp4"===(s=n.mimeType)?(u=n.codecs,c=parseFloat(n.width),d=parseFloat(n.height),l=parseFloat(n.frameRate),f=n.sar,h=n.startWithSAP,p=parseFloat(n.bandwidth),i.calcVideoCodeType(null,u)):"audio/mp4"===s&&(u=n.codecs,h=n.startWithSAP,p=parseFloat(n.bandwidth))),n.Representation.forEach(function(v){a.indexOf(v.id)>-1&&(v.id=(parseInt(a[a.length-1],10)+1).toString()),a.push(v.id);var g,y="",m=[],b=0,A=r.slice(0,r.lastIndexOf("/")+1)+o;"video/mp4"===(s=_(v,"mimeType",s))?(v.codecs&&(u=v.codecs,i.calcVideoCodeType(null,u)),c=_(v,"width",c,parseFloat),d=_(v,"height",d,parseFloat),l=_(v,"frameRate",l,parseFloat),f=_(v,"sar",f)):"audio/mp4"===s&&(u=_(v,"codecs",u)),h=_(v,"startWithSAP",h),p=_(v,"bandwidth",p,parseFloat),v.BaseURL&&v.BaseURL.length>0&&(A+=v.BaseURL[0]),n.SegmentTemplate&&n.SegmentTemplate.length>0&&(g=n.SegmentTemplate[0]),v.SegmentTemplate&&v.SegmentTemplate.length>0&&(g=v.SegmentTemplate[0]);var I=!1;(n.ContentProtection||v.ContentProtection)&&(I=!0),g&&(y=g.initialization,b=parseFloat(g.duration),i._parseST(g,m,v.id,A,d)),p=parseInt(p),"video/mp4"===s?i._getVideoSegments({id:v.id,bandwidth:p,baseURL:A,initSegment:y,mediaSegments:m,mimeType:s,codecs:u,width:c,height:d,frameRate:l,sar:f,startWithSAP:h,timescale:0,duration:b,encrypted:I}):"audio/mp4"===s&&i._getAudioSegments({id:v.id,baseURL:A,bandwidth:p,initSegment:y,mediaSegments:m,mimeType:s,codecs:u,startWithSAP:h,timescale:0,duration:b,encrypted:I})})})}},{key:"getCurrDefition",value:function(){var n=this.mediaList,r=n.video,i=n.audio,o={all:{},videoFileId:r[r.selectedIdx].fileId,audioFileId:i[i.selectedIdx].fileId},s,u=(0,a.sf)(r);try{for(u.s();!(s=u.n()).done;){var c=s.value;o.all[c.fileId]=c}}catch(n){u.e(n)}finally{u.f()}var d,l=(0,a.sf)(i);try{for(l.s();!(d=l.n()).done;){var f=d.value;o.all[f.fileId]=f}}catch(n){l.e(n)}finally{l.f()}return o}},{key:"init",value:function(){var n=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this;this.mediaList={video:[],audio:[]};var a=i.options;if(a.dynamic_video.dynamic_type&&"segment_template"!==a.dynamic_video.dynamic_type){i.dashType="segment_base",a.duration;var o,s=a.dynamic_video;["dynamic_video_list","dynamic_audio_list"].forEach(function(n){var o="dynamic_audio_list"===n,u=0;s[n].forEach(function(s,c){var d=parseInt(s.init_range.split("-")[0],10),l=parseInt(s.init_range.split("-")[1],10),f=parseInt(s.index_range.split("-")[0],10),h=parseInt(s.index_range.split("-")[1],10),p=s.first_segment_range,v=p?[parseInt(p.split("-")[0],10),parseInt(p.split("-")[1],10)]:null;!o&&i.calcVideoCodeType(s.codec_type);var g=s.fileId||s.file_id,_="dynamic_audio_list"===n?"audio":"video",y="video"===_?r&&r.videoFileId:r&&r.audioFileId,m=r&&r.all,b=m&&m[g];g===y&&(i.mediaList[_].selectedIdx=c,b.wrapperData&&(b.wrapperData.newIdx=c),b.mediaSegments&&b.mediaSegments.forEach(function(n){n.selectedIdx=c})),i.mediaList[_].push({id:(u++).toString(),baseURL:s.main_url,initSegment:s.main_url,initSegmentRange:[d,l],sidxRange:[f,h],firstMoofMdatRange:v,inited:!1,hasSidx:!1,mediaSegments:b?b.mediaSegments:[],mimeType:o?"audio/mp4":"video/mp4",codecs:o?"mp4a.40.2":i.videoCodecs,width:s.vwidth,height:s.vheight,bandwidth:parseInt(s.bitrate),avg_bitrate:s.avg_bitrate,size:s.size,timescale:-1,duration:a.duration,encrypted:s.encrypt,kid:s.kid,definition:s.definition,sidxRes:void 0,fileId:s.file_id,audioFileId:s.audio_file_id,fallbackUrl:s.fallback_url,hasFallback:!1,backupUrl:s.backup_url_1,hasBackup:!1,wrapperData:b?b.wrapperData:null})})}),i.type="vod",["video","audio"].forEach(function(n){i.mediaList[n].length>0&&(!r&&(i.mediaList[n].selectedIdx="video"===n&&i.dash.selectedIdx||0),"video"===n&&i.mediaList[n].sort(function(r,i){return"video"===n?i.height-r.height:i.bandwidth-r.bandwidth}))}),0===i.mediaList.video.length&&0===i.mediaList.audio.length&&(f.ZP.log("medaiList is null",JSON.stringify(i.options.dynamic_video)),null===(o=i.dash)||void 0===o||o.emit("error",new c.Z(g.wb.MANIFEST,g.wb.SUB_TYPES.DASH,{message:"NO_MEDIALIST"}))),n&&i.emit("ready"),i._readyPromise.resolve()}else i.dashType="segment_template",i.fetch(a.dynamic_video.main_url).then(function(n){i.type=n.meta.TYPE.toLocaleLowerCase(),i.emit("ready"),i._readyPromise.resolve()},function(){["video","audio"].forEach(function(n){i.mediaList[n]=[]}),i.retry++,i.retry,i.retryMax})}},{key:"getSidx",value:function(n){var r,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0,u=this.mediaList[a][o],d=u.sidxRange[1];try{var l=n instanceof ArrayBuffer?n:n.buffer,h=new Uint8Array(l),v=String.fromCharCode.apply(null,h.subarray(4,8));if("sidx"!==v)throw f.ZP.log("mpd sdix parse err"),Error("topLevel ".concat(v,", index:").concat(o,", res:").concat(n.byteLength,", range:").concat(JSON.stringify(u.sidxRange)));var _=(r=p.I.sidx(p.I.findBox(new Uint8Array(l),[])[0])).timescale,y=[],m=0,b=0,A=d+1,I=A-1,k=u.cancelFirstSegmentReq,E=u.firstMoofMdatRange;r.references.forEach(function(n,r){b+=n.subsegment_duration,I+=n.referenced_size,y.push({idx:r+1,url:u.initSegment,start:Math.round(m/_),end:Math.round(b/_),startRaw:m/_,endRaw:b/_,range:[A,I],downloaded:!k&&E&&0===m?1:0,segmentDuration:Math.round(n.subsegment_duration/_),reference_type:n.reference_type,starts_with_SAP:n.starts_with_SAP,SAP_type:n.SAP_type,SAP_delta_time:n.SAP_delta_time,codecType:i.getCodecType(),mediaType:a,selectedIdx:o,fileId:u.fileId}),m=b+1,A=I+1}),y[0].startTime_=0,u.mediaDuration=0,y.forEach(function(n,r){u.mediaDuration+=n.segmentDuration,r>0&&(n.startTime_=y[r-1].startTime_+y[r-1].segmentDuration),r===y.length-1&&s&&(n.end=s)}),u.hasSidx=!0,u.mediaSegments=y,u.timescale=_,u.sidxRes=n}catch(n){if(this.sidxHanded)return;throw this.sidxHanded=!0,new c.Z(g.wb.DEMUX,g.wb.SUB_TYPES.SIDX,{line:398,handle:"[MPD] getSidx",message:"mpd segment base Parse getSidx error ".concat(a," err: ").concat(n.message)})}}},{key:"getCodecType",value:function(){return"bvc2"===this.videoCodecType?"h266":"hevc"===this.videoCodecType?"h265":this.videoCodecType?this.videoCodecType:"h264"}},{key:"checkInBuffered",value:function(n,r,i){return 0!==n.length&&this._inBufferd(r,i,n)}},{key:"_inBufferd",value:function(n,r,i){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=0;o<i.length;o++){var s=i[o].start,u=i[o].end;if(!(r<s)&&!(n>u)){if(s-a<n&&r<u+a)return!0}}return!1}},{key:"getBuffered",value:function(n){return this._getBuffered(n)}},{key:"_getBuffered",value:function(n){var r=this._getMseBuffered(n);if(!r||0===r.length)return[];for(var i=[],a=0;a<r.length;a++)i.push({start:r.start(a),end:r.end(a)});return i}},{key:"_getMseBuffered",value:function(n){var r,i,a,o=this.dash.mse;return o?r="[object Function]"===Object.prototype.toString.call(o.buffered)?this.dash.mse.buffered(n):"video"===n?null===(i=o.timeline)||void 0===i||null===(i=i.videoRender)||void 0===i?void 0:i.buffered:null===(a=o.timeline)||void 0===a||null===(a=a.audioRender)||void 0===a?void 0:a.buffered:[]}},{key:"seek",value:function(n,r,i){return this._getMediaResultsSeparate(n,r,["video","audio"],i)}},{key:"setSegmentIndexByTime",value:function(n){this._setSegmentBySeek(n,"video"),this._setSegmentBySeek(n,"audio")}},{key:"getCurSegment",value:function(){for(var n=["video","audio"],r={},i=0;i<n.length;i++){var a=n[i],o=null===(s=this.mediaList[a][this.mediaList[a].selectedIdx])||void 0===s?void 0:s.mediaSegments;if(o){var s,u,c,d,l=this._loadStates[a].currentIndex;r[a]=o[l],f.ZP.log("getCurSegment",a,null===(u=r[a])||void 0===u?void 0:u.idx,null===(c=r[a])||void 0===c?void 0:c.start,null===(d=r[a])||void 0===d?void 0:d.end,"idx",l,"len",o.length)}}return r}},{key:"getVideoFirstGop",value:function(){var n,r="video",i=null===(n=this.mediaList[r][this.mediaList[r].selectedIdx])||void 0===n?void 0:n.mediaSegments;return null==i?void 0:i[0]}},{key:"checkRemovedSegment",value:function(n){for(var r=["video","audio"],i={},a=0;a<r.length;a++){var o=r[a],s=n[o];if(!!s){var u=this._getBuffered(o);!this.checkInBuffered(u,s.startRaw,s.endRaw)&&(i[o]={remove:!0,start:s.startRaw,end:s.endRaw})}}return i}},{key:"_setSegmentBySeek",value:function(n,r){var i=this._findSegmentIndexByTime(r,n),a=i;i=this._adjustSegIndex(i,r),f.ZP.log("_setSegmentBySeek",r,a,"newSeg",i),this.setNextSegmentIndex(r,i),this.setLoadingState(r,!1)}},{key:"_adjustSegIndex",value:function(n,r){var i,a=null===(i=this.mediaList[r][this.mediaList[r].selectedIdx])||void 0===i?void 0:i.mediaSegments;if(a&&a.length>0){for(var o=this._getBuffered(r),s=n;s<a.length;s++){var u=a[s];if(this._isItemBufferRemoved(r,o,u),(null==u?void 0:u.downloaded)===0){n=s;break}}}return n}},{key:"setNextSegmentIndex",value:function(n,r){this._loadStates[n].currentIndex=r}},{key:"moveNextSegmentIndex",value:function(n,r){if(r-1===this._loadStates[n].currentIndex){var i=this._loadStates[n].currentIndex,a=this._adjustSegIndex(i+1,n);this._loadStates[n].currentIndex=a,i+1!==a&&f.ZP.log("seekResult moveNextSegmentIndex  mediaType",n,"segIdx",i+1,"segIdx",a)}}},{key:"_getMediaResultsSeparate",value:function(n,r,i,a){for(var o={},s=0;s<i.length;s++){var u=i[s];o[u]=[];var c=this._getCurBuffered(u),l=this._getBuffered(u),h=this._loadStates[u];if(h.isLoading||n+r<(null==c?void 0:c[1]))continue;var p=null===(m=this.mediaList[u][this.mediaList[u].selectedIdx])||void 0===m?void 0:m.mediaSegments;if(!p||0===p.length||h.currentIndex>=p.length)continue;var v=h.currentIndex,g=p[v];if(!g)continue;var _=g.end-g.start;if((null==c?void 0:c[1])===0||(null==c?void 0:c[1])>0&&g.start-c[1]>_+1){var y=this._findSegmentIndexByTime(u,n);if(y!==v-1||a){var m,b,A,I=y;(null==c?void 0:c[1])>0&&(I=this._adjustSegIndex(y,u),f.ZP.log("getMediaResults adjust1",u,v,"new",y,"adjustIdx",I,"buf",null==c?void 0:c[1])),this.setNextSegmentIndex(u,I),g=p[h.currentIndex],f.ZP.log("getMediaResults",u,v,"new",y,"adjustIdx",I,"buf",null==c?void 0:c[1],"gap",(null===(b=g)||void 0===b?void 0:b.start)-c[1],"mediaBuffers",JSON.stringify(l),"seg downloaded",null===(A=g)||void 0===A?void 0:A.downloaded)}else f.ZP.log("getMediaResults seq",u,"nsegIndex",y)}if(!!g){if(g.start-n>r){f.ZP.log("outof time");continue}var k=this.checkInBuffered(l,g.startRaw,g.endRaw);if((null==c?void 0:c[1])===0&&k&&(f.ZP.log("_getMediaResults buffer gap fix",u),h.currentIndex<p.length-1&&(h.currentIndex++,g=p[h.currentIndex])),(null==c?void 0:c[1])>0&&g.end<n){var E=g.end;this._setSegmentBySeek(c[1],u),g=p[h.currentIndex],f.ZP.log("getMediaResults low",u,"curBuffers",c,"orgEnd",E,"newend",g.end,"currentTime",n)}g&&g.downloaded===d.Kc.NO_START&&o[u].push(g)}}return o}},{key:"_findSegmentIndexByTime",value:function(n,r){var i,a=null===(i=this.mediaList[n][this.mediaList[n].selectedIdx])||void 0===i?void 0:i.mediaSegments;if(a&&a.length>0){for(var o=0;o<a.length;o++){var s=a[o];if(r>=s.start&&r<s.end)return o}var u=a[a.length-1];if(.2>Math.abs(r-(null==u?void 0:u.end)))return a.length-1}return -1}},{key:"_getCurBuffered",value:function(n){var r,i=this._getMseBuffered(n);return Array.isArray(i)?[0,0]:null===(r=this.dash.player)||void 0===r?void 0:r.getBufferedRange(i)}},{key:"_isItemBufferRemoved",value:function(n,r,i){if(i&&i.downloaded===d.Kc.APPEND)return!this.checkInBuffered(r,i.startRaw,i.endRaw)&&(f.ZP.log("".concat(n," start:").concat(i.start," end:").concat(i.end," segment downloaded to set false")),i.downloaded=d.Kc.NO_START,!0);return i&&i.downloaded===d.Kc.NO_START&&this.checkInBuffered(r,i.startRaw,i.endRaw)&&(i.downloaded=d.Kc.APPEND,f.ZP.log("".concat(n," start:").concat(i.start," end:").concat(i.end," segment downloaded to append"))),!1}},{key:"clearBuffer",value:function(n,r,i){if(!(n>r)){f.ZP.log("mpd clearBuffer ".concat(i," start:").concat(n," end:").concat(r));var a=this;"vod"===a.type&&(i?[i]:["video","audio"]).forEach(function(i){if(a.mediaList[i].length>0){var o=a.mediaList[i][a.mediaList[i].selectedIdx],s=[];o.mediaSegments.forEach(function(i,a){!(i.end<n)&&!(i.start>r)&&(i.downloaded=d.Kc.NO_START,i.extRange=void 0,s.push(a))});var u=s.length>0?s[0]:void 0,c=s.length>1?s[s.length-1]:u;f.ZP.log("".concat(i," start:").concat(n," end:").concat(r,",\n             startId:").concat(u," , endId:").concat(c,", segment downloaded set false"))}})}}},{key:"isLastSegmentAndAppend",value:function(n,r){if(!this.mediaList[n])return!0;var i,a=r-1,o=this.mediaList[n].selectedIdx,s=null===(i=this.mediaList[n][o])||void 0===i?void 0:i.mediaSegments;return!!s&&(!s[a]||this._isSegmentAppend(s[a])&&s.length-1===a)}},{key:"_isSegmentAppend",value:function(n){return n.downloaded===d.Kc.APPEND}},{key:"isSegmentAppendFromIdx",value:function(n,r){if(!this.mediaList[n])return{res:!0,emptyTrack:!0};var i,a=0,o=this.mediaList[n].selectedIdx,s=(null===(i=this.mediaList[n][o])||void 0===i?void 0:i.mediaSegments)||[];if(0===s.length)return{res:!0,emptySegments:!0};for(var u=0;u<s.length;u++)if(s[u].start<=r&&r<=s[u].end){a=u;break}s&&r>=s[s.length-1].end&&(a=s.length-1);var c=!0;if(s)for(var d=a;a<s.length&&s[d];d++){;if(!this._isSegmentAppend(s[d])){c=!1;break}}else c=!1;return{res:c}}}],[{key:"parseMPD",value:function(n){if("string"==typeof n&&(r=n),n instanceof ArrayBuffer){var r,i=new Uint8Array(n);r=String.fromCharCode.apply(null,i)}if(!r)return null;var a=performance.now();return r=r.replace(/<(\/)?(\w+:)+(\w+)/g,"<$1$3"),f.ZP.log("MPD cost",performance.now()-a),l.v8.parse(r)}}])}()},726169:function(n,r,i){"use strict";i.d(r,{Lj:function(){return _},ZP:function(){return b}});var a,o,s,u,c,d,l=i(22450);i(691842),i(910795),i(891555),i(429532),i(110617),i(826893),i(250440);var f=i(896167),h=i(258817),p=i(749517),v=["app_id","trackerUrl","sid","task_type"],g={CLOSE:"close",OPEN:"open",FORBIDDEN:"forbidden"},_={PCDN:1,CDN:0},y={PLAY:1},m={enterMinBuffer:10,minDuration:25,openPreloadPCDN:!1,outMaxBuffer:5,openPCDN:!1,trackerUrl:"https://vc-gate.ndcpp.com/sdk/get_peer",withReferer:1};var b=(0,l.qH)(function n(r,i,a,o,s,u){(0,l.PA)(this,n),this._pcdnNodes=null,this._cachedPcdn={},this._PCDNState=g.CLOSE,this._retryInfo={},this._bitrate2file={},this._isOpenPCDN=!1,this._duration=0,this._vid="",this._tag="",this._isUseCDN=!1,this._lastPCDNUrl="",this.pcdn_download_request_cnt=0,this.pcdn_download_failed_cnt=0,this._PCDNSwitchCnt=0,this.pcdn_tracker_failed_cnt=0,this.pcdn_tracker_request_cnt=0,this._pcdnVVStat={try_req_node:0,req_node_succ:0,has_ret_node:0,conn_req_num:0,conn_fail_num:0,conn_jump_num:0,pSCCancelCnt:0},this._lastBitrateMap={},this._pcdnConfig=Object.assign({},m,r),this._isOpenPCDN=i,this.updateConfig({vid:o,duration:a}),this._player=s,this._tag=u},[{key:"getPCDNReqId",value:function(n){var r=n.uri||this._vid;return this._getPCDNReqIdBitrate(r,n.bitrate)}},{key:"_getPCDNReqIdBitrate",value:function(n,r){return n.slice(-20)+r}},{key:"_createFileInfo",value:function(n){var r,i=n.file_id||n.fileId,a=n.main_url||n.baseURL;if(r=a,!/^http(s)?:\/\/.+/.test(r))a=document.location.protocol+a;return{vid:this._vid,cdn_url:a,file_type:"dash",sfid:i,bitrate:n.bitrate,duration:Math.floor(this._duration||0),size:n.size}}},{key:"checkPCDN",value:(a=(0,l.x)((0,l.l5)().mark(function n(r){var i,a,o,s,u,c,d,h,g,_,m,b,A;return(0,l.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._vid){n.next=3;break}return n.abrupt("return");case 3:if(!((null===(i=this._pcdnConfig)||void 0===i?void 0:i.openPCDN)&&this._isOpenPCDN&&this._duration>=this._pcdnConfig.minDuration&&r)){n.next=24;break}if(a=r.bitrate,!(o=this._cachedPcdn[a])){n.next=12;break}if(s=o.pcdnNodeList,u=o.pcdnTraceInfo,!(s&&s.length>0&&u)){n.next=12;break}return this._pcdnTraceInfo=u,n.abrupt("return");case 12:return d=(c=this._pcdnConfig).app_id,h=c.trackerUrl,g=c.sid,_=c.task_type,m=(0,l.Kd)(c,v),b=r.file_id||r.fileId,A=this._createFileInfo(r),this._bitrate2file[r.bitrate]=b,this._pcdn?(p.ZP.log(this._tag,"resetTrackeArgs"),this._pcdn.resetTrackeArgs()):this._pcdn=new f.e((0,l.Zj)({productConfig:{app_id:d,sid:g,task_type:_||y.PLAY},trackerUrl:h},m),this._player,A.bitrate,A.duration),n.prev=17,n.next=20,this.getPCDNNode(r.bitrate,r);case 20:n.next=24;break;case 22:n.prev=22,n.t0=n.catch(17);case 24:case"end":return n.stop()}},n,this,[[17,22]])})),function(n){return a.apply(this,arguments)})},{key:"setSetRetryInfo",value:function(n){var r=h.Z.getHostFromUrl(n);this._retryInfo[r]=!0}},{key:"_updateNodeList",value:function(n,r){var i=this;if(n&&n.nodes){var a,o={pcdnNodeList:n.nodes.filter(function(n){if(!Object.prototype.hasOwnProperty.call(i._retryInfo,h.Z.getHostFromUrl(null==n?void 0:n.url)))return n}),pcdnTraceInfo:{uri:n.vid,fid:n.fid,trace_id:n.trace_id}},s=this._bitrate2file[r];null!==(a=n.fid)&&void 0!==a&&a.includes(s)?(this._cachedPcdn[r]=o,this._pcdnTraceInfo=o.pcdnTraceInfo,p.ZP.log(this._tag,"_updateNodeList",JSON.stringify(this._cachedPcdn))):8*function(n){return Math.floor(n/8)}(r)===n.bitrate&&(this._cachedPcdn[r]=o,p.ZP.log(this._tag,"_updateNodeList not file not match cachedFileid",s,"pcdnRet"))}}},{key:"isUpdateNode",value:function(n){var r=this._getNodeListByBitrate(n);return!r||!r.length}},{key:"selectedPCDN",value:function(n,r){var i,a;if(!!(null===(i=this._pcdnConfig)||void 0===i?void 0:i.openPCDN)){if(this._PCDNState===g.FORBIDDEN||n){this._isUseCDN=!0;return}if(this.isUsePCDN(r)){this._isUseCDN=!1;var o=this._getNodeListByBitrate(r);o&&(a=o[0].url,this._lastPCDNUrl!==a&&(this._lastPCDNUrl=a,this._pcdnVVStat.conn_req_num+=1),this.pcdn_download_request_cnt++)}else!this._isUseCDN&&(this._PCDNSwitchCnt++,this._pcdnVVStat.conn_jump_num+=1,this._PCDNSwitchCnt>=this._pcdnConfig.switchPCDNMaxCnt&&this.updatePCDNState(g.FORBIDDEN,function(){})),this._isUseCDN=!0;return a}}},{key:"isUsePCDN",value:function(n){var r=this._getNodeListByBitrate(n);return this._PCDNState===g.OPEN&&r&&r.length>0}},{key:"_getNodeListByBitrate",value:function(n){var r=this._cachedPcdn[n];return r?r.pcdnNodeList:null}},{key:"getPCDNInOUtBuffer",value:function(){var n,r,i,a=null===(n=this._pcdnConfig)||void 0===n?void 0:n.openPCDN,o=this._pcdnConfig,s=null===(r=this._pcdn)||void 0===r?void 0:r.getPCDNInBuffer(),u=null===(i=this._pcdn)||void 0===i?void 0:i.getPCDNOutBuffer(),c=s||(null==o?void 0:o.enterMinBuffer)||(null==o?void 0:o.minBuffer)||-1,d=u||(null==o?void 0:o.outMaxBuffer)||-1;return{PCDNInBuffer:a?c:-1,PCDNOutBuffer:a?d:-1}}},{key:"isOpenPCDN",value:function(n,r,i,a){if(!!(null===(o=this._pcdnConfig)||void 0===o?void 0:o.openPCDN)){var o,s=this.getPCDNInOUtBuffer(),u=s.PCDNInBuffer,c=s.PCDNOutBuffer;n>=u?this._doOpenPCDN(r,a):n<c&&this.updatePCDNState(g.CLOSE,i)}}},{key:"_emptyCancel",value:function(){}},{key:"_doOpenPCDN",value:(o=(0,l.x)((0,l.l5)().mark(function n(r,i){var a;return(0,l.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.updatePCDNState(g.OPEN,this._emptyCancel),null===(a=this._pcdn)||void 0===a||a.updatePCDNBitrate(r),!this.isUpdateNode(r)){n.next=5;break}return n.next=5,this.getPCDNNode(r,i);case 5:case"end":return n.stop()}},n,this)})),function(n,r){return o.apply(this,arguments)})},{key:"openPCDNForce",value:(s=(0,l.x)((0,l.l5)().mark(function n(r,i){var a;return(0,l.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(a=this._pcdnConfig)||void 0===a?void 0:a.openPCDN){n.next=3;break}return n.abrupt("return");case 3:return this._PCDNState=g.OPEN,n.next=6,this.checkPCDN(i);case 6:case"end":return n.stop()}},n,this)})),function(n,r){return s.apply(this,arguments)})},{key:"updatePCDNState",value:(u=(0,l.x)((0,l.l5)().mark(function n(r,i){return(0,l.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r!==g.FORBIDDEN){n.next=5;break}this._PCDNState=r,p.ZP.log(this._tag,"updatePCDNState",g.FORBIDDEN),n.next=16;break;case 5:if(!(this._PCDNState!==g.FORBIDDEN&&this._PCDNState!==r)){n.next=16;break}if(!(!this._isUseCDN&&r===g.CLOSE&&this._PCDNState!==g.CLOSE)){n.next=14;break}return this._PCDNState=r,p.ZP.log(this._tag,"updatePCDNState",g.CLOSE),n.next=11,i();case 11:this._pcdnVVStat.pSCCancelCnt++,n.next=16;break;case 14:this._PCDNState=r,p.ZP.log(this._tag,"updatePCDNState",r);case 16:case"end":return n.stop()}},n,this)})),function(n,r){return u.apply(this,arguments)})},{key:"getPCDNNode",value:(c=(0,l.x)((0,l.l5)().mark(function n(r,i){var a,o,s,u,c,d,f,h,v;return(0,l.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._pcdn){n.next=2;break}return n.abrupt("return",null);case 2:if(n.prev=2,o=i.mediaType,s=this._lastfetchNodeTime[o]||0,u=this._lastBitrateMap[o],!((c=Date.now())-s<this._pcdn.options.NULLNodeTimeStep&&u===r)){n.next=9;break}return n.abrupt("return");case 9:return this._lastfetchNodeTime[o]=c,this._lastBitrateMap[o]=r,d=this._getPCDNReqIdBitrate(this._vid,r),f=this._createFileInfo(i),n.next=15,this._pcdn.fetchPCDNNode(null,f,d);case 15:if(h=n.sent,v=this._getPCDNReqIdBitrate(this._vid,r),!(null!=h&&h.req_id&&v!==h.req_id)){n.next=20;break}return p.ZP.log("getPCDNNode is not match curDefinition reqId",d,", pcdnRet.req_id",h.req_id),n.abrupt("return");case 20:h&&this._updateNodeList(h,r),this._pcdnVVStat.try_req_node+=1,this._pcdnVVStat.req_node_succ+=1,this._pcdnVVStat.has_ret_node+=(null==h||null===(a=h.nodes)||void 0===a?void 0:a.length)>0?1:0,n.next=30;break;case 26:n.prev=26,n.t0=n.catch(2),this._pcdnVVStat.try_req_node+=1;case 30:case"end":return n.stop()}},n,this,[[2,26]])})),function(n,r){return c.apply(this,arguments)})},{key:"removePCDNNode",value:(d=(0,l.x)((0,l.l5)().mark(function n(r,i){return(0,l.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._pcdn){n.next=2;break}return n.abrupt("return",null);case 2:return p.ZP.log(this._tag,"removePCDNNode",r,i),this.pcdn_download_failed_cnt++,this._pcdnVVStat.conn_fail_num++,this._cachedPcdn[r]=null,n.next=8,this._pcdn.removePCDNNode(this._vid,r,i);case 8:case"end":return n.stop()}},n,this)})),function(n,r){return d.apply(this,arguments)})},{key:"pcdnReqCnt",get:function(){var n=f.e.pcdnReqCnt;return{pcdn_download_request_cnt:this.pcdn_download_request_cnt,pcdn_download_failed_cnt:this.pcdn_download_failed_cnt,pcdn_tracker_request_cnt:n.pcdn_tracker_request_cnt,pcdn_tracker_failed_cnt:n.pcdn_tracker_failed_cnt}}},{key:"pcdnVVStat",get:function(){var n;return Object.assign({},this._pcdnVVStat,{is_try_open:1,trace_id:null===(n=this._pcdnTraceInfo)||void 0===n?void 0:n.trace_id})}},{key:"updateConfig",value:function(n){var r=n.vid,i=n.duration;this._vid=r,this._duration=i,this._lastfetchNodeTime={audio:0,video:0},this._lastBitrateMap={audio:0,video:0}}}])},574933:function(n,r,i){"use strict";function a(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function")}function o(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,function(n){var r=function(n,r){if("object"!=typeof n||!n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(n)}(n,"string");return"symbol"==typeof r?r:r+""}(a.key),a)}}function s(n,r,i){return r&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}i.d(r,{Ac:function(){return u},PA:function(){return a},qH:function(){return s}});function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}},858301:function(n,r,i){"use strict";i.d(r,{$w:function(){return a},Ac:function(){return _},PA:function(){return o},XW:function(){return l},Zj:function(){return p},_x:function(){return c},qH:function(){return u}});function a(n,r,i){return r=d(r),function(n,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,f()?Reflect.construct(r,i||[],d(n).constructor):r.apply(n,i))}function o(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function")}function s(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,g(a.key),a)}}function u(n,r,i){return r&&s(n.prototype,r),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function c(n,r,i){return(r=g(r))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function d(n){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function l(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&v(n,r)}function f(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(f=function(){return!!n})()}function h(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),i.push.apply(i,a)}return i}function p(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?h(Object(i),!0).forEach(function(r){c(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}function v(n,r){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n})(n,r)}function g(n){var r=function(n,r){if("object"!=typeof n||!n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(n)}(n,"string");return"symbol"==typeof r?r:r+""}function _(n){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}},840888:function(n,r,i){"use strict";i.d(r,{ZP:function(){return v},zP:function(){return g},vP:function(){return h},vK:function(){return f},gH:function(){return _}});var a=i("858301");i("691842"),i("464135"),i("981168"),i("47513"),i("89768"),i("98601"),i("110617"),i("742611");var o=i("734123");i("429532");var s=i("156144"),u=(0,a.qH)(function n(r){(0,a.PA)(this,n),this._config=Object.assign({},r)},[{key:"_getTargetBitrate",value:function(n,r){var i=r.degFactor,a=this._config,o=a.autoBitrateParams,s=a.defaultBitrate,u=o.paramA,c=o.paramB,d=o.paramC,l=o.paramD,f=n<=0||!n?s:u*Math.pow(n,3)+c*Math.pow(n,2)+d*n+l;return i&&"factor"===i.degradeBitrateType&&"bitrate"===i.factorType&&(f*=i.value),f}},{key:"select",value:function(n,r,i){var a=i.speed,o=i.degFactor;this._config=Object.assign({},r);var u=a;if(o&&"factor"===o.degradeBitrateType&&"speed"===o.factorType&&(u*=o.value),n.length<=1)return n[0];var c=this._getTargetBitrate(u,{degFactor:o}),d=(0,s.v2)(n,c,r.selectAlgType);return!d&&(d=n[n.length-1]),d._targetBitrate=c,d}}]),c=i("258578"),d=i("124378"),l=20,f={DEFAULT:"default",BITRATE_ADAPTER:"bitRateAdapter",USER_SELECT:"userSelect",OVER_SCORE:"overscore"},h={SIMPLE:"simple",BUFFER_INFO:"buffer-info",BANDWIDTH:"bandwidth-buffer"},p={AVG:"avg",WEIGHT:"weight"},v=(0,a.qH)(function n(r,i){var o=this;(0,a.PA)(this,n),(0,a._x)(this,"_analysis",void 0),this.config=n.defaultConfig;var s=r.config||{};Object.keys(s).map(function(n){o.config[n]=s[n]}),this.speed=0,this._selectorMap={},this._selectorMap[h.SIMPLE]=new d.d,this._selectorMap[h.BUFFER_INFO]=new c._(i,this.config),this._selectorMap[h.BANDWIDTH]=new u(i,this.config)},[{key:"analysis",get:function(){return this._analysis},set:function(n){var r=this;this._analysis=n,Object.keys(this._selectorMap).map(function(i){r._selectorMap[i].analysis=n})}},{key:"select",value:function(n,r,i){if(!this.config.disabled){r=r||this.config.mode;var a=this.config,o=a.bitrateRange,u=a.defaultBitrate,c=a.bitrateKey,d=null===(f=n[0])||void 0===f?void 0:f.degFactor;d&&n.forEach(function(n){delete n.degFactor});var l=(n=(0,s.QS)(n,c)).filter(function(n){return n._xgOrgBitrate>=o[0]&&n._xgOrgBitrate<=o[1]}).sort(function(n,r){return r._xgOrgBitrate-n._xgOrgBitrate});if(!l.length){var f,h,p=1/0;n.forEach(function(n){var r=Math.abs(n._xgOrgBitrate-u);r<p&&(h=n,p=r)}),h&&l.push(h)}this.speed=i||g(this.config.speedAlgoType);var v=(this._selectorMap[r]||this._selectorMap.simple).select(l,this.config,{speed:this.speed,degFactor:d})||l[0];if((null==d?void 0:d.degradeBitrateType)==="force"){var y=d.value;if(v&&Number.isInteger(y)&&0!==y){var m=l.indexOf(v);v=l[m+y]||(y>0?l[l.length-1]:l[0])}}return v&&(v.filterRateCnt=(null==l?void 0:l.length)||0,v.isFilterMaxRate=_(l,v),v.bitrateSetSelector=l.map(function(n){return n.gearName}),v.qualityBitrateSelector=l.map(function(n){return n.qualityType+":"+n._xgOrgBitrate})),v}}},{key:"selector",get:function(){var n=this.config.mode;return this._selectorMap[n]||this._selectorMap.simple}},{key:"getTargetBitrate",value:function(n,r){var i=this.selector;if(i&&i.getTargetBitrate)return i.getTargetBitrate(n,r)}},{key:"addSelect",value:function(n,r){this._selectorMap[n||r.name]=r}},{key:"destroy",value:function(){var n=this._selectorMap;Object.keys(n).forEach(function(r){"function"==typeof n[r].destroy&&n[r].destroy()})}}],[{key:"defaultConfig",get:function(){return{paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.7,paramVl2:1e3,paramVlUpper:.9,paramVlLower:.8,bitrateUpper:2e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:3e5,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e5,25e5],defaultBitrate:1e6,autoBitrateParams:{paramA:0,paramB:404330129e-17,paramC:.0164405979,paramD:225511.28,minBitrate:2e5},mSpeedRecordValidThreshold:2,mode:h.SIMPLE,needCheckDuration:!0,overscore:{isOpen:!1,enable266:!0,filterKey:"definition",filterList:[],scoreMultiple:2},bitrateKey:"bitrate"}}},{key:"MaxQueueCapacity",get:function(){return l},set:function(n){l=n}}]);function g(n){var r=0;return n&&n!==p.AVG?n===p.WEIGHT&&(r=o.TestSpeed.getWeightedSpeedKbs()):r=o.TestSpeed.getAvgSpeedKbs(),Math.max(1024*r,0)}function _(n,r){if(!(null!=n&&n.length)||!r||!r._xgOrgBitrate)return -1;var i,a,o=n.length-1;return((null===(i=n[0])||void 0===i?void 0:i._xgOrgBitrate)>=(null===(a=n[n.length-1])||void 0===a?void 0:a._xgOrgBitrate)&&(o=0),n[o]._xgOrgBitrate<=r._xgOrgBitrate)?1:0}},613378:function(n,r,i){"use strict";i.d(r,{Z:function(){return y}});var a=i("858301");i("464135"),i("981168"),i("721911"),i("429532"),i("98601"),i("110617"),i("742611");var o=i("746249"),s=i("734123"),u=i("488598"),c=i("840888"),d=i("237177");function l(n,r,i){var o=i.isOpen,s=i.enable266,u=i.filterKey,c=i.filterList,d=i.scoreMultiple,l=i.type;if(!o)return n;var f=null;return("filter"===l?f=function(n,r,i,a){var o=null;if(i.forEach(function(i){i.source===r[n]&&(o=i)}),!o)return null;for(var s=null,u=function(r){if(o.target.forEach(function(i){a[r][n]===i&&(s=a[r])}),s)return 1},c=0;c<a.length&&!u(c);c++);return s}(u,n,c,r):"multiple"===l&&(f=function(n,r,i){if(!n)return null;for(var a=-1,o=0;o<i.length;o++)if(r.definition===i[o].definition){a=o;break}if(a>-1&&a<i.length-1){var s=a+n>i.length-1?i.length-1:a+n;return i[s]}return null}(d,n,r)),f&&(!f.isH266||s))?(0,a.Zj)((0,a.Zj)({},f),{},{type:"overscore",fromType:n.type,orgDefinition:n.definition}):n}var f=i("156144"),h=new d.Z({}),p=null,v=null,g={needCheckDuration:!0},_=function(n){function r(n){var i;return(0,a.PA)(this,r),i=(0,a.$w)(this,r,[n]),(0,a._x)(i,"_onXLog",function(n){"waitingEnd"===n.eventType&&0===n.type&&(h.blockDuration=n.costTime,i.player.isUserActive&&(h.currentBlockDur=n.costTime))}),r.defaultConfig=n.config,i}return(0,a.XW)(r,n),(0,a.qH)(r,[{key:"updateSelectInfo",value:function(n,r){this.selectInfo[n]=r}},{key:"matchFactor",value:function(n,r,i){var a,o,s="Array"===(0,f.kM)(r)?r:[],u=!1;switch(n){case"core_cnt":i.core&&s.length>1&&i.core>=Number(s[0])&&i.core<=Number(s[1])&&(u=!0);break;case"memory":i.memory&&s.length>1&&i.memory>=Number(s[0])&&i.memory<=Number(s[1])&&(u=!0);break;case"video_screen_mode":;if(s.length>0&&"landscape"===s[0]&&(a=i.videoHeight,o=i.videoWidth,a&&o&&o>a))u=!0;break;case"encoder":s.length>0&&s[0]&&i.codecType&&s[0]===i.codecType&&(u=!0)}return u}},{key:"updateParamsByFactor",value:function(n){for(var r=this,i=this.playerConfig,a=i.codecType,o=i.videoHeight,s=i.videoWidth,u=0|window.navigator.deviceMemory,c=0|window.navigator.hardwareConcurrency,d=null,l=null,f={codecType:a,videoHeight:o,videoWidth:s,memory:u,core:c},h=0;h<n.length;h++){for(var p=n[h].factor||{},v=Object.keys(p),g=!0,_=0;_<v.length;_++)if(!this.matchFactor(v[_],p[v[_]],f)){g=!1;break}if(g){n[h].factor,d=n[h].config;break}}d&&Object.keys(d).forEach(function(n){r.config[n]=d[n]})}},{key:"afterCreate",value:function(){var n=this.config,r=n.factors;n.speedAlgoType,r&&r.length>0&&this.updateParamsByFactor(r),this._bindEvent(),this.bitRateAdapter=new c.ZP({config:this.config},this.player),!p&&(p=new c.ZP({config:this.config})),h.setConfig(this.config.detectConfig||{}),h.resetCurrent()}},{key:"beforePlayerInit",value:function(){this.curBitRate=this.getInitBitrate(),this.player.curDefinition=this.curBitRate}},{key:"_bindEvent",value:function(){this.on("xglog",this._onXLog)}},{key:"getInitBitrate",value:function(){if(!this.config.disabled){var n=this.player,r=this.config,i=this.playerConfig;v=i.userSelectDefinition;var a=this.getSuitableBitrate(n.definitionList,i.userSelectDefinition);return a?i.url=a.url:a={url:i.url,definition:i.defaultDefinition||r.definition,bitrate:i.defaultBitrate||i.bitrate,type:c.vK.DEFAULT},a.networkSpeed=a.speed||(0,c.zP)(this.config.speedAlgoType),a}}},{key:"getSuitableBitrate",value:function(n,i){var a=new u.Z;if(this.selectInfo={},n=(0,f.VX)(n,"video"),n=r._applySelectBitrateFactor(n),!!this.bitRateAdapter&&!!n&&!(n.length<1)){var o=this.config,s=this.config.bitrateKey;(0,f.QS)(n,s),this.bitRateAdapter.analysis=a,this.bitRateAdapter.speed=(0,c.zP)(this.config.speedAlgoType),this.updateSelectInfo("oriRateCnt",(null===(y=n)||void 0===y?void 0:y.length)||0),this.updateSelectInfo("vid",(null===(m=n[0])||void 0===m?void 0:m.vid)||""),this.updateSelectInfo("type","member"),this.updateSelectInfo("speed",this.bitRateAdapter.speed);var d=n.sort(function(n,r){return r._xgOrgBitrate-n._xgOrgBitrate}),p=this.getAdaptBitrate(d);this.updateSelectInfo("filterRateCnt",(null===(b=p)||void 0===b?void 0:b.filterRateCnt)||0),this.updateSelectInfo("isFilterMaxRateAdapt",(null===(A=p)||void 0===A?void 0:A.isFilterMaxRate)||0),this.updateSelectInfo("bitrateSetSelector",(null===(I=p)||void 0===I?void 0:I.bitrateSetSelector)||[]),this.updateSelectInfo("qualityBitrateSelector",(null===(k=p)||void 0===k?void 0:k.qualityBitrateSelector)||[]);var v=p?p.duration:0,g=(null===(E=p)||void 0===E?void 0:E._targetBitrate)||(null===(T=p)||void 0===T?void 0:T._xgOrgBitrate);this.updateSelectInfo("adaptTarRate",g);var _=this.config.mode;if(this.updateSelectInfo("mode",_),_&&_===c.vP.BANDWIDTH){var y,m,b,A,I,k,E,T,S,C,x=0;if(!(null!==(S=this.bitRateAdapter)&&void 0!==S&&S.speed)||this.bitRateAdapter.speed<0||1!==o.mixFactor){var w=Object.assign({},this.config);w.mode=c.vP.BUFFER_INFO;var R=new c.ZP({_config:w},this.player);R.speed=this.bitRateAdapter.speed;var D=null==R?void 0:R.select(n,w.mode,this.bitRateAdapter.speed);this.updateSelectInfo("isFilterMaxRateBuf",D.isFilterMaxRate),x=(null==D?void 0:D._targetBitrate)||(null==D?void 0:D._xgOrgBitrate),this.updateSelectInfo("buffTarRate",x)}C=!this.bitRateAdapter.speed||this.bitRateAdapter.speed<0?x:(null==o?void 0:o.mixFactor)>=0&&o.mixFactor<=1?g*o.mixFactor+x*(1-o.mixFactor):(null==o?void 0:o.mixFactor)>1?Math.max(g,x):Math.min(g,x),this.updateSelectInfo("finalTarRate",C),!(p=(0,f.v2)(n,C,this.config.selectAlgType))&&(p=n[n.length-1]),p._targetBitrate=C}var L=this.bitRateAdapter.getTargetBitrate(v,n,this.bitRateAdapter.speed);if(L&&(h.targetBitRate=L),i){this.updateSelectInfo("mode","userSelect");var O=r.getUserSelectBitrate(d,i);O&&(h.selectBitRate=O._xgOrgBitrate,h.updateBitRateInfo(O._xgOrgBitrate,L),p=O,a.type=u.A.USER_SELECT)}if(this.config.overscore&&this.config.overscore.isOpen){var P=l(p,d,this.config.overscore);a.type=u.A.SR,p=P}return p&&(p.speed=this.bitRateAdapter.speed,this.updateSelectInfo("isOriMaxRate",(0,c.gH)(d,p)),this.updateSelectInfo("selectRate",p._xgOrgBitrate||-1)),"function"==typeof this.config.selectInfoBack&&this.config.selectInfoBack(this.selectInfo),p&&(p.chosenType=a.type,p.chosenReason=a.reason),p}}},{key:"getAdaptBitrate",value:function(n){if(!this.config.disabled){this.player;var r=null,i=this.config.bitrateKey;return(n=(0,f.QS)(n,i))&&n.length&&this.bitRateAdapter&&(r=this.bitRateAdapter.select(n,null,this.bitRateAdapter.speed)),r&&(r.type=c.vK.BITRATE_ADAPTER),r}}},{key:"getDefinition",value:function(n,r,i){for(var a=-1,o=0;o<n.length;o++)n[o]._xgOrgBitrate===r&&(a=o);return -1===a?null:i&&n.length>a+1?n[a+1]:!i&&a-1>=0?n[a-1]:null}},{key:"needChangeDefinition",value:function(){var n=this.player,i=n.curDefinition,a=n.definitionList,o=this.playerConfig,s=o.userSelectDefinition,u=o.extDefinition,c=u&&u.length>0?u:a,d={type:0,message:"DO_NOT_UPDATE",targetDefinition:null};if(!s||c.length<2)return d;var l=i;s&&(l=r.getUserSelectBitrate(c,s));var f=h.checkDefinition();d.type=f;var p=this.getAdaptBitrate(c);if(!p||0===f||!p||!p._xgOrgBitrate||!l||!l._xgOrgBitrate)return d.message="DO_NOT_UPDATE",d;var v=p._xgOrgBitrate>=l._xgOrgBitrate,g=p._xgOrgBitrate<l._xgOrgBitrate,_=null;switch(1===f?_=v?this.getDefinition(c,l._xgOrgBitrate,!0):p:2===f&&(_=g?this.getDefinition(c,l._xgOrgBitrate,!1):p),d.targetDefinition=_,(!d.targetDefinition||d.targetDefinition.definition===s)&&(d.type=0),d.type){case 1:d.message="NEED_TO_REDUCE_BITRATE";break;case 2:d.message="CAN_UPGRADE_BITRATE";break;default:d.message="DO_NOT_UPDATE"}return d}},{key:"detectDefInfo",get:function(){return h}},{key:"destroy",value:function(){this.bitRateAdapter&&this.bitRateAdapter.destroy(),this.bitRateAdapter=null,this.off("xglog",this._onXLog),h&&h.resetCurrent()}}],[{key:"pluginName",get:function(){return"BitrateSelector"}},{key:"defaultConfig",get:function(){return(0,a.Zj)({needCheckDuration:!0},g)},set:function(n){Object.keys(n).forEach(function(r){g[r]=n[r]})}},{key:"getSuitableBitrate",value:function(n,i,a){var o=new u.Z;if(r.staticSelectInfo={},n=(0,f.VX)(n,"video"),n=r._applySelectBitrateFactor(n),r.updateStaticSelectInfo("oriRateCnt",(null===(m=n)||void 0===m?void 0:m.length)||0),!!n&&!(n.length<1)){r.updateStaticSelectInfo("vid",(null===(b=n[0])||void 0===b?void 0:b.vid)||""),!a&&(a=r.defaultConfig);var s=(0,c.zP)(a.speedAlgoType);r.updateStaticSelectInfo("type","static"),r.updateStaticSelectInfo("speed",s),a=Object.assign(a,g),i?r.updateStaticSelectInfo("mode","userSelect"):(i=v,r.updateStaticSelectInfo("mode",null===(I=a)||void 0===I?void 0:I.mode));var d=a.bitrateKey,_=(n=(0,f.QS)(n,d)).sort(function(n,r){return r._xgOrgBitrate-n._xgOrgBitrate}),y=null;if(!p&&(p=new c.ZP({config:a},this.player)),p.analysis=o,p.speed=s,_&&_.length&&p&&(y=p.select(_,null,s),r.updateStaticSelectInfo("filterRateCnt",(null===(k=y)||void 0===k?void 0:k.filterRateCnt)||0),r.updateStaticSelectInfo("isFilterMaxRateAdapt",(null===(E=y)||void 0===E?void 0:E.isFilterMaxRate)||0),r.updateStaticSelectInfo("bitrateSetSelector",(null===(T=y)||void 0===T?void 0:T.bitrateSetSelector)||[]),r.updateStaticSelectInfo("qualityBitrateSelector",(null===(S=y)||void 0===S?void 0:S.qualityBitrateSelector)||[]),y&&(null===(C=a)||void 0===C?void 0:C.mode)===c.vP.BANDWIDTH)){var m,b,A,I,k,E,T,S,C,x,w,R,D,L=y._targetBitrate||y._xgOrgBitrate;r.updateStaticSelectInfo("adaptTarRate",L);var O=0;if(!s||s<0||1!==a.mixFactor){var P=Object.assign({},a);P.mode=c.vP.BUFFER_INFO;var B=new c.ZP({config:P},this.player);B.speed=s;var N=null==B?void 0:B.select(n,P.mode,s);r.updateStaticSelectInfo("isFilterMaxRateBuf",null==N?void 0:N.isFilterMaxRate),O=(null==N?void 0:N._targetBitrate)||(null==N?void 0:N._xgOrgBitrate),r.updateStaticSelectInfo("buffTarRate",O)}D=!s||s<0?O:(null===(x=a)||void 0===x?void 0:x.mixFactor)>=0&&(null===(w=a)||void 0===w?void 0:w.mixFactor)<=1?L*a.mixFactor+O*(1-a.mixFactor):(null===(R=a)||void 0===R?void 0:R.mixFactor)>1?Math.max(L,O):Math.min(L,O),!(y=(0,f.v2)(n,D,a.selectAlgType))&&(y=n[n.length-1]),y._targetBitrate=D,r.updateStaticSelectInfo("finalTarRate",D)}y&&(y.type="bitRateAdapter");var M=y?y.duration:0,Z=p?p.getTargetBitrate(M,n):null;if(Z&&(h.targetBitRate=Z),i){var V=r.getUserSelectBitrate(_,i);V&&(h.selectBitRate=V._xgOrgBitrate,h.updateBitRateInfo(V._xgOrgBitrate,Z),y=V,o.type=u.A.USER_SELECT)}if(a.overscore&&a.overscore.isOpen){var U=l(y,_,a.overscore);o.type=u.A.SR,y=U}return r.updateStaticSelectInfo("isOriMaxRate",(0,c.gH)(_,y)),r.updateStaticSelectInfo("selectRate",(null===(A=y)||void 0===A?void 0:A._xgOrgBitrate)||-1),"function"==typeof a.selectInfoBack&&a.selectInfoBack(r.staticSelectInfo),y&&(y.chosenType=o.type,y.chosenReason=o.reason),y}}},{key:"updateStaticSelectInfo",value:function(n,i){r.staticSelectInfo[n]=i}},{key:"_applySelectBitrateFactor",value:function(n){var r,i=null===(r=n[0])||void 0===r?void 0:r.vid;if(i){var s=o.w.getInstance().findStrategy("vod-live-joint-optimize");if(s){var u=s.getSelectBitrateFactor(i);u.value>0&&(n=n.map(function(n){return(0,a.Zj)((0,a.Zj)({},n),{},{degFactor:u})}))}}return n}},{key:"getUserSelectBitrate",value:function(n,r){if(r&&n&&n.length>0){for(var i=null,a=null,o=0;o<n.length;o++){if(r===n[o].definition){i=n[o];break}!a&&r<n[o].definition&&(a=n[o])}return!i&&(i=a||n[n.length-1]),i.type=c.vK.USER_SELECT,i}return null}}])}(s.BasePlugin);(0,a._x)(_,"staticSelectInfo",{});let y=_},429421:function(n,r,i){"use strict";i.d(r,{m:function(){return o}});var a=i(858301),o=(0,a.qH)(function n(r){var i=this;(0,a.PA)(this,n),(0,a._x)(this,"_onPlay",function(){i._calcPausedTime()}),(0,a._x)(this,"_onPause",function(){i._prevPauseTime=Date.now()}),(0,a._x)(this,"_onEnded",function(){!i._info.downloadDuration&&i._info.canPlayTime&&(i._info.downloadDuration=(Date.now()-i._info.canPlayTime)/1e3),i.disable()}),(0,a._x)(this,"_canPlay",function(){i._info.canPlayTime=Date.now();var n=i.video.buffered;n.length&&(i._info.startBufferTime=n.end(n.length-1))}),(0,a._x)(this,"_onProgress",function(){var n=i.video.buffered;i._info.canPlayTime&&n.length&&n.end(n.length-1)+.8>i.video.duration&&(i._info.downloadDuration=(Date.now()-i._info.canPlayTime)/1e3)}),(0,a._x)(this,"_onTick",function(){var n=i.video;if(!!n){i._timer=setTimeout(i._onTick,500);var r=n.currentTime;if(n.paused&&!n.ended&&0!==n.playbackRate&&0!==n.readyState){i._prevCurrentTime=r;return}i._prevCurrentTime===r?!i._prevStallTime&&(i._prevStallTime=Date.now()):i._calcStallTime(),i._prevCurrentTime=r}}),this.video=r,this._timer=null,this._prevPauseTime=0,this._prevStallTime=0,this._prevCurrentTime=0,this.resetInfo(),this.enable()},[{key:"isStalling",get:function(){return!!this._prevStallTime}},{key:"enable",value:function(){this.disable();var n=this.video;if(!!n)n.addEventListener("play",this._onPlay),n.addEventListener("pause",this._onPause),n.addEventListener("canplay",this._canPlay),n.addEventListener("progress",this._onProgress),n.addEventListener("ended",this._onEnded),this._timer=setTimeout(this._onTick,500)}},{key:"disable",value:function(){clearTimeout(this._timer),this.resetInfo();var n=this.video;if(!!n)n.removeEventListener("play",this._onPlay),n.removeEventListener("pause",this._onPause),n.removeEventListener("canplay",this._canPlay),n.removeEventListener("progress",this._onProgress),n.removeEventListener("ended",this._onEnded)}},{key:"endPlay",value:function(){if(!!this.video){var n=this.video.buffered;if(n.length)try{this._info.endBufferTime=n.end(n.length-1)}catch(n){}this._info.leaveWithBlock=this.isStalling,this._calcPausedTime(),this._calcStallTime(),!this._info.downloadDuration&&this._info.canPlayTime&&(this._info.downloadDuration=(Date.now()-this._info.canPlayTime)/1e3)}}},{key:"getInfo",value:function(){return this._info}},{key:"resetInfo",value:function(){this._prevPauseTime=0,this._prevStallTime=0,this._prevCurrentTime=0,this._info={pausedTime:0,stalledTime:0,downloadDuration:0,startBufferTime:0,endBufferTime:0,canPlayTime:0,leaveWithBlock:!1}}},{key:"destroy",value:function(){this.disable(),this.video=null}},{key:"_calcStallTime",value:function(){this._prevStallTime&&(this._info.stalledTime+=(Date.now()-this._prevStallTime)/1e3,this._prevStallTime=0)}},{key:"_calcPausedTime",value:function(){this._prevPauseTime&&(this._info.pausedTime+=(Date.now()-this._prevPauseTime)/1e3,this._prevPauseTime=0)}}])},825305:function(n,r,i){"use strict";i.d(r,{$:function(){return o}});var a=i(858301);i(891555),i(429532),i(110617),i(742611);var o=(0,a.qH)(function n(r){(0,a.PA)(this,n),this._queue=[],this._current={},this.setConfig(r)},[{key:"queue",get:function(){return this._queue}},{key:"setConfig",value:function(n){this._config=Object.assign({},n)}},{key:"setCurrent",value:function(n){Object.assign(this._current,n)}},{key:"getCurrent",value:function(){return this._current}},{key:"resetCurrent",value:function(){this._current={}}},{key:"calcAndReset",value:function(){var n=this._current,r=n.startBufferTime,i=n.duration,a=n.endBufferTime,o=n.leaveWithBlock,s=n.stalledTime,u=n.pausedTime,c=n.downloadDuration,d=n.bitrate;if(!i||!d||!a){this.resetCurrent();return}var l=this._config,f=l.paramBf,h=l.paramBp,p=l.paramUpperBl,v=l.paramUpper,g=l.slidingWindowWeight,_=l.slidingWindowType,y=l.slidingWindowWeightThreshold,m=l.slidingWindowCountThreshold,b=1+((a-r)*f-(s+u)*h)/c;o&&(b=Math.min(b,p));var A=d*Math.max(v,b),I=0;if(I="time"===g?Math.min(c,i+s):Math.min(c,i)*d,this._queue.push([A,I,this._current]),"by_weight"===_){this._queue=this._queue.slice(-30);for(var k=this._queue.reduce(function(n,r){return n+r[1]},0)-y;k>0;){var E=this._queue.shift();if(!E)break;if(E[1]>k){E[1]-=k,this._queue.unshift(E);break}k-=E[1]}}else this._queue=this._queue.slice(-m);this.resetCurrent()}},{key:"getDefaultBitrate",value:function(n){if(!n||0===n.length)return 0;for(var r=this._config.defaultTargetBitrate||1e6,i=0,a=0;a<n.length;a++)n[a]._xgOrgBitrate<=r&&n[a]._xgOrgBitrate>=i&&(i=n[a]._xgOrgBitrate);return!i&&(i=n[n.length-1]._xgOrgBitrate),i}},{key:"getTargetBitrate",value:function(n){if(!this._queue.length||!n)return 0;var r=this._config,i=r.paramVlLower,a=r.paramVlUpper,o=r.paramVl1,s=r.paramVl2,u=r.bitrateLower,c=r.bitrateUpper,d=r.slidingWindowExtraction,l=0,f=this._queue.reduce(function(n,r){return n+r[1]},0);if("weighted_median"===d){var h=f/2,p=1/0,v=0;this._queue.forEach(function(n){(v=Math.abs(h-n[1]))<p&&(l=n[0],p=v)})}else l=this._queue.reduce(function(n,r){return n+r[1]/f*r[0]},0);return Math.max(u,Math.min(c,l*Math.min(a,Math.max(i,o+s/n))))}}])},976968:function(n,r,i){"use strict";i.d(r,{w:function(){return c}});var a,o=i(42787);i(465132),i(499045),i(891555),i(499953),i(110617),i(742611);var s=i(734123),u=i.n(s),c=function(n){function r(){var n;return(0,o.PA)(this,r),n=(0,o.$w)(this,r,arguments),n._ploys=[],n._curInstContext=null,n}return(0,o.XW)(r,n),(0,o.qH)(r,[{key:"_findIndexFromPloys",value:function(n){for(var r=-1,i=this._ploys,a=0;a<i.length;a++)if(i[a]===n){r=a;break}return r}},{key:"_checkStrategy",value:function(n){return!(!(null!=n&&n.start)||!n.stop||this._findIndexFromPloys(n)>-1)&&!0}},{key:"registerStrategy",value:function(n){var r=this;if(!!n)!Array.isArray(n)&&(n=[n]),n.forEach(function(n){var i=n.Strategy,a=n.config;if(!!a)try{var o=new i(a,r);r._checkStrategy(o)&&(o.start(),r._ploys.push(o))}catch(n){}})}},{key:"unregisterStrategy",value:function(n){if(n){n.stop();var r=this._findIndexFromPloys(n);r>-1&&this._ploys.splice(r,1)}else this._ploys.forEach(function(n){n.stop()}),this._ploys.splice(0,this._ploys.length)}},{key:"findStrategy",value:function(n){return this._ploys.find(function(r){return r.constructor.STRATEGY_NAME===n})}},{key:"updateStrategyConfig",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!!n&&!!r)this._ploys.forEach(function(a){a instanceof n&&a.updateConfig(r,i)})}},{key:"setActive",value:function(n,i,a){var s=(0,o.Vx)(r,"setActive",this,3)([n,i]);return i&&a&&this.setVideoListContext(a),this.emit("UPDATE_INST_ORDER"),s}},{key:"setNext",value:function(n){var i=(0,o.Vx)(r,"setNext",this,3)([n]);return this.emit("UPDATE_INST_ORDER"),i}},{key:"getVideoListContext",value:function(){return this._curInstContext}},{key:"setVideoListContext",value:function(n){if(!n)return;var r,i=(null===(r=n.allVideos)||void 0===r?void 0:r.slice(0))||[],a=[],o=[],s=i.findIndex(function(n){return n.isActive});if(-1!==s){for(var u=i[s],c=0;c<n.allVideos.length;c++)c<s?a.push(n.allVideos[c]):c>s&&o.push(n.allVideos[c]);this._curInstContext={current:u,prevVideos:a,nextVideos:o,allVideos:i},this.emit("VIDEO_LIST_CONTEXT_CHANGED")}}}],[{key:"getInstance",value:function(){return a||(a=new r),a}}])}(s.InstManager||Object.prototype.constructor);u().instManager=c.getInstance()},262416:function(n,r,i){"use strict";i.d(r,{v8:function(){return w},vI:function(){return I},Ds:function(){return o.Z},Xb:function(){return h},E8:function(){return c},zh:function(){return d.Z},XK:function(){return p.Z},Ic:function(){return b}});var a=i("375912"),o=i("744436"),s=i("288773"),u=function(){function n(){(0,s.PA)(this,n)}return(0,s.qH)(n,null,[{key:"install",value:function(){if(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame,!window.requestAnimationFrame){var n=Date.now();window.requestAnimationFrame=function(r){var i=Date.now(),a=Math.max(16.7-(i-n),0),o=setTimeout(r,a);return n=i+a,o}}!window.cancelAnimationFrame&&(window.cancelAnimationFrame=function(n){clearTimeout(n)})}}]),n}(),c=function(){function n(){(0,s.PA)(this,n),this.fps=0,this.isStoped=!0,this.ticks=[],this.isSupport=!0,this.maxFps=0,this.step=this._step.bind(this),this.rafId=null}return(0,s.qH)(n,[{key:"_step",value:function(n){var r=this.ticks;if(r.unshift(n),r.length>10){var i=r.pop();i&&(this.fps=Math.floor(1e4/(n-i)),this.updateFpsInfo())}!this.isStoped&&(this.rafId=window.requestAnimationFrame(this.step))}},{key:"updateFpsInfo",value:function(){this.fps>this.maxFps&&(this.maxFps=this.fps)}},{key:"start",value:function(){if(void 0!==window.requestAnimationFrame)this.isStoped=!1,this.rafId=window.requestAnimationFrame(this.step)}},{key:"stop",value:function(){window.cancelAnimationFrame(this.rafId),this.isStoped=!0}}],[{key:"install",value:function(){u.install()}}]),n}(),d=i("330503"),l=function(){return f&&!function(){var n="_localstorage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch(n){return!0}}()}();function f(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(n){return!1}}let h={length:l?localStorage.length:0,clear:function(n){try{for(var r=localStorage.length-1;r>=0;r--){var i=localStorage.key(r);0===i.indexOf(n)&&localStorage.removeItem(i)}}catch(n){}},getItem:function(n){try{return localStorage.getItem(n)}catch(n){return null}},key:function(n){try{return localStorage.key(n)}catch(n){return null}},setItem:function(n,r){try{localStorage.setItem(n,r)}catch(n){}},removeItem:function(n){try{localStorage.removeItem(n)}catch(n){}},isSupport:l};var p=i("300883");i("110617"),i("675373");var v=i("754926"),g,_={},y=0;function m(){do 2147483647===y?y=0:y++;while(y in _);return y}if("undefined"!=typeof Worker){var b,A,I,k,E,T=!1,S=!1,C=function(){if(!E){var n=Promise.withResolvers(),r=n.promise,i=n.resolve,a=n.reject;E=r;try{(g=new v.Z).addEventListener("message",function(n){var r=n.data,o=r.event,s=r.data;switch(o){case"error":S=!0,a(s.error);break;case"ready":T=!0,i();break;default:var u=s.fakeId;if(u in _){var c=_[u]||{},d=c.cb,l=c.param,f=c.keepAlive,h=c.type;if("setInterval"!==h&&delete _[u],!f&&document.hidden)return;if("function"==typeof d)try{d.apply(window,l)}catch(n){}}}}),g.addEventListener("error",function(n){S=!0,a(n)})}catch(n){S=!0,a(n)}}return E},x=function(n,r){S?r&&r():T?n():C().then(n,r)};b=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof n)throw Error("cb must be a function");for(var a=m(),o=arguments.length,s=Array(o>3?o-3:0),u=3;u<o;u++)s[u-3]=arguments[u];return _[a]={cb:n,param:s,keepAlive:!!i,type:"setInterval"},x(function(){g.postMessage({action:"setInterval",fakeId:a,time:r})},function(){a in _&&(_[a].degradeId=setInterval(n,r))}),a},I=function(n){if("number"==typeof n&&n in _){var r=_[n].degradeId;delete _[n],x(function(){g.postMessage({action:"clearInterval",fakeId:n})},function(){r&&clearInterval(r)})}}}else b=setInterval,I=clearInterval;i("836654"),i("826893"),i("47513"),i("743465");var w=function(){function n(){(0,s.PA)(this,n)}return(0,s.qH)(n,null,[{key:"parse",value:function(r){var i=n.parseXmlString(r);return null!==i?n.parseDOMChildren(i):null}},{key:"parseXmlString",value:function(n){if(void 0===n)return null;var r,i=new window.DOMParser;try{(r=i.parseFromString(n,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(r=null)}catch(n){r=null}return r}},{key:"parseDOMChildren",value:function(r,i){if(r.nodeType===Node.DOCUMENT_NODE){for(var a={},o=r.childNodes,s=0;s<o.length;s++){var u=o[s];u.nodeType===Node.ELEMENT_NODE&&(a=n.parseDOMChildren(u))}return a}if(r.nodeType===Node.ELEMENT_NODE){var c={};c.__cnt=0;for(var d=[],l=r.childNodes,f=0;f<l.length;f++){var h=l[f],p=n.getNodeLocalName(h);if(h.nodeType!==Node.COMMENT_NODE){var v="".concat(i,".").concat(p);if(c.__cnt++,null==c[p]){var g=n.parseDOMChildren(h,v);if("#text"!==p||/[^\s]/.test(g)){var _={};_[p]=g,d.push(_)}c[p]=g,n.toArrayAccessForm(c,p)}else{null!=c[p]&&!(c[p]instanceof Array)&&(c[p]=[c[p]],n.toArrayAccessForm(c,p,v));var y=n.parseDOMChildren(h,v);if("#text"!==p||/[^\s]/.test(y)){var m={};m[p]=y,d.push(m)}c[p][c[p].length]=y}}}for(var b=0;b<r.attributes.length;b++){var A=r.attributes[b];c.__cnt++;var I=A.value;c[A.name]=I}var k=r.prefix;return null!=k&&""!==k&&(c.__cnt++,c.__prefix=k),null!=c["#text"]&&(c.__text=c["#text"],c.__text instanceof Array&&(c.__text=c.__text.join("\n")),delete c["#text"],delete c["#text_asArray"]),null!=c["#cdata-section"]&&(c.__cdata=c["#cdata-section"],delete c["#cdata-section"],delete c["#cdata-section_asArray"]),1===c.__cnt&&null!=c.__text?c=c.__text:1===c.__cnt&&null!=c.__cdata&&(c=c.__cdata),delete c.__cnt,c}if(r.nodeType===Node.TEXT_NODE||r.nodeType===Node.CDATA_SECTION_NODE)return r.nodeValue}},{key:"getNodeLocalName",value:function(n){var r=n.localName;return null==r&&(r=n.baseName),(null==r||""===r)&&(r=n.nodeName),r}},{key:"toArrayAccessForm",value:function(n,r){!(n[r]instanceof Array)&&(n[r]=[n[r]])}}]),n}();(0,a.l)()},635508:function(n,r,i){"use strict";function a(){!Promise.withResolvers&&(Promise.withResolvers=function(){var n={};return n.promise=new Promise(function(r,i){n.resolve=r,n.reject=i}),n})}i.d(r,{z:function(){return a}}),i(110617),i(675373)},153978:function(n,r,i){"use strict";i.d(r,{Z:function(){return a}});var a=(0,i(443001).p)("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyogZXNsaW50LWRpc2FibGUgbm8tZXZhbCAqLwogIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovCiAgLy8g55uu5YmN5LuF5pSv5oyBeXV2NDIwCgogIGZ1bmN0aW9uIHNoaW1JbXBvcnRTY3JpcHRzIChzcmMpIHsKICAgIHJldHVybiBmZXRjaChzcmMpCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gcmVzLnRleHQoKQogICAgICB9KQogICAgICAudGhlbihmdW5jdGlvbiAodGV4dCkgewogICAgICAgIGV2YWwodGV4dCk7CiAgICAgICAgc2VsZi5Nb2R1bGUgPSBNb2R1bGU7CiAgICAgICAgc2VsZi5hZGRPblBvc3RSdW4gPSBhZGRPblBvc3RSdW47CiAgICAgIH0pCiAgfQoKICB2YXIgTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIID0gMTAyNCAqIDEwMjQgKiAzOwogIHZhciBpbml0VHMgPSAwOwoKICB2YXIgRGVjb2RlciA9IGZ1bmN0aW9uIChzZWxmKSB7CiAgICB0aGlzLmluaXRlZCA9IGZhbHNlOwogICAgdGhpcy5pbmZvSWQgPSAwOwogICAgdGhpcy5zZWxmID0gc2VsZjsKICAgIHRoaXMubWV0YSA9IHRoaXMuc2VsZi5tZXRhOwogICAgdGhpcy50cyA9IDA7CiAgICB0aGlzLmluZm9saXN0ID0gW107CiAgICBzZWxmLnBhcl9icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQgPSB0aGlzLmJyb2Fkd2F5T25Ccm9hZHdheUluaXRlZC5iaW5kKHRoaXMpOwogICAgc2VsZi5wYXJfYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkID0gdGhpcy5icm9hZHdheU9uUGljdHVyZURlY29kZWQuYmluZCh0aGlzKTsKICB9OwoKICBEZWNvZGVyLnByb3RvdHlwZS50b1U4QXJyYXkgPSBmdW5jdGlvbiAocHRyLCBsZW5ndGgpIHsKICAgIHJldHVybiBNb2R1bGUuSEVBUFU4LnN1YmFycmF5KHB0ciwgcHRyICsgbGVuZ3RoKQogIH07CgogIERlY29kZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICBNb2R1bGUuX2Jyb2Fkd2F5SW5pdCgwLCAxKTsKICAgIHRoaXMub2Zmc2V0ID0gTW9kdWxlLl9icm9hZHdheUNyZWF0ZVN0cmVhbShNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEgpOwogIH07CgogIERlY29kZXIucHJvdG90eXBlLmJyb2Fkd2F5T25QaWN0dXJlRGVjb2RlZCA9IGZ1bmN0aW9uICgKICAgIG9mZnNldCwKICAgIHdpZHRoLAogICAgaGVpZ2h0LAogICAgaW5mb2lkLAogICAgc2xpY2VUeXBlCiAgKSB7CiAgICB2YXIgaW5mbyA9IHRoaXMuaW5mb2xpc3Quc2hpZnQoKTsKICAgIHZhciB5Um93Y291bnQgPSBoZWlnaHQ7CiAgICB2YXIgdXZSb3djb3VudCA9IGhlaWdodCAvIDI7CiAgICB2YXIgeUxpbmVzaXplID0gd2lkdGg7CiAgICB2YXIgdXZMaW5lc2l6ZSA9IHdpZHRoIC8gMjsKICAgIGlmICh0aGlzLm1ldGEgJiYgKHRoaXMubWV0YS5jaHJvbWFGb3JtYXQgPT09IDQ0NCB8fCB0aGlzLm1ldGEuY2hyb21hRm9ybWF0ID09PSA0MjIpKSB7CiAgICAgIHV2Um93Y291bnQgPSBoZWlnaHQ7CiAgICB9CiAgICBpZiAoaW5mbyAmJiBpbmZvLnByZWNpc2VTZWVrKSB7CiAgICAgIGlmICghaW5mby5vdXRwdXQpIHJldHVybgogICAgfQoKICAgIHZhciBkYXRhID0gdGhpcy50b1U4QXJyYXkob2Zmc2V0LCB5TGluZXNpemUgKiB5Um93Y291bnQgKyAyICogKHV2TGluZXNpemUgKiB1dlJvd2NvdW50KSk7CiAgICAvLyB0aGlzLmluZm9saXN0W2luZm9pZF0gPSBudWxsOwogICAgdmFyIGRhdGV0ZW1wID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpOwogICAgZGF0ZXRlbXAuc2V0KGRhdGEpOwogICAgdmFyIGJ1ZmZlciA9IGRhdGV0ZW1wLmJ1ZmZlcjsKCiAgICB0aGlzLnNlbGYucG9zdE1lc3NhZ2UoCiAgICAgIHsKICAgICAgICBtc2c6ICdERUNPREVEJywKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgeUxpbmVzaXplLAogICAgICAgIHV2TGluZXNpemUsCiAgICAgICAgaW5mbywKICAgICAgICBidWZmZXIKICAgICAgfSwKICAgICAgW2J1ZmZlcl0KICAgICk7CiAgfTsKCiAgRGVjb2Rlci5wcm90b3R5cGUuYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMuaW5pdGVkKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdGhpcy5pbml0ZWQgPSB0cnVlOwogICAgdmFyIGNvc3QgPSAwOwogICAgaWYgKGluaXRUcykgewogICAgICBjb3N0ID0gcGVyZm9ybWFuY2Uubm93KCkgLSBpbml0VHM7CiAgICB9CiAgICB0aGlzLnNlbGYucG9zdE1lc3NhZ2UoeyBtc2c6ICdERUNPREVSX1JFQURZJywgY29zdCB9KTsKICB9OwoKICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAoZGF0YSwgaW5mbykgewogICAgbGV0IHRpbWUgPSBwYXJzZUludChuZXcgRGF0ZSgpLmdldFRpbWUoKSk7CiAgICBsZXQgaW5mb2lkID0gdGltZSAtIE1hdGguZmxvb3IodGltZSAvIDEwZTgpICogMTBlODsKICAgIHRoaXMuaW5mb2xpc3QucHVzaChpbmZvKTsKICAgIGlmIChpbmZvICYmIGluZm8ua2V5ZnJhbWUpIHsKICAgICAgdGhpcy5pbmZvbGlzdCA9IFtpbmZvXTsKICAgICAgTW9kdWxlLl9icm9hZHdheUZsdXNoU3RyZWFtKGluZm9pZCk7CiAgICB9CiAgICBNb2R1bGUuSEVBUFU4LnNldChkYXRhLCB0aGlzLm9mZnNldCk7CiAgICBNb2R1bGUuX2Jyb2Fkd2F5UGxheVN0cmVhbShkYXRhLmxlbmd0aCwgdGhpcy5pbmZvSWQpOwogIH07CgogIERlY29kZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkgewogICAgTW9kdWxlLl9icm9hZHdheUZsdXNoU3RyZWFtKCk7CiAgfTsKCiAgRGVjb2Rlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsKICAgIE1vZHVsZS5fYnJvYWR3YXlFeGl0KCk7CiAgfTsKCiAgRGVjb2Rlci5wcm90b3R5cGUudXBkYXRlTWV0YSA9IGZ1bmN0aW9uIChtZXRhKSB7CiAgICB0aGlzLm1ldGEgPSBtZXRhOwogIH07CgogIHZhciBkZWNvZGVyOwoKICBmdW5jdGlvbiBvblBvc3RSdW4gKCkgewogICAgZGVjb2RlciA9IG5ldyBEZWNvZGVyKHRoaXMpOwogICAgZGVjb2Rlci5pbml0KCk7CiAgfQoKICB2YXIgV0FTTV9DRE5fUEFUSF9QUkVGSVggPSAnJzsKCiAgZnVuY3Rpb24gaW5pdCAodXJsKSB7CiAgICBXQVNNX0NETl9QQVRIX1BSRUZJWCA9IHVybC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7CiAgICBpbml0VHMgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgIHZhciBpc0RlZ3JhZGUgPSAvYXNtLy50ZXN0KHVybCk7CiAgICBpZiAoIWRlY29kZXIpIHsKICAgICAgdmFyIHRhc2s7CgogICAgICBpZiAoIXNlbGYuaW1wb3J0U2NyaXB0cykgewogICAgICAgIHRhc2sgPSBzaGltSW1wb3J0U2NyaXB0cyh1cmwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRhc2sgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBpZiAoIXNlbGYuY29uc29sZSkgewogICAgICAgICAgICBzZWxmLmNvbnNvbGUgPSB7CiAgICAgICAgICAgICAgbG9nOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICB3YXJuOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICBpbmZvOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge30KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNlbGYuaW1wb3J0U2NyaXB0cyh1cmwpOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGFzawogICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChpc0RlZ3JhZGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2F1dG8gaW5zdGFuY2UgRGVjb2RlciEnKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIG9uUG9zdFJ1bi5jYWxsKHNlbGYpOwogICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2VsZi5tKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgICAgICAgLm0oewogICAgICAgICAgICAgICAgaW5zdGFudGlhdGVXYXNtOiBmdW5jdGlvbiAoaW5mbywgcmVjZWl2ZUluc3RhbmNlKSB7CiAgICAgICAgICAgICAgICAgIGZldGNoKGAke1dBU01fQ0ROX1BBVEhfUFJFRklYfS9kZWNvZGVyLndhc20uanNgKQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSkKICAgICAgICAgICAgICAgICAgICAudGhlbihidWZmZXIgPT4gewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGJ1ZmZlciwgaW5mbykKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlSW5zdGFuY2UocmVzdWx0Lmluc3RhbmNlKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKE1vZCkgewogICAgICAgICAgICAgICAgc2VsZi5Nb2R1bGUgPSBNb2Q7CiAgICAgICAgICAgICAgICBvblBvc3RSdW4uY2FsbChzZWxmKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIGFkZE9uUG9zdFJ1bihvblBvc3RSdW4uYmluZChzZWxmKSk7CgogICAgICAgICAgICBNb2R1bGUub25SdW50aW1lSW5pdGlhbGl6ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgTW9kdWxlLm9uQWJvcnQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJlamVjdChlICYmIGUubWVzc2FnZSA/IGUgOiBuZXcgRXJyb3IoJ3dhc20gaW5pdCBlcnJvcicpKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3dhc20gbG9hZCB0aW1lb3V0JykpOwogICAgICAgICAgICB9LCA2MDAwKTsKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBtc2c6ICdJTklUX0ZBSUxFRCcsCiAgICAgICAgICAgIGxvZzogZS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICB9CgogIHNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciBkYXRhID0gZS5kYXRhOwogICAgaWYgKCFkYXRhLm1zZykgewogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBtc2c6ICdFUlJPUjppbnZhbGlkIG1lc3NhZ2UnCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKGRhdGEubXNnICE9PSAnaW5pdCcgJiYgZGF0YS5tc2cgIT09ICdwcmVsb2FkJyAmJiAhZGVjb2RlcikgcmV0dXJuCiAgICAgIHN3aXRjaCAoZGF0YS5tc2cpIHsKICAgICAgICBjYXNlICdwcmVsb2FkJzoKICAgICAgICAgIGluaXQoZGF0YS51cmwpOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdpbml0JzoKICAgICAgICAgIHNlbGYubWV0YSA9IGRhdGEubWV0YTsKICAgICAgICAgIGluaXQoZGF0YS51cmwpOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICd1cGRhdGVtZXRhJzoKICAgICAgICAgIHNlbGYubWV0YSA9IGRhdGEubWV0YTsKICAgICAgICAgIGRlY29kZXIudXBkYXRlTWV0YShkYXRhLm1ldGEpOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdpbml0RGVjb2Rlcic6CiAgICAgICAgICBkZWNvZGVyLmRlY29kZShkYXRhLmRhdGEpOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdkZWNvZGUnOgogICAgICAgICAgZGVjb2Rlci5kZWNvZGUoZGF0YS5kYXRhLCBkYXRhLmluZm8pOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdmbHVzaCc6CiAgICAgICAgICBkZWNvZGVyLmZsdXNoKCk7CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgJ2ZpbmlzaF9mbGFnJzoKICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBtc2c6ICdCQVRDSF9GSU5JU0hfRkxBRycKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdkZXN0b3J5JzoKICAgICAgICAgIGRlY29kZXIuZGVzdHJveSgpOwogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQogIH07Cgp9KCkpOwoK",null,!1)},761690:function(n,r,i){"use strict";i.d(r,{Bo:function(){return g},HX:function(){return l},MP:function(){return m},P_:function(){return p},lF:function(){return y},mv:function(){return d},rM:function(){return f},tT:function(){return h},yJ:function(){return v}}),i(511141),i(110617),i(792315),i(329913),i(868352),i(17322),i(63249),i(950665),i(180138),i(911234),i(387605),i(936097),i(786120),i(339597),i(877193),i(391375),i(632637),i(645524),i(800599),i(69896),i(660999),i(12946),i(416555),i(747644),i(404948),i(789680),i(429532);var a,o,s="xg-video",u=!1;try{u=WebAssembly&&WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))}catch(n){}var c={preloadDecoder:!1,reuseWasmDecoder:!0,reuseMseForAudio:!1,preciseSeekLimit:120,h264WithWebcodec:!0,lowDecodeThreshold:75,lowDecodeFpsDelta:10,tempDisabledThreshold:40,wasmFallbackToAsm:!1,audioWithMse:!0,canUseThreadMode:!1,offscreenCanvas:!1,disabledDuration:43200,longDisabledDuration:432e3,evaluateVVCount:0,disabledByLowdecodePrecent:.5,maxDecodeOnceWasm:u?6:8,maxDecodeOnceFirstTime:8,maxDecodeOnceWebcodec:20};function d(){return s}function l(n){s=n}function f(n){c=Object.assign({},c,n,{offscreenCanvas:n.offscreenCanvas&&!!window.OffscreenCanvas})}function h(){return c}function p(){var n="undefined"!=typeof customElements&&customElements.get(s);return n?{H264_DECODER_URL:n.h264Url,ASM_H264_DECODER_URL:n.h264AsmUrl,H265_DECODER_URL:n.h265Url,H265_THREAD_DECODER_URL:n.h265ThreadUrl,H265_SIMD_DECODER_URL:n.h265SimdUrl,ASM_H265_DECODER_URL:n.h265AsmUrl}:{}}function v(){if("undefined"==typeof customElements)return!1;var n=customElements.get(s);return u&&!!(null!=n&&n.h265SimdUrl)}function g(){if("undefined"==typeof customElements)return!1;var n=customElements.get(s);return!!window.SharedArrayBuffer&&!!(null!=n&&n.h265ThreadUrl)}var _=!1;try{_=(null===(a=localStorage)||void 0===a?void 0:null===(o=a.getItem)||void 0===o?void 0:o.call(a,"_sds"))==="y"}catch(n){}function y(){if("undefined"==typeof customElements)return!1;if(_)return!0;var n=!1,r=!1;try{var i=new(window.AudioContext||window.webkitAudioContext);i.close(),i=null,n=!0}catch(n){}try{for(var a=document.createElement("canvas"),o=["webgl","experimental-webgl","moz-webgl","webkit-3d"],s=0;s<o.length;s++){var u=a.getContext(o[s]);if(u){var c=u.getExtension("WEBGL_debug_renderer_info"),d=u.getParameter(c.UNMASKED_RENDERER_WEBGL);d&&-1===d.indexOf("SwiftShader")&&-1===d.indexOf("Intel(R) HD")&&(r=!0),u=null,a=null;break}}_=n&&r&&!!WebAssembly,localStorage.setItem("_sds",_?"y":"n")}catch(n){}return _}function m(){return{simd:u,thread:g(),nbCpu:navigator.hardwareConcurrency}}},682238:function(n,r,i){"use strict";i.d(r,{Z:function(){return g}}),i(223047);var a=i(874838),o=i(758698),s=i(569395),u=i(812523),c=i(151176),d=i(53285),l=i(344137);i(742611),i(891555);var f=i(879146),h=i.n(f),p=i(761690),v=i(675161),g=function(n){(0,u.Z)(h,n);var r,i,f=(r=h,i=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,a=(0,d.Z)(r);return n=i?Reflect.construct(a,arguments,(0,d.Z)(this).constructor):a.apply(this,arguments),(0,c.Z)(this,n)});function h(n){var r;return(0,a.Z)(this,h),r=f.call(this),(0,l.Z)((0,s.Z)(r),"_parent",null),(0,l.Z)((0,s.Z)(r),"_decoderReady",!1),(0,l.Z)((0,s.Z)(r),"_inDecoding",!1),(0,l.Z)((0,s.Z)(r),"_toDecodeFirstframe",!0),(0,l.Z)((0,s.Z)(r),"_id",new Date().getMilliseconds()),(0,l.Z)((0,s.Z)(r),"_workerErrorCallback",null),(0,l.Z)((0,s.Z)(r),"_workerMessageCallback",null),(0,l.Z)((0,s.Z)(r),"_decoderWorker",null),r._parent=n,r}return(0,o.Z)(h,[{key:"analyse",get:function(){return this._parent.analyse}},{key:"inDecoding",get:function(){return this._inDecoding}},{key:"decoderMode",get:function(){return this._decoderMode}},{key:"decoderReady",get:function(){return this._decoderReady}},{key:"needToDecode",get:function(){return this._inDecoding?0:this._continueDecodeThreshold}},{key:"maxDecodeOnce",get:function(){return this._maxDecodeOnce}},{key:"meta",get:function(){var n;return null===(n=this._parent)||void 0===n?void 0:n._meta},set:function(n){this._parent&&(this._parent._meta=n)}},{key:"init",value:function(n,r){this._workerMessageCallback=n,this._workerErrorCallback=r,this._initWorker()}},{key:"_initWorker",value:function(){throw Error("need override by children")}},{key:"checkToDecode",value:function(n){if(this.webcodec){n<=this.needToDecode&&this.doDecode();return}!this._inDecoding&&n<=this.needToDecode&&this.doDecode()}},{key:"doDecode",value:function(){var n=this,r=this._getFramesToDecode();r&&r.length&&this.meta&&(this._toDecodeFirstframe&&(this._toDecodeFirstframe=!1,this.analyse.addFirstFrameToDecode()),!this._avccpushed&&this._initDecoderWithConfiguration(this._decoderWorker,this.meta),v.kg.enable&&v.kg.log(this.TAG,"doDecode ".concat(r.length," frames")),r.forEach(function(r){n._doDecodeInternal(r)}),this._inDecoding=!0,this._decoderWorker.postMessage({msg:"finish_flag"}))}},{key:"preciseSeek",value:function(n){var r,i,a,o,s=this,u=null===(r=this._parent)||void 0===r?void 0:null===(i=r._timeRange)||void 0===i?void 0:i.getFramesForPreciseSeek(1e3*n),c=u.length;if(c<this.maxDecodeOnce){this.doDecode();return}null===(a=this._parent)||void 0===a||null===(o=a._timeRange)||void 0===o||o.updateFrameIndexForPreciseSeek(c),v.kg.enable&&v.kg.log(this.TAG,"doDecode ".concat(u.length," frames for precise seek")),u.forEach(function(n,r){s._doDecodeInternal(n,!0,r>=c-6)}),this._inDecoding=!0,this._decoderWorker.postMessage({msg:"finish_flag"})}},{key:"_getFramesToDecode",value:function(){var n=this._parent,r=n._timeRange,i=n._decodeEstimate;if(!!this._decoderReady&&!!r){var a=r.frameLength;if(a){var o=this._toDecodeFirstframe?(0,p.tT)().maxDecodeOnceFirstTime:this.maxDecodeOnce;1===a&&i.resetDecodeDot(performance.now());for(var s=[];o>0;){var u=r&&r.getFrame();if(!u)break;s.push(u),u.gopId&&u.gopId-1==0&&i.updateGopCount(),o--}return s}}}},{key:"_doDecodeInternal",value:function(n,r,i){null!=n&&n.meta&&(this.meta=n.meta,v.kg.warn(this.TAG,"detect metadata! flush decoder"),this._initDecoderWithConfiguration(this.__decoderWorker,n.meta));var a={dts:n.dts,pts:n.pts||n.dts+n.cts,keyframe:n.keyframe,gopId:n.gopId,id:this._id};r&&(a.preciseSeek=!0,a.output=i);var o=n.data.slice();this._decoderWorker.postMessage({msg:"decode",data:o,info:a},[o.buffer])}},{key:"_initDecoderWithConfiguration",value:function(){throw Error("need override by children")}},{key:"flushDecoder",value:function(){this._decoderWorker.postMessage({msg:"flush"})}},{key:"destroy",value:function(){throw Error("need override by children")}}]),h}(h())},822535:function(n,r,i){"use strict";i.d(r,{Z:function(){return _}}),i(223047);var a=i(874838),o=i(758698),s=i(569395),u=i(812523),c=i(151176),d=i(53285),l=i(344137);i(836654);var f=i(682238),h=i(511052),p=i(675161),v=i(761690),g=(0,v.tT)().maxDecodeOnceWebcodec,_=function(n){(0,u.Z)(_,n);var r,i,f=(r=_,i=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,a=(0,d.Z)(r);return n=i?Reflect.construct(a,arguments,(0,d.Z)(this).constructor):a.apply(this,arguments),(0,c.Z)(this,n)});function _(){var n;(0,a.Z)(this,_);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=f.call.apply(f,[this].concat(i)),(0,l.Z)((0,s.Z)(n),"TAG","WebCodecController"),(0,l.Z)((0,s.Z)(n),"_decoderMode",5),(0,l.Z)((0,s.Z)(n),"_maxDecodeOnce",g),(0,l.Z)((0,s.Z)(n),"_continueDecodeThreshold",g/2),(0,l.Z)((0,s.Z)(n),"_avccpushed",!1),n}return(0,o.Z)(_,[{key:"webcodec",get:function(){return!0}},{key:"needToDecode",get:function(){return this._inDecoding?(this._checkToDecode(),0):this._continueDecodeThreshold}},{key:"_initWorker",value:function(){var n=this;p.kg.log(this.TAG,"start init webcodec worker");var r=new h.Z;r.onMessage=function(r){var i,a;switch(r.data.type){case"DECODER_READY":p.kg.log(n.TAG,"webcodec worker ready "),n._decoderReady=!0,n._workerMessageCallback({type:"DECODER_READY"});break;case"DECODED":if(n._inDecoding=!0,(null===(i=r.data)||void 0===i?void 0:null===(a=i.info)||void 0===a?void 0:a.id)!==n._id)return;n._workerMessageCallback({type:"RECEIVE_FRAME",data:r.data});break;case"BATCH_FINISH_FLAG":if(n._inDecoding=!1,!n._workerMessageCallback)return;n._workerMessageCallback({type:"BATCH_FINISH"});break;case"CHECK_TO_DECODE":n._inDecoding=r.data.data;break;case"FAILED":n._whenError(r.data.message)}},r.onError=function(r){var i,a,o=null===(i=n._parent)||void 0===i?void 0:null===(a=i._parent)||void 0===a?void 0:a._parent;o&&o.removeChild(o.querySelector("canvas")),n._whenError(r.message)},r.addEventListener("message",r.onMessage),r.addEventListener("error",r.onError),this._decoderWorker=r,this._initDecoderWithConfiguration(r,this._parent.configuration)}},{key:"_whenError",value:function(n){_.canUse=!1,this._workerErrorCallback(n)}},{key:"_initDecoderWithConfiguration",value:function(n,r){n.postMessage({msg:"configuration",data:{codec:this._parent._meta.codec,codedHeight:this._parent._meta.height,codedWidth:this._parent._meta.width,description:r}}),this._avccpushed=!0}},{key:"_checkToDecode",value:function(){this._decoderWorker.postMessage({msg:"checkDecode"})}},{key:"destroy",value:function(){var n=this._decoderWorker;n.removeEventListener("message",n.onMessage),n.removeEventListener("error",n.onError),n.postMessage({msg:"destroy"}),n.terminate(),this._decoderWorker=null}}],[{key:"isSupported",value:function(){return(0,v.tT)().h264WithWebcodec&&!!window.VideoDecoder&&!1!==_.canUse}}]),_}(f.Z)},540931:function(n,r,i){"use strict";i.d(r,{NW:function(){return a},R_:function(){return o},ZP:function(){return s}});var a={WAITING:0,CANPLAY:1,PLAY:2,PLAYING:3,PAUSE:4,SEEKING:5,SEEKED:6,LOADEDDATA:7,LOADEDMETADATA:8,TIMEUPDATE:9,DURATION_CHANGE:10,VOLUME_CHANGE:11,PROGRESS:12,ERROR:13,ENDED:14,RESIZE:15,LOADSTART:16,DECODE_FPS:17,LOW_DECODE:18,LARGE_AV_GAP:19,FIRST_FRAME:20,CANVAS_LAYOUT:21},o=["waiting","canplay","play","playing","pause","seeking","seeked","loadeddata","loadedmetadata","timeupdate","durationchange","volumechange","progress","error","ended","resize","loadstart","decodefps","lowdecode","largeavgap","firstframe","canvaslayout"],s={AUDIO:{AUDIO_READY:"audio_ready",AUDIO_NOT_ALLOWED_AUTOPLAY:"audio_not_allowed_autoplay",AUDIO_WAITING:"audio_waiting",AUDIO_SYNC_DTS:"audio_sync_dts"},VIDEO:{VIDEO_DECODER_INIT:"video_decode_init",VIDEO_READY:"video_ready",VIDEO_WAITING:"video_waiting",AUTO_RUN:"auto_run",DECODE_LOW_FPS:"decode_low_fps",UPDATE_VIDEO_FILLTYPE:"update_video_filltype",UPDATE_VIDEO_COVER_POSITION:"update_video_cover_position"},TIMELINE:{PLAY_EVENT:"play_event",SET_METADATA:"set_metadata",APPEND_CHUNKS:"append_chunks",START_RENDER:"start_render",DO_PLAY:"do_play",DO_PAUSE:"do_pause",DO_SEEK:"do_seek",SET_PLAYBACKRATE:"set_playbackrate",SYNC_DTS:"sync_dts",RESET_BASE_DTS:"reset_base_dts",UPDATE_VOLUME:"update_volume",SINGLE_TRACK:"single_track",DESTROY:"destroy",READY:"ready",UPDATE_GL_OPTIONS:"update_gl_options",SET_VIDEO_DURATION:"set_video_duration",SET_PLAY_MODE:"set_play_mode",UPDATE_CAPABILITY_LEVEL:"update_capability_level",INNER_DEGRADE:"inner_degrade",ADJUST_SEEK_TIME:"adjust_seek_time",CHASE_FRAME:"chase_frame",END_OF_STREAM:"end_of_stream",UPDATE_SEGMENT_END:"update_segment_end"},VIDEO_EVENTS:a,DECODE_EVENTS:{INIT:"init",READY:"decoderready",REMUX:"remux",INIT_FAILED:"initfailed",DATAREADY:"dataReady",PLAY_FAILED:"playfailed",FRAGMENT_END:"fragmentEnd",APPEND_VIDEO:"appendVideo",FIRST_FRAME:"firstFrame",DECODED:"decoded",RENDE_END:"rendeEnd",CHASE_VIDEO_FRAME:"chaseVideoFrame",CHASE_VIDEO_FRAME_END:"chaseVideoFrameEnd",CHASE_AUDIO_FRAME:"chaseAudioFrame",INIT_SEGMENT:"initSegment",MEDIA_SEGMENT:"mediaSegment",FRAME_MAX_COUNY:"frameMaxCount",FRAME_MIN_COUNY:"frameMinCount"}}},634418:function(n,r,i){"use strict";var a;function o(){if(!document.querySelector("#hackAudioPP")){var n=document.createElement("div");n.innerHTML="<audio id='hackAudioPP'></audio>",document.body.appendChild(n);var r=n.children.item(0);r.controls=!1,r.preload="auto",r.innerHTML="<source src=".concat("data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",' type="audio/mpeg"></source>'),r.muted=!0,r.loop=!0,r.play().catch(function(){})}}function s(){var n=a||(a=document.querySelector("#hackAudioPP"));if(!n){o();return}(!1!==n.paused||!1!==n.muted)&&(n.muted=!1,n.play().catch(function(n){}))}function u(){var n=a||(a=document.querySelector("#hackAudioPP"));n&&n.pause()}i.d(r,{BR:function(){return u},ds:function(){return o},fC:function(){return s}})},308360:function(n,r,i){"use strict";i.d(r,{Z:function(){return F}}),i("223047");var a=i("874838"),o=i("812523"),s=i("151176"),u=i("53285"),c=i("375234"),d=i("758698"),l=i("569395"),f=i("284016"),h=i("344137");i("742611"),i("555983"),i("826893"),i("284961"),i("691842"),i("110617"),i("675373"),i("836654"),i("819117"),i("721911"),i("572081"),i("994269"),i("464135"),i("269707");var p=i("39263"),v=i("634418"),g=i("675161"),_=i("761690"),y=i("126196"),m=i("879146"),b=i.n(m),A=i("423829");i("819875"),i("214798"),i("564356");var I=i("83915"),k=i("116774"),E=i.n(k);i("499045"),i("499953"),i("98601"),i("511141"),i("914613"),i("874386"),i("891555"),i("792315"),i("329913"),i("868352"),i("17322"),i("63249"),i("950665"),i("180138"),i("911234"),i("387605"),i("936097"),i("786120"),i("339597"),i("877193"),i("391375"),i("632637"),i("645524"),i("800599"),i("69896"),i("660999"),i("12946"),i("416555"),i("747644"),i("404948"),i("789680");var T=i("107864"),S=i("167186"),C=function(){function n(r,i){(0,a.Z)(this,n),this.videoTrack=r,this.audioTrack=i;var o=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=o&&50>Number(o[1])}return(0,d.Z)(n,[{key:"remux",value:function(){var n,r,i,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.videoTrack,u=this.audioTrack,c=s.exist(),d=u.exist();return o&&(c&&(n=T.b.initSegment([this.videoTrack])),d&&(r=T.b.initSegment([this.audioTrack]))),c&&s.hasSample()&&(i=this._remuxVideo()),d&&u.hasSample()&&(a=this._remuxAudio()),s.samples=[],u.samples=[],{videoInitSegment:n,audioInitSegment:r,videoSegment:i,audioSegment:a}}},{key:"_remuxVideo",value:function(){var n=this.videoTrack,r=n.samples;this.forceFirstIDR&&(r[0].flag={dependsOn:2,isNonSyncSample:0});var i=0;r.forEach(function(n){i+=n.units.reduce(function(n,r){return n+r.byteLength},0)+4*n.units.length});for(var a=new Uint8Array(i),o=new DataView(a.buffer),s=function(n,i,s,c){c=r[n];var d=0;c.units.forEach(function(n){o.setUint32(s,n.byteLength),s+=4,a.set(n,s),s+=n.byteLength,d+=4+n.byteLength}),c.size=d,l=s,u=c},u,c=0,d=r.length,l=0;c<d;c++)s(c,d,l,u);var f=T.b.moof(this.videoTrack.sequenceNumber++,[n]),h=T.b.mdat(a);return(0,S.gJ)(f,h)}},{key:"_remuxAudio",value:function(){var n=this.audioTrack,r=T.b.moof(this.audioTrack.sequenceNumber++,[n]),i=new Uint8Array(n.samples.reduce(function(n,r){return n+r.size},0));n.samples.reduce(function(n,r){return i.set(r.data,n),n+r.size},0);var a=T.b.mdat(i);return(0,S.gJ)(r,a)}}]),n}(),x=i("75999"),w=i("540931"),R=i("905718");function D(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),i.push.apply(i,a)}return i}function L(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?D(Object(i),!0).forEach(function(r){(0,h.Z)(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}var O={"mp4a.40.5":1,"mp4a.40.2":2},P=new(function(){function n(){(0,a.Z)(this,n),(0,h.Z)(this,"_queue",[]),"undefined"!=typeof document&&(this._tempMedia=document.createElement("video"))}return(0,d.Z)(n,[{key:"tempMedia",get:function(){return this._tempMedia}},{key:"hasCached",get:function(){return -1!==this._queue.findIndex(function(n){return 1===n.codec})&&-1!==this._queue.findIndex(function(n){return 2===n.codec})}},{key:"getCachedMedia",value:function(n){var r=this._queue.findIndex(function(r){return r.codec===n});return -1!==r?this._queue.splice(r,1)[0]:null}},{key:"cacheMedia",value:function(n){var r=n.codec,i=n.media,a=n.mse,o=O[r];if(this._queue=this._queue.filter(function(n){n.mse&&!n.mse.isOpened&&n.mse.unbindMedia();var r,i=null===(r=n.mse)||void 0===r?void 0:r.isOpened;return!i&&n.media&&(n.media.canuse=0),i}),i.canuse=0,!r||this._queue.filter(function(n){return n.codec===o}).length>2){null==a||a.endOfStream(),null==a||a.unbindMedia();return}i.canuse=1,this._queue.push({codec:o,media:i,mse:a})}}]),n}()),B=function(n){(0,o.Z)(m,n);var r,i,c,p,v,y=(r=m,i=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,a=(0,u.Z)(r);return n=i?Reflect.construct(a,arguments,(0,u.Z)(this).constructor):a.apply(this,arguments),(0,s.Z)(this,n)});function m(n,r){var i,o;return(0,a.Z)(this,m),i=y.call(this,n,r),(0,h.Z)((0,l.Z)(i),"_media",void 0),(0,h.Z)((0,l.Z)(i),"_isTempMedia",!1),(0,h.Z)((0,l.Z)(i),"_mse",void 0),(0,h.Z)((0,l.Z)(i),"_remuxer",null),(0,h.Z)((0,l.Z)(i),"_codec",""),(0,h.Z)((0,l.Z)(i),"_sourceCreated",!1),(0,h.Z)((0,l.Z)(i),"_needInitSegment",!0),(0,h.Z)((0,l.Z)(i),"_seekNoSideEffect",!1),(0,h.Z)((0,l.Z)(i),"_startRendered",!1),(0,h.Z)((0,l.Z)(i),"_firstTimeAppendedBuffer",!1),(0,h.Z)((0,l.Z)(i),"_sampleQueue",[]),(0,h.Z)((0,l.Z)(i),"_inProcessing",!1),(0,h.Z)((0,l.Z)(i),"_duration",0),(0,h.Z)((0,l.Z)(i),"_mediaCache",P),(0,h.Z)((0,l.Z)(i),"_resetDts",function(){}),(0,h.Z)((0,l.Z)(i),"_onCanplay",function(){!i._ready&&(i._ready=!0,i.emit(w.ZP.AUDIO.AUDIO_READY))}),(0,h.Z)((0,l.Z)(i),"_onPlaying",function(){i._parent.ready&&(i._audioCanAutoplay=!0,i._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.PLAYING))}),(0,h.Z)((0,l.Z)(i),"_onWaiting",function(){if(!i._seekNoSideEffect){try{for(var n,r=i._media.buffered,a=i._media.currentTime,o=0,s=0,u=r.length;s<u;s++)r.start(s)<a&&r.end(s)>a&&(o=r.end(s)-a);if(Math.abs(o)>.5)return;if(Math.abs(i._media.duration-i._media.currentTime)<(i.duration>60?.5:.3)){!i._reuseMse&&i._mse.endOfStream(),null===(n=(0,l.Z)(i))||void 0===n||n._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.ENDED);return}}catch(n){}i._ready=!1,i.emit(w.ZP.AUDIO.AUDIO_WAITING)}}),(0,h.Z)((0,l.Z)(i),"_onSeeked",function(){if(i._seekNoSideEffect||i._isLive){i._seekNoSideEffect=!1;return}g.kg.log(i.TAG,"seeked","_readyStatus:",i._ready),!i._ready&&(i._media.pause(),i._ready=!0,i.emit(w.ZP.AUDIO.AUDIO_READY,!0))}),(0,h.Z)((0,l.Z)(i),"_onProgress",function(){if(i._media.readyState<=1){var n=i._getBufferGap();n>0&&n<1&&(i._media.currentTime+=n+.05,g.kg.warn(i.TAG,"progress, gap=",n))}i._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.PROGRESS),i._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.DURATION_CHANGE)}),(0,h.Z)((0,l.Z)(i),"_onEnded",function(){var n;g.kg.log(i.TAG,"ended!"),null===(n=(0,l.Z)(i))||void 0===n||n._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.ENDED)}),(0,h.Z)((0,l.Z)(i),"_onOnceProgress",function(){if(i._media.buffered.length){var n=i._media.buffered.start(0);n&&(i._media.currentTime=n+.05,g.kg.log(i.TAG,"start gap:",n)),i._media.removeEventListener("progress",i._onOnceProgress)}}),(0,h.Z)((0,l.Z)(i),"_onError",function(){var n;i._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.ERROR,i._assembleErr("audio error: ".concat(null===(n=i._media.error)||void 0===n?void 0:n.message),3))}),(0,h.Z)((0,l.Z)(i),"_appendChunk",function(n,r){if(!i.noAudio){if(r.samples.length){if(!i._codec&&(2!==r.objectType&&5!==r.objectType?i._codec="mp4a.40.5":i._codec=r.codec,i._isTempMedia&&i._switchMedia(i._codec)),r.samples.forEach(function(n){n.baseMediaDecodeTime=r.baseMediaDecodeTime,i._sampleQueue.push(n)}),r.samples=[],!i._meta){i._meta=L(L({},r),{},{exist:function(){return!0},hasSample:function(){return!0},samples:[]}),g.kg.warn(i.TAG,"audio set metadata",i._meta),i._doAppendWrapper();return}i._meta.sampleRate!==r.sampleRate&&(g.kg.warn(i.TAG,"discontinue: ".concat(i._meta.sampleRate," -> ").concat(r.sampleRate)),i._needInitSegment=!0,Object.keys(r).forEach(function(n){i._meta[n]=r[n]})),!i._inProcessing&&i._sampleQueue.length&&i._doAppendWrapper()}}}),(0,h.Z)((0,l.Z)(i),"_doAppend",(o=(0,I.Z)(E().mark(function n(r){var a,o,s;return E().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!i._remuxer&&(i._remuxer=new C({samples:[],exist:function(){return!1}},r)),a=r.samples,i._sourceCreated){n.next=12;break}return i.analyse.addAudioMseOpenStart(),n.next=6,i._mse.open();case 6:i._sourceCreated=!0,g.kg.log(i.TAG,"video/mp4;codecs=".concat(i._codec)),i._mse.createSource(r.type,"video/mp4;codecs=".concat(i._codec)),i.analyse.addAudioMseOpend(),g.kg.log(i.TAG,"sb created!"),i._checkAutoPlay();case 12:if(o=i._remuxer.remux(i._needInitSegment),!(i._needInitSegment&&!o.audioInitSegment)){n.next=15;break}return n.abrupt("return");case 15:return i._needInitSegment=!1,s=[],o.audioInitSegment&&s.push(i._mse.append(r.type,o.audioInitSegment)),o.audioSegment&&s.push(i._mse.append(r.type,o.audioSegment)),n.abrupt("return",Promise.all(s).then(function(){return a[a.length-1].dts/1e3}).then(function(){!i._firstTimeAppendedBuffer&&(i._firstTimeAppendedBuffer=!0,i.analyse.addAudioFirstTimeAppended())}));case 20:case"end":return n.stop()}},n)})),function(n){return o.apply(this,arguments)})),(0,h.Z)((0,l.Z)(i),"_doPlay",function(){i._media.play().catch(function(){})}),(0,h.Z)((0,l.Z)(i),"_doPause",function(){i._media.pause()}),(0,h.Z)((0,l.Z)(i),"_doSeek",function(n){g.kg.log(i.TAG,"doSeek, t=",n),i._ready=!1,i._media.currentTime=n}),(0,h.Z)((0,l.Z)(i),"_doChaseFrame",function(n){var r=n.position;i._seekNoSideEffect=!0,i._media.currentTime=r}),(0,h.Z)((0,l.Z)(i),"_startRender",function(){g.kg.log(i.TAG,"start render"),i._startRendered=!0,i._media.play().catch(function(){})}),i.TAG="AudioMseRender",i._reuseMse=(0,_.tT)().reuseMseForAudio,i._initMedia(),i}return(0,d.Z)(m,[{key:"isMse",get:function(){return!0}},{key:"media",get:function(){return this._media}},{key:"currentTime",get:function(){return this._media.currentTime}},{key:"buffered",get:function(){return this._media.buffered}},{key:"duration",get:function(){return isNaN(this._media.duration)?1/0:this._media.duration},set:function(n){this._duration=n,this._updateDuration(n)}},{key:"audioCanAutoplay",get:function(){return this._audioCanAutoplay||this.noAudio}},{key:"readyState",get:function(){var n;return(null===(n=this._media)||void 0===n?void 0:n.readyState)||0}},{key:"_initMedia",value:function(){if(!this._reuseMse||!P.hasCached){g.kg.log(this.TAG,"init media and mse directly"),this._media=document.createElement("video"),this._media.autoplay=!0,this._media.canuse=1,this._mse=new x.d1,this._bindEvents(),this._bindMediaEvents(),this._mse.bindMedia(this._media);return}g.kg.log(this.TAG,"bind media temporary"),this._media=P.tempMedia,this._bindEvents(),this._isTempMedia=!0}},{key:"_switchMedia",value:function(n){var r=this._media,i=P.getCachedMedia(O[n]);i?(g.kg.warn(this.TAG,"switch to cached media for audio play! codec=".concat(n)),this._media=i.media,this._mse=i.mse,this._bindMediaEvents(),this._updateDuration(this._duration),this._media.currentTime=.05,this._sourceCreated=!0,this._audioCanAutoplay=!0,this.analyse.addAudioMseOpend()):this._initMedia(),this._media.volume=r.volume,this._media.playbackRate=r.playbackRate,this._isTempMedia=!1}},{key:"_getBufferGap",value:function(){for(var n=this.buffered,r=0,i=n.length;r<i;r++)if(!(n.end(r)<this.currentTime))return n.start(r)-this.currentTime;return 0}},{key:"canSeek",value:function(){return!0}},{key:"resume",value:function(){return this._media.play()}},{key:"pause",value:function(){return this._media.pause()}},{key:"seekNoSideEffect",value:function(n){this._doChaseFrame(n)}},{key:"dump",value:function(){}},{key:"_emitTimelineEvents",value:function(n,r,i){var a,o;null===(a=this._parent)||void 0===a||null===(o=a.emit)||void 0===o||o.call(a,n,r,i)}},{key:"_assembleErr",value:function(n,r){var i=Error(n);return i.code=3,i.subCode=r,i}},{key:"_bindEvents",value:function(){var n=this;(0,f.Z)((0,u.Z)(m.prototype),"_bindEvents",this).call(this),this._parent.on(w.ZP.DECODE_EVENTS.CHASE_AUDIO_FRAME,this._doChaseFrame),this._parent.on(w.ZP.TIMELINE.UPDATE_VOLUME,function(r){n._media.volume=r,n._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.VOLUME_CHANGE)}),this._parent.on(w.ZP.TIMELINE.END_OF_STREAM,function(){if(!n.reuseMseForAudio){var r;null===(r=n._mse)||void 0===r||r.endOfStream()}}),this._parent.on(w.ZP.TIMELINE.SET_PLAYBACKRATE,function(r){g.kg.log(n.TAG,"change playbackrate, ",r),n._media.playbackRate=r})}},{key:"_bindMediaEvents",value:function(){this._media.addEventListener("canplay",this._onCanplay),this._media.addEventListener("playing",this._onPlaying),this._media.addEventListener("waiting",this._onWaiting),this._media.addEventListener("seeked",this._onSeeked),this._media.addEventListener("progress",this._onProgress),this._media.addEventListener("ended",this._onEnded),this._media.addEventListener("progress",this._onOnceProgress),this._media.addEventListener("error",this._onError)}},{key:"_updateDuration",value:(c=(0,I.Z)(E().mark(function n(r){return E().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._mse){n.next=9;break}if(this._mse.isOpened){n.next=4;break}return n.next=4,this._mse.open();case 4:if(this._mse){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,this._mse.updateDuration(r);case 8:g.kg.log(this.TAG,"update duration",r);case 9:case"end":return n.stop()}},n,this)})),function(n){return c.apply(this,arguments)})},{key:"_doAppendWrapper",value:(p=(0,I.Z)(E().mark(function n(){var r;return E().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this._meta){n.next=2;break}return n.abrupt("return");case 2:return this._meta.samples=this._sampleQueue.slice(),this._meta.baseMediaDecodeTime=this._meta.samples[0].baseMediaDecodeTime,this._sampleQueue=[],n.prev=5,this._inProcessing=!0,n.next=9,this._doAppend(this._meta);case 9:if(r=n.sent,this.isLive&&this._emitTimelineEvents(w.ZP.TIMELINE.UPDATE_SEGMENT_END,r),this._inProcessing=!1,!this._sampleQueue.length){n.next=15;break}return n.next=15,this._doAppendWrapper();case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),this._emitTimelineEvents(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.ERROR,this._assembleErr("audio error: ".concat(null===n.t0||void 0===n.t0?void 0:n.t0.message),3));case 20:case"end":return n.stop()}},n,this,[[5,17]])})),function(){return p.apply(this,arguments)})},{key:"_checkAutoPlay",value:function(){var n=this;this._media.addEventListener("canplay",function r(){if(n._media){var i=n._media.volume;n._media.volume=Math.min(i,.1);var a=n._media.play();(a=a.then?a:Promise.reject()).then(function(){g.kg.log(n.TAG,"auto play by checkAutoPlay!"),n._audioCanAutoplay=!0}).catch(function(){g.kg.warn(n.TAG,"can’t auto play!"),n._audioCanAutoplay=!1,n.emit(w.ZP.AUDIO.AUDIO_NOT_ALLOWED_AUTOPLAY)}).finally(function(){n._media&&(n._media.volume=i,!n._startRendered&&(n._media.pause(),g.kg.log(n.TAG,"auto paused by checkAutoPlay!")),n._media.removeEventListener("canplay",r))})}})}},{key:"_destroy",value:(v=(0,I.Z)(E().mark(function n(){var r,i,a,o;return E().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(g.kg.log(this.TAG,"destroy audio render"),this._remuxer=null,this.removeAllListeners(),this._media.removeEventListener("canplay",this._onCanplay),this._media.removeEventListener("playing",this._onPlaying),this._media.removeEventListener("waiting",this._onWaiting),this._media.removeEventListener("seeked",this._onSeeked),this._media.removeEventListener("progress",this._onProgress),this._media.removeEventListener("ended",this._onEnded),this._media.removeEventListener("progress",this._onOnceProgress),this._media.removeEventListener("error",this._onError),this._reuseMse){n.next=18;break}return null===(r=this._mse)||void 0===r||r.endOfStream(),n.next=15,null===(i=this._mse)||void 0===i?void 0:i.unbindMedia();case 15:this._media&&(this._media.canuse=0),n.next=21;break;case 18:null!==(a=this._media.buffered)&&void 0!==a&&a.length&&(null===(o=this._mse)||void 0===o||o.clearAllBuffer()),P.cacheMedia({codec:this._codec,media:this._media,mse:this._mse}),g.kg.log(this.TAG,"cache media for audio play, codec=",this._codec);case 21:this._mse=null,this._meta=null,this._media=null,this._mediaCache=null;case 25:case"end":return n.stop()}},n,this)})),function(){return v.apply(this,arguments)})}],[{key:"isSupported",value:function(){return(0,_.tT)().audioWithMse&&!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="mp4a.40.5"')}}]),m}(R.Z),N=i("467514"),M=function(n){(0,o.Z)(f,n);var r,i,c=(r=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,a=(0,u.Z)(r);return n=i?Reflect.construct(a,arguments,(0,u.Z)(this).constructor):a.apply(this,arguments),(0,s.Z)(this,n)});function f(n,r){var i;return(0,a.Z)(this,f),(i=c.call(this)).TAG="TimeLine",i._parent=r,i._seeking=!1,i.audioRender=B.isSupported()?new B(n,(0,l.Z)(i)):new A.Z(n,(0,l.Z)(i)),i.videoRender=new N.Z(n,(0,l.Z)(i)),i._readyStatus={audio:!1,video:!1},i._paused=!0,i._switchToMultiWorker=!1,i._lowdecodeEmited=!1,i._startPlayed=!1,i._emitReady=!1,i._singleTrack=-1,i._bindEvent(),i._decodeVideo=n.video,i._seekDirection=1,i}return(0,d.Z)(f,[{key:"analyse",get:function(){return this._parent.analyse}},{key:"ready",get:function(){return this._readyStatus.video&&this._readyStatus.audio}},{key:"played",get:function(){var n=this;return{length:this.currentTime?1:0,start:function(){return 0},end:function(){return n.currentTime}}}},{key:"noAudio",get:function(){return 1===this._singleTrack||2===this._singleTrack}},{key:"isLive",get:function(){return this._parent.live}},{key:"seeking",get:function(){return this._seeking}},{key:"decodeFps",get:function(){return this.videoRender.decodeFps}},{key:"decodeCost",get:function(){return this.videoRender.decodeCost}},{key:"renderCost",get:function(){return this.videoRender.renderCost}},{key:"wasmInitCost",get:function(){return this.videoRender.wasmInitCost}},{key:"fps",get:function(){return this.videoRender.fps}},{key:"totalSize",get:function(){return this.videoRender.totalSize}},{key:"bitrate",get:function(){return this.videoRender.bitrate}},{key:"gopLength",get:function(){return this.videoRender.gopLength}},{key:"currentTime",get:function(){if(this.noAudio)return this.paused?this.videoRender.nextFrameTime:this.videoRender.currentTime;return this.audioRender.currentTime}},{key:"timelinePosition",get:function(){return this.noAudio?performance.now()/1e3:this.audioRender.currentTime}},{key:"canvas",get:function(){return this.videoRender.canvas}},{key:"readyState",get:function(){return this.audioRender.readyState}},{key:"buffered",get:function(){var n=this;return this.noAudio?this.videoRender.buffered:this.audioRender.isMse||this.isLive?this.audioRender.buffered:{length:this.audioRender.buffered.length,start:function(r){return Math.max(n.audioRender.buffered.start(r),n.videoRender.buffered.start(r))},end:function(r){return Math.min(n.audioRender.buffered.end(r),n.videoRender.buffered.end(r))}}}},{key:"duration",get:function(){return this.noAudio?this.videoRender.duration:this.isLive?this.audioRender.duration:Math.min(this.audioRender.duration,this.videoRender.duration)}},{key:"paused",get:function(){return this._paused},set:function(n){this._paused=n}},{key:"lowlatency",get:function(){return this._parent.lowlatency}},{key:"decoderMode",get:function(){return this.videoRender.decoderMode}},{key:"currentAudioCanAutoplay",get:function(){return this.audioRender.audioCanAutoplay}},{key:"_checkInBuffer",value:function(){for(var n=this.buffered,r=0,i=n.length;r<i;r++)if(n.start(r)<=this.currentTime+.1&&n.end(r)>=this.currentTime)return!0;return!1}},{key:"_resetReadyStatus",value:function(){this._readyStatus.audio=!1,this._readyStatus.video=!1}},{key:"_bindEvent",value:function(){var n=this;this.on(w.ZP.DECODE_EVENTS.REMUX,function(r){n.videoRender.setRemux(r)}),this.on(w.ZP.DECODE_EVENTS.CHASE_VIDEO_FRAME_END,function(r){n.emit(w.ZP.DECODE_EVENTS.CHASE_AUDIO_FRAME,r)}),this.audioRender.on(w.ZP.AUDIO.AUDIO_READY,function(r){g.kg.log(n.TAG,"audio ready! seeking=",n._seeking,"seeked:",!!r,"paused:",n._paused),n._seeking&&setTimeout(function(){try{var r=1===n._seekDirection?n.videoRender.getSeekStartPositionBehind(n.currentTime,1/0):n.videoRender.getSeekStartPosition(n.currentTime,1/0);if(n.audioRender.isMse&&r){if((0,_.tT)().preciseSeekLimit>n.duration&&n.currentTime>.1){n.audioRender.seekNoSideEffect({position:n.currentTime+.1}),n.videoRender.ajustSeekTime(n.currentTime,!0);return}n.audioRender.seekNoSideEffect({position:r.position+.1}),n.videoRender.ajustSeekTime(r.position);return}n.videoRender.ajustSeekTime(n.currentTime)}catch(n){}},10),n._readyStatus.video&&n._startRender(n._seeking&&r),n._readyStatus.audio=!0,!n._startPlayed&&n.analyse.addAudioReady()}),this.audioRender.on(w.ZP.AUDIO.AUDIO_NOT_ALLOWED_AUTOPLAY,function(){n._emitReady&&n.pause()}),this.audioRender.on(w.ZP.AUDIO.AUDIO_WAITING,function(){!n.noAudio&&n.currentTime&&(g.kg.warn(n.TAG,"lack data, audio waiting,currentTime:",n.currentTime),n.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.WAITING),n.emit(w.ZP.TIMELINE.DO_PAUSE),n._readyStatus.audio=!1)}),this.videoRender.on(w.ZP.VIDEO.VIDEO_WAITING,function(){g.kg.warn(n.TAG,"lack data, video waiting"),n.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.WAITING),n.emit(w.ZP.TIMELINE.DO_PAUSE),n._readyStatus.video=!1}),this.videoRender.on(w.ZP.VIDEO.VIDEO_READY,function(){g.kg.log(n.TAG,"video ready!"),!n._startPlayed&&n.analyse.addVideoReady(),n._readyStatus.audio&&n._startRender(n._seeking),n._readyStatus.video=!0}),this.videoRender.on(w.ZP.VIDEO.DECODE_LOW_FPS,function(r){!(n.currentTime<.1)&&(n.analyse.increaseLowDecodeCount(r),!n._lowdecodeEmited&&((0,y.u$)(),n._lowdecodeEmited=!0),n.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.LOW_DECODE))}),this.on(w.ZP.TIMELINE.SINGLE_TRACK,function(r){n._singleTrack=r,(1===r||2===r)&&(n._readyStatus.audio=!0),3===r&&(n._readyStatus.video=!0),n.emit(w.ZP.TIMELINE.SYNC_DTS,0)}),this.on(w.ZP.TIMELINE.DESTROY,function(){n.removeAllListeners(),n.videoRender=null,n.audioRender=null}),this.on(w.ZP.TIMELINE.DO_PLAY,function(){n.emit(w.ZP.TIMELINE.START_RENDER),n._paused=!1,n.noAudio&&n.emit(w.ZP.TIMELINE.SYNC_DTS,0)})}},{key:"_startRender",value:function(n){if(!this._parent.error&&this.videoRender){if(this.noAudio&&this.emit(w.ZP.TIMELINE.SYNC_DTS,0),this.videoRender.forceRender(),!this.isLive&&this._paused&&this.seeking&&this._checkInBuffer()){g.kg.log(this.TAG,"set seeking = false"),this._seeking=!1,this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.SEEKED),g.kg.groupEnd();return}!this._startPlayed&&(this.analyse.addFirstframe(),this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.LOADEDDATA),this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.FIRST_FRAME),this._startPlayed=!0),g.kg.log(this.TAG,"emit canplay"),this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.CANPLAY),this._parent.autoplay&&(g.kg.warn(this.TAG,"startRender: time=",this.currentTime,"paused:",this.paused,"seeking:",this.seeking),this.emit(w.ZP.TIMELINE.START_RENDER)),this.emit(w.ZP.TIMELINE.READY),this._emitReady=!0,this._seeking&&n&&(g.kg.log(this.TAG,"set seeking = false"),this._seeking=!1,this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.SEEKED),g.kg.groupEnd())}}},{key:"_checkHlsTracks",value:function(n){if(!(null==n?void 0:n.samples[0])){if(!this.buffered.length){var r=Error("lack video sample");r.code=3,this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.ERROR,r)}return!1}return!0}},{key:"appendBuffer",value:function(n,r){this.emit(w.ZP.TIMELINE.APPEND_CHUNKS,n,r),this.noAudio&&this._seeking&&this.videoRender.ajustSeekTime(this.currentTime)}},{key:"play",value:function(){var n=this;return new Promise(function(r,i){var a=n.currentAudioCanAutoplay;n.noAudio?a=!0:n.audioRender&&n.audioRender.resume().then(function(){if(g.kg.log(n.TAG,"audio render resumed, pause status: ".concat(n._paused,", audioCanAutoplay:").concat(n.currentAudioCanAutoplay)),n._paused||!n.currentAudioCanAutoplay){a=!1,n.emit(w.ZP.TIMELINE.DO_PAUSE);return}a=!0}).catch(function(){}),setTimeout(function(){if(g.kg.log(n.TAG,"play() timer done, resumed=".concat(a,", paused=").concat(n.paused)),!a){if(!n.paused){g.kg.log(n.TAG,"audioCtx can't autoplay"),n.pause(),i({name:"NotAllowedError"});return}n.pause(),r();return}n._paused=!1,r()},n.audioRender.isMse?10:60)})}},{key:"pause",value:function(){var n,r;(!this._paused||null===(n=this.audioRender)||void 0===n||null===(r=n.media)||void 0===r||!r.paused)&&(this.ready||this._seeking)&&(this.emit(w.ZP.TIMELINE.DO_PAUSE),this._paused=!0,this.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.PAUSE))}},{key:"seek",value:function(n){var r=this;if(this._seeking&&g.kg.groupEnd(),this.isLive){if(this.currentTime<.1||!this.currentAudioCanAutoplay||this.paused)return;var i=this.videoRender.getSeekStartPosition(n,this._parent.preloadTime+1);if(i){if(i.position<this.currentTime)return;var a=this.audioRender.canSeek(i.position),o=this.videoRender.canSeek(i);if(!a||!o){g.kg.log(this.TAG,"seek, !!!!!!!!!can not seek, audioCanSeek:",a,"videoCanSeek:",o);return}g.kg.warn(this.TAG,"seek, chase frame to time: ",i.position,"currentTime:",this.currentTime,"duration:",this.duration),this.videoRender.videoDecode?(this.audioRender.doPause(),i.position=i.position-1.5,this.emit(w.ZP.DECODE_EVENTS.CHASE_VIDEO_FRAME,i)):this.emit(w.ZP.TIMELINE.CHASE_FRAME,i)}return}n>=this.duration&&(n=this.duration-1),n<0&&(n=0),g.kg.group(this.TAG,"start seek to:".concat(n,", set seeking status=true")),this._seeking=!0,this.videoRender.setSeekingStatus(!0),this.noAudio?(this.emit(w.ZP.TIMELINE.SYNC_DTS,this.videoRender.getDtsOfTime(n)),this.videoRender.ajustSeekTime(n)):this._resetReadyStatus(),this._seekDirection=this.currentTime<n?1:2,this.emit(w.ZP.TIMELINE.DO_SEEK,n),new Promise(function(n){r.emit(w.ZP.TIMELINE.PLAY_EVENT,w.ZP.VIDEO_EVENTS.SEEKING),n()})}}]),f}(b()),Z=i("63368"),V=i("875089"),U={LOW_LATENCY:1,NO_AUDIO:2,NO_VIDEO:3},F=function(n){(0,o.Z)(m,n);var r,i,h=(r=m,i=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,a=(0,u.Z)(r);return n=i?Reflect.construct(a,arguments,(0,u.Z)(this).constructor):a.apply(this,arguments),(0,s.Z)(this,n)});function m(){var n;return(0,a.Z)(this,m),(n=h.call(this)).TAG="XGVideo",n._proxyProps(),n._isLive=!0,n._vMeta=null,n._aMeta=null,n._resizeObserver=null,n._eventsBackup=[],n._domConnected=!1,n._hevc="h265"===(0,_.tT)().preloadDecoder,!n._hevc&&(n._degradeVideo=document.createElement("video")),n._onTouchEnd=n._onTouchEnd.bind((0,l.Z)(n)),n.analyse=new Z.Z,n}return(0,d.Z)(m,[{key:"_proxyProps",value:function(){var n=this;Object.getOwnPropertyNames(m.prototype).forEach(function(r){/^__/.test(r)&&Object.defineProperty(n,r.replace("__",""),{get:function(){try{return this[r]}catch(n){}return 0},set:function(n){try{this[r]=n}catch(n){}}})})}},{key:"addEventListener",value:function(n,r,i){(0,f.Z)((0,u.Z)(m.prototype),"addEventListener",this).call(this,n,r,i),this._degradeVideo&&this._eventsBackup.push([n,r,i])}},{key:"removeEventListener",value:function(n,r,i){(0,f.Z)((0,u.Z)(m.prototype),"removeEventListener",this).call(this,n,r,i),this._degradeVideo&&(this._eventsBackup=this._eventsBackup.filter(function(a){return!(a.eventName===n&&a.handler===r&&a.capture===i)}))}},{key:"setAttribute",value:function(n,r){var i;(0,f.Z)((0,u.Z)(m.prototype),"setAttribute",this).call(this,n,r),"src"!==n&&(null===(i=this._degradeVideo)||void 0===i||i.setAttribute(n,r))}},{key:"_init",value:function(){this.analyse.reset(),this.timeline=new M({volume:this.volume,canvas:this.querySelector("canvas"),videoContext:this.videoContext,videoDecode:this.videoDecode,maxVideoHeight:this.getAttribute("maxVideoHeight"),endLevel:parseInt(this.getAttribute("endLevel"))},this),g.kg.log(this.TAG,"timeline init"),this._noSleep=new p.Z,this._logFirstFrame=!1,this._playRequest=null,this._degradeVideoUserGestured=!1,this._bindEvents(),this._vMeta&&!this.videoDecode&&this.setVideoMeta(this._vMeta),this._glCtxOptions&&(this.glCtxOptions=this._glCtxOptions),this.timeline&&(this.innerDegrade&&this.timeline.emit(w.ZP.TIMELINE.INNER_DEGRADE),this.timeline.emit(w.ZP.TIMELINE.SET_PLAY_MODE,this._isLive?"LIVE":"VOD"),this.timeline.emit(w.ZP.TIMELINE.SET_PLAYBACKRATE,this.playbackRate),this.muted=this.muted)}},{key:"_bindEvents",value:function(){var n=this;this.timeline.on(w.ZP.TIMELINE.PLAY_EVENT,function(r,i){var a,o;if(r===w.NW.LOADEDDATA&&(!n.querySelector("canvas")&&(g.kg.log(n.TAG,"_bindEvents, appendChild canvas"),n.appendChild(n.canvas)),n.canvas.style.display="block",null===(o=n.timeline)||void 0===o||o.emit(w.ZP.TIMELINE.SET_PLAYBACKRATE,n.playbackRate)),(r===w.NW.RESIZE&&null!==(a=n.timeline)&&void 0!==a&&a.ready||r===w.NW.CANVAS_LAYOUT)&&Promise.resolve().then(function(){n.updateVideoPostion()}),r===w.NW.ERROR){if(g.kg.warn(n.TAG,"detect error:",null==i?void 0:i.message),n.pause(),n._disabled(!0),n.innerDegrade||5===n.decoderMode){n.degradeInfo={decodeFps:n.decodeFps,bitrate:n.bitrate,wasmInitCost:n.wasmInitCost,fps:n.fps,url:n.src,msg:null==i?void 0:i.message,decoderMode:n.decoderMode},n._innerDispatchEvent("lowdecode");return}n._err=i}if(r===w.NW.LOW_DECODE){n._disabled(),n.degradeInfo={decodeFps:n.decodeFps,bitrate:n.bitrate,wasmInitCost:n.wasmInitCost,fps:n.fps,url:n.src,decoderMode:n.decoderMode},n._innerDispatchEvent(w.R_[r],n.degradeInfo);return}if(r===w.NW.LARGE_AV_GAP&&(n.unsyncInfo=i),r===w.NW.ENDED){if(n.paused)return;n.pause()}r===w.NW.PROGRESS&&n._noSleep.toPlay(),r===w.NW.WAITING&&n.analyse.addWaiting(),r===w.NW.SEEKING&&n.analyse.addSeeking(),r===w.NW.SEEKED&&n.analyse.addSeeked(),n._innerDispatchEvent(w.R_[r],i)})}},{key:"_disabled",value:function(n){if(!!this.innerDegrade||!!n){if(n){if((0,_.tT)().evaluateVVCount){(0,y.Dd)();return}(0,y.DO)(1);return}if(!(0,_.tT)().evaluateVVCount){if(this.decodeFps/this.fps<=.6&&this.bitrate<2e6){(0,y.DO)(1);return}(0,y.DO)(2)}}}},{key:"degrade",value:function(n){var r=this;this.querySelector("canvas")?this.replaceChild(this._degradeVideo,this.canvas):this.appendChild(this._degradeVideo),this.destroy(),this._eventsBackup.forEach(function(n){var i,a=(0,c.Z)(n,3),o=a[0],s=a[1],d=a[2];(0,f.Z)((0,u.Z)(m.prototype),"removeEventListener",r).call(r,o,s,d),null===(i=r._degradeVideo)||void 0===i||i.addEventListener(o,s,d)}),this._eventsBackup=[],n&&(this._degradeVideo.muted=!1,this._degradeVideo.src=n,this._degradeVideo.load())}},{key:"disconnectedCallback",value:function(){if(this._domConnected=!1,g.kg.log(this.TAG,"video disconnected"),document.removeEventListener("touchend",this._onTouchEnd,!0),this.querySelector("canvas"))try{this.removeChild(this.querySelector("canvas")),g.kg.log(this.TAG,"remove canvas child")}catch(n){}this.destroy(!0),this._resizeObserver&&this._resizeObserver.disconnect(this)}},{key:"connectedCallback",value:function(){var n,r,i,a=this;if((null===(n=this.childNodes[0])||void 0===n?void 0:null===(r=n.tagName)||void 0===r?void 0:null===(i=r.toLocaleLowerCase)||void 0===i?void 0:i.call(r))==="source"){(0,y.Dd)();var o=Error("not supported source type");o.code=3,this._err=o,this._innerDispatchEvent("error",o);return}g.kg.log(this.TAG,"video connected to document",performance.now()),!this.timeline&&this._init(),this.style.width="100%",this.style.height="100%",this.style.position="absolute",this.style.left="0px",this.style.top="0px",document.addEventListener("touchend",this._onTouchEnd,!0),ResizeObserver&&(this._resizeObserver=new ResizeObserver(function(n){var r;null!==(r=a.timeline)&&void 0!==r&&r.ready&&a.updateVideoPostion()}),this._resizeObserver.observe(this)),this._domConnected=!0}},{key:"_onTouchEnd",value:function(){(0,v.fC)(),this._degradeVideoInteract(),this._noSleep&&this._noSleep.enable()}},{key:"_degradeVideoInteract",value:function(){var n=this;if(this._degradeVideo&&(1===this.innerDegrade||3===this.innerDegrade)){if(this._degradeVideoUserGestured)return;var r=this._degradeVideo.play();r&&r.then(function(){n._degradeVideo.pause(),n._degradeVideoUserGestured=!0}).catch(function(n){})}}},{key:"play",value:function(n){var r=this;if(!this.timeline)return new Promise(function(n){setTimeout(function(){n()},800)});g.kg.log(this.TAG,"play() called, ready:".concat(this.timeline.ready,", paused:").concat(this.timeline.paused,", force:").concat(n)),this._degradeVideoInteract();var i=0;if(this.timeline.ready&&this.timeline.paused||n){if(n=n||this._isLive,this._playRequest=null,!n)return this.timeline.emit(w.ZP.TIMELINE.DO_PLAY),this._innerDispatchEvent("play"),Promise.resolve();this.destroy(),this._init(),i=setTimeout(function(){try{r._innerDispatchEvent("waiting")}catch(n){}},300)}return this._playRequest||!this.timeline.ready||this.timeline.paused?(g.kg.log(this.TAG,"request play!"),this._playRequest=this._playRequest||new Promise(function(n,a){r.timeline._paused=!1,r._innerDispatchEvent("play"),r._noSleep.enable(),r.timeline.once("ready",function(){g.kg.log(r.TAG,"timeline emit ready"),clearTimeout(i),r.timeline.play().then(n).catch(a).finally(function(){r._playRequest=null})})}),this._playRequest):Promise.resolve()}},{key:"pause",value:function(){this._playRequest=null,this.timeline&&this.timeline.pause();try{this._noSleep.disable(),(0,v.BR)()}catch(n){}}},{key:"load",value:function(){}},{key:"appendBuffer",value:function(n,r){if(this.timeline&&!this._err){if(!this._logFirstFrame){var i=n&&n.samples[0],a=r&&r.samples[0];if(!i&&!a)return;if(i||a){var o=(null==n?void 0:n.duration)/((null==n?void 0:n.formatTimescale)||1/0),s=(null==r?void 0:r.duration)/((null==r?void 0:r.formatTimescale)||1/0);g.kg.warn(this.TAG,"video firstDts:".concat(i&&i.dts," , audio firstDts:").concat(a&&a.dts," videoTrack.duration=").concat(o,", audioTrack.duration=").concat(s)),this._logFirstFrame=!0,(o||s)&&(this.setPlayMode("VOD"),this.timeline.emit(w.ZP.TIMELINE.SET_PLAY_MODE,this._isLive?"LIVE":"VOD"),this.duration=Math.min(o||s,s||o)),this.analyse.addFirstData()}this.lowlatency&&(g.kg.warn(this.TAG,"single track! type=",U.LOW_LATENCY),this.timeline.emit(w.ZP.TIMELINE.SINGLE_TRACK,U.LOW_LATENCY)),!r.exist()&&(g.kg.warn(this.TAG,"single track! type=",U.NO_AUDIO),this.timeline.emit(w.ZP.TIMELINE.SINGLE_TRACK,U.NO_AUDIO)),!n.exist()&&(g.kg.warn(this.TAG,"single track! type=",U.NO_VIDEO),this.timeline.emit(w.ZP.TIMELINE.SINGLE_TRACK,U.NO_VIDEO))}n.formatTimescale&&n.samples.forEach(function(r){r.dts=Math.floor(r.dts/n.formatTimescale*1e3),r.pts=Math.floor(r.pts/n.formatTimescale*1e3)}),r.formatTimescale&&r.samples.forEach(function(n){n.dts=Math.floor(n.dts/r.formatTimescale*1e3),n.pts=Math.floor(n.pts/r.formatTimescale*1e3)}),this.timeline.appendBuffer(n,r)}}},{key:"setAudioMeta",value:function(n){this._aMeta=n,this.timeline.emit(w.ZP.TIMELINE.SET_METADATA,"audio",n)}},{key:"setVideoMeta",value:function(n){(this._isLive||!this._vMeta)&&(this.timeline.emit(w.ZP.TIMELINE.SET_METADATA,"video",n),this._vMeta=n)}},{key:"setDecodeMode",value:function(n){this.setAttribute("decodeMode",n)}},{key:"setPlayMode",value:function(n){this._isLive="LIVE"===n}},{key:"endOfStream",value:function(){var n;this.currentTime&&(null===(n=this.timeline)||void 0===n||n.emit(w.ZP.TIMELINE.END_OF_STREAM))}},{key:"updateVideoPostion",value:function(){var n;null===(n=this.timeline)||void 0===n||n.emit(w.ZP.VIDEO.UPDATE_VIDEO_FILLTYPE,this.xgfillType,this.containerLayout)}},{key:"_innerDispatchEvent",value:function(n,r){this.dispatchEvent(new CustomEvent(n,{detail:r}))}},{key:"destroy",value:function(n){this.timeline&&(this._noSleep.destroy(),g.kg.log(this.TAG,"call destroy"),this.timeline.emit(w.ZP.TIMELINE.DESTROY,n),this.querySelector("video")&&this.removeChild(this.querySelector("video")),this.timeline=null,this._err=null,this._noSleep=null,this._eventsBackup=[])}},{key:"updateObjectPosition",value:function(n,r){this.timeline.emit(w.ZP.VIDEO.UPDATE_VIDEO_COVER_POSITION,this.containerLayout,n,r),this._degradeVideo&&(this._degradeVideo.style.objectPosition="".concat(100*n,"% ").concat(100*r,"%"))}},{key:"setVideoDecode",value:function(){g.kg.log(this.TAG,"set videoDecode",this.videoDecode),this.videoDecode&&this.timeline&&this.timeline.videoRender&&(this.timeline.videoRender.videoDecode=this.videoDecode)}},{key:"live",get:function(){return this._isLive}},{key:"lowlatency",get:function(){return"true"===this.getAttribute("lowlatency")},set:function(n){this.setAttribute("lowlatency",n)}},{key:"autoplay",get:function(){return"true"===this.getAttribute("autoplay")},set:function(n){this.setAttribute("autoplay",n)}},{key:"__canvas",get:function(){return this.timeline.canvas}},{key:"__ended",get:function(){return .5>Math.abs(this.currentTime-this.duration)}},{key:"__width",get:function(){return this.getAttribute("width")||this.videoWidth},set:function(n){this.setAttribute("width","number"==typeof n?"".concat(n,"px"):n),this.canvas.width=n}},{key:"__height",get:function(){return this.getAttribute("height")},set:function(n){this.setAttribute("height","number"==typeof n?"".concat(n,"px"):n),this.canvas.height=n}},{key:"__videoWidth",get:function(){return this.canvas.width}},{key:"__videoHeight",get:function(){return this.canvas.height}},{key:"__volume",get:function(){return Number(this.getAttribute("volume"))},set:function(n){n<=0&&(n=0),n>=1&&(n=1),this.setAttribute("volume",n),!this.muted&&this.timeline.emit(w.ZP.TIMELINE.UPDATE_VOLUME,n)}},{key:"__muted",get:function(){return"true"===this.getAttribute("muted")},set:function(n){this.setAttribute("muted",n),this._degradeVideoInteract(),this._noSleep.enable(),this.timeline.emit(w.ZP.TIMELINE.UPDATE_VOLUME,n?0:this.volume)}},{key:"__currentTime",get:function(){return this.timeline?Math.min(this.timeline.currentTime,this.timeline.duration):0},set:function(n){this._seek(n)}},{key:"_seek",value:function(n){this.timeline&&(!this.buffered.length&&this.play(),this.paused&&!this._isLive&&n<1&&this.play(),this.timeline.seek(Number(n)))}},{key:"__duration",get:function(){return this._isLive?1/0:this.timeline.duration},set:function(n){this.timeline.emit(w.ZP.TIMELINE.SET_VIDEO_DURATION,n),this._innerDispatchEvent("durationchange")}},{key:"__seeking",get:function(){return this.timeline.seeking}},{key:"__paused",get:function(){return this.timeline.paused}},{key:"__fps",get:function(){return this.timeline.fps}},{key:"__decodeFps",get:function(){return this.timeline.decodeFps}},{key:"__decodeCost",get:function(){return parseInt(this.timeline.decodeCost)}},{key:"__renderCost",get:function(){return this.timeline.renderCost}},{key:"__wasmInitCost",get:function(){return this.timeline.wasmInitCost}},{key:"__totalSize",get:function(){return this.timeline.totalSize}},{key:"__bitrate",get:function(){return this.timeline.bitrate}},{key:"__gopLength",get:function(){return this.timeline.gopLength}},{key:"__readyState",get:function(){return this.timeline.readyState}},{key:"__buffered",get:function(){return this.timeline.buffered}},{key:"__decoderMode",get:function(){return this.timeline.decoderMode}},{key:"src",get:function(){var n;return this.getAttribute("src")||(null===(n=this.childNodes[0])||void 0===n?void 0:n.src)||""},set:function(n){g.kg.log(this.TAG,"set src ",n),this.setAttribute("src",n),this._vMeta=null,(!this._domConnected||this.buffered.length)&&(this.play(!0),!this.timeline&&this._init()),this._innerDispatchEvent("loadstart"),(0,y.X2)()}},{key:"currentSrc",get:function(){var n;return this.getAttribute("src")||(null===(n=this.childNodes[0])||void 0===n?void 0:n.src)||""}},{key:"playbackRate",get:function(){return parseFloat(this.getAttribute("playbackrate")||1)},set:function(n){var r;this.setAttribute("playbackrate",n),null===(r=this.timeline)||void 0===r||r.emit(w.ZP.TIMELINE.SET_PLAYBACKRATE,n)}},{key:"networkState",get:function(){return 1}},{key:"preloadTime",get:function(){var n=this.getAttribute("preloadtime");if(n){var r=Number.parseFloat(n);if(r>0&&!Number.isNaN(r))return r}return 1/0},set:function(n){n&&Number(n)>0&&this.setAttribute("preloadtime",n)}},{key:"innerDegrade",get:function(){return parseInt(this.getAttribute("innerdegrade"))}},{key:"__glCtxOptions",set:function(n){this._glCtxOptions=n,this.timeline.emit(w.ZP.TIMELINE.UPDATE_GL_OPTIONS,n)}},{key:"__error",get:function(){return this._err},set:function(n){this.timeline.emit(w.ZP.TIMELINE.PLAY_EVENT,w.NW.ERROR,n)}},{key:"degradeVideo",get:function(){return this._degradeVideo}},{key:"degradeInfo",get:function(){return this._deradeInfo},set:function(n){this._deradeInfo=n}},{key:"unsyncInfo",get:function(){return this._unsyncInfo},set:function(n){this._unsyncInfo=n}},{key:"xgfillType",get:function(){return this.parentNode.getAttribute("data-xgfill")}},{key:"containerLayout",get:function(){var n=this.parentNode;return{width:n.clientWidth,height:n.clientHeight}}},{key:"videoDecode",get:function(){return"7"===this.getAttribute("decodeMode")}},{key:"audioMedia",get:function(){var n,r;return null===(n=this.timeline)||void 0===n?void 0:null===(r=n.audioRender)||void 0===r?void 0:r.media}},{key:"audioMediaCache",get:function(){var n,r;return(null===(n=this.timeline)||void 0===n?void 0:null===(r=n.audioRender)||void 0===r?void 0:r._mediaCache)||[]}},{key:"getStats",value:function(){return this.analyse.getStats(this)}},{key:"getSeekElapses",value:function(){return this.analyse.seekElapses()}},{key:"disabledDegrade",value:function(){m.forceCanUse=!0,m.cleanDisabled()}},{key:"cleanDisabledCache",value:function(){(0,y.J2)()}},{key:"dump",value:function(){var n=this.buffered;return Array(n.length).fill(0).map(function(r,i){return[n.start(i),n.end(i)]})}}],[{key:"version",get:function(){return"0.1.6-next.27"}},{key:"init",value:function(n){var r=n.h264Url,i=n.h264AsmUrl,a=n.h265AsmUrl,o=n.h265Url,s=n.h265ThreadUrl,u=n.h265SimdUrl;m.h264Url=r||m.h264Url,m.h265Url=o||m.h265Url,m.h265AsmUrl=a||m.h265AsmUrl,m.h264AsmUrl=i||m.h264AsmUrl,m.h265ThreadUrl=s||m.h265ThreadUrl,m.h265SimdUrl=u||m.h265SimdUrl}},{key:"getDecodeCapacity",value:function(){return(0,_.tT)()}},{key:"getDeviceCapacity",value:function(){return(0,_.MP)()}},{key:"setDecodeCapacity",value:function(n){(0,_.rM)(n),n.preloadDecoder&&V.Z.genDecoder().catch(function(){})}},{key:"genDecoder",value:function(n){return V.Z.genDecoder(n)}},{key:"cleanDisabled",value:function(){(0,y.J2)()}},{key:"isSupported",value:function(){return!!(0,_.lF)()&&(!!m.forceCanUse||!1===(0,y.mt)())}}]),m}("undefined"!=typeof HTMLElement?HTMLElement:function(){});(0,h.Z)(F,"decoderCache",V.Z);F.init({h264Url:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/decoder/1.1.1/h264/decoder.js",h264AsmUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/decoder/1.1.1/h264/decoder_asm.js",h265Url:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/base/decoder.js",h265SimdUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/high/decoder_1656041798666.js",h265ThreadUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/main/decoder.js",h265AsmUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/high/decoder_asm.js"}),F.setEleName=function(n){(0,_.HX)(n);var r=function(n){(0,o.Z)(d,n);var r,i,c=(r=d,i=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}(),function(){var n,a=(0,u.Z)(r);return n=i?Reflect.construct(a,arguments,(0,u.Z)(this).constructor):a.apply(this,arguments),(0,s.Z)(this,n)});function d(){return(0,a.Z)(this,d),c.apply(this,arguments)}return d}(F);"undefined"!=typeof customElements&&(customElements.get((0,_.mv)())||customElements.define((0,_.mv)(),r))};try{"undefined"!=typeof customElements&&(customElements.get((0,_.mv)())||customElements.define((0,_.mv)(),F))}catch(n){}},187295:function(n,r,i){"use strict";i.d(r,{S:function(){return u}});var a=i(874838),o=i(758698);i(429532),i(743465),i(511141),i(110617),i(917064),i(329913),i(868352),i(17322),i(63249),i(950665),i(180138),i(911234),i(387605),i(936097),i(786120),i(339597),i(877193),i(391375),i(632637),i(645524),i(800599),i(69896),i(660999),i(12946),i(416555),i(747644),i(404948),i(789680),i(792315);var s=i(675161),u=function(){function n(r,i){(0,a.Z)(this,n),this.TAG="FrameRender",this.configs=Object.assign({},r),this.parent=i,this.canvas=this.configs.canvas,this.meta=Object.assign({},this.configs.meta),this._initMeta(),this._initContextGL(),this.contextGL&&(this._initProgram(),this._initBuffers(),this._initTextures())}return(0,o.Z)(n,[{key:"_initMeta",value:function(){this.chroma=this.meta.chromaFormat,this.height=this.meta.height,this.width=this.meta.width,(this.canvas.width!==this.meta.width||this.canvas.height!==this.meta.height)&&(this.canvas.width=this.meta.width,this.canvas.height=this.meta.height,this.parent.emitResizeEvent())}},{key:"_initContextGL",value:function(){if("2d"===this.configs.type){this.ctx=this.canvas.getContext("2d");return}for(var n=this.canvas,r=null,i=["webgl","experimental-webgl","moz-webgl","webkit-3d"],a=0;!r&&a<i.length;){var o=i[a];try{r=n.getContext(o,this.configs.glCtxOptions),s.kg.log("FrameRender","use=",o,this.configs.glCtxOptions);break}catch(n){r=null}(!r||"function"!=typeof r.getParameter)&&(r=null),++a}this.contextGL=r}},{key:"_initProgram",value:function(){var n,r,i=this.contextGL;n="attribute vec4 vertexPos;\nattribute vec4 texturePos;\nattribute vec4 uTexturePos;\nattribute vec4 vTexturePos;\nvarying vec2 textureCoord;\nvarying vec2 uTextureCoord;\nvarying vec2 vTextureCoord;\nvoid main()\n{\n  gl_Position = vertexPos;\n  textureCoord = texturePos.xy;\n  uTextureCoord = uTexturePos.xy;\n  vTextureCoord = vTexturePos.xy;\n}",r="precision highp float;\nvarying highp vec2 textureCoord;\nvarying highp vec2 uTextureCoord;\nvarying highp vec2 vTextureCoord;\nuniform sampler2D ySampler;\nuniform sampler2D uSampler;\nuniform sampler2D vSampler;\nuniform mat4 YUV2RGB;\nvoid main(void) {\n  highp float y = texture2D(ySampler,  textureCoord).r;\n  highp float u = texture2D(uSampler,  uTextureCoord).r;\n  highp float v = texture2D(vSampler,  vTextureCoord).r;\n  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;\n}";var a=i.createShader(i.VERTEX_SHADER);i.shaderSource(a,n),i.compileShader(a),i.getShaderParameter(a,i.COMPILE_STATUS);var o=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(o,r),i.compileShader(o),i.getShaderParameter(o,i.COMPILE_STATUS);var s=i.createProgram();i.attachShader(s,a),i.attachShader(s,o),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS),i.useProgram(s);var u=i.getUniformLocation(s,"YUV2RGB");i.uniformMatrix4fv(u,!1,[1.16438,0,1.59603,-.87079,1.16438,-.39176,-.81297,.52959,1.16438,2.01723,0,-1.08139,0,0,0,1]),this.shaderProgram=s}},{key:"_initBuffers",value:function(){var n=this.contextGL,r=this.shaderProgram,i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),n.STATIC_DRAW);var a=n.getAttribLocation(r,"vertexPos");n.enableVertexAttribArray(a),n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0);var o=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),n.STATIC_DRAW);var s=n.getAttribLocation(r,"texturePos");n.enableVertexAttribArray(s),n.vertexAttribPointer(s,2,n.FLOAT,!1,0,0),this.texturePosBuffer=o;var u=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,u),n.bufferData(n.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),n.STATIC_DRAW);var c=n.getAttribLocation(r,"uTexturePos");n.enableVertexAttribArray(c),n.vertexAttribPointer(c,2,n.FLOAT,!1,0,0),this.uTexturePosBuffer=u;var d=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,d),n.bufferData(n.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),n.STATIC_DRAW);var l=n.getAttribLocation(r,"vTexturePos");n.enableVertexAttribArray(l),n.vertexAttribPointer(l,2,n.FLOAT,!1,0,0),this.vTexturePosBuffer=d}},{key:"_initTextures",value:function(){var n=this.contextGL,r=this.shaderProgram,i=this._initTexture(),a=n.getUniformLocation(r,"ySampler");n.uniform1i(a,0),this.yTextureRef=i;var o=this._initTexture(),s=n.getUniformLocation(r,"uSampler");n.uniform1i(s,1),this.uTextureRef=o;var u=this._initTexture(),c=n.getUniformLocation(r,"vSampler");n.uniform1i(c,2),this.vTextureRef=u,n.pixelStorei(n.UNPACK_ALIGNMENT,1)}},{key:"_initTexture",value:function(){var n=this.contextGL,r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),r}},{key:"_drawPictureGL",value:function(n,r,i,a,o){var s=a*i,u=o*i/2;(444===this.chroma||422===this.chroma)&&(u*=2);var c={yData:(n=new Uint8Array(n)).subarray(0,s),uData:n.subarray(s,s+u),vData:n.subarray(s+u,s+u+u)};this._drawPictureGL420(c,r,i,a,o)}},{key:"_drawPictureGL420",value:function(n,r,i,a,o){var s=this.contextGL,u=this.texturePosBuffer,c=this.uTexturePosBuffer,d=this.vTexturePosBuffer,l=this.yTextureRef,f=this.uTextureRef,h=this.vTextureRef,p=n.yData,v=n.uData,g=n.vData,_=i/2;(422===this.chroma||444===this.chroma)&&(_=i);var y=_,m=this.canvas.width/this.width,b=this.canvas.height/this.height,A=0,I=0,k=this.canvas.width,E=this.canvas.height;m<b?(E=this.height*this.canvas.width/this.width,I=parseInt((this.canvas.height-this.height*this.canvas.width/this.width)/2)):(k=this.width*this.canvas.height/this.height,A=parseInt((this.canvas.width-this.width*this.canvas.height/this.height)/2)),s.viewport(A,I,k,E);var T=new Float32Array([1,0,0,0,1,1,0,1]);s.bindBuffer(s.ARRAY_BUFFER,u),s.bufferData(s.ARRAY_BUFFER,T,s.DYNAMIC_DRAW);var S=new Float32Array([1,0,0,0,1,1,0,1]);s.bindBuffer(s.ARRAY_BUFFER,c),s.bufferData(s.ARRAY_BUFFER,S,s.DYNAMIC_DRAW);var C=new Float32Array([1,0,0,0,1,1,0,1]);s.bindBuffer(s.ARRAY_BUFFER,d),s.bufferData(s.ARRAY_BUFFER,C,s.DYNAMIC_DRAW),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,a,i,0,s.LUMINANCE,s.UNSIGNED_BYTE,p),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,f),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,o,_,0,s.LUMINANCE,s.UNSIGNED_BYTE,v),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,h),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,o,y,0,s.LUMINANCE,s.UNSIGNED_BYTE,g),s.drawArrays(s.TRIANGLE_STRIP,0,4)}},{key:"_drawPicture2d",value:function(n){if(!!n){if(this.canvas){!this.ctx&&(this.ctx=this.canvas.getContext("2d"));var r=n.displayWidth||n.width,i=n.displayHeight||n.height;(this.canvas.height!==i||this.canvas.width!==r)&&(this.canvas.height=i,this.canvas.width=r);try{this.ctx.drawImage(n.dom||n,0,0,r,i)}catch(n){}}}}},{key:"_resize",value:function(n,r){(this.width!==n||this.height!==r)&&(this.width=n,this.height=r,this.canvas.width=n,this.canvas.height=r,this.parent.emitResizeEvent())}},{key:"render",value:function(n,r,i,a,o){this._resize(r,i),this.contextGL?this._drawPictureGL(n,r,i,a,o):this._drawPicture2d(n)}},{key:"resetMeta",value:function(n){this.meta=Object.assign({},n)}},{key:"updateBind",value:function(n,r){this.parent=n,this.resetMeta(r)}},{key:"destroy",value:function(){this.parent=null,this.canvas.style.display="none",this.canvas&&(this.canvas.glInstance=null,this.canvas=null)}}]),n}()},608394:function(n,r,i){"use strict";i.d(r,{Z:function(){return u}});var a=i(874838),o=i(758698);i(981168),i(891555),i(836654),i(691842),i(742611),i(499953),i(511141),i(110617),i(792315),i(329913),i(868352),i(17322),i(63249),i(950665),i(180138),i(911234),i(387605),i(936097),i(786120),i(339597),i(877193),i(391375),i(632637),i(645524),i(800599),i(69896),i(660999),i(12946),i(416555),i(747644),i(404948),i(789680),i(465132);var s=i(675161),u=function(){function n(r){(0,a.Z)(this,n),this.TAG="VideoTimeRange",this._parent=r,this._baseDts=0,this._lastDuration=0,this._duration=0,this._bitrate=0,this._totalSize=0,this._buffers=[],this._currentFrameQueue=[],this._frameIndexInQueue=0,this._delayEstimateList=[],this._keyframeQueue=[]}return(0,o.Z)(n,[{key:"isLive",get:function(){return this._parent.isLive}},{key:"baseDts",get:function(){return this._baseDts}},{key:"duration",get:function(){return this._duration},set:function(n){this._duration=n}},{key:"buffered",get:function(){var n=this;if(this.isLive)return{length:this._duration?1:0,start:function(){return 0},end:function(){return n._duration}};var r=this._mergeBufferRanges();return{length:r.length,start:function(n){var i=r[n];return i?i.start:0},end:function(n){var i=r[n];return i?i.end:1/0}}}},{key:"bufferStart",get:function(){var n;return(null===(n=this._buffers[0])||void 0===n?void 0:n.start)||0}},{key:"frameLength",get:function(){return this._currentFrameQueue.length}},{key:"keyFrameLength",get:function(){return this._keyframeQueue.length}},{key:"totalSize",get:function(){return this._totalSize}},{key:"bitrate",get:function(){return this._bitrate},set:function(n){this._bitrate=n}},{key:"lastDuration",get:function(){return this._lastDuration}},{key:"frames",get:function(){return this._currentFrameQueue}},{key:"getCurrentTime",value:function(n){return this._lastDuration+(n-this._baseDts)/1e3}},{key:"resetDts",value:function(n){this._baseDts=n}},{key:"_mergeBufferRanges",value:function(){var n=this._buffers.slice().sort(function(n,r){return n.start>r.start?1:-1}),r=n.length,i=[];if(!r)return i;for(var a={start:n[0].start,end:n[0].end},o=1;o<r;o++){var s=n[o];.1>Math.abs(a.end-s.start)?a.end=s.end:s.end>a.end&&(i.push(a),a={start:s.start,end:s.end})}return i.push(a),i}},{key:"_caclBaseDts",value:function(n){if(-1===this._baseDts)n&&(this._baseDts=n.dts,s.kg.log(this.TAG,"set baseDts: ",this._baseDts,"frame len:",this._currentFrameQueue.length))}},{key:"_updateDuration",value:function(n){for(var r=n.length,i=n[r-1],a=0;a<r;a++){var o=n[a];if(o&&o.options&&o.options.meta){var u=n[a-1]||this._currentFrameQueue[this._currentFrameQueue.length-1];u?this._lastDuration+=(u.dts-this._baseDts)/1e3:this._lastDuration=this._duration,s.kg.log(this.TAG,"updateBaseDts,record lastDuration:",this._lastDuration),this._baseDts=o.dts;break}}i&&(this._duration=(i.dts-this._baseDts)/1e3+this._lastDuration)}},{key:"_estimateBitRate",value:function(n){var r=n.length;if(r<=2){if(this._delayEstimateList=this._delayEstimateList.concat(n),(r=this._delayEstimateList.length)<=30)return;n=this._delayEstimateList,this._delayEstimateList=[]}for(var i=0,a=0;a<r;a++){var o=n[a];i+=o.data?o.data.length:o.units.reduce(function(n,r){return n+r.byteLength},0)}this._totalSize+=i;var s=i/(n[r-1].dts-n[0].dts);this._bitrate=parseInt(8e3*s)}},{key:"_beforeAppendVodBuffer",value:function(n){var r=this;if(n.length){for(var i=[],a=[],o=0,s=n.length;o<s;o++)n[o].keyframe&&(i.push(a),a=[]),a.push(n[o]);a.length&&i.push(a),i.forEach(function(n){return r._appendVodBuffer(n)})}}},{key:"_appendVodBuffer",value:function(n){if(!!n.length){var r=n[0],i=n[n.length-1],a=(r.dts-this._baseDts)/1e3,o=(i.dts-this._baseDts)/1e3;s.kg.enable&&s.kg.log(this.TAG,"add new buffer range [".concat(a," , ").concat(o,"]")),!this._buffers.filter(function(n){return a>=n.start&&o<=n.end}).length&&(this._buffers.push({start:a,end:o,duartion:o-a,frames:n.slice()}),this._buffers.sort(function(n,r){return n.start>r.start?1:-1}),this._afterAppendVodBuffer())}}},{key:"_afterAppendVodBuffer",value:function(){var n;if(this._buffers.filter(function(n){var r;return!(null!==(r=n.frames[0])&&void 0!==r&&r.keyframe)}).length){for(var r=this._buffers,i=this._buffers.length,a=[],o=this._buffers[0],s=1;s<i;s++)null!==(n=r[s].frames[0])&&void 0!==n&&n.keyframe?(a.push(o),o=r[s]):(o.frames=o.frames.concat(r[s].frames),o.end=r[s].end,o.duartion=o.end-o.start);a.push(o),this._buffers=a}}},{key:"_recordKeyframes",value:function(n){var r=this;n.forEach(function(n){if(n.keyframe){var i=(n.dts-r._baseDts)/1e3;r._keyframeQueue.push({position:i,frame:n})}}),this._keyframeQueue=this._keyframeQueue.sort(function(n,r){return n.position>r.position?1:-1}),this.isLive&&this._keyframeQueue.length>40&&this._keyframeQueue.splice(0,20)}},{key:"toAnnexBNalu",value:function(n){n.forEach(function(n){var r=n.units;if(r){var i=new Uint8Array(r.reduce(function(n,r){return n+4+r.byteLength},0)),a=0;r.forEach(function(n){i.set([0,0,0,1],a),a+=4,i.set(n,a),a+=n.byteLength}),r=null,n.units=null,n.data=i}})}},{key:"append",value:function(n,r,i){if(i&&this.toAnnexBNalu(n),this._caclBaseDts(n[0]),r&&this._updateDuration(n),this._estimateBitRate(n),this._recordKeyframes(n),this.isLive){this._currentFrameQueue=this._currentFrameQueue.concat(n);return}this._beforeAppendVodBuffer(n)}},{key:"updateSegmentEnd",value:function(n){var r=this._buffers[this._buffers.length-1];if(!!r)!(.5>Math.abs(r.end-n))&&(r.end=n,r.duartion=n-r.start,s.kg.log(this.TAG,"video data lack, reset end:",n))}},{key:"getFrame",value:function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isLive)return this._currentFrameQueue.shift();if(!(n=this._currentFrameQueue[this._frameIndexInQueue])){if(!(n=this._currentFrameQueue[--this._frameIndexInQueue])||!this.switchBuffer((n.dts-this._baseDts)/1e3,this._frameIndexInQueue++,r))return;return this.getFrame(++r)}return this._frameIndexInQueue++,n}},{key:"getFramesForPreciseSeek",value:function(n){return this._currentFrameQueue.filter(function(r){return r.dts<=n})}},{key:"updateFrameIndexForPreciseSeek",value:function(n){this._frameIndexInQueue=n}},{key:"switchBuffer",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i>=20)){n=n||this.bufferStart;var a=this._buffers.filter(function(r){return r.start<n+.1&&r.end>=n+.1})[0];if(!a){var o=this._buffers.find(function(r){return r.start>=n});return o&&o.start-n<1?(this._currentFrameQueue=o.frames.slice(0),this._frameIndexInQueue=0,o):void 0}if(a.frames[0].dts/1e3>=n)return this._currentFrameQueue=a.frames.slice(0),this._frameIndexInQueue=0,s.kg.log(this.TAG,"switch video buffer, time:".concat(n," , buffer:[").concat(a.start," , ").concat(a.end,"], index=0")),a;if(a.frames.length>r)return this._currentFrameQueue=a.frames.slice(0),s.kg.log(this.TAG,"switch video buffer, in the same gop and more frame got, time:".concat(n," , buffer:[").concat(a.start," , ").concat(a.end,"], index=").concat(r)),a;s.kg.log(this.TAG,"switch video buffer, in the same gop and no more frame got, time:".concat(n," , buffer:[").concat(a.start," , ").concat(a.end,"], index=").concat(r))}}},{key:"getSeekStartPosition",value:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(this._keyframeQueue.forEach(function(i){i.position<=n&&(r=i)}),!!r){if(s.kg.warn(this.TAG,"getSeekStartPosition: ".concat(n,", position:").concat(r.position)),n-r.position<i)return r}}},{key:"getSeekStartPositionBehind",value:function(n,r){for(var i=0,a=this._keyframeQueue.length;i<a;i++){var o=this._keyframeQueue[i];if(o.position>=n)return s.kg.warn(this.TAG,"getSeekStartPositionBehind: ".concat(n,", position:").concat(o.position)),o}return this.getSeekStartPosition(n,r)}},{key:"nextFrame",value:function(){return this._currentFrameQueue[0]}},{key:"deletePassed",value:function(n){this._currentFrameQueue=this._currentFrameQueue.filter(function(r){return r.dts>=n})}},{key:"getDtsOfTime",value:function(n){var r=n-this._lastDuration;return this._baseDts+1e3*r}},{key:"clean",value:function(){this._currentFrameQueue=[]}},{key:"destroy",value:function(){this._currentFrameQueue=[],this._buffers=[]}}]),n}()},320439:function(n,r,i){"use strict";i.d(r,{Kd:function(){return _},Lc:function(){return y},PA:function(){return d},WY:function(){return m},XW:function(){return p},ZQ:function(){return b},Zj:function(){return o},_x:function(){return h},l5:function(){return s},qH:function(){return f},u:function(){return A},x:function(){return c}});function a(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),i.push.apply(i,a)}return i}function o(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?a(Object(i),!0).forEach(function(r){h(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}function s(){s=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(n,r,i){n[r]=i.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function l(n,r,i){return Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),n[r]}try{l({},"")}catch(n){l=function(n,r,i){return n[r]=i}}function f(n,r,i,o){var s=Object.create((r&&r.prototype instanceof v?r:v).prototype);return a(s,"_invoke",{value:function(n,r,i){var a="suspendedStart";return function(o,s){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===o)throw s;return x()}for(i.method=o,i.arg=s;;){var u=i.delegate;if(u){var c=function n(r,i){var a=i.method,o=r.iterator[a];if(void 0===o)return i.delegate=null,"throw"===a&&r.iterator.return&&(i.method="return",i.arg=void 0,n(r,i),"throw"===i.method)||"return"!==a&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+a+"' method")),p;var s=h(o,r.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var u=s.arg;return u?u.done?(i[r.resultName]=u.value,i.next=r.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,p):u:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,p)}(u,i);if(c){if(c===p)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var d=h(n,r,i);if("normal"===d.type){if(a=i.done?"completed":"suspendedYield",d.arg===p)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(a="completed",i.method="throw",i.arg=d.arg)}}}(n,i,new S(o||[]))}),s}function h(n,r,i){try{return{type:"normal",arg:n.call(r,i)}}catch(n){return{type:"throw",arg:n}}}n.wrap=f;var p={};function v(){}function g(){}function _(){}var y={};l(y,u,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(C([])));b&&b!==r&&i.call(b,u)&&(y=b);var A=_.prototype=v.prototype=Object.create(y);function I(n){["next","throw","return"].forEach(function(r){l(n,r,function(n){return this._invoke(r,n)})})}function k(n,r){var o;a(this,"_invoke",{value:function(a,s){function u(){return new r(function(o,u){!function a(o,s,u,c){var d=h(n[o],n,s);if("throw"!==d.type){var l=d.arg,f=l.value;return f&&"object"==typeof f&&i.call(f,"__await")?r.resolve(f.__await).then(function(n){a("next",n,u,c)},function(n){a("throw",n,u,c)}):r.resolve(f).then(function(n){l.value=n,u(l)},function(n){return a("throw",n,u,c)})}c(d.arg)}(a,s,o,u)})}return o=o?o.then(u,u):u()}})}function E(n){var r={tryLoc:n[0]};1 in n&&(r.catchLoc=n[1]),2 in n&&(r.finallyLoc=n[2],r.afterLoc=n[3]),this.tryEntries.push(r)}function T(n){var r=n.completion||{};r.type="normal",delete r.arg,n.completion=r}function S(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(E,this),this.reset(!0)}function C(n){if(n){var r=n[u];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,o=function r(){for(;++a<n.length;)if(i.call(n,a))return r.value=n[a],r.done=!1,r;return r.value=void 0,r.done=!0,r};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return g.prototype=_,a(A,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:g,configurable:!0}),g.displayName=l(_,d,"GeneratorFunction"),n.isGeneratorFunction=function(n){var r="function"==typeof n&&n.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,_):(n.__proto__=_,l(n,d,"GeneratorFunction")),n.prototype=Object.create(A),n},n.awrap=function(n){return{__await:n}},I(k.prototype),l(k.prototype,c,function(){return this}),n.AsyncIterator=k,n.async=function(r,i,a,o,s){void 0===s&&(s=Promise);var u=new k(f(r,i,a,o),s);return n.isGeneratorFunction(i)?u:u.next().then(function(n){return n.done?n.value:u.next()})},I(A),l(A,d,"Generator"),l(A,u,function(){return this}),l(A,"toString",function(){return"[object Generator]"}),n.keys=function(n){var r=Object(n),i=[];for(var a in r)i.push(a);return i.reverse(),function n(){for(;i.length;){var a=i.pop();if(a in r)return n.value=a,n.done=!1,n}return n.done=!0,n}},n.values=C,S.prototype={constructor:S,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!n)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function a(i,a){return u.type="throw",u.arg=n,r.next=i,a&&(r.method="next",r.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),d=i.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(n,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===n||"continue"===n)&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var u=s?s.completion:{};return u.type=n,u.arg=r,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(u)},complete:function(n,r){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&r&&(this.next=r),p},finish:function(n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===n)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===n){var a=i.completion;if("throw"===a.type){var o=a.arg;T(i)}return o}}throw Error("illegal catch attempt")},delegateYield:function(n,r,i){return this.delegate={iterator:C(n),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},n}function u(n,r,i,a,o,s,u){try{var c=n[s](u),d=c.value}catch(n){i(n);return}c.done?r(d):Promise.resolve(d).then(a,o)}function c(n){return function(){var r=this,i=arguments;return new Promise(function(a,o){var s=n.apply(r,i);function c(n){u(s,a,o,c,d,"next",n)}function d(n){u(s,a,o,c,d,"throw",n)}c(void 0)})}}function d(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function")}function l(n,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,E(a.key),a)}}function f(n,r,i){return r&&l(n.prototype,r),i&&l(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function h(n,r,i){return(r=E(r))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function p(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&g(n,r)}function v(n){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function g(n,r){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n})(n,r)}function _(n,r){if(null==n)return{};var i,a,o=function(n,r){if(null==n)return{};var i,a,o={},s=Object.keys(n);for(a=0;a<s.length;a++)i=s[a],!(r.indexOf(i)>=0)&&(o[i]=n[i]);return o}(n,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++){if(i=s[a],!(r.indexOf(i)>=0))Object.prototype.propertyIsEnumerable.call(n,i)&&(o[i]=n[i])}}return o}function y(n){if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function m(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var i,a=v(n);return i=r?Reflect.construct(a,arguments,v(this).constructor):a.apply(this,arguments),function(n,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return y(n)}(this,i)}}function b(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=i){var a,o,s,u,c=[],d=!0,l=!1;try{if(s=(i=i.call(n)).next,0===r){if(Object(i)!==i)return;d=!1}else for(;!(d=(a=s.call(i)).done)&&(c.push(a.value),c.length!==r);d=!0);}catch(n){l=!0,o=n}finally{try{if(!d&&null!=i.return&&(u=i.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(n,r)||I(n,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(n){return function(n){if(Array.isArray(n))return k(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||I(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(n,r){if(n){if("string"==typeof n)return k(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if("Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return k(n,r)}}function k(n,r){(null==r||r>n.length)&&(r=n.length);for(var i=0,a=Array(r);i<r;i++)a[i]=n[i];return a}function E(n){var r=function(n,r){if("object"!=typeof n||null===n)return n;var i=n[Symbol.toPrimitive];if(void 0!==i){var a=i.call(n,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(n)}(n,"string");return"symbol"==typeof r?r:String(r)}},953633:function(n,r,i){"use strict";i.d(r,{i:function(){return o}});var a=i(320439);function o(n){return"boolean"!=typeof n.fixEditListOffset&&delete n.fixEditListOffset,(0,a.Zj)({vid:"",moovEnd:8e4,segmentDuration:2,maxDownloadInfoSize:30,responseType:"arraybuffer",fixEditListOffset:!0,cache:null},n)}},594872:function(n,r,i){"use strict";i.d(r,{_H:function(){return s},hj:function(){return d},d0:function(){return l},$Z:function(){return c}});var a=i("320439"),o=function(){function n(){(0,a.PA)(this,n),this.frames=[],this.dur=0,this.minPts=Number.MAX_VALUE,this.maxPts=0}return(0,a.qH)(n,[{key:"appendFrame",value:function(n){this.frames.push(n),this.dur+=n.duration}},{key:"calMinMaxPts",value:function(n){n.pts<this.minPts&&(this.minPts=n.pts);var r=n.pts+n.duration;r>this.maxPts&&(this.maxPts=r)}}]),n}();function s(n,r){var i,a=r.segmentDuration,o=n.trak;if(!!o&&!!o.length){var s=o.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="vide"}),c=o.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="soun"});if(s||c){var d=[],l=[];return s&&(i=(d=u("video",s,a,r)).map(function(n){return n.duration})),c&&(l=u("audio",c,a,r,i,d)),{videoSegments:d,audioSegments:l}}}}function u(n,r,i,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5?arguments[5]:void 0,d=s.fixEditListOffset,l=s.fixEditListOffsetThreshold,f=s.audioGroupingStrategy,h=s.memoryOpt,p=null===(en=r.mdia)||void 0===en?void 0:null===(er=en.minf)||void 0===er?void 0:er.stbl;if(!p)return[];var v=null===(ei=r.mdia.mdhd)||void 0===ei?void 0:ei.timescale,g=p.stts,_=p.stsc,y=p.stsz,m=p.stco,b=p.stss,A=p.ctts;if(!v||!g||!_||!y||!m||"video"===n&&!b)return[];var I=0,k=null===(ea=r.edts)||void 0===ea?void 0:null===(eo=ea.elst)||void 0===eo?void 0:eo.entries;if(d&&function(){var n=!0,r=navigator.userAgent||"";if(/Chrome/gi.test(r)&&!/Edge\//gi.test(r)){var i=r.match(/Chrome\/(\d+)/i),a=i?parseInt(i[1],10):0;n=!!a&&a>=75}return n}()&&Array.isArray(k)&&k.length>0){var E=k[0].media_time;E>0&&E<(l?l*v:5*v)&&(I=E)}var T=[],S=[],C=[],x=[],w=[],R=_.entries,D=m.entries,L=y.entrySizes,O=null==b?void 0:b.entries,P=null==A?void 0:A.entries,B=[],N={};!h&&(P&&P.forEach(function(n){for(var r=n.count,i=n.offset,a=0;a<r;a++)B.push(i)}),O&&O.forEach(function(n){N[n-1]=!0}));var M=0,Z=0,V=0,U=0,F=R.length>0?R[0].samplesPerChunk:0,j=R.length>1&&R[1]?R[1].firstChunk-1:1/0,G=0,W=-1,Y=!1,H={};(null==P?void 0:P.length)>0&&I>0&&(G-=I,Y=!0),r.editListApplied=Y,h&&(eu=null==O?void 0:O.shift()),g.entries.forEach(function(n){for(var r=n.count,i=n.delta,a=0;a<r;a++){if(es={dts:G,duration:i,size:L[M]||y.sampleSize,offset:D[Z]+U,index:M},P&&(h?(function(n,r,i){i.offset=0;var a=(null==i?void 0:i.beforeFrameNum)||0,o=(null==i?void 0:i.usedCttsIdx)||0;if(!n||(null==n?void 0:n.length)<=0||(null==i?void 0:i.usedCttsIdx)>=n.length)i.offset=0,i.usedCttsIdx=o,i.beforeFrameNum=a;else{var s=n[o];if(r<a+((null==s?void 0:s.count)||1))i.offset=(null==s?void 0:s.offset)||0;else{var u=n[++o];u?(i.offset=u.offset||0,i.beforeFrameNum=a+s.count):(i.offset=0,i.beforeFrameNum=a+1),i.usedCttsIdx=o}}}(P,M,H),es.pts=G+((null==H?void 0:H.offset)||0)):B&&M<B.length&&(es.pts=G+B[M])),0===I&&0===M&&(es.pts=0),void 0===es.pts&&(es.pts=es.dts),O){if(h?M+1===eu&&(es.keyframe=!0,eu=O.shift()):es.keyframe=N[M],es.keyframe){if(W++,h){var s=new o;s.appendFrame(es),S.push(s)}else S.push([es]),C.push(es.duration)}else h?S[S.length-1].appendFrame(es):(S[S.length-1].push(es),C[S.length-1]+=es.duration);es.gopId=W,h&&S[S.length-1].calMinMaxPts(es)}if(!h){if(es.keyframe?x[x.length]=es.pts:es.pts<x[S.length-1]&&(x[S.length-1]=es.pts),es.keyframe)w[w.length]=es.index;else if(S.length>0&&void 0!==w[S.length-1]){var u,c=null===(u=T[w[S.length-1]])||void 0===u?void 0:u.pts;void 0!==c&&es.pts>c&&(w[S.length-1]=es.index)}}T[T.length]=es,G+=i,++M<F?U+=es.size:(Z++,U=0,Z>=j&&(j=R[++V+1]?R[V+1].firstChunk-1:1/0),F+=R[V].samplesPerChunk)}});var K=T.length;if(!K||b&&!T[0].keyframe)return[];var X=[],z=[],q=0,Q=0,J=0,$=0,ee=function(n,r,i){ec=z[z.length-1],h?(J=(null==S?void 0:S.length)>0?S[r].minPts:z[0].pts,$=(null==S?void 0:S.length)>0?S[i].maxPts:ec.pts+ec.duration):(J=x[r],$=(ed=T[w[i]]).pts+ed.duration),0===X.length&&(n=($-J)/v),X.push({index:X.length,startTime:J/v,endTime:$/v,duration:n,range:[z[0].offset,ec.offset+ec.size-1],frames:z}),1!==f&&(q=0),z=[]},et=0;if(b){for(var en,er,ei,ea,eo,es,eu,ec,ed,el,ef,eh=i*v,ep=0,ev=S.length;ep<ev;ep++)h?(q+=S[ep].dur,(el=z).push.apply(el,(0,a.u)(S[ep].frames))):(q+=C[ep],(ef=z).push.apply(ef,(0,a.u)(S[ep]))),ep+1<ev?(0===ep||q>eh)&&(ee(q/v,et,ep),q=0,et=ep+1):(ee(q/v,et,ep),q=0,et=ep+1)}else{!h&&(x=[],w=[]);var eg=u[0]||i;if(1===f)for(var e_,ey=0;ey<K;ey++){var em=T[ey],eb=T[ey+1],eA=ey===K-1;z.push(em),q+=em.duration;var eI=e_||q/v;e_=(eb?q+eb.duration:0)/v,(eA||(c[X.length]?e_>c[X.length].endTime:e_-z[0].pts/v>=eg))&&(!h&&(x.push(z[0].pts),w.push(z[z.length-1].index)),ee(eI,X.length,X.length),eg=u[X.length]||i)}else for(var ek,eE=0;eE<K;eE++){var eT=T[eE],eS=T[eE+1],eC=eE===K-1;z.push(eT),q+=eT.duration;var ex=ek||q/v;ek=(eS?q+eS.duration:0)/v,(eC||ek+Q>=eg)&&(2===f?Q+=q/v-eg:Q+=ek-eg,!h&&(x.push(z[0].pts),w.push(z[z.length-1].index)),ee(ex,X.length,X.length),eg=u[X.length]||i)}}return X}function c(n){var r="",i="",a=0,o=0,s=0,u=0,c=0,d=0,l=0;n.mvhd&&(c=n.mvhd.duration/n.mvhd.timescale);var f=n.trak;if(f){var h,p,v,g,_,y,m,b,A,I,k,E,T,S,C,x,w,R=f.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="vide"}),D=f.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="soun"}),L=null;return R&&(L=null===(p=R.mdia)||void 0===p?void 0:null===(v=p.minf)||void 0===v?void 0:null===(g=v.stbl)||void 0===g?void 0:g.stsd.entries[0])&&(a=L.width,o=L.height,d=null===(_=R.mdia)||void 0===_?void 0:null===(y=_.mdhd)||void 0===y?void 0:y.timescale,r=null===(m=L.avcC||L.hvcC||L.vvcC)||void 0===m?void 0:m.codec,"encv"===L.type&&(h=null===(b=L.sinf)||void 0===b?void 0:null===(A=b.schi)||void 0===A?void 0:A.tenc.default_KID)),D&&(L=null===(I=D.mdia)||void 0===I?void 0:null===(k=I.minf)||void 0===k?void 0:null===(E=k.stbl)||void 0===E?void 0:E.stsd.entries[0])&&(s=L.channelCount,u=L.sampleRate,i=null===(T=L.esds)||void 0===T?void 0:T.codec,l=null===(S=D.mdia)||void 0===S?void 0:null===(C=S.mdhd)||void 0===C?void 0:C.timescale,"enca"===L.type&&(h=h||(null===(x=L.sinf)||void 0===x?void 0:null===(w=x.schi)||void 0===w?void 0:w.tenc.default_KID))),{kid:h?h.join(""):null,videoCodec:r,audioCodec:i,width:a,height:o,videoTimescale:d,audioChannelCount:s,audioSampleRate:u,duration:c,audioTimescale:l,moov:n}}}function d(n){return"number"==typeof n&&!Number.isNaN(n)}function l(n){if(!n)return!1;var r=n.audioSegments,i=n.videoSegments,a=!i||0===i.length,o=!r||0===r.length;return(!a||!o)&&!0}},431497:function(n,r,i){"use strict";i.d(r,{j:function(){return a}});var a="undefined"!=typeof window},508745:function(n,r,i){"use strict";i.d(r,{K:function(){return a}});var a={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"}},526253:function(n,r,i){"use strict";i.d(r,{C:function(){return s}});var a=i(83399),o=i(854174),s=function(n){(0,a.XW)(i,n);var r=(0,a.WY)(i);function i(n,s,u,c){var d;return(0,a.PA)(this,i),d=r.call(this,c),(0,a._x)((0,a.Lc)(d),"retryCount",0),(0,a._x)((0,a.Lc)(d),"isTimeout",!1),(0,a._x)((0,a.Lc)(d),"loaderType",o.t.FETCH),(0,a._x)((0,a.Lc)(d),"startTime",0),(0,a._x)((0,a.Lc)(d),"endTime",0),(0,a._x)((0,a.Lc)(d),"options",{}),d.url=n,d.request=s,d.response=u,d}return(0,a.qH)(i)}((0,a.wm)(Error))},711469:function(n,r,i){"use strict";i.d(r,{G7:function(){return u},Gu:function(){return o},pl:function(){return d},rO:function(){return c}});var a=i(300491);function o(n){if(!!n&&null!==n[0]&&void 0!==n[0]&&(0!==n[0]||null!==n[1]&&void 0!==n[1])){var r="bytes="+n[0]+"-";return n[1]&&(r+=n[1]),r}}function s(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function u(n,r){if(n){if(!r)return n;var i,o=Object.keys(r).map(function(n){if(null!=(i=r[n]))return Array.isArray(i)?n+="[]":i=[i],i.map(function(r){return(0,a.J_)(r)?r=r.toISOString():(0,a.Kn)(r)&&(r=JSON.stringify(r)),"".concat(s(n),"=").concat(s(r))}).join("&")}).filter(Boolean).join("&");if(o){var u=n.indexOf("#");-1!==u&&(n=n.slice(0,u)),n+=(-1===n.indexOf("?")?"?":"&")+o}return n}}function c(n,r,i,a,o,s,u,c,d,l,f){return o=null!=o?parseFloat(o):null,Number.isNaN(a=parseInt(a||"0",10))&&(a=0),{data:n,done:r,options:{range:d,vid:l,index:c,contentLength:a,age:o,startTime:s,firstByteTime:u,endTime:Date.now(),priOptions:f},response:i}}function d(n,r){return Math.round(8e3*n/r/1024)}},655832:function(n,r,i){"use strict";i.d(r,{c:function(){return l}});var a=i(83399),o=i(526253),s=i(711469),u=i(854174),c=i(508745),d=i(879146),l=function(n){(0,a.XW)(i,n);var r=(0,a.WY)(i);function i(){var n;return(0,a.PA)(this,i),n=r.call(this),(0,a._x)((0,a.Lc)(n),"_xhr",null),(0,a._x)((0,a.Lc)(n),"_aborted",!1),(0,a._x)((0,a.Lc)(n),"_timeoutTimer",null),(0,a._x)((0,a.Lc)(n),"_range",null),(0,a._x)((0,a.Lc)(n),"_receivedLength",0),(0,a._x)((0,a.Lc)(n),"_url",null),(0,a._x)((0,a.Lc)(n),"_onProgress",null),(0,a._x)((0,a.Lc)(n),"_index",-1),(0,a._x)((0,a.Lc)(n),"_headers",null),(0,a._x)((0,a.Lc)(n),"_currentChunkSizeKB",384),(0,a._x)((0,a.Lc)(n),"_timeout",null),(0,a._x)((0,a.Lc)(n),"_xhr",null),(0,a._x)((0,a.Lc)(n),"_withCredentials",null),(0,a._x)((0,a.Lc)(n),"_startTime",-1),(0,a._x)((0,a.Lc)(n),"_loadCompleteResolve",null),(0,a._x)((0,a.Lc)(n),"_loadCompleteReject",null),(0,a._x)((0,a.Lc)(n),"_runing",!1),(0,a._x)((0,a.Lc)(n),"_logger",!1),(0,a._x)((0,a.Lc)(n),"_vid",""),(0,a._x)((0,a.Lc)(n),"_responseType",void 0),(0,a._x)((0,a.Lc)(n),"_credentials",void 0),(0,a._x)((0,a.Lc)(n),"_method",void 0),(0,a._x)((0,a.Lc)(n),"_transformResponse",void 0),(0,a._x)((0,a.Lc)(n),"_firstRtt",void 0),(0,a._x)((0,a.Lc)(n),"_onCancel",null),(0,a._x)((0,a.Lc)(n),"_priOptions",null),n}return(0,a.qH)(i,[{key:"load",value:function(n){var r=this;clearTimeout(this._timeoutTimer),this._logger=n.logger,this._range=n.range,this._onProgress=n.onProgress,this._index=n.index,this._headers=n.headers,this._withCredentials="include"===n.credentials||"same-origin"===n.credentials,this._body=n.body||null,n.method&&(this._method=n.method),this._timeout=n.timeout||null,this._runing=!0,this._vid=n.vid||n.url,this._responseType=n.responseType,this._firstRtt=-1,this._onTimeout=n.onTimeout,this._onCancel=n.onCancel,this._request=n.request,this._priOptions=n.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=(0,s.G7)(n.url,n.params);var i=Date.now();return new Promise(function(n,i){r._loadCompleteResolve=n,r._loadCompleteReject=i,r._startLoad()}).catch(function(n){if(clearTimeout(r._timeoutTimer),r._runing=!1,!r._aborted)throw(n=n instanceof o.C?n:new o.C(r._url,r._request)).startTime=i,n.endTime=Date.now(),n.options={index:r._index,vid:r._vid,priOptions:r._priOptions},n})}},{key:"_startLoad",value:function(){var n=null;if(this._responseType===u.U.ARRAY_BUFFER&&this._range&&this._range.length>1){if(this._onProgress){this._firstRtt=-1;var r=1024*this._currentChunkSizeKB,i=this._range[0]+this._receivedLength,a=this._range[1];r<this._range[1]-i&&(a=i+r),n=[i,a],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",n)}else n=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",n)}this._internalOpen(n)}},{key:"_internalOpen",value:function(n){var r=this;try{this._startTime=Date.now();var i=this._xhr=new XMLHttpRequest;i.open(this._method||"GET",this._url,!0),i.responseType=this._responseType,this._timeout&&(i.timeout=this._timeout),i.withCredentials=this._withCredentials,i.onload=this._onLoad.bind(this),i.onreadystatechange=this._onReadyStatechange.bind(this),i.onerror=function(n){r._running=!1;var i,a,s,u=new o.C(r._url,r._request,null==n?void 0:null===(i=n.currentTarget)||void 0===i?void 0:i.response,"xhr.onerror.status:"+(null==n?void 0:null===(a=n.currentTarget)||void 0===a?void 0:a.status)+",statusText,"+(null==n?void 0:null===(s=n.currentTarget)||void 0===s?void 0:s.statusText));u.options={index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions},r._loadCompleteReject(u)},i.ontimeout=function(n){r.cancel();var i=new o.C(r._url,r._request,{status:408},"timeout");r._onTimeout&&(i.isTimeout=!0,r._onTimeout(i,{index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions})),i.options={index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions},r._loadCompleteReject(i)};var a=this._headers||{},u=(0,s.Gu)(n);u&&(a.Range=u),a&&Object.keys(a).forEach(function(n){i.setRequestHeader(n,a[n])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",n),i.send(this._body)}catch(r){r.options={index:this._index,range:n,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(r)}}},{key:"_onReadyStatechange",value:function(n){2===n.target.readyState&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(n){var r=n.target.status;if(r<200||r>299){var i=new o.C(this._url,null,(0,a.Zj)((0,a.Zj)({},n.target.response),{},{status:r}),"bad response,status:"+r);return i.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(i)}var d=null,l=!1,f=(null===(h=this._range)||void 0===h?void 0:h.length)>0?this._range[0]:0;if(this._responseType===u.U.ARRAY_BUFFER){var h,p,v,g=new Uint8Array(n.target.response);if(p=f+this._receivedLength,g&&g.byteLength>0){this._receivedLength+=g.byteLength;var _=Date.now()-this._startTime,y=(0,s.pl)(this._receivedLength,_);this.emit(c.K.REAL_TIME_SPEED,{speed:y,len:this._receivedLength,time:_,vid:this._vid,index:this._index,range:[p,f+this._receivedLength],priOptions:this._priOptions})}d=g,l=(!((null===(v=this._range)||void 0===v?void 0:v.length)>1)||!this._range[1]||!(this._receivedLength<this._range[1]-this._range[0]))&&!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",p,"end ",f+this._receivedLength,",dataLen,",g?g.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",l)}else l=!0,d=n.target.response;var m={ok:r>=200&&r<300,status:r,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(m=this._transformResponse(m,this._url)||m),this._onProgress&&this._onProgress(d,l,{index:this._index,vid:this._vid,range:[p,f+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},m),l?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve((0,s.rO)(this._onProgress?null:d,l,m,m.headers["content-length"],m.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,(0,a.U2)((0,a.IP)(i.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(n){this._running=n}},{key:"_getHeaders",value:function(n){var r=n.getAllResponseHeaders().trim().split("\r\n"),i={},o,s=(0,a.sf)(r);try{for(s.s();!(o=s.n()).done;){var u=o.value.split(": ");i[u[0].toLowerCase()]=u.slice(1).join(": ")}}catch(n){s.e(n)}finally{s.f()}return i}}],[{key:"isSupported",value:function(){return"undefined"!=typeof XMLHttpRequest}}]),i}(i.n(d)())},913898:function(n,r,i){"use strict";i.d(r,{K:function(){return a}});var a={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"}},715443:function(n,r,i){"use strict";i.d(r,{J_:function(){return c},Kn:function(){return s},PO:function(){return u}});var a=i(670537),o=Object.prototype.toString;function s(n){return null!==n&&"object"===(0,a.Ac)(n)}function u(n){if("[object Object]"!==o.call(n))return!1;var r=Object.getPrototypeOf(n);return null===r||r===Object.prototype}function c(n){return"[object Date]"===o.call(n)}},509370:function(n,r,i){"use strict";function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(r){return setTimeout(r,n)})}i.d(r,{_v:function(){return a}})},29898:function(n,r,i){"use strict";function a(){var n,r,i=new Promise(function(i,a){n=i,r=a});return i.used=!1,i.resolve=function(){return i.used=!0,n.apply(void 0,arguments)},i.reject=function(){return i.used=!0,r.apply(void 0,arguments)},i}i.d(r,{Q:function(){return a}})},999486:function(n,r,i){"use strict";i.d(r,{J_:function(){return c},Kn:function(){return s},PO:function(){return u}});var a=i(768947),o=Object.prototype.toString;function s(n){return null!==n&&"object"===(0,a.Ac)(n)}function u(n){if("[object Object]"!==o.call(n))return!1;var r=Object.getPrototypeOf(n);return null===r||r===Object.prototype}function c(n){return"[object Date]"===o.call(n)}},907769:function(n,r,i){"use strict";i.d(r,{d1:function(){return p}});var a=i(768947),o=i(604232),s=i(34133),u=i(212401),c=i(869835),d=i(118586);function l(){var n=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{if(!s.j)return null;if(n&&"undefined"!=typeof ManagedMediaSource)return ManagedMediaSource;return window.MediaSource}catch(n){}}function f(n){return/ManagedMediaSource/gi.test(Object.prototype.toString.call(n))}var h={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},p=function(){var n,r,i;function s(n,r){var i=this;(0,a.PA)(this,s),(0,a._x)(this,"media",null),(0,a._x)(this,"mediaSource",null),(0,a._x)(this,"_openPromise",(0,d.Qo)()),(0,a._x)(this,"_queue",Object.create(null)),(0,a._x)(this,"_sourceBuffer",Object.create(null)),(0,a._x)(this,"_mseFullFlag",{}),(0,a._x)(this,"_st",0),(0,a._x)(this,"_opst",0),(0,a._x)(this,"_logger",null),(0,a._x)(this,"_config",null),(0,a._x)(this,"_url",null),(0,a._x)(this,"_onStartStreaming",function(){i._logger.debug("startstreaming")}),(0,a._x)(this,"_onEndStreaming",function(){i._logger.debug("endstreaming")}),(0,a._x)(this,"_onSBUpdateEnd",function(n){var r=i._queue[n];if(r){var a=r[0];if((null==a?void 0:a.opName)!==h.UPDATE_DURATION&&r.shift(),a){var o,s,u=void 0;try{u=null===(s=i._sourceBuffer[n])||void 0===s?void 0:s.buffered}catch(n){}var c=(0,d.je)()-i._opst;i._logger.debug("UpdateEnd(".concat(n,"/").concat(a.opName,")"),d.Kp.stringify(function(n){var r=[];if(n instanceof TimeRanges)for(var i=0;i<n.length;i++)r.push({start:n.start(i),end:n.end(i)});return r}(u)),c,a.context),a.promise.resolve({name:a.opName,context:a.context,costtime:c});var l=null===(o=a.context)||void 0===o?void 0:o.callback;l&&"function"==typeof l&&l(a.context),i._startQueue(n)}}}),(0,a._x)(this,"_onSBUpdateError",function(n,r){var a=i._queue[n];if(a){var o=a[0];o&&(i._logger.error("UpdateError",n,o.opName,o.context),o.promise.reject(new u.Fc(u.wb.MEDIA,u.wb.SUB_TYPES.MSE_APPEND_BUFFER,r)))}}),this._config=Object.assign(s.getDefaultConfig(),r),n&&this.bindMedia(n),this._logger=new c.Y("MSE"),this._config.openLog&&c.Y.enable()}return(0,a.qH)(s,[{key:"isOpened",get:function(){var n;return(null===(n=this.mediaSource)||void 0===n?void 0:n.readyState)==="open"}},{key:"hasOpTasks",get:function(){var n=this,r=!1;return Object.keys(this._queue).forEach(function(i){var a=n._queue[i];Array.isArray(a)&&(r||(r=a.length>0))}),r}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var n;return(null===(n=this.mediaSource)||void 0===n?void 0:n.duration)||-1}},{key:"isEnded",get:function(){return!!this.mediaSource&&"ended"===this.mediaSource.readyState}},{key:"streaming",get:function(){return!f(this.mediaSource)||this.mediaSource.streaming}},{key:"isFull",value:function(n){return n?this._mseFullFlag[n]:this._mseFullFlag[s.VIDEO]}},{key:"updateDuration",value:function(n){var r=this,i=this.mediaSource&&this.mediaSource.duration>n;if(this.mediaSource&&this.mediaSource.duration>n){var a=0;if(Object.keys(this._sourceBuffer).forEach(function(n){try{a=Math.max(r.bufferEnd(n)||0,a)}catch(n){}}),n<a)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(r.isEnded){r._logger.debug("setDuration but ended");return}r.mediaSource&&(r.mediaSource.duration=n,r._logger.debug("setDuration",n))},h.UPDATE_DURATION,{isReduceDuration:i})}},{key:"open",value:function(){var n=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var r=this.mediaSource;r.addEventListener("sourceopen",function i(){var a=(0,d.je)()-n._st;n._logger.debug("sourceopen",a),r.removeEventListener("sourceopen",i),n._openPromise.resolve({costtime:a})}),this._openPromise=(0,d.Qo)()}return this._openPromise}},{key:"bindMedia",value:(n=(0,a.x)((0,a.l5)().mark(function n(r){var i,o,s,u,c=this;return(0,a.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.mediaSource||this.media)){n.next=3;break}return n.next=3,this.unbindMedia();case 3:if(i=l(this._config.preferMMS),!(!r||!i)){n.next=6;break}throw Error("Param media or MediaSource does not exist");case 6:return this.media=r,s=f(o=this.mediaSource=new i),this._st=(0,d.je)(),u=function n(){var i=(0,d.je)()-c._st;c._logger.debug("sourceopen"),o.removeEventListener("sourceopen",n),URL.revokeObjectURL(r.src),c._openPromise.resolve({costtime:i})},o.addEventListener("sourceopen",u),s&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming)),this._url=URL.createObjectURL(o),r.src=this._url,r.disableRemotePlayback=s,n.abrupt("return",this._openPromise);case 17:case"end":return n.stop()}},n,this)})),function(r){return n.apply(this,arguments)})},{key:"unbindMedia",value:(r=(0,a.x)((0,a.l5)().mark(function n(){var r,i,o,s=this;return(0,a.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._openPromise.used&&this._openPromise.resolve(),r=this.mediaSource){if(Object.keys(this._queue).forEach(function(n){var r=s._queue[n];r&&r.forEach(function(n){var r,i;return null===(r=n.promise)||void 0===r?void 0:null===(i=r.resolve)||void 0===i?void 0:i.call(r)})}),i=!!this.media&&this.media.readyState>=1,o="open"===r.readyState,i&&o)try{r.endOfStream()}catch(n){}Object.keys(this._sourceBuffer).forEach(function(n){try{r.removeSourceBuffer(s._sourceBuffer[n])}catch(n){}}),f(r)&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming))}if(this.media){this.media.disableRemotePlayback=!1,this.media.removeAttribute("src");try{this.media.load()}catch(n){}this.media=null}this.mediaSource=null,this._openPromise=(0,d.Qo)(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return n.stop()}},n,this)})),function(){return r.apply(this,arguments)})},{key:"createSource",value:function(n,r){var i;if(!this._sourceBuffer[n]&&this.mediaSource){try{i=this._sourceBuffer[n]=this.mediaSource.addSourceBuffer(r)}catch(n){throw new u.Fc(u.wb.MEDIA,u.wb.SUB_TYPES.MSE_ADD_SB,n)}i.mimeType=r,i.addEventListener("updateend",this._onSBUpdateEnd.bind(this,n)),i.addEventListener("error",this._onSBUpdateError.bind(this,n))}}},{key:"changeType",value:function(n,r){var i=this,a=this._sourceBuffer[n];return this.mediaSource&&a&&a.mimeType!==r?"function"!=typeof a.changeType?Promise.reject(new u.Fc(u.wb.MEDIA,u.wb.SUB_TYPES.MSE_CHANGE_TYPE,Error("changeType is not a function"))):this._enqueueOp(n,function(){try{a.changeType(r)}catch(n){throw new u.Fc(u.wb.MEDIA,u.wb.SUB_TYPES.MSE_CHANGE_TYPE,n)}a.mimeType=r,i._onSBUpdateEnd(n)},"changeType",{mimeType:r}):Promise.resolve()}},{key:"createOrChangeSource",value:function(n,r){return this.createSource(n,r),this.changeType(n,r)}},{key:"append",value:function(n,r,i){var a=this;return r&&r.byteLength&&this._sourceBuffer[n]?this._enqueueOp(n,function(){var o;a.mediaSource&&!a.media.error&&(a._logger.debug("MSE APPEND START",i),a._opst=(0,d.je)(),null===(o=a._sourceBuffer[n])||void 0===o||o.appendBuffer(r))},h.APPEND,i):Promise.resolve()}},{key:"remove",value:function(n,r,i,a){var o=this,s=!1;return this._mseFullFlag[n]&&(s=!0),this._enqueueOp(n,function(){if(o.mediaSource&&!o.media.error){var s=o._sourceBuffer[n];if(r>=i||!s){o._onSBUpdateEnd(n);return}o._opst=(0,d.je)(),o._logger.debug("MSE REMOVE START",n,r,i,a),s.remove(r,i)}},h.REMOVE,a,s)}},{key:"clearBuffer",value:function(n,r){var i,a=this;return Object.keys(this._sourceBuffer).forEach(function(o){i=a.remove(o,n,r)}),i||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var n,r=this;return Object.keys(this._sourceBuffer).forEach(function(i){var a=r._sourceBuffer[i];n=r.remove(i,0,o.l.end(o.l.get(a)))}),n}},{key:"clearOpQueues",value:function(n,r){this._logger.debug("MSE clearOpQueue START");var i,a=this._queue[n];if(r&&a){this._queue[n]=[];return}if(a&&a[n]&&!(a.length<5)){var o=[];a.forEach(function(n){n.context&&n.context.isinit&&o.push(n)}),this._queue[n]=a.slice(0,2),o.length>0&&(i=this._queue[n]).push.apply(i,o)}}},{key:"endOfStream",value:function(n){var r=this;return this.mediaSource&&"open"===this.mediaSource.readyState?this._enqueueBlockingOp(function(){var i=r.mediaSource;i&&"open"===i.readyState&&(r._logger.debug("MSE endOfStream START"),n?i.endOfStream(n):i.endOfStream())},"endOfStream"):Promise.resolve()}},{key:"setLiveSeekableRange",value:function(n,r){var i=this.mediaSource;!(n<0)&&!(r<n)&&null!=i&&i.setLiveSeekableRange&&"open"===i.readyState&&i.setLiveSeekableRange(n,r)}},{key:"getSourceBuffer",value:function(n){return this._sourceBuffer[n]}},{key:"buffered",value:function(n){return o.l.get(this._sourceBuffer[n])}},{key:"bufferStart",value:function(n){return o.l.start(this.buffered(n))}},{key:"bufferEnd",value:function(n){return o.l.end(this.buffered(n))}},{key:"_enqueueOp",value:function(n,r,i,a,o){var s=this;if(!this.mediaSource)return Promise.resolve();var u=this._queue[n]=this._queue[n]||[],c={exec:r,promise:(0,d.Qo)(),opName:i,context:a};return o?(u.splice(0,0,c),this._mseFullFlag[n]=!1,this._startQueue(n)):u.push(c),this.isOpened||this.isEnded?1===u.length&&this._startQueue(n):this._openPromise.then(function(){1===u.length&&s._startQueue(n)}),c.promise}},{key:"_enqueueBlockingOp",value:(i=(0,a.x)((0,a.l5)().mark(function n(r,i,o){var s,u,c=this;return(0,a.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.mediaSource){n.next=2;break}return n.abrupt("return",Promise.resolve());case 2:if((s=Object.keys(this._sourceBuffer)).length){n.next=5;break}return n.abrupt("return",r());case 5:return u=[],s.forEach(function(n){var r=c._queue[n],a=(0,d.Qo)();u.push(a),r.push({exec:function(){a.resolve()},promise:a,opName:i,context:o}),1===r.length&&c._startQueue(n)}),n.abrupt("return",Promise.all(u).then(function(){try{return r()}finally{s.forEach(function(n){var r=c._queue[n],i=c._sourceBuffer[n];null==r||r.shift(),(!i||!i.updating)&&c._startQueue(n)})}}));case 8:case"end":return n.stop()}},n,this)})),function(n,r,a){return i.apply(this,arguments)})},{key:"_startQueue",value:function(n){var r=this._queue[n];if(r){var i=r[0];if(i&&!this._mseFullFlag[n])try{i.exec()}catch(o){o&&o.message&&o.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[n]=!0,i.context&&"object"===(0,a.Ac)(i.context)&&(i.context.isFull=!0),this._logger.error("[MSE error],  context,",i.context," ,name,",i.opName,",err,SourceBuffer is full"),i.promise.reject(new u.Fc(u.wb.MEDIA,u.wb.SUB_TYPES.MSE_FULL,o))):(this._logger.error(o),i.promise.reject(o.constructor===u.Fc?o:new u.Fc(u.wb.MEDIA,u.wb.SUB_TYPES.MSE_OTHER,o)),r.shift(),this._startQueue(n))}}}},{key:"setTimeoffset",value:function(n,r,i){var a=this;return this._enqueueOp(n,function(){r<0&&(r+=.001),a._sourceBuffer[n].timestampOffset=r,a._onSBUpdateEnd(n)},"setTimeoffset",i)}},{key:"abort",value:function(n,r){var i=this;return this.isOpened?this._enqueueOp(n,function(){i._sourceBuffer[n].abort(),i._onSBUpdateEnd(n)},"abort",r):Promise.resolve()}}],[{key:"isSupported",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',r=l();if(!r)return!1;try{return r.isTypeSupported(n)}catch(r){return this._logger.error(n,r),!1}}},{key:"isMMSOnly",value:function(){return"undefined"!=typeof ManagedMediaSource&&"undefined"==typeof MediaSource}},{key:"getDefaultConfig",value:function(){return{openLog:!1,preferMMS:!1}}}]),s}();(0,a._x)(p,"VIDEO","video"),(0,a._x)(p,"AUDIO","audio")},126976:function(n,r,i){"use strict";i.d(r,{i:function(){return f}});var a=i(768947),o=i(962326),s=i(957684),u=i(382541),c=i(118586),d=i(869835),l=["retry","retryDelay","onRetryError","transformError"],f=function(){var n;function r(n,i){(0,a.PA)(this,r),this.promise=(0,c.Qo)(),this.alive=!!i.onProgress,i.logger||(i.logger=new d.Y("Loader")),this._loaderType=n,this._loader=n===u.t.FETCH&&"undefined"!=typeof fetch?new o.j:new s.c,this._config=i,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=i.retryCheckFunc,this._logger=i.logger}return(0,a.qH)(r,[{key:"exec",value:function(){var n,r=this,i=this._config,o=i.retry,s=i.retryDelay,u=i.onRetryError,c=i.transformError,d=(0,a.Kd)(i,l);var f=(n=(0,a.x)((0,a.l5)().mark(function n(){var i,l,h;return(0,a.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r._loader.load(d);case 3:i=n.sent,r.promise.resolve(i),n.next=27;break;case 7:if(n.prev=7,n.t0=n.catch(0),r._loader.running=!1,r._logger.debug("[task request catch err]",n.t0),!r._canceled){n.next=13;break}return n.abrupt("return");case 13:if(n.t0.loaderType=r._loaderType,n.t0.retryCount=r._retryCount,l=n.t0,c&&(l=c(l)||l),u&&r._retryCount>0&&u(l,r._retryCount,{index:d.index,vid:d.vid,range:d.range,priOptions:d.priOptions}),r._retryCount++,h=!0,r._retryCheckFunc&&(h=r._retryCheckFunc(n.t0)),!(h&&r._retryCount<=o)){n.next=26;break}return clearTimeout(r._retryTimer),r._logger.debug("[task request setTimeout],retry",r._retryCount,",retry range,",d.range),r._retryTimer=setTimeout(f,s),n.abrupt("return");case 26:r.promise.reject(l);case 27:case"end":return n.stop()}},n,null,[[0,7]])})),function(){return n.apply(this,arguments)});return f(),this.promise}},{key:"cancel",value:(n=(0,a.x)((0,a.l5)().mark(function n(){return(0,a.l5)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,n.abrupt("return",this._loader.cancel());case 4:case"end":return n.stop()}},n,this)})),function(){return n.apply(this,arguments)})},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),r}()},118586:function(n,r,i){"use strict";function a(){var n,r,i=new Promise(function(i,a){n=i,r=a});return i.used=!1,i.resolve=function(){return i.used=!0,n.apply(void 0,arguments)},i.reject=function(){return i.used=!0,r.apply(void 0,arguments)},i}function o(){try{return parseInt(performance.now(),10)}catch(n){return new Date().getTime()}}i.d(r,{Kp:function(){return s},Qo:function(){return a},je:function(){return o}});var s={stringify:function(n){try{return JSON.stringify(n)}catch(n){return""}},parse:function(n){try{return JSON.parse(n)}catch(n){return}}}},827830:function(n){var r,i;r=0,i=function(){"use strict";function n(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function r(n,r){return n(r={exports:{}},r.exports),r.exports}function i(n){var r,i;this.promise=new n(function(n,a){if(void 0!==r||void 0!==i)throw TypeError("Bad Promise constructor");r=n,i=a}),this.resolve=D(r),this.reject=D(i)}function a(n){var r=n.length;return 3===r?(60*(60*Number(n[0])+Number(n[1]))*1e3+1e3*Number(n[2]))/1e3:2===r?(60*Number(n[0])*1e3+1e3*Number(n[1]))/1e3:Number(n[0])}function o(n){return n}function s(n,r){return n>=0&&n<r.length?r[n]:""}function u(n,r){if(!n)return!1;if(n.classList)return Array.prototype.some.call(n.classList,function(n){return n===r});var i=n.className&&"object"===tC(n.className)?n.getAttribute("class"):n.className;return i&&!!i.match(RegExp("(\\s|^)"+r+"(\\s|$)"))}function c(n,r){n&&(n.classList?r.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&n.classList.add(r)}):u(n,r)||(n.className&&"object"===tC(n.className)?n.setAttribute("class",n.getAttribute("class")+" "+r):n.className+=" "+r))}function d(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={code:n6[n].code,msg:n6[n].msg};return nW(r).map(function(n){i[n]=r[n]}),i}function l(n,r,i,a,o){o?i(d(2,o),{format:a.format}):a.format?(n.list=a.list,n.format=a.format,n.styles=a.styles,r(n)):i(d(3))}function f(n){return new nj(function(r,i){if(n.list)return void r(n);if(n.json){var a=n2.parseJson(n.json);return n.list=a,n.format="json",void r(n)}n.stringContent&&!n.url?n2.parse(n.stringContent,function(a,o){l(n,r,i,a,o)}):n.url?new nH({url:n.url,type:"text"}).then(function(a){n2.parse(a.res.response,function(a,o){l(n,r,i,a,o)})}).catch(function(r){i(d(1,{statusText:r.statusText,status:r.status,type:r.type,message:"http load error",url:n.url}))}):i(d(8))})}function h(n,r){return!!(n.id&&n.id===r.id||n.language&&n.language===r.language)}var p,v,g=function(n){if(void 0==n)throw TypeError("Can't call method on  "+n);return n},_=function(n){return Object(g(n))},y={}.hasOwnProperty,m=function(n,r){return y.call(n,r)},b=r(function(n){var r=n.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)}),A=(b.version,r(function(n){var r=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)})),I=r(function(n){var r=A["__core-js_shared__"]||(A["__core-js_shared__"]={});(n.exports=function(n,i){return r[n]||(r[n]=void 0!==i?i:{})})("versions",[]).push({version:b.version,mode:"pure",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})}),k=0,E=Math.random(),T=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++k+E).toString(36))},S=I("keys"),C=function(n){return S[n]||(S[n]=T(n))},x=C("IE_PROTO"),w=Object.prototype,R=Object.getPrototypeOf||function(n){return m(n=_(n),x)?n[x]:"function"==typeof n.constructor&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?w:null},D=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n},L=function(n,r,i){if(D(n),void 0===r)return n;switch(i){case 1:return function(i){return n.call(r,i)};case 2:return function(i,a){return n.call(r,i,a)};case 3:return function(i,a,o){return n.call(r,i,a,o)}}return function(){return n.apply(r,arguments)}},O=function(n){return"object"==typeof n?null!==n:"function"==typeof n},P=function(n){if(!O(n))throw TypeError(n+" is not an object!");return n},B=function(n){try{return!!n()}catch(n){return!0}},N=!B(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),M=A.document,Z=O(M)&&O(M.createElement),V=function(n){return Z?M.createElement(n):{}},U=!N&&!B(function(){return 7!=Object.defineProperty(V("div"),"a",{get:function(){return 7}}).a}),F=function(n,r){var i,a;if(!O(n))return n;if(r&&"function"==typeof(i=n.toString)&&!O(a=i.call(n))||"function"==typeof(i=n.valueOf)&&!O(a=i.call(n))||!r&&"function"==typeof(i=n.toString)&&!O(a=i.call(n)))return a;throw TypeError("Can't convert object to primitive value")},j=Object.defineProperty,G={f:N?Object.defineProperty:function(n,r,i){if(P(n),r=F(r,!0),P(i),U)try{return j(n,r,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(n[r]=i.value),n}},W=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}},Y=N?function(n,r,i){return G.f(n,r,W(1,i))}:function(n,r,i){return n[r]=i,n},H=function(n,r,i){var a,o,s,u=n&H.F,c=n&H.G,d=n&H.S,l=n&H.P,f=n&H.B,h=n&H.W,p=c?b:b[r]||(b[r]={}),v=p.prototype,g=c?A:d?A[r]:(A[r]||{}).prototype;for(a in c&&(i=r),i)(o=!u&&g&&void 0!==g[a])&&m(p,a)||(s=o?g[a]:i[a],p[a]=c&&"function"!=typeof g[a]?i[a]:f&&o?L(s,A):h&&g[a]==s?function(n){var r=function(r,i,a){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(r);case 2:return new n(r,i)}return new n(r,i,a)}return n.apply(this,arguments)};return r.prototype=n.prototype,r}(s):l&&"function"==typeof s?L(Function.call,s):s,l&&((p.virtual||(p.virtual={}))[a]=s,n&H.R&&v&&!v[a]&&Y(v,a,s)))};H.F=1,H.G=2,H.S=4,H.P=8,H.B=16,H.W=32,H.U=64,H.R=128;var K=function(n,r){var i=(b.Object||{})[n]||Object[n],a={};a[n]=r(i),H(H.S+H.F*B(function(){i(1)}),"Object",a)};K("getPrototypeOf",function(){return function(n){return R(_(n))}});var X=b.Object.getPrototypeOf,z=n(r(function(n){n.exports={default:X,__esModule:!0}})),q=n(r(function(n,r){r.__esModule=!0,r.default=function(n,r){if(!(n instanceof r))throw TypeError("Cannot call a class as a function")}})),Q=Math.ceil,J=Math.floor,$=function(n){return isNaN(n=+n)?0:(n>0?J:Q)(n)},ee={},et={}.toString,en=function(n){return et.call(n).slice(8,-1)},er=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==en(n)?n.split(""):Object(n)},ei=function(n){return er(g(n))},ea=Math.min,eo=function(n){return n>0?ea($(n),9007199254740991):0},es=Math.max,eu=Math.min,ec=(tU=!1,function(n,r,i){var a,o,s,u=ei(n),c=eo(u.length),d=(a=i,o=c,(a=$(a))<0?es(a+o,0):eu(a,o));if(tU&&r!=r){for(;c>d;)if((s=u[d++])!=s)return!0}else for(;c>d;d++)if((tU||d in u)&&u[d]===r)return tU||d||0;return!tU&&-1}),ed=C("IE_PROTO"),el=function(n,r){var i,a=ei(n),o=0,s=[];for(i in a)i!=ed&&m(a,i)&&s.push(i);for(;r.length>o;)m(a,i=r[o++])&&(~ec(s,i)||s.push(i));return s},ef="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),eh=Object.keys||function(n){return el(n,ef)},ep=N?Object.defineProperties:function(n,r){P(n);for(var i,a=eh(r),o=a.length,s=0;o>s;)G.f(n,i=a[s++],r[i]);return n},ev=A.document,eg=ev&&ev.documentElement,e_=C("IE_PROTO"),ey=function(){},em=function(){var n,r=V("iframe"),i=ef.length;for(r.style.display="none",eg.appendChild(r),r.src="javascript:",(n=r.contentWindow.document).open(),n.write("<script>document.F=Object<\/script>"),n.close(),em=n.F;i--;)delete em.prototype[ef[i]];return em()},eb=Object.create||function(n,r){var i;return null!==n?(ey.prototype=P(n),i=new ey,ey.prototype=null,i[e_]=n):i=em(),void 0===r?i:ep(i,r)},eA=r(function(n){var r=I("wks"),i=A.Symbol,a="function"==typeof i;(n.exports=function(n){return r[n]||(r[n]=a&&i[n]||(a?i:T)("Symbol."+n))}).store=r}),eI=G.f,ek=eA("toStringTag"),eE=function(n,r,i){n&&!m(n=i?n:n.prototype,ek)&&eI(n,ek,{configurable:!0,value:r})},eT={};Y(eT,eA("iterator"),function(){return this});var eS=function(n,r,i){n.prototype=eb(eT,{next:W(1,i)}),eE(n,r+" Iterator")},eC=eA("iterator"),ex=!([].keys&&"next"in[].keys()),ew=function(){return this},eR=function(n,r,i,a,o,s,u){eS(i,r,a);var c,d,l,f=function(n){if(!ex&&n in g)return g[n];switch(n){case"keys":case"values":return function(){return new i(this,n)}}return function(){return new i(this,n)}},h=r+" Iterator",p="values"==o,v=!1,g=n.prototype,_=g[eC]||g["@@iterator"]||o&&g[o],y=_||f(o),m=o?p?f("entries"):y:void 0,b="Array"==r&&g.entries||_;if(b&&(l=R(b.call(new n)))!==Object.prototype&&l.next&&eE(l,h,!0),p&&_&&"values"!==_.name&&(v=!0,y=function(){return _.call(this)}),u&&(ex||v||!g[eC])&&Y(g,eC,y),ee[r]=y,ee[h]=ew,o){if(c={values:p?y:f("values"),keys:s?y:f("keys"),entries:m},u)for(d in c)d in g||Y(g,d,c[d]);else H(H.P+H.F*(ex||v),r,c)}return c},eD=(tF=!0,function(n,r){var i,a,o=String(g(n)),s=$(r),u=o.length;return s<0||s>=u?tF?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===u||(a=o.charCodeAt(s+1))<56320||a>57343?tF?o.charAt(s):i:tF?o.slice(s,s+2):a-56320+(i-55296<<10)+65536});eR(String,"String",function(n){this._t=String(n),this._i=0},function(){var n,r=this._t,i=this._i;return i>=r.length?{value:void 0,done:!0}:(n=eD(r,i),this._i+=n.length,{value:n,done:!1})});var eL=function(n,r){return{value:r,done:!!n}};eR(Array,"Array",function(n,r){this._t=ei(n),this._i=0,this._k=r},function(){var n=this._t,r=this._k,i=this._i++;return!n||i>=n.length?(this._t=void 0,eL(1)):"keys"==r?eL(0,i):"values"==r?eL(0,n[i]):eL(0,[i,n[i]])},"values"),ee.Arguments=ee.Array;for(var eO=eA("toStringTag"),eP="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),eB=0;eB<eP.length;eB++){var eN=eP[eB],eM=A[eN],eZ=eM&&eM.prototype;eZ&&!eZ[eO]&&Y(eZ,eO,eN),ee[eN]=ee.Array}var eV={f:eA},eU=eV.f("iterator"),eF=r(function(n){n.exports={default:eU,__esModule:!0}});n(eF);var ej=r(function(n){var r=T("meta"),i=G.f,a=0,o=Object.isExtensible||function(){return!0},s=!B(function(){return o(Object.preventExtensions({}))}),u=function(n){i(n,r,{value:{i:"O"+ ++a,w:{}}})},c=n.exports={KEY:r,NEED:!1,fastKey:function(n,i){if(!O(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!m(n,r)){if(!o(n))return"F";if(!i)return"E";u(n)}return n[r].i},getWeak:function(n,i){if(!m(n,r)){if(!o(n))return!0;if(!i)return!1;u(n)}return n[r].w},onFreeze:function(n){return s&&c.NEED&&o(n)&&!m(n,r)&&u(n),n}}}),eG=(ej.KEY,ej.NEED,ej.fastKey,ej.getWeak,ej.onFreeze,G.f),eW=function(n){var r=b.Symbol||(b.Symbol={});"_"==n.charAt(0)||n in r||eG(r,n,{value:eV.f(n)})},eY={f:Object.getOwnPropertySymbols},eH={f:{}.propertyIsEnumerable},eK=function(n){var r=eh(n),i=eY.f;if(i)for(var a,o=i(n),s=eH.f,u=0;o.length>u;)s.call(n,a=o[u++])&&r.push(a);return r},eX=Array.isArray||function(n){return"Array"==en(n)},ez=ef.concat("length","prototype"),eq={f:Object.getOwnPropertyNames||function(n){return el(n,ez)}},eQ=eq.f,eJ={}.toString,e$="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],e0=function(n){try{return eQ(n)}catch(n){return e$.slice()}},e1={f:function(n){return e$&&"[object Window]"==eJ.call(n)?e0(n):eQ(ei(n))}},e2=Object.getOwnPropertyDescriptor,e3={f:N?e2:function(n,r){if(n=ei(n),r=F(r,!0),U)try{return e2(n,r)}catch(n){}if(m(n,r))return W(!eH.f.call(n,r),n[r])}},e7=ej.KEY,e6=e3.f,e4=G.f,e5=e1.f,e8=A.Symbol,e9=A.JSON,te=e9&&e9.stringify,tt=eA("_hidden"),tn=eA("toPrimitive"),tr={}.propertyIsEnumerable,ti=I("symbol-registry"),ta=I("symbols"),to=I("op-symbols"),ts=Object.prototype,tu="function"==typeof e8&&!!eY.f,tc=A.QObject,td=!tc||!tc.prototype||!tc.prototype.findChild,tl=N&&B(function(){return 7!=eb(e4({},"a",{get:function(){return e4(this,"a",{value:7}).a}})).a})?function(n,r,i){var a=e6(ts,r);a&&delete ts[r],e4(n,r,i),a&&n!==ts&&e4(ts,r,a)}:e4,tf=function(n){var r=ta[n]=eb(e8.prototype);return r._k=n,r},th=tu&&"symbol"==typeof e8.iterator?function(n){return"symbol"==typeof n}:function(n){return n instanceof e8},tp=function(n,r,i){return n===ts&&tp(to,r,i),P(n),r=F(r,!0),P(i),m(ta,r)?(i.enumerable?(m(n,tt)&&n[tt][r]&&(n[tt][r]=!1),i=eb(i,{enumerable:W(0,!1)})):(m(n,tt)||e4(n,tt,W(1,{})),n[tt][r]=!0),tl(n,r,i)):e4(n,r,i)},tv=function(n,r){P(n);for(var i,a=eK(r=ei(r)),o=0,s=a.length;s>o;)tp(n,i=a[o++],r[i]);return n},tg=function(n,r){if(n=ei(n),r=F(r,!0),n!==ts||!m(ta,r)||m(to,r)){var i=e6(n,r);return!i||!m(ta,r)||m(n,tt)&&n[tt][r]||(i.enumerable=!0),i}},t_=function(n){for(var r,i=e5(ei(n)),a=[],o=0;i.length>o;)m(ta,r=i[o++])||r==tt||r==e7||a.push(r);return a},ty=function(n){for(var r,i=n===ts,a=e5(i?to:ei(n)),o=[],s=0;a.length>s;)m(ta,r=a[s++])&&(!i||m(ts,r))&&o.push(ta[r]);return o};tu||(Y((e8=function(){if(this instanceof e8)throw TypeError("Symbol is not a constructor!");var n=T(arguments.length>0?arguments[0]:void 0),r=function(i){this===ts&&r.call(to,i),m(this,tt)&&m(this[tt],n)&&(this[tt][n]=!1),tl(this,n,W(1,i))};return N&&td&&tl(ts,n,{configurable:!0,set:r}),tf(n)}).prototype,"toString",function(){return this._k}),e3.f=tg,G.f=tp,eq.f=e1.f=t_,eH.f=function(n){var r=tr.call(this,n=F(n,!0));return!(this===ts&&m(ta,n)&&!m(to,n))&&(!(r||!m(this,n)||!m(ta,n)||m(this,tt)&&this[tt][n])||r)},eY.f=ty,eV.f=function(n){return tf(eA(n))}),H(H.G+H.W+!tu*H.F,{Symbol:e8});for(var tm="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tb=0;tm.length>tb;)eA(tm[tb++]);for(var tA=eh(eA.store),tI=0;tA.length>tI;)eW(tA[tI++]);H(H.S+!tu*H.F,"Symbol",{for:function(n){return m(ti,n+="")?ti[n]:ti[n]=e8(n)},keyFor:function(n){if(!th(n))throw TypeError(n+" is not a symbol!");for(var r in ti)if(ti[r]===n)return r},useSetter:function(){td=!0},useSimple:function(){td=!1}}),H(H.S+!tu*H.F,"Object",{create:function(n,r){return void 0===r?eb(n):tv(eb(n),r)},defineProperty:tp,defineProperties:tv,getOwnPropertyDescriptor:tg,getOwnPropertyNames:t_,getOwnPropertySymbols:ty});var tk=B(function(){eY.f(1)});H(H.S+H.F*tk,"Object",{getOwnPropertySymbols:function(n){return eY.f(_(n))}}),e9&&H(H.S+H.F*(!tu||B(function(){var n=e8();return"[null]"!=te([n])||"{}"!=te({a:n})||"{}"!=te(Object(n))})),"JSON",{stringify:function(n){for(var r,i,a=[n],o=1;arguments.length>o;)a.push(arguments[o++]);if(i=r=a[1],(O(r)||void 0!==n)&&!th(n))return eX(r)||(r=function(n,r){if("function"==typeof i&&(r=i.call(this,n,r)),!th(r))return r}),a[1]=r,te.apply(e9,a)}}),e8.prototype[tn]||Y(e8.prototype,tn,e8.prototype.valueOf),eE(e8,"Symbol"),eE(Math,"Math",!0),eE(A.JSON,"JSON",!0),eW("asyncIterator"),eW("observable");var tE=b.Symbol,tT=r(function(n){n.exports={default:tE,__esModule:!0}});n(tT);var tS=r(function(n,r){function i(n){return n&&n.__esModule?n:{default:n}}r.__esModule=!0;var a=i(eF),o=i(tT),s="function"==typeof o.default&&"symbol"==typeof a.default?function(n){return typeof n}:function(n){return n&&"function"==typeof o.default&&n.constructor===o.default&&n!==o.default.prototype?"symbol":typeof n};r.default="function"==typeof o.default&&"symbol"===s(a.default)?function(n){return void 0===n?"undefined":s(n)}:function(n){return n&&"function"==typeof o.default&&n.constructor===o.default&&n!==o.default.prototype?"symbol":void 0===n?"undefined":s(n)}}),tC=n(tS),tx=n(r(function(n,r){r.__esModule=!0;var i,a=(i=tS)&&i.__esModule?i:{default:i};r.default=function(n,r){if(!n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&("object"===(void 0===r?"undefined":(0,a.default)(r))||"function"==typeof r)?r:n}}));H(H.S+!N*H.F,"Object",{defineProperty:G.f});var tw=b.Object,tR=function(n,r,i){return tw.defineProperty(n,r,i)},tD=r(function(n){n.exports={default:tR,__esModule:!0}});n(tD);var tL=n(r(function(n,r){r.__esModule=!0;var i,a=(i=tD)&&i.__esModule?i:{default:i};r.default=function(){function n(n,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,a.default)(n,o.key,o)}}return function(r,i,a){return i&&n(r.prototype,i),a&&n(r,a),r}}()})),tO=function(n,r){if(P(n),!O(r)&&null!==r)throw TypeError(r+": can't set as prototype!")},tP={set:Object.setPrototypeOf||("__proto__"in{}?function(n,r,i){try{(i=L(Function.call,e3.f(Object.prototype,"__proto__").set,2))(n,[]),r=!(n instanceof Array)}catch(n){r=!0}return function(n,a){return tO(n,a),r?n.__proto__=a:i(n,a),n}}({},!1):void 0),check:tO};H(H.S,"Object",{setPrototypeOf:tP.set});var tB=b.Object.setPrototypeOf,tN=r(function(n){n.exports={default:tB,__esModule:!0}});n(tN),H(H.S,"Object",{create:eb});var tM=b.Object,tZ=function(n,r){return tM.create(n,r)},tV=r(function(n){n.exports={default:tZ,__esModule:!0}});n(tV);var tU,tF,tj,tG,tW,tY=n(r(function(n,r){function i(n){return n&&n.__esModule?n:{default:n}}r.__esModule=!0;var a=i(tN),o=i(tV),s=i(tS);r.default=function(n,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function, not "+(void 0===r?"undefined":(0,s.default)(r)));n.prototype=(0,o.default)(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(a.default?(0,a.default)(n,r):n.__proto__=r)}})),tH=eA("toStringTag"),tK="Arguments"==en(function(){return arguments}()),tX=function(n,r){try{return n[r]}catch(n){}},tz=function(n){var r,i,a;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(i=tX(r=Object(n),tH))?i:tK?en(r):"Object"==(a=en(r))&&"function"==typeof r.callee?"Arguments":a},tq=function(n,r,i,a){if(!(n instanceof r)||void 0!==a&&a in n)throw TypeError(i+": incorrect invocation!");return n},tQ=function(n,r,i,a){try{return a?r(P(i)[0],i[1]):r(i)}catch(r){var o=n.return;throw void 0!==o&&P(o.call(n)),r}},tJ=eA("iterator"),t$=Array.prototype,t0=eA("iterator"),t1=b.getIteratorMethod=function(n){if(void 0!=n)return n[t0]||n["@@iterator"]||ee[tz(n)]},t2=r(function(n){var r={},i={},a=n.exports=function(n,a,o,s,u){var c,d,l,f,h,p=u?function(){return n}:t1(n),v=L(o,s,a?2:1),g=0;if("function"!=typeof p)throw TypeError(n+" is not iterable!");if(void 0!==(c=p)&&(ee.Array===c||t$[tJ]===c)){for(d=eo(n.length);d>g;g++)if((h=a?v(P(l=n[g])[0],l[1]):v(n[g]))===r||h===i)return h}else for(f=p.call(n);!(l=f.next()).done;)if((h=tQ(f,v,l.value,a))===r||h===i)return h};a.BREAK=r,a.RETURN=i}),t3=eA("species"),t7=function(n,r){var i,a=P(n).constructor;return void 0===a||void 0==(i=P(a)[t3])?r:D(i)},t6=function(n,r,i){var a=void 0===i;switch(r.length){case 0:return a?n():n.call(i);case 1:return a?n(r[0]):n.call(i,r[0]);case 2:return a?n(r[0],r[1]):n.call(i,r[0],r[1]);case 3:return a?n(r[0],r[1],r[2]):n.call(i,r[0],r[1],r[2]);case 4:return a?n(r[0],r[1],r[2],r[3]):n.call(i,r[0],r[1],r[2],r[3])}return n.apply(i,r)},t4=A.process,t5=A.setImmediate,t8=A.clearImmediate,t9=A.MessageChannel,ne=A.Dispatch,nt=0,nn={},nr=function(){var n=+this;if(nn.hasOwnProperty(n)){var r=nn[n];delete nn[n],r()}},ni=function(n){nr.call(n.data)};t5&&t8||(t5=function(n){for(var r=[],i=1;arguments.length>i;)r.push(arguments[i++]);return nn[++nt]=function(){t6("function"==typeof n?n:Function(n),r)},tj(nt),nt},t8=function(n){delete nn[n]},"process"==en(t4)?tj=function(n){t4.nextTick(L(nr,n,1))}:ne&&ne.now?tj=function(n){ne.now(L(nr,n,1))}:t9?(tW=(tG=new t9).port2,tG.port1.onmessage=ni,tj=L(tW.postMessage,tW,1)):A.addEventListener&&"function"==typeof postMessage&&!A.importScripts?(tj=function(n){A.postMessage(n+"","*")},A.addEventListener("message",ni,!1)):tj="onreadystatechange"in V("script")?function(n){eg.appendChild(V("script")).onreadystatechange=function(){eg.removeChild(this),nr.call(n)}}:function(n){setTimeout(L(nr,n,1),0)});var na=t5,no=A.MutationObserver||A.WebKitMutationObserver,ns=A.process,nu=A.Promise,nc="process"==en(ns),nd={f:function(n){return new i(n)}},nl=function(n){try{return{e:!1,v:n()}}catch(n){return{e:!0,v:n}}},nf=A.navigator,nh=nf&&nf.userAgent||"",np=function(n,r){if(P(n),O(r)&&r.constructor===n)return r;var i=nd.f(n);return(0,i.resolve)(r),i.promise},nv=eA("species"),ng=eA("iterator"),n_=!1;try{var ny=[7][ng]();ny.return=function(){n_=!0},Array.from(ny,function(){throw 2})}catch(n){}var nm,nb,nA,nI,nk=na,nE=function(){var n,r,i,a=function(){var a,o;for(nc&&(a=ns.domain)&&a.exit();n;){o=n.fn,n=n.next;try{o()}catch(a){throw n?i():r=void 0,a}}r=void 0,a&&a.enter()};if(nc)i=function(){ns.nextTick(a)};else if(!no||A.navigator&&A.navigator.standalone){if(nu&&nu.resolve){var o=nu.resolve(void 0);i=function(){o.then(a)}}else i=function(){na.call(A,a)}}else{var s=!0,u=document.createTextNode("");new no(a).observe(u,{characterData:!0}),i=function(){u.data=s=!s}}return function(a){var o={fn:a,next:void 0};r&&(r.next=o),n||(n=o,i()),r=o}}(),nT=A.TypeError,nS=A.process,nC=nS&&nS.versions,nx=nC&&nC.v8||"",nw=A.Promise,nR="process"==tz(nS),nD=function(){},nL=nb=nd.f,nO=!!function(){try{var n=nw.resolve(1),r=(n.constructor={})[eA("species")]=function(n){n(nD,nD)};return(nR||"function"==typeof PromiseRejectionEvent)&&n.then(nD) instanceof r&&0!==nx.indexOf("6.6")&&-1===nh.indexOf("Chrome/66")}catch(n){}}(),nP=function(n){var r;return!(!O(n)||"function"!=typeof(r=n.then))&&r},nB=function(n,r){if(!n._n){n._n=!0;var i=n._c;nE(function(){for(var a=n._v,o=1==n._s,s=0;i.length>s;)!function(r){var i,s,u,c=o?r.ok:r.fail,d=r.resolve,l=r.reject,f=r.domain;try{c?(o||(2==n._h&&nZ(n),n._h=1),!0===c?i=a:(f&&f.enter(),i=c(a),f&&(f.exit(),u=!0)),i===r.promise?l(nT("Promise-chain cycle")):(s=nP(i))?s.call(i,d,l):d(i)):l(a)}catch(n){f&&!u&&f.exit(),l(n)}}(i[s++]);n._c=[],n._n=!1,r&&!n._h&&nN(n)})}},nN=function(n){nk.call(A,function(){var r,i,a,o=n._v,s=nM(n);if(s&&(r=nl(function(){nR?nS.emit("unhandledRejection",o,n):(i=A.onunhandledrejection)?i({promise:n,reason:o}):(a=A.console)&&a.error&&a.error("Unhandled promise rejection",o)}),n._h=nR||nM(n)?2:1),n._a=void 0,s&&r.e)throw r.v})},nM=function(n){return 1!==n._h&&0===(n._a||n._c).length},nZ=function(n){nk.call(A,function(){var r;nR?nS.emit("rejectionHandled",n):(r=A.onrejectionhandled)&&r({promise:n,reason:n._v})})},nV=function(n){var r=this;r._d||(r._d=!0,(r=r._w||r)._v=n,r._s=2,r._a||(r._a=r._c.slice()),nB(r,!0))},nU=function(n){var r,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===n)throw nT("Promise can't be resolved itself");(r=nP(n))?nE(function(){var a={_w:i,_d:!1};try{r.call(n,L(nU,a,1),L(nV,a,1))}catch(n){nV.call(a,n)}}):(i._v=n,i._s=1,nB(i,!1))}catch(n){nV.call({_w:i,_d:!1},n)}}};nO||(nw=function(n){tq(this,nw,"Promise","_h"),D(n),nm.call(this);try{n(L(nU,this,1),L(nV,this,1))}catch(n){nV.call(this,n)}},(nm=function(n){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(n,r,i){for(var a in r)Y(n,a,r[a]);return n}(nw.prototype,{then:function(n,r){var i=nL(t7(this,nw));return i.ok="function"!=typeof n||n,i.fail="function"==typeof r&&r,i.domain=nR?nS.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&nB(this,!1),i.promise},catch:function(n){return this.then(void 0,n)}}),nA=function(){var n=new nm;this.promise=n,this.resolve=L(nU,n,1),this.reject=L(nV,n,1)},nd.f=nL=function(n){return n===nw||n===nI?new nA(n):nb(n)}),H(H.G+H.W+!nO*H.F,{Promise:nw}),eE(nw,"Promise"),v="function"==typeof b[p="Promise"]?b[p]:A[p],N&&v&&!v[nv]&&G.f(v,nv,{configurable:!0,get:function(){return this}}),nI=b.Promise,H(H.S+!nO*H.F,"Promise",{reject:function(n){var r=nL(this);return(0,r.reject)(n),r.promise}}),H(H.S+!0*H.F,"Promise",{resolve:function(n){return np(this===nI?nw:this,n)}}),H(H.S+!(nO&&function(n,r){if(!n_)return!1;var i=!1;try{var a=[7],o=a[ng]();o.next=function(){return{done:i=!0}},a[ng]=function(){return o},n(a)}catch(n){}return i}(function(n){nw.all(n).catch(nD)}))*H.F,"Promise",{all:function(n){var r=this,i=nL(r),a=i.resolve,o=i.reject,s=nl(function(){var i=[],s=0,u=1;t2(n,!1,function(n){var c=s++,d=!1;i.push(void 0),u++,r.resolve(n).then(function(n){d||(d=!0,i[c]=n,--u||a(i))},o)}),--u||a(i)});return s.e&&o(s.v),i.promise},race:function(n){var r=this,i=nL(r),a=i.reject,o=nl(function(){t2(n,!1,function(n){r.resolve(n).then(i.resolve,a)})});return o.e&&a(o.v),i.promise}}),H(H.P+H.R,"Promise",{finally:function(n){var r=t7(this,b.Promise||A.Promise),i="function"==typeof n;return this.then(i?function(i){return np(r,n()).then(function(){return i})}:n,i?function(i){return np(r,n()).then(function(){throw i})}:n)}}),H(H.S,"Promise",{try:function(n){var r=nd.f(this),i=nl(n);return(i.e?r.reject:r.resolve)(i.v),r.promise}});var nF=b.Promise,nj=n(r(function(n){n.exports={default:nF,__esModule:!0}}));K("keys",function(){return function(n){return eh(_(n))}});var nG=b.Object.keys,nW=n(r(function(n){n.exports={default:nG,__esModule:!0}})),nY=r(function(n){function r(){}function i(n,r,i){this.fn=n,this.context=r,this.once=i||!1}function a(n,r,a,o,s){if("function"!=typeof a)throw TypeError("The listener must be a function");var u=new i(a,o||n,s),d=c?c+r:r;return n._events[d]?n._events[d].fn?n._events[d]=[n._events[d],u]:n._events[d].push(u):(n._events[d]=u,n._eventsCount++),n}function o(n,i){0==--n._eventsCount?n._events=new r:delete n._events[i]}function s(){this._events=new r,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(c=!1)),s.prototype.eventNames=function(){var n,r,i=[];if(0===this._eventsCount)return i;for(r in n=this._events)u.call(n,r)&&i.push(c?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i},s.prototype.listeners=function(n){var r=c?c+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,o=i.length,s=Array(o);a<o;a++)s[a]=i[a].fn;return s},s.prototype.listenerCount=function(n){var r=c?c+n:n,i=this._events[r];return i?i.fn?1:i.length:0},s.prototype.emit=function(n,r,i,a,o,s){var u=c?c+n:n;if(!this._events[u])return!1;var d,l,f=this._events[u],h=arguments.length;if(f.fn){switch(f.once&&this.removeListener(n,f.fn,void 0,!0),h){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,i),!0;case 4:return f.fn.call(f.context,r,i,a),!0;case 5:return f.fn.call(f.context,r,i,a,o),!0;case 6:return f.fn.call(f.context,r,i,a,o,s),!0}for(l=1,d=Array(h-1);l<h;l++)d[l-1]=arguments[l];f.fn.apply(f.context,d)}else{var p,v=f.length;for(l=0;l<v;l++)switch(f[l].once&&this.removeListener(n,f[l].fn,void 0,!0),h){case 1:f[l].fn.call(f[l].context);break;case 2:f[l].fn.call(f[l].context,r);break;case 3:f[l].fn.call(f[l].context,r,i);break;case 4:f[l].fn.call(f[l].context,r,i,a);break;default:if(!d)for(p=1,d=Array(h-1);p<h;p++)d[p-1]=arguments[p];f[l].fn.apply(f[l].context,d)}}return!0},s.prototype.on=function(n,r,i){return a(this,n,r,i,!1)},s.prototype.once=function(n,r,i){return a(this,n,r,i,!0)},s.prototype.removeListener=function(n,r,i,a){var s=c?c+n:n;if(!this._events[s])return this;if(!r)return o(this,s),this;var u=this._events[s];if(u.fn)u.fn!==r||a&&!u.once||i&&u.context!==i||o(this,s);else{for(var d=0,l=[],f=u.length;d<f;d++)(u[d].fn!==r||a&&!u[d].once||i&&u[d].context!==i)&&l.push(u[d]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},s.prototype.removeAllListeners=function(n){var i;return n?(i=c?c+n:n,this._events[i]&&o(this,i)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,n.exports=s}),nH=function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.url,a=r.method,o=void 0===a?"GET":a,s=r.type,u=void 0===s?"arraybuffer":s,c=r.timeout,d=void 0===c?1e4:c,l=r.data,f=void 0===l?{}:l,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q(this,n),new nj(function(n,r){var a=new window.XMLHttpRequest,s=o.toUpperCase(),c=[];for(var l in u&&(a.responseType=u),d&&(a.timeout=d),f)c.push("k="+f[l]);if(a.onload=function(){200===a.status||206===a.status?n({context:h,res:a}):r(Error({context:h,res:a,type:"error"}))},a.onerror=function(n){r(Error({context:h,res:a,type:"error"}))},a.ontimeout=function(n){r(Error({context:h,res:a,type:"error"}))},a.onabort=function(){r(Error({context:h,res:a,type:"error"}))},"GET"===s)a.open(s,""+i),a.send();else{if("post"!==s)throw Error("xhr "+s+" is not supported");a.open(s,i),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(c.join("&"))}})},nK=/^WEBVTT/,nX=/^STYLE+$/,nz=/^\:\:cue/,nq=/^}+$/,nQ=/^\[Script Info\].*/,nJ=[/[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}\.[0-9]{1,3}-->[0-9]{1,2}\.[0-9]{1,3}/],n$=/^Format:\s/,n0=/^Style:\s/,n1=/^Dialogue:\s/,n2=function(){function n(){q(this,n)}return tL(n,null,[{key:"parseJson",value:function(n){for(var r=[],i=0,a=0;a<n.length;a++){if(i>=50&&(i=0),0===i){var o={start:n[a].start,list:[n[a]],end:n[a].end};r.push(o)}else r[r.length-1].list.push(n[a]),r[r.length-1].end=n[a].end;i++}return r}},{key:"parse",value:function(r,i){var a=n.checkFormat(r);a||i({format:a});try{var o=[];"ass"===a?o=n.parseASS(r):"vtt"===a&&(o=n.parseVTT(r)),i({format:a,list:o.list,styles:o.styles})}catch(n){i({format:a},n)}}},{key:"parseASSItem",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n.split(","),o={},s="";try{var u=i.length-r.length;return s=s=(s=u>0?i.splice(r.length-1,u+1).join(",")+"":i[i.length-1]+"").replace(/\\n+/g,""),i[r.length-1]=s,r.map(function(n,r){"end"===n||"start"===n?o[n]=a(i[r].split(":")):"text"===n?o[n]=[i[r]]:"layer"===n?(o[n]=[i[r]],o.textTag=[i[r]]):o[n]="style"===n?[i[r]]:Number(i[r])?Number(i[r]):i[r]}),o}catch(n){return{}}}},{key:"parseASS",value:function(r){for(var i=r.split("\n"),a=[],o=0,s=0,u=[],c=[],d=null;o<i.length;){if(n$.test(i[o]))c=(c=i[o].replace(n$,"").replace(/\s+/g,"").split(",")).map(function(n){return n.toLocaleLowerCase()});else if(n0.test(i[o]))u.push(i[o].replace(n0,"").replace(/\s+/g,""));else if(n1.test(i[o])){var l=n.parseASSItem(i[o].replace(n1,""),c);if(d&&l.start===d.start&&l.end===d.end)try{var f=d,h=f.text,p=f.textTag,v=f.style;h.push(l.text[0]),p.push(l.textTag[0]),v.push(l.style[0])}catch(n){}else{d=l;var g=null;s%50==0?((g={start:d.start,end:d.end,list:[]}).list.push(d),a.push(g)):((g=a[a.length-1]).end=d.end,g.list.push(d)),s++}}o++}return{list:a,style:{}}}},{key:"parseVTTStyle",value:function(n,r){var i=n.split(":");if(i.length>1){var a=i[0].trim().split("-"),o="";a.length>1?a.map(function(n,r){o+=0===r?n:n.charAt(0).toUpperCase()+n.slice(1)}):o=a[0],r[o]=i[1].trim().replace(/;$/,"")}return r}},{key:"parseVTT",value:function(n){for(var r=(n=n.replace(nK,"")).split("\n"),i=[],a=0,o=0,u=null,c=!1,d=!1,l=null,f=null,h=[];a<r.length;){var p,v=s(a,r).trim();if(!v||c&&(p=v,/^(\-|\+)?\d+(\.\d+)?$/.test(p)))c=!v;else if(nz.test(v)&&nX.test(s(a-1,r).trim())){d=!0;var g=/\((.+?)\)/g.exec(v);f=g?g[1]:"",l=""}else if(d)nq.test(v)?(h.push({key:f,style:l}),l=null,f=null,d=!1):l+=v;else if(v){c=!1;var _=this.checkIsTime(r[a]);if(_){var y=this.parseVttTime(_);if(!u||y.start!==u.start||y.end!==u.end){(u=y).text=[],u.textTag=[];var m=null;o%50==0?((m={start:u.start,end:u.end,list:[]}).list.push(u),i.push(m)):((m=i[i.length-1]).end=u.end,m.list.push(u)),o++}}else if(u){var b=u,A=b.text,I=b.textTag,k=this.parseVttText(r[a]);A.push(k.text),I.push(k.tag)}c=!1}a++}return{list:i,styles:h}}},{key:"checkIsTime",value:function(n){n=n.replace(/\s+/g,"");for(var r=0,i=null;r<nJ.length&&!(i=nJ[r].exec(n));)r++;return i?i[0]:null}},{key:"parseVttText",value:function(n){var r=/^(<?.+?>)/g.exec(n),i="",a="default";if(r){var o=RegExp("^<"+(a=r[0].replace(/\<|\>|\&/g,""))+">(([\\s\\S])*?)</"+a+">$").exec(n);o?i=o[1]:(i=n,a="")}else i=n;for(var s=/<(\w+).(\w+)>/g,u=s.exec(i);u&&u.length>2;)u=s.exec(i=i.replace(u[0],"<"+u[1]+' class="'+u[2]+'">'));return{tag:a,text:i.replace(/\\n+/g,"<br/>")}}},{key:"parseVttTime",value:function(n){var r=n.split("--\x3e"),i=void 0,o=0;if(2===r.length){var s=r[0].split(":"),u=r[1].split(":");i=a(s),o=a(u)}return{start:i,end:o,time:n}}},{key:"isVTT",value:function(n){return nK.test(n)}},{key:"isASS",value:function(n){return nQ.test(n)}},{key:"checkFormat",value:function(n){return n?nK.test(n)?"vtt":nQ.test(n)?"ass":null:null}}]),n}(),n3=function(){function n(){var r=this;q(this,n),this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver(function(n){r.__trigger(n)}))}return tL(n,[{key:"addObserver",value:function(n,r){if(this.observer){this.observer&&this.observer.observe(n);for(var i=this.__handlers,a=-1,o=0;o<i.length;o++)i[o]&&n===i[o].target&&(a=o);a>-1?this.__handlers[a].handler.push(r):this.__handlers.push({target:n,handler:[r]})}}},{key:"unObserver",value:function(n){var r=-1;this.__handlers.map(function(i,a){n===i.target&&(r=a)}),this.observer&&this.observer.unobserve(n),r>-1&&this.__handlers.splice(r,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(n,r){for(var i=this.__handlers,a=0;a<i.length;a++)if(i[a]&&n===i[a].target){i[a].handler&&i[a].handler.map(function(i){try{i(n,r)}catch(n){}});break}}},{key:"__trigger",value:function(n){var r=this;n.map(function(n){var i=n.contentRect;r.__runHandler(n.target,i)})}}]),n}(),n7=null;!function(n,r){void 0===r&&(r={});var i=r.insertAt;if(n&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===i&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}('xg-text-track.xg-text-track {\n  font-family: "PingFang SC","SF Pro SC","SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;\n  -webkit-font-smoothing: antialiased;\n  position: absolute;\n  bottom: 0;\n  color: #fff;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center; }\n  xg-text-track.xg-text-track.text-track-no-fitvideo {\n    margin-bottom: 2%; }\n  xg-text-track.xg-text-track.text-track-hide {\n    opacity: 0;\n    visibility: hidden; }\n  xg-text-track.xg-text-track.text-track-show {\n    opacity: 1;\n    visibility: visible; }\n  xg-text-track.xg-text-track xg-text-track-inner {\n    display: block;\n    max-width: 92%; }\n  xg-text-track.xg-text-track xg-text-track-span {\n    display: -webkit-box;\n    text-align: center;\n    text-overflow: ellipsis;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    padding: 1px 4px;\n    -webkit-line-clamp: 1;\n    line-height: 120%;\n    word-break: break-word; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-deputy {\n      font-size: 75%; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-single {\n      -webkit-line-clamp: 1; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-double {\n      -webkit-line-clamp: 2; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-three {\n      -webkit-line-clamp: 3; }\n  xg-text-track.xg-text-track.text-track-bg xg-text-track-inner {\n    background-color: rgba(0, 0, 0, .54);\n    border-radius: 2px; }\n  xg-text-track.xg-text-track.text-track-stroke xg-text-track-inner {\n    background-color: none;\n    border-radius: 0;\n    text-shadow: -1px 1px 0 rgba(0, 0, 0, .7), 1px 1px 0 rgba(0, 0, 0, .7), 1px -1px 0 rgba(0, 0, 0, .7), -1px -1px 0 rgba(0, 0, 0, .7); }\n');var n6=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR"},{code:6,msg:"ABORT"},{code:7,msg:"UNKNOWN"},{code:8,msg:"DATA_ERROR:subtitle.url is null"}],n4="resize",n5=!1;return function(n){function r(n){q(this,r);var i,a,o,s,u,c,d,l=tx(this,(r.__proto__||z(r)).call(this));return i=navigator.userAgent,a=/(?:Windows Phone)/.test(i),o=/(?:SymbianOS)/.test(i)||a,s=/(?:Android)/.test(i),u=/(?:Firefox)/.test(i),c=/(?:iPad|PlayBook)/.test(i)||s&&!/(?:Mobile)/.test(i)||u&&/(?:Tablet)/.test(i),n5=/(?:iPhone)/.test(i)&&!c||s||o||c,l.currentText=null,l.textTrack=[],l._cid=-1,l._gid=-1,l._cids=[],l._iId=null,l._iC=0,l.player=null,l.root=null,l.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff"},l._ctime=0,l._loadingTrack={},nW(l.config).map(function(r){void 0!==n[r]&&null!==n[r]&&(l.config[r]=n[r])}),l._isOpen=!1,l._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},n.subTitles&&"Array"===(d=n.subTitles,Object.prototype.toString.call(d).match(/([^\s.*]+)(?=]$)/g)[0])?(n.player&&l.attachPlayer(n.player),l.setSubTitles(n.subTitles,l.config.defaultOpen),l):tx(l)}return tY(r,n),tL(r,[{key:"version",get:function(){return"1.0.12"}}]),tL(r,[{key:"setSubTitles",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this._isOpen||i;a&&this.innerRoot&&this.switchOff(),this.currentText=null,this.textTrack=[],n.map(function(n){var i={};nW(n).map(function(r){i[r]=n[r]}),i.isDefault&&(r.currentText=i),r.textTrack.push(i)}),this.currentText&&f(this.currentText).then(function(n){r.addStyles(n),o&&r.switch()})}},{key:"addStyles",value:function(n){var r=n.styles,i=n.format;r&&"vtt"===i&&(r.map(function(n){n.key||(n.key="xg-text-track-span")}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="";n.map(function(n){i+=" "+r+" "+n.key+" {"+n.style+"}"});var a=document.createElement("style"),o=document.head||document.getElementsByTagName("head")[0];if(a.type="text/css",a.id="ssss",a.styleSheet){var s=function(){try{a.styleSheet.cssText=i}catch(n){}};a.styleSheet.disabled?setTimeout(s,10):s()}else{var u=document.createTextNode(i);a.appendChild(u)}o.appendChild(a)}(r,"xg-text-track"))}},{key:"attachPlayer",value:function(n){var r=this;if(n){this.player&&this.detachPlayer();var i,a,o=this.config,s=o.fontColor,u=o.mode,d=o.fitVideo;this.player=n,this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",this._isOpen||c(this.root,"text-track-hide"),d||c(this.root,"text-track-no-fitvideo"),u&&c(this.root,"text-track-"+u),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),s&&(this.root.style.color=s),this.currentText&&["language","id","label"].map(function(n){r.root.setAttribute("data-"+n,r.currentText[n]||"")}),this.player.root.appendChild(this.root),["destroy","__onTimeupdate","_onResize"].map(function(n){r[n]=r[n].bind(r)}),this.player.on("destroy",this.destroy),this.player.on("timeupdate",this.__onTimeupdate),this._isOpen&&this.switch(),i=n.root,a=this._onResize,n7||(n7=new n3),n7.addObserver(i,a)}}},{key:"detachPlayer",value:function(){var n,r,i=this.player;i&&(i.off("destroy",this.destroy),i.off("timeupdate",this.__onTimeupdate),i.root&&(n=i.root,r=this._onResize,n7&&n7.unObserver(n,r),i.root.removeChild(this.root)),this.innerRoot=null,this.root=null,this.player=null)}},{key:"switch",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return this._loadingTrack=r,new nj(function(i,a){if(!r.id&&!r.language)return n.currentText?(n._loadingTrack={},n._updateCurrent(n.currentText),n._isOpen=!0,n.show(),void i(d(0,{message:"switch default subtitle success"}))):void a(d(5,{message:"no default subtitle"}));if(n.currentText&&h(r,n.currentText))n._loadingTrack={},n._updateCurrent(n.currentText),n._isOpen=!0,n.show(),i(d(0));else{for(var o=null,s=0;s<n.textTrack.length;s++)if(h(r,n.textTrack[s])){o=n.textTrack[s];break}o?o.list?(n._loadingTrack={},n._updateCurrent(o),n._isOpen=!0,n.show(),i(d(0))):f(o).then(function(r){(n.addStyles(r),n._loadingTrack.id===o.id||n._loadingTrack.language===r.language)?(n._loadingTrack={},n._updateCurrent(r),n._isOpen=!0,n.show(),i(d(0))):a(d(6,{message:"check _loadingTrack fail id: "+n._loadingTrack.id+"  nextSubtitle:"+r.id}))}).catch(function(n){a(n)}):a(d(4,Error("The is no subtitle with id:[{"+r.id+"}] or language:["+r.language+"]")))}})}},{key:"switchOff",value:function(){this._isOpen=!1,this.hide()}},{key:"_updateCurrent",value:function(n){var r=this;if(this.root){this.currentText=n,["language","id","label"].map(function(n){r.root.setAttribute("data-"+n,r.currentText[n]||"")}),this.__remove(this._cids);var i=this.player.currentTime;this._cids=[],this._gid=-1,this._cid=-1,this._update(i)}}},{key:"__loadAll",value:function(){this.textTrack.map(function(n){f(n)})}},{key:"getDelCid",value:function(n,r){for(var i=[],a=0;a<n.length;a++)r.includes(n[a])||i.push(n[a]);return i}},{key:"getNewCid",value:function(n,r){for(var i=[],a=0;a<r.length;a++)n.includes(r[a])||i.push(r[a]);return i}},{key:"_update",value:function(n){var r=this,i=function(n,r,i){var a=r.length;if(a<1)return -1;if(r[i=i<0?0:i>=a?a-1:i].start<=n&&n<r[i].end)return i;for(var o=r[i].end<=n?i+1:0;o<a;o++){if(r[o].start<=n&&n<r[o].end)return o;if(n>r[o].end&&o+1<a&&n<r[o+1].start||n>r[o].end&&o+1>=a)break}return -1}(n,this.currentText.list,this._gid),a=[];if(i>-1&&(a=function(n,r,i){var a=r.length;if(a<1)return[];var o=[];if((i=i<0?0:i>=a?a-1:i)<a)for(var s=r[i].end<=n?i:0;s<a&&(r[s].start<=n&&n<r[s].end&&o.push(s),!(n<r[s].start));s++);return o}(n,this.currentText.list[i].list,this._cid)),a.length<1)return this._cids.length>0&&this.__remove(this._cids),void(this._cids=[]);if(this._cids!==a||i!==this._gid){this._gid=i,this._cid=a[0];var o=this.getDelCid(this._cids,a),s=this.getNewCid(this._cids,a);this._cids=a,this.__remove(o);var u=[];s.map(function(n){var a=r.currentText.list[i].list[n];a.index=n,u.push(a)}),this.__render(u,n)}}},{key:"__onTimeupdate",value:function(){if(this._isOpen){var n=this.player.video,r=n.videoWidth,i=n.videoHeight;!this._videoMeta.scale&&r&&i&&this._onResize(this.player.root);var a=this.player.currentTime;200>Math.round(Math.abs(1e3*a-this._ctime))||(this._ctime=1e3*a,this.currentText&&this.currentText.list&&this._update(a))}}},{key:"_onResize",value:function(n){var r=this._videoMeta;if(n&&n instanceof window.Element||(n=this.player.root),this._iId&&(clearTimeout(this._iId),this._iId=null),!r.scale){if(!this.player.video)return;var i=this.player.video,a=i.videoWidth,o=i.videoHeight;if(!a||!o)return;r.videoWidth=a,r.videoHeight=o,r.scale=parseInt(o/a*100,10)}this.__startResize(n)}},{key:"resize",value:function(n,r){var i=this,a=this.config,o=a.baseSizeX,s=a.baseSizeY,u=a.minMobileSize,c=a.minSize,d=a.fitVideo,l=a.offsetBottom,f=this._videoMeta.scale;this._videoMeta.lwidth=n,this._videoMeta.lheight=r;var h=void 0,p=0;r/n*100>=f?(p=parseInt(f*n,10)/100,h=n):(p=r,h=parseInt(r/f*100,10)),this._videoMeta.vWidth=h,this._videoMeta.vHeight=p;var v=0,g=0;g=f>120?parseInt((v=s)*p/1080,10):parseInt((v=o)*h/1920,10);var _=n5?u:c,y={fontSize:g=g<_?_:g>v?v:g},m=parseInt((r-p)/2,10),b=parseInt((n-h)/2,10),A=parseInt(p*l,10)/100;this._videoMeta.vBottom=m,this._videoMeta.vLeft=b,this._videoMeta.marginBottom=A,d&&(y.bottom=m+A,y.left=y.right=b),nW(y).map(function(n){i.root.style[n]=y[n]+"px"}),this.emit(n4,{vLeft:b,vBottom:m,marginBottom:A,vWidth:h,vHeight:p,fontSize:g,scale:f})}},{key:"__startResize",value:function(n){var r=this,i=n.getBoundingClientRect(),a=this._videoMeta,o=i.width,s=i.height;if(this._iId&&(clearTimeout(this._iId),this._iId=null),o>0&&s>0&&(o!==a.lwidth||s!==a.lheight))this._iC=0,this.resize(o,s);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout(function(){r.__startResize(n)},50)}}},{key:"__remove",value:function(n){var r=this;if(n&&!(n.length<1)){for(var i=this.innerRoot.children,a=[],o=0;o<i.length;o++){var s=Number(i[o].getAttribute("data-index"));n.includes(s)&&a.push(i[o])}a.map(function(n){r.innerRoot.removeChild(n)})}}},{key:"__render",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.length>0&&r.map(function(r){var i="text-track-"+n.config.line;r.text.map(function(a,o){o>0&&(i+=" text-track-deputy");var s={"data-start":r.start,"data-end":r.end,"data-index":r.index};n.innerRoot.appendChild(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(n);return o.className=a,o.innerHTML=r,nW(i).forEach(function(r){var a=i[r];"video"===n||"audio"===n||"live-video"===n?a&&o.setAttribute(r,a):o.setAttribute(r,a)}),o}("xg-text-track-span",a,s,i))})})}},{key:"show",value:function(){var n,r;n=this.root,r="text-track-hide",n&&(n.classList?r.split(/\s+/g).forEach(function(r){n.classList.remove(r)}):u(n,r)&&r.split(/\s+/g).forEach(function(r){var i=RegExp("(\\s|^)"+r+"(\\s|$)");n.className&&"object"===tC(n.className)?n.setAttribute("class",n.getAttribute("class").replace(i," ")):n.className=n.className.replace(i," ")}))}},{key:"hide",value:function(){c(this.root,"text-track-hide"),this.innerRoot.innerHTML=""}},{key:"destroy",value:function(){this.detachPlayer(),this.removeAllListeners(),this.player=null,this.textTrack=null}},{key:"marginBottom",get:function(){var n=this._videoMeta,r=n.bottom,i=n.marginBottom;return this.config.fitVideo?r+i:i}}]),r}(nY)},n.exports=i()},103121:function(n,r,i){"use strict";i.d(r,{Vc:function(){return a},_e:function(){return o}});var a={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},o={AVC:"avc",HEVC:"hevc"}},939112:function(n,r,i){"use strict";i.d(r,{Z:function(){return o}});var a=i(306492),o=function(){function n(r){if((0,a.PA)(this,n),(0,a._x)(this,"_bytesAvailable",void 0),(0,a._x)(this,"_bitsAvailable",0),(0,a._x)(this,"_word",0),!r)throw Error("ExpGolomb data params is required");this._data=r,this._bytesAvailable=r.byteLength,this._bytesAvailable&&this._loadWord()}return(0,a.qH)(n,[{key:"_loadWord",value:function(){var n=this._data.byteLength-this._bytesAvailable,r=Math.min(4,this._bytesAvailable);if(0===r)throw Error("No bytes available");var i=new Uint8Array(4);i.set(this._data.subarray(n,n+r)),this._word=new DataView(i.buffer).getUint32(0),this._bitsAvailable=8*r,this._bytesAvailable-=r}},{key:"bitsPos",value:function(){return 8*this._bytesAvailable-this._bitsAvailable}},{key:"bitsLeft",value:function(){return 8*this._data.length-this.bitsPos()}},{key:"byteAligned",value:function(){return 0===this.bitsPos()||this.bitsPos()%8==0}},{key:"skipBits",value:function(n){if(this._bitsAvailable>n)this._word<<=n,this._bitsAvailable-=n;else{var r=Math.floor((n-=this._bitsAvailable)/8);n-=8*r,this._bytesAvailable-=r,this._loadWord(),this._word<<=n,this._bitsAvailable-=n}}},{key:"readBits",value:function(n){if(n>32)throw Error("Cannot read more than 32 bits");var r=Math.min(this._bitsAvailable,n),i=this._word>>>32-r;return(this._bitsAvailable-=r,this._bitsAvailable>0?this._word<<=r:this._bytesAvailable>0&&this._loadWord(),(r=n-r)>0&&this._bitsAvailable)?i<<r|this.readBits(r):i}},{key:"skipLZ",value:function(){var n;for(n=0;n<this._bitsAvailable;++n)if((this._word&2147483648>>>n)!=0)return this._word<<=n,this._bitsAvailable-=n,n;return this._loadWord(),n+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var n=this.skipLZ();return this.readBits(n+1)-1}},{key:"readEG",value:function(){var n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(n){for(var r=8,i=8,a=0;a<n;a++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i}}]),n}()},170792:function(n,r,i){"use strict";i.d(r,{Vc:function(){return a},_e:function(){return o},yQ:function(){return s}});var a={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},o={AVC:"avc",HEVC:"hevc",VVCC:"vvcC"},s={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"}},329772:function(n,r,i){"use strict";i.d(r,{Bh:function(){return s},_b:function(){return d},dB:function(){return l},e2:function(){return u},h9:function(){return c},i4:function(){return a},sV:function(){return o}});function a(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n[r]<<8)+(n[r+1]||0)}function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n[r]<<16)+(n[r+1]<<8)+(n[r+2]||0)}function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n[r]<<24>>>0)+(n[r+1]<<16)+(n[r+2]<<8)+(n[r+3]||0)}function u(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(r)}function c(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 4294967296*s(n,r)+s(n,r+4)}function d(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new DataView(n.buffer,n.byteOffset,n.byteLength);return i.getUint32(r)<<32|i.getUint32(r+4)}function l(n){for(var r,i="avc1.",a=0;a<3;a++)(r=n[a].toString(16)).length<2&&(r="0".concat(r)),i+=r;return i}},718863:function(n,r,i){"use strict";i.d(r,{Z:function(){return o}});var a=i(758772),o=function(){function n(r){if((0,a.PA)(this,n),(0,a._x)(this,"_bytesAvailable",void 0),(0,a._x)(this,"_bitsAvailable",0),(0,a._x)(this,"_word",0),!r)throw Error("ExpGolomb data params is required");this._data=r,this._bytesAvailable=r.byteLength,this._bytesAvailable&&this._loadWord()}return(0,a.qH)(n,[{key:"_loadWord",value:function(){var n=this._data.byteLength-this._bytesAvailable,r=Math.min(4,this._bytesAvailable);if(0===r)throw Error("No bytes available");var i=new Uint8Array(4);i.set(this._data.subarray(n,n+r)),this._word=new DataView(i.buffer).getUint32(0),this._bitsAvailable=8*r,this._bytesAvailable-=r}},{key:"bitsPos",value:function(){return 8*this._bytesAvailable-this._bitsAvailable}},{key:"bitsLeft",value:function(){return 8*this._data.length-this.bitsPos()}},{key:"byteAligned",value:function(){return 0===this.bitsPos()||this.bitsPos()%8==0}},{key:"skipBits",value:function(n){if(this._bitsAvailable>n)this._word<<=n,this._bitsAvailable-=n;else{var r=Math.floor((n-=this._bitsAvailable)/8);n-=8*r,this._bytesAvailable-=r,this._loadWord(),this._word<<=n,this._bitsAvailable-=n}}},{key:"readBits",value:function(n){if(n>32)throw Error("Cannot read more than 32 bits");var r=Math.min(this._bitsAvailable,n),i=this._word>>>32-r;return(this._bitsAvailable-=r,this._bitsAvailable>0?this._word<<=r:this._bytesAvailable>0&&this._loadWord(),(r=n-r)>0&&this._bitsAvailable)?i<<r|this.readBits(r):i}},{key:"skipLZ",value:function(){var n;for(n=0;n<this._bitsAvailable;++n)if((this._word&2147483648>>>n)!=0)return this._word<<=n,this._bitsAvailable-=n,n;return this._loadWord(),n+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var n=this.skipLZ();return this.readBits(n+1)-1}},{key:"readEG",value:function(){var n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(n){for(var r=8,i=8,a=0;a<n;a++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i}}]),n}()},535868:function(n,r,i){"use strict";i.d(r,{q:function(){return s}});var a=i(758772),o=i(693012),s=function(){function n(){(0,a.PA)(this,n),(0,a._x)(this,"id",1),(0,a._x)(this,"type",o.Vc.VIDEO),(0,a._x)(this,"codecType",o._e.AVC),(0,a._x)(this,"pid",-1),(0,a._x)(this,"hvcC",void 0),(0,a._x)(this,"codec",""),(0,a._x)(this,"timescale",0),(0,a._x)(this,"formatTimescale",0),(0,a._x)(this,"sequenceNumber",0),(0,a._x)(this,"baseMediaDecodeTime",0),(0,a._x)(this,"baseDts",0),(0,a._x)(this,"duration",0),(0,a._x)(this,"warnings",[]),(0,a._x)(this,"samples",[]),(0,a._x)(this,"pps",[]),(0,a._x)(this,"sps",[]),(0,a._x)(this,"vps",[]),(0,a._x)(this,"fpsNum",0),(0,a._x)(this,"fpsDen",0),(0,a._x)(this,"sarRatio",[]),(0,a._x)(this,"width",0),(0,a._x)(this,"height",0),(0,a._x)(this,"nalUnitSize",4),(0,a._x)(this,"present",!1),(0,a._x)(this,"isVideoEncryption",!1),(0,a._x)(this,"isAudioEncryption",!1),(0,a._x)(this,"isVideo",!0),(0,a._x)(this,"kid",null),(0,a._x)(this,"pssh",null),(0,a._x)(this,"ext",void 0)}return(0,a.qH)(n,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),n}()},476268:function(n,r,i){"use strict";i.d(r,{Z:function(){return o}});var a=i(758772),o=function(){function n(){(0,a.PA)(this,n),this.buffer=new Uint8Array(0)}return(0,a.qH)(n,[{key:"write",value:function(){for(var n=this,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];i.forEach(function(r){r?n.buffer=function(n){for(var r=0,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];a.forEach(function(n){r+=n.length});var s=new n(r),u=0;return a.forEach(function(n){s.set(n,u),u+=n.length}),s}(Uint8Array,n.buffer,r):window.console.warn(r)})}}],[{key:"writeUint16",value:function(n){return new Uint8Array([n>>8&255,255&n])}},{key:"writeUint32",value:function(n){return new Uint8Array([n>>24,n>>16&255,n>>8&255,255&n])}}]),n}()},727771:function(n,r,i){"use strict";i.d(r,{N:function(){return c}});var a=i(758772),o=i(746511),s=i(376882),u=i(40201),c=function(){function n(r,i,o){(0,a.PA)(this,n),this.videoTrack=r,this.audioTrack=i;var s=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=s&&50>Number(s[1]),this.log=new u.Y("FMP4Remuxer",!o||!o.openLog||!o.openLog)}return(0,a.qH)(n,[{key:"remux",value:function(){var n,r,i,a,s,u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=this.videoTrack,l=this.audioTrack,f=d.exist(),h=l.exist(),p=[];return u&&(c&&c.initMerge?(f&&p.push(this.videoTrack),h&&p.push(this.audioTrack),i=o.b.initSegment(p)):(f&&(n=o.b.initSegment([this.videoTrack])),h&&(r=o.b.initSegment([this.audioTrack])))),f&&d.hasSample()&&(a=this._remuxVideo()),h&&l.hasSample()&&(s=this._remuxAudio()),d.samples=[],l.samples=[],{initSegment:i,videoInitSegment:n,audioInitSegment:r,videoSegment:a,audioSegment:s}}},{key:"_remuxVideo",value:function(){var n=this.videoTrack;this.forceFirstIDR&&(n.samples[0].flag={dependsOn:2,isNonSyncSample:0});var r=n.samples,i=0;r.forEach(function(n){i+=n.units.reduce(function(n,r){return n+r.byteLength},0)+4*n.units.length});for(var a=new Uint8Array(i),u=new DataView(a.buffer),c=function(n,i){i=r[l];var o=0;i.units.forEach(function(r){u.setUint32(n,r.byteLength),n+=4,a.set(r,n),n+=r.byteLength,o+=4+r.byteLength}),i.size=o,h=n,d=i},d,l=0,f=r.length,h=0;l<f;l++)c(h,d);var p=o.b.mdat(a),v=o.b.moof([n]);return(0,s.gJ)(v,p)}},{key:"_remuxAudio",value:function(){var n=this.audioTrack,r=new Uint8Array(n.samples.reduce(function(n,r){return n+r.size},0));n.samples.reduce(function(n,i){return r.set(i.data,n),n+i.size},0);var i=o.b.mdat(r),a=o.b.moof([n]);return(0,s.gJ)(a,i)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),n}()},299917:function(n,r,i){"use strict";i.d(r,{I:function(){return d}});var a=i(758772),o=i(376882),s=i(397645),u=i(707884),c=i(693012),d=function(){function n(){(0,a.PA)(this,n)}return(0,a.qH)(n,null,[{key:"findBox",value:function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=[];if(!r)return s;for(var u=0,c="",d=0;r.length>7;){if(u=(0,o.Bh)(r),c=String.fromCharCode.apply(null,r.subarray(4,8)),d=8,1===u?(u=(0,o.h9)(r,8),d+=8):!u&&(u=r.length),!i[0]||c===i[0]){var l=r.subarray(0,u);if(!(i.length<2))return n.findBox(l.subarray(d),i.slice(1),a+d);s.push({start:a,size:u,headerSize:d,type:c,data:l})}a+=u,r=r.subarray(u)}return s}},{key:"tfhd",value:function(n){return p(n,!0,function(n,r){n.trackId=(0,o.Bh)(r);var i=4,a=1&n.flags,s=2&n.flags,u=8&n.flags,c=16&n.flags,d=32&n.flags;a&&(i+=4,n.baseDataOffset=(0,o.Bh)(r,i),i+=4),s&&(n.sampleDescriptionIndex=(0,o.Bh)(r,i),i+=4),u&&(n.defaultSampleDuration=(0,o.Bh)(r,i),i+=4),c&&(n.defaultSampleSize=(0,o.Bh)(r,i),i+=4),d&&(n.defaultSampleFlags=(0,o.Bh)(r,i))})}},{key:"sidx",value:function(n){return p(n,!0,function(n,r){var i=0;n.reference_ID=(0,o.Bh)(r,i),i+=4,n.timescale=(0,o.Bh)(r,i),i+=4,0===n.version?(n.earliest_presentation_time=(0,o.Bh)(r,i),i+=4,n.first_offset=(0,o.Bh)(r,i),i+=4):(n.earliest_presentation_time=(0,o.h9)(r,i),i+=8,n.first_offset=(0,o.h9)(r,i),i+=8),i+=2,n.references=[];var a=(0,o.i4)(r,i);i+=2;for(var s=0;s<a;s++){var u={};n.references.push(u);var c=(0,o.Bh)(r,i);i+=4,u.reference_type=c>>31&1,u.referenced_size=2147483647&c,u.subsegment_duration=(0,o.Bh)(r,i),i+=4,c=(0,o.Bh)(r,i),i+=4,u.starts_with_SAP=c>>31&1,u.SAP_type=c>>28&7,u.SAP_delta_time=268435455&c}})}},{key:"moov",value:function(r){return p(r,!1,function(r,i,a){r.mvhd=n.mvhd(n.findBox(i,["mvhd"],a)[0]),r.trak=n.findBox(i,["trak"],a).map(function(r){return n.trak(r)}),r.pssh=n.pssh(n.findBox(i,["pssh"],a)[0])})}},{key:"mvhd",value:function(n){return p(n,!0,function(n,r){var i=0;1===n.version?(n.timescale=(0,o.Bh)(r,16),n.duration=(0,o.h9)(r,20),i+=28):(n.timescale=(0,o.Bh)(r,8),n.duration=(0,o.Bh)(r,12),i+=16),n.nextTrackId=(0,o.Bh)(r,i+76)})}},{key:"trak",value:function(r){return p(r,!1,function(r,i,a){r.tkhd=n.tkhd(n.findBox(i,["tkhd"],a)[0]),r.mdia=n.mdia(n.findBox(i,["mdia"],a)[0]),r.edts=n.edts(n.findBox(i,["edts"],a)[0])})}},{key:"tkhd",value:function(n){return p(n,!0,function(n,r){var i=0;1===n.version?(n.trackId=(0,o.Bh)(r,16),n.duration=(0,o.h9)(r,24),i+=32):(n.trackId=(0,o.Bh)(r,8),n.duration=(0,o.Bh)(r,16),i+=20),n.width=(0,o.Bh)(r,i+52),n.height=(0,o.Bh)(r,i+56)})}},{key:"mdia",value:function(r){return p(r,!1,function(r,i,a){r.mdhd=n.mdhd(n.findBox(i,["mdhd"],a)[0]),r.hdlr=n.hdlr(n.findBox(i,["hdlr"],a)[0]),r.minf=n.minf(n.findBox(i,["minf"],a)[0])})}},{key:"edts",value:function(r){return p(r,!1,function(r,i,a){r.elst=n.elst(n.findBox(i,["elst"],a)[0])})}},{key:"elst",value:function(n){return p(n,!0,function(n,r,i){n.entries=[],n.entriesData=r;var a=0,s=(0,o.Bh)(r,a);a+=4;for(var u=0;u<s;u++){var c={};n.entries.push(c),1===n.version?(c.segment_duration=(0,o.h9)(r,a),a+=8,c.media_time=(0,o._b)(r,a),a+=8):(c.segment_duration=(0,o.Bh)(r,a),a+=4,c.media_time=(0,o.e2)(r,a),a+=4),c.media_rate_integer=(0,o.i4)(r,a),a+=2,c.media_rate_fraction=(0,o.i4)(r,i),a+=2}})}},{key:"mdhd",value:function(n){return p(n,!0,function(n,r){var i=0;1===n.version?(n.timescale=(0,o.Bh)(r,16),n.duration=(0,o.h9)(r,20),i+=28):(n.timescale=(0,o.Bh)(r,8),n.duration=(0,o.Bh)(r,12),i+=16);var a=(0,o.i4)(r,i);n.language=String.fromCharCode((a>>10&31)+96,(a>>5&31)+96,(31&a)+96)})}},{key:"hdlr",value:function(n){return p(n,!0,function(n,r){0===n.version&&(n.handlerType=String.fromCharCode.apply(null,r.subarray(4,8)))})}},{key:"minf",value:function(r){return p(r,!1,function(r,i,a){r.vmhd=n.vmhd(n.findBox(i,["vmhd"],a)[0]),r.smhd=n.smhd(n.findBox(i,["smhd"],a)[0]),r.stbl=n.stbl(n.findBox(i,["stbl"],a)[0])})}},{key:"vmhd",value:function(n){return p(n,!0,function(n,r){n.graphicsmode=(0,o.i4)(r),n.opcolor=[(0,o.i4)(r,2),(0,o.i4)(r,4),(0,o.i4)(r,6)]})}},{key:"smhd",value:function(n){return p(n,!0,function(n,r){n.balance=(0,o.i4)(r)})}},{key:"stbl",value:function(r){return p(r,!1,function(r,i,a){r.stsd=n.stsd(n.findBox(i,["stsd"],a)[0]),r.stts=n.stts(n.findBox(i,["stts"],a)[0]),r.ctts=n.ctts(n.findBox(i,["ctts"],a)[0]),r.stsc=n.stsc(n.findBox(i,["stsc"],a)[0]),r.stsz=n.stsz(n.findBox(i,["stsz"],a)[0]),r.stco=n.stco(n.findBox(i,["stco"],a)[0]),!r.stco&&(r.co64=n.co64(n.findBox(i,["co64"],a)[0]),r.stco=r.co64);var o,s,u,c=null===(o=r.stsd.entries[0])||void 0===o?void 0:null===(s=o.sinf)||void 0===s?void 0:null===(u=s.schi)||void 0===u?void 0:u.tenc.default_IV_size;r.stss=n.stss(n.findBox(i,["stss"],a)[0]),r.senc=n.senc(n.findBox(i,["senc"],a)[0],c)})}},{key:"senc",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return p(n,!0,function(n,i){var a=0,s=(0,o.Bh)(i,a);a+=4,n.samples=[];for(var u=0;u<s;u++){var c={};c.InitializationVector=[];for(var d=0;d<r;d++)c.InitializationVector[d]=i[a+d];if(a+=r,2&n.flags){c.subsamples=[];var l=(0,o.i4)(i,a);a+=2;for(var f=0;f<l;f++){var h={};h.BytesOfClearData=(0,o.i4)(i,a),a+=2,h.BytesOfProtectedData=(0,o.Bh)(i,a),a+=4,c.subsamples.push(h)}}n.samples.push(c)}})}},{key:"pssh",value:function(n){return p(n,!0,function(n,r){for(var i=[],a=[],s=0,u=0;u<16;u++)a.push(g(r[s+u]));if(s+=16,n.version>0){var c=(0,o.Bh)(r,s);s+=4;for(var d=0;d<(""+c).length;d++)for(var l=0;l<16;l++){var f=r[s];s+=1,i.push(g(f))}}var h=(0,o.Bh)(r,s);n.data_size=h,s+=4,n.kid=i,n.system_id=a,n.buffer=r})}},{key:"bvc2",value:function(r){return p(r,!1,function(r,i,a){var o=f(r,i),s=i.subarray(o);a+=o,r.vvcC=n.bv2C(n.findBox(s,["bv2C"],a)[0]),r.pasp=n.pasp(n.findBox(s,["pasp"],a)[0])})}},{key:"bv2C",value:function(n){return p(n,!1,function(n,r,i){var a=u.i.parseVVCDecoderConfigurationRecord(r);for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])})}},{key:"stsd",value:function(r){return p(r,!0,function(r,i,a){r.entryCount=(0,o.Bh)(i),r.entries=n.findBox(i.subarray(4),[],a+4).map(function(r){switch(r.type){case"avc1":case"avc2":case"avc3":case"avc4":return n.avc1(r);case"hvc1":case"hev1":return n.hvc1(r);case"bvc2":return n.bvc2(r);case"mp4a":return n.mp4a(r);case"alaw":case"ulaw":return n.alaw(r);case"enca":return p(r,!1,function(r,i,a){r.channelCount=(0,o.i4)(i,16),r.samplesize=(0,o.i4)(i,18),r.sampleRate=(0,o.Bh)(i,24)/65536,i=i.subarray(28),r.sinf=n.sinf(n.findBox(i,["sinf"],a)[0]),r.esds=n.esds(n.findBox(i,["esds"],a)[0])});case"encv":return p(r,!1,function(r,i,a){r.width=(0,o.i4)(i,24),r.height=(0,o.i4)(i,26),r.horizresolution=(0,o.Bh)(i,28),r.vertresolution=(0,o.Bh)(i,32),i=i.subarray(78),r.sinf=n.sinf(n.findBox(i,["sinf"],a)[0]),r.avcC=n.avcC(n.findBox(i,["avcC"],a)[0]),r.hvcC=n.hvcC(n.findBox(i,["hvcC"],a)[0]),r.pasp=n.pasp(n.findBox(i,["pasp"],a)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(n){return p(n,!1,function(n,r){var i=6;n.default_IsEncrypted=r[i],i+=1,n.default_IV_size=r[i],i+=1,n.default_KID=[];for(var a=0;a<16;a++)n.default_KID.push(g(r[i])),i+=1})}},{key:"schi",value:function(r){return p(r,!1,function(r,i,a){r.tenc=n.tenc(n.findBox(i,["tenc"],a)[0])})}},{key:"sinf",value:function(r){return p(r,!1,function(r,i,a){r.schi=n.schi(n.findBox(i,["schi"],a)[0]),r.frma=n.frma(n.findBox(i,["frma"],a)[0])})}},{key:"frma",value:function(n){return p(n,!1,function(n,r){n.data_format="";for(var i=0;i<4;i++)n.data_format+=String.fromCharCode(r[i])})}},{key:"avc1",value:function(r){return p(r,!1,function(r,i,a){var o=f(r,i),s=i.subarray(o);a+=o,r.avcC=n.avcC(n.findBox(s,["avcC"],a)[0]),r.pasp=n.pasp(n.findBox(s,["pasp"],a)[0])})}},{key:"avcC",value:function(n){return p(n,!1,function(n,r){n.configurationVersion=r[0],n.AVCProfileIndication=r[1],n.profileCompatibility=r[2],n.AVCLevelIndication=r[3],n.codec=(0,o.dB)([r[1],r[2],r[3]]),n.lengthSizeMinusOne=3&r[4],n.spsLength=31&r[5],n.sps=[];for(var i=6,a=0;a<n.spsLength;a++){var s=(0,o.i4)(r,i);i+=2,n.sps.push(r.subarray(i,i+s)),i+=s}n.ppsLength=r[i],i+=1,n.pps=[];for(var u=0;u<n.ppsLength;u++){var c=(0,o.i4)(r,i);i+=2,n.pps.push(r.subarray(i,i+=c)),i+=c}})}},{key:"hvc1",value:function(r){return p(r,!1,function(r,i,a){var o=f(r,i),s=i.subarray(o);a+=o,r.hvcC=n.hvcC(n.findBox(s,["hvcC"],a)[0]),r.pasp=n.pasp(n.findBox(s,["pasp"],a)[0])})}},{key:"hvcC",value:function(n){return p(n,!1,function(r,i){r.data=n.data,r.codec="hev1.1.6.L93.B0",r.configurationVersion=i[0];var a=i[1];r.generalProfileSpace=a>>6,r.generalTierFlag=(32&a)>>5,r.generalProfileIdc=31&a,r.generalProfileCompatibility=(0,o.Bh)(i,2),r.generalConstraintIndicatorFlags=i.subarray(6,12),r.generalLevelIdc=i[12],r.avgFrameRate=(0,o.i4)(i,19),r.numOfArrays=i[22],r.vps=[],r.sps=[],r.pps=[];for(var s=23,u=0,c=0,d=0,l=0;l<r.numOfArrays;l++){u=63&i[s],c=(0,o.i4)(i,s+1),s+=3;for(var f,h,p,v=[],g=0;g<c;g++)d=(0,o.i4)(i,s),s+=2,v.push(i.subarray(s,s+d)),s+=d;32===u?(f=r.vps).push.apply(f,v):33===u?(h=r.sps).push.apply(h,v):34===u&&(p=r.pps).push.apply(p,v)}})}},{key:"pasp",value:function(n){return p(n,!1,function(n,r){n.hSpacing=(0,o.Bh)(r),n.vSpacing=(0,o.Bh)(r,4)})}},{key:"mp4a",value:function(r){return p(r,!1,function(r,i,a){var o=h(r,i);r.esds=n.esds(n.findBox(i.subarray(o),["esds"],a+o)[0])})}},{key:"esds",value:function(n){return p(n,!0,function(n,r){n.codec="mp4a.";for(var i=0,a=0,o=0,s=0;r.length;){for(s=r[i=0],a=r[i+1],i+=2;128&a;)o=(127&a)<<7,a=r[i],i+=1;if(o+=127&a,3===s)r=r.subarray(i+3);else if(4===s)n.codec+=(r[i].toString(16)+".").padStart(3,"0"),r=r.subarray(i+13);else if(5===s){var u=n.config=r.subarray(i,i+o),c=(248&u[0])>>3;31===c&&u.length>=2&&(c=32+((7&u[0])<<3)+((224&u[1])>>5)),n.objectType=c,n.codec+=c.toString(16),"."===n.codec[n.codec.length-1]&&(n.codec=n.codec.substring(0,n.codec.length-1));return}else{"."===n.codec[n.codec.length-1]&&(n.codec=n.codec.substring(0,n.codec.length-1));return}}})}},{key:"alaw",value:function(n){return p(n,!1,function(n,r){h(n,r)})}},{key:"stts",value:function(n){return p(n,!0,function(n,r){for(var i=(0,o.Bh)(r),a=[],s=4,u=0;u<i;u++)a.push({count:(0,o.Bh)(r,s),delta:(0,o.Bh)(r,s+4)}),s+=8;n.entryCount=i,n.entries=a})}},{key:"ctts",value:function(n){return p(n,!0,function(n,r){var i=(0,o.Bh)(r),a=[],s=4;if(1===n.version)for(var u=0;u<i;u++)a.push({count:(0,o.Bh)(r,s),offset:(0,o.Bh)(r,s+4)}),s+=8;else for(var c=0;c<i;c++)a.push({count:(0,o.Bh)(r,s),offset:-(~(0,o.Bh)(r,s+4)+1)}),s+=8;n.entryCount=i,n.entries=a})}},{key:"stsc",value:function(n){return p(n,!0,function(n,r){for(var i=(0,o.Bh)(r),a=Array(i),s=4,u=0;u<i;u++)a[u]={firstChunk:(0,o.Bh)(r,s),samplesPerChunk:(0,o.Bh)(r,s+4),sampleDescriptionIndex:(0,o.Bh)(r,s+8)},s+=12;n.entryCount=i,n.entries=a})}},{key:"stsz",value:function(n){return p(n,!0,function(n,r){var i=(0,o.Bh)(r),a=(0,o.Bh)(r,4),s=Array(a);if(!i){for(var u=8,c=0;c<a;c++)s[c]=(0,o.Bh)(r,u),u+=4}n.sampleSize=i,n.sampleCount=a,n.entrySizes=s})}},{key:"stco",value:function(n){return p(n,!0,function(n,r){for(var i=(0,o.Bh)(r),a=Array(i),s=4,u=0;u<i;u++)a[u]=(0,o.Bh)(r,s),s+=4;n.entryCount=i,n.entries=a})}},{key:"co64",value:function(n){return p(n,!0,function(n,r){for(var i=(0,o.Bh)(r),a=Array(i),s=4,u=0;u<i;u++)a[u]=(0,o.h9)(r,s),s+=8;n.entryCount=i,n.entries=a})}},{key:"stss",value:function(n){return p(n,!0,function(n,r){for(var i=(0,o.Bh)(r),a=Array(i),s=4,u=0;u<i;u++)a[u]=(0,o.Bh)(r,s),s+=4;n.entryCount=i,n.entries=a})}},{key:"moof",value:function(r){return p(r,!1,function(r,i,a){r.mfhd=n.mfhd(n.findBox(i,["mfhd"],a)[0]),r.traf=n.findBox(i,["traf"],a).map(function(r){return n.traf(r)})})}},{key:"mfhd",value:function(n){return p(n,!0,function(n,r){n.sequenceNumber=(0,o.Bh)(r)})}},{key:"traf",value:function(r){return p(r,!1,function(r,i,a){r.tfhd=n.tfhd(n.findBox(i,["tfhd"],a)[0]),r.tfdt=n.tfdt(n.findBox(i,["tfdt"],a)[0]),r.trun=n.trun(n.findBox(i,["trun"],a)[0])})}},{key:"trun",value:function(n){return p(n,!0,function(n,r){var i=n.version,a=n.flags,s=r.length,u=n.sampleCount=(0,o.Bh)(r),c=4;if(s>4&&1&a&&(n.dataOffset=-(~(0,o.Bh)(r,c)+1),c+=4),s>c&&4&a&&(n.firstSampleFlags=(0,o.Bh)(r,c),c+=4),s>c){n.samples=Array(u);for(var d,l=0;l<u;l++)d={},256&a&&(d.duration=(0,o.Bh)(r,c),c+=4),512&a&&(d.size=(0,o.Bh)(r,c),c+=4),1024&a&&(d.flags=(0,o.Bh)(r,c),c+=4),2048&a&&(i?d.cts=-(~(0,o.Bh)(r,c+4)+1):d.cts=(0,o.Bh)(r,c),c+=4),n.samples[l]=d}})}},{key:"tfdt",value:function(n){return p(n,!0,function(n,r){1===n.version?n.baseMediaDecodeTime=(0,o.h9)(r):n.baseMediaDecodeTime=(0,o.Bh)(r)})}},{key:"probe",value:function(r){return!!n.findBox(r,["ftyp"])}},{key:"parseSampleFlags",value:function(n){return{isLeading:(12&n[0])>>>2,dependsOn:3&n[0],isDependedOn:(192&n[1])>>>6,hasRedundancy:(48&n[1])>>>4,paddingValue:(14&n[1])>>>1,isNonSyncSample:1&n[1],degradationPriority:n[2]<<8|n[3]}}},{key:"moovToTrack",value:function(n,r,i){var a=n.trak;if(a&&a.length){var o=a.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="vide"}),u=a.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="soun"});if(o&&r){var d,l,f,h,p,v,g,_,y,m,b,A,I,k,E,T,S,C,x=null===(f=o.tkhd)||void 0===f?void 0:f.trackId;null!=x&&(r.id=o.tkhd.trackId),r.tkhdDuration=o.tkhd.duration,r.mvhdDurtion=n.mvhd.duration,r.mvhdTimecale=n.mvhd.timescale,r.timescale=r.formatTimescale=o.mdia.mdhd.timescale,r.duration=o.mdia.mdhd.duration||r.mvhdDurtion/r.mvhdTimecale*r.timescale,null!==(h=o.edts)&&void 0!==h&&h.elst&&(r.editList=o.edts.elst,r.editListApplied=o.editListApplied);var w=o.mdia.minf.stbl.stsd.entries[0];if(r.width=w.width,r.height=w.height,w.pasp&&(r.sarRatio=[w.pasp.hSpacing,w.pasp.vSpacing]),w.hvcC)r.codecType=c._e.HEVC,r.codec=w.hvcC.codec,r.vps=w.hvcC.vps,r.sps=w.hvcC.sps,r.pps=w.hvcC.pps,r.hvcC=w.hvcC.data;else if(w.avcC)r.codec=w.avcC.codec,r.sps=w.avcC.sps,r.pps=w.avcC.pps;else if(w.vvcC)r.codecType=c._e.VVCC,r.codec=w.vvcC.codec,r.sps=w.vvcC.sps,r.pps=w.vvcC.pps,r.vps=w.vvcC.vps,r.vvcC=w.vvcC.data;else throw Error("unknown video stsd entry");r.present=!0,r.ext={},r.ext.stss=null===(p=o.mdia)||void 0===p?void 0:null===(v=p.minf)||void 0===v?void 0:null===(g=v.stbl)||void 0===g?void 0:g.stss,r.ext.ctts=null===(_=o.mdia)||void 0===_?void 0:null===(y=_.minf)||void 0===y?void 0:null===(m=y.stbl)||void 0===m?void 0:m.ctts,w&&"encv"===w.type&&(r.isVideoEncryption=!0,w.default_KID=null===(b=w.sinf)||void 0===b?void 0:null===(A=b.schi)||void 0===A?void 0:A.tenc.default_KID,w.default_IsEncrypted=null===(I=w.sinf)||void 0===I?void 0:null===(k=I.schi)||void 0===k?void 0:k.tenc.default_IsEncrypted,w.default_IV_size=null===(E=w.sinf)||void 0===E?void 0:null===(T=E.schi)||void 0===T?void 0:T.tenc.default_IV_size,r.videoSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,w.data_format=null===(S=w.sinf)||void 0===S?void 0:null===(C=S.frma)||void 0===C?void 0:C.data_format,r.useEME=n.useEME,r.kidValue=n.kidValue,r.pssh=n.pssh,r.encv=w)}if(u&&i){var R,D,L,O,P,B,N,M,Z,V,U,F,j,G,W,Y,H,K,X=null===(R=u.tkhd)||void 0===R?void 0:R.trackId;null!=X&&(i.id=u.tkhd.trackId),i.tkhdDuration=u.tkhd.duration,i.mvhdDurtion=n.mvhd.duration,i.mvhdTimecale=n.mvhd.timescale,i.timescale=i.formatTimescale=u.mdia.mdhd.timescale,i.duration=u.mdia.mdhd.duration||i.mvhdDurtion/i.mvhdTimecale*i.timescale,null!==(D=u.edts)&&void 0!==D&&D.elst&&(i.editList=u.edts.elst,i.editListApplied=u.editListApplied);var z=u.mdia.minf.stbl.stsd.entries[0];switch(i.sampleSize=z.sampleSize,i.sampleRate=z.sampleRate,i.channelCount=z.channelCount,i.present=!0,z.type){case"alaw":i.codecType=i.codec=c.yQ.G711PCMA,i.sampleRate=8e3;break;case"ulaw":i.codecType=i.codec=c.yQ.G711PCMU,i.sampleRate=8e3;break;default:i.sampleDuration=s.W.getFrameDuration(i.sampleRate,i.timescale),i.sampleRateIndex=s.W.getRateIndexByRate(i.sampleRate),i.objectType=(null===(d=z.esds)||void 0===d?void 0:d.objectType)||2,z.esds&&(i.config=Array.from(z.esds.config)),i.codec=(null===(l=z.esds)||void 0===l?void 0:l.codec)||"mp4a.40.2"}i.sampleDuration=s.W.getFrameDuration(i.sampleRate,i.timescale),i.objectType=(null===(L=z.esds)||void 0===L?void 0:L.objectType)||2,z.esds&&z.esds.config&&(i.config=Array.from(z.esds.config)),i.codec=(null===(O=z.esds)||void 0===O?void 0:O.codec)||"mp4a.40.2",i.sampleRateIndex=s.W.getRateIndexByRate(i.sampleRate),i.ext={},i.ext.stss=null===(P=u.mdia)||void 0===P?void 0:null===(B=P.minf)||void 0===B?void 0:null===(N=B.stbl)||void 0===N?void 0:N.stss,i.ext.ctts=null===(M=u.mdia)||void 0===M?void 0:null===(Z=M.minf)||void 0===Z?void 0:null===(V=Z.stbl)||void 0===V?void 0:V.ctts,i.present=!0,z&&"enca"===z.type&&(i.isAudioEncryption=!0,z.data_format=null===(U=z.sinf)||void 0===U?void 0:null===(F=U.frma)||void 0===F?void 0:F.data_format,z.default_KID=null===(j=z.sinf)||void 0===j?void 0:null===(G=j.schi)||void 0===G?void 0:G.tenc.default_KID,z.default_IsEncrypted=null===(W=z.sinf)||void 0===W?void 0:null===(Y=W.schi)||void 0===Y?void 0:Y.tenc.default_IsEncrypted,z.default_IV_size=null===(H=z.sinf)||void 0===H?void 0:null===(K=H.schi)||void 0===K?void 0:K.tenc.default_IV_size,i.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,i.useEME=n.useEME,i.kidValue=n.kidValue,i.enca=z)}if(i&&(i.isVideoEncryption=!!r&&r.isVideoEncryption),r&&(r.isAudioEncryption=!!i&&i.isAudioEncryption),null!=r&&r.encv||null!=i&&i.enca){var q,Q,J=null==r?void 0:null===(q=r.encv)||void 0===q?void 0:q.default_KID,$=null==i?void 0:null===(Q=i.enca)||void 0===Q?void 0:Q.default_KID,ee=J||$?(J||$).join(""):null;r&&(r.kid=ee),i&&(i.kid=ee)}return r&&(r.flags=3841),i&&(i.flags=1793),{videoTrack:r,audioTrack:i}}}},{key:"evaluateDefaultDuration",value:function(n,r,i){var a,o=null==r?void 0:null===(a=r.samples)||void 0===a?void 0:a.length;return o?1024*o/r.timescale*n.timescale/i:1024}},{key:"moofToSamples",value:function(r,i,a){var o={};return r.mfhd&&(i&&(i.sequenceNumber=r.mfhd.sequenceNumber),a&&(a.sequenceNumber=r.mfhd.sequenceNumber)),r.traf.forEach(function(r){var s=r.tfhd,u=r.tfdt,c=r.trun;if(s&&c){u&&(i&&i.id===s.trackId&&(i.baseMediaDecodeTime=u.baseMediaDecodeTime),a&&a.id===s.trackId&&(a.baseMediaDecodeTime=u.baseMediaDecodeTime));var d=s.defaultSampleSize||0,l=s.defaultSampleDuration||n.evaluateDefaultDuration(i,a,c.samples.length||c.sampleCount),f=c.dataOffset||0,h=0,p=-1;if(!c.samples.length&&c.sampleCount){o[s.trackId]=Array(c.sampleCount);for(var v=0;v<c.sampleCount;v++)o[s.trackId][v]={offset:f,dts:h,duration:l,size:d},h+=l,f+=d}else o[s.trackId]=c.samples.map(function(n,r){return(n={offset:f,dts:h,pts:h+(n.cts||0),duration:n.duration||l,size:n.size||d,gopId:p,keyframe:0===r||null!==n.flags&&void 0!==n.flags&&(65536&n.flags)>>>0!=65536}).keyframe&&(p++,n.gopId=p),h+=n.duration,f+=n.size,n})}}),o}},{key:"moovToSamples",value:function(n){var r=n.trak;if(!!r&&!!r.length){var i=r.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="vide"}),a=r.find(function(n){var r,i;return(null===(r=n.mdia)||void 0===r?void 0:null===(i=r.hdlr)||void 0===i?void 0:i.handlerType)==="soun"});if(i||a){if(i){var o,s,u,c,d=null===(u=i.mdia)||void 0===u?void 0:null===(c=u.minf)||void 0===c?void 0:c.stbl;if(!d)return;var f=d.stts,h=d.stsc,p=d.stsz,v=d.stco,g=d.stss,_=d.ctts;if(!f||!h||!p||!v||!g)return;o=l(f,h,p,v,_,g)}if(a){var y,m,b,A=null===(y=a.mdia)||void 0===y?void 0:null===(m=y.minf)||void 0===m?void 0:m.stbl;if(!A)return;var I=null===(b=a.mdia.mdhd)||void 0===b?void 0:b.timescale,k=A.stts,E=A.stsc,T=A.stsz,S=A.stco;if(!I||!k||!E||!T||!S)return;s=l(k,E,T,S)}return{videoSamples:o,audioSamples:s}}}}}]),n}();function l(n,r,i,a,o,s){var u,c,d,l=[],f=null==o?void 0:o.entries,h=r.entries,p=a.entries,v=i.entrySizes,g=null==s?void 0:s.entries;g&&(u={},g.forEach(function(n){u[n-1]=!0})),f&&(c=[],f.forEach(function(n){for(var r=n.count,i=n.offset,a=0;a<r;a++)c.push(i)}));var _=-1,y=0,m=0,b=0,A=0,I=0,k=h[0].samplesPerChunk,E=h[1]?h[1].firstChunk-1:1/0;return n.entries.forEach(function(n){for(var r=n.count,a=n.delta,o=0;o<r;o++)d={dts:y,duration:a,size:v[m]||i.sampleSize,offset:p[b]+I,index:m},g&&(d.keyframe=u[m],d.keyframe&&_++,d.gopId=_),c&&m<c.length&&(d.pts=d.dts+c[m]),l.push(d),y+=a,++m<k?I+=d.size:(b++,I=0,b>=E&&(E=h[++A+1]?h[A+1].firstChunk-1:1/0),k+=h[A].samplesPerChunk)}),l}function f(n,r){return n.dataReferenceIndex=(0,o.i4)(r,6),n.width=(0,o.i4)(r,24),n.height=(0,o.i4)(r,26),n.horizresolution=(0,o.Bh)(r,28),n.vertresolution=(0,o.Bh)(r,32),n.frameCount=(0,o.i4)(r,40),n.depth=(0,o.i4)(r,74),78}function h(n,r){return n.dataReferenceIndex=(0,o.i4)(r,6),n.channelCount=(0,o.i4)(r,16),n.sampleSize=(0,o.i4)(r,18),n.sampleRate=(0,o.Bh)(r,24)/65536,28}function p(n,r,i){if(n){if(n.size!==n.data.length)throw Error("box ".concat(n.type," size !== data.length"));var a={start:n.start,size:n.size,headerSize:n.headerSize,type:n.type};return r&&(a.version=n.data[n.headerSize],a.flags=(0,o.sV)(n.data,n.headerSize+1),a.headerSize+=4),i(a,n.data.subarray(a.headerSize),a.start+a.headerSize),a}}var v=function(n,r,i){for(var a=String(i),o=r>>0,s=Math.ceil(o/a.length),u=[],c=String(n);s--;)u.push(a);return u.join("").substring(0,o-c.length)+c},g=function(){for(var n=[],r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.forEach(function(r){n.push(v(Number(r).toString(16),2,0))}),n[0]}},805838:function(n,r,i){"use strict";i.d(r,{Dt:function(){return u},vU:function(){return s}});var a="undefined"!=typeof window,o=a&&navigator.userAgent.toLocaleLowerCase();a&&/^((?!chrome|android).)*safari/.test(o);var s=a&&o.includes("firefox"),u=a&&o.includes("android")},376882:function(n,r,i){"use strict";function a(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=new Uint8Array((r=r.filter(Boolean)).reduce(function(n,r){return n+r.byteLength},0)),o=0;return r.forEach(function(n){a.set(n,o),o+=n.byteLength}),a}i.d(r,{Bh:function(){return u},Qc:function(){return p},_b:function(){return l},dB:function(){return f},e2:function(){return c},gJ:function(){return a},h9:function(){return d},i4:function(){return o},mw:function(){return h},sV:function(){return s}});function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n[r]<<8)+(n[r+1]||0)}function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n[r]<<16)+(n[r+1]<<8)+(n[r+2]||0)}function u(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n[r]<<24>>>0)+(n[r+1]<<16)+(n[r+2]<<8)+(n[r+3]||0)}function c(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(r)}function d(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 4294967296*u(n,r)+u(n,r+4)}function l(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new DataView(n.buffer,n.byteOffset,n.byteLength);return i.getUint32(r)<<32|i.getUint32(r+4)}function f(n){for(var r,i="avc1.",a=0;a<3;a++)(r=n[a].toString(16)).length<2&&(r="0".concat(r)),i+=r;return i}function h(n){var r="";if(n.forEach(function(n){r+=function(n){return("0"+Number(n).toString(16)).slice(-2).toUpperCase()}(n)}),r.length<=32){for(var i=32-r.length,a=0;a<i;a++)r+="0"}return r}function p(n){if(!Array.isArray(n)){for(var r=[],i="",a=0;a<n.length;a++)a%2&&(i=n[a-1]+n[a],r.push(parseInt(i,16)),i="");return r}return n.map(function(n){return parseInt(n,16)})}}}]);