"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["17275"],{606667:function(e,t,n){n.d(t,{$e:function(){return s},CI:function(){return u},Dm:function(){return d},yH:function(){return c}});var i=n(520739),l=n(878389),r=n(270414),o=n(358354),a=n(63746);let u=async e=>a.ZP.get("/webcast/gift/exhibition/home/",{params:(0,l._)((0,i._)({},(0,r.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",anchor_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,exhibition_source:null==e?void 0:e.exhibitionSource})}),d=async e=>a.ZP.get("/webcast/gift/exhibition/rare/",{params:(0,l._)((0,i._)({},(0,r.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",target_uid:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId})}),s=async e=>a.ZP.get("/webcast/gift/exhibition/achievement/detail/",{params:(0,l._)((0,i._)({},(0,r.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",anchor_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,group_id:null==e?void 0:e.groupId})}),c=async e=>a.ZP.get("/webcast/gift/exhibition/gift/detail/",{params:(0,l._)((0,i._)({},(0,r.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",anchor_id:null==e?void 0:e.anchorId,target_open_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,group_id:null==e?void 0:e.groupId,task_id:null==e?void 0:e.taskId,gift_id:null==e?void 0:e.giftId})})},990366:function(e,t,n){n.d(t,{dp:function(){return b},T:function(){return N},K6:function(){return w}});var i=n("520739"),l=n("878389"),r=n("368200");n("874386"),n("527785"),n("429532");var o=n("563097"),a=n("88648"),u=n("727233"),d=n("668974"),s=n("207964"),c=n("96008"),v=n.n(c),_=n("747409"),f=n("273737"),m=n("797973"),h=n("983096"),p=n("677487"),g=n("58655"),y=n("919441");let{Context:E,useCtxSelector:w}=(0,d.q)({enable:!1,isAbrOpen:!1,abrQuality:"",setIsAbrOpen:v(),getIsAbrOpen:()=>!1,getShouldDisableManualHandler:()=>!1});function I(e){let{qualities:t,streamInfo:n,getPlayerUrl:l,player:r,setQuality:d,maxAbrQuality:c="origin",disableChange:v,setPlayerUrl:p,updateConfig:g}=e,w=(0,s.useGetAbrQualityAB)(),[I,S]=(0,a.useState)(()=>w&&(0,_.RE)()),b=(0,a.useRef)(I),N=(0,m.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l();return(0,f.n5)({url:e,streamInfo:n,qualities:t})}),[L,x]=(0,a.useState)(()=>{var e;return(null===(e=N())||void 0===e?void 0:e.quality)||""}),{isPlayerAbrInit:C,updateConfig:T}=function(e){let{updateConfig:t}=e,n=(0,s.useAbrQualityInitDelayTime)(),[l,r]=(0,y.Z)(!n),o=(0,a.useRef)({}),u=(0,m.Z)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.current=(0,i._)({},o.current,e),(l||n)&&t(o.current)});return(0,a.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>{r(!0),u({},!0)},n);return()=>{clearTimeout(e)}},[n]),{updateConfig:u,isPlayerAbrInit:l}}({updateConfig:g,enable:w}),P=(0,m.Z)(e=>{if(b.current=e,e){_.t4.clear();let t=N();if((0,u.WH)("LiveAbrCtxProviderMain_setIsAbrOpen",(0,i._)({isOpen:e},t)),!t)return;let{bitrate:n,quality:l}=t;x(l),T({open:e,bitrate:n})}else(0,u.WH)("LiveAbrCtxProviderMain_setIsAbrOpen",{isOpen:e}),T({open:e});S(e)}),k=(0,m.Z)(()=>{var e,i;let r=(null===(e=N())||void 0===e?void 0:e.quality)||L,o=(null===(i=N())||void 0===i?void 0:i.bitrate)||void 0,a=v?[r]:(0,_.GU)({qualities:t,maxAbrQuality:c,currentQuality:r}),{urls:d}=(0,_.zV)({streamInfo:n,qualities:a,currentUrlMap:{[o]:l()}});return o&&(null==d?void 0:d[o])?{urls:d,currentBitrate:o,open:I}:((0,u.WH)("LiveAbrCtxProviderMain_getCurrentUrlsAndBitrateError",{currentQuality:r,canUseQualities:a,currentBitrate:o,abrQuality:L,urls:d}),{urls:{},currentBitrate:void 0,open:!1})});(0,a.useEffect)(()=>{let{urls:e,currentBitrate:t,open:n}=k();T({urls:e,open:n,bitrate:t})},[n,t,v]),(0,a.useEffect)(()=>{let{urls:e,currentBitrate:t,open:n}=k();T({urls:e,bitrate:t,open:n}),(0,u.WH)("LiveAbrCtxProviderMain_isAbrOpen",{urls:e,currentBitrate:t,open:n})},[I]),(0,_.ln)(e=>{let{quality:i}=e;if(!I)return;let l=(0,_.qN)({quality:i,streamInfo:n});if(l&&r){let{urls:e}=(0,_.zV)({streamInfo:n,qualities:t}),r=e[l];r&&p(r),T({urls:e,bitrate:l}),x(i)}});let R=(0,m.Z)(e=>{var t;let n=null===(t=N(e))||void 0===t?void 0:t.quality;(0,u.WH)("LiveAbrCtxProviderMain_playerUrlChange",{newQuqlity:n}),n&&(x(n),d(n,!0))}),A=(0,m.Z)(()=>b.current),M=(0,m.Z)(()=>b.current&&C);return(0,a.useEffect)(()=>{let e=e=>{R(null==e?void 0:e.url),(0,u.WH)("LiveAbrCtxProviderMain_switch_completed",(0,i._)({},e))},t=e=>{(0,u.WH)("LiveAbrCtxProviderMain_switch_error",(0,i._)({},e))},n=e=>{(0,u.WH)("LiveAbrCtxProviderMain_error",(0,i._)({},e))};return null==r||r.on("switch_completed",e),null==r||r.on("urlchange",R),null==r||r.on("switch_error",t),null==r||r.on("error",n),()=>{null==r||r.off("urlchange",R),null==r||r.off("switch_completed",e),null==r||r.off("switch_error",t),null==r||r.off("error",n)}},[r]),(0,h.Z)(()=>{T({open:!1})}),(0,o.jsx)(E.Provider,{value:{enable:w,isAbrOpen:I,setIsAbrOpen:P,abrQuality:L,getIsAbrOpen:A,getShouldDisableManualHandler:M},children:e.children})}let S=e=>{let{children:t}=e;return(0,s.useGetAbrQualityAB)()?(0,o.jsx)(I,(0,i._)({},e)):t};function b(e){let{player:t}=e,n=(0,r._)(e,["player"]),a=(0,m.Z)(()=>{var e,n;return(null==t?void 0:null===(n=t.plugins)||void 0===n?void 0:null===(e=n.abr)||void 0===e?void 0:e.config)||{}}),d=(0,m.Z)(e=>{var n,r,o,d,c;let v=(0,l._)((0,i._)({},a(),e),{debug:(0,u.nj)()}),_=null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.preProcessUrl;"function"==typeof _&&(v.urls=Object.entries(e.urls||{}).reduce((e,t)=>{let[n,i]=t;if(i){var l;e[n]=(null===(l=_(i))||void 0===l?void 0:l.url)||i}return e},{}));let{down_thresh:f,start_limit:m,enable:h}=(0,s.getAbrQualityABParams)()||{};if(h&&Object.assign(v,{start_limit:m,down_thresh:f}),(0,u.qu)("LiveAbrCtxProvider_updateConfig",{changeAbrConfig:e,config:v}),t&&!(null==t?void 0:null===(r=t.plugins)||void 0===r?void 0:r.abr)){null==t||t.registerPlugin(p.Z,v);return}null==t||null===(c=t.plugins)||void 0===c||null===(d=c.abr)||void 0===d||null===(o=d.updateConfig)||void 0===o||o.call(d,v)}),c=(0,m.Z)(()=>{var e;return(null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.url)||""}),v=(0,m.Z)(e=>{if(!!t)t.src=e});return(0,o.jsx)(S,(0,l._)((0,i._)({},n),{updateConfig:d,player:t,getAbrConfig:a,getPlayerUrl:c,setPlayerUrl:v}))}function N(e){let{playerStore:{playerInstance:t}}=(0,g.o)(),n=(0,m.Z)(()=>{var e,n;return null==t?void 0:null===(n=t.config)||void 0===n?void 0:null===(e=n.baseConfig)||void 0===e?void 0:e.abr}),r=(0,m.Z)(e=>{var r,o,a;let d=(0,l._)((0,i._)({},n(),e),{debug:(0,u.nj)()}),c=null==t?void 0:null===(r=t.baseConfig)||void 0===r?void 0:r.preProcessUrl;"function"==typeof c&&(d.urls=Object.entries(e.urls||{}).reduce((e,t)=>{let[n,i]=t;return i&&(e[n]=c(i)),e},{}));let{down_thresh:v,start_limit:_,enable:f}=(0,s.getAbrQualityABParams)()||{};f&&Object.assign(d,{start_limit:_,down_thresh:v}),(0,u.qu)("LiveAbrCtxProviderRefactor_updateConfig",{changeAbrConfig:e,config:d}),null==t||null===(a=t.updateConfig)||void 0===a||a.call(t,{baseConfig:(0,l._)((0,i._)({},null==t?void 0:null===(o=t.config)||void 0===o?void 0:o.baseConfig),{useAbr:!(0,s.getDisableAbrWhenDegrade)(),abr:d})})}),a=(0,m.Z)(()=>(null==t?void 0:t.src)||""),d=(0,m.Z)(e=>{var n,r;null==t||null===(r=t.updateConfig)||void 0===r||r.call(t,{baseConfig:(0,l._)((0,i._)({},null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.baseConfig),{url:e})})});return(0,o.jsx)(S,(0,l._)((0,i._)({},e),{updateConfig:r,player:t,getAbrConfig:n,getPlayerUrl:a,setPlayerUrl:d}))}},747409:function(e,t,n){n.d(t,{GU:function(){return p},RE:function(){return h},j_:function(){return g},ln:function(){return y},qN:function(){return c},t4:function(){return m},zV:function(){return _}}),n(527785),n(250440),n(284961),n(826893),n(429532),n(413806),n(874386);var i=n(514119),l=n(207964),r=n(281268),o=n.n(r),a=n(727233),u=n(273737),d=n(797973),s=n(754089);function c(e){let{quality:t,streamInfo:n}=e;try{var i;let{main:e,backup:l}=null==n?void 0:n.stream[t];return JSON.parse(null===(i=e||l)||void 0===i?void 0:i.sdk_params).vbitrate||void 0}catch(e){(0,a.WH)("qualityToBitrateError",{e,quality:t,streamInfo:n});return}}let v=()=>(0,u.wi)()?"hls":"flv";function _(e){let{streamInfo:t,qualities:n,type:i=v(),currentUrlMap:l}=e;try{let e=null==t?void 0:t.stream,r=n.reduce((t,n)=>{var l,r,o;let a=n.toLocaleLowerCase(),u=(null===(l=e[a])||void 0===l?void 0:l.main)||(null===(r=e[a])||void 0===r?void 0:r.backup);if(!u)return t;let d=null==u?void 0:u[i],s=null===(o=JSON.parse(u.sdk_params))||void 0===o?void 0:o.vbitrate;return!d.includes("https")&&(d=d.replace("http","https")),t[s]=d,t},{});return{urls:Object.assign({},r,l)}}catch(e){return(0,a.WH)("getAbrUrlsFromStreamInfoError",{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,streamInfo:t,qualities:n,type:i}),{urls:{}}}}let f="undefined"==typeof window,m=(()=>{let e="live_local_quality";return{key:e,get(){if(f)return"";for(let t of document.cookie.split(";")){let[n,i]=t.split("=");if(n.trim()===e)return(0,a.WH)("abrQualityManager_get",{quality:i}),i}return""},set(t){if(f)return;(0,a.WH)("abrQualityManager_set",{quality:t});let n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59).toUTCString();document.cookie=`${e}=${t}; expires=${i}; path=/;domain=.douyin.com`},clear(){if(!f)(0,a.WH)("abrQualityManager_clear"),document.cookie=`${e}=; max-age=0; path=/;domain=.douyin.com`}}})();function h(){return(0,l.getAbrQualityAB)()&&!m.get()}let p=e=>{let{qualities:t,maxAbrQuality:n,currentQuality:l}=e;return t.filter(e=>e===l||i.p[e]<=i.p[n])},g=e=>o()(e.filter(Boolean),e=>i.p[e]);function y(e){let t=(0,d.Z)(t=>{null==e||e(t)});return(0,s.Z)("FORCE_CHANGE_ABR_QUALITY",t)}},208837:function(e,t,n){n.d(t,{h:function(){return u}}),n(874386);var i=n(412679),l=n(379928),r=n(471704),o=n(315985),a=n(88648);function u(e){let[t,n]=(0,a.useState)(!1),u=(0,a.useRef)(null),d=(0,a.useRef)(null),{run:s,cancel:c}=(0,l.Z)(()=>{n(!1)},{wait:300}),v=e=>{e?(c(),n(!0)):s()};return(0,r.Z)(u,{onChange:v}),(0,r.Z)(d,{onChange:v}),(0,o.Z)(()=>n(!1),d),(0,a.useEffect)(()=>{var t;return null==e||null===(t=e.on)||void 0===t||t.call(e,i.FP.BLUR,s),()=>{var t;null==e||null===(t=e.off)||void 0===t||t.call(e,i.FP.BLUR,s)}},[e]),{itemRef:u,panelRef:d,show:t}}},942541:function(e,t,n){n.d(t,{m:function(){return i}});let i="live_2204"},41356:function(e,t,n){n.d(t,{TG:function(){return i},WL:function(){return s},Xk:function(){return o},aN:function(){return l},gL:function(){return c},gX:function(){return a},g_:function(){return r},jx:function(){return v},oP:function(){return u},qY:function(){return d}});var i={DOUBLE:2,2:"DOUBLE",MULTI:6,6:"MULTI"},l={QUIT:"4",UPDATE:"202",RESTART:"201",END:"205"},r={LANDSCAPE:1,1:"LANDSCAPE",VERTICAL:0,0:"VERTICAL"},o={EQUAL:0,0:"EQUAL",FOCUS:1,1:"FOCUS",ZOOM:2,2:"ZOOM"},a={SHOW_SCORE_ZERO:0,0:"SHOW_SCORE_ZERO",SHOW_SCORE:1,1:"SHOW_SCORE",NOT_SHOW_SCORE:2,2:"NOT_SHOW_SCORE"},u={NORMAL:0,0:"NORMAL",FORCE:1,1:"FORCE",RESTART:4,4:"RESTART",CUT_SHORT_WIN:6,6:"CUT_SHORT_WIN",CHANGE:12,12:"CHANGE"},d={WIN:1,1:"WIN",LOSE:2,2:"LOSE",DRAW:3,3:"DRAW"},s={NORMAL:0,0:"NORMAL",VOTE:1,1:"VOTE",C_ENLARGE:6,6:"C_ENLARGE"};let c={0:"PKModType_Default",1:"PKModType_Vote",2:"PKModType_Breakthrough",3:"PKModType_Survival",4:"PKModType_Custom",6:"c_position"},v={0:"BattleEndReason_TimeUp",1:"BattleEndReason_CutShort",2:"BattleEndReason_ModeWin",3:"BattleEndReason_StartPKGame",4:"BattleEndReason_InBattleRestart",5:"BattleEndReason_MultipleMatches3",6:"BattleEndReason_TeamTaskInstantKill",7:"BattleEndReason_ScoreControl",8:"BattleEndReason_RivalRTCUnlink",11:"BattleEndReason_FinishRoom",12:"BattleEndReason_NormalToMultiple",13:"BattleEndReason_MultipleInvite",14:"BattleEndReason_ChangeMode",16:"BattleEndReason_StartOpenGame"}},357923:function(e,t,n){n.d(t,{he:function(){return a},v2:function(){return u},zA:function(){return o}}),n(675373),n(874386),n(819117);var i=n(637005),l=n(879550);let r=Promise.resolve(),o=()=>{r=new Promise(e=>{i.listen(i.EVENT.afterVideoPlayed,()=>{e()})})},a=e=>{let{callback:t,timeout:n=1e4}=e,i=null;Promise.race([r,new Promise(e=>{i=setTimeout(()=>{e()},n)})]).finally(()=>{l.p.postTask({task:()=>{t()},priority:"user-visible"}),i&&clearTimeout(i)})},u=e=>{let t=null,{timeout:n=1e4}=e||{};return Promise.race([r,new Promise(e=>{t=setTimeout(()=>{e()},n)})]).finally(()=>{t&&clearTimeout(t)})}},668899:function(e,t,n){n.d(t,{Ee:function(){return s},UX:function(){return a},VM:function(){return o},VZ:function(){return d},iD:function(){return u}});var i=n(207964),l=n(823685);let r=e=>{let t=(0,i.getLiveLoadStrategyConfig)(e);return function(e){var t;let{maxCoreCount:n,maxMemorySize:l}=(null===(t=(0,i.getLiveLoadStrategyConfig)(e))||void 0===t?void 0:t.lowDevice)||{maxCoreCount:0,maxMemorySize:0};if("undefined"==typeof window||"undefined"==typeof navigator||!n||!l)return!1;let{hardwareConcurrency:r=1/0,deviceMemory:o=1/0}=navigator||{};return r<=n||o<=l}(e)?(null==t?void 0:t.lowDeviceStrategy)||(0,l.genDefaultLiveLoadStrategyConfig)().lowDeviceStrategy:(null==t?void 0:t.highDeviceStrategy)||(0,l.genDefaultLiveLoadStrategyConfig)().highDeviceStrategy};function o(){return(0,i.getInLiveLoadStrategyAB)()?2e3:r().navigationHydrateDelayTime}function a(){return(0,i.getInLiveLoadStrategyAB)()?r().lifeCycleDefaultTimeout:3e3}function u(){return!!(0,i.getInLiveLoadStrategyAB)()&&!!r().lifeCycleUseScheduler}function d(e){var t,n;if(!!(0,i.getInLiveLoadStrategyAB)())return null==r?void 0:null===(n=r())||void 0===n?void 0:null===(t=n.lifeCycleSpecialRenderWhenConfig)||void 0===t?void 0:t[e]}function s(e){var t,n;if(!!(0,i.getInLiveLoadStrategyAB)())return null==r?void 0:null===(n=r())||void 0===n?void 0:null===(t=n.lifeCycleSpecialTaskPriority)||void 0===t?void 0:t[e]}},855740:function(e,t,n){var i=n(563097);n(88648);var l=n(950758),r=n(713097),o=n.n(r);t.Z=e=>{let{val:t,className:n,style:r}=e;return(0,i.jsx)("div",{style:r,className:o()(l.default.key_btn,{[null!=n?n:""]:n}),children:t})}},795252:function(e,t,n){var i=n(563097);n(88648);var l=n(410070),r=n(855740),o=n(713097),a=n.n(o);t.Z=e=>{let{info:t,btn:n,keyClassName:o}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:l.default.info,children:t}),(0,i.jsx)(r.Z,{className:a()(l.default.btn,o),val:n})]})}},927244:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(563097);n(88648);var l=n(154632),r=n(713097),o=n.n(r);function a(e){let{content:t,children:n,position:r="top",className:a,tooltipStyle:u={}}=e;return(0,i.jsxs)("div",{className:l.default.tooltips,children:[(0,i.jsx)("div",{className:o()(l.default.popup,l.default[r],a),style:u,children:t}),n]})}},796035:function(e,t,n){n.d(t,{w:function(){return i}});var i={StarfansUser:"sslocal://lynxview?url=https%3A%2F%2Flf-webcast-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fwebcast%2Fmono%2Flynx_pc%2Fstarfans_lynx_pc%2Fpages%2Fstarfans_user.js&type=popup_pia_=1&gravity=bottom&height_percent=73&rate_height=600&horizontal_width=375&use_pia=1&enable_preload=main",Exhibition:"https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/lynx/revenue_gift_exhibition_hall_lynx3_douyin_rspeedy/pages/gift_list_rspeedy.json?_pia_=1&web_bg_color=ff060a19&sponsor_status=normal_sponsor&showPcClose=true"}},359598:function(e,t,n){n.d(t,{Z:function(){return iN},C:function(){return iS}});var i=n("520739"),l=n("878389"),r=n("368200");n("675373"),n("413806"),n("826893"),n("882732"),n("544943"),n("874386"),n("250440"),n("179133"),n("779788"),n("268917"),n("927234");var o=n("563097"),a=n("88648"),u=n("567754"),d=n("784492"),s=n("30468"),c=n("811796"),v=n("909543"),_=n("549519"),f=n("350532"),m=n("979261"),h=n("727325"),p=n("636032"),g=n("735503"),y=n("734123"),E=n.n(y),w=n("32639"),I=n("740531"),S=n("797973"),b=n("747409"),N=n("30321"),L=n("782563"),x=n("388862"),C=n("572076"),T=n("637005"),P=n("831202"),k=n("150566"),R=n("330746"),A=n("519055"),M=n("189269"),j=n("716551"),D=n("120511"),O=n("859231"),V=n("738612"),U=n("671428"),F=n("32369"),Z=n("974859"),G=n("388193"),H=n("312065"),B=n("77683"),$=n("993115"),K=n("207722"),W=n("645260"),Y=n.n(W),z=n("850159"),Q=n("663744");let q=(e,t,n)=>{let{feedStore:{isActive:i}}=(0,z.Z)(),l=(0,a.useRef)(),r=(0,a.useRef)(0),o=Y()(e,"roomId"),{isInPreview:u}=(0,Q.DQ)();(0,a.useEffect)(()=>{if(!!o&&!!i&&!u)return J(e,"set"),clearInterval(l.current),l.current=setInterval(()=>{if(1!==r.current)J(e,"del"),r.current=1;else if(!J(e,"get")){var n;let e=null==t?void 0:null===(n=t.current)||void 0===n?void 0:n.getPlayer();null==e||e.pause(),clearInterval(l.current)}},1e3),()=>{l.current&&clearInterval(l.current)}},[e,n,i,u])},J=(e,t)=>{var n,i,l,r,o;let a=Y()(e,"roomId");if(!!a){if(null===(n=window)||void 0===n||!n.localStorage)return!1;try{let e=null===(i=localStorage)||void 0===i?void 0:i.getItem("playRoom"),n=null==e?void 0:e.indexOf(a);if("get"===t)return void 0!==n&&n>-1;if("set"===t)return e?null===(l=localStorage)||void 0===l||l.setItem("playRoom",`${e},${a}`):null===(r=localStorage)||void 0===r||r.setItem("playRoom",`${a}`),!1;else"del"===t&&(null===(o=localStorage)||void 0===o||o.setItem("playRoom",`${a}`))}catch(e){return!1}}};var X=n("834770"),ee=n("487658"),et=n("702726"),en=n("29512"),ei=e=>{let{toolbarData:t={},threshold:r,playTime:o=0}=e,[u,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{var e;if(!(null==t?void 0:null===(e=t.entrance_list)||void 0===e?void 0:e.find(e=>e.component_type===ee.Ls.Cart))||!r)return;(0,en.bootstrap)({biz:en.EBiz.DOUYIN_WEB_LIVE});let a=null,{PylonStrategy:u,EScene:s}=await n.e("81507").then(n.bind(n,338301)),c=new u({biz:en.EBiz.DOUYIN_WEB_LIVE}),v=c.inference({scene:s.EcomPopCard,abConfig:{weight:[.1,.7,1],threshold:{pcPopcardWeight:r||.1,pcPopcardPlaytime:o||0}}});return a=setTimeout(()=>{let e=c.getFeatures(s.EcomPopCardRptFeature);et.logInstance.sendLog("ecomPopcardAiFeature",(0,l._)((0,i._)({},e),{is_hit:v}))},3e3),d(v),()=>{a&&clearTimeout(a)}})()},[r]),{isHit:u}},el=n("56641"),er=n("455083"),eo=n("392323"),ea=n("402727"),eu=n("483658"),ed=n("319329"),es=n("899925");let ec=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,i._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.75 8.5a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h12.5a2 2 0 0 0 2-2v-11a2 2 0 0 0-2-2H9.75zM15 11.25h-3.75a1 1 0 0 0-1 1V16h2v-2.75H15v-2zm5.75 9.5H17v-2h2.75V16h2v3.75a1 1 0 0 1-1 1z",fill:"#fff"})}))),ev=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,i._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 10.5a2 2 0 0 1 2-2h12.5a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H9.75a2 2 0 0 1-2-2v-11zM14 15.75h-3.75v-2H13V11h2v3.75a1 1 0 0 1-1 1zm7.75.5H18a1 1 0 0 0-1 1V21h2v-2.75h2.75v-2z",fill:"#fff"})})));var e_=n("31940"),ef=n("609968"),em=n("927244"),eh=n("795252"),ep=n("821779"),eg=n("43148"),ey=(0,ep.r)(function(e){let{onSwitch:t,on:n=!1,IconOn:i,IconOff:l,hotKey:r,tipClassName:u,disableClick:d=!1,cameraShape:s,btnDisableCallBack:c,setDoubleScreenInfo:v,useYInFull:_=!1}=e,{isInPreview:f,isCssFullScreen:m,isInPreviewActive:h}=(0,Q.DQ)(),{roomStore:{foldChatroom:p}}=(0,z.Z)(),g=(0,a.useRef)(f),y=(0,a.useRef)(h),[E,w]=(0,a.useState)(n);(0,e_.j)();let{player:I}=(0,ef.n)();(0,a.useEffect)(()=>{w(n)},[n]),(0,a.useEffect)(()=>{if(I.usePluginHooks("pc","videoDbClick",()=>(w(e=>(t&&t(!e),!e)),!1)),r){let e=e=>{var n,i;if(g.current&&!y.current)return;let l=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==l&&"TEXTAREA"!==l&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")"KeyY"===e.code&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&w(e=>e?_?(t&&t(!1),I.emit(eg.J,!1),!1):(t&&t(!e),I.emit(eg.J,!e),!e):(t&&t(!0),I.emit(eg.J,!0),!0))},n=e=>{var n,i;let l=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==l&&"TEXTAREA"!==l&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")"Escape"===e.code&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&w(e=>e?(t&&t(!1),I.emit(eg.J,!1),!1):e)};return window.addEventListener("keydown",e),window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keydown",n)}}},[r,_]);let S=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(d){c&&(null==c||c({interact_name:"cssfullscreen"}));return}w(!e),t&&t(!e),n||I.emit(eg.J,!e);try{window.requestAnimationFrame(()=>{(0,es.Y)(v),(0,es.s)(s.screenStyle)})}catch(e){}};(0,a.useEffect)(()=>{if(d){c&&(null==c||c({interact_name:"cssfullscreen"}));return}I.emit(eg.J,!0);try{window.requestAnimationFrame(()=>{(0,es.Y)(v),(0,es.s)(s.screenStyle)})}catch(e){}},[]);let b=(0,L.DT)()?"窗口全屏":"网页全屏",N=(0,a.useRef)(m);return(0,a.useEffect)(()=>{g.current=f,y.current=h,m!==N.current&&(N.current=m,f&&!h&&S(!m,!0))},[f,m,h]),(0,a.useEffect)(()=>{try{h&&!p&&setTimeout(()=>{(0,es.Y)(v)},300)}catch(e){}},[p,h]),(0,o.jsx)(em.Z,{className:u,content:r?(0,o.jsx)(eh.Z,{btn:"Y",info:E?`退出${b}`:b}):b,children:(0,o.jsx)("div",{onClick:()=>{S(E)},children:E?l&&(0,o.jsx)(l,{})||(0,o.jsx)(ev,{}):i&&(0,o.jsx)(i,{})||(0,o.jsx)(ec,{})})})}),eE=n("147542");n("90506");var ew=n("451047"),eI=n("999108"),eS=n("301061"),eb=n("358003"),eN=n("159223"),eL=n("20568"),ex=n("871212"),eC=n("823685"),eT=n("713097"),eP=n.n(eT),ek=n("725215"),eR=n("149620"),eA=n("122462"),eM=n("293319"),ej=n("516599"),eD=n("827045"),eO=n("819542");let eV={uhd:{high:"4K高帧率",low:"超高清4K"},hd:"超清1080P",sd:"高清720P",ld:"标清480P"};Object.keys(eV);var eU=n("861445");let eF={uhd:"超高清4K 高帧率",hd:"超清1080P",sd:"高清720P",ld:"标清480P"};var eZ=n("696438"),eG=n("233909"),eH=n("287844"),eB=n("930600"),e$=n("990366"),eK=n("273737"),eW=n("208837"),eY={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let ez=()=>((0,a.useEffect)(()=>{window.collectEvent("add_to_desktop_show",{type:"4k",channel_id:eH.g.Lv4k,enter_from:"live_detail"})},[]),(0,o.jsxs)("span",{children:["去下载",(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5005 0.499939L4.50052 5.17743L2.17907 3.03518L1.5009 3.77008L4.66145 6.68667L5.00054 6.99958L5.33963 6.68667L8.50018 3.77008L7.82201 3.03518L5.50052 5.17747L5.5005 0.499939H4.5005ZM1.5 9.5H8.5V8.5H1.5V9.5Z",fill:"white"})})]})),eQ="abr_auto",eq=e=>e===eQ,eJ=(0,ek.Pi)(e=>{let{qualityList:t=[],quality:n="",interceptedQuality:i="",openIntercepted:l=!1,player:r,qualityHandler:u={},openTryWatching:d=!1,screenMode:s="",streamOptions:c={},streamInfo:v}=e,{userStore:{userInfo:_},streamStore:{leadingData:f,setLocalQuality:m},eventStore:{playerEvent:h},roomStore:{isAsianGames:p},feedStore:{setSkipLowQuality:g}}=(0,z.Z)(),y=(0,e_.j)(),E=(0,eK.iC)(v),{abrEnable:w,isAbrOpen:I,setIsAbrOpen:S,abrQuality:N}=(0,e$.K6)(e=>({abrEnable:e.enable,isAbrOpen:e.isAbrOpen,setIsAbrOpen:e.setIsAbrOpen,abrQuality:e.abrQuality})),x=Y()(f,"items.label_lead.lead_content.label",""),{enableOlympic4k:C,openOrDownloadClient:T}=(0,eU.M)(),P=(0,a.useMemo)(()=>t.filter(e=>!C||!!eF[e]).reverse(),[t,C]),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u&&(null==u?void 0:u.setCurrentQuality)&&(null==u||u.setCurrentQuality(e),(p||(null==y?void 0:y.liveInnerFeed))&&(m(e),g(!0)),null==h||h.liveBitRateSwitchEvent({before_definition:`${t?"auto_":""}${V.Kt[n]}`,select_definition:V.Kt[e],screen_model:s}))},R=(0,a.useMemo)(()=>new Set(P.filter(e=>(!l||!i||!(eY[i]<=eY[e]))&&(!C||!!(0,L.DT)()||"uhd"!==e)&&!0)),[P,l,i,C]);(0,eZ.Z)(()=>{let e=(0,L.DT)();C&&(!eF[n]||"uhd"===n&&!e)&&k(P.find(e=>R.has(e)))},[C,P,n,null==u?void 0:u.setCurrentQuality,R]);let{itemRef:A,panelRef:M,show:j}=(0,eW.h)(r);(0,a.useEffect)(()=>{j&&(null==h||h.liveSdkDefinitionPanelShow({definition:(I?"auto_":"")+V.Kt[n],definition_set_type:I?"auto":"manual"}))},[j]);let D=(e,t)=>{if(eq(e)){let e=eM.X7[N||n];return`自动${e&&I?`(${e})`:""}`}if(C)return eF[e];if(p&&c){if("uhd"!==e)return eV[e];{var i,l,r,o;let n=null==c?void 0:null===(r=c.qualities)||void 0===r?void 0:null===(l=r.find)||void 0===l?void 0:null===(i=l.call(r,t=>(null==t?void 0:t.sdk_key)===e))||void 0===i?void 0:i.fps,a=null===(o=eV.uhd)||void 0===o?void 0:o[n>25?"high":"low"];return`${a}${t?"（限免）":""}`}}else return E===e?eM.X7.origin:eM.X7[e]},O=e=>e===n||"origin"===e&&E===n,U=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let n=O(e);if(d&&!n){b.t4.set(e),k(e,t),ej.F.info(`已为您切换到${D(e)}画质`,r.root),null==r||r.__getPlayerLogger().updateExt({definition:e});return}if(e&&l&&i&&eY[i]<=eY[e]){null==r||r.exitFullscreen(),(0,eD.p)().then(t=>{var n,i;t({success:()=>{(0,eO.QX)(e),b.t4.set(e),!(0,eB.I)()&&window.location.reload()},next:`https://${null===(i=window)||void 0===i?void 0:null===(n=i.location)||void 0===n?void 0:n.host}`,headerText:"登录后免费畅享超高清画质",enterMethod:"hd_live",clarity:e})});return}if(!n){k(e,t),b.t4.set(e),ej.F.info(`已为您切换到${D(e)}画质`,r.root),null==r||r.__getPlayerLogger().updateExt({definition:e});return}}catch(e){}},[i,n,P,l,u,_.id_str]),[F,Z]=(0,a.useState)(""),G=e=>{let t=F===e,i=O(e),l=i&&!I||t;if(eq(e))return{labelJSX:null,clickHandler:()=>{S(!0),null==h||h.liveBitRateSwitchEvent({before_definition:`${I?"auto_":""}${V.Kt[n]}`,select_definition:`auto_${V.Kt[n]}`,screen_model:s})},isActiveItem:I||t};if(!(0,L.DT)()&&C&&(0,eU.K)(e))return{labelJSX:(0,o.jsx)("div",{className:eP()(eG.default.label,t&&eG.default.goDownload),children:t?(0,o.jsx)(ez,{}):"客户端专享"}),clickHandler:T,isActiveItem:l};let r=!R.has(e);return{labelJSX:r?(0,o.jsx)("div",{className:eG.default.label,style:{visibility:t?"visible":"hidden"},children:x}):null,clickHandler:()=>{if(!!I||!i)r||S(!1),U(e,I)},isActiveItem:l}},H=(0,a.useMemo)(()=>{let e=new Set(P);return(E&&"origin"!==E&&e.has("origin")&&e.has(E)&&e.delete(E),w)?[eQ,...e]:[...e]},[w,I,P,E]);return(0,o.jsx)("div",{className:eG.default.container,children:(0,o.jsxs)("div",{className:eG.default.toolbar,children:[(0,o.jsx)("div",{className:eG.default.quality,"data-e2e":"quality",ref:A,children:I?"自动":D(n,!0)}),(0,o.jsx)("div",{ref:M,className:eP()(eG.default.menu,j?eG.default.show:eG.default.hidden),children:(0,o.jsx)("div",{className:eG.default.tags_container,"data-e2e":"quality-selector",children:H.map(e=>{let{labelJSX:t,clickHandler:n,isActiveItem:i}=G(e);return(0,o.jsx)("div",{className:eG.default.tags,onMouseEnter:()=>Z(e),onMouseLeave:()=>Z(""),onClick:n,children:(0,o.jsxs)("div",{className:eG.default.tips,style:{color:i?"#FFFFFF":"#FFFFFF99",background:i?"#f2f2f414":""},children:[(0,o.jsx)("div",{className:eG.default.text,style:{color:i?"#FFFFFF":"#FFFFFF99"},children:D(e,!0)}),t]},e)},e)})})})]})})});var eX=n("995902"),e0=(0,a.memo)(e=>{let{messageFrom:t}=e,[n,i]=(0,a.useState)(!1),[l,r]=(0,a.useState)("正在播放手机端的直播"),u=(0,a.useRef)(null),d=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{!d.current&&"app"===t&&"app_continued"===(0,k.Rs)("url_source")&&"live"===(0,k.Rs)("from_app_resume")&&(r("正在播放手机端的直播"),i(!0),d.current=!0)},[t]),(0,a.useEffect)(()=>(n&&(u.current=setTimeout(()=>{i(!1)},3e3)),()=>{clearTimeout(u.current)}),[n]),n?(0,o.jsx)("div",{className:eX.default.tips,children:(0,o.jsx)("p",{children:l})}):null}),e1=n("843108"),e2=n("741835"),e3=n("374187"),e5=n("779145"),e6=n.n(e5),e7=e=>{let{linkmicStore:{enlargedSeatPostion:t,linkMicSeats:n,linkMicLayout:i},userStore:{userInfo:l},eventStore:{linkmicEvent:r}}=(0,z.Z)(),o=a.useRef(e),[u,d]=a.useState(!1);a.useEffect(()=>{o.current=e},[e]);let s=()=>{u&&(null==r||r.liveSdkLiveGuestEnlargeOver({play_mode:["request_song"],enlarge_user_id:null==l?void 0:l.id_str,enlarge_user_type:"guest"}))};a.useEffect(()=>(window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}),[s]);let c=a.useMemo(()=>{var e,t,r;if(i===e3.yP.VIDEO_2V4V4||i===e3.yP.AUDIO_DOUBLE_C)return!!e6()(n||{}).slice(0,2).some(e=>{var t,n;return(null==l?void 0:l.id_str)===(null==e?void 0:null===(n=e.user)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id_str)})||!1;return(null==l?void 0:l.id_str)===(null==n?void 0:null===(r=n[0])||void 0===r?void 0:null===(t=r.user)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id_str)||!1},[l,n,i]);a.useEffect(()=>{u&&i===e3.yP.AUDIO_DOUBLE_C&&e2.mp.start()},[u,i]),a.useEffect(()=>{-1!==t?c&&!u?(e2.Ul.start(),null==r||r.liveSdkLiveGuestEnlargeStart({play_mode:["request_song"],enlarge_user_id:null==l?void 0:l.id_str,enlarge_user_type:"guest"}),d(!0)):!c&&u&&(null==r||r.liveSdkLiveGuestEnlargeOver({play_mode:["request_song"],enlarge_user_id:null==l?void 0:l.id_str,enlarge_user_type:"guest"}),d(!1)):u&&(null==r||r.liveSdkLiveGuestEnlargeOver({play_mode:["request_song"],enlarge_user_id:null==l?void 0:l.id_str,enlarge_user_type:"guest"}),d(!1))},[t,c])},e8=n("919382"),e4=n("418831"),e9=n("104013"),te=e=>{var t,n;let{likeStatus:i,roomId:l,userInfo:r,isYellowCard:o=!1}=e,{roomStore:{roomInfo:u,setRoomInfo:d,setIsDoubleLike:s},feedStore:{isActive:c},eventStore:{playerEvent:v},singletonStore:{message:_}}=(0,z.Z)(),[f,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[E,w]=(0,a.useState)([]),I=(0,a.useRef)(0),S=(0,a.useRef)(0),b=(0,a.useRef)(),N=e=>{let t=Y()(r,"id");if(!!t)(0,e8.vL)({room_id:l,count:I.current?I.current:1}).then(n=>{var i,l,r;let{data:o,headers:a}=n;(null==o?void 0:o.status_code)!==0?ej.F.info((null==o?void 0:null===(i=o.data)||void 0===i?void 0:i.prompts)?null==o?void 0:null===(l=o.data)||void 0===l?void 0:l.prompts:"您手速太快了，请休息一下"):null==v||null===(r=v.liveLikeEvent)||void 0===r||r.call(v,e,t,I.current,null==a?void 0:a["x-tt-logid"]),S.current=Date.now()})};(0,a.useEffect)(()=>{(async()=>{var e,t,n,i,r,a;if(!c||!l)return;let{data:u}=await (0,e4.fp)({room_id:l,scene:10}),d=null==u?void 0:null===(t=u.data)||void 0===t?void 0:null===(e=t.like_icon_info)||void 0===e?void 0:e.icons,s=null==u?void 0:null===(a=u.data)||void 0===a?void 0:null===(r=a.like_icon_info)||void 0===r?void 0:null===(i=r.component_related_icons)||void 0===i?void 0:null===(n=i[1])||void 0===n?void 0:n.icons;if(!d&&!s)return;if(s&&o&&w(s),!!d)w(d)})()},[l,o,c]),(0,a.useEffect)(()=>{if(!c)return;let e=Y()(i,"SpecialStyle.Like.UnableStyle",""),t=e.toString(2);if(null==i?void 0:i.Digg)m(!0);else{m(!1);return}0===e||""===e?(p(!0),y(!0)):e&&e>0&&(t&&Number(t[(null==t?void 0:t.length)-1])?(t.length>=1&&Number(t[t.length-2])?p(!0):p(!1),t.length>=2&&Number(t[t.length-3])?y(!0):y(!1)):(p(!1),y(!1)))},[null==i?void 0:i.Digg,null==i?void 0:null===(n=i.SpecialStyle)||void 0===n?void 0:null===(t=n.Like)||void 0===t?void 0:t.UnableStyle,c]),(0,a.useEffect)(()=>{if(!!c)return null==_?void 0:_.on("LikeMessage",e=>{e.map(e=>{var t;let n=Number(Y()(u,"like_count",0)),i=Number(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.total);i>n&&(0,e9.runInAction)(()=>{u.room.like_count=i,null==d||d(u)})})})},[u,d,c,_]);let L=(0,e_.j)();return(0,a.useEffect)(()=>{var e;if(!c||!_)return;let t=null==_?void 0:null===(e=_.wrds)||void 0===e?void 0:e.on("RoomDataSyncMessage","DoubleLikeSyncData",e=>{var t,n,i;s(null==e?void 0:null===(i=e.payload)||void 0===i?void 0:null===(n=i.payload)||void 0===n?void 0:null===(t=n.doubleLikeStatus)||void 0===t?void 0:t.double_flag)});return()=>{null==t||t()}},[c,_,L]),{icons:E,isLike:f,isClickLike:h,isShowLike:g,userLike:e=>{clearTimeout(b.current),Date.now()-S.current>=2e3&&0!==I.current?(I.current=I.current+1,N(e),I.current=0):(I.current=I.current+1,b.current=setTimeout(()=>{N(e),I.current=0},2e3))}}},tt=n("510949"),tn=n("997441");n("209955");var ti=n("118025"),tl=n("64814");function tr(e){let t=(0,a.useContext)(h.X);if(void 0===t)throw(0,ti.g)("roomStore"),Error("roomStore must be used within Provider");return(0,tl.oR)(t,e)}var to=e=>{let{className:t=""}=e,n=(0,a.useRef)(),i=tr(e=>e.setRootElement),l=tr(e=>e.childElementList);(0,a.useEffect)(()=>{n.current&&i(n.current)},[n.current]);let r=(null==l?void 0:l.length)===0?0:375;return(0,o.jsx)("div",{className:eP()(tn.default.liveRightPanel,t),style:{width:`${r}px`,opacity:r>0?1:0,marginLeft:l.length>0?8:0,marginRight:l.length>0?8:0},children:(0,o.jsx)("div",{ref:n,className:tn.default.liveRightPanelChildren})})},ta=n("842872"),tu=()=>{let{linkmicStore:{setFunctionType2:e},singletonStore:{message:t}}=(0,z.Z)();return a.useEffect(()=>null==t?void 0:t.syncOn("LinkMicMethod",t=>{let{method:n,payload:i}=t;if(!!n&&!!i)switch(Number(i.message_type)){case ta.iM.TYPE_TURNON:let{function_type:l}=i;e(l);break;case ta.iM.TYPE_FINISH:e("")}}),[t]),null},td=n("106125"),ts=n("825963"),tc=n("588298"),tv=n("284621");n("284961");var t_=n("331593"),tf=n("728759"),tm=n("910510");let th=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,i._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.923 2.744a.833.833 0 0 0-1.179 0L6.077 9.411a.833.833 0 0 0 0 1.178l6.667 6.667a.833.833 0 1 0 1.179-1.179L7.845 10l6.078-6.077a.833.833 0 0 0 0-1.179z",fill:"#fff",fillOpacity:".9"})})));var tp=n("642448"),tg=n("970838"),ty=n.n(tg);n("465349");var tE=n("515658"),tw=n("781645"),tI=n("152893");let tS=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,i._)({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M16.317 18.731a1.393 1.393 0 0 1-1.97 0L9.29 13.675a1.393 1.393 0 0 1 0-1.97l.011-.011 5.045-5.045a1.393 1.393 0 0 1 1.97 1.97l-4.072 4.071 4.072 4.071a1.393 1.393 0 0 1 0 1.97z",fill:"#fff",opacity:".7"})}))),tb=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,i._)({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M9.684 18.731a1.393 1.393 0 0 0 1.97 0l5.055-5.056a1.393 1.393 0 0 0 0-1.97l-.011-.011-5.045-5.045a1.393 1.393 0 1 0-1.97 1.97l4.072 4.071-4.071 4.071a1.393 1.393 0 0 0 0 1.97z",fill:"#fff",opacity:".7"})}))),tN=(0,a.forwardRef)((e,t)=>{let{children:n,showScroll:i}=e,[l,r]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),s=(0,a.useRef)(null),c=(0,a.useCallback)(()=>{let e=s.current;if(!e||!i)return;let{scrollLeft:t,scrollWidth:n,clientWidth:l}=e;if(!!(n>l))r(t>0),d(t<n-l)},[i]);(0,a.useEffect)(()=>{c()},[]);let v=(0,a.useCallback)(e=>{let t=s.current;if(!t)return;let n=.8*t.clientWidth;t.scrollBy({left:n*e,behavior:"smooth"})},[]),_=(0,a.useCallback)(e=>{let t=s.current;t&&t.scrollBy({left:e})},[]);return(0,a.useImperativeHandle)(t,()=>({scrollBy:_})),(0,o.jsxs)("div",{style:{position:"relative",overflow:"hidden"},children:[(0,o.jsx)("div",{className:tI.default.container,ref:s,onScroll:c,children:(0,o.jsx)("div",{className:tI.default.scrollWrapper,children:n})}),(0,o.jsx)("div",{className:eP()({[tI.default.arrowControl]:!0,[tI.default.right]:!0,[tI.default.show]:u}),children:(0,o.jsx)("button",{className:eP()({[tI.default.arrow]:!0,[tI.default.arrowRight]:!0}),onClick:()=>v(1),children:(0,o.jsx)(tb,{})})}),(0,o.jsx)("div",{className:eP()({[tI.default.arrowControl]:!0,[tI.default.left]:!0,[tI.default.show]:l}),children:(0,o.jsx)("button",{className:eP()({[tI.default.arrow]:!0}),onClick:()=>v(-1),children:(0,o.jsx)(tS,{})})})]})});var tL=n("691682"),tx=n("630579"),tC=(0,ek.Pi)(e=>{let{linkmicStore:{choosePeopleArr:t,setChoosePeopleArr:n},activityIndicatorStore:{JSBInstance:i},singletonStore:{liveContainer:l},roomStore:r}=(0,z.Z)(),{choosePeopleList:u=[]}=(0,tE.Z)(z.Z),[d,s]=(0,a.useState)({}),c=Y()(r,"roomInfo.roomId",""),v=Y()(r,"roomInfo.anchor.id_str"),[_,f]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),p=(0,a.useRef)(null),g=(0,a.useRef)(null),y=(0,a.useRef)(null),{getExhibitionHomeByid:E}=(0,tL.s)({roomId:c,anchorId:v});(0,a.useEffect)(()=>{Promise.all(u.map(e=>{var t,n;return E({uid:null==e?void 0:null===(n=e.user)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id_str,exhibitionSource:tx.x.DETAIL})})).then(e=>{let t={};e.forEach(e=>{var n;let{anchor_id:i="",lighted_items:l=[],unlighted_items:r=[]}=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.data)||{};t[i]={lightedCount:l.length,unlightedCount:r.length}}),s(t)})},u),(0,e_.j)();let w=(0,a.useMemo)(()=>{var e,n,i;return null==u?void 0:null===(i=u.filter(e=>{var n,i,l;return(null==e?void 0:null===(i=e.user)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.id_str)===(null!==(l=null==t?void 0:t[0])&&void 0!==l?l:"")}))||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:null===(e=n.user)||void 0===e?void 0:e.user},[u,t]),I=(0,a.useCallback)(e=>{if(w.id_str!==e)null==l||l.openLandPage({url:(0,tw.oQ)(e),reset:!0}),n([e])},[i,l,w]);(0,a.useEffect)(()=>T.listen(T.EVENT.selectGroupLiveAnchor,e=>{(null==e?void 0:e[0])&&I(null==e?void 0:e[0])}),[I]);let S=(0,a.useMemo)(()=>{if(Object.keys(d).length>0){let e=ty()(u,e=>Y()(d,[e.user.user.id_str,"lightedCount"],-1/0),["desc"]);return h(!0),e}return u},[d,u]);return((0,a.useEffect)(()=>{if(!_&&y.current&&m){let e=S.findIndex(e=>e.user.user.id_str===w.id_str);f(!0),e>3&&y.current.scrollBy(74*e+(e-1)*15)}},[_,w,y.current,S,m]),0===S.length)?null:(0,o.jsxs)("div",{className:t_.default.groupContainer,children:[(0,o.jsx)("div",{className:t_.default.select,children:"选择团员："}),(0,o.jsx)("div",{className:t_.default.userContainer,ref:g,children:(0,o.jsx)(tN,{ref:y,showScroll:S.length>4,children:S.map(e=>{var t,n,i,l,r,a,u,s,c;return(0,o.jsxs)("div",{className:eP()(t_.default.user,{[t_.default.selected]:w.id_str===(null===(t=e.user.user)||void 0===t?void 0:t.id_str)}),ref:t=>{var n;w.id_str===(null===(n=e.user.user)||void 0===n?void 0:n.id_str)&&(p.current=t)},onClick:()=>{var t;return I(null===(t=e.user.user)||void 0===t?void 0:t.id_str)},children:[(0,o.jsx)("img",{className:t_.default.avatar,src:null===(l=e.user.user)||void 0===l?void 0:null===(i=l.avatar_thumb)||void 0===i?void 0:null===(n=i.url_list)||void 0===n?void 0:n[0]}),(0,o.jsx)("span",{className:t_.default.name,children:null===(r=e.user.user)||void 0===r?void 0:r.nickname}),d[null===(a=e.user.user)||void 0===a?void 0:a.id_str]?(0,o.jsxs)("span",{className:t_.default.progress,children:[d[null===(u=e.user.user)||void 0===u?void 0:u.id_str].lightedCount,"/",d[null===(s=e.user.user)||void 0===s?void 0:s.id_str].lightedCount+d[null===(c=e.user.user)||void 0===c?void 0:c.id_str].unlightedCount]}):null]})})})})]})}),tT=n("730893"),tP=(0,ek.Pi)(e=>{let t=(0,z.Z)(),{currentLandPage:n,onClose:i,className:l}=e,{rightPanelStore:{openItem:r,isItemShow:d},singletonStore:{liveContainer:s},linkmicStore:{isGroupLive:c}}=t,[v,_]=(0,a.useState)(!1);(0,e_.j)();let{choosePeopleList:f}=(0,tE.Z)(z.Z);(0,a.useEffect)(()=>{!d(n)&&setTimeout(()=>{r(n)},0)},[n]);let m=(0,a.useMemo)(()=>n?u.parse(n.split("?")[1]):{},[n]),h=c&&n.includes("revenue_gift_exhibition_hall")&&n.includes("gift_list");return(0,o.jsx)(tf.Z,{itemKey:n,group:tm.k.ACTIndicatorGroup,showClose:"false"!==m.showPcClose,onClose:()=>{i&&i(n)},children:(0,o.jsxs)("div",{className:eP()(t_.default.landPageContainer,l),style:{background:h?"rgb(16, 24, 50)":m.pcBackground||"transparent"},children:[h?(0,o.jsx)(tC,{}):null,(null==s?void 0:s.isSupportLynx())?(0,o.jsx)(tp.kh,{groupId:tT.D.live,url:n,setLoading:_,style:{width:"100%",height:"100%",border:"none",overflow:"hidden"},data:s.getInitData(n)||{},className:eP()({[t_.default.heightWithoutGroup]:h&&(null!=f?f:[]).length>0})}):(0,o.jsx)("div",{className:t_.default.upgrade,children:"您的浏览器版本过低，请升级最新版"}),v&&(0,o.jsx)("div",{className:t_.default.loading,children:(0,o.jsx)(eS.gb,{})})]})})});let tk=(0,ek.Pi)(e=>{let t=(0,z.Z)(),{currentLandPage:n,onClose:i,className:l}=e,{activityIndicatorStore:{JSBInstance:r,closeLandPage:d},rightPanelStore:{openItem:s,isItemShow:c},linkmicStore:{isGroupLive:v}}=t,[_,f]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[p,g]=(0,a.useState)([]),[y,E]=(0,a.useState)(!0);(0,e_.j)();let{choosePeopleList:w}=(0,tE.Z)(z.Z),I=(0,a.useRef)({}),S=(0,a.useRef)({}),b=(0,a.useRef)(0),[N,L]=(0,a.useState)(n),x=(e,t)=>{if(m){var n;let i="function"==typeof t?t:void 0;i&&(b.current+=1,I.current[b.current]=i),null===(n=m.contentWindow)||void 0===n||n.postMessage({type:"executeScript",script:e,callbackID:i?b.current:""},"*")}},C=()=>{let e=`
    *::-webkit-scrollbar {display:block !important; height:4px;width:0;}
    .brick-base-key-vision-normal-actions{top:30px;}
    .landing-page-header__rule{top:40px;}
    .render-step__skip-btn{top:40px;}
    .rule-wrapper {border-radius:unset} 
    .exhibition-level-wrapper {border-radius:unset} 
    .my-medal {border-radius:unset}
    .detail-wrapper {border-radius:unset}
    .rare-gift-detail-wrapper {border-radius:unset}
  *::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0);
    width: 12px;
  }
  *::-webkit-scrollbar-corner {
    background-color: rgba(0, 0, 0, 0);
  }
  *::-webkit-scrollbar-thumb {
    width:0px;
    height:4px;
    border-radius: 4px;
    background: rgba(255,255,255,0.7);
    transition: all 1s;
  }
 `;e=e.replace(/\s+/g,""),x(`
      const style = document.createElement('style');
      style.innerText = "${e}"
      document.head.appendChild(style)
    `)},T=(0,a.useMemo)(()=>n?u.parse(n.split("?")[1]):{},[n]),P=()=>{let e=p.pop();g([...p]),e&&(E(!1),L(e),S.current={},setTimeout(()=>{E(!0),m.src=e},0))};(0,a.useEffect)(()=>{n&&m&&(f(!0),m.addEventListener("load",()=>{f(!1),C()}))},[n,m]),(0,a.useEffect)(()=>{let e=e=>{var t,i,l,o,a,u;if((null==e?void 0:e.source)===(null==m?void 0:m.contentWindow)){if((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.type)==="call_JSB"){if(!r||!m)return;let{methodName:t,params:i=[],callbackID:l}=e.data;if("function"!=typeof r[t]){r._pcNotSupport(t);return}try{if(l){let e=e=>{m.contentWindow.postMessage({type:"executeCallback",callbackID:l,params:e,methodName:t},"*")};S.current[l]&&(e=S.current[l]),S.current[l]=e;let d="call"===t&&i.length<=1?[...i,void 0,e]:[...i,e];if("call"===t&&"close"===d[0]){r[t]("close",{url:n},e);return}if("call"===t&&"openLive"===d[0]){let n=d[1]||{};if("scheme"===n.type&&-1!==((null==n?void 0:null===(o=n.args)||void 0===o?void 0:o.url)||"").indexOf("sslocal://webcast_redirect?entry=exhibition_gift_list_h5")){r[t]("openAnniexWeb",{url:null==n?void 0:null===(a=n.args)||void 0===a?void 0:a.url,reset:null==n?void 0:null===(u=n.args)||void 0===u?void 0:u._noReset},e);return}}if("call"===t&&"hidePcBackIcon"===d[0]){g([]);return}r[t](...d),"on"!==t&&delete S.current[l]}else{if("call"===t&&"close"===i[0]){r[t]("close",{url:n});return}r[t](...i)}}catch(e){}}(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.type)==="execute_script_return_value"&&I.current[e.data.callbackID]&&(I.current[e.data.callbackID](e.data.value),delete I.current[e.data.callbackID]),(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.type)==="page_jump"&&(S.current={},g(t=>{var n;return t.push(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.url),[...t]}))}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[r,m,n,y]),(0,a.useEffect)(()=>{L(n)},[n]),(0,a.useEffect)(()=>{N&&y&&!c(n)&&setTimeout(()=>{s(n)},0)},[N,y,n]);let k=v&&n.includes("revenue_gift_exhibition_hall")&&n.includes("gift_list");return(0,o.jsx)(tf.Z,{itemKey:n,group:tm.k.ACTIndicatorGroup,showClose:"false"!==T.showPcClose,onClose:()=>{i&&i(n)},children:(0,o.jsxs)("div",{className:eP()(t_.default.landPageContainer,l),style:{background:k?"rgb(16, 24, 50)":T.pcBackground||"transparent"},children:[k?(0,o.jsx)(tC,{}):null,y&&(0,o.jsx)("iframe",{src:N,className:eP()(t_.default.iframe,{[t_.default.heightWithoutGroup]:k&&(null!=w?w:[]).length>0}),ref:h,allow:"*"},N),_&&(0,o.jsx)("div",{className:t_.default.loading,children:(0,o.jsx)(eS.gb,{})}),(null==p?void 0:p.length)>0&&"false"!==T.showPcBack&&(0,o.jsx)("div",{className:t_.default.back,onClick:()=>{P()},children:(0,o.jsx)(th,{className:t_.default.leftIcon})})]})})});var tR=(0,ek.Pi)(e=>{let{activityIndicatorStore:{currentLandPage:t,setCurrentLandPage:n}}=(0,z.Z)(),r=e=>{let i=t.findIndex(t=>t.indexOf(e)>=0);if(i>=0){let e=[...t];e.splice(i,1),n(e)}};return t.length>0?(0,o.jsx)(a.Fragment,{children:t.map(t=>(0,o.jsx)(a.Fragment,{children:t.indexOf("sslocal://")>-1?(0,o.jsx)(tP,(0,l._)((0,i._)({},e),{currentLandPage:t,onClose:r})):(0,o.jsx)(tk,(0,l._)((0,i._)({},e),{currentLandPage:t,onClose:r}))},t))}):null}),tA=n("954547"),tM=()=>{let{singletonStore:{message:e},eventStore:{linkmicEvent:t}}=(0,z.Z)();(0,a.useEffect)(()=>null==e?void 0:e.on("LinkmicEcologyMessage",e=>{e.forEach(e=>{let{method:n,payload:i}=e;if(!!n&&!!i){if("WebcastLinkmicEcologyMessage"===n&&(null==i?void 0:i.msg_type)===tA.Qq.TYPE_WEB_ANTI_CHEAT){var l,r;let e={address:null!==(r=null==i?void 0:null===(l=i.web_anti_cheat_content)||void 0===l?void 0:l.entry_web_page_address)&&void 0!==r?r:"",isClient:(0,L.DT)(),payload:JSON.stringify(i)};null==t||t.liveFaceRecognitionPopupReceiveEvent(e)}}})}),[e])},tj=n("456147"),tD=()=>{let{singletonStore:{message:e},roomStore:{roomInfo:t},linkmicStore:{choosePeopleArr:n,setChoosePeopleArr:i,groupLiveMemberList:l,setGroupLiveMemberList:r,groupLiveComponents:o,setGroupLiveComponents:u}}=(0,z.Z)(),d=Y()(t,"room.others.group_live_data.is_group_live",0);(0,a.useEffect)(()=>{d&&(0,tj.Sc)({room_id:Y()(t,"roomId"),scene:1}).then(e=>{var t,n;let{data:i,logId:l}=e;if((null==i?void 0:i.status_code)!==0)return F.kg.error("获取团员列表失败",i,l),Promise.reject(i);return r(null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(t=n.members)||void 0===t?void 0:t.map(e=>(e.user.id_str=e.user.id_str?e.user.id_str:e.user.id.toString(),e))),Promise.resolve(i)})},[r,d]),(0,a.useEffect)(()=>{var e,r,o,a,u,d,s,c,v,_;if(!(null==l?void 0:null===(e=l[0])||void 0===e?void 0:e.user))return;let f=[];try{f=JSON.parse(null!==(r=localStorage.getItem(`linkmic-last-choose-people-${null==t?void 0:t.roomId}`))&&void 0!==r?r:"[]")}catch(e){}n&&(null==n?void 0:n.length)!==0?!l.some(e=>{var t;return(null===(t=e.user)||void 0===t?void 0:t.id_str)===f[0]})&&i((null==l?void 0:null===(c=l[0])||void 0===c?void 0:null===(s=c.user)||void 0===s?void 0:s.id_str)?[null==l?void 0:null===(_=l[0])||void 0===_?void 0:null===(v=_.user)||void 0===v?void 0:v.id_str]:[]):i(f.length>0?f:(null==l?void 0:null===(a=l[0])||void 0===a?void 0:null===(o=a.user)||void 0===o?void 0:o.id_str)?[null==l?void 0:null===(d=l[0])||void 0===d?void 0:null===(u=d.user)||void 0===u?void 0:u.id_str]:[])},[l,n,t,i]),(0,a.useEffect)(()=>{if(d)return e.on("GroupLiveMemberChangeMessage",e=>{e.forEach(e=>{var t;let{payload:n}=e;if(!!n)r(null===(t=n.members)||void 0===t?void 0:t.map(e=>e))})})},[r,d]),(0,a.useEffect)(()=>null==e?void 0:e.wrds.on("GroupLiveContainerChangeMessage","",e=>{var t;let n=(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.data)||[],i=[];n.forEach(e=>{if([3,5].includes(e.type)&&(e.horizontal_url_web||e.url_web)){let t="horizontal";try{t=JSON.parse(e.position||"{}").use}catch(e){}i.push({type:e.type,url:"horizontal"===t?e.horizontal_url_web:e.url_web,position:e.position,container_payload:e.container_payload})}}),u(i)}),[e])},tO=n("793761"),tV=n("393871"),tU=n("657304"),tF=n("604348"),tZ=n("338426"),tG=n("354999"),tH=n("418566"),tB=n("318520"),t$=n("345962"),tK=n("78687"),tW=n("725650"),tY=n("641149"),tz=n("139062"),tQ=n("309931"),tq=n("38555"),tJ=n("957033"),tX=n("22019"),t0=n("322072"),t1=n("946351"),t2=()=>(0,o.jsx)("div",{className:t1.default.opBar,children:(0,o.jsx)("div",{className:t1.default.wave})}),t3=(0,ek.Pi)(e=>{let{fullScreen:t,isTheaterOn:n}=e,{player:l}=(0,ef.n)(),{showOperatingBar:r}=(0,tJ.u)(e),{roomStore:{roomInfo:u},giftStore:{isGiftPanelVisible:d}}=(0,z.Z)(),s=()=>{var e,i;return(t||n)&&!d?null===(e=l.controls)||void 0===e?void 0:e.root:"undefined"==typeof document?null:document.getElementById(tW.Nd+(null==u?void 0:null===(i=u.room)||void 0===i?void 0:i.id_str))},[c,v]=(0,a.useState)(()=>s()),_=(0,S.Z)(()=>{v(s())});return((0,a.useEffect)(()=>{if(!!r){if(_(),n||t)return l.addClass(t0.default.operatingBarFade),()=>{l.removeClass(t0.default.operatingBarFade)}}},[n,t,r,d]),(0,a.useEffect)(()=>{let e=T.listen(T.EVENT.LiveMaxMemberLimit,()=>{v(null)});return()=>e()},[]),(0,tq.Z)(()=>{_()},r&&!c?500:void 0),r&&c)?(0,tQ.createPortal)((0,o.jsx)(tz.m,{className:eP()((n||t)&&t0.default.operatingBar,t&&"isDark",{[t0.default.newSkeleton]:n||t}),children:(0,o.jsx)(tX.n,{skeleton:(0,o.jsx)(t2,{}),children:(0,o.jsx)(tY.default,(0,i._)({},e))})}),c):null}),t5=n("644924");function t6(e){return(0,t5.R)()?(0,o.jsx)(t3,(0,i._)({},e)):(0,o.jsx)("div",{children:(0,o.jsx)(tK.default,(0,i._)({},e))})}var t7=n("856853"),t8=e=>{let{singletonStore:{message:t},feedStore:{isChangePending:n}}=(0,z.Z)(),[r,u]=a.useState(""),[d,s]=a.useState(""),[c,v]=a.useState(""),[_,f]=a.useState(!1);(0,a.useEffect)(()=>null==t?void 0:t.wrds.on("RoomDataSyncMessage","",e=>{var t,n,i,l,r,o,a,d;let c=null==e?void 0:null===(n=e.payload)||void 0===n?void 0:null===(t=n.payload)||void 0===t?void 0:t.highlight_items;if(null==c?void 0:null===(i=c[0])||void 0===i?void 0:i.appointment_data){let e=null==c?void 0:null===(l=c[0])||void 0===l?void 0:l.appointment_data;u(null!==(o=null==e?void 0:e.appointment_id)&&void 0!==o?o:""),s(null!==(a=null==e?void 0:e.date_text)&&void 0!==a?a:""),v(null!==(d=null==e?void 0:e.time_text)&&void 0!==d?d:""),f((null==e?void 0:null===(r=e.scheduled_weekdays)||void 0===r?void 0:r.length)>0)}else(null==c?void 0:c.length)===0&&u("")}),[t]);let m=(0,l._)((0,i._)({},e),{appointmentId:r,dateText:d,timeText:c,isCycle:_});return(0,o.jsx)(t7.default,(0,i._)({},m))},t4=n("827392"),t9=n("41356"),ne=n("697311"),nt=n("272714"),nn=n("512366"),ni=n("895338"),nl=n("637407"),nr=n("926856"),no=n("212415"),na=n("839291"),nu=n("922850"),nd=n("230355"),ns=n("315370"),nc=n("140665"),nv=n("512400");let n_=()=>{let{roomStore:{liveStatus:e}}=(0,z.Z)(),{abTestData:t}=(0,e_.j)(),[n,i]=a.useState(!1),{player:l}=(0,ef.n)();return a.useEffect(()=>{let t=()=>{e!==O.zZ.NORMAL?i(!0):i(!1)};return l.on(y.Events.PLAYER_BLUR,t),()=>{l.off(y.Events.PLAYER_BLUR,t)}},[e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:nv.default.hintCenter,id:"video-center"}),(0,o.jsx)("div",{className:eP()(nv.default.hintBottom,{[nv.default.fadeAnimationHintBottom]:e!==O.zZ.NORMAL&&e!==O.zZ.WEB_FULL&&e!==O.zZ.WEB_FULL_NO_COMMENT&&n,[nv.default.fadeInit]:e!==O.zZ.NORMAL&&e!==O.zZ.WEB_FULL&&e!==O.zZ.WEB_FULL_NO_COMMENT&&!n}),id:"control-right"})]})};var nf=n("323214"),nm=n("944189"),nh=n("7772");let np=e=>{let{player:t}=e,{roomStore:{liveStatus:n}}=(0,z.Z)(),{innerFeedOn:i}=(0,nh.P)(),l=(0,a.useCallback)(e=>{if((null==e?void 0:e.pluginName)==="fullscreen"){let e=t.root.querySelector(".xgplayer-fullscreen .xg-tips");(0,nm.createRoot)(e).render((0,o.jsx)(eh.Z,{btn:"H",info:t.fullscreen?"退出全屏":"进入全屏"}))}if((null==e?void 0:e.pluginName)==="rotate"){let e=t.root.querySelector(".xgplayer-rotate .xg-tips");(0,nm.createRoot)(e).render((0,o.jsx)(eh.Z,{btn:"D",info:"屏幕旋转"}))}},[t]);(0,a.useEffect)(()=>(null==t||t.on("icon_mouseenter",l),()=>{null==t||t.off("icon_mouseenter",l)}),[t,l]);let{isInPreview:r,isInPreviewActive:u,hasModal:d}=(0,Q.DQ)();return(0,a.useEffect)(()=>{if(r&&!u)return;let e=e=>{var n,i,l,r;if(d())return;let o=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==o&&"TEXTAREA"!==o&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")(null==e?void 0:e.shiftKey)&&(null==e?void 0:e.code)==="KeyF"&&T.emit(T.EVENT.focusSearch,{isFocus:!0}),(null==e?void 0:e.code)==="KeyH"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&(null===(r=t.plugins.fullscreen)||void 0===r||null===(l=r.changeFullScreen)||void 0===l||l.call(r))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,r,u,d]),null};var ng=n("214527"),ny=n("316290"),nE=n("988634");let nw=()=>Promise.all([n.e("92432"),n.e("90337")]).then(n.bind(n,202308)),nI=(0,a.forwardRef)(function(e,t){return(0,o.jsx)(nE.o,(0,i._)({innerRef:t,id:"island_a74ce",load:nw},e))});var nS=n("752024"),nb=n("721729"),nN=n("731402"),nL=n("729532"),nx=n("465571"),nC=n("531459"),nT=n("186823");function nP(e){let{feature:t}=e;return t?(0,o.jsx)(nT.default,(0,i._)({},e)):null}var nk=n("127564"),nR=n("202597"),nA=n("13059"),nM=n("477104"),nj=n("909"),nD=n("739202"),nO=n("962319"),nV=n("678396"),nU=n("564865"),nF=n("15022"),nZ=n("875919"),nG=n("565877"),nH=n("787112"),nB=n("4815"),n$=n("608986"),nK=n("259076"),nW=n("26872"),nY=n("28594"),nz=n("915450"),nQ=n("696585"),nq=n("376867"),nJ=n("724758"),nX=n("426554"),n0=n("141823"),n1=n("557627"),n2=n("873062"),n3=n("399796"),n5=n("35730"),n6=e=>{let{isChildRoute:t}=e;(0,a.useEffect)(()=>{!t&&n3.Q.removeItem(n5.CookieKeys.LiveInvisibleQuery);let e=()=>{try{var e;n3.Q.setItem(n5.CookieKeys.LiveInvisibleQuery,(0,u.stringify)(null===(e=window)||void 0===e?void 0:e.__INVISIBLE_QUERY__),60)}catch(e){}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t])},n7=n("103235"),n8=n("936495"),n4=n("213987"),n9=n("811167"),ie=n("908790"),it=n("271994"),ii=n("903868");let il=e=>{var t;let{visible:n=!1}=e,r=(0,z.Z)(),{singletonStore:{message:o}}=r,[u,d]=(0,a.useState)({selectedGift:null,isVisible:n,gifts:[]});(0,a.useEffect)(()=>{let e=e=>{var t,n;let r=null==e?void 0:e[0],o=null==r?void 0:r.payload;if(o&&(null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.length)>0){let e=o.data[o.data.length-1];if((null==e?void 0:e.type)===6){if(null==e?void 0:e.container_payload){let t=null===(n=JSON.parse(e.container_payload))||void 0===n?void 0:n.data;(null==t?void 0:t.length)>0&&d(e=>(0,l._)((0,i._)({},e),{gifts:t,isVisible:!0}))}else d(e=>(0,l._)((0,i._)({},e),{isVisible:!1}))}}};return null==o||o.on("GroupLiveContainerChangeMessage",e),()=>{null==o||o.off("GroupLiveContainerChangeMessage",e)}},[]),(0,a.useEffect)(()=>{d(e=>(0,l._)((0,i._)({},e),{isVisible:n}))},[n]);let s=(null==r?void 0:null===(t=r.giftStore)||void 0===t?void 0:t.giftList)||[];return{gifts:(0,a.useMemo)(()=>u.gifts.map(e=>{let t=s.find(t=>t.id===e.id);return t?(0,l._)((0,i._)({},e),{price:t.price}):e}),[u.gifts,s]),selectedGift:u.selectedGift,isVisible:u.isVisible}};var ir=n("465732"),io=n("230501"),ia=n("21710"),iu=e=>{let{gifts:t,isVisible:n}=il(e),{sendGift:i}=(0,ia.Z)(),l=(0,a.useRef)(!1),[r,u]=(0,a.useState)(!1),d=async t=>{if(!l.current){l.current=!0;try{var n;await i({gift_id:t.id,count:1,price:t.price||0,giftSource:io._W.GIFT_MENU}),null===(n=e.onGiftSend)||void 0===n||n.call(e,t)}catch(e){}finally{l.current=!1}}};return n?(0,o.jsx)("div",{className:ir.default.giftMenuOverlay,children:(0,o.jsx)("div",{className:ir.default.giftMenu,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:(0,o.jsx)("div",{className:ir.default.giftList,children:t.map(e=>(0,o.jsxs)("div",{className:ir.default.giftListItem,children:[(0,o.jsx)("img",{src:e.icon,alt:e.name,className:ir.default.giftIcon}),(0,o.jsxs)("div",{className:ir.default.giftInfo,children:[(0,o.jsx)("span",{className:ir.default.giftName,children:e.name}),r&&e.price&&(0,o.jsxs)("span",{className:ir.default.giftPrice,children:[e.price,"钻"]})]}),r?(0,o.jsx)("button",{type:"button",className:ir.default.sendGiftButton,onClick:()=>{d(e)},children:"赠送"}):null]},e.id))})})}):null};nL.z.markStart("living_player_js_load");let id=(0,ep.r)(e=>(0,o.jsx)(tG.Z,(0,i._)({className:eA.default.autoPlaySwitch,title:"连播"},e))),is=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("56362")]).then(n.bind(n,11225)),{ssr:!1}),ic=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("96017"),n.e("22987")]).then(n.bind(n,771058)),{ssr:!1}),iv=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("23881")]).then(n.bind(n,901884)),{ssr:!1}),i_=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("3047")]).then(n.bind(n,819383)),{ssr:!1}),im=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("21692"),n.e("54691")]).then(n.bind(n,441075)),{ssr:!1}),ih=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("28251"),n.e("99965"),n.e("30574")]).then(n.bind(n,933499)),{ssr:!1}),ip=(0,tZ.ZP)(()=>n.e("18419").then(n.bind(n,614566)),{ssr:!1}),ig=(0,tZ.ZP)(()=>n.e("624").then(n.bind(n,872759)),{ssr:!1}),iy=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("79373"),n.e("53051")]).then(n.bind(n,527846)),{ssr:!1}),iE=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("7680")]).then(n.bind(n,534657)),{ssr:!1}),iw=(0,tZ.ZP)(()=>Promise.all([n.e("66135"),n.e("97607"),n.e("89368"),n.e("39331")]).then(n.bind(n,836808)),{ssr:!1}),iI=()=>{let e;try{let t="";t=A.s?(0,c.d)().querystring:window.location.href.split("?")[1],e=u.parse(t)}catch(e){}return e},iS=(e,t)=>{let n=null==e?void 0:e.split("?")[0];if(n===(null==t?void 0:t.split("?")[0]))return!0;try{if(new URL(e).pathname===new URL(t).pathname)return!0;return!1}catch(e){}},ib=e=>{try{var t,n,i,l;if(!(Object.values((null==e?void 0:null===(n=e.room)||void 0===n?void 0:null===(t=n.stream_url)||void 0===t?void 0:t.pull_datas)||{}).length>0&&Object.values((null==e?void 0:null===(i=e.web_stream_url)||void 0===i?void 0:i.pull_datas)||{}).length>0))return!1;return Object.values(null==e?void 0:null===(l=e.web_stream_url)||void 0===l?void 0:l.pull_datas).every(e=>{var t,n;return(null==e?void 0:null===(t=e.extension)||void 0===t?void 0:t.camera_clip)&&(null==e?void 0:null===(n=e.extension)||void 0===n?void 0:n.game_clip)||(0,M.V)(null==e?void 0:e.extension)})}catch(e){return!1}};var iN=(0,ek.Pi)(e=>{var t,n,u,c,y,M,W,J,et,en,es,ec,ev,ef,em,eh,ep,eg,eT,ek,eM,ej,eD,eO,eV,eU,eF,eZ,eG,eH,eW,eY,ez,{onPlay:eQ,onPause:eq,onError:eX,isTheaterOn:e2,onTheaterSwitch:e3,onFullScreenSwitch:e5,isLogPlay:e6,onSend:e8,onArrowClick:e4,isFoldChatroom:e9,isDanmakuFeatureOn:tn,playerCoverText:ti,isPause:tl,refreshPlayer:tr,recommendOnEndRoom:ta,livingRoomErrorStatus:t_,isVerifyed:th,immersive:tp,isFixedChat:tg,inRoomOnAppView:ty,isSpringSkin:tE,fullscreenTarget:tw,hideBanner:tI,onCameraChange:tS,multiCameraLogParams:tb,messageFrom:tN,getPlayer:tL,useContextMenu:tx,disableLiveRecommendOnEnd:tC=!1,onShowVipLiveBoundary:tT,rawStore:tP}=e,tk=(0,r._)(e,["onPlay","onPause","onError","isTheaterOn","onTheaterSwitch","onFullScreenSwitch","isLogPlay","onSend","onArrowClick","isFoldChatroom","isDanmakuFeatureOn","playerCoverText","isPause","refreshPlayer","recommendOnEndRoom","livingRoomErrorStatus","isVerifyed","immersive","isFixedChat","inRoomOnAppView","isSpringSkin","fullscreenTarget","hideBanner","onCameraChange","multiCameraLogParams","messageFrom","getPlayer","useContextMenu","disableLiveRecommendOnEnd","onShowVipLiveBoundary","rawStore"]);(0,nx.C)("living_player");let tA=(0,z.Z)(),tj=(0,v.a)(),tZ=iI().r_id,{userStore:{userInfo:tG,odin:tK,setPlayerUserHandlePause:tY,headerUserInfo:tz},roomStore:{setRoomStatus:tQ,roomInfo:tq,setLiveStatus:tJ,liveStatus:tX,isUgcLive:t0,isGameHiddle:t1,setGameHiddle:t2,setPausePop:t3,likeStatus:t5,isAsianGames:t7,doubleScreenInfo:nv,setDoubleScreenInfo:nm,danmakuQueue:nE,danmakuQueueLength:nw,foldChatroom:nT,isFocus:n3,setIsFocus:n5,isAnchorBan:il,isOlympicGame:ir,autoHide:io,setAutoHide:ia,setPipStatus:iS,enableAutoPip:iN,setEnableAutoPip:iL,februaryOptimize:ix,setFebruaryOptimize:iC},feedStore:{isActive:iT,isChangePending:iP,slideStarted:ik,skipLowQuality:iR},linkmicStore:{linkRoomType:iA,linkRoomTypeHooks:iM,linkStatus:ij,guestBattleInfo:iD,orderSingInfo:iO,linkMicLayout:iV,setIsGroupLive:iU,isGroupLive:iF,uiLayout:iZ,linkmicVideoEqualLayoutFrameOpt:iG},giftStore:{giftStatus:iH,supportedGiftPages:iB,giftMessages:i$,effectList:iK,balance:iW,effectSwitchStatus:iY,setEffectSwitchStatus:iz,giftPanelSwitchStatus:iQ,setIsTheaterOn:iq,giftTrayConfig:iJ},appStore:{isSpider:iX},pkStore:{pkStatus:i0,showPKScoreBar:i1,isInPK:i2,isInPunish:i3,pkAppData:i5,pkStatusData:i6,pkListData:i7},audienceStore:{audiencePanelStatus:i8},fansClubStore:{fansClubShowStatus:i4},hybridStore:{containerList:i9},vipStore:{isShowVipPanel:le,setIsShowVipPanel:lt,vipLiveStatus:ln,vipInfoLoaded:li},eventStore:{playerEvent:ll,tabEvent:lr,basicEvent:lo,ecomEvent:la,userEvent:lu},isLiveModal:ld,cameraStore:{cameraInfo:ls},singletonStore:{container:lc,message:lv,playerHandler:l_,setPlayer:lf},paidLiveStore:{paidLiveData:lm,setViewType:lh,viewType:lp,setPaidLiveData:lg,retType:ly,setRetType:lE,paidLiveAuth:lw},activityIndicatorStore:{currentLandPage:lI},ecomStore:{cartVisible:lS,setCartVisible:lb,setShowAgreement:lN,showAgreement:lL},streamStore:{isUseVVC:lx,isH265:lC,streamData:lT,setVideoInit:lP,setIsH265Error:lk,lowH265:lR},rightPanelStore:{playerMargin:lA,renderItemList:lM,openItem:lj},vrStore:{isImmersive:lD,isVrLive:lO,isInVrView:lV}}=tA,{cityName:lU}=null!==(eH=(0,ii.Iq)(e=>{let{cityName:t}=e;return{cityName:t}}))&&void 0!==eH?eH:{},lF=(0,p.$s)(e=>{let{setFullscreen:t}=e;return{setFullscreen:t}}),{SlotsComponent:lZ,isInPreviewActive:lG,fullScreenTarget:lH,isInPreview:lB,isCssFullScreen:l$,isInPreviewEnter:lK,isPaidLive:lW,isDoubleScreen:lY,isFullScreen:lz,isAutoNext:lQ,onAutoNextChange:lq,previewOnLoadEnd:lJ,onPause:lX}=(0,Q.DQ)(),l0=(0,a.useRef)(lB),l1=!lB&&(0,N.Nr)(tj.pathname),{setDisableScroll:l2,setFullscreen:l3,fullscreen:l5}=(0,td.Z)(),[l6,l7]=(0,a.useState)(0),{isLivingPip:l8,closeLivingPip:l4}=(0,ne.ds)(),l9=(0,ne.ng)(),re=(0,ew.fl)(),rt=()=>(0,L.DT)()?l9:l9||(0,x.Kv)();(0,a.useEffect)(()=>{[j.kx.LIVE_FINISH,j.kx.KICK_OUT,j.kx.BLOCK].includes(ti)&&l4()},[ti]),(0,a.useEffect)(()=>{lB&&!lK&&l4()},[lB,lK]),a.useEffect(()=>{if(!!ld)[eE.cK.LINKED,eE.cK.LINKING].includes(ij)?l2(!0):l2(!1)},[ld,ij]);let rn=(0,e_.j)(),ri=a.useMemo(()=>(0,L.DT)(),[]),{name:rl}=(0,nt.V)(),{syncVolume:rr,liveVolumeBalance:ro}=null!=rn?rn:{},ra=(0,X.Z)(),ru=Y()(tq,"room.status"),rd=Y()(tq,"room.live_room_mode"),rs=Y()(tq,"room.id_str"),rc=Y()(tq,"web_rid"),rv=!!rs,r_=Y()(tq,"room.toolbar_data"),rf=(0,a.useRef)(),rm=(0,a.useRef)(!1),rh=(0,a.useRef)({}),rp=(0,a.useRef)(0),rg=(0,a.useRef)(!1),ry=(0,g.AH)(),[rE,rw]=(0,a.useState)(!1),[rI,rS]=(0,a.useState)(!1),[rb,rN]=(0,a.useState)(!1),[rL,rx]=(0,a.useState)(!1),[rC,rT]=(0,a.useState)(!0),[rP,rk]=(0,a.useState)([]),rR=ib(tq),{stream:rA,common:rM,options:rj}=(0,t$.ZP)({disabledH265:rI,doubleScreenAB:!0,doubleScreenInfo:nv,isPullDataExsit:lB?!!lK&&rR:rR}),rD=(0,a.useMemo)(()=>!1,[]),{ticketInfo:rO}=(0,ts.d)(),rV=(0,a.useRef)(null),rU=(0,a.useRef)(!1),rF=a.useMemo(()=>Y()(rM,"secret_key",""),[rM]),rZ=!1;try{rZ="live.douyin.com"!==window.location.host&&(null===(eY=window)||void 0===eY?void 0:null===(eW=eY.location)||void 0===eW?void 0:eW.search.includes("r_player=1"))}catch(e){}let rG=a.useMemo(()=>Number(Y()(lm,"paid_type",0))===eL.xc.PAID_LIVE,[lm]),rH=(0,a.useRef)(!0);(0,a.useEffect)(()=>{var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();t&&rH.current&&(rH.current=!1,(0,it.K)({scene:"live",location:lU,isLogin:null==tz?void 0:tz.isLogin,forceLoginCallback:()=>{null==t||t.pause()}}))},[rf.current]),a.useEffect(()=>{iU(Y()(tq,"room.others.group_live_data.is_group_live",0))},[tq]),tD();let rB=(0,g.dM)(rj),{openIntercepted:r$,interceptedQuality:rK,openTryWatching:rW,qualities:rY,startQuality:rz,bitrate:rQ}=(0,tB.Z)({stream:rA,defaultQuality:rB}),{addH265ErrorNum:rq,resetH265ErrorNum:rJ}=(0,n1.Z)({});n6({isChildRoute:l1});let[rX,r0]=(0,a.useState)(!rG),{url:r1,lowUrl:r2}=(0,t$.le)({stream:rA,startQuality:rz}),r3=(0,a.useRef)(""),[r5,r6]=(0,a.useState)(lB?"":r1),r7=(0,a.useMemo)(()=>{let e=[];try{e=Object.keys(rA||{}).filter(e=>"ao"!==e).map(e=>{let t;try{t=JSON.parse(rA[e].main.sdk_params)}catch(e){t={resolution:"0x0"}}return{quality:e,resolution:t.resolution,url:(0,D.uC)(rA[e].main.flv)}})}catch(t){e=[]}let t={resolutions:e,dividing:ry,useArea:(null==rn?void 0:rn.liveUseArea)===1,useScore:ry>0,useLongFirstframe:(null==rn?void 0:rn.liveUseFirstFrame)===1};return(0,l._)((0,i._)({},t),{switchUrl:r1,lowUrl:r2})},[rA,rn]),{getSwitchStatus:r8,setSwitchStatus:r4}=(0,n8.P)(),{inActive:r9}=(0,tc.Z)({isActive:iT}),{setLoadStartTime:oe,setTtfbTime:ot,setStreamReceived:on}=(0,tH.Z)({from:lB?"preview/live":"living",player:null===(t=rf.current)||void 0===t?void 0:t.getPlayer(),isRoomEnd:ru===O.LV.END,eventParams:lo,isH265:lC}),oi=(0,S.Z)(()=>{oe(),nL.z.markOnce("living_player_load_start")}),{innerFeedOn:ol}=(0,nh.P)();(0,a.useEffect)(()=>{rk(iB)},[iB]),(0,a.useEffect)(()=>{rW&&rT(!1)},[rW]);let or=(0,a.useCallback)(e=>{rx(e)},[]),[oo,oa]=(0,a.useState)(!1),ou=(0,a.useCallback)(e=>{oa(e)},[]);(0,a.useEffect)(()=>{var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();if(lf(t),!!t)null==t||t.on("detectedblackscreen",()=>{rS(!0)})},[null==rf?void 0:null===(n=rf.current)||void 0===n?void 0:n.getPlayer()]),(0,a.useEffect)(()=>{(0,tF.oh)()&&!l1&&!lB&&(async()=>{let e=await C.invoke("IS_WINDOW_FULLSCREEN");(null==e?void 0:e.data)&&(0,tF.GP)(()=>{var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();null==t||t.getFullscreen(tw)})})()},[tw,lB]),(0,a.useEffect)(()=>{if((0,tF.oh)()&&!lB){let e=e=>{if(!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!lB)"KeyH"===e.code&&rE&&T.emit(T.EVENT.exitClientFullscreen)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}},[rE,lB]);let[od,os]=(0,a.useState)(0),[oc,ov]=(0,a.useState)(!1),[o_,of]=(0,a.useState)(!1),[om,oh]=(0,a.useState)({roomType:"",screenStyle:!1}),[op,og]=(0,a.useState)(!1),{playerWaterMark:oy,volumeWaterMark:oE,updatePlayerStyle:ow}=(0,n7.Z)({user_id:Y()(tG,"id_str","")||(null==tz?void 0:null===(u=tz.info)||void 0===u?void 0:u.uid),uuid:null==tK?void 0:tK.user_unique_id,player:null===(c=rf.current)||void 0===c?void 0:c.getPlayer(),isLiveWaterMark:(null==rn?void 0:null===(y=rn.liveWaterMark)||void 0===y?void 0:y.livePlayer)===1&&(!iZ||iZ<=0),isSmallWindow:l8,isPlayerSucc:op,liveUserWaterMarkEvent:null==lu?void 0:lu.liveUserWaterMarkEvent}),oI=(0,a.useCallback)(e=>{var t;on(),"number"!=typeof e&&(e=void 0),nL.z.markOnce("living_player_loaded_data"),(0,I.j)({roomId:rs,type:"first_frame",duration:e}),of(!0),rg.current=!1,null===(t=tk.onLoadedData)||void 0===t||t.call(tk,e),og(!0);try{null==lJ||lJ()}catch(e){}},[tk.onLoadedData,lJ]),oS=a.useMemo(()=>rE?V.wq.FULL_SCREEN:e2?V.wq.THEATER:V.wq.NORMAL,[rE,e2]),ob=(null===(M=tq.room)||void 0===M?void 0:M.live_room_mode)===O.ke.MEDIA;(0,a.useEffect)(()=>{ld&&l5!==rE&&rw(l5),document.body.classList.toggle("xgplayer-fullscreen-parent",rE)},[l5,ld,rE,rw]);let oN=(0,a.useMemo)(()=>rG&&ru!==O.LV.END&&ti!==j.kx.ANCHOR_BAN&&ti!==j.kx.KICK_OUT,[rG,ru,ti]);a.useEffect(()=>((null==tq?void 0:tq.web_rid)&&(null==l_||l_.setCurrentRoom(tq,r5),null==l_||l_.startHeartDetect()),()=>{null==l_||l_.stopHeartDetect()}),[tq]),(0,a.useEffect)(()=>{if(iT){let e=ld?T.listen(T.EVENT.liveModalPlayerPause,()=>{var e,t;null==rf||null===(t=rf.current)||void 0===t||null===(e=t.getPlayer())||void 0===e||e.pause()}):()=>{};return()=>{null==e||e()}}},[iT,ld]),(0,a.useEffect)(()=>{if((0,tF.oh)()&&!lB){let e=T.listen(T.EVENT.ControlLiveFullscreenByClient,e=>{let{isFull:t}=e;if(t)(0,w.a)(),(0,tF.GP)(()=>{var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();null==t||t.getFullscreen(tw)});else{var n;let e=null===(n=rf.current)||void 0===n?void 0:n.getPlayer();null==e||e.exitFullscreen()}});return()=>{null==e||e()}}},[tw,lB]),(0,a.useEffect)(()=>{let e=document.getElementById("douyin-sidebar");oS!==V.wq.THEATER||e9?oS===V.wq.THEATER&&e9?tJ(O.zZ.WEB_FULL_NO_COMMENT):oS===V.wq.FULL_SCREEN?tJ(O.zZ.FULL):tJ(O.zZ.NORMAL):tJ(O.zZ.WEB_FULL),e&&(oS!==V.wq.THEATER||e9?e.style.visibility="visible":e.style.visibility="hidden")},[oS,e9]);let oL=a.useRef(!A.s&&(0,U.rC)());(0,d.Z)(()=>{var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();if(!!t)ij===eE.cK.LINKED?(oL.current=t.muted,t.muted=!0,t.plugins.play.hide(),t.plugins.volume.hide()):ij===eE.cK.NOT_LINK&&(t.muted=oL.current,t.plugins.play.show(),t.plugins.volume.show())},[ij]),a.useEffect(()=>{var e,t,n,i,l;let r=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();if(!!r)ti===j.kx.KICK_OUT&&(r.muted=!0,r.plugins.play.hide(),r.plugins.volume.hide(),(0,x.DJ)()&&(null==r||null===(n=r.plugins)||void 0===n||null===(t=n.pip)||void 0===t||t.exitPIP())),ti===j.kx.ANCHOR_BAN&&(rm.current=!0,r.muted=!0),rm.current&&ti===j.kx.NONE&&(rm.current=!1,r.muted=!1),ti===j.kx.BLOCK&&(0,x.DJ)()&&(null==r||null===(l=r.plugins)||void 0===l||null===(i=l.pip)||void 0===i||i.exitPIP())},[ti]),a.useEffect(()=>{let e=document.querySelector("#chatroom");null==nm||nm({height:null==nv?void 0:nv.height,width:null==nv?void 0:nv.width,isHideCamera:(null==e?void 0:e.offsetHeight)<600,isInPicture:(0,x.DJ)()||l8})},[(0,x.DJ)(),null==nv?void 0:nv.isHideCamera,l8]),a.useEffect(()=>{var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();if(!!t){if(ru===O.LV.END){if(ol)return;t.plugins.play.hide(),t.plugins.volume.hide(),(0,x.DJ)()&&t.plugins.pip.exitPIP()}}},[ru]);let ox=a.useCallback(()=>{if(null==l_||l_.setCurrentRoom(tq,r5),null==l_||l_.setUrlAutoChange(!1),rf.current){let e=rf.current.getPlayer();null==l_||l_.setPlayer(e)}return ru!==O.LV.END&&ru!==O.LV.PAUSE&&!0},[tq,r5,ru]),oC=a.useCallback(()=>{rp.current&&Date.now()-rp.current>200&&rp.current&&rg.current&&F.kg.event(`[${P.Tn.Error}]${P.Mo.LiveBasicPlayerWaiting}`,{room_id:Y()(tq,"roomId"),url:r5,room_status:ru,is_client:(0,L.DT)(),type:"living"})},[tq,ru,r5]),oT=a.useCallback(()=>{if(oa(!1),ox()){let e=Y()(tq,"roomId");null==l_||l_.handlePlaying(e),oC()}},[tq,r5,ru]),oP=a.useCallback(()=>{if(ox()){let e=Y()(tq,"roomId");null==l_||l_.handleWaiting(e),!rg.current&&(rp.current=Date.now(),rg.current=!0)}},[tq,r5,ru]),ok=a.useCallback(()=>{if(lC&&rJ(),eQ&&eQ(),null==lX||lX(!1),lP&&lP(!0),os(e=>e+=1),(0,eo.yr)({isLive:1}),oc?null==lr||lr.liveStartEvent({event_page:"live_detail",if_mini_window:(0,tU.OL)()}):ov(!0),ox()){let e=Y()(tq,"roomId");null==l_||l_.handlePlay(e)}},[tq,r5,ru,oc,lC]),oR=a.useCallback(()=>{if(rp.current=0,eq&&eq(),null==lX||lX(!0),null==lr||lr.livePauseEvent({event_page:"live_detail",if_mini_window:(0,tU.OL)()}),ox()){let e=Y()(tq,"roomId");null==l_||l_.handlePause(e)}},[tq,r5,ru]),oA=a.useCallback(()=>{if(ru===O.LV.LIVING){var e;let t=null===(e=rf.current)||void 0===e?void 0:e.getPlayer();null==t||t.retry();return}if(ox()){let e=Y()(tq,"roomId");null==l_||l_.handleEnded(e)}},[tq,r5,ru]),oM=a.useCallback(e=>{if(eX&&eX(e),ox()){if(!r5)return;let i=Y()(tq,"roomId");if(lC||lR&&((null==r5?void 0:r5.includes("ld5"))||(null==r5?void 0:r5.includes("sd5")))){var t,n;lk(!0),null==rf||null===(n=rf.current)||void 0===n||null===(t=n.getPlayerLogger())||void 0===t||t.updateExt({h265_miss:1}),rq(),setTimeout(()=>{var t,n,i,l;let r=null===(t=rf.current)||void 0===t?void 0:t.getPlayer();null==r||r.retry(),F.kg.event("player_relegate_url",{room_id:Y()(tq,"roomId"),url:null==r?void 0:null===(l=r.plugins)||void 0===l?void 0:null===(i=l.flvlive)||void 0===i?void 0:null===(n=i.loader)||void 0===n?void 0:n.finnalUrl,is_client:(0,L.DT)(),host:null==tj?void 0:tj.host,pathType:(()=>{try{if(tj.pathname.indexOf("root/live")>=0)return"root_live";if(tj.pathname.indexOf("follow/live")>=0)return"follow_live";if(tj.pathname.indexOf("follow")>=0)return"follow";if(tj.search.indexOf("recommend=1")>=0)return"recommend";if("www.douyin.com"===tj.host)return"main";if("live.douyin.com"===tj.host)return"live";return"other"}catch(e){return"error"}})(),isNewProject:0,code:(null==e?void 0:e.code)||(null==e?void 0:e.errorCode),info:(null==e?void 0:e.ex)||"",detail:(()=>{try{return JSON.stringify(e)}catch(e){return"err序列化失败"}})()})},1e3);return}null==l_||l_.handleError(i,e)}},[tq,r5,ru,t7,lC,lR]),oj=a.useCallback(e=>{let t=Y()(tq,"roomId"),n=null==l_?void 0:l_.getRoomInfo(t);"switch_play_pause"===e.action&&(tY(!e.paused),n&&(n.USER_PAUSED=!e.paused)),(0,tF.oh)()&&!lB&&(null==e?void 0:e.action)==="switch_fullscreen"&&(null==e?void 0:e.eventType)==="click"&&(null==e?void 0:e.fullscreen)&&T.emit(T.EVENT.exitClientFullscreen)},[tq,lB]),{rectRef:oD,handleOpenLiveUserProfileByRect:oO}=(0,nN.FD)(),oV=a.useCallback(e=>{oO({clickSource:"ugc_avatar",targetUserType:"anchor",targetUid:Y()(tq,"room.commentary_room_info.user_id","")||Y()(tq,"room.commentary_room_info.userId",""),secTargetUid:"",popoverProps:{position:"rightBottom"}})},[tq,tG,tA,t0]),oU=(0,a.useCallback)(()=>{lt({isShow:!1})},[]),[oF,oZ]=(0,a.useState)(!1),{isVip:oG,isVipLive:oH,freePreview:oB}=(0,tV.Rk)(lm,rn);q(tq,rf,od),tM();let o$=(0,a.useMemo)(()=>{let e=[];return i9&&i9.size>0&&i9.forEach((t,n)=>{e.push((0,o.jsx)(tf.Z,{itemKey:n,autoOpen:!0,onClose:()=>{lc.close(n)},group:tm.k.Hybrid,children:(0,o.jsx)("div",{className:eA.default.hybridContainerWrapper,children:(0,o.jsx)("div",{id:(0,el.Mu)(n),className:eA.default.hybridContainer})})}))}),e},[i9]),{isLike:oK,isClickLike:oW,isShowLike:oY,icons:oz,userLike:oQ}=te({likeStatus:t5,roomId:Y()(tq,"roomId"),userInfo:tG}),oq=(0,a.useMemo)(()=>({adCid:(0,Z.V7)(),adId:(0,Z.qV)(),adLogExtra:(0,Z.u9)()}),[]);e7(ij);let{isGroupFight:oJ}=(0,$.Z)(),{isGuestBattle:oX}=(0,K.Z)(),o0=(0,a.useRef)(null),{isOrderSing:o1}=(0,e1.Z)(),o2=(0,tt.Z)();(0,a.useEffect)(()=>{var e,t,n,i;null==o0||null===(t=o0.current)||void 0===t||null===(e=t.setCurrentQuality)||void 0===e||e.call(t,rz),ru!==O.LV.END&&(!rA||rA&&(null===(i=Object)||void 0===i?void 0:null===(n=i.keys(rA))||void 0===n?void 0:n.length)===0)&&F.kg.event(`[${P.Tn.Error}]${P.Mo.LiveStreamDataErrror}`,{room_id:Y()(tq,"roomId"),quality:rz,streamData:lT,is_client:(0,L.DT)()})},[rA,rz,tq,lT,ru]),(0,a.useEffect)(()=>{var e,t,n,i,l,r,o,a,u,d;if(!!rG)0===lw.FullScreen?null===(l=rf.current)||void 0===l||null===(i=l.getPlayer)||void 0===i||null===(n=i.call(l))||void 0===n||null===(t=n.plugins)||void 0===t||null===(e=t.maskiconplugin)||void 0===e||e.addMask("fullscreen"):null===(d=rf.current)||void 0===d||null===(u=d.getPlayer)||void 0===u||null===(a=u.call(d))||void 0===a||null===(o=a.plugins)||void 0===o||null===(r=o.maskiconplugin)||void 0===r||r.removeMaskIcon("fullscreen")},[lw,rG]);let o3=(0,a.useMemo)(()=>Y()(tq,"room.episode_extra.mod.episode_stage")===nb.j.FIRST_LIVE,[tq]),{isHit:o5}=ei({toolbarData:r_,threshold:.1,playTime:.5}),o6=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];nL.z.markOnce("living_player_ready"),null===(e=tk.onReady)||void 0===e||e.call(tk,...n)},o7=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];nL.z.markOnce("living_player_before_player_init"),null===(e=tk.beforePlayerInit)||void 0===e||e.call(tk,...n)};(0,a.useEffect)(()=>{var e,t;let n=null===(t=rf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);l6>0&&n&&r5&&(n.src=r5)},[r5,l6]),(0,a.useEffect)(()=>{var e;(null===(e=rf.current)||void 0===e?void 0:e.getPlayer)&&"function"==typeof tL&&tL(rf.current.getPlayer())},[rf.current,tL]),(0,a.useEffect)(()=>{let e=localStorage.getItem("webcast_local_quality")||"",t=Array.isArray(rY)&&rY.some(t=>t===e),n=lK!==l0.current||!e6.current;if(l0.current=lK,!lB||!!lK){if(n&&(null==tG?void 0:tG.isReady)&&iT&&(null==tq?void 0:tq.web_rid)){var r,o,a,u,d,s,c;let e=(0,b.RE)();rX&&(null==ll||null===(s=ll.livePlayEvent)||void 0===s||s.call(ll,(0,i._)((0,l._)((0,i._)({anchor_id:Y()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",muted:null===(o=rf.current)||void 0===o?void 0:null===(r=o.getPlayer())||void 0===r?void 0:r.muted,stream_type:ra,definition:(e?"auto_":"")+V.Kt[rz],definition_set_type:e?"auto":t?"manual":"",enter_method_temai:null===(u=window)||void 0===u?void 0:null===(a=u.__INVISIBLE_QUERY__)||void 0===a?void 0:a.enter_method_temai,audience_type:(0,G.Zi)(tq)},null!==(c=null==la?void 0:la.getLiveShoppingParams(tq))&&void 0!==c?c:{}),{is_viplive:(null===(d=(0,tV.Rk)(lm))||void 0===d?void 0:d.isVipLive)?1:0}),tb))),e6.current=rX}}},[tq,tG,ra,e6,rz,iT,tb,rX,lB,lK]);let o8=i5.ver===t9.TG.DOUBLE?null==i6?void 0:i6.end_reason:null==i7?void 0:null===(W=i7.battle_stats)||void 0===W?void 0:W.end_reason;(0,a.useEffect)(()=>{if(!!i0){if(!i2&&!i3){var e,t,n,i,l;null==ll||null===(l=ll.liveLinkPlayEvent)||void 0===l||l.call(ll,{anchor_id:Y()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",muted:null===(t=rf.current)||void 0===t?void 0:null===(e=t.getPlayer())||void 0===e?void 0:e.muted,enter_method_temai:null===(i=window)||void 0===i?void 0:null===(n=i.__INVISIBLE_QUERY__)||void 0===n?void 0:n.enter_method_temai,audience_type:(0,G.Zi)(tq)})}}},[i0,i2,i3,ll,tq,o8]),(0,a.useEffect)(()=>{var e,t,n;if(!!i0||void 0!==o8)null==ll||null===(n=ll.livePKPlayEvent)||void 0===n||n.call(ll,{anchor_id:Y()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",stream_type:ra,enter_method_temai:null===(t=window)||void 0===t?void 0:null===(e=t.__INVISIBLE_QUERY__)||void 0===e?void 0:e.enter_method_temai,audience_type:(0,G.Zi)(tq),end_reason:o8})},[i0,i2,i3,ll,tq,rz,o8]),(0,a.useEffect)(()=>{let e=localStorage.getItem("webcast_local_quality")||"",t=Array.isArray(rY)&&rY.some(t=>t===e);if(!iP&&ik){var n,r,o,a,u,d,s;null==ll||null===(d=ll.livePlayEvent)||void 0===d||d.call(ll,(0,i._)((0,l._)((0,i._)({anchor_id:Y()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",muted:null===(r=rf.current)||void 0===r?void 0:null===(n=r.getPlayer())||void 0===n?void 0:n.muted,stream_type:ra,definition:rz,definition_set_type:t?"manual":"",enter_method_temai:null===(a=window)||void 0===a?void 0:null===(o=a.__INVISIBLE_QUERY__)||void 0===o?void 0:o.enter_method_temai,audience_type:(0,G.Zi)(tq)},null!==(s=null==la?void 0:la.getLiveShoppingParams(tq))&&void 0!==s?s:{}),{is_viplive:(null===(u=(0,tV.Rk)(lm))||void 0===u?void 0:u.isVipLive)?1:0}),tb))}},[iP,null==tq?void 0:tq.roomId]),(0,a.useEffect)(()=>{var e,t,n;(null===(e=(0,tV.Rk)(lm))||void 0===e?void 0:e.isVipLive)&&li&&(null==ll||null===(t=ll.vipLiveShowEvent)||void 0===t||t.call(ll,{anchor_id:Y()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",livevip_status:ln}),null==ll||null===(n=ll.vipLivePlayEvent)||void 0===n||n.call(ll,{anchor_id:Y()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",livevip_status:ln}))},[lm,li]),(0,a.useEffect)(()=>{if("app_continued"===(0,k.Rs)("url_source")){var e,t;let n=(0,k.Rs)("enter_from_on_cellphone"),i=(0,k.Rs)("previous_page_on_cellphone"),l=(0,k.Rs)("is_landscape_status_on_cellphone"),r=(0,k.Rs)("enter_method_on_cellphone"),o=(0,k.Rs)("from_device_id"),a=(0,k.Rs)("from_user_id"),u=null!==(t=(0,k.Rs)("from_app_id"))&&void 0!==t?t:"";null==ll||null===(e=ll.continuingRemindShow)||void 0===e||e.call(ll,{enter_from_on_cellphone:n,previous_page_on_cellphone:i,is_landscape_status_on_cellphone:Number(l),enter_method_on_cellphone:r,from_device_id:o,from_user_id:a,room_id:null==tq?void 0:tq.roomId,from_app_name:ex.AppID2AppName[u.toString()],enter_from_merge:"live_continue",enter_method:r})}},[tq]);let o4=(0,a.useMemo)(()=>t0||rR&&!(0,R.G6)(),[t0,rR]);try{ol&&(window.__disableReuseAppend__=o4||rG)}catch(e){}(0,a.useMemo)(()=>lM.length>0||rb,[lM,rb]),(0,a.useEffect)(()=>{iT&&(ru!==O.LV.END||oF)&&le&&(!tI||oF)&&lj(tm.k.Vip)},[iT,ru,oF,le,tI,oF]),(0,a.useEffect)(()=>{if("undefined"!=typeof window&&rf.current&&!lB){var e,t;window._livingPlayer_=null==rf?void 0:null===(t=rf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t)}},[rf.current,lB]);let o9=e=>{var t,n,i,l,r,o;if(rG&&0===lw.FullScreen){rO({interact_name:"cssfullscreen"});return}let a=null===(n=rf.current)||void 0===n?void 0:null===(t=n.getPlayer)||void 0===t?void 0:t.call(n);(null==a?void 0:a.fullscreen)&&a.plugins.fullscreen.changeFullScreen(),e&&(null==ll||ll.liveTheaterModeBtnClickEvent(!e,{action_type:"auto"})),!e&&lK&&(null==tA||null===(l=tA.roomStore)||void 0===l||null===(i=l.setFoldChatroom)||void 0===i||i.call(l,!1)),e3&&!(e2&&rE)&&e3(e),e&&(0,x.DJ)()&&(null==a||null===(o=a.plugins)||void 0===o||null===(r=o.pip)||void 0===r||r.exitPIP())};(0,a.useEffect)(()=>{if(r8(n8.$.JUNE_FULLSCREEN_SWITCH)&&o9(!0),(null==rf?void 0:rf.current)&&l1){var e,t,n;let i=null==rf?void 0:null===(t=rf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);null===(n=E().instManager)||void 0===n||n.setActive(null==i?void 0:i.playerId,!0)}return null==iC||iC((null==rn?void 0:rn.liveFebruaryOptimize)===eC.LiveFebruaryOptimize.On),()=>{o9(!1)}},[l1]);let ae=(0,l._)((0,i._)((0,l._)((0,i._)({user_id:tG.id_str,device_id:null==tK?void 0:tK.user_unique_id,scene:ld?H.C.liveModal:H.C.liveDetail},t7?{act_code:"yyh"}:{},ir?{act_code:"olympic"}:{}),{live_type:Y()(tq,"room.live_room_mode",""),definition:rz,is_game:Y()(tq,"room.game_data.game_tag_info.is_game",2),is_live_end:ti&&!(ti===j.kx.ANCHOR_BAN&&iA)?1:0,is_shopping:!!(null===(et=Y()(tq,"room.toolbar_data"))||void 0===et?void 0:null===(J=et.entrance_list)||void 0===J?void 0:J.find(e=>e.component_type===ee.Ls.Cart))}),(null===(en=Y()(lT,"H265_streamData",void 0))||void 0===en?void 0:en.stream)?{}:{h265_miss:1}),{anchor_id:null==tq?void 0:null===(es=tq.anchor)||void 0===es?void 0:es.id_str,room_id:null==tq?void 0:tq.roomId,is_all_265:!((0,B.ld)(null,null==lT?void 0:lT.H264_streamData)||(0,B.ld)(null,null==lT?void 0:lT.H265_streamData)||(0,B.ld)(null,null==lT?void 0:lT.UGC_streamData)||(0,B.ld)(null,null==lT?void 0:lT.H265_UGC_streamData))});(0,a.useEffect)(()=>{var e;l1&&(null===(e=rf.current)||void 0===e?void 0:e.getPlayer())&&(null==lF||lF.setFullscreen(!0))},[l1,rf.current]),(0,a.useEffect)(()=>()=>{null==lF||lF.setFullscreen(!1)},[]);let at=(0,a.useMemo)(()=>!rZ&&!rv,[rv]),an=(0,a.useMemo)(()=>nC.dr.includes(Number(iZ)),[iZ]);(0,a.useEffect)(()=>{if(lB&&lz!==rE){let e=setTimeout(()=>{rw(lz),e5(lz)},1e3);return()=>clearTimeout(e)}},[lz,rE,lB]);let ai=!lB||lK;(0,a.useEffect)(()=>{if(r4(n8.$.JUNE_FULLSCREEN_SWITCH,e2||rE),rE&&!e2){ia(!0);return}null==iq||iq(e2),null==ia||ia((!lB||ai)&&!1),ow()},[lB,ai,rn,rE,e2]);let al=async()=>{if(!lB||!r1||o4){if(ol&&!o4){var e;let t=rh.current[null==r1?void 0:null===(e=r1.split("?"))||void 0===e?void 0:e[0]];if(t){if(t.roomId!==(null==tq?void 0:tq.roomId))return;r6(t.finnalUrl)}}return r6(r1),r1}try{if(r3.current){let e=new URL(r3.current).pathname,t=new URL(r1).pathname;if(e===t){r3.current=r1;return}}r3.current=r1;let e=ol?await (0,B.Zb)(r1):await (0,B.Zb)(r1,0,!0);return r6(e)}catch(e){return r6(r1)}};(0,a.useEffect)(()=>{al()},[lB,r1,o4]);let[ar,ao]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(lB&&o4||ol&&(rU.current!==o4||rG))&&(rU.current=o4,ao(!1),setTimeout(()=>{ao(!0)},10))},[lK,lB,o4,rG,ol]);let aa=(0,a.useMemo)(()=>{let e=!0;if(lB&&(e=lK),e&&o4)return"offscreen-video"},[o4,lB,lK]),au=(0,a.useMemo)(()=>!!ar&&(!!ti&&!(ti===j.kx.ANCHOR_BAN&&iA)||!lB||!!r5),[lB,r5,ar,ti,iA]);(0,a.useEffect)(()=>{if(!l8&&ol){var e;let t=null==rf?void 0:null===(e=rf.current)||void 0===e?void 0:e.getPlayer();(null==t?void 0:t.paused)&&(null==t||t.play())}},[l8]),(0,a.useEffect)(()=>{ru===O.LV.END&&((0,n4.q)(tW.a0),(0,n4.q)(tW.zY))},[ru]);let ad=(0,a.useMemo)(()=>({stream:rA,options:rj}),[rA,rj]),as=r$?rK:void 0,ac=(0,b.j_)([null==rj?void 0:null===(ec=rj.default_quality)||void 0===ec?void 0:ec.sdk_key,(0,eK.Hs)(as)]),av=(0,S.Z)((e,t)=>{var n,i;return null==o0?void 0:null===(i=o0.current)||void 0===i?void 0:null===(n=i.setCurrentQuality)||void 0===n?void 0:n.call(i,e,t)});(0,a.useEffect)(()=>{if(iT&&rv){var e,t,n;if(iT&&ru!==O.LV.END&&!iP&&!i0&&!o4&&!oN&&!l8&&!iM&&rv&&!lS)return;let i=null==rf?void 0:null===(t=rf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);(null==i?void 0:null===(n=i.plugins)||void 0===n?void 0:n.triplevideo)&&(i.plugins.triplevideo.enable=!1)}},[iT,ru,iP,i0,o4,oN,l8,iM,rv]);let a_=(0,a.useMemo)(()=>Y()(tq,"room.linker_map")||{},[tq]),af=(0,a.useMemo)(()=>Object.keys(a_).length>=1,[a_]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:eP()({[eA.default.player]:!0,[eA.default.playerTheaterOn]:e2,[eA.default.isEnd]:iT&&ti&&!(ti===j.kx.ANCHOR_BAN&&iA),[eA.default.isImmersive]:lD,[eA.default.isInVrView]:lV}),style:{marginRight:lA},ref:rV,id:tW.f_+((null==rf?void 0:null===(ef=rf.current)||void 0===ef?void 0:null===(ev=ef.getPlayer())||void 0===ev?void 0:ev.playerId)||""),children:[(0,o.jsx)(eI.TY,{className:eP()(eA.default.basicPlayerPip,{[eA.default.pkEggLibAWrap]:i1}),pipAnchorId:tU.MA.BasicPlayer,placeholder:(0,o.jsx)(nn.o,{}),children:!at&&au?(0,o.jsx)(ni.k2,{componentName:nl.l.BASIC_PLAYER_KEEPER,fallback:()=>{var e,t,n;return null===(n=window)||void 0===n||null===(t=n.location)||void 0===t||null===(e=t.reload)||void 0===e||e.call(t),(0,o.jsx)("div",{children:(0,o.jsx)("p",{children:"请刷新页面"})})},children:(0,o.jsx)(s.wn,{reuseId:tZ,container:rV,disabled:!rZ||lB||ol&&(o4||rG),afterDomAppend:e=>{let{isReuse:t}=e;if(t){var n,i,l,r,o,a;let e=null==rf?void 0:null===(n=rf.current)||void 0===n?void 0:n.getPlayer(),t=null==rf?void 0:null===(i=rf.current)||void 0===i?void 0:i.getPlayerLogger();!(ol&&l8)&&(null===(r=e.plugins)||void 0===r||null===(l=r.rotate)||void 0===l||l.show(),null===(a=e.plugins)||void 0===a||null===(o=a.fullscreen)||void 0===o||o.show()),setTimeout(o7,0),setTimeout(o6,1),setTimeout(oi,2),setTimeout(oI,3),setTimeout(ot,4),setTimeout(eQ,5),t.restart&&t.restart(!0)}},abTestData:rn,children:(0,o.jsx)(nr.Nu,(0,l._)((0,i._)({},tk),{closePauseVideoFocus:!1,roomId:null==tq?void 0:tq.roomId,onReady:o6,beforePlayerInit:o7,onFocus:()=>{n5(!0)},onBlur:()=>{n5(!1)},autoHide:!lB||ai,videoInit:!iX&&ru!==O.LV.END,autoplay:!lB&&iT,isPause:iX||ru===O.LV.END||tl,refreshPlayer:tr,className:eP()(eA.default.livingPlayer,l1?"living_player_child_route":"living_player","xgplayer-pc",l1?"isChildRoute":"",i0?"pk-status":"",rE?eA.default.operatingBarFade:""),volume:(0,U.T1)(),url:r5,bitrate:rQ,ref:rf,onFullScreen:e=>{var t,n,i,l,r;!e&&lK&&(null==tA||null===(i=tA.roomStore)||void 0===i||null===(n=i.setFoldChatroom)||void 0===n||n.call(i,!1)),rw(e),e5(e),null==l3||l3(e),null==r4||r4(n8.$.JUNE_FULLSCREEN_SWITCH,e);let o=null==rf?void 0:null===(t=rf.current)||void 0===t?void 0:t.getPlayer();o&&e&&(0,x.DJ)()&&(null==o||null===(r=o.plugins)||void 0===r||null===(l=r.pip)||void 0===l||l.exitPIP()),e3&&!(e2&&rE)&&e3(!1)},icons:{loadingIcon:(0,eR.renderToString)((0,o.jsx)(eS.gb,{className:"live-player-loading loading-optimize",text:"直播加载中"}))},resolutionsel:lB?null:r7,bgplay:null,mediaType:lB?lK?aa:void 0:aa,onWaiting:oP,onPlaying:oT,onPlay:ok,onPause:oR,onEnd:oA,onError:oM,onLoadStart:oi,onLoadedData:oI,onTtfb:ot,preloadTime:j.VC,onUserAction:oj,isBlackScreenProbe:(0,no.iz)(),isUgcLive:t0,sessionId:null==rM?void 0:rM.session_id,secretKey:rF,isPaidLive:rG,isVipLive:oH,isVip:oG,freePreview:oB,needSr:(0,na.By)(rn),maskToast:rO,loggerOptions:ae,flvPreloader:nu.OG?(0,nu.TV)():null,fullscreenTarget:lH||tw,rotate:!0,volumeBalance:rD,playerWaterMark:oy,volumeWaterMark:oE,disableLogger:!!(ti&&!(ti===j.kx.ANCHOR_BAN&&iA)),children:(0,o.jsx)(_.NoSSR,{children:(0,o.jsx)(e$.dp,{player:null==rf?void 0:null===(em=rf.current)||void 0===em?void 0:em.getPlayer(),streamInfo:ad,maxAbrQuality:ac,qualities:rY,disableChange:rW&&!rC,setQuality:av,children:(0,o.jsx)(m.x.Provider,{value:tA,children:(0,o.jsx)(h.X.Provider,{value:tP,children:(0,o.jsx)(ew.TC.Provider,{value:re,children:(0,o.jsx)(f.zS,{children:rv&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ni.k2,{componentName:nl.l.SHORT_CUT,children:[iT,!ld,!tI,ai,!iP,null==tq?void 0:tq.room,tG].every(Boolean)&&(0,o.jsx)(ic,{islandMode:"event",islandName:tW.n$,islandTimeout:tW.$4,isFullScreen:rE,isTheaterOn:e2})}),(0,o.jsx)(ni.k2,{componentName:nl.l.SHORT_CUT,children:[iT,!ld,!tI,ai,!iP,!lD].every(Boolean)&&(0,o.jsx)(nk.default,{islandMode:"event",islandName:tW.n$,islandTimeout:tW.$4,isFullScreen:rE,isTheaterOn:e2})}),[iT,!ld,!tI,ai,!iP].every(Boolean)&&(0,o.jsx)(ni.k2,{componentName:nl.l.LIVE_RESERVE_CARD,children:(0,o.jsx)(t8,{islandMode:"event",islandTimeout:tW.$4,islandName:tW.WG,isNormalScreen:!(rE&&!e2),uid:Y()(tG,"id_str",""),isPip:l8})}),(0,o.jsx)(ni.k2,{componentName:nl.l.VIP_LIVE_BOUNDARY,children:(0,o.jsx)(iE,{messageInstance:lv,paidLiveData:lm,isInLivingRoom:!0,roomInfo:tq,roomId:rs,abTestData:rn,roomStatus:ru,onShowVipLiveBoundary:e=>{oZ(e),null==tT||tT(e)},onBtnClick:()=>{if(null==tz?void 0:tz.isLogin)(0,n9.Z)("live");else{var e,t;(0,eb.default)({success:()=>{!(0,eB.I)()&&window.location.reload()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.host}`})}}})}),!l8&&iT&&oK&&!iP&&(0,o.jsx)(ni.k2,{componentName:nl.l.Live_Like,children:(0,o.jsx)(nd.default,{islandMode:"event",islandName:tW.kw,islandTimeout:tW.$4,isClickLike:oW,icons:oz,isFullScreen:rE,isTheaterOn:e2,userInfo:tG,userLike:oQ,classNames:eP()(eA.default.liveLike,{[eA.default.inActive]:r9})})}),ti&&!(ti===j.kx.ANCHOR_BAN&&iA)&&(0,o.jsxs)(n$.default,{islandMode:"idle",cover:Y()(tq.anchor,"avatar_thumb.url_list[0]",""),playerEvent:ll,isAnchorBan:il,isKickOut:ti===j.kx.KICK_OUT,roomId:rs,children:[(0===ta.length||ob)&&ti,!(0===ta.length||ob)&&(0,o.jsx)(nZ.default,{islandMode:"idle",rooms:ta,target:"_self",disableLiveRecommendOnEnd:tC})]}),iT&&!iP&&t0&&!t1&&ru!==O.LV.END&&!ti&&(0,o.jsxs)("div",{className:eP()(eA.default.anchor),children:[(0,o.jsx)("img",{className:eA.default.avatar,src:Y()(tq,"room.commentary_room_info.avatar.url_list[0]","")||Y()(tq,"room.commentary_room_info.avatar.urlList[0]",""),ref:oD,onClick:oV}),(0,o.jsx)("div",{className:eA.default.nickname,children:Y()(tq,"room.commentary_room_info.nickname","")})]}),(0,o.jsx)(e0,{messageFrom:tN}),(0,o.jsx)(ns.p,{ext:(0,i._)({ignoreEmptyUrlUpload:ru===O.LV.END||void 0===ru?1:0,roomMode:rd,roomId:rs,webRid:rc,enter_from_merge:null==lo?void 0:null===(eh=lo.getEnterEventParams())||void 0===eh?void 0:eh.enter_from_merge,enter_method:null==lo?void 0:null===(ep=lo.getEnterEventParams())||void 0===ep?void 0:ep.enter_method,_is_new_version:null!==(ez=null===(eg=window)||void 0===eg?void 0:eg.isNewVersionFirstOpen)&&void 0!==ez?ez:"",is_preview:ai?0:1},o2,ae)}),iT&&!iP&&(0,o.jsx)(ni.k2,{componentName:nl.l.ADMIN_PRIVILEGE_PLUGIN,children:(0,o.jsx)(nG.default,{islandMode:"event",islandName:tW.rv,islandTimeout:tW.$4})}),iP?null:(0,o.jsx)(ea.Z,{isVerifyed:th}),!l8&&(0,o.jsx)(nc.u,{}),iT&&(0,o.jsx)(n_,{}),(0,o.jsx)(ni.k2,{componentName:nl.l.ROTATE_PLUGIN,children:iT&&(0,o.jsx)(iv,{layoutType:iV})}),(0,o.jsx)(tv.l,{playerCoverText:ti}),(0,o.jsx)(ni.k2,{componentName:nl.l.DANMAKU_PLUGIN,children:iT&&ai&&!iP&&!lD&&(0,o.jsx)(nP,{islandMode:"event",islandName:tW.QN,islandTimeout:tW.$4,on:!0,feature:tn,livingRoomErrorStatus:t_,roomStatus:ru,containerTagName:"xg-icon",position:"controlsRight",index:11})}),iT&&(0,o.jsx)(eu.Z,{}),!l8&&tn&&ai&&(0,o.jsx)(ni.k2,{componentName:nl.l.DANMAKU_SETTINGS,children:(0,o.jsx)(nf.default,{containerTagName:"xg-icon",position:"controlsRight",index:5,danmakuQueue:nE,danmakuQueueLength:nw,islandMode:"event",islandName:tW.KA,islandTimeout:tW.$4,abTestData:rn})}),iT&&!iP&&iA&&ru!==O.LV.END&&[j.kx.NONE,j.kx.ANCHOR_BAN].includes(ti)&&(0,o.jsx)(ni.k2,{componentName:nl.l.RTC_LAYER_PLUGIN,children:(0,o.jsx)(nJ.default,{islandMode:"event",islandName:tW.GD,islandTimeout:tW.$4,isTheaterOn:e2})}),iT&&!iP&&an&&(0,o.jsx)(ni.k2,{componentName:nl.l.LINK_MIC_DYNAMIC_CONFIG,children:(0,o.jsx)(n0.default,{islandMode:"event",islandName:tW.hx,islandTimeout:tW.$4,isTheaterOn:e2})}),iT&&!iP&&!an&&"audio"===iA&&(0,o.jsx)(ni.k2,{componentName:nl.l.AUDIO_ROOM_PLUGIN,children:(0,o.jsx)(nR.default,{islandMode:"event",islandName:tW.hx,islandTimeout:tW.$4,isTheaterOn:e2,isFullScreen:rE})}),iT&&!iP&&!an&&"video"===iA&&(0,o.jsx)(ni.k2,{componentName:nl.l.VIDEO_ROOM_PLUGIN,children:(0,o.jsx)(nA.default,{islandMode:"event",islandName:tW.jr,islandTimeout:tW.$4,isTheaterOn:e2})}),iT&&!iP&&(an||"audio"===iM||"video"===iM)&&(0,o.jsx)(iy,{isVerifyed:th}),!iT&&!iP&&(an||"audio"===iM||"video"===iM)&&(0,o.jsx)(iw,{anchorId:null==tq?void 0:null===(eT=tq.anchor)||void 0===eT?void 0:eT.id_str,roomId:rs,functionType2:null==tq?void 0:null===(ek=tq.linker_detail)||void 0===ek?void 0:ek.function_type}),!l8&&ij!==eE.cK.LINKED&&ru!==O.LV.END&&(0,o.jsx)(ed.Z,{containerTagName:"xg-icon",position:"controlsLeft",index:1,playerCoverText:ti}),iT&&(0,o.jsx)(tu,{}),iT&&ru!==O.LV.END&&ib(tq)&&!l8&&ix&&!ti&&(0,o.jsx)(t4.default,{islandMode:"event",islandName:tW.JR,islandTimeout:tW.$4,playerRef:rf}),!l8&&!ld&&ai&&(0,o.jsx)(ey,{on:e2,setDoubleScreenInfo:nm,cameraShape:om,onSwitch:e=>{var t,n,i,l;let r=rf.current.getPlayer();r.fullscreen&&r.plugins.fullscreen.changeFullScreen(),null==ll||ll.liveTheaterModeBtnClickEvent(!e),!e&&lK&&(null==tA||null===(n=tA.roomStore)||void 0===n||null===(t=n.setFoldChatroom)||void 0===t||t.call(n,!1)),e3&&e3(e),e&&(0,x.DJ)()&&(null==r||null===(l=r.plugins)||void 0===l||null===(i=l.pip)||void 0===i||i.exitPIP())},containerTagName:"xg-icon",position:"controlsRight",index:.5,useYInFull:rE,disableClick:rG&&0===lw.FullScreen,btnDisableCallBack:rO,hotKey:!0}),ij!==eE.cK.LINKED&&ru!==O.LV.END&&Object.keys(rA||{}).length&&rz&&(!lB||lK)&&(0,o.jsx)(ni.k2,{componentName:nl.l.QUALITY_SWITCH,children:(0,o.jsx)(im,{streamData:rA,defaultQuality:rz,position:"controlsRight",qualityList:rY,sessionId:null==rM?void 0:rM.session_id,screenMode:oS,index:12,url:r5,ref:o0,roomId:rs,player:null===(eM=rf.current)||void 0===eM?void 0:eM.getPlayer(),isAsianGames:t7,showRefreshPage:ou,containerClassName:"QualitySwitchPluginContainer",cachedRedirectedUrlMap:rh.current,children:(0,o.jsx)(eJ,{qualityHandler:o0.current,player:null===(ej=rf.current)||void 0===ej?void 0:ej.getPlayer(),openIntercepted:r$,interceptedQuality:rK,openTryWatching:rW&&!rC,screenMode:oS,watchingFinished:rC,streamOptions:rj,isLogin:null==tG?void 0:tG.id_str,streamInfo:ad})})}),lB&&!lK&&(0,o.jsx)(id,{className:eA.default.autoOpacty,position:"controlsRight",open:lQ,onSwitchChange:lq}),oo&&(0,o.jsx)(ig,{}),iT&&ru!==O.LV.END&&"audio"!==iA&&!ti&&rt()&&!l8&&ai&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ni.k2,{componentName:nl.l.PIP_PLUGIN,children:(0,o.jsx)(nK.default,{islandMode:"event",islandName:tW.fB,islandTimeout:tW.$4,containerTagName:"xg-icon",position:"controlsRight",index:.7,isPip:rL,on:e2,isFullScreen:rE,onTheaterSwitch:e3,feature:tn})}),(0,o.jsx)(ni.k2,{componentName:nl.l.INPICTURE_PLUGIN,children:(0,o.jsx)(nn.D,{isActive:iT,playerRef:rf,handelIsInPic:or})})]}),(0,o.jsx)(np,{player:null===(eD=rf.current)||void 0===eD?void 0:eD.getPlayer()}),(rE||e2||lB)&&nT&&!tg&&!l8&&ru!==O.LV.END&&ai&&!iP&&(0,o.jsx)(ni.k2,{componentName:nl.l.FOLD_CHAT_ROOM_COMMENT_PLUGIN,children:(0,o.jsx)(er.default,{position:"controlsLeft",containerClassName:eA.default.liveCommentPlugin,isLogin:null==tG?void 0:tG.id_str,onSend:e8,index:13,isFixedChat:tg,islandMode:"event",islandName:tW.si,islandTimeout:tW.$4})}),(0,o.jsx)(nS.G5,{disEnabled:iA&&ij===eE.cK.LINKED,handleChangeGameHiddle:e=>{t2(e)},setCameraShape:oh,isFullScreen:rE,doubleScreenInfo:nv,linkmicVideoEqualLayoutFrameOpt:iG,ele:"#double_screen"}),iT&&(0,o.jsx)(ng.g,{}),iT&&!ty&&!oF&&!lD&&(0,o.jsx)(ni.k2,{componentName:nl.l.GIFT_BAR,children:(0,o.jsx)(t6,{islandMode:"event",islandName:tW.SH,islandTimeout:tW.$4,enabled:!0,fullScreen:rE&&io,isTheaterOn:e2&&io,giftStatus:iH,playerCoverText:ti,isSpringSkin:tE,giftPages:rP,balance:iW,isLogin:!!Y()(tG,"id_str"),giftPanelSwitchStatus:iQ,onCameraChange:(e,t)=>{null==tS||tS(e,t),l7(e=>e+1)},onShowChanged:e=>{},abTestData:rn,isFade:!0,isFullScreen:rE})}),iT&&iH&&ai&&(0,o.jsxs)(o.Fragment,{children:[!l8&&(0,o.jsx)(ni.k2,{componentName:nl.l.EFFECT_SWITCH_PLUGIN,children:(0,o.jsx)(nW.default,{islandMode:"event",islandName:tW.LI,islandTimeout:tW.$4,containerTagName:"xg-icon",position:"controlsRight",index:1,onSwitch:iz})}),iT&&!iP&&(0,o.jsxs)(ni.k2,{componentName:nl.l.GIFT_TRAY_PLUGIN,children:[(0,o.jsx)(nY.default,{islandMode:"event",islandName:tW.T_,islandTimeout:tW.$4,effectSwitchStatus:iY&&ai,giftMessages:i$,giftTrayConfig:iJ})," "]}),iT&&!iP&&(0,o.jsx)(ni.k2,{componentName:nl.l.GIFT_EFFECT_PLUGIN,children:(0,o.jsx)(nz.default,{islandMode:"event",islandName:tW.dq,islandTimeout:tW.$4,effectSwitchStatus:iY&&ai,giftMessages:i$})})]}),iT&&!iP&&o1&&(0,o.jsx)(nF.default,{islandMode:"event",islandName:tW.ng,islandTimeout:tW.$4,orderSingInfo:iO}),iT&&!iP&&(0,o.jsx)(ip,{}),iT&&!iP&&oJ&&(0,o.jsx)(nV.default,{islandMode:"event",islandName:tW.UM,islandTimeout:tW.$4}),iT&&!iP&&oX&&(0,o.jsx)(nU.default,{islandMode:"load",islandName:tW.cE,islandTimeout:tW.$4,guestBattleInfo:iD}),iT&&!iP&&i0&&(0,o.jsx)(ni.k2,{componentName:nl.l.PK_VIEW_PLUGIN,children:(0,o.jsx)(nQ.default,{islandMode:"event",islandName:tW.HC,islandTimeout:tW.$4,currencyName:rl,isFullScreen:rE,isTheaterOn:e2,isFocus:n3})}),!l8&&iT&&iF?(0,o.jsx)(ni.k2,{componentName:nl.l.GROUP_LIVE_PLUGIN,children:(0,o.jsx)(nq.default,{islandMode:"event",islandName:tW.HC,islandTimeout:tW.$4,isTheaterOn:e2})}):null,(0,o.jsx)(ni.k2,{componentName:nl.l.TOOL_BAR_PLUGIN,children:ru!==O.LV.END&&ti!==j.kx.KICK_OUT&&iT&&!iP&&!lD&&(0,o.jsx)(nj.default,{islandMode:"event",islandName:tW.BN,islandTimeout:tW.$4,abTestData:rn,toolbarData:r_,headerUserInfo:tz,roomId:rs,authorId:null==tq?void 0:null===(eO=tq.anchor)||void 0===eO?void 0:eO.id_str,isLiveShopVisible:!0,isLiveShopPopVisible:!0,getLiveShoppingLogParams:null==lo?void 0:lo.getEnterEventParams,promotionListVisible:rb,setPromotionListVisible:rN,adData:oq,messageInstance:lv,layoutType:iV,isLiveModal:ld,isFullScreen:rE,isTheaterOn:e2,roomStatus:ru,isPopcardHitPrefetch:o5,newEcomStyle:!1,giftStatus:iH,isSpringSkin:tE,giftPages:rP,balance:iW,isLogin:!!Y()(tG,"id_str"),giftPanelSwitchStatus:iQ,playerCoverText:ti,onCartChange:lb,cartVisible:lS,showAgreement:lL,setShowAgreement:lN})}),iT&&!iP&&!lD&&(0,o.jsx)(tf.Z,{itemKey:tm.k.Vip,onClose:oU,group:tm.k.ACTIndicatorGroup,children:(0,o.jsx)(ni.k2,{componentName:nl.l.VIP_VIEW_PLUGIN,children:(0,o.jsx)(ih,{userInfo:tz,roomInfo:tq,isLogin:!!Y()(tG,"id_str"),currencyName:rl})})}),iT&&!iP&&!lD&&(0,o.jsx)(ni.k2,{componentName:nl.l.EFFECT_PLUGIN,children:(0,o.jsx)(nO.default,{islandMode:"event",islandName:tW.eL,islandTimeout:tW.$4,effectList:iK,messageInstance:lv})}),(0,o.jsx)(tO.default,{islandMode:"event",islandName:tW.Wt,islandTimeout:tW.$4,abtestData:(0,l._)((0,i._)({},null!=rn?rn:{}),{forceLogin:"v0"}),roomId:rs,openTryWatching:rW,qualityHandler:o0.current,defaultQuality:rz,setWatchingFinished:rT,interceptedQuality:rK,player:null===(eV=rf.current)||void 0===eV?void 0:eV.getPlayer(),openIntercepted:r$}),iT&&i9.size>0&&!tI&&o$,oN&&(0,o.jsx)(is,{paidLiveData:lm,isLogin:Y()(tG,"id_str",""),display_id:Y()(tG,"display_id",""),scene:ny.W.IN_LIVING_ROOM,setViewType:lh,viewType:lp,setPaidLiveData:lg,roomId:rs,retType:ly,setRetType:lE,isFirstLive:o3,hybridContainer:lc,message:lv,store:tA,setPaidLiveBurryContrl:r0}),(0,o.jsx)(eN.b,{isActive:iT,currentPlayer:null===(eU=rf.current)||void 0===eU?void 0:eU.getPlayer()}),(ru!==O.LV.END||oF)&&(!tI||oF)&&(0,o.jsx)(tR,{}),iT&&ru!==O.LV.END&&!iP&&(0,o.jsx)(nH.default,{islandMode:"event",islandName:tW.qi,islandTimeout:tW.$4}),iT&&!iP&&ru!==O.LV.END&&(0,o.jsx)(nB.default,{islandMode:"event",islandName:tW.Io,islandTimeout:tW.$4}),lZ?(0,o.jsx)(lZ,{}):null,iT&&ru!==O.LV.END&&!iP&&!i0&&!o4&&!oN&&!l8&&!iM&&(0,o.jsx)(n2.Z,{}),iT&&ru!==O.LV.END&&!iP&&!i0&&!o4&&!oN&&!l8&&!iM&&rv&&!af&&!lS&&!lO&&(0,o.jsx)(i_,{index:11,position:"controlsRight",containerTagName:"xg-icon"}),(0,o.jsx)(ie.default,{store:tA,playerInstance:null===(eF=rf.current)||void 0===eF?void 0:eF.getPlayer(),isFullScreen:rE}),(0,o.jsx)("div",{id:`gift_effect_bg_${null==tq?void 0:tq.roomId}`,style:{position:"absolute",left:0,bottom:"-4px",width:"100%",height:"auto",background:"transparent",pointerEvents:"none",zIndex:-1,opacity:"0.5"}})]})})})})})})})}))})}):(0,o.jsx)("div",{style:{width:"100%",height:"100%",background:"#090909",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(eS.gb,{className:"live-player-loading"})})}),(0,o.jsx)(_.NoSSR,{children:rc&&(0,o.jsxs)(o.Fragment,{children:[iT&&!A.s&&!t7&&ru!==O.LV.END&&o_&&!rG&&ij!==eE.cK.LINKED&&!lB&&(0,o.jsx)(nI,{islandMode:"event",islandName:tW.gC,islandTimeout:tW.$4,roomId:rs,cameraGroupId:null==ls?void 0:ls.groupId,cameraId:null==ls?void 0:ls.cameraId,playerRef:rf,anchorId:null==tq?void 0:null===(eZ=tq.anchor)||void 0===eZ?void 0:eZ.id_str,roomStatus:ru,webRid:null==tq?void 0:tq.web_rid,setRoomStatus:tQ,reasonType:"detail",setPausePop:t3,strategyConfig:Y()(tq,"room.others.web_live_port_optimization.strategy_config",""),strategyExtra:Y()(tq,"room.others.web_live_port_optimization.strategy_extra",""),isFullScreen:rE,disabled:ri,enableClientGuide:!0,abTestData:rn}),iT&&!iP&&iA&&ru!==O.LV.END&&(0,o.jsx)(nX.default,{islandMode:"event",islandName:tW.mp,islandTimeout:tW.$4}),iT&&tx&&(0,o.jsx)(nD.default,{islandMode:"event",islandName:tW.I7,islandTimeout:tW.$4,target:null===(eG=rf.current)||void 0===eG?void 0:eG.getPlayerDom()}),(null==rn?void 0:rn.giftMenu)&&!iP&&ru!==O.LV.END?(0,o.jsx)(iu,{islandMode:"event",islandName:tW.kr,islandTimeout:tW.$4}):null]})})]}),(0,o.jsxs)(_.NoSSR,{children:[(0,o.jsx)(to,{className:eP()(eA.default.rightPanel,{[eA.default.rightPanelTheaterOn]:e2})}),(0,o.jsx)(ni.k2,{componentName:nl.l.LIVING_PIP_WINDOW,children:iT&&ru!==O.LV.END&&"audio"!==iA&&!ti&&rt()?(0,o.jsx)(nM.default,{islandMode:"event",islandName:tW.Hf,islandTimeout:tW.$4,isDoubleScreen:o4,className:lB?eA.default.inPreview:""},ol&&(o4||rG)?"true":"false"):null})]})]})})},293319:function(e,t,n){n.d(t,{X7:function(){return i},xU:function(){return l}});let i={auto:"自动",origin:"原画",fhd:"1440P",uhd:"蓝光",hd:"超清",sd:"高清",ld:"标清"},l={uhd:"4K",hd:"超清1080P",sd:"高清720P",ld:"标清480P"}},106125:function(e,t,n){n.d(t,{Z:function(){return r}}),n("209955");var i=n("88648");let l=(0,i.createContext)({});var r=function(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("feedContext must be used within FeedContextProvider");return e}},272714:function(e,t,n){n.d(t,{V:function(){return a}}),n(209955);var i=n(118025),l=n(705686),r=n(88648);let{Currency:o}=l;function a(){let e=(0,r.useContext)(o);if(void 0===e)throw(0,i.g)("Currency"),Error("Currency must be used within Provider");return e}},861445:function(e,t,n){n.d(t,{K:function(){return s},M:function(){return c}});var i=n(850159),l=n(88648),r=n(733507),o=n(770989),a=n(797973),u=n(287844),d=n(782442);function s(e){return"uhd"===e}function c(){let{triggerDownloadClient:e}=(0,r.o)({channelId:u.g.Lv4k}),{roomStore:{isOlympicGame:t,setIsEnableOlympic4k:n}}=(0,i.Z)(),s=(0,a.Z)(async()=>{try{window.collectEvent("add_to_desktop_click",{type:"4k",channel_id:u.g.Lv4k,enter_from:"live_detail",ug_channel_id:d.Le.getConfig(d.gI.WebUgChannelId)||""}),await o.a.openClient()}catch(t){e()}});return(0,l.useEffect)(()=>{n(t)},[t]),{enableOlympic4k:t,rediectDownload:t,openOrDownloadClient:s}}},21710:function(e,t,n){var i=n(520739),l=n(878389),r=n(368200);n(675373),n(779788),n(250440),n(981168);var o=n(88648),a=n(645260),u=n.n(a),d=n(53038),s=n(516599),c=n(272714),v=n(609968),_=n(611243),f=n(797973),m=n(770989),h=n(702726),p=n(35730),g=n(357923),y=n(367366),E=n(658065),w=n(782442),I=n(746025),S=n(399796),b=n(831202),N=n(782563),L=n(555106),x=n(637005),C=n(230501),T=n(643545),P=n(273406),k=n(32369),R=n(236734),A=n(850159),M=n(538843),j=n(657304),D=n(784492),O=n(7772);let V=()=>{if(!(0,y.r)())return Array.from(document.querySelectorAll(".giftRechargeContaner")).find(e=>e.getBoundingClientRect().x>0)};t.Z=e=>{let{isInit:t=!1,processAfterFirstFrame:n=!1}=e||{},{userStore:{userInfo:a},roomStore:{roomInfo:y},linkmicStore:{choosePeopleArr:U,useChoosePeopleFunc:F,eggModeInfo:Z},giftStore:{giftStatus:G,giftList:H,effectList:B,balance:$,giftPanelShowFrom:K,setGiftComboHint:W,setGiftMessages:Y,setGiftPages:z,setEffectList:Q,setBalance:q,setGiftExtra:J,setGiftLayer:X,setPaygrade:ee},rechargeStore:{rechargeAuthStatus:et},eventStore:{giftEvent:en,slardarEvent:ei},feedStore:{isChangePending:el}}=(0,A.Z)(),{name:er}=(0,c.V)(),{showRecharge:eo,hideRecharge:ea,updateRecharge:eu,hideOtherRecharge:ed}=(0,_.y)({container:V}),{player:es}=(0,v.n)(),ec=u()(a,"id_str",""),ev=!!ec,e_=u()(y,"roomId",""),ef=u()(y,"anchor.sec_uid",""),em=u()(y,"anchor.id_str",""),eh=u()(y,"room.episode_extra"),ep=u()(eh,"episode_id_str",0)||0,eg=u()(eh,"mod.episode_stage"),ey=u()(C.$F,eg,C.dq.NORMAL),eE=u()(y,"room.others.group_live_data.is_group_live",0),{innerFeedOn:ew}=(0,O.P)(),{rechargeConfig:eI}=(0,d.K)(),eS=(0,o.useCallback)(async function(){var e,t,n,r,o,a;let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:d="recharge",balance:c=0,amount:v=0,sendGiftParams:_}=u,f={enter_from_merge:(0,E.yW)(),show_reason:null!==(o=C.St[d])&&void 0!==o?o:"other",live_window_type:null!==(a=null===(e=w.Le.getConfig(w.gI.LiveWindowStatus))||void 0===e?void 0:e.type)&&void 0!==a?a:"no_live_window",if_live_play:1,room_id:e_,anchor_id:em,follow_status:(0,T.qZ)(null==y?void 0:null===(n=y.anchor)||void 0===n?void 0:null===(t=n.follow_info)||void 0===t?void 0:t.follow_status)?1:0},g=H.find(e=>e.id===(null==_?void 0:_.gift_id));null==ed||ed(),eo({requestPublicParams:await (null===(r=m.a.getIAPRechargeParams)||void 0===r?void 0:r.call(m.a)),type:d,balance:c,amount:v,additionalLogParams:f,onClose:e=>{h.logInstance.sendLog("livesdkRechargeShowDuration",(0,l._)((0,i._)({},f),{charge_reason:d,duration:(null==e?void 0:e.duration)||0,if_recharge_success:(null==e?void 0:e.isSuccess)?1:0}))},theme:(0,I.Dr)(S.Q.getItem({sKey:p.CookieKeys.Theme})),onAutoNextChange:e=>{_&&h.logInstance.sendLog("rechargeSendGiftClick",(0,l._)((0,i._)({},f),{status:e?"on":"off"}))},autoNext:!0,autoNextHtml:_?(0,M.w)({giftImg:null==g?void 0:g.icon,giftName:null==g?void 0:g.name,balance:c,coinName:(null==eI?void 0:eI.name)||"抖币",isEnoughMoney:!0}):void 0,onCombosItemClick:e=>{let{type:t,combo:n={}}=e||{};_&&"manual"===t&&eu({autoNextHtml:(0,M.w)({giftImg:null==g?void 0:g.icon,giftName:null==g?void 0:g.name,balance:c,coinName:(null==eI?void 0:eI.name)||"抖币",isEnoughMoney:Number(n.diamond_count)>=c})})},showRechargeResult:!1,onSuccess:e=>{let{autoNext:t,balance:n=0}=e;ea(),eP(),t&&_&&n>=v?ek((0,l._)((0,i._)({},_),{isAutoNext:!0})):s.F.info("充值成功")}}),(0,P.rp)(es)},[es,eo,em,e_,y,eI,H]),eb=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R.JL((0,i._)({from_room_id:e_,to_room_id:e_,from_anchor_id:em,to_user_id:em,gift_ids:null==e?void 0:e.gift_id},e)).then(t=>{let{data:n,logId:i}=t;if(0!==u()(n,"status_code"))return k.kg.error("获取礼物额外信息失败",n,i),Promise.reject(n);{let t=u()(n,"data.gift_extra",[]);return t.length>0&&J(Number(null==e?void 0:e.gift_id),t),Promise.resolve(t)}})},[e_,em,J]),eN=(0,o.useCallback)(e=>R.Hv((0,i._)({},e)).then(e=>{let{data:t,logId:n}=e;if(0!==u()(t,"status_code"))return k.kg.error("获取送礼消费分层失败",t,n),Promise.reject(t);{let e=u()(t,"data.gift_layer",0);return X(e),Promise.resolve(e)}}),[]),eL=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R.JL((0,i._)({from_room_id:e_,to_room_id:e_,from_anchor_id:em,to_user_id:em,gift_ids:null==e?void 0:e.gift_id},e)).then(e=>{let{data:t,logId:n}=e;return 0===u()(t,"status_code")?Promise.resolve(u()(t,"data.gift_extra",[])):(k.kg.error("获取礼物额外信息失败",t,n),Promise.reject(t))})},[e_,em,J]),ex=(0,f.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R.Xq((0,i._)({room_id:e_,to_room_id:e_,sec_anchor_id:ef,sec_to_user_id:ef,gift_scene:ey,to_episode_id:ep,fetch_giftlist_from:3},e)).then(async e=>{var t,n;let{data:i,logId:l}=e,r=u()(i,"status_code"),o=(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.pages)||[];return 0===r?(z((0,P.Zk)({rawGiftPages:o,giftScene:ey})),await (0,g.v2)(),z((0,P.BU)(o)),Promise.resolve(i)):(s.F.info(u()(i,"data.prompts","获取礼物失败，请稍后重试")),k.ZN.error(b.Mo.LiveGiftListError,{content:{statusCode:r,message:(null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.prompts)||"",logId:null!=l?l:"",is_client:(0,N.DT)(),data:i}}),Promise.reject(i))})}),eC=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n&&await (0,g.v2)(),R.ao((0,i._)({is_living:!1,download_assets_from:3,channel:"test"},e)).then(e=>{var t;let{data:n,logId:i}=e,l=u()(n,"status_code");if(0===l){let e=u()(n,"data.assets",[]);return Q((0,P.Js)(e)),Promise.resolve(n)}return s.F.info(u()(n,"data.prompts","获取特效失败，请稍后重试")),k.ZN.error(b.Mo.LiveGiftEffectError,{content:{statusCode:l,message:(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.prompts)||"",logId:null!=i?i:"",is_client:(0,N.DT)(),data:n}}),Promise.reject(n)})},[Q]),eT=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R.ao((0,i._)({is_living:!1,download_assets_from:3},e)).then(e=>{var t;let{data:n,logId:i}=e,l=u()(n,"status_code");if(0===l){let e=u()(n,"data.assets",[]);return Promise.resolve((0,P.Js)(e)[0])}return k.ZN.error(b.Mo.LiveSingleEffectError,{content:{statusCode:l,message:(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.prompts)||"",logId:null!=i?i:"",is_client:(0,N.DT)(),data:n}}),Promise.reject()})},[]),eP=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev?R.sb((0,i._)({},e)).then(e=>{let{data:t,logId:n}=e,l=u()(t,"status_code");return 0===l?(q(u()(t,"data.diamond",0)),Promise.resolve(t)):(k.kg.event(`[${b.Tn.Error}]${b.Mo.LiveBalanceError}`,(0,i._)({statusCode:l,logId:null!=n?n:"",is_client:(0,N.DT)()},t)),s.F.info(u()(t,"data.prompts",`获取${er}余额失败，请稍后重试`)),k.kg.error(`获取${er}余额失败`,t,n),Promise.reject(t))}):0},[ev,er,q]),ek=(0,o.useCallback)(async function(){var e,t,n,l,o,d,c,v,_,f,m;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!ev)return await (0,P.m8)("登录后即可送礼","live_gift"),(0,P.rp)(es),Promise.reject();if(!G)return s.F.info("暂无送礼权限，请稍后重试"),(0,P.rp)(es),Promise.reject();if(ec===em)return s.F.info("不可为自己送礼"),(0,P.rp)(es),Promise.reject();let{isToAnchor:y,giftSource:E,pageType:w,isAutoNext:I,isFromContainer:S=0}=h,A=(0,r._)(h,["isToAnchor","giftSource","pageType","isAutoNext","isFromContainer"]);if(null==ei||null===(e=ei.sendGiftApiEvent)||void 0===e||e.call(ei,{params:h}),F&&!y){let{count:e,price:t}=h;if(t*e*(null!==(d=null==U?void 0:U.length)&&void 0!==d?d:0)>C.sF)return s.F.info("该礼物不支持成组送全麦"),h.count>1&&(null==en||null===(c=en.liveGiftGroupClick)||void 0===c||c.call(en,{peopleCount:null!==(v=null==U?void 0:U.length)&&void 0!==v?v:1,giftId:null==h?void 0:h.gift_id,pageType:w,result:"fail"})),Promise.reject()}let M="request_song_list"===E?[]:F&&!y&&null!==(_=null==U?void 0:U.map(e=>e))&&void 0!==_?_:[em];return e_?R.hF((0,i._)({room_id:e_,to_room_id:e_,to_user_id:F&&!y&&(null==M?void 0:M.length)===1?null==M?void 0:M[0]:em,to_user_ids:F&&!y&&(null==M?void 0:M.length)!==1?JSON.stringify(M):"",room_anchor_id:em,to_episode_id:ep,send_type:4,send_scene:eE?128:F&&!y?2:1,gift_source:0,buff_level:0,tags_extra:JSON.stringify({gift_source:E,enter_from_merge:null!==(f=null===(n=window)||void 0===n?void 0:null===(t=n.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge)&&void 0!==f?f:"",enter_method:null!==(m=null===(o=window)||void 0===o?void 0:null===(l=o.__INVISIBLE_QUERY__)||void 0===l?void 0:l.enter_method)&&void 0!==m?m:""})},A)).then(async e=>{var t,n,l,r,o,d,c,v,_,f,m,y,R;let D;let{data:O,logId:V}=e,F=u()(O,"status_code"),G=h.price*h.count;null==ei||null===(t=ei.sendGiftApiCbEvent)||void 0===t||t.call(ei,{params:h,data:O}),h.count>1&&(null==en||null===(n=en.liveGiftGroupClick)||void 0===n||n.call(en,{peopleCount:null!==(l=null==U?void 0:U.length)&&void 0!==l?l:1,giftId:u()(O,"data.gift_id"),pageType:w,result:0===F?"success":"fail"}));try{let e=u()(O,"data.diy_item_info","[]");e&&(D=JSON.parse(e))}catch(e){}if(0===F){let e=(0,P.mL)(u()(O,"data"),H,B,a,D,u()(A,"count"));(null==O?void 0:null===(r=O.data)||void 0===r?void 0:r.combo_hint)&&(null==O?void 0:null===(o=O.data)||void 0===o?void 0:o.gift_id)&&W({[O.data.gift_id]:{comboHint:null==O?void 0:null===(_=O.data)||void 0===_?void 0:_.combo_hint,curCount:null==O?void 0:null===(f=O.data)||void 0===f?void 0:f.combo_count}}),ee(2);let t=null===(d=null!==(m=null==Z?void 0:null===(v=Z.egg_info)||void 0===v?void 0:null===(c=v.teamfight_egg_info)||void 0===c?void 0:c.team_egg_map)&&void 0!==m?m:{})||void 0===d?void 0:d[`${e_}`];(0,L.qQ)(p.LocalStorageKeys.SendGiftTime,new Date().getTime()),Y(e),eP(),M.forEach(e=>{var n,l,r,o,a,d,s,c;null==en||null===(o=en.liveGiftSendEvent)||void 0===o||o.call(en,(0,i._)({gift_id:u()(O,"data.gift_id"),combo_cnt:u()(O,"data.combo_count"),group_cnt:u()(O,"data.group_count"),gift_source:E,money_per_unit:u()(O,"data.gift_struct.diamond_count"),gift_cnt:h.count,money:h.count*u()(O,"data.gift_struct.diamond_count"),is_fans_club_gift:(0,T.dU)(u()(O,"data.gift_id"))?"1":"0",to_user_id:String(e),full_seats_cnt:M.length,is_from_container:S,gift_show_from:K,if_gold_series:(null==h?void 0:h.buff_level)>0||(null==h?void 0:h.plugin_id)?1:0,customize:(null==h?void 0:h.buff_level)>0||(null==h?void 0:h.plugin_id)?2:0,price:h.originPrice,customize_price:h.price-h.originPrice,pageType:w,tab_name:C.BS[w]||w,if_mini_window:(0,j.OL)(),mission_period:(null==t?void 0:t.status)?[2,3,4,5].includes(null==t?void 0:t.status)?"challenge":(null==t?void 0:t.status)===6?"buff":"":"",mission_id:null!==(a=null==t?void 0:t.egg_id)&&void 0!==a?a:"",mission_type:(null==t?void 0:t.egg_type)?(null==t?void 0:t.egg_type)===1?"moneymission":"cntmission":"",mission_target:null!==(d=null==t?void 0:null===(n=t.task_info)||void 0===n?void 0:n.target_score)&&void 0!==d?d:"",mission_time:null!==(s=null==t?void 0:null===(l=t.task_info)||void 0===l?void 0:l.task_duration)&&void 0!==s?s:"",mission_start_from_pkend:null!==(c=null==t?void 0:null===(r=t.task_info)||void 0===r?void 0:r.task_begin_relative_battle_end_time)&&void 0!==c?c:"",gift_position:null==h?void 0:h.sort,combo_position:null==h?void 0:h.combo_position,is_hotkey:null==h?void 0:h.is_hotkey},w===C.kQ.GIFT&&h.sortType?{order_type:h.sortType}:{}))}),I&&x.emit(x.EVENT.RechargeAutoSuccess,{giftId:u()(O,"data.gift_id")}),en.liveConsumeEvent({statusCode:F,amount:G,is_client:(0,N.DT)(),type:"gift_send"})}else 20003===F?await (0,P.m8)("登录后即可送礼","live_gift"):40001===F?g&&(et?(s.F.info(`${er}余额不足`),eS({type:"balance",balance:G-$,amount:G,sendGiftParams:h})):s.F.info(`${er}余额不足，请充值后再试`)):42201===F?s.F.info("为保障账号和资金安全，请先前往抖音app完成身份验证"):42202===F?s.F.info("为保障账号和资金安全，请先前往抖音app完成身份核对"):(s.F.info(u()(O,"data.prompts","送礼失败，请稍后重试")),k.ZN.fatal(b.Mo.LiveSendGiftError,{content:{statusCode:F,message:(null==O?void 0:null===(y=O.data)||void 0===y?void 0:y.prompts)||"",logId:null!=V?V:"",is_client:(0,N.DT)(),data:O}}));return 0===F?Promise.resolve(O):(k.ZN.error(b.Mo.LiveGiftSendCodeNotZero,{content:{statusCode:F,message:(null==O?void 0:null===(R=O.data)||void 0===R?void 0:R.prompts)||"",logId:null!=V?V:"",is_client:(0,N.DT)(),data:O}}),(0,P.rp)(es),Promise.reject(O))}):Promise.reject()},[ev,G,a,e_,ep,H,B,$,es,eP,Y,eS,U,K,F,em,en,ei,er,et,ec,ee]),eR=t&&G;(0,o.useEffect)(()=>{eR&&e_&&(ex(),eC())},[eR]),(0,D.Z)(()=>{ew&&!el&&eR&&ex()},[ew,el]);let eA=t&&ev;return(0,o.useEffect)(()=>{eA&&eP()},[eA]),{getGifts:ex,getEffects:eC,getSingleEffect:eT,getBalance:eP,sendGift:ek,handleRecharge:eS,giftScene:ey,getGiftExtra:eb,getMultiGiftExtra:eL,getGiftLayer:eN}}},588298:function(e,t,n){n(874386);var i=n(88648);t.Z=e=>{let[t,n]=(0,i.useState)(!1),{isActive:l}=e;return(0,i.useEffect)(()=>{let e=null,t=()=>{e=setTimeout(()=>{n(!0)},2e3)},i=()=>{e&&(clearTimeout(e),n(!1)),t()};if(l)return i(),document.addEventListener("mousemove",i),document.addEventListener("mousedown",i),document.addEventListener("keydown",i),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mousedown",i),document.removeEventListener("keydown",i),e&&clearTimeout(e)}},[l]),{inActive:t}}},936495:function(e,t,n){n.d(t,{$:function(){return a},P:function(){return u}}),n(779788);var i=n(88648),l=n(31940),r=n(399796),o=n(35730),a={JUNE_EFFECT_SWITCH:"june_effect_switch",JUNE_DANMAKU_SWITCH:"june_danmaku_switch",JUNE_FULLSCREEN_SWITCH:"june_fullscreen_switch"};let u=()=>{let{liveJuneStorageOpt:e,liveJuneStorageOptNew:t}=(0,l.j)(),{isJuneOptimize:n,isJuneOptimizeNew:a}=(0,i.useMemo)(()=>({isJuneOptimize:1===e,isJuneOptimizeNew:1===t}),[e,t]),u=(0,i.useCallback)(e=>{if("june_fullscreen_switch"===e&&!a||"june_fullscreen_switch"!==e&&!n)return!0;try{return"true"===(r.Q.getItem({sKey:o.CookieKeys.JuneFullscreenSwitch})||"true")}catch(e){return!0}},[]);return{getSwitchStatus:u,setSwitchStatus:(0,i.useCallback)((e,t)=>{if(("june_fullscreen_switch"!==e||!!a)&&("june_fullscreen_switch"===e||!!n))try{return"june_fullscreen_switch"===e&&r.Q.setItem(o.CookieKeys.JuneFullscreenSwitch,JSON.stringify(t),31536e6),window.localStorage.setItem(e,JSON.stringify(t))}catch(e){return}},[])}}},644924:function(e,t,n){n.d(t,{R:function(){return i}});function i(){return!0}},557627:function(e,t,n){var i=n(381266),l=n(399796),r=n(35730),o=n(88648),a=n(31940);t.Z=e=>{let{liveH265NoStoreErrNumber:t}=(0,a.j)(),n=(0,o.useMemo)(()=>r.CookieKeys.ClientPlayH265ErrorNum,[]),u=(0,o.useCallback)(()=>{try{let e=d();if(-1===e)return;e+=1,l.Q.setItem(n,e),window.localStorage.setItem(n,String(e))}catch(e){return}},[n]),d=(0,o.useCallback)(()=>{if(1===t)return -1;try{let e=l.Q.getItem({sKey:n}),t=window.localStorage.getItem(n),i=e||t;return i?Number(i):0}catch(e){return 0}},[n]);return{ishNewH265:()=>{var e;if(!(0,i.E)())return!1;let t=0;if((t=null===(e=window.navigator)||void 0===e?void 0:e.hardwareConcurrency)<=4)try{return Number(localStorage.getItem("gpu_score"))>6.4}catch(e){return!1}return t>4},addH265ErrorNum:u,getH265ErrorNum:d,resetH265ErrorNum:(0,o.useCallback)(()=>{try{l.Q.setItem(n,-1),window.localStorage.setItem(n,"-1")}catch(e){return}},[n]),islowLdH265:()=>{var e;if(!(0,i.E)())return!1;let t=0;return!!((t=null===(e=window.navigator)||void 0===e?void 0:e.hardwareConcurrency)<=4)||!1}}}},510949:function(e,t,n){var i=n(31940);t.Z=()=>{let{liveHighClientH265:e,liveHighWebH265:t}=(0,i.j)();return{liveHighClientH265:e,liveHighWebH265:t}}},418566:function(e,t,n){var i=n(520739),l=n(878389);n(874386);var r=n(88648),o=n(30321),a=n(797973),u=n(557627);let d=(()=>{try{let e=window.localStorage.getItem("h265ErrorNumNew")||window.localStorage.getItem("h265ErrorNum");return -1===Number(e)}catch(e){return!1}})();t.Z=e=>{let{from:t,player:n,isRoomEnd:s,eventParams:c,isH265:v,isActive:_}=e,f=(0,r.useRef)(!1),m=(0,r.useRef)(0),[h,p]=(0,r.useState)(0),[g,y]=(0,r.useState)(""),[E,w]=(0,r.useState)(0),[I,S]=(0,r.useState)(0),b=(0,r.useRef)(0),N=(0,r.useRef)(0),L=(0,r.useRef)(0),{resetH265ErrorNum:x}=(0,u.Z)({}),C={};C="living"===t||"preview/live"===t?(0,i._)({},null==c?void 0:c.getCommonEventParams(),null==c?void 0:c.getEnterEventParams()):c,!m.current&&(m.current=performance.now());let T=(0,r.useCallback)(()=>{L.current=1},[]),P=(0,a.Z)(()=>{window.collectEvent("player_firstframe",(0,l._)((0,i._)({},C),{start:m.current,loadstart:E,ttfb:I,end:performance.now()})),f.current=!0});(0,r.useEffect)(()=>{_&&(b.current=performance.now())},[_]);let k=(0,r.useMemo)(()=>window.location.href,[]);(0,r.useEffect)(()=>{if(n)return n.once("loadeddata",()=>{"living"===t&&!f.current&&P(),T()}),n.once("canplay",()=>{T()}),n.once("timeupdate",()=>{T()}),n.once("error",e=>{p((null==e?void 0:e.code)||(null==e?void 0:e.errorCode)||((null==e?void 0:e.errorType)==="parse"?31:21)),y(null==e?void 0:e.ex)}),()=>{n.off("loadeddata"),n.off("canplay"),n.off("timeupdate"),n.off("error")}},[n]);let R=(0,r.useCallback)(()=>{var e;let t;return L.current?t=0:s?t=1001:n?!n||(null==n?void 0:null===(e=n.config)||void 0===e?void 0:e.url)?n&&h&&!L.current?t=1004:n&&!L&&(t=1005):t=1003:t=1002,t},[n,s,h]),A=(0,r.useCallback)(e=>{var n,l,r;let o="living"===t?null===(n=window)||void 0===n?void 0:n.playerNewTime:b.current,a={is_stream_received:L.current,is_preview:"sliderCard"===t||"searchPlayer"===t?1:0,error_code:R(),log_type:e,resume_type:"living"===t?"switch_page":"draw",player_error_code:h,player_error_info:g,duration:Math.floor(performance.now()-b.current||(null===(l=window)||void 0===l?void 0:l.playerNewTime)||0),player_elapse:null===(r=window)||void 0===r?void 0:r.playerNewTime,from:t,href:k};if("searchPlayer"!==t||o!==N.current)window.collectEvent("play_leave",(0,i._)({},C,a)),N.current=o},[t,h,g,k]);(0,r.useEffect)(()=>{let e=location.pathname,n=()=>{("living"===t||"living"!==t&&_)&&A(3)};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n),(0,o.Nr)(e)&&n()}},[_,t,A]);let M=(0,r.useCallback)(()=>{T(),!I&&S(performance.now())},[I]),j=(0,r.useCallback)(()=>{!E&&w(performance.now())},[E]);return(0,r.useEffect)(()=>{if(n&&!d&&v){let e=()=>{x(),d=!0};return n.on("canplay",e),()=>{n.off("canplay",e)}}},[n,v]),{playerTeaEvtSubmit:A,setLoadStartTime:j,setTtfbTime:M,setStreamReceived:T}}},318520:function(e,t,n){n.d(t,{Z:function(){return S},B:function(){return I}}),n("874386");var i=n("645260"),l=n.n(i),r=n("88648"),o=n("676336");n("981168"),n("250440"),n("779788");var a=n("32369"),u=n("31940"),d=n("207964"),s=n("735503"),c=n("727233"),v={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let _=["ld","sd","hd","uhd","fhd","origin"],f=e=>{let{streamData:t={},localQuality:n,openIntercepted:i=!1,interceptedQuality:l,defealutQuality:o,initQualities:f=_,openTryWatching:m=!1,isLogin:h=!1,innerFeedSlideSkipLowQuality:p=!1}=e,g=(0,u.j)(),y=r.useMemo(()=>{let e=f.slice();return e.sort((e,t)=>v[e]-v[t]),e},[f]),E=r.useMemo(()=>t?Object.keys(t).slice().filter(e=>y.includes(e)).sort((e,t)=>v[e]-v[t]):[],[t,y]),w=r.useCallback(e=>{let t=y.indexOf(e);if(t<1)return"";let n=y[t-1];return E.includes(n)?n:w(n)},[y,E]),I=r.useMemo(()=>{if(!E.length)return"";let e="";if(m)return E[E.length-1];n&&(n&&E.includes(String(n))?e=String(n):n&&(e=w(n)));let r=p&&(0,d.getInLiveInnerFeedAB)(g),u=e=>E.includes(e)?e:w(e),_=(()=>{let t=e||(0,s.qt)();return r?t:o&&v[o]<=v[t]?u(o):t})();if((0,c.qu)("useInitQuality-step2-new: ",{qualities:E,defealutQuality:o,innerFeedSkip:r,_lowQuality:_,_quality:e,streamData:t},JSON.stringify(t,null," ")),e!==_&&E.includes(_)&&(e=_),e&&i&&l&&v[l]<=v[e]&&(e=w(l)),!e){let t=(0,s.qt)();e=t&&E.includes(t)&&h?t:w(l)}return""===e?(a.kg.error("cannot get any quality"),a.kg.event("stream_data",{streamData:JSON.stringify(Object.keys(t)),initQualities:JSON.stringify(f)}),E[E.length-1]):e},[t,n,i,l,o,E,m,h,w,f]);return[E,I]};var m={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let h=["ld","sd","hd","uhd","fhd","origin"],p=e=>{let{streamData:t={},localQuality:n,defealutQuality:i,initQualities:l=h,abtestData:o}=e,a=r.useMemo(()=>{let e=l.slice();return e.sort((e,t)=>m[e]-m[t]),e},[l]),u=r.useMemo(()=>t?Object.keys(t).slice().filter(e=>a.includes(e)).sort((e,t)=>m[e]-m[t]):[],[t,a]),d=r.useCallback(e=>{let t=a.indexOf(e);if(t<1)return"";let n=a[t-1];return u.includes(n)?n:d(n)},[a,u]);return[r.useMemo(()=>{if(!u.length)return"";let e="";n&&(n&&u.includes(String(n))?e=String(n):n&&(e=d(n)));let l=e=>u.includes(e)?e:d(e),r=(()=>{let t=e||(0,s.qt)();return i&&m[i]<=m[t]?l(i):t})();if((0,c.qu)("useInitQualityInPreview-step2-new: ",{qualities:u,defealutQuality:i,innerFeedSkip:!1,_lowQuality:r,_quality:e,streamData:t},JSON.stringify(t,null," ")),e!==r&&u.includes(r)&&(e=r),!e){let t=(0,s.qt)();e=t&&u.includes(t)?t:d("")}return""===e?u[u.length-1]:e},[t,n,i,u,d,l])]};var g=n("850159"),y=n("399796"),E=n("819542"),w=n("35730");let I=e=>{let{stream:t,abtestData:n,defaultQuality:i}=e,l=w.CookieKeys.WebcastLocalQuality,r="";try{r=y.Q.getItem({sKey:l})||localStorage.getItem(l)}catch(e){}let[o]=p({streamData:t,localQuality:r,defealutQuality:i,abtestData:n});return{startQuality:o}};var S=e=>{let{stream:t,defaultQuality:n}=e,{streamStore:{leadingData:i,localQuality:a,singleControlTime:u,renderTime:d},feedStore:{skipLowQuality:s}}=(0,g.Z)(),c=l()(i,"items.probation_lead.is_leading",!1),v=l()(i,"items.probation_lead.lead_content.trial_duration",0),_=l()(i,"items.label_lead.is_leading",!1),m=l()(i,"clatity_guide",0),h=l()(i,"last_show_time",0),p=l()(i,"total_show_times",0),y=l()(i,"singleControlMaxShowTime",0),w=r.useMemo(()=>!i.is_login&&_&&i.level>0,[i.is_login,i.level,_]),I=r.useMemo(()=>i.level&&i.level>0?i.level&&o.n[i.level]:"",[i.level]),S=r.useMemo(()=>(p>=15&&d-h>y&&(0,E.b0)(),p<15&&d-h>u),[d,u,h,p,y]),b=r.useMemo(()=>S&&w&&!i.is_login&&c&&v&&(3===m||4===m),[m,i.is_login,c,v,w,S]),[N,L]=f({streamData:t,localQuality:a,openIntercepted:w,interceptedQuality:I,defealutQuality:n,openTryWatching:b,isLogin:i.is_login,innerFeedSlideSkipLowQuality:s}),x=(0,r.useMemo)(()=>{try{var e,n;let i=l()(t,`${L}.main.sdk_params`,"{}"),r=null!==(e=JSON.parse(i))&&void 0!==e?e:{};return null!==(n=null==r?void 0:r.vbitrate)&&void 0!==n?n:0}catch(e){return 0}},[t,L]);return{openIntercepted:w,interceptedQuality:I,openTryWatching:b,qualities:N,startQuality:L,bitrate:x}}},345962:function(e,t,n){n.d(t,{Bq:function(){return h},bJ:function(){return p},le:function(){return g}});var i=n(31940),l=n(557627),r=n(77683),o=n(120511),a=n(330746),u=n(381266),d=n(318520),s=n(645260),c=n.n(s),v=n(88648),_=n(850159),f=n(735503);let m=e=>{var t;let{roomData:n,isFeedH265:i,isLowH265:l,abtestData:o}=e,a=c()(n,"stream_url"),u=(null===(t=c()(n,"additional_stream_url",null))||void 0===t?void 0:t.live_core_sdk_data)?c()(n,"additional_stream_url"):a,d=c()(a,"live_core_sdk_data.pull_data",{}),s=c()(u,"live_core_sdk_data.pull_data",{}),v=(null==d?void 0:d.stream_data)?JSON.parse(d.stream_data):null,_=(null==s?void 0:s.stream_data)?JSON.parse(s.stream_data):null,f=(0,r.oU)(c()(v,"data",{}),c()(_,"data",{}),"ld"),m=i?c()(_,"data",null):l?f:c()(v,"data",null);return{stream:m,options:i?c()(s,"options",null):c()(d,"options",null)}},h=e=>{let{room:t,abtestData:n,isFeedH265:i,isLowH265:l}=e,{stream:r,options:o}=m({roomData:t,isFeedH265:i,isLowH265:l,abtestData:n}),a=(0,f.dM)(o),{startQuality:u}=(0,d.B)({stream:r,abtestData:n,defaultQuality:a});return g({stream:r,startQuality:u})},p=(e,t)=>{if(e){let n=c()(e,`${t}.main`,{});return(0,o.uC)(n.flv||"")}return""},g=e=>{let{stream:t,startQuality:n}=e,i=v.useMemo(()=>p(t,n),[t,n]),l=v.useMemo(()=>p(t,"md")||p(t,"ld"),[t,i]);return{url:i,lowUrl:l}};t.ZP=e=>{let{disabledH265:t=!1,doubleScreenAB:n=!1,doubleScreenInfo:o={},isPullDataExsit:d=!1}=e,{roomStore:{forceEnableH265:s,isUgcLive:f},streamStore:{streamData:m,isUseVVC:h,isH265Error:p,setIsH265:g,setLowH265:y},vrStore:{isUseMutiCamera:E}}=(0,_.Z)(),{liveHighClientH265:w,liveHighWebH265:I}=(0,i.j)(),{ishNewH265:S,getH265ErrorNum:b,islowLdH265:N}=(0,l.Z)({}),L=v.useMemo(()=>{if(d&&!(0,a.G6)()&&c()(m,"H265_UGC_streamData",{}).stream&&3>b()&&!p)return g(!0),c()(m,"H265_UGC_streamData",{});if(f||E||n&&!(0,a.G6)()&&d&&c()(m,"UGC_streamData",{}).stream)return c()(m,"UGC_streamData",{});if((0,u.E)()&&!t&&!p&&3>b()&&(s||w||I||h||S())&&c()(m,"H265_streamData",{}).stream)return g(!0),c()(m,"H265_streamData",{});if(g(!1),N()&&!p&&3>b())return y(!0),(0,r.Ry)(c()(m,"H264_streamData",{}),c()(m,"H265_streamData",{}),"ld");return c()(m,"H264_streamData",{})},[m,s,w,t,f,I,n,o,p,d,E]),x=v.useMemo(()=>c()(L,"stream",{}),[L]),C=v.useMemo(()=>c()(L,"common",{}),[L]);return{stream:x,common:C,options:v.useMemo(()=>c()(L,"options",{}),[L])}}},834770:function(e,t,n){var i=n(519055),l=n(859231),r=n(738612),o=n(850159),a=n(88648),u=n(645260),d=n.n(u);t.Z=()=>{let{roomStore:{roomInfo:e}}=(0,o.Z)();return(0,a.useMemo)(()=>{var t,n;return i.s?"":(null===(n=window)||void 0===n?void 0:null===(t=n.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge)==="web_share_link"&&e.enter_mode===l.gE.APP?r.R5.QRCODE:r.FO[d()(e,"room.stream_url.stream_orientation")]||""},[e])}},103235:function(e,t,n){var i=n(520739),l=n(878389);n(874386),n(779788);var r=n(88648),o=n(919382),a=n(44905),u=n(270414);t.Z=e=>{let{user_id:t,uuid:n,player:d,isLiveWaterMark:s,isPlayerSucc:c,liveUserWaterMarkEvent:v,logParams:_,isPlayerWaterMark:f=!0,isSmallWindow:m}=e,h=(0,r.useRef)(),p=(0,r.useRef)(),[g,y]=(0,r.useState)({}),[E,w]=(0,r.useState)({}),I=(0,r.useRef)(),S={height:"100%",backgroundSize:"calc(240px * 0.5) auto",backgroundPosition:"center",backgroundRepeat:"repeat"},b=(0,r.useCallback)(()=>{if(!!h.current&&!!p.current&&!!d&&!!c&&!!s)clearTimeout(I.current),I.current=setTimeout(()=>{var e,t,n,l,r,o,a,u,s,c,v,_;let f=(null==d?void 0:null===(e=d.video)||void 0===e?void 0:e.clientWidth)||(null==d?void 0:null===(t=d._video)||void 0===t?void 0:t.clientWidth)||(null==d?void 0:null===(n=d.root)||void 0===n?void 0:n.clientWidth),p=(null==d?void 0:null===(l=d.video)||void 0===l?void 0:l.clientHeight)||(null==d?void 0:null===(r=d._video)||void 0===r?void 0:r.clientHeight)||(null==d?void 0:null===(o=d.root)||void 0===o?void 0:o.clientHeight),g=(null==d?void 0:null===(a=d.video)||void 0===a?void 0:a.videoWidth)||(null==d?void 0:null===(u=d._video)||void 0===u?void 0:u.videoWidth)||(null==d?void 0:null===(s=d.root)||void 0===s?void 0:s.clientWidth),E=(null==d?void 0:null===(c=d.video)||void 0===c?void 0:c.videoHeight)||(null==d?void 0:null===(v=d._video)||void 0===v?void 0:v.videoHeight)||(null==d?void 0:null===(_=d.root)||void 0===_?void 0:_.clientHeight);if(m)y((0,i._)({width:"100%",backgroundImage:`url(${h.current})`},S));else{if(!f||!p||!g||!E)return;g>=E?y((0,i._)({width:"40%",backgroundImage:`url(${h.current})`},S)):y((0,i._)({width:`${g/E*p/f*100}%`,backgroundImage:`url(${h.current})`},S))}},50)},[d,m,c,s]),N=(0,r.useCallback)(()=>{var e;let r=t||(0,a.sq)(),d=n||(null===(e=(0,a.Es)())||void 0===e?void 0:e.user_unique_id),s=r?`u_${r}`:d?`d_${d}`:"",{os_name:c,os_version:m,browser_name:g,browser_version:y,screen_width:E,screen_height:I}=(0,u.f)(),N={DeviceType:"",OsType:c,OsVersion:m,BrowserType:g,BrowserVersion:y,ScreenModel:`${E}*${I}`};(0,o.Y5)({watermark_key_list:JSON.stringify([{watermark_uniq_idx:"v4u",watermark_key:s,algorithm:"v4u"},{watermark_uniq_idx:"v5p",watermark_key:s,algorithm:"v5p"}]),device_info:JSON.stringify(N),ignoreToast:!0}).then(e=>{let{data:t,status_code:n}=null==e?void 0:e.data;if(0===n){sessionStorage.setItem("waterMarkData",JSON.stringify(t));let{v5p:e,v4u:n}=t||{};h.current=null==e?void 0:e.watermark_url,p.current=null==n?void 0:n.watermark_url,f?b():w((0,l._)((0,i._)({},S),{width:"100%",backgroundImage:`url(${p.current})`,backgroundSize:"calc(320px * 0.5) auto"}))}else null==v||v((0,i._)({error_type:"interface_error"},_))}).catch(e=>{null==v||v((0,i._)({error_type:"interface_error"},_))})},[t,n,d,f,c,v,_,m]);(0,r.useEffect)(()=>{if(!s){y({}),w({});return}if(!f||!!d&&!!c)try{let{v5p:e,v4u:t}=JSON.parse(sessionStorage.getItem("waterMarkData"))||{};if(t&&e){h.current=null==e?void 0:e.watermark_url,p.current=null==t?void 0:t.watermark_url,f?b():w((0,l._)((0,i._)({width:"100%",backgroundImage:`url(${p.current})`},S),{backgroundSize:"calc(320px * 0.5) auto"}));return}N()}catch(e){N()}},[t,d,s,c,f,m]),(0,r.useEffect)(()=>{if(!!f&&!!d&&!!c){if(!s){y({}),w({});return}return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),I.current&&clearTimeout(I.current)}}},[t,d,f,m,c,s]);let L=(0,r.useMemo)(()=>{},[s,t,n]);return(0,r.useEffect)(()=>{let e=()=>{sessionStorage.removeItem("waterMarkData")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[s]),{playerWaterMark:g,chatWaterMark:E,volumeWaterMark:L,updatePlayerStyle:b}}},22019:function(e,t,n){n.d(t,{Q:function(){return u},n:function(){return d}}),n(874386);var i=n(563097),l=n(88648),r=n(946351),o=n(713097),a=n.n(o);let u=(0,l.createContext)({}),d=e=>{let{children:t,skeleton:n}=e,o=l.useRef(null),[d,s]=l.useState(!1),[c,v]=l.useState(!0);return(0,l.useEffect)(()=>{setTimeout(()=>{s(!0)},1e4)},[]),(0,l.useEffect)(()=>{d&&setTimeout(()=>{v(!1)},300)},[d]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u.Provider,{value:{triggerLoadDone:()=>{s(!0)}},children:[c?(0,i.jsx)("div",{className:a()(r.default.skeleton,d?r.default.hide:""),children:n}):null,(0,i.jsx)("div",{ref:o,style:{display:"contents",opacity:d?1:0},children:t})]})})}},316290:function(e,t,n){n.d(t,{W:function(){return f},Z:function(){return h}});var i=n(520739),l=n(563097),r=n(88648),o=n(650081),a=n(827045),u=n(687761),d=n(609968),s=n(734099),c=n(930600),v=n(402971);let _=e=>{let t=e%60,n=Math.floor(e/60);return 0===n?`${t}秒`:0===t?`${n}分钟`:`${n}分钟${t}秒`};var f={IN_LIVING_ROOM:1,1:"IN_LIVING_ROOM",COMMON_SCENE:2,2:"COMMON_SCENE",IN_LIVING_RECOMMEND:3,3:"IN_LIVING_RECOMMEND",LIVING_SEARCH:4,4:"LIVING_SEARCH"};let m={FIRST:"首",STRIGHT:"直"},h=e=>{var t;let{scene:n=1,logParams:f={},isFirstLive:h=!1,onPaidLiveTryWatch:p=()=>{},watchTime:g=180}=e,{player:y}=(0,d.n)(),E=()=>{setTimeout(()=>{null==y||y.pause()},1)};r.useEffect(()=>{null==y||y.pause();let e=y.video.style.display,t=(0,s.K)(y,"xg-controls");return(0,s.K)(y,"xg-enter"),y.video.style.display="none",null==y||y.on("play",E),()=>{try{t(),null==y||y.play(),null==y||y.off("play",E),y.video.style.display=e}catch(e){}}},[y]);let{dispatch:w}=null!==(t=(0,v.useUserInfoContext)())&&void 0!==t?t:{},I=()=>{1===n||3===n?(0,a.p)().then(e=>{var t,n;e({headerText:`登录后免费试看${_(g)}`,success:async()=>{!(0,c.I)()&&window.location.reload()},next:`https://${null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})}):(2===n||4===n)&&(0,a.p)().then(e=>{var t,n;e({headerText:`登录后免费试看${_(g)}`,success:async()=>{null==w||w({type:"updateUserInfo"})},next:`https://${null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})});try{null==p||p()}catch(e){}};return r.useEffect(()=>{1===n?(0,u.zq)(1===n?"paidlive_inlive":"paidlive_window"):(0,u.Wr)((0,i._)({},f))},[n]),(0,l.jsxs)("div",{className:o.default.smegmae_contianer,children:[(0,l.jsxs)("div",{className:o.default.smegmae_contianer_title,children:["本",h?m.FIRST:m.STRIGHT,"播为付费",h?m.FIRST:m.STRIGHT,"播"]}),(0,l.jsxs)("div",{className:o.default.smegmae_contianer_desc,children:["购票后可观看整场",h?m.FIRST:m.STRIGHT,"播"]}),(0,l.jsxs)("div",{className:o.default.smegmae_contianer_button,onClick:()=>I(),children:["免费试看",_(g)]})]})}},734099:function(e,t,n){n.d(t,{K:function(){return p},V:function(){return g}});var i=n(520739);n(874386);var l=n(563097),r=n(88648),o=n(718135),a=n(609968),u=n(945066),d=n(176638),s=n(407217),c=n(316290),v=n(96008),_=n.n(v),f=n(645260),m=n.n(f),h=n(687761);let p=(e,t)=>{let n=e.root.querySelector(t);return n?(n.style.display="none",()=>{n&&(n.style.display="block")}):_()},g=e=>{let{webRid:t="",scene:n=c.W.COMMON_SCENE,logParams:v={},isFirstLive:_=!1,onPaidLiveBuyTicket:f=()=>{},jumpHref:g="",isActive:y=!1,container:E,store:w}=e,{player:I}=(0,a.n)(),S=r.useRef(!1),[b,N]=(0,r.useState)("https://lf-dy-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/h5/vs_paid_live_audience_pc_buy_ticket_h5_douyin/pages/ticket_pc/index.html?ticket_entrance=paidlive_live_tryend_card"),L=()=>{setTimeout(()=>{null==I||I.pause()},1)};r.useEffect(()=>{null==I||I.pause();let e=I.video.style.opacity,t=p(I,"xg-controls");return p(I,"xg-enter"),I.video.style.opacity=0,null==I||I.on("play",L),()=>{try{t(),null==I||I.play(),null==I||I.off("play",L),I.video.style.opacity=e}catch(e){}}},[]),(0,r.useEffect)(()=>{try{(async()=>{let e=await (0,s.ZP)({service_name:"webcast.douyin.live_pc",key:"hybrid_schema"}),t=m()(e,"paid_live_ticket_panel","");t&&N(`${t}?ticket_entrance=paidlive_live_tryend_card`)})()}catch(e){}},[]);let x=()=>{try{null==f||f()}catch(e){}if(n===c.W.IN_LIVING_ROOM){var e,i;null==w||null===(i=w.singletonStore)||void 0===i||null===(e=i.setPaidLiveQRCodeVisible)||void 0===e||e.call(i,!0),(0,h.c9)("tryend")}else(0,h.dh)(v),g?window.open((0,u.G7)({if_paid_live_card:"1",ticket_entrance:"paidlive_window_tryend_card",entrance_form:"paidlive_window_tryend_card"},g),(0,d.f)()?"_self":void 0):window.open(`https://live.douyin.com/${t}?if_paid_live_card=1&ticket_entrance=paidlive_window_tryend_card`,(0,d.f)()?"_self":void 0)};return r.useEffect(()=>{n===c.W.IN_LIVING_ROOM&&(0,h.t4)()},[]),r.useEffect(()=>{(n===c.W.COMMON_SCENE||n===c.W.LIVING_SEARCH)&&S.current!==y&&y&&(0,h.B5)((0,i._)({},v))},[y]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:o.default.smegmae_contianer_mask}),(0,l.jsxs)("div",{className:o.default.smegmae_contianer,children:[(0,l.jsx)("div",{className:o.default.smegmae_contianer_title,children:"免费试看结束"}),(0,l.jsxs)("div",{className:o.default.smegmae_contianer_desc,children:["购票后可观看整场",_?"首":"直","播"]}),(0,l.jsx)("div",{className:o.default.smegmae_contianer_button,onClick:e=>x(),children:"购票继续看"})]})]})}},926856:function(e,t,n){let i;n.d(t,{Nu:function(){return th}});var l=n("520739"),r=n("878389");n("874386"),n("429532"),n("413806"),n("826893"),n("268917"),n("779788");var o=n("563097"),a=n("948375"),u=n("713097"),d=n.n(u),s=n("88648"),c=n("734123"),v=n("637005"),_=n("782442"),f=n("77726"),m=n("38198"),h=n("456943"),p=n("71477"),g=n("419531"),y=n("368200"),E=n("308602"),w=n.n(E),I=n("926418"),S=n("960329"),b=n("780553"),N=n("550295"),L=n("770543"),x=n("496691");n("746071");var C=n("758571"),T=n("166767"),P=n("516599"),k=n("330746"),R=n("248073"),A=n("53220"),M=n("385021");n("699034");var j=n("84715");n("50031"),n("610839"),n("964421"),n("169581");var D=n("850643");n("4030"),n("361191"),n("87955"),n("285897");var O=n("134761");n("906120");class V extends c.Plugin{static get pluginName(){return"LiveMonitorPlugin"}static get defaultConfig(){return{show:!0}}computedInfo(){let e=this.player;try{var t;let n=Math.round(1e3/e.plugins.flvlive._context._instanceMap.TRACKS.videoTrack.meta.refSampleDuration),i=e.plugins.flvlive._context._instanceMap.TRACKS.videoTrack.meta.codec,l=e.video,r=null===(t=e.video)||void 0===t?void 0:t.getVideoPlaybackQuality().totalVideoFrames,o=r-this.lastTotalFrames;return this.lastTotalFrames=r,{fps:n,codec:i,currentTime:l.currentTime,decoder:-1!==i.indexOf("avc1")?"H264":"H265",buffered:l.buffered.end(0)-l.currentTime,renderFps:o,width:l.videoWidth,height:l.videoHeight}}catch(e){}}renderMoniorItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return`<div class="m_item">
      <span>${t}</span>:${e}${null!=n?n:`&npsp;<span>${n}</span>`}
    </div>`}renderMonitorInfo(){let e=this.computedInfo();if(!e)return;let{fps:t,codec:n,currentTime:i,decoder:l,buffered:r,renderFps:o,width:a,height:u}=e;return`
      <div class="live-monitor-content">
       ${this.renderMoniorItem(t,"视频帧率","fps")}
       ${this.renderMoniorItem(l,"视频编码")}
       ${this.renderMoniorItem(i,"当前播放时间")}
       ${this.renderMoniorItem(r,"buffer缓存","s")}
       ${this.renderMoniorItem(o,"渲染帧率","fps")}
       ${this.renderMoniorItem(`${a}/${u}`,"分辨率","单位w/h")}
      </dv>
    `}startRender(){if(!!this.config.show)clearInterval(this.timmer),this.timmer=setInterval(()=>{let e=this.renderMonitorInfo();c.Util.findDom(void 0,".xg-live-monitor").innerHTML=e},1e3)}endRender(){clearInterval(this.timmer)}getDom(){return c.Util.findDom(void 0,".xg-monitor-pannel")}show(){this.getDom().style.display="block",this.startRender()}hidden(){this.getDom().style.display="none",this.endRender()}afterPlayerInit(){}afterCreate(){this.bind(".close-pannel",this.hidden)}destroy(){clearInterval(this.timmer),this.unbind(".close-pannel",this.hidden)}render(){return`
      <div class="xg-monitor-pannel">
        <span class="close-pannel">关闭</span>
        <div class="xg-live-monitor"></div>
      </div>
    `}constructor(e){super(e),(0,O._)(this,"lastTotalFrames",0),(0,O._)(this,"timmer",null)}}n("123007");let U={danmu:".danmu-icon",fullscreen:".xgplayer-fullscreen",cssFullscreen:".full-cssfullscreen"};class F extends c.Plugin{static get pluginName(){return"MaskIconPlugin"}static get defaultConfig(){return{icons:["danmu","fullscreen","cssFullscreen"]}}maskCall(e){var t;e.preventDefault(),e.stopPropagation();let n=e.target;null===this||void 0===this||this.maskToast({interact_name:null==n?void 0:null===(t=n.dataset)||void 0===t?void 0:t.maskKey})}getDom(e){let t=U[e];return document.querySelector(t)}appendMask(e){let t=this.getDom(e);if(!t||this.recorder[e])return;this.recorder[e]=!0;let n=document.createElement("div");n.dataset.maskKey=e,n.addEventListener("click",this.maskCall),n.classList.add("mask-icon-live-cus"),t.classList.add("mask-icon-live-cus-container"),t.append(n)}removeMask(e){let t=this.getDom(e);if(!!t){for(let i of(this.recorder[e]=!1,(null==t?void 0:t.children)||[])){var n;(null==i?void 0:null===(n=i.className)||void 0===n?void 0:n.indexOf("mask-icon-live-cus"))>-1&&t.removeChild(i)}t.classList.remove("mask-icon-live-cus-container")}}initMask(){this.icons.forEach(e=>{this.appendMask(e)})}desMask(){this.icons.forEach(e=>{e&&this.removeMask(e)}),this.recorder={}}addMask(e){if(!!U[e])this.appendMask(e)}removeMaskIcon(e){if(!!U[e]&&!!this.recorder[e])this.removeMask(e)}afterCreate(){}destroy(){this.desMask()}constructor(e){var t;super(e),this.icons=["danmu","fullscreen"],this.recorder={},this.maskToast=null===(t=this.playerConfig)||void 0===t?void 0:t.maskToast,this.maskCall=this.maskCall.bind(this)}}var Z=n("212415");let G=(0,s.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29 10.29a2 2 0 0 1 2-2h10.693a2 2 0 0 1 2 2v5.404a5.55 5.55 0 0 0-2.472-.55v-2.871a.6.6 0 0 0-.6-.6h-.772l.322-.478a.6.6 0 0 0-.996-.67l-.772 1.148h-.317l-.772-1.148a.6.6 0 1 0-.995.67l.321.478h-.774a.6.6 0 0 0-.6.6v3.772a.6.6 0 0 0 .6.6h1.609a5.602 5.602 0 0 0-.625.69h-1.463a.6.6 0 1 0 0 1.2h.763a5.554 5.554 0 0 0-.443 2.181c0 .76.152 1.484.428 2.144h-5.136a2 2 0 0 1-2-2V10.29zm11.021 4.997a5.535 5.535 0 0 0-.552.158h-.626v-.684h1.178v.526zm-9.034-3.955a.6.6 0 0 1 .6-.6h2.377a.6.6 0 0 1 .6.6v2.83a.6.6 0 0 1-.6.6h-1.777v1.157h1.777a.6.6 0 0 1 .6.6v3.3a.6.6 0 0 1-.6.6h-2.377a.6.6 0 0 1 0-1.2h1.777v-2.1h-1.777a.6.6 0 0 1-.6-.6V14.16a.6.6 0 0 1 .6-.6h1.777v-1.629h-1.777a.6.6 0 0 1-.6-.6zm5.48 4.113v-.684h1.176v.684h-1.177zm0-1.884h1.176v-.688h-1.177v.688zm2.376 0h1.178v-.688h-1.178v.688z",fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("circle",{cx:20.566,cy:20.716,r:3.855,fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.613 22.826a2.355 2.355 0 0 1-3.157-3.157l3.157 3.157zm1.061-1.06l-3.158-3.159a2.355 2.355 0 0 1 3.159 3.159zm1.747-1.05a3.855 3.855 0 1 1-7.71 0 3.855 3.855 0 0 1 7.71 0z",fill:"#FE2C55"})]}))),H=(0,s.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29 10.29a2 2 0 0 1 2-2h10.693a2 2 0 0 1 2 2v5.404a5.55 5.55 0 0 0-2.472-.55v-2.871a.6.6 0 0 0-.6-.6h-.772l.322-.478a.6.6 0 0 0-.996-.67l-.772 1.148h-.317l-.772-1.148a.6.6 0 1 0-.995.67l.321.478h-.774a.6.6 0 0 0-.6.6v3.772a.6.6 0 0 0 .6.6h1.609a5.603 5.603 0 0 0-.625.69h-1.463a.6.6 0 1 0 0 1.2h.763a5.554 5.554 0 0 0-.443 2.181c0 .76.152 1.484.428 2.144h-5.136a2 2 0 0 1-2-2V10.29zm11.021 4.997a5.56 5.56 0 0 0-.552.158h-.626v-.684h1.178v.526zm-9.034-3.955a.6.6 0 0 1 .6-.6h2.377a.6.6 0 0 1 .6.6v2.83a.6.6 0 0 1-.6.6h-1.777v1.157h1.777a.6.6 0 0 1 .6.6v3.3a.6.6 0 0 1-.6.6h-2.377a.6.6 0 0 1 0-1.2h1.777v-2.1h-1.777a.6.6 0 0 1-.6-.6V14.16a.6.6 0 0 1 .6-.6h1.777v-1.629h-1.777a.6.6 0 0 1-.6-.6zm5.48 4.113v-.684h1.176v.684h-1.177zm0-1.884h1.176v-.688h-1.177v.688zm2.376 0h1.178v-.688h-1.178v.688z",fill:"#fff"}),(0,o.jsx)("path",{d:"M24.423 20.715a3.857 3.857 0 1 1-7.714 0 3.857 3.857 0 0 1 7.714 0z",fill:"#fff"}),(0,o.jsx)("path",{d:"M18.802 20.5l1.384 1.502 2.214-2.38",stroke:"#FE2C55",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))),B=(0,s.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 10a2 2 0 0 1 2-2h13a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-13a2 2 0 0 1-2-2V10zm3 4.5v-2h1.499V11h2v2.5a1 1 0 0 1-1 1H10.5zM20 11h-2v2.498a1 1 0 0 0 1 1h2.5v-2H20V11zm0 8.5h1.5v-2H19a1 1 0 0 0-1 1V21h2v-1.5zM12 21v-1.498h-1.5v-2H13a1 1 0 0 1 1 1V21h-2z",fill:"#fff"})}))),$=(0,s.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h13a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h-13zm10 11h-1.501v2H20.5a1 1 0 0 0 1-1v-2.5h-2V19zm-7 0v-1.5h-2V20a1 1 0 0 0 1 1h2.499v-2H12.5zm0-6h1.499v-2H11.5a1 1 0 0 0-1 1v2.5h2V13zm7 0h-1.501v-2H20.5a1 1 0 0 1 1 1v2.5h-2V13z",fill:"#fff"})}))),K=(0,s.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("rect",{x:9,y:8,width:5,height:16,rx:1,fill:"#fff"}),(0,o.jsx)("rect",{x:18,y:8,width:5,height:16,rx:1,fill:"#fff"})]}))),W=(0,s.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M23.5 15.134a1 1 0 0 1 0 1.732l-11.25 6.495a1 1 0 0 1-1.5-.866V9.505a1 1 0 0 1 1.5-.866l11.25 6.495z",fill:"#fff"})}))),Y=(0,s.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,o.jsx)("path",{d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]}))),z=(0,s.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,o.jsx)("path",{opacity:".3",d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]}))),Q=(0,s.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4z",fill:"#fff"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.002 17.55l2.499 2.954 1.502-1.316-2.693-3.185 2.694-3.185-1.503-1.316-2.499 2.955-2.5-2.955L17 12.818l2.694 3.185-2.693 3.185 1.502 1.316 2.499-2.955z",fill:"#fff"})]}))),q=(0,s.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.588 7.702l-.512.52C22.936 9.12 25 11.823 25 15h-2c0-2.829-2.253-5.095-5-5.095a1 1 0 0 1-.713-1.702l1.875-1.905 1.426 1.404zM9 12a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2H9zm0 2h10v8H9v-8z",fill:"#fff",fillOpacity:".9"})})));var J=n("149620"),X=n("301061"),ee=n("425418");let et={play:(0,ee.I)(W),pause:(0,ee.I)(K),fullscreen:(0,ee.I)($),exitFullscreen:(0,ee.I)(B),openDanmu:(0,ee.I)(H),closeDanmu:(0,ee.I)(G),loadingIcon:(0,J.renderToString)((0,o.jsx)(X.gb,(0,l._)({},i))),volumeMuted:(0,ee.I)(Q),volumeSmall:(0,ee.I)(z),volumeLarge:(0,ee.I)(Y),rotate:(0,ee.I)(q)},{POSITIONS:en}=c.Plugin;var ei="miniscreen",el="time",er="definition",eo="error",ea="cssfullscreen",eu="fullscreen",ed="i18n",es="loading",ec="mobile",ev="pip",e_="pc",ef="play",em="poster",eh="progress",ep="replay",eg="start",ey="volume",eE="playbackrate",ew="danmu",eI="danmuicon",eS="title",eb="anchor",eN="comment",eL="dyreplay",ex="livestop",eC="report",eT="controls",eP="dynamicBg",ek="enter",eR="cancelMute";en.ROOT,en.ROOT_TOP,en.CONTROLS_LEFT,en.CONTROLS_RIGHT;let eA=(0,l._)({miniscreen:ei,time:el,definition:er,error:eo,cssfullscreen:ea,fullscreen:eu,i18n:ed,loading:es,mobile:ec,pip:ev,pc:e_,play:ef,poster:em,progress:eh,replay:ep,start:eg,volume:ey,playbackrate:eE,danmu:ew,danmuicon:eI,title:eS,anchor:eb,comment:eN,dyreplay:eL,livestop:ex,report:eC,controls:eT,dynamicbg:eP,enter:ek,cancelMute:eR},{keyboard:"keyboard",abr:"abr"});var eM=n("106245"),ej=n("92969"),eD=n("627445"),eO=n("505567"),eV=n("393033"),eU=n("812905"),eF=n("542680"),eZ=n("972317"),eG=n("232410");let eH=[eA.i18n,eA.progress,eA.replay,eA.time,eA.playbackrate,eA.definition,eA.start,eA.error],eB=[eM.Z,ej.Z,eD.Z,eO.Z,eV.Z,eU.Z,eF.Z,eG.Z],e$=[eZ.Z];var eK=n("973113");let eW=(0,J.renderToString)((0,o.jsx)(X.gb,{className:eK.default.livePlayerLoading}));var eY=n("202145");n("927234"),n("250440"),n("882732"),n("544943");var ez=n("49762"),eQ=n("839291");let eq=e=>e?{mammon:{compressorOptions:{attack:.003,knee:10,ratio:8,release:.25,threshold:-18},meta:{loudness:-12,peak:1,targetLufs:-12},logger:!0,debugger:!0},videoAttributes:{crossOrigin:"anonymous"}}:{};n("284961"),n("242079"),n("851912"),n("954372"),n("668156"),n("179133");let eJ=e=>{var t;return(null===(t=window.pre302Map)||void 0===t?void 0:t[e])||e},eX=()=>{var e;return void 0!==(null===(e=window)||void 0===e?void 0:e.InstallTrigger)||/firefox/i.test(navigator.userAgent)},e0=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);function e1(e){return e.toString().padStart(2,"0")}let e2=()=>{let e=new Date;return`${Math.random().toString().slice(-3)}-${e.getFullYear()}${e1(e.getMonth()+1)}${e1(e.getDate())}${e1(e.getHours())}${e1(e.getMinutes())}${e1(e.getSeconds())}${e.getMilliseconds()}${Math.random().toString().slice(-7)}${Math.random().toString(16).toUpperCase().slice(-10)}`},e3={width:"100%",height:"100%",videoInit:!0,autoplay:!0,closePlayerBlur:!1,leavePlayerTime:0,volume:.3,start:{isShowPause:!1,disableAnimate:!0},rotate:!1,keyboard:h.Ht,ignores:eH};var e5={ALIVE:9999,9999:"ALIVE"},e6=n("73528"),e7=n("123027"),e8=n("88012");c.I18N.use(M.Z);let e4=(e,t)=>{let{icons:n={}}=e;Object.assign(t,{icons:(0,l._)({},et,n),enter:{innerHtml:eW}})},e9=(e,t)=>{var n;let{player:i,logger:l}=t,{isFullscreen:r,fullscreenTarget:o,monitor:a,mini:u,miniscreen:d,isBlackScreenProbe:s=!1,adaptiveConfig:c,beforePlayerInit:v,resolutionsel:f,bgplay:m,isPaidLive:h,volumeBalance:p,isWebSr:g,volumeWaterMark:y,showValueLabel:E}=e;e4(e,i.config),null==v||v(),E&&(i.config.volume={default:i.config.volume,showValueLabel:!0}),r&&i.getFullscreen(o);let w=[...eB,...a?[V]:[],...u||d?e$:[],...s?[N.Z]:[],...(null==c?void 0:c.thresholdDown)?[I.Z]:[],...f?[L.Z]:[],...m?[b.Z]:[],...h?[F]:[],...p?[eY.Z]:[],x.Z];for(let e of(!(0,k.G6)()&&!(0,k.vU)()&&w.push(j.Z),g&&w.push(e6.o),!(0,T.tq)()&&w.push(D.Z),w))i.registerPlugin(e);return l.updateExt({abvids:null!==(n=_.Le.getConfig(_.gI.AbtestVids))&&void 0!==n?n:""}),{player:i,logger:l}};var te=n("31940");let tt=(0,s.createContext)({main:{},search:{},web:{}}),tn=()=>(0,s.useContext)(tt);n("275377");let ti=e=>({});n("338172");var tl=n("96008"),tr=n.n(tl);let to=(e,t,n)=>{let{onReady:i=tr(),onComplete:l=tr(),onLoadedData:r=tr(),onLoadStart:o=tr(),beforePlayerInit:a=tr()}=n;if(!e)return;let{__inline_player__:u}=window;if(u.beforePlayerInit&&a(u.beforePlayerInit),u.ready&&i(u.ready),u.complete&&l(u.complete),u.loadeddata){var d;r(u.loadeddata),null===(d=n.onPlay)||void 0===d||d.call(n)}u.loadstart&&o(u.loadstart)},ta=(e,t)=>{let n=e.root;if(n!==t.current){for(let[e,i]of Object.entries(t.current))e.startsWith("__react")&&(n[e]=t.current[e],i.stateNode&&(i.stateNode=n,i.alternate&&(i.alternate.stateNode=n)));t.current.replaceWith(n),t.current=n,window.__inline_player__.useDom()}},tu=e=>{let{__inline_player__:t}=window;if(!!t.error)setTimeout(()=>{e.emit(c.Events.ERROR,t.errorRet)},100)};var td=n("663744");n("595814");var ts=n("317914"),tc=n("149378"),tv=n("7772"),t_=n("359598"),tf=n("609968");let tm=e=>{let{disableLogger:t}=e,n=(0,tf.n)(),i=(0,s.useCallback)(e=>{var t;null==n||null===(t=n.logger)||void 0===t||t.updateExt(e)},[null==n?void 0:n.logger]);return(0,e7.re)({disableLogger:t,updateExt:i}),null},th=s.memo(s.forwardRef((e,t)=>{var n,i,u;let{url:E,className:M,style:O,isPure:U,isPause:G,isFullscreen:H,fullscreenTarget:B,disableFullScreen:$,disableKeyboard:K,loadTimeout:W=5e3,retryCount:Y=3,beforePlayerInit:z,onPlay:Q,onPause:q,onPlaying:J,onReady:X,onComplete:ee,onLoadStart:et,onLoadedData:en,onTtfb:ei,onError:el,onFullScreen:er,onVolumeChange:eo,onEnd:ea,onWaiting:eu,onUserAction:ed,onBlur:es,onFocus:ec,onClick:ev,plugins:e_=[],volume:ef=.3,videoInit:em=!0,autoplayMuted:eh=!1,autoplay:ep=!0,icons:eg={},resolutionsel:ey,bgplay:eE,children:ew,closeFocusVideoFocus:eI=!1,closePlayVideoFocus:eS=!1,closePauseVideoFocus:eb=!1,closeVideoDblclick:eN=!1,closeVideoClick:eL=!1,poster:ex="",preloadTime:eC=4,mediaType:eT,mini:eP,miniscreen:ek,refreshPlayer:eR,dynamicBgConf:eM,monitor:ej,isBlackScreenProbe:eD=!1,marginControls:eO=!1,enableContextmenu:eV=!1,sessionId:eU,loggerOptions:eF,flvPreloader:eZ=null,adaptiveConfig:eG,abrPts:eW,markuse:e1,isPaidLive:e6,secretKey:tt,bitrate:tl,maskToast:tf,rotate:th=!1,autoHide:tp=!0,isVideoSupportMP4:tg=!0,isVipLive:ty=!1,isVip:tE=!1,freePreview:tw=!1,needSr:tI=!1,volumeBalance:tS=!1,playerAction:tb,isGovern:tN=!0,onReplay:tL=()=>{},stream:tx,disconnectTime:tC=0,playerWaterMark:tT,volumeWaterMark:tP,showValueLabel:tk=!0,disableLogger:tR=!1}=e,tA=s.useRef(null),tM=s.useRef(),tj=s.useRef(),[tD,tO]=s.useState(!1),{abrPts:tV=h.CL,adaptiveConfig:tU=null}=(0,m.Z)(),tF=null!==(u=(0,te.j)())&&void 0!==u?u:{},tZ=Object.assign({},eG||tU,ti(tF)),{onLoadStart:tG}=(0,tc.V)(tM.current),tH=null===(i=tn().main)||void 0===i?void 0:null===(n=i.live_sr_config)||void 0===n?void 0:n.minCpuCnt,tB=(0,eQ.QS)({tccSrMinCpuCnt:tH,abTestData:tF,needSr:tI}),t$=(0,g.GT)(E,{abr_pts:eW||tV}),tK=s.useRef(t$);tK.current=t$,s.useEffect(()=>{var e,t,n,i;if(!!tD&&!!tM.current)K?null===(t=tM.current.plugins)||void 0===t||null===(e=t.keyboard)||void 0===e||e.disable():null===(i=tM.current.plugins)||void 0===i||null===(n=i.keyboard)||void 0===n||n.enable()},[K,tD]),s.useEffect(()=>{if(tD){var e,t,n;null===(n=tM.current)||void 0===n||null===(t=n.plugins)||void 0===t||null===(e=t.rotate)||void 0===e||e.hide()}},[tD]),s.useEffect(()=>{if(tj.current){let e=v.listen(v.EVENT.updateAbVids,()=>{tj.current.updateExt({abvids:_.Le.getConfig(_.gI.AbtestVids)})});return()=>e()}},[tD]),s.useEffect(()=>{if(tM.current&&tM.current.config){let e=tM.current;e&&(e.volume=ef)}},[ef]),s.useEffect(()=>{if(tM.current&&tM.current.config){let e=tM.current;null==e||e.setConfig({maskToast:tf})}},[tf]),s.useEffect(()=>{if(tM.current&&tM.current.config){let e=tM.current;null==e||e.setConfig({closeVideoClick:eL,closePauseVideoFocus:eb})}},[eL,eb]),s.useEffect(()=>{if(tM.current&&tM.current.config){let e=tM.current;if("boolean"!=typeof e.config.controls)e.plugins.controls.config.autoHide=tp,tp?e.plugins.controls.recoverAutoHide():e.plugins.controls.pauseAutoHide()}},[tp]);let{isInPreview:tW}=(0,td.DQ)(),{innerFeedOn:tY}=(0,tv.P)(),tz=s.useRef("");s.useEffect(()=>{if(tM.current&&tM.current.config&&tK.current&&E){var e,t,n,i;let l=tM.current;if((0,g.sw)(tK.current)&&(0,g.VU)()){if(l.paused){if((tW||tY)&&(null===(n=tz.current)||void 0===n?void 0:n.split("?")[0])===(null===(i=tK.current)||void 0===i?void 0:i.split("?")[0]))return;if(!(0,t_.C)(tK.current,l.config.url)&&(null==l||l.setConfig({url:tK.current,videoInit:em,autoplay:ep,autoplayMuted:eh})),tz.current=tK.current,tY){l.retry();return}G&&!l.paused?l.pause():!G&&l.paused&&l.play()}else{window.performance.mark("change streamData end");if((tW||tY)&&(null===(e=tz.current)||void 0===e?void 0:e.split("?")[0])===(null===(t=tK.current)||void 0===t?void 0:t.split("?")[0]))return;if(tz.current=tK.current,(0,t_.C)(tK.current,tM.current.src))return;tM.current.src=tK.current}}}},[E,tK.current,tW]),s.useEffect(()=>{tM.current&&tM.current.config&&(tM.current.mediaType=eT)},[eT]);let tQ=s.useRef(0);s.useEffect(()=>{if(!tW){if(tD&&void 0!==G&&tM.current){let e=tM.current;if(G&&!e.paused)e.pause();else if(!G&&e.paused){if(0===tQ.current&&e.config.autoplay){tQ.current+=1;return}(0,g.sw)(e.config.url)&&(0,g.VU)()&&!tW&&e.play()}}}},[G,tD,tW]),s.useEffect(()=>{let e=tM.current;tD&&(null==e?void 0:e.paused)&&eR&&(null==e||e.retry())},[eR]);let tq=(0,a.Z)(Q||tr()),tJ=(0,a.Z)(ec||tr()),tX=(0,a.Z)(es||tr()),t0=(0,a.Z)(J||tr()),t1=(0,a.Z)(eu||tr()),t2=(0,a.Z)(X||tr()),t3=(0,a.Z)(ee||tr()),t5=(0,a.Z)(el||tr()),t6=(0,a.Z)(er||tr()),t7=(0,a.Z)(eo||tr()),t8=(0,a.Z)(q||tr()),t4=(0,a.Z)(ea||tr()),t9=(0,a.Z)(et||tr()),ne=(0,a.Z)(en||tr()),nt=(0,a.Z)(tL||tr()),nn=(0,a.Z)(ed||tr()),ni=(0,a.Z)(ei||tr());s.useEffect(()=>{let e=tM.current;e&&tD&&e_.forEach(t=>{t&&e.registerPlugin(t)})},[e_,tD]),s.useImperativeHandle(t,()=>({getPlayer:()=>tM.current,getPlayerDom:()=>tA.current,getPlayerLogger:()=>tj.current}));let nl=s.useMemo(()=>({isPure:U,disableFullScreen:$,url:tK.current,bitrate:tl,volume:ef<0?.6:ef,poster:ex,icons:eg,resolutionsel:ey,bgplay:eE,videoInit:(0,g.sw)(tK.current)&&em,autoplay:(0,g.sw)(tK.current)&&ep&&!(ty&&!tE&&!tw),autoplayMuted:(0,g.sw)(tK.current)&&eh,isFullscreen:H,loadTimeout:W,retryCount:Y,preloadTime:eC,flvPreloader:eZ,monitor:ej,mini:eP,miniscreen:ek,closeFocusVideoFocus:eI,closePauseVideoFocus:eb,closePlayVideoFocus:eS,closeVideoDblclick:eN,closeVideoClick:eL,enableContextmenu:eV,isBlackScreenProbe:eD,adaptiveConfig:tZ,marginControls:eO,mediaType:eT,dynamicBgConf:eM,beforePlayerInit:z,markuse:e1,loggerOptions:eF,isPaidLive:e6,secretKey:tt,maskToast:tf,sessionId:eU,rotate:th,autoHide:tp,isVideoSupportMP4:tg,isVipLive:ty,isVip:tE,freePreview:tw,needSr:tI,volumeBalance:tS,isGovern:tN,stream:tx,fullscreenTarget:B,volumeWaterMark:tP,showValueLabel:tk}),[]);s.useEffect(()=>{let{error_report_stop:t}=null!=eF?eF:{},n=[];if(tA.current){var i;if(ey&&!(null==tb?void 0:tb.inlinePlayer)){let e=tA.current.getBoundingClientRect();ey.playWidth=e.width,ey.playHeight=e.height}let{ret:t,used:o}=null!==(i=window.__inline_player__)&&void 0!==i?i:{},a=!!((null==tb?void 0:tb.inlinePlayer)&&t&&!o),{player:u,logger:d}=a?e9(nl,t):function(e){var t,n,i,o,a,u;let d=function(e){let{isPure:t=!1,disableFullScreen:n=!1,el:i,url:o,volume:a=.3,poster:u="",icons:d={},videoInit:s=!0,autoplay:c=!0,autoplayMuted:v=!1,fullscreenTarget:_,loadTimeout:f=5e3,retryCount:m=3,preloadTime:p=4,flvPreloader:g=null,mini:y,miniscreen:E,closeFocusVideoFocus:w=!1,closePauseVideoFocus:I=!1,closePlayVideoFocus:S=!1,closeVideoDblclick:b=!1,closeVideoClick:N=!1,enableContextmenu:L=!1,enableTripleScreen:x=!1,adaptiveConfig:C,marginControls:T=!1,mediaType:P,dynamicBgConf:k,resolutionsel:R,bgplay:A,isPaidLive:M,secretKey:j,maskToast:D,sessionId:O,rotate:V=!1,autoHide:U=!0,isVipLive:F,isVip:Z,freePreview:G,isWebSr:H,volumeBalance:B,stream:$,disconnectTime:K,isSsr:W,volumeWaterMark:Y,showValueLabel:z}=e,Q=[...eH,eA.play,eA.volume,eA.fullscreen,eA.keyboard],q=t?Q:eH;n&&!q.includes(eA.fullscreen)&&q.push(eA.fullscreen);let J=eq(B),X=a;z&&!W&&(X={default:a,showValueLabel:!0});let ee=(0,r._)((0,l._)((0,r._)((0,l._)({},e3),{el:i,url:o,poster:u,videoInit:s,autoplay:c,autoplayMuted:v,ignores:q,i18n:[{LANG:"zh",TEXT:{FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",OPEN:"开启弹幕",OFF:"关闭弹幕",ROTATE_TIPS:"屏幕旋转"}}],volume:X,fullscreen:{target:_},isLive:!0,preProcessUrl:e=>{if(!e)return{url:e};e=eJ(e);try{let t=new URL(e);return t.searchParams.set("_session_id",function(e){let t=e||e2();return`${t}.${Date.now()}.${Math.random().toString().slice(-5)}`}(O)),t.searchParams.set("rsi",String(Number(!!O))),{url:t.href}}catch(t){return{url:e}}},flvlive:(0,l._)({seamlesslyReload:!0,loadTimeout:f,retryCount:m,seiOnDemand:!0,preloadTime:p,preloader:g,stream:$,disconnectTime:K},j&&(M||F&&(Z||G))?{FlvDemuxer:ez.Z,keyStr:j}:{}),controls:{initShow:!0,autoHide:U},mini:y,miniscreen:E,closeFocusVideoFocus:w,closePauseVideoFocus:I,closePlayVideoFocus:S,closeVideoDblclick:b,closeVideoClick:N,enableContextmenu:L,pip:!0,resolutionsel:R,bgplay:A,adaptive:C,marginControls:T,mediaType:P||void 0,rotate:!!V&&{index:11,disable:!1}}),J),{triplevideo:{enable:!1}});return!e0()&&!eX()&&(ee.dynamicBg=k||h.Yr),M&&D&&(ee.maskToast=D),H&&(ee=(0,eQ.D4)(ee)),ee}(e),{url:s,isFullscreen:v,fullscreenTarget:f,monitor:m,mini:p,miniscreen:g,isBlackScreenProbe:E=!1,adaptiveConfig:M,mediaType:O,beforePlayerInit:U,resolutionsel:G,bgplay:H,loggerOptions:B={},isPaidLive:$,secretKey:K,bitrate:W,isVideoSupportMP4:Y=!0,volumeBalance:z,isGovern:Q,volumeWaterMark:q}=e;e4(e,d),d.plugins=[...eB,...m?[V]:[],...p||g?e$:[],...E?[N.Z]:[],...(null==M?void 0:M.thresholdDown)?[I.Z]:[],...G?[L.Z]:[],...H?[b.Z]:[],...$?[F]:[],...z?[eY.Z]:[],x.Z,e8.Z],!(0,k.G6)()&&!(0,k.vU)()&&(d.plugins=[...d.plugins,j.Z]),e.isWebSr&&(d=(0,eQ.tH)(d));let{keepalivetime:J=0}=(0,R.D)(s),X=e5.ALIVE;K&&$&&0!==Number(J)&&(X=Number(J)-Math.floor(Date.now()/1e3)),null==U||U();let ee=new c.SimplePlayer(d);window.playerNewTime=performance.now();let{device_id:et,user_id:en,error_report_stop:ei}=B,el=(0,y._)(B,["device_id","user_id","error_report_stop"]),er=new(w())({aid:C.xo.aid,project_key:C.xo.project_key,app_name:C.xo.app_name,user_unique_id:et,device_id:et,user_id:en,ext:(0,r._)((0,l._)({},el),{isSupportedH265:(0,Z.iz)()?1:0,isSupportedH266:(0,Z.ue)()?1:0,isSupportedAvx2:(0,Z.ws)()?1:0,cache_nosupport265:(0,Z.$I)(),arch:null!==(i=null===(n=window)||void 0===n?void 0:null===(t=n.TTE_ENV)||void 0===t?void 0:t.arch)&&void 0!==i?i:"",scm_version:null!==(o=window.version)&&void 0!==o?o:"unknown",tce_cluster:null!==(a=window.tce_cluster)&&void 0!==a?a:"unknown",mediaType:O||"video",aes_flv_stream:K&&$?1:0,aes_flv_keepAliveTime:K&&$?X:0,abvids:null!==(u=_.Le.getConfig(_.gI.AbtestVids))&&void 0!==u?u:"",bitrate:W}),error_report_stop:!0,player:ee,playResultThreshold:Q?3e4:21e3,onReport:S.X,isDisableReport:e7.vw});return v&&ee.getFullscreen(f),!(0,T.tq)()&&(ee.registerPlugin(D.Z),ee.registerPlugin(A.ZP),Y&&!A.ZP.isSupported()&&P.F.info("抱歉，当前浏览器无法正常观看直播，建议下载客户端或更换浏览器看播")),{player:ee,logger:er}}((0,r._)((0,l._)({},nl),{el:tA.current,videoInit:(0,g.VU)()&&nl.videoInit,autoplay:(0,g.VU)()&&nl.autoplay,autoplayMuted:(0,g.VU)()&&nl.autoplayMuted,disconnectTime:tC}));a&&(window.__inline_player__.used=!0,ta(t.player,tA),tu(t.player)),(0,f.B1)({tag:ts.AL.new_preview_live}),tj.current=d,tM.current=u,u.__getPlayerLogger=()=>d,tO(!0),to(a,u,(0,r._)((0,l._)({},e),{onLoadStart:t=>{var n;tG(t),null===(n=e.onLoadStart)||void 0===n||n.call(e,t)}})),u.on(c.Events.PLAY,tq),u.on(c.Events.PLAYER_FOCUS,tJ),u.on(c.Events.PLAYER_BLUR,tX),u.on(c.Events.PLAYING,t0),u.on(c.Events.WAITING,t1),u.on(c.Events.READY,t2),u.on(c.Events.COMPLETE,t3),u.on(c.Events.ERROR,t5),u.on(c.Events.FULLSCREEN_CHANGE,t6),u.on(c.Events.VOLUME_CHANGE,t7),u.on(c.Events.PAUSE,t8),u.on(c.Events.ENDED,t4),u.on(c.Events.LOAD_START,t9),u.on(c.Events.LOADED_DATA,ne),u.on(c.Events.REPLAY,nt),u.on(c.Events.USER_ACTION,nn),u.on("ttfb",ni),(0,eQ.ie)(tB)&&n.push((0,eQ.GO)(u)),(0,eQ.Sv)(tB)&&n.push((0,eQ.m1)(u,d))}return()=>{try{var e,i;n.forEach(e=>e());let l=tM.current;null===(e=tM.current)||void 0===e||e.destroy(),tM.current=null,null===(i=tj.current)||void 0===i||i.destroy(!!t),tj.current=null,l.__getPlayerLogger=null}catch(e){}}},[]),s.useEffect(()=>{let e=tM.current;e&&(e.config.fullscreenTarget=B)},[B]);let{inlinePlayerScript:nr,loadDeferredScript:no}=s.useMemo(()=>{let e=null,t=null;if(!tb)return{inlinePlayerScript:e,loadDeferredScript:t};let{inlinePlayer:n,isDoubleScreen:i,anchorInfo:l,roomInfo:r}=tb;return n&&nl.url?e=(0,o.jsx)("script",{nonce:"",suppressHydrationWarning:!0,"data-config":"","data-ab":"","data-is-double-screen":JSON.stringify(i),"data-anchor-info":JSON.stringify(l),"data-room-info":JSON.stringify(r),dangerouslySetInnerHTML:{__html:""}}):t=(0,o.jsx)("script",{nonce:"",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:""}}),{inlinePlayerScript:e,loadDeferredScript:t}},[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{ref:tA,onClick:ev,className:d()("basicPlayer",eK.default.player,M,"xgplayer"),style:O,"data-e2e":"basicPlayer",children:[tD&&(0,o.jsxs)(p.E.Provider,{value:{player:tM.current,logger:tj.current},children:[(0,o.jsx)(tm,{disableLogger:tR}),ew]}),tT&&(null==tT?void 0:tT.backgroundImage)&&(0,o.jsx)("div",{className:d()("playerWaterMark"),style:tT})]}),nr,no,(null==tb?void 0:tb.pre302)&&(0,o.jsx)("script",{nonce:"",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:""}})]})}))},839291:function(e,t,n){n.d(t,{By:function(){return _},D4:function(){return h},GO:function(){return g},GY:function(){return f},QS:function(){return s},Sv:function(){return c},ie:function(){return v},m1:function(){return m},tH:function(){return p}});var i=n(520739),l=n(878389);n(413806),n(826893),n(874386),n(250440);var r=n(112501),o=n(73528),a=n(375944),u=n(676336);let d=!!("undefined"!=typeof window&&window.TTCommon),s=e=>{let{tccSrMinCpuCnt:t=8,needSr:n=!1}=e;if(!n)return 0;let i=Number("undefined"!=typeof navigator&&Number(navigator.hardwareConcurrency));return d&&i>=5?1:(0,r.Gb)()&&i>=t?2:0},c=e=>1===e,v=e=>2===e,_=e=>d?!!(0,a.dz)()||((0,a.Q5)()?!!e.liveSrOptimizeMac:void 0):!!e.liveSrOptimize,f=e=>{if(!d&&a.dz)return!!e.liveSuper};function m(e,t){let{TTCommon:n}=window;n.execute("applyConfig",'{"gpu_sr_max_input_size_w":2560,"gpu_sr_max_input_size_h":2560}'),n.execute("applyConfig",'{"gpu_use_single_video_decoder_texture":1, "sr_win_skia_enable": 1}');let i=()=>{if(e.video instanceof HTMLElement)n.executeWithElement(e.video,"updateSrState","255"),t.updateExt({is_sr_called:1})};e.once("canplay",i);let l=()=>{n.execute("applyConfig",'{"gpu_sr_max_input_size_w":4320,"gpu_sr_max_input_size_h":4320}'),n.execute("applyConfig",'{"gpu_use_single_video_decoder_texture":0, "sr_win_skia_enable": 0}'),t.updateExt({is_sr_called:0})};return window.addEventListener("beforeunload",l),()=>{e.off("canplay",i),window.removeEventListener("beforeunload",l),l()}}function h(e){let t="1.0.9".split(".").join("_");return(0,l._)((0,i._)({},e),{videoConfig:(0,l._)((0,i._)({},e.videoConfig),{crossOrigin:"anonymous"}),srplugin:{wasmUrl:`https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/super_resolution_${t}.wasm`,isSingle:!0,useDelayedSR:!0,maxWidth:2e3,maxHeight:2e3}})}function p(e){return(0,l._)((0,i._)({},e),{plugins:[...e.plugins,o.o]})}function g(e){let t=()=>{var t;null===(t=e.plugins.srplugin)||void 0===t||t.active()};e.once("loadeddata",t);let n=t=>{let{srplugin:n}=e.plugins,{isLive:i,quality:l}=(null==t?void 0:t.detail)||{};if(!!i&&n instanceof o.o&&!!u.n.includes(l)&&!!n.core.video)["md","ld","sd","hd"].includes(l)?n.setRunning(!0):n.setRunning(!1)};return document.addEventListener("webcast_qualityEvent",n),()=>{e.off("loadeddata",t),document.removeEventListener("webcast_qualityEvent",n)}}},456943:function(e,t,n){n.d(t,{CL:function(){return r},Ht:function(){return i},Yr:function(){return l}});let i={checkVisible:!1,isGlobalTrigger:!0,keyCodeMap:{space:{code:32,action:"playPause",disable:!1},left:{code:37,disable:!0},right:{code:39,disable:!0},up:{keyCode:187,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:189,action:"downVolume",disable:!1,noBodyTarget:!0},up1:{keyCode:107,action:"upVolume",disable:!1,noBodyTarget:!0},down1:{keyCode:109,action:"downVolume",disable:!1,noBodyTarget:!0}}},l={addMask:!0,maskBg:"rgba(0, 0, 0, 0.5)",disable:!1,frameRate:1/60,mode:"framerate",startInterval:4e3},r="-1800"},676336:function(e,t,n){n.d(t,{n:function(){return i}});let i=["ao","ld","sd","hd","uhd","fhd","origin"]},821779:function(e,t,n){n.d(t,{r:function(){return f}});var i=n(520739),l=n(368200);n(981168);var r=n(563097),o=n(713097),a=n.n(o),u=n(88648),d=n(309931),s=n(734123),c=n(609968),v=n(991148);let _={controlsLeft:".xg-left-grid",controlsRight:".xg-right-grid",controlCenter:".xg-center-grid",controlBottom:".xgplayer-controls",rootTop:".xg-top-bar",rootLeft:".xg-left-bar",rootRight:".xg-right-bar"},f=e=>t=>{let{index:n,position:o,containerClassName:f,containerTagName:m="div"}=t,h=(0,l._)(t,["index","position","containerClassName","containerTagName"]),{player:p}=(0,c.n)(),g=u.useMemo(()=>{if(o)return s.Util.findDom(p.root,_[o])},[o]);return u.useEffect(()=>{g&&Array.from(g.children).sort((e,t)=>Number(e.dataset.index||Number.MAX_SAFE_INTEGER)-Number(t.dataset.index||Number.MAX_SAFE_INTEGER)).forEach(e=>g.appendChild(e))},[g]),g?d.createPortal(u.createElement(m,{"data-index":n,className:a()(v.default.pluginContainer,f,"pluginContainer")},(0,r.jsx)(e,(0,i._)({},h))),g):u.createElement(m,{"data-index":n,className:a()(v.default.pluginContainer,f,"pluginContainer")},(0,r.jsx)(e,(0,i._)({},h)))}},922850:function(e,t,n){n.d(t,{OG:function(){return o},TV:function(){return r}});var i=n(339424);let l=null,r=e=>{var t,n,r,o;return l?l:l=new i.Z({loadTimeout:null!==(t=null==e?void 0:e.loadTimeout)&&void 0!==t?t:4e3,maxReaderInterval:null!==(n=null==e?void 0:e.maxReaderInterval)&&void 0!==n?n:4e3,retryCount:null!==(r=null==e?void 0:e.retryCount)&&void 0!==r?r:0,retryDelay:null!==(o=null==e?void 0:e.retryDelay)&&void 0!==o?o:1e3})},o=!1},419531:function(e,t,n){n.d(t,{GT:function(){return d},VU:function(){return u},sw:function(){return a}}),n(882732),n(544943),n(874386);var i=n(166767),l=n(945066),r=n(212415);let o=e=>{let t="";try{let n=new URL(e);t=null==n?void 0:n.host}catch(e){return"err"}return t},a=e=>void 0!==e&&""!==e&&null!==e&&""!==o(e),u=()=>(0,i.tq)()||!(0,i.tq)()&&(0,r.mJ)(),d=(e,t)=>{let n=!(0,i.tq)()&&e?{abr_pts:null==t?void 0:t.abr_pts,switch_front:null==t?void 0:t.switch_front}:{};return(0,l.G7)(n,e)}},139062:function(e,t,n){n.d(t,{m:function(){return p},Z:function(){return y}});var i=n("563097"),l=n("88648"),r=n("520739"),o=n("878389"),a=n("368200"),u=n("713097"),d=n.n(u),s=n("911208"),c=e=>{var{className:t,children:n}=e,l=(0,a._)(e,["className","children"]);return(0,i.jsx)("div",(0,o._)((0,r._)({},l),{className:d()(s.default.buttonGroup,t),children:n}))};let v=(0,l.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,r._)({width:6,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 1 1-.708-.708L4.293 5 .646 1.354a.5.5 0 0 1 0-.708z",fill:"#fff"})}))),_=e=>{var{className:t,children:n,showMore:u,dontUseChildren:c=!1,icon:_,text:f,imgProps:m}=e,h=(0,a._)(e,["className","children","showMore","dontUseChildren","icon","text","imgProps"]);return(0,i.jsxs)("button",(0,o._)((0,r._)({type:"button",role:"button"},h),{className:d()(s.default.button,t,s.default.force),children:[(0,l.isValidElement)(n)&&!c?n:null,!(0,l.isValidElement)(n)||c?(0,i.jsxs)(i.Fragment,{children:["string"==typeof _?(0,i.jsx)("img",(0,o._)((0,r._)({},m),{className:d()(s.default.button_icon,"operate-icon"),src:_,alt:"string"==typeof f?f:""})):_,(0,i.jsxs)("div",{className:d()(s.default.button_text,"operate-text"),style:{color:"rgba(255, 255, 255, 0.75)"},children:["string"==typeof f?(0,i.jsx)("span",{children:f}):f,u?(0,i.jsx)(v,{}):null]})]}):null]}))};_.Group=c;var f=n("670819"),m=n("663744"),h=n("644924");let p=e=>{let{className:t,children:n}=e,{isInPreview:l,isInPreviewEnter:r}=(0,m.DQ)(),o=(0,h.R)();return(0,i.jsx)("div",{className:d()(f.default["operating-bar-container"],t,{[f.default.isInPreview]:l,[f.default.isInPreviewEnter]:r,[f.default.newSkeleton]:o}),children:n})},g=(0,l.memo)(p);g.Button=_,g.ButtonGroup=c;var y=g},752024:function(e,t,n){n.d(t,{G5:function(){return S}});var i=n(520739),l=n(878389),r=n(368200);n(250440),n(110006),n(826893);var o=n(563097),a=n(88648),u=n(948375),d=n(544845),s=n(757980),c=n(189269),v=n(737074),_=n(734123),f=n(609968),m=n(695843),h=n(232241),p=n(531459);function g(e){[].forEach.call(e.children,e=>{"CANVAS"===e.tagName&&e.remove()})}let y={ts:-1,gameHidden:0},E={Rate:.35,Rectangle:639},w=(e,t,n,i,l)=>{if(100===t.code)try{var r,o,a,u,d;let v=new TextDecoder().decode(t.content),_=(0,m.KR)(v);if(null==_?void 0:_.app_data){let t=JSON.parse(_.app_data);if(p.gb.includes(t.ver)&&"1"===l){if(n)return;let i=(0,h.us)(t.ver,(t.grids||[]).length);e.position(i)}else switch(t.ver){case s.t.VIDEO_TALK_ROOM:case s.t.VIDEO_EQUAL:case s.t.VIDEO_DYNAMIC:case s.t.VIDEO_C:if(n)return;e.position({y:.203,h:.5});break;case s.t.VIDEO_T1B8:if(n)return;e.position({y:.11,h:.7375});break;case s.t.AUDIO_TALK_ROOM:case s.t.VIDEO_DYNAMIC_FLOAT:if(n)return;e.position({y:0,h:1});break;case s.t.VIDEO_CAMERA_NEW:case s.t.C_VIDEO_CAMERA:case s.t.VIDEO_1V8:if(n)return;e.position({y:1-.7375,h:.7375});break;case s.t.VIDEO_DYNAMIC_1V3:case s.t.VIDEO_DYNAMIC_1V6:if(n)return;e.position({y:.203,h:.5});break;case s.t.VIDEO_2V4v4:if(n)return;e.position({y:.203,h:.625});break;case s.t.PK:case s.t.MULTI_ANCHOR:let i,d;if(t.is_game){e.position({y:0,h:1});return}let c=t.ver===s.t.MULTI_ANCHOR&&t.grids.length>=4,v=!!(null===(r=t.anchor_interact_info)||void 0===r?void 0:r.layout_type);if((null==_?void 0:_.live_crop)&&t.ver===s.t.PK)i=_.live_crop.crop_y/_.live_crop.stride_h,d=_.live_crop.crop_h/_.live_crop.stride_h;else if(v){let e=null===(o=t.anchor_interact_info)||void 0===o?void 0:o.focus_id,n=t.grids.find(t=>t.uid_str===e);i=null==n?void 0:n.y,d=null==n?void 0:n.h}else i=null===(a=t.grids[0])||void 0===a?void 0:a.y,d=null===(u=t.grids[0])||void 0===u?void 0:u.h;let f=9===t.grids.length?3:2;e.position({y:i,h:c&&!v?d*f:d});break;case s.t.VIDEO_6V6:if(n)return;e.position({y:.183,h:.52});break;default:if(null==_?void 0:_.live_crop){let t=_.live_crop.crop_y/_.live_crop.stride_h,n=_.live_crop.crop_h/_.live_crop.stride_h;e.position({y:t,h:n})}}}else(null==_?void 0:_.game_live_data)||(0,c.V)(_)?null==i||i(_):(null==_?void 0:null===(d=_.source)||void 0===d?void 0:d.includes("TTLiveSDK"))&&e.position({y:0,h:1})}catch(e){}},I=e=>{let{disEnabled:t=!1,playerRef:n,isFullScreen:i,doubleScreenInfo:l,gameLiveDataHandler:r,linkmicVideoEqualLayoutFrameOpt:o}=e,s=(0,a.useRef)(!1),c=(0,a.useRef)(null),f=(0,u.Z)(e=>{w(n.current,e.detail||e,t,r,o)}),m=(0,a.useCallback)(e=>{if(s.current){s.current=!1;return}n.current.position({y:0,h:1})},[]),h=(0,a.useCallback)(()=>{!s.current&&(s.current=!0),c.current=v.Z.setTimeoutWarp(()=>{s.current&&(s.current=!1),v.Z.clearTimeoutWarp(c.current),c.current=null},3e3)},[]);return(0,a.useEffect)(()=>(n.current.on(_.Events.URL_CHANGE,m),document.addEventListener("webcast_qualityEvent",h),()=>{var e;null===(e=n.current)||void 0===e||e.off(_.Events.URL_CHANGE,m),document.removeEventListener("webcast_qualityEvent",h)}),[]),(0,a.useEffect)(()=>(n.current.on(_.Events.SEI_PARSED,f),()=>{if(!!n.current)n.current.off(_.Events.SEI_PARSED,f)}),[i,l]),(0,d.Z)(()=>{if(!n.current)return;let e=n.current;e.video&&e.position({y:0,h:1})}),null},S=(0,a.memo)(e=>{var{ele:t,setCameraShape:n,handleChangeGameHiddle:d}=e,s=(0,r._)(e,["ele","setCameraShape","handleChangeGameHiddle"]);let{player:v}=(0,f.n)(),_=(0,a.useRef)(v);_.current=v;let m=(0,a.useRef)(!1),h=(0,a.useRef)(s);h.current=s;let p=(0,a.useCallback)(e=>{var t,n;null===(n=_.current.video)||void 0===n||null===(t=n.updateMeta)||void 0===t||t.call(n,{mainPointers:[0,0,1,1],miniPointers:[0,0,0,0],displayMode:0}),m.current=!1},[]);(0,a.useEffect)(()=>(document.addEventListener("hide_double_screen",p),()=>{document.removeEventListener("hide_double_screen",p)}),[]);let w=(0,u.Z)(e=>{var i,l,r,o;(null==e?void 0:e.multi_view_data)&&(0,c.F)(e);let{camera_clip_custom:a,game_hidden:u,game_clip:s,camera_hidden:_}=null==e?void 0:e.game_live_data,{doubleScreenInfo:f}=h.current||{};if((null==e?void 0:e.ts)<y.ts)return;y.ts=null==e?void 0:e.ts;let p=(o=t,document.querySelector(o));!m.current&&(null===(l=v.video)||void 0===l||l.updateMeta({mainPointers:[s.x,s.y,s.w,s.h],miniPointers:[a.x,a.y,a.w,a.h],displayMode:0}),m.current=!0);let w=1===u?1:0;if(p&&(null==v?void 0:null===(i=v.video)||void 0===i?void 0:i.pipScreen)){if(w!==y.gameHidden)g(p);else if(0===w){if(0===_){let e=a.w>E.Rate?`${f.width/E.Rectangle*360}`:`${f.width}`;p.parentElement&&p.parentElement.style.setProperty("margin-bottom","10px"),p&&p.style.setProperty("height",`${e}px`,"important"),n({roomType:"double",screenStyle:a.w>E.Rate}),p.appendChild(null==v?void 0:null===(r=v.video)||void 0===r?void 0:r.pipScreen)}else p.parentElement&&p.parentElement.style.setProperty("margin-bottom","0px"),g(p),p&&p.style.setProperty("height","0px","important")}}w!==y.gameHidden&&(d&&d(w),y.gameHidden=w)});return(0,o.jsx)(I,(0,l._)((0,i._)({},s),{gameLiveDataHandler:w,playerRef:_}))})},140665:function(e,t,n){n.d(t,{u:function(){return R}});var i=n("563097"),l=n("88648"),r=n("520739"),o=n("878389");n("874386");var a=n("671428"),u=n("688710"),d=n("32369"),s=n("735636"),c=n("734123"),v=n("948375"),_=n("850159"),f=n("609968");let m=(0,l.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,r._)({width:36,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.808 10.928a.833.833 0 0 0-1.354-.651l-5.605 3.984h-3.041a.833.833 0 0 0-.833.833v6.667c0 .46.373.833.833.833h3.04l5.606 3.984a.833.833 0 0 0 1.354-.65v-15zM22.7 23.035a1.384 1.384 0 0 1 0-1.958l2.284-2.284-2.284-2.285a1.385 1.385 0 1 1 1.958-1.958l2.284 2.285 2.285-2.285a1.385 1.385 0 1 1 1.958 1.958L28.9 18.793l2.285 2.284a1.385 1.385 0 0 1-1.958 1.958l-2.285-2.284-2.284 2.284c-.541.541-1.418.541-1.958 0z",fill:"#fff"})})));var h=n("725215"),p=n("799046");let g=e=>{let{playerRef:t,getControlsEl:n}=e,{eventStore:{playerEvent:o,slardarEvent:f}}=(0,_.Z)(),[h,g]=(0,l.useState)(!1),[y,E]=(0,l.useState)(!1),w=l.useRef(!0),I=(0,v.Z)(()=>{var e,n;null!==(n=(e=window).__INVISIBLE_QUERY__)&&void 0!==n||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,null==o||o.volumeBrowserLimitedMute();let i=t.current;w.current&&(setTimeout(()=>{i.muted=!0,i.play(),(0,a.w)(!1)}),w.current=!1),setTimeout(()=>{if(null==i?void 0:i.muted){if(g(!0),null==o||o.volumeBrowserLimitedToastShow(),location.hostname===(0,u.iE)().DOMAIN){var e;null==o||null===(e=o.liveCancelMutePromptShowEvent)||void 0===e||e.call(o)}setTimeout(()=>{g(!1)},1e4)}},5e3)});(0,l.useEffect)(()=>{if(!!t.current)return t.current.on(c.Events.AUTOPLAY_PREVENTED,I),()=>{var e;null===(e=t.current)||void 0===e||e.off(c.Events.AUTOPLAY_PREVENTED,I)}},[t.current]),(0,l.useEffect)(()=>{let e=n();e&&(e.style.display=h?"none":"block"),y&&(t.current.muted=h,t.current.volume=h?0:(0,a.T1)())},[h,y]);let S=(0,l.useCallback)(()=>{if(g(!1),E(!0),location.hostname===(0,u.iE)().DOMAIN){var e;null==o||null===(e=o.liveCancelMutePromptClickEvent)||void 0===e||e.call(o)}null==o||o.volumeBrowserLimitedClickOpen(),d.kg.event("click_bottom_cancel_mute",(0,r._)({},null==f?void 0:f.getCommonInfo()))},[]);return(0,i.jsx)(s.Z,{in:h,timeout:500,classNames:"transition-node",children:(0,i.jsxs)("button",{className:p.default.cancel_mute_btn,type:"button",onClick:S,children:[(0,i.jsx)(m,{className:p.default.icon}),(0,i.jsx)("span",{children:"点击取消静音"})]})})};var y=(0,h.Pi)(e=>{let{player:t}=(0,f.n)(),n=(0,l.useRef)(t);n.current=t;let a=(0,v.Z)(()=>c.Util.findDom(t.root,".xgplayer-controls"));return(0,i.jsx)(g,(0,o._)((0,r._)({},e),{playerRef:n,getControlsEl:a}))}),E=n("554933"),w=n("713097"),I=n.n(w),S=n("924123"),b=n("789609");let N=(0,l.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,r._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M24.601 24.6a1.362 1.362 0 0 1-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 1 1-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 0 1 1.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 0 1 1.927 1.926L20.427 18.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#fff",fillOpacity:".8"})})));var L=n("473677"),x=n("394561");let C=e=>{let{className:t,onClose:n,onOpen:r,preventModalVisible:o,onModalVisibleChange:a}=e,[u,d]=(0,l.useState)(!1),s=()=>{d(!1),null==a||a(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:I()(b.default.autoplayPreventTip,t),children:[(0,i.jsx)("span",{className:b.default.text,children:"因"}),(0,i.jsx)("span",{className:b.default.limitText,onClick:()=>{d(!0),null==a||a(!0)},children:"浏览器限制静音"}),(0,i.jsx)("span",{className:b.default.text,children:",按"}),(0,i.jsx)("span",{className:b.default.key,children:"P"}),(0,i.jsx)("span",{className:b.default.text,children:"或"}),(0,i.jsx)("span",{className:b.default.openText,onClick:r,children:"点击打开声音"}),(0,i.jsx)(L.Z,{className:b.default.closeIcon,height:36,width:36,src:N,onClick:n})]}),(void 0===o?u:o)&&(0,i.jsx)(S.h,{children:(0,i.jsx)(x.T6,{className:b.default.maskContainer,children:(0,i.jsxs)("div",{className:b.default.maskMain,children:[(0,i.jsxs)("div",{className:b.default.maskHeader,children:[(0,i.jsx)("div",{className:b.default.maskTitle,children:"浏览器限制"}),(0,i.jsx)(L.Z,{className:b.default.maskClose,width:36,height:36,src:N,onClick:s})]}),(0,i.jsxs)("div",{className:b.default.maskContent,children:[(0,i.jsx)("div",{className:b.default.maskText,children:"当你访问抖音次数较少，或经常静音播放时，浏览器可能会限制网站音量，使网站无法有声播放"}),(0,i.jsx)("div",{className:b.default.maskConfirm,onClick:s,children:"我知道了"})]})]})})})]})};var T=n("343140");let P=e=>{let{playerRef:t}=e,{eventStore:{playerEvent:n}}=(0,_.Z)(),[r,o]=(0,l.useState)(!1),[u,d]=(0,l.useState)(!1),s=(0,l.useRef)(!1);(0,l.useEffect)(()=>()=>{s.current=!0},[]);let f=l.useRef(!0),m=(0,v.Z)(()=>{var e,i;null!==(i=(e=window).__INVISIBLE_QUERY__)&&void 0!==i||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1;let l=t.current;null==n||n.volumeBrowserLimitedMute(),f.current&&(setTimeout(()=>{l.muted=!0,l.play(),setTimeout(()=>{(0,a.w)(!1),l.once(c.Events.VOLUME_CHANGE,()=>{!s.current&&d(!1)})})},0),f.current=!1,d(!0),null==n||n.volumeBrowserLimitedToastShow())});(0,l.useEffect)(()=>{if(!!t.current)return t.current.on(c.Events.AUTOPLAY_PREVENTED,m),()=>{var e;null===(e=t.current)||void 0===e||e.off(c.Events.AUTOPLAY_PREVENTED,m)}},[t.current]),(0,l.useEffect)(()=>{if(!t.current)return;let e=e=>{var n,i;if(!t.current)return;let l=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==l&&"TEXTAREA"!==l&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyP"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&(t.current.muted=!t.current.muted)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t.current]);let h=(0,v.Z)(()=>{if(null==n||n.volumeBrowserLimitedClickOpen(),t.current){let e=t.current;e.muted?e.muted=!1:e.volume=.5,e.emit("volumechange")}d(!1)}),p=(0,l.useCallback)(()=>{null==n||n.volumeBrowserLimitedClickClose(),d(!1)},[]);return(0,i.jsx)(E.l,{showHint:u,priority:2,duration:30,delay:0,onClose:()=>{d(!1)},children:(0,i.jsx)(C,{className:T.default.cancelMute,onClose:p,onModalVisibleChange:o,onOpen:h,preventModalVisible:r})})};var k=e=>{let{player:t}=(0,f.n)(),n=(0,l.useRef)(t);return(0,i.jsx)(P,(0,o._)((0,r._)({},e),{playerRef:n}))};let R=e=>{let{disableStrengthen:t=!1}=e;return t?(0,i.jsx)(y,{}):(0,i.jsx)(k,{})}},873062:function(e,t,n){var i=n(134761);n(429532),n(874386);var l=n(563097),r=n(609968),o=n(88648),a=n(734123),u=n(725215),d=n(31940),s=n(850159),c=n(487658),v=n(859231);class _{updateMeta(e){this._meta=e,this._updateMainVideoSize()}get _mainVideo(){return this._player.video}_takeOverRotate(){var e,t;if(null===(t=this._player)||void 0===t?void 0:null===(e=t.plugins)||void 0===e?void 0:e.rotate){this._player.plugins.rotate.config.disable=!0;let e=this._player.plugins.rotate.root;this._mainVideo.setAttribute("data-custom-rotate","true");let t=()=>{let e=this._mainVideo,t=Number(e.dataset.rotateDeg||0)-90;t=-360===t?0:t,e.dataset.rotateDeg=`${t}`};this._player.on(a.Events.ROTATE,t),e.addEventListener("click",t),this._disableTakeOverRotate=()=>{this._player.off(a.Events.ROTATE,t),this._mainVideo.dataset.rotateDeg="",this._mainVideo.removeAttribute("data-custom-rotate"),e.removeEventListener("click",t),this._player.plugins.rotate.config.disable=!1}}}_createMainVideoContainer(){let e=this._mainVideoContainer=document.createElement("div");Object.assign(e.style,{position:"absolute",overflow:"hidden",height:"100%",width:"100%"}),this._mainVideo.replaceWith(e),e.appendChild(this._mainVideo),this._mainVideo.style.transformOrigin="top left"}_initMain(){this._player.on(a.Events.FULLSCREEN_CHANGE,this._updateMainVideoSize),this._createMainVideoContainer(),this._takeOverRotate(),(this._mainResizeObserver=new ResizeObserver(this._updateMainVideoSize)).observe(this._player.root),(this._mainMutationObserver=new MutationObserver(this._updateMainVideoSize)).observe(this._mainVideo,{attributeFilter:["data-rotate-deg"]})}destroy(){try{var e,t,n;this._isDestory=!0,null===(e=this._disableTakeOverRotate)||void 0===e||e.call(this),null===(t=this._mainResizeObserver)||void 0===t||t.disconnect(),null===(n=this._mainMutationObserver)||void 0===n||n.disconnect(),this._player.off(a.Events.FULLSCREEN_CHANGE,this._updateMainVideoSize),this._player.position=this._originPlayerPostion,this._player.resizePosition=this._originPlayerResizePostion,this._mainVideoContainer.replaceWith(this._mainVideo),this._resetVideoStyle(),this._player.position(...this._positionParams)}catch(e){}}constructor(e){var t=this;(0,i._)(this,"_isDestory",!1),(0,i._)(this,"_updateMainVideoSize",()=>{let e;if(!this._meta)return;let{x:t,y:n,w:i,h:l}=this._meta,r=this._mainVideo,{videoHeight:o,videoWidth:a}=r,{width:u,height:d}=this._player.root.getBoundingClientRect(),s=a*i,c=o*l,v=s/c,_=Number(r.dataset.rotateDeg||0),f=_%180!=0;if(0===a&&(clearTimeout(this._updateTimer),!this._isDestory&&(this._updateTimer=setTimeout(()=>{if(this._isDestory){clearTimeout(this._updateTimer);return}this._updateMainVideoSize()},100))),u/d>=(f?c/s:v)){let t=f?d/v:d*v,n={height:"100%",width:`${t}px`,left:"50%",top:"0",transform:"translateX(-50%)"};Object.assign(this._mainVideoContainer.style,n),e=f?{height:`${t/l}px`,width:`${d/i}px`}:{width:`${100/i}%`,height:`${100/l}%`}}else{let t=f?u*v:u/v,n={height:`${t}px`,width:"100%",left:"0",top:"50%",transform:"translateY(-50%)"};Object.assign(this._mainVideoContainer.style,n),e=f?{height:`${u/l}px`,width:`${t/i}px`}:{height:`${t/l}px`,width:`${100/i}%`}}let m=0===_?`translate(-${100*t}%, -${100*n}%)`:-90===_?`translate(-${(i+t)*100}%, -${100*n}%)`:-180===_?`translate(-${(i+t)*100}%, -${(l+n)*100}%)`:`translate(-${100*t}%, -${(l+n)*100}%)`;Object.assign(this._mainVideo.style,e,{rotate:_+"deg",transform:m})}),(0,i._)(this,"_resetVideoStyle",()=>{this._mainVideo.removeAttribute("style")}),this._player=e,this._initMain(),this._originPlayerPostion=e.position,this._originPlayerResizePostion=e.resizePosition,e.position=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t._positionParams=n},e.resizePosition=()=>{}}}let f=()=>{let{player:e}=(0,r.n)(),t=(0,d.j)();return(0,o.useEffect)(()=>{if(e){let n=null;try{let i={x:0,y:0,w:1,h:.9};2===t.useEnlargeStream&&(i={x:0,y:.056,w:1,h:.844}),(n=new _(e)).updateMeta(i)}catch(e){}return()=>{try{null==n||n.destroy()}catch(e){}}}},[e]),null};t.Z=(0,u.Pi)(e=>{var t;let n=(0,s.Z)(),i=o.useMemo(()=>{var t;return(null==e?void 0:e.room)?{room:e.room}:null==n?void 0:null===(t=n.roomStore)||void 0===t?void 0:t.roomInfo},[null==n?void 0:n.roomInfo,e.room]),r=(0,d.j)(),a=o.useMemo(()=>r.useEnlargeStream&&0!==Number(r.useEnlargeStream),[]),u=o.useMemo(()=>{var e,t;return((null===(t=i.room)||void 0===t?void 0:null===(e=t.toolbar_data)||void 0===e?void 0:e.entrance_list)||[]).some(e=>[c.Ls.Cart,c.Ls.LifeGroupon,c.Ls.LiveItem,c.Ls.WelfareProject,c.Ls.MicroApp,c.Ls.GamePromotion,c.Ls.PaidLiveTicket,c.Ls.LittleGame,c.Ls.MiniGame].some(t=>e.component_type===t))},[i.room]),_=o.useMemo(()=>{var e,t;let n=null==i?void 0:null===(t=i.room)||void 0===t?void 0:null===(e=t.stream_url)||void 0===e?void 0:e.extra;return!!n&&(null==n?void 0:n.height)/(null==n?void 0:n.width)>=1.48},[i.room]),m=o.useMemo(()=>{var e;return(null==i?void 0:null===(e=i.room)||void 0===e?void 0:e.live_room_mode)===v.ke.MEDIA},[]);return(o.useEffect(()=>{var e,t;if(null==n?void 0:null===(e=n.singletonStore)||void 0===e?void 0:e.message)return null==n?void 0:null===(t=n.singletonStore)||void 0===t?void 0:t.message.syncOn("ToolBarControlMessage",e=>{let{method:t,payload:n}=e;if(!t||!n)return})},[null==n?void 0:null===(t=n.singletonStore)||void 0===t?void 0:t.message]),!a||u||!_||m)?null:(0,l.jsx)(f,{})})},214527:function(e,t,n){n.d(t,{g:function(){return o}});var i=n(88648),l=n(609968),r=n(637005);let o=(0,i.memo)(function(){let{player:e}=(0,l.n)();return(0,i.useEffect)(()=>{let t=r.listen(r.EVENT.livePause,()=>{e.pause()});return()=>{t()}},[]),null})},512366:function(e,t,n){n.d(t,{o:function(){return g},D:function(){return p}}),n("874386");var i=n("563097"),l=n("88648"),r=n("734123"),o=n("782563"),a=n("388862"),u=n("32167"),d=n("812771"),s={smallWindowExit:{eventName:"small_window_exit",params:{enter_from:"",action:"",action_type:"",stream_type:""}}},c=n("609968"),v=n("697311"),_=n("850159"),f=n("544933"),m=n("663744");let h=e=>{let{onClick:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:d.default.inPictureCover}),(0,i.jsxs)("div",{className:d.default.inPictureContainer,children:[(0,i.jsx)("div",{className:d.default.inPictureTitle,children:"正在「小窗」模式下播放"}),(0,i.jsx)("div",{className:d.default.inPictureBtn,onClick:t,children:"返回大窗播放"})]})]})},p=e=>{let{isActive:t,playerRef:n,handelIsInPic:d}=e,[v,_]=(0,l.useState)(!1),{player:p}=(0,c.n)(),g=(0,l.useRef)(new f.h(s));(0,l.useEffect)(()=>{let e;let n=null==p?void 0:p.video;if(n&&t&&p){let t=()=>{var t,n,i;!(0,o.DT)()&&(0,a.DJ)()&&((null==p?void 0:null===(t=p.video)||void 0===t?void 0:t.readyState)>2||p.currentTime)&&!(null==p?void 0:p.isInPicture)&&(null==p||null===(i=p.video)||void 0===i||null===(n=i.requestPictureInPicture)||void 0===n||n.call(i).then(()=>{_(!0),p.isInPicture=!0,clearTimeout(e)}).catch(e=>{p.isInPicture=!0,_(!1)}))};e=setTimeout(t,0),null==p||p.on(r.Events.LOADED_DATA,t);let i=()=>{_(!0)},l=()=>{_(!1)};return n.addEventListener("enterpictureinpicture",i),n.addEventListener("leavepictureinpicture",l),()=>{n.removeEventListener("leavepictureinpicture",l),n.removeEventListener("enterpictureinpicture",i),null==p||p.off(r.Events.LOADED_DATA,t),p.isInPicture=!1,clearTimeout(e)}}},[t,p]),(0,l.useEffect)(()=>{d&&d(v)},[v]);let{isInPreview:y,isInPreviewActive:E}=(0,m.DQ)();return(0,l.useEffect)(()=>{if(y&&!E&&v){if((0,a.DJ)()){var e,t;null===(e=(t=document).exitPictureInPicture)||void 0===e||e.call(t)}_(!1)}},[y,E,v]),v?(0,i.jsx)(h,{onClick:e=>{if(e.stopPropagation(),(0,a.DJ)()){var t,n;null===(t=(n=document).exitPictureInPicture)||void 0===t||t.call(n)}_(!1),g.current.sendLog("smallWindowExit",{enter_from:(0,u.vM)()})}}):null},g=()=>{let{isLivingPip:e,closeLivingPip:t}=(0,v.ds)(),{eventStore:{playerEvent:n}}=(0,_.Z)();return e?(0,i.jsx)(h,{onClick:()=>{t(),n.livesdkMiniWindowExit({click_position:"web_icon_exit"})}}):null}},315370:function(e,t,n){n.d(t,{p:function(){return r}});var i=n(88648),l=n(609968);let r=e=>{let{ext:t}=e,{logger:n}=(0,l.n)();return i.useEffect(()=>{n&&n.updateExt(t)},[t]),null}},538843:function(e,t,n){n.d(t,{w:function(){return i}}),n(563097),n(88648),n(713097);let i=e=>{let{balance:t,giftImg:n,giftName:i,coinName:l,isEnoughMoney:r=!0}=e;return r?`
    <div style="height: 22px;font-size: 14px;line-height: 22px;display: flex;align-items: center;">
      充值后自动送出
      <img
        style="width: 28px;height: 28px;margin: 0 6px;"
        src="${n}"
      />
      <span>${i}<span>
      （还差${t}${l}）
    </div>
  `:`
      <div style="height: 22px;font-size: 14px;line-height: 22px;display: flex;align-items: center;">
        充值金额不够无法送出
        <img
          style="width: 28px;height: 28px;margin: 0 6px;"
          src="${n}"
        />
        <span>${i}<span>
        （仅作为${l}充值）
      </div>`}},354999:function(e,t,n){var i=n(520739),l=n(563097),r=n(713097),o=n.n(r),a=n(88648),u=n(146572),d=n(577099);t.Z=e=>{let{title:t,open:n,onSwitchChange:r,className:s,logCommonParams:c}=e,v=a.useCallback(()=>{r(!n),(0,d.u7)((0,i._)({status:n?"off":"on"},c))},[n]);return(0,l.jsxs)("div",{className:o()(u.default.switch,s),children:[(0,l.jsx)("div",{className:o()(u.default.sliderContainer,{[u.default.sliderContainerOpen]:n}),onClick:v,children:(0,l.jsx)("div",{className:o()(u.default.slider,{[u.default.toggle]:n})})}),(0,l.jsx)("span",{className:u.default.title,children:t})]})}},38198:function(e,t){t.Z=()=>({abrPts:"-800",adaptiveConfig:{hurryEndMs:1800,hurryStartMs:2500,hurrySpeed:1.1,thresholdDown:!0}})},30468:function(e,t,n){n.d(t,{wn:function(){return y}});var i=n("520739"),l=n("878389");n("413806"),n("826893"),n("882732"),n("544943"),n("874386"),n("250440"),n("179133");var r=n("563097"),o=n("909543"),a=n("88648");let u=(0,a.createContext)(!1);var d=n("582432"),s=n("30321"),c=n("782563"),v=n("7772"),_=n("32369");let f={left:"x",top:"y",width:"width",height:"height"},m=(e,t)=>{let n=null==e?void 0:e.split("?")[0];if(n===(null==t?void 0:t.split("?")[0]))return!0;try{if(new URL(e).pathname===new URL(t).pathname)return!0;return!1}catch(e){}},h=["/","/follow"],p=e=>h.includes(e),g=e=>{var t;let n=(0,a.useRef)({}),{pathname:h}=(0,o.a)(),p=(0,a.useContext)(u),{innerFeedOn:g}=(0,v.P)(),{reuseId:y,children:E,container:w,isParent:I,abTestData:S,afterDomAppend:b,afterDomDetach:N,beforePropsUpdate:L}=e,{_getPortalElementById:x,_updatePlayerPropsById:C,_dropScopeById:T,_checkIsParentContainerInBody:P,_getPlayerPropsById:k,_reuseStateMap:R,_reuseMapForCollection:A}=(0,d.Z)(),M=(0,a.useRef)(null);M.current=T;let j=(0,a.useRef)(null),D=null===(t=w.current)||void 0===t?void 0:t.getBoundingClientRect();(null==D?void 0:D.width)&&(n.current=D);let O=()=>{try{try{delete A[y]}catch(e){}if(j.current.hasChildNodes())return;let{isReuse:e,element:t}=x(y,E),n=document.getElementById(d.Ur).getBoundingClientRect();if(j.current.appendChild(t),b){let l=(0,i._)({},R[y]||{});b({element:t,isReuse:e,rect:n,reuseState:l})}R[y]=void 0}catch(e){_.kg.event("old_player_back_no_reuse",{message:e,isSaveError:1}),location.reload()}};(0,a.useEffect)(()=>{if(w.current){if(I){if(!p){if(g&&(0,s.yk)(h))return;O()}}else O()}},[h,w.current]);let V=e=>{let t=document.getElementById(d.Ur);if(!t.hasChildNodes()&&j.current.hasChildNodes()){let i=j.current.childNodes[0],l={};if(Object.keys(f).forEach(e=>{let i=n.current[f[e]];l[e]=i,t.style[e]=`${i}px`}),e&&(window._HOLDER_STYLE_=l),t.appendChild(i),!e){let e=document.querySelector(`#${y}_parent`);setTimeout(()=>{try{if(t.childNodes[0]===i){let t=A[y]||!1,i=(null==e?void 0:e.hasChildNodes())||!1,a="",u="",d="",s="";try{if(i){var n,l,r,o;a=(null==e?void 0:null===(n=e.childNodes[0])||void 0===n?void 0:n.nodeName)||"",u=(null==e?void 0:null===(l=e.childNodes[0])||void 0===l?void 0:l.className)||"",d=(null==e?void 0:null===(o=e.childNodes[0])||void 0===o?void 0:null===(r=o.getAttribute)||void 0===r?void 0:r.call(o,"data-e2e"))||""}}catch(e){s=e.message}_.kg.event("old_player_back_no_reuse",{isContainerHasChild:i?1:0,isNoReuse:t?1:0,childNodesName:a,childNodesClassName:u,childNodesE2e:d,isError:s,reuseId:y,isClient:null===c.DT||void 0===c.DT?void 0:(0,c.DT)()}),location.reload()}}catch(e){}},1e3)}N&&N({setReuseState:e=>{R[y]=e}});try{A[y]=!0}catch(e){}}};return(0,a.useLayoutEffect)(()=>{var e,t,n,i;let l="live.douyin.com"!==window.location.host&&(null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.search.includes("r_player=1")),r=null===(i=window)||void 0===i?void 0:null===(n=i.location)||void 0===n?void 0:n.search.includes(y);I&&p&&r&&l&&V(!0)},[p]),(0,a.useEffect)(()=>()=>{var e;I&&M.current(y),g&&(null===(e=window)||void 0===e?void 0:e.__disableReuseAppend__)&&M.current(y)},[]),(0,a.useLayoutEffect)(()=>()=>{if(!I){var e;if(!g||(null===(e=window)||void 0===e?!void 0:!e.__disableReuseAppend__))P(y)?V(!1):M.current(y)}},[]),(0,a.useEffect)(()=>{if(!j.current.hasChildNodes())return;let e=k(y)||{},t=E.props,n=(null==t?void 0:t.isRedirectUrl)||(null==e?void 0:e.isRedirectUrl);(()=>{let r=e.url;!t.url&&(t=(0,l._)((0,i._)({},t),{url:r}));let o=m(r,t.url),a=I&&r,u=!!(n&&r)&&!(null==t?void 0:t.isH265Error);!((null==S?void 0:S.liveInnerFeed)&&(null==t?void 0:t.roomId)===(null==e?void 0:e.roomId))&&(o||a||u)&&(t=(0,l._)((0,i._)({},t),{url:(null==t?void 0:t.isH265Error)||!r?null==t?void 0:t.url:r}))})(),L&&(t=L({props:e,nextProps:t})),n&&!(null==t?void 0:t.isH265Error)&&(t=(0,l._)((0,i._)({},t),{isRedirectUrl:!0})),C(y,t)},[E.props,h]),(0,r.jsx)("div",{ref:j,id:`${y}_${I?"parent":"child"}`,style:{display:"block",width:"100%",height:"100%"}})},y=e=>{let{reuseId:t,children:n,container:u,disabled:s}=e,c=(0,d.Z)();if(null===c)return(0,r.jsx)(r.Fragment,{children:n});let{_roomParentContainerMap:v,_checkIsPlayerInBody:_,_getPlayerById:f,_dropScopeById:m}=c;if(s||!t)return(0,r.jsx)(r.Fragment,{children:n});let h=(0,a.useRef)(!0),y=(0,a.useRef)(!1),{pathname:E}=(0,o.a)(),w=(0,a.useRef)(p(E)).current;return(h.current&&(h.current=!1,!w&&!f(t)&&(y.current=!0)),y.current)?(0,r.jsx)(r.Fragment,{children:n}):(w&&v.set(t,u.current),(0,r.jsx)(g,(0,l._)((0,i._)({},e),{isParent:w})))}},725650:function(e,t,n){n.d(t,{$4:function(){return Z},BN:function(){return p},GD:function(){return j},HC:function(){return h},Hf:function(){return N},I7:function(){return b},Io:function(){return y},JR:function(){return C},KA:function(){return M},LA:function(){return V},LI:function(){return _},Nd:function(){return G},Pj:function(){return W},QN:function(){return d},RY:function(){return X},SH:function(){return I},T_:function(){return f},UE:function(){return J},UM:function(){return L},V7:function(){return w},WG:function(){return F},Wt:function(){return k},_1:function(){return q},_P:function(){return Y},a0:function(){return Q},aD:function(){return ee},cE:function(){return x},dq:function(){return m},eL:function(){return g},fB:function(){return v},f_:function(){return H},gC:function(){return P},hx:function(){return s},jq:function(){return er},jr:function(){return c},kr:function(){return K},kw:function(){return R},mp:function(){return S},n$:function(){return O},ng:function(){return T},qi:function(){return E},rv:function(){return A},si:function(){return D},vM:function(){return et},vu:function(){return U},zY:function(){return B},zv:function(){return $}}),n(981168);var i=n(637005),l=n(879550),r=n(668899),o=n(213987),a=n(527459),u=n(436910);let d="ISLAND_PLUGIN_DANMAKUNEW",s="ISLAND_PLUGIN_AUDIO",c="ISLAND_PLUGIN_VIDEO",v="ISLAND_PLUGIN_PICTURE",_="ISLAND_PLUGIN_EFFECT_SWITCH",f="ISLAND_PLUGIN_GIFT_TRAY",m="ISLAND_PLUGIN_GIFT_EFFECT",h="ISLAND_PLUGIN_PK",p="ISLAND_PLUGIN_TOOLBAR",g="ISLAND_PLUGIN_EFFECT",y="ISLAND_PLUGIN_EFFECT",E="ISLAND_LIVE_SHARE_PLUGIN",w="ISLAND_PLUGIN_HOUR_RANK_LIST",I="ISLAND_PLUGIN_OPERATING_BAR",S="ISLAND_PLUGIN_LINKMIC_APPLY",b="ISLAND_CONTEXT_MENU",N="ISLAND_LIVING_PIP_WINDOW",L="ISLAND_PLUGIN_GROUP_FIGHT",x="ISLAND_PLUGIN_GUEST_BATTLE",C="ISLAND_LIVING_PIP_WINDOW_DOUBLE",T="ISLAND_PLUGIN_ORDER_SING",P="ISLAND_USE_PAUSE_POP",k="ISLAND_LEAD_LOGIN_WITH_HIDE_LOGIN",R="ISLAND_LIVE_LIKE",A="ISLAND_ADMIN_PRIVILEGE_PLUGIN",M="ISLAND_DANMUKU_SETTINGS",j="ISLAND_RTC_LAYER_PLUGIN",D="ISLAND_PLAYER_COMMENT_PLUGIN",O="ISLAND_SHORT_TOUCH",V="ISLAND_LOTTERY",U="ISLAND_REDPACKET",F="ISLAND_LIVE_RESERVE",Z=1e4,G="living_room_player_container",H="living_player_container",B="ISLAND_LAYOUT_NAVIGATION",$="ISLAND_DETAIL_CHATROOM",K="ISLAND_GIFT_MENU",W="ISLAND_DETAIL_ROOMINFOBARNEW",Y="ISLAND_SIDE_BAR",z="ISLAND_CATEGORY_TAB",Q="ISLAND_SYNC_HEADER",q="ISLAND_NEW_YEAR_LIVE",J="ISLAND_PROGRAMME",X="ISLAND_AUDIO_CHEAT_TIPS",ee="ISLAND_AUTO_RUN_MODAL",et="ISLAND_SPRING_BACK",en=["/category/:categoryId","/follow/live/:webrid","/root/live/:webrid"],ei=()=>-1,el={[i.EVENT.afterVideoPlayed]:[{name:B,priority:-1,get delay(){return(0,r.VM)()||2e3}},{name:Q,priority:-1,get delay(){return(0,r.VM)()||2e3}},{name:$,priority:1},{name:W,priority:2},{name:d,priority:-1,get delay(){return 2e3}},s,c,{name:v,get priority(){return ei()}},"ISLAND_PLUGIN_FANSCLUB",_,f,m,h,{name:h,priority:2},{name:"ISLAND_PLUGIN_EXHIBITION_VIEW",get priority(){return ei()}},g,{name:w,get priority(){return ei()}},{name:I,priority:4},{name:S,get priority(){return ei()}},L,x,T,Y,z,q,X,J,ee,et,P,k,R,A,M,j,D,{name:V,priority:3},U,{name:O,priority:3},{name:N,get priority(){return ei()}},{name:E,get priority(){return ei()},get delay(){return 1e3}},b,F,{name:p,priority:2},C]};function er(){if("undefined"==typeof window)return;let{pathname:e,hostname:t}=window.location;if(!("live.douyin.com"===t&&((0,a.m)("/",window.location.pathname)||(0,a.m)("/:id",window.location.pathname)||(0,a.m)("/live/:id",window.location.pathname))||(0,u.l)(e)||(0,u.Y)(e)))return;let n=!1;Object.keys(el).forEach(e=>{i.listen(e,()=>{if(n)return;n=!0;let t=Object.values(el[e]).sort((e,t)=>{let n="string"==typeof e?0:e.priority;return("string"==typeof t?0:t.priority)-n}),i=en.some(e=>(0,a.m)(e,window.location.pathname));t.forEach(e=>{let t="string"==typeof e?e:e.name,n="string"!=typeof e&&(null==e?void 0:e.delay);l.p.postTask({task:()=>{switch(t){case Y:!i||n?setTimeout(()=>{(0,o.q)(Y)},n||2e3):(0,o.q)(Y);break;case z:i?(0,o.q)(z):setTimeout(()=>{(0,o.q)(z)},2e3);break;default:n?setTimeout(()=>{(0,o.q)(t)},n):(0,o.q)(t)}},priority:"user-visible"})})})})}},630579:function(e,t,n){n.d(t,{x:function(){return i}});var i={DETAIL:1,1:"DETAIL",OLD_CARD:2,2:"OLD_CARD",NEW_CARD:3,3:"NEW_CARD"}},691682:function(e,t,n){n.d(t,{s:function(){return c}}),n(675373);var i=n(88648),l=n(645260),r=n.n(l),o=n(606667),a=n(630579),u=n(32369),d=n(831202),s=n(782563);let c=e=>{let{roomId:t,anchorId:n}=e,l=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:"",exhibitionSource:a.x.DETAIL};return o.CI({roomId:t,anchorId:e.uid,exhibitionSource:null==e?void 0:e.exhibitionSource}).then(e=>{var t,n;let{data:i}=e,l=r()(i,"status_code");if(0===l)return Promise.resolve({data:i,code:l});return u.ZN.error(d.Mo.LiveExhibitionError,{content:{statusCode:l,logId:null!==(n=e.logId)&&void 0!==n?n:"",is_client:(0,s.DT)(),data:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}}),Promise.resolve({data:i,code:l})})},[t]),c=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{exhibitionSource:a.x.DETAIL};return o.CI({roomId:t,anchorId:n,exhibitionSource:null==e?void 0:e.exhibitionSource}).then(e=>{var t,n;let{data:i}=e,l=r()(i,"status_code");if(0===l)return Promise.resolve({data:i,code:l});return u.ZN.error(d.Mo.LiveExhibitionError,{content:{statusCode:l,logId:null!==(n=e.logId)&&void 0!==n?n:"",is_client:(0,s.DT)(),data:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}}),Promise.resolve({data:i,code:l})})},[t,n]),v=(0,i.useCallback)(async()=>o.Dm({anchorId:n,roomId:t}).then(e=>{let{data:t}=e,n=r()(t,"status_code");return 0===n?Promise.resolve({data:t,code:n}):Promise.resolve({data:t,code:n})}),[t,n]),_=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:""};return o.Dm({anchorId:e.uid,roomId:t}).then(e=>{let{data:t}=e,n=r()(t,"status_code");return 0===n?Promise.resolve({data:t,code:n}):Promise.resolve({data:t,code:n})})},[t,n]),f=(0,i.useCallback)(async e=>o.$e({roomId:t,anchorId:n,groupId:null==e?void 0:e.groupId}).then(e=>{let{data:t}=e;return Promise.resolve(t)}),[t,n]);return{getExhibitionHome:c,getExhibitionRare:v,getMedalDetail:f,getGiftDetail:(0,i.useCallback)(async e=>o.yH({roomId:t,anchorId:n,giftId:null==e?void 0:e.giftId,groupId:null==e?void 0:e.groupId,taskId:null==e?void 0:e.taskId}).then(e=>{let{data:t,logId:n}=e;return 0===r()(t,"status_code")?Promise.resolve(t):Promise.reject(t)}),[t,n]),getExhibitionHomeByid:l,getExhibitionRareById:_}}},781645:function(e,t,n){n.d(t,{SX:function(){return o},dY:function(){return l},oQ:function(){return r}});var i=n(796035);let l=e=>`sslocal://webcast_webview?url=https%3A%2F%2Flf-webcast-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fwebcast%2Fmono%2Fh5%2Frevenue_gift_exhibition_hall_h5_douyin%2Fpages%2Fgift_list%2Findex.html%3Fprofile_user_id%3D${e}%26showPcClose%3Dtrue`,r=e=>{let t=encodeURIComponent(`${i.w.Exhibition}&profile_user_id=${e}`);return`sslocal://lynxview?url=${t}&type=popup&gravity=bottom&height_percent=75&web_bg_color=ff060a19&radius=23&radius_bottom_right=0&radius_bottom_left=0&enable_preload=all&add_safe_area_height=0&use_wk_falcon=2`},o=()=>`sslocal://lynxview?url=${encodeURIComponent(i.w.Exhibition)}&type=popup&gravity=bottom&height_percent=75&web_bg_color=ff060a19&radius=23&radius_bottom_right=0&radius_bottom_left=0&enable_preload=all&add_safe_area_height=0&use_wk_falcon=2`},515658:function(e,t,n){var i=n(88648),l=n(374187),r=n(207813),o=n.n(r),a=n(645260),u=n.n(a);t.Z=e=>{let{linkmicStore:{linkMicSeats:t,setChoosePanelVisible:n,choosePeopleAll:r,setChoosePeopleArr:a,linkMicLayout:d,choosePeopleArr:s,setChoosePeopleList:c,groupLiveMemberList:v},userStore:{userInfo:_},roomStore:{roomInfo:f}}=e(),m=(0,i.useRef)([]),h=(0,i.useMemo)(()=>{let e=u()(f,"room.others.group_live_data.is_group_live",0)?null==v?void 0:v.map(e=>({user:e})):Object.values(t).filter(e=>{var t,n,i,r,o,a;if(Number(null===(t=e.user)||void 0===t?void 0:t.user_position)>=l.Lf[d])return!1;let u=(null==_?void 0:_.id_str)===(null===(i=e.user)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.id_str)&&(null==_?void 0:_.id_str)===(null==f?void 0:null===(r=f.anchor)||void 0===r?void 0:r.id_str);return e.user&&((null===(a=e.user)||void 0===a?void 0:null===(o=a.user)||void 0===o?void 0:o.id_str)!==(null==_?void 0:_.id_str)||u)});return m.current=e,c(e),e},[t,_,d,f,v]),p=(0,i.useCallback)(()=>{let e=null==h?void 0:h.map(e=>{var t,n,i;return null!==(i=null==e?void 0:null===(n=e.user)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id_str)&&void 0!==i?i:""});o()(s,e)||a(e)},[a,h,s]);return{choosePeopleList:h,choosePeoplePanelVisible:(0,i.useCallback)(e=>{e&&r&&p(),n(e)},[r,n,p]),chooseAllCb:p}}},212415:function(e,t,n){n.d(t,{$I:function(){return s},iz:function(){return a},mJ:function(){return o},ue:function(){return u},ws:function(){return d}});var i=n(519055),l=n(953671),r=n(782563);let o=()=>{if(i.s)return!0;try{var e;return null===(e=MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}catch(e){return!1}},a=()=>{if(i.s)return!1;try{var e,t;return(null===(e=MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="hev1.1.6.L153.B0"'))&&(null===(t=MediaSource)||void 0===t?void 0:t.isTypeSupported('video/mp4; codecs="hev1.2.4.L153.B0"'))}catch(e){return!1}},u=()=>{if(i.s)return!1;try{var e;return(0,r.DT)()&&(null===(e=MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="vvc1.1.6.L93.B0"'))}catch(e){return!1}},d=()=>{if(i.s)return!1;try{return"true"===(0,l.b)("hasAvx2")}catch(e){return!1}},s=()=>{if(i.s)return"";try{return window.localStorage.getItem("h265ErrorNumNew")||window.localStorage.getItem("h265ErrorNum")||""}catch(e){return""}}},721729:function(e,t,n){n.d(t,{j:function(){return i}});var i={UNK_NOWN:0,0:"UNK_NOWN",LIVE:1,1:"LIVE",FIRST_LIVE:2,2:"FIRST_LIVE",RECORD_LIVE:3,3:"RECORD_LIVE"}},577099:function(e,t,n){n.d(t,{EP:function(){return I},F3:function(){return V},Im:function(){return O},JW:function(){return h},MR:function(){return R},Ne:function(){return _},Nz:function(){return $},O5:function(){return U},O9:function(){return B},Qz:function(){return M},UH:function(){return y},Vd:function(){return p},W$:function(){return L},Xk:function(){return v},Y5:function(){return E},ZA:function(){return F},_s:function(){return D},at:function(){return b},bi:function(){return m},d3:function(){return A},f5:function(){return C},j1:function(){return Z},lh:function(){return j},ni:function(){return k},u7:function(){return H},vc:function(){return S},xM:function(){return G},xS:function(){return N},xw:function(){return K},y3:function(){return g},y9:function(){return w},yM:function(){return x}});var i=n(520739),l=n(878389),r=n(974859),o=n(738612),a=n(606604),u=n(150566),d=n(362501),s=n(645260),c=n.n(s),v={LOGIN:1,1:"LOGIN",NOT_LOGIN:0,0:"NOT_LOGIN"};let _=e=>{var t;let n=e?1:0,i=(null==e?void 0:e.episode_id_str)?null==e?void 0:e.episode_id_str:"",l=(null==e?void 0:e.item_id)?null==e?void 0:e.item_id:"",r=(null==e?void 0:e.season_id_str)?null==e?void 0:e.season_id_str:"",o=n?(null==e?void 0:null===(t=e.mod)||void 0===t?void 0:t.episode_stage)===2?"premiere":"live":"";return{push_id:(0,u.Rs)("push_id"),is_vs:n,vs_episode_id:i,vs_ep_group_id:l,vs_season_id:r,vs_episode_stage:o}},f=()=>({url:location.href,url_path:location.pathname}),m=e=>{if(!!window)window.collectEvent&&window.collectEvent("livesdk_rec_live_play",(0,i._)({anchor_id:"",web_live_page:"",web_live_tab:"",more_detail:"",live_type:"game",action_type:"click",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},h=e=>{window.collectEvent&&window.collectEvent("livesdk_live_show",(0,l._)((0,i._)({cid:(0,r.V7)(),web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",action_type:"click",game_live_source:"game_web",url:location.href,url_path:location.pathname},e),{if_qianchuan_ad:(null==e?void 0:e.cid)||(0,r.V7)()?1:0,ad_type:(null==e?void 0:e.cid)||(0,r.V7)()?a.Z9.Live:void 0,live_status:null==e?void 0:e.live_status,is_comments_fold:null==e?void 0:e.is_comments_fold}))},p=e=>{window.collectEvent("livesdk_second_tab_click",(0,i._)((0,l._)((0,i._)({},f()),{tab_name:"live"}),e))},g=e=>{window.collectEvent&&window.collectEvent("livesdk_live_window_duration_v2",(0,l._)((0,i._)({cid:(0,r.V7)(),web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e),{duration:(null==e?void 0:e.duration)>0?null==e?void 0:e.duration:0,isIncorrect:(null==e?void 0:e.duration)>0?0:1,if_qianchuan_ad:(null==e?void 0:e.cid)||(0,r.V7)()?1:0,ad_type:(null==e?void 0:e.cid)||(0,r.V7)()?a.Z9.Live:void 0}))},y=e=>{window.collectEvent&&window.collectEvent("livesdk_live_window_duration_v2_new",(0,l._)((0,i._)({cid:(0,r.V7)(),web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e),{duration:(null==e?void 0:e.duration)>0?null==e?void 0:e.duration:0,isIncorrect:(null==e?void 0:e.duration)>0?0:1,if_qianchuan_ad:(null==e?void 0:e.cid)||(0,r.V7)()?1:0,ad_type:(null==e?void 0:e.cid)||(0,r.V7)()?a.Z9.Live:void 0}))},E=e=>{window.collectEvent&&window.collectEvent("livesdk_live_duration",(0,l._)((0,i._)({cid:(0,r.V7)(),web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e),{duration:(null==e?void 0:e.duration)>0?null==e?void 0:e.duration:0,isIncorrect:(null==e?void 0:e.duration)>0?0:1,if_qianchuan_ad:(null==e?void 0:e.cid)||(0,r.V7)()?1:0,is_top:(0,d.k)()?"1":"0",ad_type:(null==e?void 0:e.cid)||(0,r.V7)()?a.Z9.Live:void 0,live_status:null==e?void 0:e.live_status,is_comments_fold:null==e?void 0:e.is_comments_fold}))},w=e=>{window.collectEvent&&window.collectEvent("livesdk_window_user_pause_duration",(0,i._)({cid:(0,r.V7)(),web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},I=e=>{window.collectEvent&&window.collectEvent("livesdk_live_click_user",(0,i._)({web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},S=e=>{window.collectEvent&&window.collectEvent("livesdk_live_start",(0,i._)({web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},b=e=>{window.collectEvent&&window.collectEvent("livesdk_live_pause",(0,i._)({web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},N=e=>{window.collectEvent&&window.collectEvent("livesdk_mini_window_preview_show",(0,i._)({web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},L=e=>{window.collectEvent&&window.collectEvent("livesdk_mini_window_preview_play",(0,i._)({web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},x=e=>{window.collectEvent&&window.collectEvent("livesdk_mini_window_preview_duration",(0,i._)({web_live_page:"",web_live_tab:"",more_detail:"",category_name:"",page_type:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname},e))},C=(e,t)=>{window.collectEvent(e,t)},T=e=>{var t,n,i,l,r,a,d,s,v,_;let f=c()(e,"room.stream_url.stream_orientation",""),m=(null===(t=e.room)||void 0===t?void 0:t.episode_extra)?1:0;return{push_id:(0,u.Rs)("push_id"),anchor_id:c()(e,"room.owner.id_str",""),room_id:c()(e,"room.id_str",""),title_type:void 0===o.k4[e.title_type]?"":o.k4[e.title_type],cover_type:void 0===o.I4[e.cover_type]?"":o.I4[e.cover_type],is_recommend:void 0===o.Od[e.is_recommend]?"":o.Od[e.is_recommend],stream_type:o.FO[f]||"",game_name:c()(e,"tag_name",""),live_type:"game",is_vs:m,vs_episode_id:m?null==e?void 0:null===(i=e.room)||void 0===i?void 0:null===(n=i.episode_extra)||void 0===n?void 0:n.episode_id_str:"",vs_ep_group_id:m?null==e?void 0:null===(r=e.room)||void 0===r?void 0:null===(l=r.episode_extra)||void 0===l?void 0:l.item_id:"",vs_season_id:m?null==e?void 0:null===(d=e.room)||void 0===d?void 0:null===(a=d.episode_extra)||void 0===a?void 0:a.season_id_str:"",vs_episode_stage:m?(null==e?void 0:null===(_=e.room)||void 0===_?void 0:null===(v=_.episode_extra)||void 0===v?void 0:null===(s=v.mod)||void 0===s?void 0:s.episode_stage)===2?"premiere":"live":""}},P=e=>{try{if(e)return T(e);return(0,i._)({},_())}catch(e){return{}}},k=(e,t)=>{let n=(0,i._)({},f(),P(t),e||{});window.collectEvent("livesdk_voice_button_click",n)},R=e=>{window.collectEvent("livesdk_browser_limited_mute",P(e))},A=e=>({is_paidlive:Number(null==e?void 0:e.paid_type),watch_paidlive_status:(null==e?void 0:e.view_right)?"regular":Number(null==e?void 0:e.duration)>180?"try_end":"try",entrance_form:""}),M=e=>{window.collectEvent&&window.collectEvent("live_no_support_on_pc",(0,i._)({},f(),e))},j=e=>{let t=window.__INVISIBLE_QUERY__||{};window.collectEvent&&window.collectEvent("livesdk_connection_mvpseats_show",(0,l._)((0,i._)({},t,f(),e),{connection_type:"anchor",show_object:"audience"}))},D=e=>{let t=window.__INVISIBLE_QUERY__||{};window.collectEvent&&window.collectEvent("livesdk_connection_mvpseats_click",(0,l._)((0,i._)({},t,f(),e),{connection_type:"anchor",show_object:"audience",click_identity:"audience",click_from:"seat"}))},O=e=>{let t=window.__INVISIBLE_QUERY__||{};window.collectEvent&&window.collectEvent("livesdk_pk_mission_show",(0,i._)({},t,f(),e))},V=e=>{let t=window.__INVISIBLE_QUERY__||{};window.collectEvent&&window.collectEvent("livesdk_onecllick_support_click",(0,i._)({},t,f(),e))},U=e=>{let t=window.__INVISIBLE_QUERY__||{};window.collectEvent&&window.collectEvent("livesdk_pk_mission_result_show",(0,i._)({},t,f(),e))},F=e=>{let t=window.__INVISIBLE_QUERY__||{};window.collectEvent&&window.collectEvent("livesdk_team_pk_individual_mission_result_show",(0,i._)({},t,f(),e))},Z=e=>{let t=window.__INVISIBLE_QUERY__||{};t.action_type=t.action_type||"click",window.collectEvent&&window.collectEvent("livesdk_gift_panel_personal_center_show",(0,i._)({},t,f(),e||{}))},G=e=>{let t=window.__INVISIBLE_QUERY__||{};t.action_type=t.action_type||"click",window.collectEvent&&window.collectEvent("livesdk_gift_panel_personal_center_click",(0,i._)({},t,f(),e||{}))},H=e=>{window.collectEvent&&window.collectEvent("click_auto_play",(0,l._)((0,i._)({},f(),e),{play_material:"live"}))},B=e=>{window.collectEvent&&window.collectEvent("click_previous_video",(0,l._)((0,i._)({},f(),e),{play_material:"live"}))},$=e=>{window.collectEvent&&window.collectEvent("click_next_video",(0,l._)((0,i._)({},f(),e),{play_material:"live"}))},K=e=>{window.collectEvent&&window.collectEvent("livesdk_failed_special_mask_cmt",(0,l._)((0,i._)({},f(),e),{play_material:"live"}))}},149378:function(e,t,n){n.d(t,{V:function(){return d}});var i=n(520739),l=n(159581),r=n(88648),o=n(797973),a=n(434739),u=n(734123);function d(e){let t=(0,r.useRef)(0),n=(0,o.Z)(e=>{var n,i;t.current="number"==typeof e?e:performance.now(),null===(n=(i=window).collectEvent)||void 0===n||n.call(i,"livesdk_perf_load_start",(0,l.zS)())});(0,r.useEffect)(()=>{if(!!e)return e.on(u.Events.LOAD_START,n),()=>{e.off(u.Events.LOAD_START,n)}},[e]);let d=(0,o.Z)(()=>{var e,n;if(!t.current)return;let r=performance.now()-t.current;null===(e=(n=window).collectEvent)||void 0===e||e.call(n,"livesdk_perf_wacth_duration",(0,i._)({duration:r},(0,l.zS)())),t.current=0});return(0,a.Z)("beforeunload",()=>{d()},{target:"undefined"==typeof window?void 0:window,capture:!0}),(0,r.useEffect)(()=>{if(!e)return;let t=[u.Events.PAUSE,u.Events.ENDED,u.Events.ERROR];return t.map(t=>e.on(t,d)),()=>{d(),t.map(t=>e.off(t,d))}},[e]),(0,r.useEffect)(()=>()=>d(),[]),{onLoadStart:n,onEnd:d,onPause:d,onError:d}}},727325:function(e,t,n){n.d(t,{X:function(){return o},h:function(){return r}});var i=n(64814),l=n(88648);let r=()=>()=>(0,i.ZP)((e,t,n)=>({rootElement:null,childElementList:[],setRootElement:t=>e(()=>({rootElement:t})),setChildElementList:t=>e(()=>({childElementList:t.slice()}))})),o=(0,l.createContext)({})},402727:function(e,t,n){n.d(t,{b:function(){return w}}),n(250440);var i=n(609968),l=n(695843),r=n(734123),o=n(32369),a=n(859231),u=n(577099),d=n(407217),s=n(645260),c=n.n(s),v=n(96008),_=n.n(v),f=n(88648),m=n(104013),h=n(850159),p=n(86468),g=n(831202),y=n(782563),E=n(948884);let w=e=>{let{isVerifyed:t}=e,{roomStore:{roomInfo:n,setNotSupportReason:s},linkmicStore:{setIsPlayModeNotSupport:v,imLinkMicLayout:w,uiLayout:I,setAsrSubtitle:S},singletonStore:{message:b},userStore:{userInfo:N},eventStore:{linkmicEvent:L}}=(0,h.Z)(),{player:x}=(0,i.n)(),C=(0,E.k)(),T=f.useCallback(()=>{o.kg.info("玩法限制",(0,m.toJS)(n)),v(!0),s(a.Ly.MULTI_CONSUMER_LINE)},[v,n]),P=(0,f.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()(n,"room.linker_detail.linker_ui_layout");(null==N?void 0:N.isReady)&&((0,u.Qz)({anchor_id:c()(n,"anchor.id_str",""),room_id:null==n?void 0:n.roomId,user_id:null==N?void 0:N.id_str,scene:Number(Object.keys(c()(n,"room.linker_map",{}))),playmode:c()(n,"room.linker_detail.linker_play_modes",[]),ui_layout:e}),o.kg.event(`[${g.Tn.Error}]${g.Mo.LiveNotSupportError}`,{room_id:null==n?void 0:n.roomId,user_id:null==N?void 0:N.id_str,scene:Number(Object.keys(c()(n,"room.linker_map",{}))),playmode:c()(n,"room.linker_detail.linker_play_modes",[]),ui_layout:e,is_client:(0,y.DT)()}))},[n,N]);f.useEffect(()=>{let e=c()(n,"room.linker_detail.linker_ui_layout"),t=Number(Object.keys(c()(n,"room.linker_map",{}))),i=c()(n,"room.linker_detail.linker_play_modes",[]);(e||t||(null==i?void 0:i.length)>0)&&o.kg.event("linkmic_user_page_view",{room_id:null==n?void 0:n.roomId,user_id:null==N?void 0:N.id_str,scene:t,playmode:i,ui_layout:e,is_client:(0,y.DT)()})},[n,N]),f.useEffect(()=>{(async()=>{let e=c()(n,"room.linker_detail.linker_ui_layout"),t=await (0,d.ZP)({service_name:"webcast.douyin.live_pc",key:"linkmic_not_support_uilayout"}),{uilayout:i}=t[null==C?void 0:C.XTTENV]?t[null==C?void 0:C.XTTENV]:t,l=e=>{if(i&&(null==i?void 0:i.includes(e)))return P(e),!0};[e,I].some(e=>l(e))&&T()})()},[n,I]);let k=c()(n,"room.live_room_mode"),R=f.useCallback(e=>{if(100===e.code)try{var t,i,r;let o=new TextDecoder().decode(e.content),u=(0,l.KR)(o);if(void 0===w&&u&&u.ktv_sei&&(null==u?void 0:null===(t=u.ktv_sei)||void 0===t?void 0:t.scene)>0&&(null==u?void 0:null===(i=u.ktv_sei)||void 0===i?void 0:i.scene)!==3&&T(),u&&u.app_data)_()();else if(null==u?void 0:null===(r=u.source)||void 0===r?void 0:r.includes("TTLiveSDK")){let e=c()(n,"room.basis.is_customize_audio_room",!1);k===a.ke.AUDIO&&!e&&T()}}catch(e){}},[T,w,k,n]);return f.useEffect(()=>(null==x||x.on(r.Events.SEI_PARSED,R),()=>{null==x||x.off(r.Events.SEI_PARSED,R)}),[x,R]),f.useEffect(()=>{let e=c()(n,"room.linker_map",{}),t=c()(n,"room.linker_detail.linker_play_modes",[]),i=!1;(e[p.xs.Scene_AudioChatRoom]||e[p.xs.Scene_VideoChatRoom]||e[p.xs.Scene_VideoEqualRoom])&&t.forEach(e=>{e===p.V0.LinkmicPlayMode_Teamfight&&(P(),i=!0)}),e[p.xs.Scene_AudioChatRoom]&&(t.includes(p.V0.LinkmicPlayMode_Teamfight)||t.includes(p.V0.LinkmicPlayMode_AudioChat_3x3_N_EMPTY))&&(i=!1),t.forEach(e=>{e===p.V0.LinkmicPlayMode_KTVSingingChallenge&&(P(),i=!0)}),(t.includes(p.V0.LinkmicPlayMode_Teamfight)||t.includes(p.V0.LinkmicPlayMode_AudioChat_3x3_N_EMPTY))&&(i=!1),i&&T()},[T,n]),f.useEffect(()=>null==b?void 0:b.on("KtvChallengeConfigMessage",e=>{e.forEach(e=>{let{method:t,payload:n}=e;if(!!t&&!!n)"WebcastKtvChallengeConfigMessage"===t&&(null==n?void 0:n.switch_status)==="1"&&T()})}),[T,b]),null};t.Z=w},957033:function(e,t,n){n.d(t,{u:function(){return u}}),n(250440);var i=n(88648),l=n(697311),r=n(850159),o=n(716551),a=n(859231);function u(e){var t;let{enabled:n,fullScreen:u,giftStatus:d,playerCoverText:s=""}=e,{isLivingPip:c}=(0,l.ds)(),{roomStore:{roomInfo:v},linkmicStore:{linkRoomType:_,isPlayModeNotSupport:f,isPaidLinking:m},cameraStore:{cameraInfoList:h},vrStore:{isVrLive:p}}=(0,r.Z)(),g=(null==h?void 0:h.length)>1,y=(0,i.useMemo)(()=>[o.kx.NONE,o.kx.ANCHOR_BAN].includes(s),[s]),E=Number(null===(t=v.room)||void 0===t?void 0:t.status_str)===a.LV.END,w=!c&&!u&&y&&_&&!f&&!E&&!m;return{showOperatingBar:!!(d||w)&&n||p||g,isShowLinkMicButton:w}}},483658:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(88648),l=n(850159),r=n(609968),o=n(734123);function a(e){let{eventStore:{playerEvent:t}}=(0,l.Z)(),{player:n}=(0,r.n)(),a=(0,i.useCallback)(n=>{switch(n.action){case"switch_danmu":null==t||t.liveDanmakuBtnClickEvent(!n.isOpen,e.logObj);break;case"switch_play_pause":null==t||t.livePlayBtnClickEvent(!n.paused,e.logObj);break;case"switch_fullscreen":null==t||t.liveFullScreenBtnEvent(n.fullscreen,e.logObj)}},[e.logObj]);return(0,i.useEffect)(()=>(n.on(o.Events.USER_ACTION,a),()=>{n.off(o.Events.USER_ACTION,a)}),[a]),null}},319329:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n("563097"),l=n("520739"),r=n("878389"),o=n("88648");let a=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,r._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M24.932 16.444c0-4.687-3.89-8.444-8.634-8.444a8.679 8.679 0 0 0-7.207 3.79v-1.558a.99.99 0 0 0-1.98 0v4.038c0 .547.444.99.99.99h4.038a.99.99 0 0 0 0-1.98h-1.646c1.137-1.963 3.304-3.3 5.804-3.3 3.7 0 6.655 2.918 6.655 6.464 0 3.547-2.956 6.465-6.655 6.465-2.963 0-5.459-1.88-6.326-4.453a.99.99 0 0 0-1.876.633c1.138 3.38 4.39 5.8 8.202 5.8 4.746 0 8.635-3.758 8.635-8.445z",fill:"#fff"})})));var u=n("716551"),d=n("850159"),s=n("609968"),c=n("927244"),v=n("795252"),_=n("821779"),f=n("128231"),m=n.n(f),h=n("663744"),p=(0,_.r)(function(e){let{noTips:t=!1}=e,{eventStore:{playerEvent:n}}=(0,d.Z)(),{player:l}=(0,s.n)(),{playerCoverText:r}=e,_=m()(()=>{window.location.reload()},200),{Icon:f}=e,p=(0,o.useCallback)(()=>{var t;if(r&&r===u.kx.KICK_OUT){_();return}l.emit(u.Cw.REFRESH),l.retry(),null==n||null===(t=n.liveRefreshBtnClickEvent)||void 0===t||t.call(n,e.logObj)},[n,r,l]),{isInPreview:g,isInPreviewActive:y,hasModal:E}=(0,h.DQ)();return((0,o.useEffect)(()=>{if(g&&!y)return;let e=e=>{var t,n;if(E())return;let i=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.tagName;if("INPUT"!==i&&"TEXTAREA"!==i&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyR"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&p()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[p,g,y,E]),t)?(0,i.jsx)("div",{onClick:p,children:f?(0,i.jsx)(f,{}):(0,i.jsx)(a,{})}):(0,i.jsx)(c.Z,{content:(0,i.jsx)(v.Z,{btn:"R",info:"刷新"}),children:(0,i.jsx)("div",{onClick:p,children:f?(0,i.jsx)(f,{}):(0,i.jsx)(a,{})})})})},284621:function(e,t,n){n.d(t,{l:function(){return f}});var i=n(88648),l=n(734123),r=n(784492),o=n(671428),a=n(35730),u=n(555106),d=n(31940),s=n(850159),c=n(609968),v=n(147542),_=n(657304);function f(e){let{playerCoverText:t=""}=e,{eventStore:{playerEvent:n},linkmicStore:{linkStatus:f}}=(0,s.Z)(),{player:m}=(0,c.n)(),{syncVolume:h}=(0,d.j)(),p=(0,i.useCallback)(()=>{var e,i;if(0===m.currentTime||f===v.cK.LINKED||f===v.cK.LINKING||t)return;0===(0,u.$o)(a.LocalStorageKeys.PLAYER_IS_MUTE)&&m.muted&&(0,u.qQ)(a.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,o.w)(m.muted);let l=m.volume,r=(0,o.T1)(),d=(0,o.rC)();null==n||n.volumeChanged({before_voice_value:d?0:Math.round((null!=r?r:0)*100),voice_value:Math.round((null!=l?l:0)*100),voice_status:m.muted?0:1,if_browser_limited:null!==(i=null===(e=window.__INVISIBLE_QUERY__)||void 0===e?void 0:e.if_browser_limited)&&void 0!==i?i:0,if_mini_window:(0,_.OL)()}),0===l?(0,o.w)(!0):(0,o.n$)(Number(null!=l?l:.1))},[f,t]);return(0,r.Z)(()=>{m.muted=(0,o.rC)()},[p]),(0,i.useEffect)(()=>{let e=m.getPlugin("volume");return e&&e.useHooks&&e.useHooks("muted_change",()=>{var e,t,i,l,r;if(0===m.volume){let e=(0,o.T1)();return m.volume=e,(0,o.w)(!1),null==n||n.volumeChanged({before_voice_value:Math.round(100*e),voice_value:0,voice_status:1,if_browser_limited:null!==(i=null===(t=window.__INVISIBLE_QUERY__)||void 0===t?void 0:t.if_browser_limited)&&void 0!==i?i:0}),!1}return setTimeout(()=>{(0,o.w)(m.muted)},50),null==n||n.volumeChanged({before_voice_value:0,voice_value:Math.round((null!==(l=m.volume)&&void 0!==l?l:0)*100),voice_status:0,if_browser_limited:null!==(r=null===(e=window.__INVISIBLE_QUERY__)||void 0===e?void 0:e.if_browser_limited)&&void 0!==r?r:0}),!0}),m.on(l.Events.VOLUME_CHANGE,p),()=>{m.off(l.Events.VOLUME_CHANGE,p)}},[p]),null}},728759:function(e,t,n){var i=n(520739),l=n(368200),r=n(563097),o=n(88648),a=n(850159),u=n(725215),d=n(309931),s=n(713097),c=n.n(s),v=n(910510);t.Z=(0,u.Pi)(e=>{let{rightPanelStore:{rootEl:t,registerItem:n,itemClassName:u,itemIndex:s,renderItemList:_,closeItem:f,isItemShow:m,openItem:h}}=(0,a.Z)(),{children:p,autoOpen:g}=e,y=(0,l._)(e,["children","autoOpen"]),E=o.useMemo(()=>_.findIndex(t=>t.itemKey===e.itemKey)>=0,[_,e.itemKey]);(0,o.useEffect)(()=>{e.itemKey&&n((0,i._)({showClose:!0,closeStyle:{fill:"rgba(0, 0, 0, 0.24)",stroke:"rgba(255, 255, 255, 0.1)"}},y))},[e.itemKey]),(0,o.useEffect)(()=>()=>{f(e.itemKey)},[]),(0,o.useEffect)(()=>{g&&!m(e.itemKey)&&h(e.itemKey)},[g]);let w=o.useMemo(()=>e.itemKey.indexOf("exhibition")>-1?v.k.Exhibition:e.itemKey,[e.itemKey]);return t&&E?(0,d.createPortal)((0,r.jsx)("div",{className:c()(u,e.className||""),"data-e2e":w,style:{zIndex:s(e.itemKey),height:e.height||"100%"},children:p},e.itemKey),t):null})},910510:function(e,t,n){n.d(t,{k:function(){return i}}),n(88648);var i={HourRank:"__hour_rank__",FansClub:"__fans_club__",ECommerce:"__e_commerce__",ECommerceSmall:"__e_commerce_small__",WhishList:"__whish_list__",Exhibition:"__exhibition__",ECommerceCloseEvent:"__e_commerce_close__",ACTIndicatorGroup:"__act_indicator__",Vip:"__vip__",Hybrid:"__hybrid__",ChatRoom:"__chat_room__",GiftPanel:"__right_gift_panel__",CEnlargeRule:"__c_enlarge_rule__"}},487658:function(e,t,n){n.d(t,{Ls:function(){return i},M1:function(){return l}});var i={TUnkown:0,0:"TUnkown",Cart:1,1:"Cart",LiveItem:2,2:"LiveItem",MicroApp:3,3:"MicroApp",WelfareProject:4,4:"WelfareProject",GamePromotion:5,5:"GamePromotion",MiniGame:6,6:"MiniGame",LifeGroupon:7,7:"LifeGroupon",PaidLiveTicket:8,8:"PaidLiveTicket",LittleGame:9,9:"LittleGame",ShareComponent:20,20:"ShareComponent",IMComponent:21,21:"IMComponent",EasterEgg:22,22:"EasterEgg",Vr:23,23:"Vr",MoreComponent:24,24:"MoreComponent",ExchangeCoupon:25,25:"ExchangeCoupon",LinkmicComponent:26,26:"LinkmicComponent",LiuyanComponent:27,27:"LiuyanComponent",GiftComponent:28,28:"GiftComponent",SpeedyGift:29,29:"SpeedyGift",IncomeExchange:30,30:"IncomeExchange",RoomChannel:31,31:"RoomChannel",Operation:32,32:"Operation",SnapShot:33,33:"SnapShot",MultiCamera:34,34:"MultiCamera",Clarity:35,35:"Clarity",Anthology:36,36:"Anthology",MatchMultiCamera:37,37:"MatchMultiCamera",MultiTabs:38,38:"MultiTabs",InteractionPanel:39,39:"InteractionPanel",DecorationPanel:40,40:"DecorationPanel",Treasure:41,41:"Treasure",DouYinMultiStream:42,42:"DouYinMultiStream",Prompt:1001,1001:"Prompt",WishList:1002,1002:"WishList",GiftVote:1003,1003:"GiftVote",Manager:1004,1004:"Manager",DouPlus:1005,1005:"DouPlus",DanmakuSetting:1006,1006:"DanmakuSetting",GiftEffect:1007,1007:"GiftEffect",CleanScreen:1008,1008:"CleanScreen",CastScreen:1009,1009:"CastScreen",PadPlay:1010,1010:"PadPlay",PcPlay:1011,1011:"PcPlay",PadPcPlay:1012,1012:"PadPcPlay",PlaySetting:1013,1013:"PlaySetting",DiggShake:1014,1014:"DiggShake",WindowSetting:1015,1015:"WindowSetting",WindowPlay:1016,1016:"WindowPlay",Record:1017,1017:"Record",VipIM:1018,1018:"VipIM",Collect:1019,1019:"Collect",Definition:1020,1020:"Definition",TimingClose:1021,1021:"TimingClose",GamePointsPlay:1022,1022:"GamePointsPlay",Denounce:1023,1023:"Denounce",DisLike:1024,1024:"DisLike",OptimizeRecommend:1025,1025:"OptimizeRecommend",GiftConsumeRemind:1026,1026:"GiftConsumeRemind",MinorRefund:1027,1027:"MinorRefund",Renqibao:1028,1028:"Renqibao",ScreenSetting:1029,1029:"ScreenSetting",Widget:1030,1030:"Widget",ShakeLinkmic:1031,1031:"ShakeLinkmic",InteractSwitch:1032,1032:"InteractSwitch",MarketWidget:1033,1033:"MarketWidget",ShareStory:1034,1034:"ShareStory",BackRecord:1035,1035:"BackRecord",UnionAnchors:1036,1036:"UnionAnchors",WebcastSetting:1037,1037:"WebcastSetting",LinkmicGame:1038,1038:"LinkmicGame",AudioSubtitle:1039,1039:"AudioSubtitle",AudioEffect:1040,1040:"AudioEffect",EmergencyHelp:1041,1041:"EmergencyHelp",GiftConsumptionManager:1042,1042:"GiftConsumptionManager",LiveListen:1043,1043:"LiveListen",LiveExperienceOpt:1044,1044:"LiveExperienceOpt",PublicAreaSetting:1050,1050:"PublicAreaSetting",LinkmicAnnounce:1051,1051:"LinkmicAnnounce",GameTeamManage:1052,1052:"GameTeamManage",FollowerShare:1053,1053:"FollowerShare",SwitchAccount:1054,1054:"SwitchAccount",ConsumptionProtect:1055,1055:"ConsumptionProtect",Copy:1056,1056:"Copy",QRCode:1057,1057:"QRCode",IMListVirtual:1058,1058:"IMListVirtual",MessageNotification:1059,1059:"MessageNotification",RechargeRecord:1060,1060:"RechargeRecord",MerchantQualifications:1061,1061:"MerchantQualifications",WatchLaterComponent:1062,1062:"WatchLaterComponent",AnchorCompMusic:3001,3001:"AnchorCompMusic",AnchorCompFansGroup:3002,3002:"AnchorCompFansGroup",AnchorCompComment:3003,3003:"AnchorCompComment",AnchorCompPreview:3007,3007:"AnchorCompPreview",AnchorCompContentManage:3051,3051:"AnchorCompContentManage",AnchorCompShare:3053,3053:"AnchorCompShare",AnchorCompRecord:3056,3056:"AnchorCompRecord",AnchorCompContentSelection:3057,3057:"AnchorCompContentSelection",AnchorCompPublicAreaSetting:3058,3058:"AnchorCompPublicAreaSetting",AnchorCompPause:3059,3059:"AnchorCompPause",AnchorStableMode:3060,3060:"AnchorStableMode",AnchorRoomChannel:3061,3061:"AnchorRoomChannel",AnchorPublicAreaHelper:3062,3062:"AnchorPublicAreaHelper",AnchorCompLiveManage:3103,3103:"AnchorCompLiveManage",AnchorCompFunctionSetting:3104,3104:"AnchorCompFunctionSetting"},l={NoOp:0,0:"NoOp",Up:1,1:"Up",Down:2,2:"Down",HasPermission:3,3:"HasPermission",NoPermission:4,4:"NoPermission",UpdateData:5,5:"UpdateData"}},842872:function(e,t,n){n.d(t,{iM:function(){return i}});var i={TYPE_NONE:0,0:"TYPE_NONE",TYPE_TURNON:1,1:"TYPE_TURNON",TYPE_PERMIT:2,2:"TYPE_PERMIT",TYPE_KICKOUTED:3,3:"TYPE_KICKOUTED",TYPE_FINISH:4,4:"TYPE_FINISH",TYPE_WAITING_LIST_CHANGED:5,5:"TYPE_WAITING_LIST_CHANGED",TYPE_LINKED_LIST_CHANGED:6,6:"TYPE_LINKED_LIST_CHANGED",TYPE_ALL_LIST_CHANGED:7,7:"TYPE_ALL_LIST_CHANGED",TYPE_FAN_TICKET_CHANGED:8,8:"TYPE_FAN_TICKET_CHANGED",TYPE_RANKING_UPDATE:9,9:"TYPE_RANKING_UPDATE",TYPE_SILENCE:10,10:"TYPE_SILENCE",TYPE_UNSILENCE:11,11:"TYPE_UNSILENCE",TYPE_INVITE:12,12:"TYPE_INVITE",TYPE_REPLY:13,13:"TYPE_REPLY",TYPE_AUTO_JOIN:14,14:"TYPE_AUTO_JOIN",TYPE_AGREE_ADMIN_FIRST_INVITE:15,15:"TYPE_AGREE_ADMIN_FIRST_INVITE",TYPE_SILENCE_PASSIVE:16,16:"TYPE_SILENCE_PASSIVE",TYPE_SWITCH_SCENE:17,17:"TYPE_SWITCH_SCENE",TYPE_JOIN_GAME_BARRAGE_RTC:18,18:"TYPE_JOIN_GAME_BARRAGE_RTC",TYPE_LEAVE_GAME_BARRAGE_RTC:19,19:"TYPE_LEAVE_GAME_BARRAGE_RTC",TYPE_BATTLE_DATA:202,202:"TYPE_BATTLE_DATA"}},954547:function(e,t,n){n.d(t,{Qq:function(){return i}});var i={TypeEcology_Unknown:0,0:"TypeEcology_Unknown",TYPE_LIVE_MATRIX_ENTRANCE_CHANGE:1,1:"TYPE_LIVE_MATRIX_ENTRANCE_CHANGE",TYPE_WEB_ANTI_CHEAT:2,2:"TYPE_WEB_ANTI_CHEAT",TYPE_XPLAY_INIT:3,3:"TYPE_XPLAY_INIT",TYPE_XPLAY_CLOSE:4,4:"TYPE_XPLAY_CLOSE",TYPE_NOTIFY_MULTI_AVATAR_PUBLIC_STREAM:5,5:"TYPE_NOTIFY_MULTI_AVATAR_PUBLIC_STREAM",TYPE_FEATURE_HAMLET_AVATAR_START:100,100:"TYPE_FEATURE_HAMLET_AVATAR_START",TYPE_FEATURE_HAMLET_AVATAR_END:101,101:"TYPE_FEATURE_HAMLET_AVATAR_END"}},741835:function(e,t,n){n.d(t,{Ue:function(){return _},Ul:function(){return d},mp:function(){return s}});var i=n(134761);class l{start(){this.startDate=Date.now()}getTotal(){return this.startDate?Math.ceil((Date.now()-this.startDate)/1e3):0}reset(){this.startDate=void 0}constructor(){(0,i._)(this,"startDate",void 0)}}let r=new l,o=new l,a=new l,u=new l,d=new l,s=new l,c=new l,v=new l,_=()=>{r.reset(),o.reset(),a.reset(),d.reset(),s.reset(),c.reset(),u.reset(),v.reset()}},189269:function(e,t,n){n.d(t,{F:function(){return a},V:function(){return o}});var i=n(520739),l=n(878389),r=n(942541);let o=e=>{if(null==e?void 0:e.multi_view_data){let{displays:t=[]}="string"==typeof e.multi_view_data?JSON.parse(e.multi_view_data):e.multi_view_data;if(t.some(e=>e.display_id===r.m))return!0}return!1},a=e=>{if(null==e?void 0:e.multi_view_data){let{displays:o=[],inputs:a=[]}="string"==typeof e.multi_view_data?JSON.parse(e.multi_view_data):e.multi_view_data,u=o.find(e=>e.display_id===r.m);if(u){var t,n;let{outputs:r=[]}=u,o=null===(t=r.find(e=>0===e.level))||void 0===t?void 0:t.id,d=null===(n=r.find(e=>1===e.level))||void 0===n?void 0:n.id,s=a.find(e=>e.id===o),c=a.find(e=>e.id===d);e.game_live_data=(0,l._)((0,i._)({},e.game_live_data||{}),{camera_clip_custom:c.rect,camera_hidden:c.visible?0:1,game_clip:s.rect,game_hidden:s.visible?0:1})}}}},899925:function(e,t,n){n.d(t,{Y:function(){return r},s:function(){return o}});let i=e=>{var t;return null===(t=document)||void 0===t?void 0:t.querySelector(e)},l=(e,t,n,i)=>{e.style.setProperty(t,n,i?"important":"")},r=e=>{let t=i("#chatroom");if(!t||!((null==t?void 0:t.offsetWidth)<300))t&&(null==e||e({height:null==t?void 0:t.offsetHeight,width:null==t?void 0:t.offsetWidth,isHideCamera:(null==t?void 0:t.offsetHeight)<600}))},o=e=>{let t=i("#double_screen"),n=i("#chatroom");n&&t&&l(t,"height",e?`${(null==n?void 0:n.offsetWidth)/639*360}px`:`${null==n?void 0:n.offsetWidth}px`,!0)}},166767:function(e,t,n){n.d(t,{M0:function(){return r},SA:function(){return u},tq:function(){return o},zO:function(){return a}}),n(284961),n(826893),n(250440),n(954372);var i=n(567754),l=n(782442);let r=e=>[1,2,3,4].includes(e),o=e=>(!e&&"undefined"!=typeof window&&(e=window.navigator.userAgent),/android|ip(ad|hone|od)|symbianos|windows\s(ce|phone)/i.test(null!=e?e:"")),a=(e,t)=>t&&-1!==t.indexOf("https://live.douyin.com")?-1===t.indexOf("?")?`${t}?${(0,i.stringify)(e)}`:`${t}&${(0,i.stringify)(e)}`:t,u=()=>{try{let{prefetchRoomId:e,prefetchStream:t}=l.Le.getConfig(l.gI.FirstPreviewData)||{};t&&(t.getReader().cancel(),l.Le.setConfig(l.gI.FirstPreviewData,{}))}catch(e){}}},819542:function(e,t,n){n.d(t,{QX:function(){return o},WY:function(){return u},b0:function(){return d},b7:function(){return a}});var i=n(396169),l=n(399796),r=n(35730);let o=e=>{localStorage.setItem("webcast_local_quality",e),document.cookie=(0,i.serialize)("webcast_local_quality",localStorage.getItem("webcast_local_quality"),{domain:".douyin.com",path:"/"})},a=e=>{document.cookie=(0,i.serialize)("webcast_leading_last_show_time",e,{domain:".douyin.com",path:"/"})},u=()=>{let e=l.Q.originGetItem(r.CookieKeys.WebcastLeadingTotalShowTimes);document.cookie=(0,i.serialize)("webcast_leading_total_show_times",Number(e)+1,{domain:".douyin.com",path:"/"})},d=()=>{document.cookie=(0,i.serialize)("webcast_leading_total_show_times",0,{domain:".douyin.com",path:"/"})}},671428:function(e,t,n){n.d(t,{Sv:function(){return s},T1:function(){return c},n$:function(){return v},rC:function(){return _},w:function(){return f}});var i=n(520739),l=n(878389);n(927234);var r=n(529211),o=n(306537),a=n(399796),u=n(35730),d=n(519055);function s(){var e,t;if(d.s)return 0;let n=localStorage.getItem((0,o.DS)()?r.YN:r.xQ);if(!!(n=null!==(t=null===(e=(a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{}).volume)||void 0===e?void 0:e.toString())&&void 0!==t?t:n))return Number(n)}function c(){var e;return null!==(e=s())&&void 0!==e?e:.6}function v(e){let t=a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{};return a.Q.setItem(u.CookieKeys.VolumeInfo,(0,l._)((0,i._)({},t),{volume:e})),localStorage.setItem((0,o.DS)()?r.YN:r.xQ,e.toString())}function _(){var e;if(d.s)return!1;let t="1"===localStorage.getItem((0,o.DS)()?r.FR:r.mI);return t=null!==(e=(a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{}).isMute)&&void 0!==e?e:t}function f(e){let t=a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{};return a.Q.setItem(u.CookieKeys.VolumeInfo,(0,l._)((0,i._)({},t),{isMute:e,isUserMute:e})),localStorage.setItem((0,o.DS)()?r.FR:r.mI,e?"1":"0")}},159223:function(e,t,n){n.d(t,{b:function(){return m}});var i=n(520739);n(777180),n(897860);var l=n(563097),r=n(88648),o=n(734123),a=n(782442),u=n(860684),d=n(894416),s=n(205457),c=n(531471);function v(e){let{click_method:t,player:n}=e;null==n||n.emit(o.Events.USER_ACTION,{action:"change_volume",logData:{click_method:t,is_mute:n.muted?"1":"0"},props:{volume:{to:n.volume}}})}let _=(e,t)=>{var n,i,l,r,o,a;if(!e)return;if(null===(l=e.plugins)||void 0===l||null===(i=l.volume)||void 0===i||null===(n=i.focus)||void 0===n||n.call(i),null===(a=e.plugins)||void 0===a||null===(o=a.volume)||void 0===o||null===(r=o.unFocus)||void 0===r||r.call(o,1e3,!0,null),e.muted){e.muted=!1,e.volume=Math.max(t/100,0),v({click_method:"wheel",player:e});return}let u=e.volume+t/100;u=Math.max(u=Math.min(u,1),0),e.volume=Number(u.toFixed(2)),0===u&&(e.muted=!0),v({click_method:"wheel",player:e})},f=e=>{let{isActive:t,currentPlayer:n}=e,i=(0,u.n)(),l=n||i;(0,r.useEffect)(()=>{let e=a.Le.getConfig(a.gI.AbtestData);if((null==l?void 0:l.getPlugin)&&t&&(null==e?void 0:e.useCache)!==1){let e=l.getPlugin("volume");if(!e)return;let t=e.root,n=e=>{let t=(0,c.G1)();e.stopPropagation(),e.preventDefault();let n=(t?1:-1)*parseInt(String(e.deltaY/20),10);0!==n&&_(l,n)},i=()=>{a.Le.setConfig(a.gI.DisableNextPre,!0)},r=()=>{a.Le.setConfig(a.gI.DisableNextPre,!1)};return t.addEventListener("wheel",n),t.addEventListener("mouseover",i),t.addEventListener("mouseout",r),()=>{t.removeEventListener("wheel",n),t.removeEventListener("mouseover",i),t.removeEventListener("mouseout",r)}}},[l,t]);let o=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{let e=a.Le.getConfig(a.gI.AbtestData);if(l&&l.on&&t&&(null==e?void 0:e.useCache)===1){let e=e=>{e.preventDefault(),e.stopPropagation();let t=((0,c.G1)()?1:-1)*parseInt(String(e.deltaY/20),10);0!==t&&_(l,t)},t=t=>{if("volume"===t.pluginName){var n;a.Le.setConfig(a.gI.DisableNextPre,!0),(null==l?void 0:null===(n=l.getPlugin("volume"))||void 0===n?void 0:n.root)&&(l.getPlugin("volume").root.addEventListener("wheel",e),o.current=!0)}},n=t=>{if("volume"===t.pluginName){var n;a.Le.setConfig(a.gI.DisableNextPre,!1),(null==l?void 0:null===(n=l.getPlugin("volume"))||void 0===n?void 0:n.root)&&(l.getPlugin("volume").root.removeEventListener("wheel",e),o.current=!1)}};return l.on("icon_mouseenter",t),l.on("icon_mouseleave",n),()=>{if(l.off("icon_mouseenter",t),l.off("icon_mouseleave",n),o.current){var i,r;null==l||null===(r=l.getPlugin("volume"))||void 0===r||null===(i=r.root)||void 0===i||i.removeEventListener("wheel",e),o.current=!1}}}},[l,t]),(0,r.useEffect)(()=>()=>{a.Le.setConfig(a.gI.DisableNextPre,!1)},[]),null},m=e=>{let t=(0,d.N)();return(0,l.jsx)(s.k,{componentName:"VolumePlugin",Slardar:t,children:(0,l.jsx)(f,(0,i._)({},e))})}}}]);