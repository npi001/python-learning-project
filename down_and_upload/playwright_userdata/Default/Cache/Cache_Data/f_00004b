"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["97607"],{520200:function(e,i,t){t.d(i,{Ck:function(){return l},Ri:function(){return n},sF:function(){return r}});var o=t(926012);let n=[o.yP.AUDIO_1V8_STAGE,o.yP.AUDIO_GRID,o.yP.AUDIO_1V8,o.yP.MATE_CUSTOM,o.yP.AUDIO_DOUBLE_C],r=[o.yP.VIDEO_DYNAMIC,o.yP.VIDEO_1V6,o.yP.VIDEO_GRID,o.yP.VIDEO_1_V_8,o.yP.VIDEO_1_V_6,o.yP.VIDEO_1_V_3,o.yP.VIDEO_DYNAMIC_FLOAT,o.yP.VIDEO_T1_V_B8,o.yP.VIDEO_1V8,o.yP.VIDEO_2V4V4],l=[o.yP.VIDEO_1V6,o.yP.VIDEO_GRID,o.yP.VIDEO_6V6,o.yP.VIDEO_1_V_8,o.yP.VIDEO_DYNAMIC_FLOAT,o.yP.VIDEO_1_V_6,o.yP.VIDEO_1_V_3,o.yP.VIDEO_T1_V_B8,o.yP.VIDEO_1V8,o.yP.VIDEO_2V4V4]},435326:function(e,i,t){t.d(i,{_:function(){return n},m:function(){return o}});let o={HOT_LIVE:"/hot_live",HOME:"/",ERROR:"/error/:errorCode",LIVING:"/:webRid",DOUYIN_LIVING:"/live/:webRid",DOUYIN_RECOMMEND_LIVING:"/root/live/:webRid",DOUYIN_FOLLOW_LIVING:"/follow/live/:webRid",LIVING_COMMENT:"/comment/:roomid",CATEGORY:"/category/:categoryId",CATEGORY_NEW:"/categorynew/:categoryId",IFRAME:"/iframe/:webRid",VIDEO_DOMAIN_IFRAME:"/live/iframe/:webRid"},n=[{path:o.CATEGORY,end:!0},{path:o.HOT_LIVE,end:!0},{path:o.HOME,end:!0},{path:o.ERROR,end:!0},{path:o.IFRAME,end:!0},{path:o.VIDEO_DOMAIN_IFRAME,end:!0},{path:o.LIVING,end:!0},{path:o.LIVING_COMMENT,end:!0},{path:o.DOUYIN_LIVING,end:!0},{path:o.DOUYIN_FOLLOW_LIVING,end:!0},{path:o.DOUYIN_RECOMMEND_LIVING,end:!0}]},491701:function(e,i,t){t.d(i,{j5:function(){return s},lC:function(){return l},oh:function(){return n},pv:function(){return a},xD:function(){return r}});var o=t(926012);let n={[o.yP.VIDEO_1V6]:{frameRate:30,width:256,height:256,maxKbps:800},[o.yP.VIDEO_1V8]:{frameRate:30,width:256,height:256,maxKbps:800},[o.yP.VIDEO_GRID]:{frameRate:30,width:240,height:240,maxKbps:800},[o.yP.VIDEO_6V6]:{frameRate:30,width:240,height:320,maxKbps:800}},r={2:{frameRate:15,width:360,height:640,maxKbps:800},3:{frameRate:15,width:360,height:320,maxKbps:500},4:{frameRate:15,width:360,height:320,maxKbps:500},5:{frameRate:15,width:240,height:320,maxKbps:400},6:{frameRate:15,width:240,height:320,maxKbps:400},7:{frameRate:15,width:240,height:240,maxKbps:280},8:{frameRate:15,width:240,height:240,maxKbps:280},9:{frameRate:15,width:240,height:240,maxKbps:280}},l={[o.yP.VIDEO_1V6]:{frameRate:30,width:256,height:256},[o.yP.VIDEO_GRID]:{frameRate:30,width:240,height:240},[o.yP.VIDEO_6V6]:{frameRate:30,width:240,height:320},[o.yP.VIDEO_DYNAMIC_FLOAT]:{frameRate:30,width:256,height:256}},a={2:{width:360,height:640,frameRate:30},3:{width:360,height:320,frameRate:30},4:{width:360,height:320,frameRate:30},5:{width:240,height:320,frameRate:30},6:{width:240,height:320,frameRate:30},7:{width:240,height:240,frameRate:30},8:{width:240,height:240,frameRate:30},9:{width:240,height:240,frameRate:30}};var s={MICROPHONE:0,0:"MICROPHONE",CAMERA:1,1:"CAMERA"}},408218:function(e,i,t){t.d(i,{EE:function(){return u},MP:function(){return s},hg:function(){return d}});var o=t(520739),n=t(878389);t(950331);var r=t(645260),l=t.n(r),a=t(20568);let s=(e,i)=>{var t,o;if(!(null==e?void 0:null===(t=e.room)||void 0===t?void 0:t.stream_url)&&!i)return{};let n=(null==i?void 0:i.pull_datas)||((null==e?void 0:null===(o=e.room)||void 0===o?void 0:o.stream_url)?e.room.stream_url.pull_datas:{})||{},r=Object.keys(n)[0];return n[r]},d=e=>{var i;let t=l()(e,"room.stream_url"),o=(null===(i=l()(e,"web_stream_url",null))||void 0===i?void 0:i.live_core_sdk_data)?l()(e,"web_stream_url"):t,n=l()(o,"live_core_sdk_data.pull_data",{}),r=l()(t,"live_core_sdk_data.pull_data",{}),a=s(e),d=s(e,o),u=(null==n?void 0:n.stream_data)?JSON.parse(n.stream_data):null,c=(null==r?void 0:r.stream_data)?JSON.parse(r.stream_data):null,h=(null==a?void 0:a.stream_data)?JSON.parse(a.stream_data):null,_=(null==d?void 0:d.stream_data)?JSON.parse(d.stream_data):null;return{H265_streamData:{options:l()(n,"options",null),common:l()(u,"common",null),stream:l()(u,"data",null)},H264_streamData:{options:l()(r,"options",null),common:l()(c,"common",null),stream:l()(c,"data",null)},UGC_streamData:{options:l()(a,"options",null),common:l()(h,"common",null),stream:l()(h,"data",null)},H265_UGC_streamData:{options:l()(d,"options",null),common:l()(_,"common",null),stream:l()(_,"data",null)}}},u=e=>{var i,t,r,s;let d=l()(e,"room",{}),u=l()(d,"episode_extra",{}),c=l()(u,"camera_infos",[]),h={id:null==d?void 0:d.id_str,title:(null==u?void 0:u.main_camera_title)||(null==u?void 0:u.title),cover:(null==u?void 0:u.main_camera_cover)||(null==u?void 0:u.cover),isMainCamera:!0,h264Stream:null==d?void 0:d.stream_url,h265Stream:null==e?void 0:e.web_stream_url,matchId:null==u?void 0:null===(i=u.main_camera_match_info)||void 0===i?void 0:i.match_id_str,cameraId:null==u?void 0:u.episode_id_str,groupId:null==u?void 0:u.group_id_str,hasMatchStats:(null==u?void 0:null===(r=u.main_camera_match_info)||void 0===r?void 0:null===(t=r.event_ids)||void 0===t?void 0:t.length)===1},_=null==c?void 0:null===(s=c.map)||void 0===s?void 0:s.call(c,i=>{var t,r,s,d,u,c;let{paid_live_type:h}=i,_=null===(s=e.room)||void 0===s?void 0:null===(r=s.episode_extra)||void 0===r?void 0:null===(t=r.privilege_info_v2)||void 0===t?void 0:t[a.xc.EQUITABLE_CAMERA_POSITION],m=h===a.xc.EQUITABLE_CAMERA_POSITION?{max_duration:l()(_,"paid_live_info.max_duration",180),paid_live_base_info:{duration:l()(_,"paid_live_info.duration",0),view_right:l()(_,"paid_live_info.view_right",0),ticket_session_id_str:l()(_,"entity_id_str")},paid_live_biz_extra:{prepay_cashier_jump_url:l()(_,"privilege_url.prepay_cashier_jump_url","")}}:null==i?void 0:i.camera_paid_info;return(0,n._)((0,o._)({},i),{camera_paid_info:m,id:null==i?void 0:i.camera_id_str,title:null==i?void 0:i.title,cover:null==i?void 0:i.cover,isMainCamera:!1,h264Stream:null==i?void 0:i.stream_info,h265Stream:{},matchId:null==i?void 0:null===(d=i.camera_match_info)||void 0===d?void 0:d.match_id_str,cameraId:null==i?void 0:i.camera_id_str,groupId:null==i?void 0:i.group_id_str,hasMatchStats:(null==i?void 0:null===(c=i.camera_match_info)||void 0===c?void 0:null===(u=c.event_ids)||void 0===u?void 0:u.length)===1})});return _.unshift(h),{mainCameraInfo:h,cameraInfoList:_}}},429793:function(e,i,t){t.d(i,{EF:function(){return a},PQ:function(){return l},k2:function(){return o},vK:function(){return r},ve:function(){return n}});let o=()=>{var e;return null!==(e=Array.from(document.querySelectorAll("#playerPopup")).find(e=>e.getBoundingClientRect().height>0))&&void 0!==e?e:null},n=()=>{var e;return null!==(e=Array.from(document.querySelectorAll('[data-e2e="living-container"]')).find(e=>{var i;return(null===(i=e.getBoundingClientRect())||void 0===i?void 0:i.height)>0}))&&void 0!==e?e:null},r=()=>{var e;return null!==(e=Array.from(document.querySelectorAll("#comment-textarea")).find(e=>{var i;return(null===(i=e.getBoundingClientRect())||void 0===i?void 0:i.height)>0}))&&void 0!==e?e:null},l=()=>{var e;return null!==(e=Array.from(document.querySelectorAll("#user_control_panel")).find(e=>e.getBoundingClientRect().height>0))&&void 0!==e?e:null},a=function(){var e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null!==(e=Array.from(document.querySelectorAll(`#${i}`)).find(e=>e.getBoundingClientRect().height>0))&&void 0!==e?e:null}},452534:function(e,i,t){t.d(i,{I:function(){return _}}),t("675373");var o=t("520739"),n=t("878389");t("413806"),t("826893"),t("284961"),t("429532"),t("338172"),t("882732"),t("544943"),t("874386"),t("779788");var r=t("567754"),l=t("519055"),a=t("377092"),s=t("688710");let d=e=>e.split("?")[0].replace(/\//g,"_"),u=(e,i)=>{let t=(0,r.parse)(i.split("?")[1]),n=i.split("?")[0],d=(0,o._)({aid:6383,device_platform:"web"},t);!l.s&&Object.assign(d,(0,a.f)());let u=(0,r.stringify)(d);return n.startsWith("http")?`${n}?${u}`:l.s&&!s.r8?`consul:${e}${n}?${u}`:`${(0,s.iE)().API_DOMAIN+n}?${u}`},c={"Content-type":"application/x-www-form-urlencoded"},h=async function(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"webcast.web.api",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=u(r,i);if(null==e||e.logger.info("request path:",a),!e)return window.fetch(a,(0,n._)((0,o._)({credentials:"same-origin"},t),{headers:(0,o._)({},c,t.headers)}));{var s,h,_,m,v,f;let r=(0,o._)((0,n._)((0,o._)({handleMethod:d(i)},t),{metrics:e.metrics,headers:(0,o._)((0,n._)((0,o._)({},null!==(s=e.app.config.fetch.headers)&&void 0!==s?s:{}),{Cookie:e.headers.cookie,"user-agent":e.headers["user-agent"],"x-use-ppe":null!==(h=e.headers["x-use-ppe"])&&void 0!==h?h:"","x-use-boe":null!==(_=e.headers["x-use-boe"])&&void 0!==_?_:"","x-tt-env":null!==(m=e.headers["x-tt-env"])&&void 0!==m?m:"","X-Real-IP":e.headers["x-real-ip"],"X-Forwarded-For":e.header["x-forwarded-for"]}),c,t.headers)}),null!=l?l:{});e.headers["x-tt-stress"]&&(r.headers["x-tt-stress"]=e.headers["x-tt-stress"]);try{e.measureTime("fetch");let i=await e.fetch(a,r);return e.measureTimeEnd("fetch",{url:new URL(a).pathname,status:i.status,retry:0,error:0}),i}catch(t){null===(f=e.metrics)||void 0===f||null===(v=f.emitCounter)||void 0===v||v.call(f,"isomorphic_request.retry",1,e.app.config.psm,{url:a});let i=await e.fetch(a,r).catch(i=>{throw e.measureTimeEnd("fetch",{url:new URL(a).pathname,status:-1,retry:1,error:1}),i});return e.measureTimeEnd("fetch",{url:new URL(a).pathname,status:i.status,retry:1,error:0}),i}}};async function _(e,i,t){var o,n,l,a,s,d,u,c;let _=await h(t,`/webcast/web/conf/skin/?${(0,r.stringify)({room_id:e,anchor_id:i})}`,{method:"GET"}),m=_.headers.get("x-tt-logid");if(200!==_.status)return null==t||null===(o=t.logger)||void 0===o||o.error("[getTheme] not 200",m),null==t||null===(l=t.metrics)||void 0===l||null===(n=l.emitCounter)||void 0===n||n.call(l,"get_theme_error",1,""),{};let{data:v={}}=null!==(a=await _.json())&&void 0!==a?a:{};try{return JSON.parse(null==v?void 0:null===(s=v.skin)||void 0===s?void 0:s.conf)}catch(e){return null==t||null===(d=t.logger)||void 0===d||d.error("[getTheme]",e,m),null==t||null===(c=t.metrics)||void 0===c||null===(u=c.emitCounter)||void 0===u||u.call(c,"parse_theme_error",1,""),{}}}},930041:function(e,i,t){t.d(i,{q:function(){return o}});let o="gift-icon-id"},657304:function(e,i,t){t.d(i,{CL:function(){return l},MA:function(){return r},OL:function(){return s}});var o=t(235755),n=t(388862),r={BasicPlayer:"living-basic-player",Background:"living-background"};let l="living-pip-id",a=()=>(0,o.IT)(l),s=()=>a()||(0,n.DJ)()?1:0},469750:function(e,i,t){t.d(i,{b:function(){return s}});var o=t(563097),n=t(88648),r=t(697311),l=t(850159),a=t(263893);function s(){let{isLivingPip:e}=(0,r.ds)(),{singletonStore:{player:i}}=(0,l.Z)(),t=(0,n.useRef)(null),s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{try{if(!i)return()=>{};let e=0,o=()=>{cancelAnimationFrame(e)},n=()=>{var r;o();let l=null===(r=i.video)||void 0===r?void 0:r.flyVideo,a=s.current;if(!l||!a||!t.current)return;let{videoWidth:d,videoHeight:u}=l,c=a.getContext("2d");if(a.width=d,a.height=u,c.drawImage(l,0,0,a.width,a.height),!i.paused)e=requestAnimationFrame(n)};return i.on("pause",o),i.on("play",n),n(),()=>{o(),i.off("play",n),i.off("pause",o)}}catch(e){}},[e,i]),(0,o.jsx)("div",{ref:t,className:a.default.doubleScreenVideoWrap,children:(0,o.jsx)("canvas",{ref:s})})}},697311:function(e,i,t){t.d(i,{GZ:function(){return N},ng:function(){return D},ds:function(){return V}});var o=t("520739"),n=t("878389");t("874386"),t("250440");var r=t("563097"),l=t("88648"),a=t("451047"),s=t("235755"),d=t("999108"),u=t("694872");let c=(0,l.forwardRef)((e,i)=>(0,r.jsx)("svg",(0,n._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,r.jsx)("path",{d:"M22.707 10.707a1 1 0 0 0-1.414-1.414L16 14.586l-5.293-5.293a1 1 0 0 0-1.414 1.414L14.586 16l-5.293 5.293a1 1 0 1 0 1.414 1.414L16 17.414l5.293 5.293a1 1 0 0 0 1.414-1.414L17.414 16l5.293-5.293z",fill:"#fff"})})));var h=t("850159"),_=t("782563"),m=t("572076"),v=t("797973"),f=t("434739"),p=t("297517"),g=t("983096"),y=t("419631"),S=t.n(y);let A=e=>{let{video:i}=e;if(i instanceof HTMLVideoElement){let{clientHeight:e,clientWidth:t,videoHeight:o,videoWidth:n}=i,r=i.getBoundingClientRect().width-t>10?e/t:o/n;if(Math.abs(r-512/300)<Math.abs(r-.5859375))return{height:512,width:300}}return{width:512,height:300}},L=S()(()=>{let e=e=>{let{key:i,validRes:t=Boolean}=e,o=document[i];return{key:i,originFn:o,mergedFn:function(){for(var e,n,r=arguments.length,l=Array(r),a=0;a<r;a++)l[a]=arguments[a];let s=o.call(document,...l);try{let o=null===(n=window.documentPictureInPicture)||void 0===n?void 0:null===(e=n.window)||void 0===e?void 0:e.document;if(!o||t(s))return s;return o[i].call(o,...l)}catch(e){return s}}}};return[e({key:"getElementById"}),e({key:"querySelector"}),e({key:"querySelectorAll",validRes:e=>!!e.length}),e({key:"getElementsByName",validRes:e=>!!e.length}),e({key:"getElementsByClassName",validRes:e=>!!e.length}),e({key:"getElementsByTagName",validRes:e=>!!e.length})]});function I(e){L().forEach(i=>{let{key:t,mergedFn:o,originFn:n}=i;document[t]=e?o:n})}var P=t("309931"),k=t("713097"),M=t.n(k),E=t("897835"),C=t("754089"),b=t("657304"),T=t("859231"),w=t("469750"),O=t("781659"),U=t("7772");let V=()=>{let{pipInfo:e,closePipWindow:i,openPipWindow:t}=(0,a.fl)(),{singletonStore:{player:r}}=(0,h.Z)(),l=(null==e?void 0:e.pipId)===b.CL,s=(0,v.Z)(()=>t((0,n._)((0,o._)({},A(r)),{pipId:b.CL})).then(e=>{var i;let t=null==e?void 0:null===(i=e.pipInfo)||void 0===i?void 0:i.window;if(!!t)"true"===document.documentElement.getAttribute("dark")&&(t.document.documentElement.setAttribute("dark","true"),t.document.body.setAttribute("theme-mode","dark"))})),d=(0,v.Z)(e=>{if(!!l)e&&window.focus(),(0,_.DT)()&&e&&m.invoke("pipParentWinShow"),i(b.CL)});return{isLivingPip:l,pipWin:l?e.window:null,closeLivingPip:d,openLivingPip:s}},D=()=>{let{isSupported:e}=(0,a.fl)();return(0,_.DT)(),e},R=(0,l.memo)(e=>{let{isDoubleScreen:i,className:t}=e,[o,n]=(0,l.useState)(!1),[a,_]=(0,l.useState)(!1),m=(0,l.useRef)(null),y=(0,l.useRef)(null),S=(0,l.useRef)(!1),{isLivingPip:A,closeLivingPip:L,pipWin:k}=V(),{innerFeedOn:D}=(0,U.P)(),{singletonStore:{player:R,message:N},eventStore:{playerEvent:G},linkmicStore:{linkMicLayout:B},pkStore:{pkStatus:F}}=(0,h.Z)(),x=(0,v.Z)(()=>{A&&n((0,s.nz)())});(0,f.Z)("resize",()=>x(),{target:k}),(0,f.Z)("pagehide",()=>S.current=!(null==R?void 0:R.paused),{target:k}),(0,p.Z)(()=>x(),A?50:void 0),(0,l.useEffect)(()=>N.on("MemberMessage",e=>{(null==e?void 0:e.some(e=>{var i;return[T.WU.KICK_OUT,T.WU.BLOCK].includes(Number(null==e?void 0:null===(i=e.payload)||void 0===i?void 0:i.action))}))&&L(!1)}),[N,L]),(0,l.useEffect)(()=>(I(A),()=>{I(!1)}),[A]);let K=(0,l.useMemo)(()=>void 0===B&&!F&&!0,[B,F]),H=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if(!!R)try{var e,i,t,o,n,r,l,a;let s=()=>{let e=requestAnimationFrame(()=>{var e,i;return null===(i=R.plugins.dynamicbg)||void 0===i?void 0:null===(e=i.renderOnce)||void 0===e?void 0:e.call(i)});return()=>{cancelAnimationFrame(e)}};if(A){;return H.current=!0,null===(e=R.plugins.danmu)||void 0===e||e.hide(),null===(i=R.plugins.rotate)||void 0===i||i.hide(),null===(t=R.plugins.fullscreen)||void 0===t||t.hide(),R.paused&&(null===(o=R.config)||void 0===o?void 0:o.url)&&R.play(),s()}if(H.current){;return H.current=!1,null===(n=R.plugins.danmu)||void 0===n||n.show(),K&&(null===(r=R.plugins.rotate)||void 0===r||r.show()),null===(l=R.plugins.fullscreen)||void 0===l||l.show(),S.current&&R.paused&&(null===(a=R.config)||void 0===a?void 0:a.url)&&R.play(),s()}}catch(e){}},[A,R,K]),(0,g.Z)(()=>{if(D&&R){var e,i,t,o,n,r,l;H.current=!1,null===(i=R.plugins)||void 0===i||null===(e=i.danmu)||void 0===e||e.show(),K&&(null===(o=R.plugins)||void 0===o||null===(t=o.rotate)||void 0===t||t.show()),null===(r=R.plugins)||void 0===r||null===(n=r.fullscreen)||void 0===n||n.show(),R.paused&&(null===(l=R.config)||void 0===l?void 0:l.url)&&R.play()}L()});let j=()=>L(!0);return(0,C.Z)(E.Hq,j),(0,C.Z)(E.qo,j),(0,C.Z)(E.fC,j),(0,C.Z)(E.Fg,j),(0,r.jsx)(d.F6,{pipId:b.CL,children:(0,r.jsxs)("div",{className:M()(O.default.wrap,t),ref:m,onMouseOver:()=>_(!1),onMouseLeave:e=>{if(!y.current||!e)return;let{pageX:i,pageY:t}=e,{left:o,top:n,width:r,height:l}=y.current.getBoundingClientRect();i>=o&&i<=o+r&&t>=n&&t<=n+l&&_(!0)},children:[(null==R?void 0:R.topBar)&&!o?(0,P.createPortal)((0,r.jsxs)("div",{className:O.default.headerIcons,children:[(0,r.jsx)("div",{className:O.default.dragBar,ref:y}),(0,r.jsx)("span",{className:O.default.headerIcon,onClick:()=>{L(!0),G.livesdkMiniWindowExit({click_position:"mini_window_exit"})},children:(0,r.jsx)(u.Z,{})}),(0,r.jsx)("span",{className:O.default.headerIcon,onClick:()=>{L(!1),G.livesdkMiniWindowExit({click_position:"mini_window_exit"})},children:(0,r.jsx)(c,{})})]}),R.topBar):null,(0,r.jsxs)("div",{className:O.default.content,children:[(0,r.jsx)(d.pu,{pipAnchorId:b.MA.BasicPlayer,className:a?O.default.forceShowControl:""}),i&&(0,r.jsx)(w.b,{}),(0,r.jsx)(d.pu,{pipAnchorId:b.MA.Background,className:M()(O.default.background,"livingPipBackground")})]})]})})}),N=e=>D()?(0,r.jsx)(R,(0,o._)({},e)):null},615364:function(e,i,t){var o=t(563097),n=t(713097),r=t.n(n),l=t(394561),a=t(473677),s=t(477667),d=t(88648),u=t(682);i.Z=e=>{let{children:i,title:t,visible:n,className:c,onCancel:h,closeable:_=!0}=e,m=d.useCallback(()=>{h&&h(!1)},[h]);return n?(0,o.jsx)(l.T6,{className:r()(u.default.mask,c),children:(0,o.jsxs)("div",{className:u.default.modalContainer,children:[_&&(0,o.jsx)("div",{className:u.default.close,onClick:m,children:(0,o.jsx)(a.Z,{width:36,height:36,src:s.Z,color:"#A9AAB7"})}),t&&(0,o.jsx)("div",{className:u.default.title,children:t}),(0,o.jsx)("div",{className:u.default.content,children:i})]})}):null}},350532:function(e,i,t){t.d(i,{gE:function(){return R},NM:function(){return G},Z4:function(){return K},yG:function(){return U},zS:function(){return O},L4:function(){return N},BC:function(){return F},sk:function(){return x},B7:function(){return H}}),t("874386");var o=t("563097"),n=t("88648"),r=t("737074"),l=t("158041"),a=t("668974"),s=t("398749"),d=t("96008"),u=t.n(d),c=t("797973"),h=t("38555"),_=t("90072"),m=t("850159"),v=t("520739"),f=t("309931"),p=t("930041"),g=t("697311"),y=t("713097"),S=t.n(y),A=t("538346"),L=t("429793");function I(){var e,i;let{singletonStore:{message:t},eventStore:{pkEvent:r}}=(0,m.Z)(),{pipWin:l}=(0,g.ds)(),a=(0,n.useRef)(u()),s=n.useRef(null),[d,c]=(0,n.useState)(null),h=G(),_=null==d?void 0:null===(i=d.animation)||void 0===i?void 0:null===(e=i.url_list)||void 0===e?void 0:e[0],y=(null==d?void 0:d.status)!==1;return(0,n.useEffect)(()=>{if(!!h)return null==t?void 0:t.on("BattleDrawPropMessage",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{payload:i}=e[0];i&&c(i)})},[t,h]),(0,n.useEffect)(()=>{var e;if(!_)return;let i=null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect(),t=(null==l?void 0:l.document)||document,n=t===document?(0,L.EF)(p.q):t.getElementById(p.q),h=y?i:(null==n?void 0:n.getBoundingClientRect())||i;if(!h||!i)return;let m=t.createElement("div");t.body.appendChild(m);let g=()=>{try{var e;null===(e=m.parentElement)||void 0===e||e.removeChild(m),(0,f.unmountComponentAtNode)(m),c(null),a.current=u()}catch(e){}};return a.current=g,(0,f.render)((0,o.jsx)("div",{className:S()(A.default.propDraw,(!!(null==l?void 0:l.document)||y)&&A.default.propDrawFail),style:{"--originx":`${i.x+i.width/2}px`,"--originy":`${i.y+i.height/2}px`,"--targetx":`${h.x+h.width/2}px`,"--targety":`${h.y+h.height/2-(h!==i?18:0)}px`},onAnimationEnd:()=>{g()},children:(0,o.jsx)("img",{src:_})}),m),window.collectEvent("livesdk_connection_get_buffer_card_result_show",(0,v._)({get_type:(null==d?void 0:d.reason)===1?"mvp":"high_money",is_get_buffer_card:Number(!y),prop_id:null==d?void 0:d.prop_id},null==r?void 0:r.getPKPropCardCommonParams())),()=>{g()}},[_,y]),(0,n.useEffect)(()=>()=>{a.current()},[]),(0,o.jsx)("div",{className:A.default.propDrawAnchor,ref:s})}var P=t("725215"),k=t.p+"media/fogBothBar.07d92082d098c2bd.webp",M=t.p+"media/fogRightBar.5b1800de8c8d5b6a.webp",E=t.p+"media/leftFreezeBar.11e1c2e40e020858.webp",C=t.p+"media/rightFreezeBar.7ffcfffbdaaa6946.webp";let b={enablePropCard:!1,anchorEffectInfoMap:{},inEffectAnchorEffectInfoMap:{},openPropCardDesc:u(),openPropCardRules:u(),setFakePropInfo:u(),updateAnchorEffectInfoMapByJSON:u()},T=(0,l.kr)(b),w=e=>{let i=(0,s.dP)(e),[t,o]=(0,n.useState)({}),r=(0,c.Z)(()=>{o(i=>(0,s.PG)(e,i,!0))});return(0,h.Z)(()=>{r()},i?void 0:1e3,{immediate:!0}),(0,n.useEffect)(()=>{r()},[e]),t},O=(0,n.memo)((0,P.Pi)(e=>{let{children:i}=e,{singletonStore:{message:t},pkStore:{pkId:l,pkCountDown:a,isInPK:d}}=(0,m.Z)(),[u,h]=(0,n.useState)(null),[_,v]=(0,n.useState)({}),f=(0,c.Z)(e=>{if(!e){v({});return}v((0,s.x$)(e))});(0,n.useEffect)(()=>{d||v({})},[d]),(0,n.useEffect)(()=>{null==t||t.on("BattleEffectContainerMessage",e=>{var i,t;let o=null===(t=e.find(e=>{var i;return(null==e?void 0:null===(i=e.payload)||void 0===i?void 0:i.battle_id)===l}))||void 0===t?void 0:null===(i=t.payload)||void 0===i?void 0:i.battle_effect_info;o&&f(o)}),null==t||t.on("BattleUpdatePropCardTaskMessage",e=>{var i,t;let o=null===(t=e.find(e=>{var i;return(null==e?void 0:null===(i=e.payload)||void 0===i?void 0:i.battle_id)===l}))||void 0===t?void 0:null===(i=t.payload)||void 0===i?void 0:i.battle_effect_info;o&&f(o)})},[t,l]),(0,n.useEffect)(()=>{!a&&v({})},[!a]);let p=(0,s.dP)(_);(0,n.useEffect)(()=>{if(p)return;let e=r.Z.setIntervalWarp(()=>{v(e=>(0,s.PG)(e,e))});return()=>{r.Z.clearIntervalWarp(e)}},[p]);let g=d?_:{},y=w(g);return(0,o.jsxs)(T.Provider,{value:{anchorEffectInfoMap:g,inEffectAnchorEffectInfoMap:y,openPropCardDesc:()=>{},openPropCardRules:()=>{},fakePropInfo:u,setFakePropInfo:h,updateAnchorEffectInfoMapByJSON:f,enablePropCard:!0},children:[i,(0,o.jsx)(I,{})]})})),U=(0,a.Z)(T),V=()=>U(e=>e.anchorEffectInfoMap),D=()=>U(e=>e.inEffectAnchorEffectInfoMap),R=e=>{let i=D();return(0,n.useMemo)(()=>{var t,o;return(null==i?void 0:null===(o=i[e])||void 0===o?void 0:null===(t=o[s.du.FreezeBuff])||void 0===t?void 0:t.length)>0},[e,i])},N=e=>U(i=>(0,s.PL)(e,i.anchorEffectInfoMap)),G=()=>U(e=>e.enablePropCard),B=e=>{var i;let t=D();return((null==t?void 0:null===(i=t[e])||void 0===i?void 0:i[s.du.Fog])||[]).length>0},F=()=>{let e=D();return(0,n.useMemo)(()=>(0,s.To)(e),[e])},x=e=>{let i=B(e);return{isAnchorInFog:i,isSomeAnchorInSuperFogEffect:!!F()}},K=e=>{let{leftAnchorIdList:i=[],rightAnchorIdList:t=[]}=e,o=V(),r=D(),l=U(e=>e.fakePropInfo),{fakeEffect:a,fakeEffectIsSuperFog:d}=(0,n.useMemo)(()=>{let e={fakeEffect:void 0,fakeEffectIsSuperFog:!1},{type:t,sendTime:n}=l||{};if(!t)return e;for(let e of i){var r,a;let i=null==o?void 0:null===(a=o[e])||void 0===a?void 0:null===(r=a[t])||void 0===r?void 0:r.find(e=>Number(null==e?void 0:e.insert_time)>=n);if(i)return{fakeEffect:i,fakeEffectIsSuperFog:(null==i?void 0:i.is_super_prop)&&(0,s.q7)(null==i?void 0:i.type)}}return e},[o,l,i]),u=F(),c=d?a:u,h=!!c,{leftEffectInfo:_,rightEffectInfo:m,repeatedEffect:v}=(0,n.useMemo)(()=>{let e=e=>{if(!e||!(0,s.gQ)(e))return null;for(let n of i){var t,o;let i=null==r?void 0:null===(o=r[n])||void 0===o?void 0:null===(t=o[null==e?void 0:e.type])||void 0===t?void 0:t.find(i=>(null==i?void 0:i.insert_time)!==(null==e?void 0:e.insert_time));if(i)return i}},o=(()=>{for(let e of i){let{firstEffect:i}=(0,s.PL)(e,r);if(i)return i}})();if((!o||(0,s.q7)(null==o?void 0:o.type))&&c||d)return{leftEffectInfo:c,rightEffectInfo:c,repeatedEffect:e(c)};let n=a||o;return{leftEffectInfo:n,rightEffectInfo:(()=>{for(let o of t){var e,i;let t=null===(e=(0,s.Md)({anchorId:o,anchorEffectInfoMap:r,type:s.du.FreezeBuff}))||void 0===e?void 0:e[0];if(t)return t;let n=null===(i=(0,s.Md)({anchorId:o,anchorEffectInfoMap:r,type:1}))||void 0===i?void 0:i[0];if(n)return n}})(),repeatedEffect:n?e(n):null}},[r,i,t,c,a,d]),f=(0,s.FD)(_),p=(0,s.FD)(m),g=(0,s.FD)(v).barIcon,y=(0,s.q7)(null==_?void 0:_.type),S=(0,s.q7)(null==m?void 0:m.type),A=(0,s.W5)(null==_?void 0:_.type),L=(0,s.W5)(null==m?void 0:m.type),I=L?p.barIcon:f.barIcon,P=y||S||h,b=!_&&S,[T,w]=(0,n.useMemo)(()=>A&&L?[E,C]:A&&!L?[E,void 0]:!A&&L?[void 0,C]:y&&S?[k,k]:y&&!S?[null==f?void 0:f.barAuraIcon,void 0]:!_&&S?[void 0,M]:[null==f?void 0:f.barAuraIcon,void 0],[_,m,h]),O=!w&&p.barMiniIcon;return{leftEffectInfo:_,rightEffectInfo:m,needPkBarAlignCenter:P,needHideCenterIcon:b,centerIcon:I,leftAuraUrl:T,rightAuraUrl:w,rightMiniIcon:O,hideRightScore:(0,n.useMemo)(()=>h||t.some(e=>{var i;return null===(i=(0,s.Md)({anchorId:e,anchorEffectInfoMap:r,type:1}))||void 0===i?void 0:i.length}),[t,r,h]),hideLeftScore:h,isSomeAnchorInSuperFogEffect:h,repeatedCenterIcon:g}},H=e=>{let{anchorId:i,showSelfFrezze:t}=e,{firstEffect:o,effectList:r,anchorEffectMap:l}=N(i),{tipText:a,targetEndTime:d,count:u,value:c}=(0,n.useMemo)(()=>{var e,i,n,a,d,u;if(!o)return{tipText:null,targetEndTime:null};let c=null===(e=l[s.du.FreezeBuff])||void 0===e?void 0:e[0];if(c){let e=(null===(n=c.prop_card_task)||void 0===n?void 0:n.current_value_str)||(null===(a=c.prop_card_task)||void 0===a?void 0:a.current_value)||"0",i=null===(d=c.prop_card_task)||void 0===d?void 0:d.effect_num;return{tipText:t?"你的待解冻值":"定身",count:i,value:e,totalValue:(null===(u=c.prop_card_task)||void 0===u?void 0:u.total_value)||e}}let{name:h,type:_,is_super_prop:m}=o,v=Object.entries(l).some(e=>{let[i,t]=e;return Number(i)!==_&&(null==t?void 0:t.length)}),f=null===(i=l[_])||void 0===i?void 0:i.some(e=>e.is_super_prop!==m);if(!v&&!f)return{tipText:`${h}生效中`,targetEndTime:Math.max(...l[o.type].map(e=>Number(e.end_time))),count:null};let p=(0,s.hN)(r);return{tipText:`${p?"超级":""}道具卡生效中`,targetEndTime:Math.max(...r.map(e=>Number(e.end_time))),count:r.length}},[o,t,l,r]);return{tipText:a,count:u,countDown:Math.floor((0,_.Z)({targetDate:d?new Date(d):void 0})[0]/1e3),firstEffect:o,value:c,totalValue:c}}},180431:function(e,i,t){t.d(i,{R:function(){return A}});var o=t(520739),n=t(878389);t(675373),t(874386),t(250440);var r=t(88648),l=t(645260),a=t.n(l),s=t(770989),d=t(35730),u=t(388193),c=t(140085),h=t(408218),_=t(850159),m=t(31940),v=t(396938),f=t(399796),p=t(637005),g=t(93981),y=t(452534),S=t(58655);let A=e=>{var i;let{webRid:t,query:l,isPreEnterRoom:S}=e,A=s.a.useClientDetect(),L=(0,m.j)(),I=(0,_.Z)();null==I||null===(i=I.layoutStore)||void 0===i||i.setHint(location.hostname,location.pathname,A,!!l.hidehead),I.layoutStore.setHardCategoryTab(g.p.DISABLE),(0,r.useEffect)(()=>{let e=async()=>{var e,i,r,s,_,m,A,L,P,k,M,E,C,b,T,w,O,U,V,D,R,N,G,B,F,x,K,H,j,W,Y,Z,q,Q,z,$,J,X,ee,ei,et,eo,en,er,el,ea,es,ed;let eu;let ec=async()=>{var e,i,o,n,r;let l,s,d,c;let h=[];if(window.liveDetailDataAPI instanceof Promise){let e=window.liveDetailDataAPI;window.liveDetailDataAPI=void 0,h=await e}else h=await (0,v.Y)({webRid:t,isPreEnterRoom:S});let[_,m,f,p,g=[],A=[]]=h,{roomInfo:L,relevantRooms:I,logId:P}=_,k=null==L?void 0:L.roomId,M=null==L?void 0:null===(e=L.anchor)||void 0===e?void 0:e.id_str,E=(null==L?void 0:null===(n=L.room)||void 0===n?void 0:null===(o=n.others)||void 0===o?void 0:null===(i=o.web_skin)||void 0===i?void 0:i.enable_skin)?await (0,y.I)(k,M):void 0;_.relevantRooms=I.map(e=>(0,u.bj)(e,P));let C=a()(L,"room.episode_extra.season_id_str"),b=null==A?void 0:A.includes(C);return(r=c||(c={}))[r.TRYWATCH_LEAD=3]="TRYWATCH_LEAD",{rawRes:_,iframeConf:m,linkmicHeartConfig:f,qualitySettings:p,clatity_guide:3,themeConfig:E,isSpider:!1,isAsianGames:!1,isOlympicGame:b,defaultMoreLeague:l,defaultMatchStatsDetail:s,defaultTagMatchInfo:d}},{rawRes:eh,iframeConf:e_,linkmicHeartConfig:em,qualitySettings:ev,clatity_guide:ef,themeConfig:ep,isAsianGames:eg,isOlympicGame:ey,defaultMoreLeague:eS,defaultMatchStatsDetail:eA,defaultTagMatchInfo:eL}=await ec(),{roomInfo:eI,error:eP,status_code:ek,errorPageMessage:eM,logId:eE,errorPrompts:eC,relevantRooms:eb,isUseVVC:eT}=eh,ew={Digg:null==eI?void 0:null===(i=eI.room)||void 0===i?void 0:null===(e=i.room_auth)||void 0===e?void 0:e.Digg,SpecialStyle:null==eI?void 0:null===(s=eI.room)||void 0===s?void 0:null===(r=s.room_auth)||void 0===r?void 0:r.SpecialStyle};if(null==I||null===(m=I.roomStore)||void 0===m||null===(_=m.setIsAsianGames)||void 0===_||_.call(m,eg),null==I||null===(L=I.roomStore)||void 0===L||null===(A=L.setIsOlympicGame)||void 0===A||A.call(L,ey),I.roomStore&&a()(eI,"room.others.programme.enable_programme",!1)&&(I.roomStore.enableProgramme=!0),(null==eI?void 0:null===(M=eI.room)||void 0===M?void 0:null===(k=M.others)||void 0===k?void 0:null===(P=k.web_skin)||void 0===P?void 0:P.enable_skin)&&ep){I.layoutStore.rawThemeConfig=ep;let{force_enable_h265:e,hideCategory:i,showNavigation:t,hideFooter:o,forceTheme:n,immersive:r,banner:l,programme:a,appointment:s,transparentHeader:d,resource:u,navigationSelected:c,hideRelevantRoom:h,programmeFill:_,disableUnLoginFilter:m,playerMargin:v}=ep;m&&I.layoutStore&&(I.layoutStore.disableUnLoginFilter=!0),e&&I.roomStore&&(I.roomStore.forceEnableH265=!0),void 0!==c&&I.layoutStore&&(I.layoutStore.navigationSelected=c),a&&I.roomStore&&(I.roomStore.abProgramme=!0),h&&I.layoutStore&&(I.layoutStore.hasRelevantRoom=!1),_&&I.layoutStore&&(I.layoutStore.programmeFill=_),v&&I.layoutStore&&(I.layoutStore.playerMargin=v),s&&(null===(J=I.roomStore)||void 0===J||J.setAppointment(!0)),i&&(null===(X=I.layoutStore)||void 0===X||X.setModule("categoryTab",g.p.DISABLE)),t&&(null===(ee=I.layoutStore)||void 0===ee||ee.setModule("navigation",g.p.ENABLE)),o&&(null===(ei=I.layoutStore)||void 0===ei||ei.setModule("footer",g.p.DISABLE)),n&&(null===(et=I.layoutStore)||void 0===et||et.setForceTheme(n)),d&&(null===(eo=I.layoutStore)||void 0===eo||eo.setHeaderOpacity(d)),r&&(null===(en=I.layoutStore)||void 0===en||en.setImmersive(!0)),l&&(null===(er=I.layoutStore)||void 0===er||er.setSpecialBanner(l)),u&&(null===(el=I.layoutStore)||void 0===el||el.setResource(u))}null===(E=I.appStore)||void 0===E||E.setIsOpenLongTask(!0),null===(C=I.appStore)||void 0===C||C.setLinkMicHeartConfig(em),null===(b=I.roomStore)||void 0===b||b.setRoomInfo(eI),null===(O=I.roomStore)||void 0===O||O.setUgcLive(null==eI?void 0:null===(w=eI.room)||void 0===w?void 0:null===(T=w.scene_type_info)||void 0===T?void 0:T.commentary_type),null===(D=I.roomStore)||void 0===D||D.setGameHiddle(null===(V=(0,c.MP)(eI))||void 0===V?void 0:null===(U=V.extension)||void 0===U?void 0:U.game_hidden),null===(R=I.roomStore)||void 0===R||R.setLikeStatus(ew),null===(G=I.paidLiveStore)||void 0===G||G.setPaidLiveData(null==eI?void 0:null===(N=eI.room)||void 0===N?void 0:N.paid_live_data),null===(B=I.roomStore)||void 0===B||B.setRelativeRooms(eb);let eO=l.message_from||"live",eU=a()(eh,"loginLead",{}),{singleControlTime:eV,singleControlMaxShowTime:eD}=ev,eR=f.Q.getItem({sKey:d.CookieKeys.WebcastLocalQuality}),eN=f.Q.getItem({sKey:d.CookieKeys.WebcastLeadingLastShowTime}),eG=f.Q.getItem({sKey:d.CookieKeys.WebcastLeadingTotalShowTimes});null===(F=I.streamStore)||void 0===F||F.setLeadingData((0,n._)((0,o._)({},eU),{clatity_guide:ef,last_show_time:eN,total_show_times:eG})),null===(x=I.streamStore)||void 0===x||x.setLocalQuality(eR),null===(K=I.streamStore)||void 0===K||K.setRenderTime(Date.now()),null===(H=I.streamStore)||void 0===H||H.setSingleControlTime(Number(eV)),null===(j=I.streamStore)||void 0===j||j.setSingleControlMaxShowTime(Number(eD));let{mainCameraInfo:eB,cameraInfoList:eF}=(0,h.EE)(eI);null===(W=I.cameraStore)||void 0===W||W.setMainCameraInfo(eB),null===(Y=I.cameraStore)||void 0===Y||Y.setCameraInfoList(eF);let ex=null==l?void 0:l.camera_id,eK=null==eF?void 0:null===(Z=eF.find)||void 0===Z?void 0:Z.call(eF,e=>(null==e?void 0:e.cameraId)===ex);if(!eK||(null==eK?void 0:eK.isMainCamera))eu=(0,h.hg)(eI),null===(ed=I.cameraStore)||void 0===ed||ed.setCameraInfo(eB);else{let e=(0,n._)((0,o._)({},eI),{room:(0,n._)((0,o._)({},eI.room),{stream_url:null==eK?void 0:eK.h264Stream,title:null==eK?void 0:eK.title}),web_stream_url:null==eK?void 0:eK.h265Stream});eu=(0,h.hg)(e),null===(ea=I.roomStore)||void 0===ea||ea.setRoomInfo(e),null===(es=I.cameraStore)||void 0===es||es.setCameraInfo(eK)}null===(q=I.streamStore)||void 0===q||q.setStreamData(eu);let eH=null==eu?void 0:null===($=eu.H265_streamData)||void 0===$?void 0:null===(z=$.options)||void 0===z?void 0:null===(Q=z.qualities)||void 0===Q?void 0:Q.some(e=>"bytevc2"===e.v_codec);I.streamStore.isUseVVC=eT&&eH;let ej={errorPrompts:eC,logId:eE,status_code:ek,error:eP,errorPageMessage:eM,iframeConf:e_[t],messageFrom:eO,isSpider:!1,defaultMoreLeague:eS,defaultMatchStatsDetail:eA,defaultTagMatchInfo:eL};I.detailExtra.setDetailExtra(ej),p.emit(p.EVENT.LiveInnerEnterRoomDone)};(null==L?void 0:L.liveInnerFeed)&&e()},[t,null==L?void 0:L.liveInnerFeed])};i.Z=e=>{var i;let{webRid:t,query:l,isPreEnterRoom:p}=e,A=s.a.useClientDetect(),L=(0,_.Z)(),I=(0,S.o)();(0,m.j)();let P=(null==I?void 0:I.layoutStore)?I:L;null==P||null===(i=P.layoutStore)||void 0===i||i.setHint(location.hostname,location.pathname,A,!!l.hidehead),P.layoutStore.setHardCategoryTab(g.p.DISABLE),(0,r.useEffect)(()=>{(async()=>{var e,i,r,s,_,m,S,A,L,I,k,M,E,C,b,T,w,O,U,V,D,R,N,G,B,F,x,K,H,j,W,Y,Z,q,Q,z,$,J,X,ee,ei,et,eo,en,er,el,ea,es;let ed;let eu=async()=>{var e,i,o,n,r;let l,s,d,c;let h=[];if(window.liveDetailDataAPI instanceof Promise){let e=window.liveDetailDataAPI;window.liveDetailDataAPI=void 0,h=await e}else h=await (0,v.Y)({webRid:t,isPreEnterRoom:p});let[_,m,f,g,S=[],A=[]]=h,{roomInfo:L,relevantRooms:I,logId:P}=_,k=null==L?void 0:L.roomId,M=null==L?void 0:null===(e=L.anchor)||void 0===e?void 0:e.id_str,E=(null==L?void 0:null===(n=L.room)||void 0===n?void 0:null===(o=n.others)||void 0===o?void 0:null===(i=o.web_skin)||void 0===i?void 0:i.enable_skin)?await (0,y.I)(k,M):void 0;_.relevantRooms=I.map(e=>(0,u.bj)(e,P));let C=a()(L,"room.episode_extra.season_id_str"),b=null==A?void 0:A.includes(C);return(r=c||(c={}))[r.TRYWATCH_LEAD=3]="TRYWATCH_LEAD",{rawRes:_,iframeConf:m,linkmicHeartConfig:f,qualitySettings:g,clatity_guide:3,themeConfig:E,isSpider:!1,isAsianGames:!1,isOlympicGame:b,defaultMoreLeague:l,defaultMatchStatsDetail:s,defaultTagMatchInfo:d}},{rawRes:ec,iframeConf:eh,linkmicHeartConfig:e_,qualitySettings:em,clatity_guide:ev,themeConfig:ef,isAsianGames:ep,isOlympicGame:eg,defaultMoreLeague:ey,defaultMatchStatsDetail:eS,defaultTagMatchInfo:eA}=await eu(),{roomInfo:eL,error:eI,status_code:eP,errorPageMessage:ek,logId:eM,errorPrompts:eE,relevantRooms:eC,isUseVVC:eb}=ec,eT={Digg:null==eL?void 0:null===(i=eL.room)||void 0===i?void 0:null===(e=i.room_auth)||void 0===e?void 0:e.Digg,SpecialStyle:null==eL?void 0:null===(s=eL.room)||void 0===s?void 0:null===(r=s.room_auth)||void 0===r?void 0:r.SpecialStyle};if(null==P||null===(m=P.roomStore)||void 0===m||null===(_=m.setIsAsianGames)||void 0===_||_.call(m,ep),null==P||null===(A=P.roomStore)||void 0===A||null===(S=A.setIsOlympicGame)||void 0===S||S.call(A,eg),P.roomStore&&a()(eL,"room.others.programme.enable_programme",!1)&&(P.roomStore.enableProgramme=!0),(null==eL?void 0:null===(k=eL.room)||void 0===k?void 0:null===(I=k.others)||void 0===I?void 0:null===(L=I.web_skin)||void 0===L?void 0:L.enable_skin)&&ef){P.layoutStore.rawThemeConfig=ef;let{force_enable_h265:e,hideCategory:i,showNavigation:t,hideFooter:o,forceTheme:n,immersive:r,banner:l,programme:a,appointment:s,transparentHeader:d,resource:u,navigationSelected:c,hideRelevantRoom:h,programmeFill:_,disableUnLoginFilter:m,playerMargin:v}=ef;m&&P.layoutStore&&(P.layoutStore.disableUnLoginFilter=!0),e&&P.roomStore&&(P.roomStore.forceEnableH265=!0),void 0!==c&&P.layoutStore&&(P.layoutStore.navigationSelected=c),a&&P.roomStore&&(P.roomStore.abProgramme=!0),h&&P.layoutStore&&(P.layoutStore.hasRelevantRoom=!1),_&&P.layoutStore&&(P.layoutStore.programmeFill=_),v&&P.layoutStore&&(P.layoutStore.playerMargin=v),s&&(null===($=P.roomStore)||void 0===$||$.setAppointment(!0)),i&&(null===(J=P.layoutStore)||void 0===J||J.setModule("categoryTab",g.p.DISABLE)),t&&(null===(X=P.layoutStore)||void 0===X||X.setModule("navigation",g.p.ENABLE)),o&&(null===(ee=P.layoutStore)||void 0===ee||ee.setModule("footer",g.p.DISABLE)),n&&(null===(ei=P.layoutStore)||void 0===ei||ei.setForceTheme(n)),d&&(null===(et=P.layoutStore)||void 0===et||et.setHeaderOpacity(d)),r&&(null===(eo=P.layoutStore)||void 0===eo||eo.setImmersive(!0)),l&&(null===(en=P.layoutStore)||void 0===en||en.setSpecialBanner(l)),u&&(null===(er=P.layoutStore)||void 0===er||er.setResource(u))}null===(M=P.appStore)||void 0===M||M.setIsOpenLongTask(!0),null===(E=P.appStore)||void 0===E||E.setLinkMicHeartConfig(e_),null===(C=P.roomStore)||void 0===C||C.setRoomInfo(eL),null===(w=P.roomStore)||void 0===w||w.setUgcLive(null==eL?void 0:null===(T=eL.room)||void 0===T?void 0:null===(b=T.scene_type_info)||void 0===b?void 0:b.commentary_type),null===(V=P.roomStore)||void 0===V||V.setGameHiddle(null===(U=(0,c.MP)(eL))||void 0===U?void 0:null===(O=U.extension)||void 0===O?void 0:O.game_hidden),null===(D=P.roomStore)||void 0===D||D.setLikeStatus(eT),null===(N=P.paidLiveStore)||void 0===N||N.setPaidLiveData(null==eL?void 0:null===(R=eL.room)||void 0===R?void 0:R.paid_live_data),null===(G=P.roomStore)||void 0===G||G.setRelativeRooms(eC);let ew=l.message_from||"live",eO=a()(ec,"loginLead",{}),{singleControlTime:eU,singleControlMaxShowTime:eV}=em,eD=f.Q.getItem({sKey:d.CookieKeys.WebcastLocalQuality}),eR=f.Q.getItem({sKey:d.CookieKeys.WebcastLeadingLastShowTime}),eN=f.Q.getItem({sKey:d.CookieKeys.WebcastLeadingTotalShowTimes});null===(B=P.streamStore)||void 0===B||B.setLeadingData((0,n._)((0,o._)({},eO),{clatity_guide:ev,last_show_time:eR,total_show_times:eN})),null===(F=P.streamStore)||void 0===F||F.setLocalQuality(eD),null===(x=P.streamStore)||void 0===x||x.setRenderTime(Date.now()),null===(K=P.streamStore)||void 0===K||K.setSingleControlTime(Number(eU)),null===(H=P.streamStore)||void 0===H||H.setSingleControlMaxShowTime(Number(eV));let{mainCameraInfo:eG,cameraInfoList:eB}=(0,h.EE)(eL);null===(j=P.cameraStore)||void 0===j||j.setMainCameraInfo(eG),null===(W=P.cameraStore)||void 0===W||W.setCameraInfoList(eB);let eF=null==l?void 0:l.camera_id,ex=null==eB?void 0:null===(Y=eB.find)||void 0===Y?void 0:Y.call(eB,e=>(null==e?void 0:e.cameraId)===eF);if(!ex||(null==ex?void 0:ex.isMainCamera))ed=(0,h.hg)(eL),null===(es=P.cameraStore)||void 0===es||es.setCameraInfo(eG);else{let e=(0,n._)((0,o._)({},eL),{room:(0,n._)((0,o._)({},eL.room),{stream_url:null==ex?void 0:ex.h264Stream,title:null==ex?void 0:ex.title}),web_stream_url:null==ex?void 0:ex.h265Stream});ed=(0,h.hg)(e),null===(el=P.roomStore)||void 0===el||el.setRoomInfo(e),null===(ea=P.cameraStore)||void 0===ea||ea.setCameraInfo(ex)}null===(Z=P.streamStore)||void 0===Z||Z.setStreamData(ed);let eK=null==ed?void 0:null===(z=ed.H265_streamData)||void 0===z?void 0:null===(Q=z.options)||void 0===Q?void 0:null===(q=Q.qualities)||void 0===q?void 0:q.some(e=>"bytevc2"===e.v_codec);P.streamStore.isUseVVC=eb&&eK;let eH={errorPrompts:eE,logId:eM,status_code:eP,error:eI,errorPageMessage:ek,iframeConf:eh[t],messageFrom:ew,isSpider:!1,defaultMoreLeague:ey,defaultMatchStatsDetail:eS,defaultTagMatchInfo:eA};P.detailExtra.setDetailExtra(eH)})()},[])}},7772:function(e,i,t){t.d(i,{P:function(){return c},n:function(){return h}}),t(954372),t(826893),t(179133);var o=t(850159),n=t(697239),r=t(553542),l=t(88648),a=t(567754),s=t(180431),d=t(31940),u=t(649994);let c=()=>{var e,i,t;let{roomStore:r,feedStore:s}=(0,o.Z)(),c=(0,d.j)(),h=(null==c?void 0:c.liveInnerFeed)!==0;return"undefined"!=typeof window&&(h=(null===(t=window)||void 0===t?void 0:null===(i=t.__INVISIBLE_QUERY__)||void 0===i?void 0:i.enter_from_merge)===u.G.recommend&&h,window.location.pathname&&/iframe/.test(window.location.pathname)&&(h=!1)),{innerFeedOn:h,fetchInnerFeed:l.useCallback(async e=>{if("undefined"!=typeof window){var i,t,o,l;let{pathname:d,search:u}=window.location,{roomInfo:c}=r;if(-1!==d.search("/follow/live")&&!e)return;let h=null===(i=(0,a.parse)(u))||void 0===i?void 0:i.from_search,_=()=>{},m={};if(h)try{let e=JSON.parse(null===(o=window)||void 0===o?void 0:null===(t=o.__INVISIBLE_QUERY__)||void 0===t?void 0:t.search_params);(null==e?void 0:e.search_keyword)&&(_=n.fetchInnerSearchFeedList,m={keyword:null==e?void 0:e.search_keyword})}catch(e){}else _=n.fetchInnerFeedList,m={draw_room_id:null==c?void 0:c.roomId,draw_room_owner_id:null==c?void 0:null===(l=c.anchor)||void 0===l?void 0:l.id_str};try{let e=await (null==_?void 0:_(m)),i=(null==e?void 0:e.list)||[];s.addFeedList(i)}catch(e){}}},[null==r?void 0:null===(e=r.roomInfo)||void 0===e?void 0:e.roomId])}},h=()=>{let{webrid:e}=(0,r.U)(),i={};if("object"==typeof window&&window){var t,o;i=(0,a.parse)(null===(o=window)||void 0===o?void 0:null===(t=o.location)||void 0===t?void 0:t.search)}(0,s.R)({webRid:e,query:i,isPreEnterRoom:!1})}},895399:function(e,i,t){t.d(i,{Z:function(){return l}});var o=t(134761),n=t(104013),r=t(519055);class l{constructor(e){(0,o._)(this,"store",null),(0,o._)(this,"hydrate",e=>{for(let i in e)"store"!==i&&(this[i]=e[i])}),(0,o._)(this,"reset",()=>{this.store=null}),!r.s&&(this.store=e),(0,n.makeObservable)(this,{hydrate:n.action})}}},93981:function(e,i,t){t.d(i,{Z:function(){return h},p:function(){return c}});var o=t(134761),n=t(435326),r=t(895399),l=t(470955),a=t.n(l),s=t(527459),d=t(421442),u=t(104013),c={AUTO:0,0:"AUTO",ENABLE:1,1:"ENABLE",DISABLE:-1,"-1":"DISABLE"};class h extends r.Z{get isLiveDetail(){return!!(0,s.m)(n.m.LIVING,this.pathname)||!!(0,s.m)(n.m.DOUYIN_LIVING,this.pathname)}get isXiguaDomain(){return -1!==[d.LIVE_XIGUA_DOMAIN,d.XIGUA_DOMAIN].indexOf(this.domain)}get navigationCurrent(){return this.isLiveDetail?"":this.navigationSelected}get showNavigation(){let e=this.shouldShowModule(this.hardNavigation);return void 0!==e?e:(!this.domain||!this.isXiguaDomain)&&(!!(0,s.m)(n.m.HOT_LIVE,this.pathname)||!(this.isClient&&(0,s.m)(n.m.LIVING,this.pathname)||this.isClient&&(0,s.m)(n.m.DOUYIN_LIVING,this.pathname))&&[n.m.CATEGORY,n.m.CATEGORY_NEW,n.m.HOT_LIVE,n.m.HOME,n.m.LIVING,n.m.DOUYIN_LIVING].some(e=>!!(0,s.m)(e,this.pathname)))}get hideNavigation(){return!this.showNavigation}get showCategoryTab(){let e=this.shouldShowModule(this.hardCategoryTab);return void 0!==e?e:(!this.domain||!this.isXiguaDomain)&&![n.m.LIVING_COMMENT].some(e=>!!(0,s.m)(e,this.pathname))}get hideCategoryTab(){return!this.showCategoryTab}get showHeader(){let e=this.shouldShowModule(this.hardHeader);return void 0!==e?e:(!this.domain||!this.isXiguaDomain)&&![n.m.IFRAME,n.m.VIDEO_DOMAIN_IFRAME,n.m.LIVING_COMMENT].some(e=>!!(0,s.m)(e,this.pathname))||this.hidehead}get hideHeader(){return!this.showHeader}get showFooter(){let e=this.shouldShowModule(this.hardFooter);return void 0!==e?e:![n.m.LIVING_COMMENT,n.m.LIVING,n.m.DOUYIN_LIVING,n.m.DOUYIN_RECOMMEND_LIVING,n.m.DOUYIN_FOLLOW_LIVING].some(e=>!!(0,s.m)(e,this.pathname))}get hideFooter(){return!this.showFooter}get xiguaHeader(){return this.domain&&-1!==[d.LIVE_XIGUA_DOMAIN].indexOf(this.domain)}get showSideBar(){let e=this.shouldShowModule(this.hardSideBar);return void 0!==e?e:![n.m.IFRAME,n.m.VIDEO_DOMAIN_IFRAME,n.m.LIVING_COMMENT].some(e=>!!(0,s.m)(e,this.pathname))}get hideSideBar(){return!this.showSideBar}get showErrorStyle(){let e=this.shouldShowModule(this.hardSideBar);return void 0!==e?e:![n.m.ERROR].some(e=>!!(0,s.m)(e,this.pathname))}get hideErrorStyle(){return!this.showErrorStyle}shouldShowModule(e){return 1===e||-1!==e&&void 0}setHeaderOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.transparentHeader=e}setHardCategoryTab(e){this.hardCategoryTab=e}setHardHeader(e){this.hardHeader=e}setHardNavigation(e){this.hardNavigation=e}setHardSideBar(e){this.hardSideBar=e}constructor(e){var i;super(e),i=this,(0,o._)(this,"disableUnLoginFilter",!1),(0,o._)(this,"rawThemeConfig",{}),(0,o._)(this,"domain","live.douyin.com"),(0,o._)(this,"pathname",""),(0,o._)(this,"isClient",!1),(0,o._)(this,"navigationSelected","live"),(0,o._)(this,"hidehead",!1),(0,o._)(this,"forceTheme",void 0),(0,o._)(this,"hardNavigation",0),(0,o._)(this,"hardCategoryTab",0),(0,o._)(this,"hardHeader",0),(0,o._)(this,"hardFooter",0),(0,o._)(this,"hardSideBar",0),(0,o._)(this,"hardErrorStyle",0),(0,o._)(this,"transparentHeader",!1),(0,o._)(this,"specialBanner",!1),(0,o._)(this,"hasRelevantRoom",!0),(0,o._)(this,"immersive",!1),(0,o._)(this,"programmeFill",void 0),(0,o._)(this,"resource",void 0),(0,o._)(this,"playerMargin",0),(0,o._)(this,"reset",()=>{this.disableUnLoginFilter=!1,this.rawThemeConfig={},this.domain="live.douyin.com",this.pathname="",this.isClient=!1,this.navigationSelected="live",this.hidehead=!1,this.forceTheme=void 0,this.hardNavigation=0,this.hardCategoryTab=0,this.hardHeader=0,this.hardFooter=0,this.hardSideBar=0,this.hardErrorStyle=0,this.transparentHeader=!1,this.specialBanner=!1,this.hasRelevantRoom=!0,this.immersive=!1,this.programmeFill=void 0,this.resource=void 0,this.playerMargin=0}),(0,o._)(this,"setModule",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i[`hard${a()(e)}`]=t}),(0,o._)(this,"setHint",function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;i.domain=e,i.pathname=t,i.isClient=o,i.hidehead=!!n}),(0,o._)(this,"setImmersive",e=>{this.immersive=e}),(0,o._)(this,"setSpecialBanner",e=>{this.specialBanner=e}),(0,o._)(this,"setResource",e=>{this.resource=e}),(0,o._)(this,"setForceTheme",e=>{this.forceTheme=e}),(0,u.makeObservable)(this,{disableUnLoginFilter:u.observable,rawThemeConfig:u.observable,domain:u.observable,pathname:u.observable,isClient:u.observable,navigationSelected:u.observable,hidehead:u.observable,forceTheme:u.observable,hardNavigation:u.observable,hardCategoryTab:u.observable,hardHeader:u.observable,hardFooter:u.observable,hardSideBar:u.observable,hardErrorStyle:u.observable,transparentHeader:u.observable,specialBanner:u.observable,hasRelevantRoom:u.observable,programmeFill:u.observable,immersive:u.observable,resource:u.observable,playerMargin:u.observable,setHint:u.action,setModule:u.action,setHardHeader:u.action,setHardSideBar:u.action,setHardNavigation:u.action,navigationCurrent:u.computed,showNavigation:u.computed,showCategoryTab:u.computed,showHeader:u.computed,showFooter:u.computed,showSideBar:u.computed,showErrorStyle:u.computed,hideNavigation:u.computed,hideCategoryTab:u.computed,hideHeader:u.computed,hideFooter:u.computed,hideSideBar:u.computed,hideErrorStyle:u.computed,xiguaHeader:u.computed,isLiveDetail:u.computed,setHardCategoryTab:u.action})}}},147542:function(e,i,t){t.d(i,{Fk:function(){return A},SH:function(){return L},ZP:function(){return C},cK:function(){return I},g3:function(){return P},uH:function(){return M},xQ:function(){return k}});var o=t(134761),n=t(520739),r=t(878389);t(874386),t(250440),t(268917),t(779788),t(429532);var l=t(895399),a=t(86468),s=t(534552),d=t(783072),u=t(374187),c=t(516599),h=t(104013),_=t(520200),m=t(445361),v=t(852061),f=t(859231),p=t(609234),g=t(491701),y=t(779145),S=t.n(y);let A=(()=>{let e={};return[...Array(9)].forEach((i,t)=>{e[t]={idx:t}}),e})(),L=(e,i)=>!!Array.isArray(i)&&!!(i.length>0)||e===u.yP.VIDEO_6V6;var I={NOT_LINK:0,0:"NOT_LINK",LINKING:1,1:"LINKING",LINKED:2,2:"LINKED"},P={APPLYING:0,0:"APPLYING",TRUE:1,1:"TRUE",FALSE:2,2:"FALSE"},k={ENABLE_VIDEO:0,0:"ENABLE_VIDEO",ENABLE_AUDIO:1,1:"ENABLE_AUDIO",APPLY:2,2:"APPLY",HIDE:3,3:"HIDE",GROUP_CHOISE:4,4:"GROUP_CHOISE",INVITE_OPEN_CAMERA:5,5:"INVITE_OPEN_CAMERA",INVITE_LINK:6,6:"INVITE_LINK"},M={NONE:0,0:"NONE",ORDER_SING:1,1:"ORDER_SING",SELECT_GUEST:2,2:"SELECT_GUEST"};let E={[typeof a.V0]:void 0,[a.V0.LinkmicPlayMode_OrderSing]:[u.yP.AUDIO_1V8_STAGE,u.yP.AUDIO_1V8,u.yP.AUDIO_GRID,u.yP.VIDEO_DYNAMIC,u.yP.VIDEO_1V6,u.yP.VIDEO_1V8,u.yP.VIDEO_GRID,u.yP.VIDEO_1_V_8,u.yP.VIDEO_1_V_3,u.yP.VIDEO_1_V_6,u.yP.VIDEO_DYNAMIC_FLOAT,u.yP.AUDIO_DOUBLE_C],[a.V0.LinkmicPlayMode_Teamfight]:[u.yP.AUDIO_1V8,u.yP.AUDIO_1V8_STAGE,u.yP.VIDEO_1V8,u.yP.VIDEO_2V4V4],[a.V0.LinkmicPlayMode_DynamicLayout]:[u.yP.VIDEO_DYNAMIC],[a.V0.LinkmicPlayMode_GuestBattle]:[u.yP.VIDEO_1V8],[a.V0.LinkmicPlayMode_KTVSingingChallenge]:[u.yP.VIDEO_1V8],[a.V0.LinkmicPlayMode_NormalPaidLinkmic]:[u.yP.VIDEO_1V8]};class C extends l.Z{get linkRoomTypeHooks(){return this.getLinkRoomType(this.imLinkMicLayout)||this.getLinkRoomType(this.seiLinkMicLayout)}get isLinked(){return 2===this.linkStatus}get linkRoomType(){return this.getLinkRoomType(this.linkMicLayout)}get linkMicLayout(){return 2===this.linkStatus?this.imLinkMicLayout:(this.seiLinkMicLayout===u.yP.AUDIO_1V8||this.seiLinkMicLayout===u.yP.AUDIO_1V8_STAGE||this.seiLinkMicLayout===u.yP.AUDIO_GRID)&&(this.imLinkMicLayout===u.yP.AUDIO_1V8||this.imLinkMicLayout===u.yP.AUDIO_1V8_STAGE||this.imLinkMicLayout===u.yP.AUDIO_GRID||this.imLinkMicLayout===u.yP.VIDEO_6V6||this.imLinkMicLayout===u.yP.AUDIO_DOUBLE_C)?this.imLinkMicLayout:this.seiLinkMicLayout}get isSing(){var e,i;return null===(i=this.orderSingInfo)||void 0===i?void 0:null===(e=i.user_microphone_list)||void 0===e?void 0:e.some(e=>!!(null==e?void 0:e.is_singing))}get enlargedSeatPostion(){let e=2===this.linkStatus?this.imLinkMicSeats:this.seiLinkMicSeats;return(0,m.ut)(e)}get hasEnlargedSeat(){return -1!==this.enlargedSeatPostion}get linkMicSeatsRaw(){return 2===this.linkStatus?this.imLinkMicSeats:this.seiLinkMicSeats}get linkMicSeats(){let e=2===this.linkStatus?this.imLinkMicSeats:this.seiLinkMicSeats;return[u.yP.VIDEO_T1_V_B8,u.yP.VIDEO_6V6].includes(this.linkMicLayout)?e:(0,m.Qx)(e)}get teamfightInfo(){return 2===this.linkStatus?this.imTeamfightInfo:this.seiTeamFightInfo}get isLinkRoom(){return void 0!==this.linkMicLayout}get isDefaultOpenVideo(){return this.linkMicConfig.config[s.V9.AU_BigPartyAudienceDefaultOpenVideo]===s.q2.OPEN}get isAllowVideo(){return this.linkMicConfig.config[s.V9.AU_BigPartyAllowAudienceOpenVideo]===s.q2.OPEN}get selfLinkInfo(){if(void 0!==this.selfLinkedPosition)return this.linkMicSeats[this.selfLinkedPosition]}get playModesPC(){let e=[];return this.playModes.forEach(i=>{let t=E[i];void 0!==this.linkMicLayout&&t&&(null==t?void 0:t.includes(this.linkMicLayout))&&e.push(i)}),e}get isPaidLinking(){return this.playModes.includes(a.V0.LinkmicPlayMode_NormalPaidLinkmic)}get allowSendGiftGuest(){var e,i,t,o;return this.linkMicLayout===u.yP.VIDEO_DYNAMIC_FLOAT||("video"===this.linkRoomTypeHooks?(null===(i=this.linkMicConfig)||void 0===i?void 0:null===(e=i.config)||void 0===e?void 0:e[s.V9.AU_BigPartyGuestCanAcceptGift])===s.q2.OPEN:"audio"===this.linkRoomTypeHooks&&(null===(o=this.linkMicConfig)||void 0===o?void 0:null===(t=o.config)||void 0===t?void 0:t[s.V9.AU_AudioChatGuestCanAcceptGift])===s.q2.OPEN)}get useChoosePeopleFunc(){var e,i,t,o;if("audio"===this.linkRoomTypeHooks||"video"===this.linkRoomTypeHooks){if(this.choosePeopleShowTCC&&this.allowSendGiftGuest&&(null!==(o=null===(t=this.choosePeopleArr)||void 0===t?void 0:t.length)&&void 0!==o?o:0)>0)return!0}else if(this.isGroupLive&&(null!==(i=null===(e=this.choosePeopleArr)||void 0===e?void 0:e.length)&&void 0!==i?i:0)>0)return!0;return!1}constructor(e){super(e),(0,o._)(this,"linkMicConfig",{config:{}}),(0,o._)(this,"otherRoomLinkSilenceStatus",void 0),(0,o._)(this,"imLinkMicSeats",(0,n._)({},A)),(0,o._)(this,"seiLinkMicSeats",(0,n._)({},A)),(0,o._)(this,"imLinkMicLayout",void 0),(0,o._)(this,"seiLinkMicLayout",void 0),(0,o._)(this,"uiLayout",void 0),(0,o._)(this,"seiPosition",void 0),(0,o._)(this,"playModes",[]),(0,o._)(this,"orderSingInfo",void 0),(0,o._)(this,"orderSingUserScore",void 0),(0,o._)(this,"orderSingBannerData",void 0),(0,o._)(this,"orderSingSortRule",d.jQ.OrderSingGiftRule),(0,o._)(this,"choosePeopleArr",[]),(0,o._)(this,"choosePeopleAll",!1),(0,o._)(this,"choosePanelVisible",!1),(0,o._)(this,"choosePeopleShowTCC",!1),(0,o._)(this,"choosePeopleList",{}),(0,o._)(this,"functionType2",""),(0,o._)(this,"imTeamfightInfo",void 0),(0,o._)(this,"seiTeamFightInfo",void 0),(0,o._)(this,"guestBattleInfo",void 0),(0,o._)(this,"eggModeInfo",void 0),(0,o._)(this,"rankListShow",!1),(0,o._)(this,"rankParam",void 0),(0,o._)(this,"liveRoomMode",void 0),(0,o._)(this,"showHonorStation",!1),(0,o._)(this,"honorUser",void 0),(0,o._)(this,"scene",void 0),(0,o._)(this,"sceneNum",void 0),(0,o._)(this,"selectedLinkMicDevices",{}),(0,o._)(this,"linkStatus",0),(0,o._)(this,"devicesModalMode",3),(0,o._)(this,"applySource",v.JW.NONE),(0,o._)(this,"audioPermission",0),(0,o._)(this,"videoPermission",0),(0,o._)(this,"selectedPosition",void 0),(0,o._)(this,"userPopupCoordinate",void 0),(0,o._)(this,"isFansGuide",!1),(0,o._)(this,"isCandidate",!1),(0,o._)(this,"linkmicModalSettings",{show:!1}),(0,o._)(this,"guestBattleSettingsShow",!1),(0,o._)(this,"selfLinkedPosition",void 0),(0,o._)(this,"selfLinkMicId",void 0),(0,o._)(this,"isPlayModeNotSupport",!1),(0,o._)(this,"floatModal",0),(0,o._)(this,"dressListInfo",{}),(0,o._)(this,"showLinkMicApplyModal",!1),(0,o._)(this,"devicesModalCountDown",0),(0,o._)(this,"enlargeSeatApplyUid",null),(0,o._)(this,"enlargeSeatImage",""),(0,o._)(this,"enlargeGuestType",0),(0,o._)(this,"inviteFromUserId",""),(0,o._)(this,"dressMvpInfo",{}),(0,o._)(this,"dressListAll",[]),(0,o._)(this,"layoutBackgroundImg",""),(0,o._)(this,"layoutConfig",void 0),(0,o._)(this,"isAgcAnchor",!1),(0,o._)(this,"faceRecognitionShow",!1),(0,o._)(this,"groupLiveMemberList",void 0),(0,o._)(this,"isGroupLive",0),(0,o._)(this,"doubleCEnlarge",{showType:"",uid:void 0}),(0,o._)(this,"isCrossLink",!1),(0,o._)(this,"roomBattleType","pk"),(0,o._)(this,"crossLinkTimerStart",0),(0,o._)(this,"openUiLayout",void 0),(0,o._)(this,"lastOpenUiLayout",void 0),(0,o._)(this,"changeVideoDevice",{}),(0,o._)(this,"groupLiveComponents",[]),(0,o._)(this,"groupliveProfileSlot",null),(0,o._)(this,"asrSubtitle",{isOpen:!1,type:1}),(0,o._)(this,"openAudioSubtitle",!1),(0,o._)(this,"subtitleType",void 0),(0,o._)(this,"lastLayout",void 0),(0,o._)(this,"showGiftInfo",!1),(0,o._)(this,"linkmicVideoEqualLayoutFrameOpt","0"),(0,o._)(this,"setGroupLiveMemberList",e=>{this.groupLiveMemberList=e}),(0,o._)(this,"setIsGroupLive",e=>{this.isGroupLive=e}),(0,o._)(this,"setLinkmicModalSettings",e=>{this.linkmicModalSettings=e}),(0,o._)(this,"setGuestBattleSettingsShow",e=>{this.guestBattleSettingsShow=e}),(0,o._)(this,"getLinkRoomType",e=>{if(_.Ri.includes(e))return"audio";if(_.sF.includes(e))return"video";if(e===u.yP.VIDEO_6V6)return this.liveRoomMode===f.ke.AUDIO?"audio":"video";if(void 0===e&&"new_audience"===this.functionType2)return"video"}),(0,o._)(this,"setChoosePeopleArr",e=>{var i,t,o,n;this.choosePeopleArr&&(null===(i=this.choosePeopleArr)||void 0===i?void 0:i.length)>0&&localStorage.setItem(`linkmic-last-choose-people-${null===(n=this.store)||void 0===n?void 0:null===(o=n.roomStore)||void 0===o?void 0:null===(t=o.roomInfo)||void 0===t?void 0:t.roomId}`,JSON.stringify(e)),this.choosePeopleArr=e}),(0,o._)(this,"setChoosePeopleAll",e=>{var i,t,o;this.choosePeopleAll=e,localStorage.setItem(`linkmic-last-choose-people-all-${null===(o=this.store)||void 0===o?void 0:null===(t=o.roomStore)||void 0===t?void 0:null===(i=t.roomInfo)||void 0===i?void 0:i.roomId}`,String(e))}),(0,o._)(this,"setChoosePanelVisible",e=>{this.choosePanelVisible=e}),(0,o._)(this,"setChoosePeopleShowTCC",e=>{this.choosePeopleShowTCC=e}),(0,o._)(this,"getPositionIdxByUserIdStr",e=>{let i=S()(this.linkMicSeats);return null==i?void 0:i.findIndex(i=>{var t,o;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)===e})}),(0,o._)(this,"getRealPositionIdxByUserIdStr",e=>{var i;let t=S()(this.linkMicSeats);return null==t?void 0:null===(i=t.find(i=>{var t,o;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)===e}))||void 0===i?void 0:i.idx}),(0,o._)(this,"setApplySource",e=>{this.applySource=e}),(0,o._)(this,"setSelfLinkedPosition",e=>{this.selfLinkedPosition=e}),(0,o._)(this,"setAudioPermission",e=>{this.audioPermission=e}),(0,o._)(this,"setFunctionType2",e=>{this.functionType2=e}),(0,o._)(this,"setVideoPermission",e=>{this.videoPermission=e}),(0,o._)(this,"setDevices",e=>{this.selectedLinkMicDevices=e}),(0,o._)(this,"setOtherRoomLinkSilenceStatus",e=>{this.otherRoomLinkSilenceStatus=e}),(0,o._)(this,"setAudioDevice",e=>{this.selectedLinkMicDevices=(0,r._)((0,n._)({},this.selectedLinkMicDevices),{audio:e})}),(0,o._)(this,"setVideoDevice",e=>{this.selectedLinkMicDevices=(0,r._)((0,n._)({},this.selectedLinkMicDevices),{video:e})}),(0,o._)(this,"setSelectedPosition",e=>{this.selectedPosition=e}),(0,o._)(this,"setUserPopupCoordinate",e=>{this.userPopupCoordinate=e}),(0,o._)(this,"setInviteFromUserId",e=>{this.inviteFromUserId=e}),(0,o._)(this,"setShowDevicesModal",async e=>{this.setAudioPermission(0);let i=await (0,p.P)();if(!i.audio){c.F.info("无音源输入，连线失败"),this.setAudioPermission(2),this.setAudioDevice(void 0);return}this.setAudioPermission(1);let{audioInputs:t}=await (0,p.n)({linkRoomType:this.linkRoomType});if(0===t.length){c.F.info("无音源输入，连线失败");return}let o=async()=>{this.setVideoPermission(0),(await (0,p.P)(g.j5.CAMERA)).video?this.setVideoPermission(1):(this.setVideoPermission(2),this.setVideoDevice(void 0))};(2===e||6===e||4===e)&&"video"===this.linkRoomType&&i&&this.isAllowVideo&&this.isDefaultOpenVideo&&await o(),(0===e||5===e)&&await o(),this.devicesModalMode=e}),(0,o._)(this,"setLiveRoomMode",e=>{this.liveRoomMode=e}),(0,o._)(this,"setEnlargeSeatApplyUid",e=>{this.enlargeSeatApplyUid=e}),(0,o._)(this,"setEnlargeSeatImage",e=>{this.enlargeSeatImage=e}),(0,o._)(this,"setEnlargeGuestType",e=>{this.enlargeGuestType=e}),(0,o._)(this,"updateFunctionType2",e=>{e===u.yP.VIDEO_1V6||e===u.yP.AUDIO_1V8||e===u.yP.AUDIO_1V8_STAGE||e===u.yP.AUDIO_DOUBLE_C||e===u.yP.VIDEO_DYNAMIC_FLOAT&&"new_audience"!==this.functionType2?this.functionType2="radio":e===u.yP.VIDEO_DYNAMIC||e===u.yP.VIDEO_GRID||e===u.yP.AUDIO_GRID?this.functionType2="party":e===u.yP.MATE_CUSTOM&&(this.functionType2="audio_audience")}),(0,o._)(this,"setImLinkMicLayout",e=>{let i=[u.yP.AUDIO_1V8,u.yP.AUDIO_GRID,u.yP.AUDIO_1V8_STAGE].includes(this.seiLinkMicLayout)&&[u.yP.AUDIO_1V8,u.yP.AUDIO_GRID,u.yP.VIDEO_6V6,u.yP.AUDIO_1V8_STAGE].includes(e);2===this.linkStatus?this.updateFunctionType2(e):i&&this.updateFunctionType2(e),this.imLinkMicLayout=e}),(0,o._)(this,"setSeiLinkMicLayout",e=>{2!==this.linkStatus&&this.updateFunctionType2(e),this.seiLinkMicLayout=e}),(0,o._)(this,"setUiLayout",e=>{this.uiLayout=Number(e)}),(0,o._)(this,"setPlayModes",e=>{this.playModes=e}),(0,o._)(this,"setPlayModesByConfig",e=>{let i=[...this.playModes],t=Object.keys(e);for(let e of t)t[e]&&!i.includes(Number(e))?i.push(Number(e)):t[e]&&i.includes(Number(e))&&(i=i.filter(i=>i!==Number(e)));this.playModes=i}),(0,o._)(this,"setLinkMicSettings",e=>{this.linkMicConfig.settings=e}),(0,o._)(this,"setTeamfightInfo",(e,i)=>{if(i){var t,o;let i=null===(o=this.teamfightInfo)||void 0===o?void 0:null===(t=o.team_infos)||void 0===t?void 0:t.map(i=>{var t;let o=null===(t=e.team_infos)||void 0===t?void 0:t.find(e=>{var t,o;return String(null!==(t=null==e?void 0:e.team_id_str)&&void 0!==t?t:null==e?void 0:e.team_id)===String(null!==(o=null==i?void 0:i.team_id_str)&&void 0!==o?o:null==i?void 0:i.team_id)});return(0,r._)((0,n._)({},i),{is_score_fuzzy:null==o?void 0:o.is_score_fuzzy,score:null==o?void 0:o.score,score_str:null==o?void 0:o.score_str,score_fuzzy:null==o?void 0:o.score_fuzzy,contributors:null==o?void 0:o.contributors,players:null==o?void 0:o.players,owner_id:null==o?void 0:o.owner_id,bonus_score:null==o?void 0:o.bonus_score})});this.imTeamfightInfo=(0,r._)((0,n._)({},this.teamfightInfo),{current_time_ms:e.current_time_ms,team_infos:i}),this.seiTeamFightInfo=(0,r._)((0,n._)({},this.teamfightInfo),{current_time_ms:e.current_time_ms,team_infos:i});return}this.imTeamfightInfo=e,this.seiTeamFightInfo=e}),(0,o._)(this,"setGuestBattleInfo",e=>{this.guestBattleInfo=e}),(0,o._)(this,"setEggModeInfo",e=>{this.eggModeInfo=e}),(0,o._)(this,"setOrderSingInfo",e=>{this.orderSingInfo=e}),(0,o._)(this,"setOrderSingUserScore",e=>{this.orderSingUserScore=e}),(0,o._)(this,"setOrderSingBannerData",e=>{this.orderSingBannerData=e}),(0,o._)(this,"setOrderSingSortRule",e=>{this.orderSingSortRule=e}),(0,o._)(this,"setRankListShow",e=>{this.rankListShow=e}),(0,o._)(this,"setShowHonorStation",e=>{this.showHonorStation=e}),(0,o._)(this,"setHonorUser",e=>{this.honorUser=e}),(0,o._)(this,"setRankParam",e=>{this.rankParam=e}),(0,o._)(this,"setImLinkMicSeats",(e,i)=>{if(i){if(this.imLinkMicSeatsVersion){if(!!(Number(this.imLinkMicSeatsVersion)<Number(i)))this.imLinkMicSeats=e,this.imLinkMicSeatsVersion=i}else this.imLinkMicSeats=e,this.imLinkMicSeatsVersion=i}else this.imLinkMicSeats=e}),(0,o._)(this,"setSeiLinkMicSeats",e=>{this.seiLinkMicSeats=e}),(0,o._)(this,"setLinkStatus",e=>{2===this.linkStatus&&2!==e&&(this.setSeiLinkMicLayout(this.imLinkMicLayout),this.setSeiLinkMicSeats(this.imLinkMicSeats)),this.linkStatus=e,0===e&&this.setSelfLinkedPosition(void 0)}),(0,o._)(this,"setLinkMicConfig",e=>{this.linkMicConfig=e}),(0,o._)(this,"updateLinkMicConfig",e=>{let i=Object.assign({},this.linkMicConfig.config,e);this.linkMicConfig=(0,r._)((0,n._)({},this.linkMicConfig),{config:i})}),(0,o._)(this,"setIsFansGuide",e=>{this.isFansGuide=e}),(0,o._)(this,"setIsCandidate",e=>{this.isCandidate=e}),(0,o._)(this,"initLinkMicSeats",()=>{this.imLinkMicSeats=(0,n._)({},A),this.seiLinkMicSeats=(0,n._)({},A)}),(0,o._)(this,"setSelfLinkMicId",e=>{this.selfLinkMicId=e}),(0,o._)(this,"setIsPlayModeNotSupport",e=>{this.isPlayModeNotSupport=e}),(0,o._)(this,"setFloatModal",e=>{this.floatModal=e}),(0,o._)(this,"setSceneNum",e=>{this.sceneNum!==e&&(this.sceneNum=e)}),(0,o._)(this,"setDressListInfo",e=>{this.dressListInfo=e}),(0,o._)(this,"setShowLinkMicApplyModal",e=>{this.showLinkMicApplyModal=e}),(0,o._)(this,"setDevicesModalCountDown",e=>{this.devicesModalCountDown=e}),(0,o._)(this,"setDressMvpInfo",e=>{this.dressMvpInfo=e}),(0,o._)(this,"setDressListAll",e=>{this.dressListAll=e}),(0,o._)(this,"setLayoutBackgroundImg",e=>{this.layoutBackgroundImg=e}),(0,o._)(this,"setLayoutConfig",e=>{this.layoutConfig=e}),(0,o._)(this,"setAgcAnchor",e=>{this.isAgcAnchor=e}),(0,o._)(this,"setChoosePeopleList",e=>{this.choosePeopleList=e}),(0,o._)(this,"setFaceRecognitionShow",e=>{this.faceRecognitionShow=e}),(0,o._)(this,"setDoubleCEnlarge",e=>{this.doubleCEnlarge=e}),(0,o._)(this,"setIsCrossLink",e=>{this.isCrossLink=e}),(0,o._)(this,"setCrossLinkTimerStart",e=>{this.crossLinkTimerStart=e}),(0,o._)(this,"setRoomBattleType",e=>{this.roomBattleType=e}),(0,o._)(this,"setOpenUiLayout",e=>{e!==this.openUiLayout&&(void 0===this.lastOpenUiLayout?this.lastOpenUiLayout=e:this.lastOpenUiLayout=this.openUiLayout,this.openUiLayout=e)}),(0,o._)(this,"setChangeVideoDevice",e=>{this.changeVideoDevice=e}),(0,o._)(this,"setGroupLiveComponents",e=>{this.groupLiveComponents=e}),(0,o._)(this,"setGroupliveProfileSlot",e=>{this.groupliveProfileSlot=e}),(0,o._)(this,"setAsrSubtitle",e=>{this.asrSubtitle=e}),(0,o._)(this,"setLastLayout",e=>{this.lastLayout=e}),(0,o._)(this,"setShowGiftInfo",e=>{this.showGiftInfo=e}),(0,o._)(this,"setLinkmicVideoEqualLayoutFrameOpt",e=>{this.linkmicVideoEqualLayoutFrameOpt=e}),(0,o._)(this,"resetStore",e=>{this.linkMicConfig={config:{}},this.imLinkMicSeats=(0,n._)({},A),this.seiLinkMicSeats=(0,n._)({},A),this.imLinkMicSeatsVersion=void 0,this.imLinkMicLayout=void 0,this.seiLinkMicLayout=void 0,this.playModes=[],this.orderSingInfo=void 0,this.orderSingUserScore=void 0,this.orderSingSortRule=d.jQ.OrderSingGiftRule,this.liveRoomMode=void 0,this.imTeamfightInfo=void 0,this.guestBattleInfo=void 0,this.eggModeInfo=void 0,this.rankListShow=!1,this.showHonorStation=!1,this.honorUser=void 0,this.rankParam=void 0,this.selectedLinkMicDevices={},!e&&(this.linkStatus=0),this.showDevicesModal=!1,this.enlargeSeatApplyUid=null,this.enlargeSeatImage="",this.enlargeGuestType=0,this.applySource=v.JW.NONE,this.audioPermission=0,this.videoPermission=0,this.selectedPosition=void 0,this.userPopupCoordinate=void 0,this.isFansGuide=!1,this.isCandidate=!1,this.selfLinkedPosition=void 0,this.selfLinkMicId=void 0,this.isPlayModeNotSupport=!1,this.floatModal=0,this.otherRoomLinkSilenceStatus=void 0,this.choosePanelVisible=!1,this.choosePeopleArr=[],this.choosePeopleAll=!1,this.layoutBackgroundImg="",this.choosePeopleList={},this.isGroupLive=0,this.groupLiveMemberList=[],this.isCrossLink=!1,this.crossLinkTimerStart=0,this.roomBattleType="pk",this.openUiLayout=void 0,this.lastOpenUiLayout=void 0,this.changeVideoDevice={},this.groupliveProfileSlot=null,this.asrSubtitle={isOpen:!1,type:1},this.lastLayout=void 0,this.showGiftInfo=!0}),(0,o._)(this,"reset",()=>{}),(0,h.makeObservable)(this,{sceneNum:h.observable,setSceneNum:h.action,linkMicConfig:h.observable,imLinkMicSeats:h.observable,seiLinkMicSeats:h.observable,linkMicSeats:h.computed,linkMicSeatsRaw:h.computed,setImLinkMicSeats:h.action,setSeiLinkMicSeats:h.action,imLinkMicLayout:h.observable,seiLinkMicLayout:h.observable,uiLayout:h.observable,linkMicLayout:h.computed,setImLinkMicLayout:h.action,setSeiLinkMicLayout:h.action,setUiLayout:h.action,seiPosition:h.observable,teamfightInfo:h.computed,imTeamfightInfo:h.observable,seiTeamFightInfo:h.observable,setTeamfightInfo:h.action,guestBattleInfo:h.observable,setGuestBattleInfo:h.action,eggModeInfo:h.observable,setEggModeInfo:h.action,playModes:h.observable,setPlayModes:h.action,setPlayModesByConfig:h.action,playModesPC:h.computed,orderSingInfo:h.observable,setOrderSingInfo:h.action,orderSingUserScore:h.observable,setOrderSingUserScore:h.action,orderSingBannerData:h.observable,setOrderSingBannerData:h.action,orderSingSortRule:h.observable,setOrderSingSortRule:h.action,choosePeopleArr:h.observable,setChoosePeopleArr:h.action,choosePeopleAll:h.observable,setChoosePeopleAll:h.action,choosePanelVisible:h.observable,setChoosePanelVisible:h.action,allowSendGiftGuest:h.computed,choosePeopleShowTCC:h.observable,setChoosePeopleShowTCC:h.action,useChoosePeopleFunc:h.computed,enlargeSeatApplyUid:h.observable,enlargeSeatImage:h.observable,enlargeGuestType:h.observable,functionType2:h.observable,otherRoomLinkSilenceStatus:h.observable,rankListShow:h.observable,showHonorStation:h.observable,honorUser:h.observable,rankParam:h.observable,selectedLinkMicDevices:h.observable,linkStatus:h.observable,devicesModalMode:h.observable,selectedPosition:h.observable,userPopupCoordinate:h.observable,audioPermission:h.observable,videoPermission:h.observable,isFansGuide:h.observable,isCandidate:h.observable,selfLinkedPosition:h.observable,selfLinkMicId:h.observable,isPlayModeNotSupport:h.observable,floatModal:h.observable,liveRoomMode:h.observable,selfLinkInfo:h.computed,linkRoomType:h.computed,linkRoomTypeHooks:h.computed,isLinkRoom:h.computed,isDefaultOpenVideo:h.computed,isAllowVideo:h.computed,setFunctionType2:h.action,setLinkMicConfig:h.action,setOtherRoomLinkSilenceStatus:h.action,setRankListShow:h.action,setShowHonorStation:h.action,setHonorUser:h.action,setRankParam:h.action,setDevices:h.action,setShowDevicesModal:h.action,setUserPopupCoordinate:h.action,setEnlargeSeatApplyUid:h.action,setAudioPermission:h.action,setVideoPermission:h.action,setSelfLinkMicId:h.action,setSelectedPosition:h.action,setIsFansGuide:h.action,setIsCandidate:h.action,resetStore:h.action,setSelfLinkedPosition:h.action,setIsPlayModeNotSupport:h.action,setFloatModal:h.action,dressListInfo:h.observable,setDressListInfo:h.action,showLinkMicApplyModal:h.observable,setShowLinkMicApplyModal:h.action,devicesModalCountDown:h.observable,setDevicesModalCountDown:h.action,inviteFromUserId:h.observable,setInviteFromUserId:h.action,linkmicModalSettings:h.observable,setLinkmicModalSettings:h.action,guestBattleSettingsShow:h.observable,setGuestBattleSettingsShow:h.action,setLinkMicSettings:h.action,dressMvpInfo:h.observable,setDressMvpInfo:h.action,dressListAll:h.observable,setDressListAll:h.action,layoutBackgroundImg:h.observable,layoutConfig:h.observable,isAgcAnchor:h.observable,setAgcAnchor:h.action,choosePeopleList:h.observable,setChoosePeopleList:h.action,faceRecognitionShow:h.observable,setFaceRecognitionShow:h.action,groupLiveMemberList:h.observable,setGroupLiveMemberList:h.action,isGroupLive:h.observable,setIsGroupLive:h.action,doubleCEnlarge:h.observable,setDoubleCEnlarge:h.action,setEnlargeSeatImage:h.action,setEnlargeGuestType:h.action,setLayoutConfig:h.action,setLayoutBackgroundImg:h.action,isCrossLink:h.observable,setIsCrossLink:h.action,crossLinkTimerStart:h.observable,setCrossLinkTimerStart:h.action,roomBattleType:h.observable,setRoomBattleType:h.action,openUiLayout:h.observable,lastOpenUiLayout:h.observable,setOpenUiLayout:h.action,changeVideoDevice:h.observable,setChangeVideoDevice:h.action,groupLiveComponents:h.observable,setGroupLiveComponents:h.action,groupliveProfileSlot:h.observable,setGroupliveProfileSlot:h.action,asrSubtitle:h.observable,setAsrSubtitle:h.action,lastLayout:h.observable,setLastLayout:h.action,showGiftInfo:h.observable,setShowGiftInfo:h.action,linkmicVideoEqualLayoutFrameOpt:h.observable,setLinkmicVideoEqualLayoutFrameOpt:h.action,isPaidLinking:h.computed})}}},783072:function(e,i,t){t.d(i,{jQ:function(){return o}});var o={UnknownRule:0,0:"UnknownRule",OrderSingGiftRule:1,1:"OrderSingGiftRule",LinkmicPositionRule:2,2:"LinkmicPositionRule"}},289546:function(e,i,t){t.d(i,{s:function(){return o}});var o={UnknowPrivilege:0,0:"UnknowPrivilege",Unknow2Privilege:1,1:"Unknow2Privilege",PromptPrivilege:2,2:"PromptPrivilege",FactionPrivilege:3,3:"FactionPrivilege",WordPrivilege:4,4:"WordPrivilege",SliencePrivilege:5,5:"SliencePrivilege",BlockPrivilege:6,6:"BlockPrivilege",LinkMicPrivilege:7,7:"LinkMicPrivilege",VotePrivilege:8,8:"VotePrivilege",WishPrivilege:9,9:"WishPrivilege",LittleGamePrivilege:10,10:"LittleGamePrivilege",ScreenChatPrivilege:11,11:"ScreenChatPrivilege",CommentOnWallPrivilege:12,12:"CommentOnWallPrivilege",AdminDanmakuPrivilege:13,13:"AdminDanmakuPrivilege",LinkmicGuestBattlePrivilege:14,14:"LinkmicGuestBattlePrivilege",LinkmicTeamFightPrivilege:15,15:"LinkmicTeamFightPrivilege",LinkmicRoomBattlePrivilege:16,16:"LinkmicRoomBattlePrivilege",LinkmicRoomOrderSing:17,17:"LinkmicRoomOrderSing",UnionAnchorProvilege:18,18:"UnionAnchorProvilege",AudienceLinkmicPlaymodeControl:19,19:"AudienceLinkmicPlaymodeControl",EnlargeGuest:20,20:"EnlargeGuest",SetPositionName:21,21:"SetPositionName",PinPrivilege:22,22:"PinPrivilege",ScreenRecordPrivilege:23,23:"ScreenRecordPrivilege",ManageGameTeams:24,24:"ManageGameTeams"}},86468:function(e,i,t){t.d(i,{V0:function(){return n},xs:function(){return o}});var o={Scene_Unknown:0,0:"Scene_Unknown",Scene_PK:1,1:"Scene_PK",Scene_AnchorLinkmic:2,2:"Scene_AnchorLinkmic",Scene_VirutalPK:3,3:"Scene_VirutalPK",Scene_AudienceLinkmic:4,4:"Scene_AudienceLinkmic",Scene_AudioChatRoom:5,5:"Scene_AudioChatRoom",Scene_CloudGame:6,6:"Scene_CloudGame",Scene_AnchorMultiLinkmic:7,7:"Scene_AnchorMultiLinkmic",Scene_VideoChatRoom:8,8:"Scene_VideoChatRoom",Scene_KTV:9,9:"Scene_KTV",Scene_ShareVideo:10,10:"Scene_ShareVideo",Scene_ShareKTV:11,11:"Scene_ShareKTV",Scene_VideoEqualRoom:12,12:"Scene_VideoEqualRoom",Scene_VideoKTV:13,13:"Scene_VideoKTV",Scene_GameAnchorLinkmic:14,14:"Scene_GameAnchorLinkmic",Scene_GameAnchorLinkmicWithLayout:15,15:"Scene_GameAnchorLinkmicWithLayout",Scene_CrossRoomLinkmic:16,16:"Scene_CrossRoomLinkmic",Scene_MediaLinkmic:17,17:"Scene_MediaLinkmic",Scene_AudioChannelRoom:18,18:"Scene_AudioChannelRoom",Scene_CommentaryLinkmic:19,19:"Scene_CommentaryLinkmic",Scene_Default:100,100:"Scene_Default"},n={LinkmicPlayMode_Unknown:0,0:"LinkmicPlayMode_Unknown",LinkmicPlayMode_VideoFriend:1,1:"LinkmicPlayMode_VideoFriend",LinkmicPlayMode_VideoChatFloatWindowLayout:2,2:"LinkmicPlayMode_VideoChatFloatWindowLayout",linkmicPlayMode_MultiPK:3,3:"linkmicPlayMode_MultiPK",LinkmicPlayMode_DynamicLayout:4,4:"LinkmicPlayMode_DynamicLayout",LinkmicPlayMode_GuestBattle:5,5:"LinkmicPlayMode_GuestBattle",LinkmicPlayMode_KTVSingingChallenge:6,6:"LinkmicPlayMode_KTVSingingChallenge",LinkmicPlayMode_Teamfight:7,7:"LinkmicPlayMode_Teamfight",LinkmicPlayMode_AnchorKTV:8,8:"LinkmicPlayMode_AnchorKTV",LinkmicPlayMode_BGMKTV:9,9:"LinkmicPlayMode_BGMKTV",LinkmicPlayMode_VideoKTV:10,10:"LinkmicPlayMode_VideoKTV",LinkmicPlayMode_NormalPaidLinkmic:11,11:"LinkmicPlayMode_NormalPaidLinkmic",LinkmicPlayMode_BidPaidLinkmic:12,12:"LinkmicPlayMode_BidPaidLinkmic",LinkmicPlayMode_VideoEnlargeGuest:13,13:"LinkmicPlayMode_VideoEnlargeGuest",LinkmicPlayMode_VideoEqual_Top1V8:14,14:"LinkmicPlayMode_VideoEqual_Top1V8",LinkmicPlayMode_MultiPK_Team:15,15:"LinkmicPlayMode_MultiPK_Team",LinkmicPlayMode_RoomBattle:16,16:"LinkmicPlayMode_RoomBattle",LinkmicPlayMode_SelfDiscipline:17,17:"LinkmicPlayMode_SelfDiscipline",LinkmicPlayMode_DuoBattle:18,18:"LinkmicPlayMode_DuoBattle",LinkmicPlayMode_OrderSing:19,19:"LinkmicPlayMode_OrderSing",LinkmicPlayMode_InteractiveScreenCast:20,20:"LinkmicPlayMode_InteractiveScreenCast",LinkmicPlayMode_KTVComponent:21,21:"LinkmicPlayMode_KTVComponent",LinkmicPlayMode_ThemedCompetition:22,22:"LinkmicPlayMode_ThemedCompetition",LinkmicPlayMode_Chorus:23,23:"LinkmicPlayMode_Chorus",LinkmicPlayMode_AudioChat_1_PLUS_8:24,24:"LinkmicPlayMode_AudioChat_1_PLUS_8",LinkmicPlayMode_AudioChat_3x3_ONE_ENMPTY:25,25:"LinkmicPlayMode_AudioChat_3x3_ONE_ENMPTY",LinkmicPlayMode_AudioChat_3x3_N_EMPTY:26,26:"LinkmicPlayMode_AudioChat_3x3_N_EMPTY",LinkmicPlayMode_VotePlay:27,27:"LinkmicPlayMode_VotePlay",LinkmicPlayMode_ShellPlay:28,28:"LinkmicPlayMode_ShellPlay",LinkmicPlayMode_Adventure:29,29:"LinkmicPlayMode_Adventure",LinkmicPlayMode_Breakthrough:30,30:"LinkmicPlayMode_Breakthrough",LinkmicPlayMode_GameBarrage:31,31:"LinkmicPlayMode_GameBarrage",LinkmicPlayMode_AudioSubtitle:32,32:"LinkmicPlayMode_AudioSubtitle",LinkmicPlayMode_Survival:33,33:"LinkmicPlayMode_Survival",LinkmicPlayMode_StarWish:34,34:"LinkmicPlayMode_StarWish",LinkmicPlayMode_MV:35,35:"LinkmicPlayMode_MV",LinkmicPlayMode_RealTimeChorus:36,36:"LinkmicPlayMode_RealTimeChorus",LinkmicPlayMode_GuestLink:37,37:"LinkmicPlayMode_GuestLink",LinkmicPlayMode_GameBarrageLink:38,38:"LinkmicPlayMode_GameBarrageLink",LinkmicPlayMode_ChorusConcert:39,39:"LinkmicPlayMode_ChorusConcert",LinkmicPlayMode_ChestGame:40,40:"LinkmicPlayMode_ChestGame",LinkmicPlayMode_GiftComment:41,41:"LinkmicPlayMode_GiftComment"}},534552:function(e,i,t){t.d(i,{NM:function(){return r},V9:function(){return o},q2:function(){return n}});var o={NONE:0,0:"NONE",AL_IsTurnOn:1,1:"AL_IsTurnOn",AL_AcceptMultiLinkmic:2,2:"AL_AcceptMultiLinkmic",AL_AcceptNotFollowerInvite:3,3:"AL_AcceptNotFollowerInvite",AL_AllowGiftToOtherAnchors:4,4:"AL_AllowGiftToOtherAnchors",PK_IsTurnOn:5,5:"PK_IsTurnOn",PK_AcceptNotFollowerInvite:6,6:"PK_AcceptNotFollowerInvite",PK_AllowGiftToOtherAnchors:7,7:"PK_AllowGiftToOtherAnchors",AU_IsTurnOn:8,8:"AU_IsTurnOn",AU_BigPartyAcceptNeedVerified:9,9:"AU_BigPartyAcceptNeedVerified",AU_BigPartyOnlyAcceptFollowerApply:10,10:"AU_BigPartyOnlyAcceptFollowerApply",AU_BigPartyGuestCanAcceptGift:11,11:"AU_BigPartyGuestCanAcceptGift",AU_IntimateChatOnlyAcceptFollowerApply:12,12:"AU_IntimateChatOnlyAcceptFollowerApply",AU_IntimateChatGuestCanAcceptGift:13,13:"AU_IntimateChatGuestCanAcceptGift",AU_IntimateChatOnlyJoinThroughInvitation:14,14:"AU_IntimateChatOnlyJoinThroughInvitation",AU_IntimateChatAcceptNeedVerified:15,15:"AU_IntimateChatAcceptNeedVerified",AU_AudioChatAcceptNeedVerified:16,16:"AU_AudioChatAcceptNeedVerified",AU_AudioChatOnlyAcceptFollowerApply:17,17:"AU_AudioChatOnlyAcceptFollowerApply",AU_AudioChatGuestCanAcceptGift:18,18:"AU_AudioChatGuestCanAcceptGift",AU_BigPartyAllowAdminOperateAudience:19,19:"AU_BigPartyAllowAdminOperateAudience",AU_IntimateChatAllowAdminOperateAudience:20,20:"AU_IntimateChatAllowAdminOperateAudience",AU_AudioChatAllowAdminOperateAudience:21,21:"AU_AudioChatAllowAdminOperateAudience",AU_BigPartyEmojiEntrance:22,22:"AU_BigPartyEmojiEntrance",AU_AudioChatEmojiEntrance:23,23:"AU_AudioChatEmojiEntrance",AU_AllowAdminOperateAudience:24,24:"AU_AllowAdminOperateAudience",AU_OfficialChannelHostCanAcceptGift:25,25:"AU_OfficialChannelHostCanAcceptGift",PK_AcceptFriendInvite:26,26:"PK_AcceptFriendInvite",PK_AcceptHourlyRankInvite:27,27:"PK_AcceptHourlyRankInvite",AU_InteractEmojiEntrance:28,28:"AU_InteractEmojiEntrance",AU_EmojiWithSound:29,29:"AU_EmojiWithSound",PK_PrecisionMatch:30,30:"PK_PrecisionMatch",PK_PrecisionMatchPreferGender:31,31:"PK_PrecisionMatchPreferGender",PK_PrecisionMatchFrequency:32,32:"PK_PrecisionMatchFrequency",AU_BigPartyAllowAudienceOpenVideo:33,33:"AU_BigPartyAllowAudienceOpenVideo",AU_KTVAllowAudienceOpenVideo:34,34:"AU_KTVAllowAudienceOpenVideo",AU_KTVGuideSongSwitch:35,35:"AU_KTVGuideSongSwitch",AU_IntimateChatAllowAudienceOpenVideo:36,36:"AU_IntimateChatAllowAudienceOpenVideo",AU_ApplyStrongReminderEntrance:37,37:"AU_ApplyStrongReminderEntrance",AU_KTVEnableBeatComponent:39,39:"AU_KTVEnableBeatComponent",AU_BigPartyOnlyJoinThroughInvitation:40,40:"AU_BigPartyOnlyJoinThroughInvitation",AU_IntimateChatPaiedCount:41,41:"AU_IntimateChatPaiedCount",AU_IntimateChatLimitedTime:42,42:"AU_IntimateChatLimitedTime",AU_BigPartyPaiedCount:43,43:"AU_BigPartyPaiedCount",AU_BigPartyLimitedTime:44,44:"AU_BigPartyLimitedTime",AU_AddLinkmicTime:45,45:"AU_AddLinkmicTime",AU_AudioChatPlayMode:46,46:"AU_AudioChatPlayMode",AU_IsAudioChatPreLinkmicTurnOn:47,47:"AU_IsAudioChatPreLinkmicTurnOn",AU_BigPartyEnableDynamicLayout:48,48:"AU_BigPartyEnableDynamicLayout",AU_BigPartyEnableEqual:49,49:"AU_BigPartyEnableEqual",PK_AcceptPopularityRankInvite:50,50:"PK_AcceptPopularityRankInvite",AU_IntimateChatApplicationReason:51,51:"AU_IntimateChatApplicationReason",AU_BigPartyAudienceDefaultOpenVideo:52,52:"AU_BigPartyAudienceDefaultOpenVideo",AU_KTVEnableAtmosphere:53,53:"AU_KTVEnableAtmosphere",AU_KTVEnableColdStartSongList:54,54:"AU_KTVEnableColdStartSongList",AU_KTVEnableAvatar:55,55:"AU_KTVEnableAvatar",AU_KTVFriendsGroup:56,56:"AU_KTVFriendsGroup",AU_IntimateChatBidPaidLinkmic:57,57:"AU_IntimateChatBidPaidLinkmic",AU_WaitingListSortStrategy:58,58:"AU_WaitingListSortStrategy",AU_AutoInitInfo:59,59:"AU_AutoInitInfo",AU_VideoChatEnableDynamic:60,60:"AU_VideoChatEnableDynamic",AU_EnableAudienceLinkmic:61,61:"AU_EnableAudienceLinkmic",AU_VideoChatAcceptAudienceApply:62,62:"AU_VideoChatAcceptAudienceApply",AU_NormalPaidLinkmicConfig:63,63:"AU_NormalPaidLinkmicConfig",AU_NormalPaidLinkmicExplainCard:64,64:"AU_NormalPaidLinkmicExplainCard",AU_NormalPaidLinkmicDesc:65,65:"AU_NormalPaidLinkmicDesc",AU_IntimateChatNormalPaidLinkmicConfig:66,66:"AU_IntimateChatNormalPaidLinkmicConfig",AU_IntimateChatBidPaidLinkmicConfig:67,67:"AU_IntimateChatBidPaidLinkmicConfig",AU_KTVChallengeConfig:68,68:"AU_KTVChallengeConfig",AU_RoomBattleConfig:69,69:"AU_RoomBattleConfig",AU_NormalPaidLinkmicAddPriceConfig:70,70:"AU_NormalPaidLinkmicAddPriceConfig",AU_VideoChatBidPaidLinkmicConfig:71,71:"AU_VideoChatBidPaidLinkmicConfig",AU_GuestBattleConfig:72,72:"AU_GuestBattleConfig",AU_TeamFightConfig:73,73:"AU_TeamFightConfig",PK_AcceptVolumeUp:75,75:"PK_AcceptVolumeUp",AU_SelfDisciplineConfig:76,76:"AU_SelfDisciplineConfig",AU_linkmicAutoSilence:77,77:"AU_linkmicAutoSilence",AU_PriorSong:78,78:"AU_PriorSong",AU_DuoBattleConfig:80,80:"AU_DuoBattleConfig",AU_RadioAcceptAudiencePreApply:81,81:"AU_RadioAcceptAudiencePreApply",AU_KTVAutoLeave:82,82:"AU_KTVAutoLeave",AU_KTVLyricMode:87,87:"AU_KTVLyricMode",AU_InitVideoChatFromAudienceLinkmic:88,88:"AU_InitVideoChatFromAudienceLinkmic",AU_PaidQueue:89,89:"AU_PaidQueue",AU_KTVComponent:90,90:"AU_KTVComponent",AU_KTVMidiMode:92,92:"AU_KTVMidiMode",AU_ClearGuestRankList:93,93:"AU_ClearGuestRankList",AU_AudioSubtitle:94,94:"AU_AudioSubtitle",AU_AutoOpenLinkmic:95,95:"AU_AutoOpenLinkmic",AU_StarWish:96,96:"AU_StarWish",AU_AdventureConfig:100,100:"AU_AdventureConfig",AL_UnionInvite:101,101:"AL_UnionInvite",AU_KTVMultiChorusConfig:102,102:"AU_KTVMultiChorusConfig",AU_KTVMultiChorusConfigV2:103,103:"AU_KTVMultiChorusConfigV2",AL_AcceptBigSmallLayout:104,104:"AL_AcceptBigSmallLayout",AU_EnlargeGuestEqual1V8:105,105:"AU_EnlargeGuestEqual1V8",AU_OrderSingConf:106,106:"AU_OrderSingConf",AU_GuestLinkConfig:107,107:"AU_GuestLinkConfig",AU_KTVStageHideLyricsSwitch:108,108:"AU_KTVStageHideLyricsSwitch",AU_Audio1V8EnlargeStageSwitch:109,109:"AU_Audio1V8EnlargeStageSwitch",AU_ChestGame:111,111:"AU_ChestGame",AU_GiftComment:112,112:"AU_GiftComment"},n={UNSET:0,0:"UNSET",OPEN:1,1:"OPEN",OFF:2,2:"OFF",ONLY_FOLLOWING_USER:20,20:"ONLY_FOLLOWING_USER",ONLY_FANS_CLUB_USER:21,21:"ONLY_FANS_CLUB_USER",ONLY_FANS:22,22:"ONLY_FANS",ALL_USERS:23,23:"ALL_USERS",AUDIO_CHAT_ONE_PLUS_EIGHT:24,24:"AUDIO_CHAT_ONE_PLUS_EIGHT",AUDIO_CHAT_THREE_TIMES_THREE_ONE_EMPTY:25,25:"AUDIO_CHAT_THREE_TIMES_THREE_ONE_EMPTY",AUDIO_CHAT_THREE_TIMES_THREE_N_EMPTY:26,26:"AUDIO_CHAT_THREE_TIMES_THREE_N_EMPTY",WAITING_LIST_SORT_STRATEGY_APPLY_TIME:40,40:"WAITING_LIST_SORT_STRATEGY_APPLY_TIME",WAITING_LIST_SORT_STRATEGY_FAN_TICKET:41,41:"WAITING_LIST_SORT_STRATEGY_FAN_TICKET",WAITING_LIST_SORT_STRATEGY_RECOMEND:42,42:"WAITING_LIST_SORT_STRATEGY_RECOMEND"},r={SWITCH_UNSET:0,0:"SWITCH_UNSET",SWITCH_ON:1,1:"SWITCH_ON",SWITCH_OFF:2,2:"SWITCH_OFF"}},398749:function(e,i,t){t.d(i,{FD:function(){return S},IK:function(){return L},Md:function(){return f},PG:function(){return u},PL:function(){return h},To:function(){return m},W5:function(){return y},dP:function(){return c},du:function(){return a},gQ:function(){return _},hN:function(){return v},q7:function(){return p},sG:function(){return g},x$:function(){return d}});var o=t(520739),n=t(878389);t(527785),t(874386),t(429532),t(981168),t(673554),t(784246);var r=t(207813),l=t.n(r),a={EffectDefault:0,0:"EffectDefault",Fog:1,1:"Fog",FierceBuff:2,2:"FierceBuff",BorrowedBuff:3,3:"BorrowedBuff",FreezeBuff:4,4:"FreezeBuff"};let s={},d=e=>{try{var i;let t=JSON.parse(e);return Object.entries(null!==(i=t.anchor_effect_map)&&void 0!==i?i:{}).reduce((e,i)=>{let[t,r]=i;return Object.assign(e,{[t]:Object.entries(r.effect_map||{}).reduce((e,i)=>{let[r,a]=i,d=(null==a?void 0:a.effect_list)||[];if(4===Number(r))for(let e of a.effect_list){if(t in s&&Number(e.prop_card_task.version)<s[t]){d=d.filter(i=>!l()(i,e));continue}s[t]=Number(e.prop_card_task.version)}return(null==d?void 0:d.length)?(0,n._)((0,o._)({},e),{[r]:Array.from(d).sort((e,i)=>Number(null==i?void 0:i.is_super_prop)-Number(null==e?void 0:e.is_super_prop))}):e},{})})},{})}catch(e){return{}}},u=(e,i,t)=>{try{let r=Object.entries(e).reduce((e,i)=>{var r;let[l,a]=i,d=Object.entries(a).reduce((e,i)=>{let[r,a]=i,d=null==a?void 0:a.filter(e=>{if(4===Number(r))return(null==e?void 0:e.prop_card_task.current_value)!==0&&(null==e?void 0:e.prop_card_task.current_value_str)!=="0"||(delete s[l],!1);let i=Date.now(),o=Number(null==e?void 0:e.end_time)>=i;if(!t)return o;let n=Number(null==e?void 0:e.start_time)<=i;return o&&n});return(null==d?void 0:d.length)?(0,n._)((0,o._)({},e),{[r]:d}):e},{});return(null===(r=Object.keys(d))||void 0===r?void 0:r.length)?(0,n._)((0,o._)({},e),{[l]:d}):e},{});if(l()(r,i))return i;return r}catch(e){return{}}},c=e=>!Object.keys(e||{}).length,h=(e,i)=>{let t=i[e]||{},o=[2,3,1,4].map(e=>Array.from(t[e]||[]).sort((e,i)=>Number(null==i?void 0:i.is_super_prop)-Number(null==e?void 0:e.is_super_prop))).filter(Boolean).flat(1),n=o.find(e=>4===e.type);return{effectList:o,firstEffect:n||o[0],anchorEffectMap:t}},_=e=>{let i=Date.now();return Number(e.start_time)<=i&&Number(e.end_time)>=i},m=e=>{for(let i of Object.values(e)){let e=(i[1]||[]).find(e=>null==e?void 0:e.is_super_prop);if(e)return e}return null},v=e=>null==e?void 0:e.some(e=>null==e?void 0:e.is_super_prop),f=e=>{let{anchorId:i,anchorEffectInfoMap:t,type:o}=e;return(t[i]||{})[o]},p=e=>1===e,g=e=>2===e,y=e=>4===e,S=e=>{var i,t,o,n,r,l;let a=null==e?void 0:null===(t=e.bar_icon)||void 0===t?void 0:null===(i=t.url_list)||void 0===i?void 0:i[0],s=null==e?void 0:null===(n=e.bar_aura_url)||void 0===n?void 0:null===(o=n.url_list)||void 0===o?void 0:o[0];return{barIcon:a,barAuraIcon:s,barMiniIcon:null==e?void 0:null===(l=e.bar_min_icon)||void 0===l?void 0:null===(r=l.url_list)||void 0===r?void 0:r[0]}},A={4194:2,4195:3,4196:1},L=e=>[2,3,1].find(i=>A[e]===i)},609234:function(e,i,t){t.d(i,{P:function(){return p},n:function(){return _}}),t(675373),t(874386);var o=t(302653),n=t.n(o),r=t(782563),l=t(375944),a=t(572076),s=t(687297),d=t(516599),u=t(342583),c=t(491701);let h=async()=>Promise.all([Promise.all([t.e("76746"),t.e("56689"),t.e("52734"),t.e("94761")]).then(t.bind(t,665072)),Promise.all([t.e("76746"),t.e("52734"),t.e("59379")]).then(t.bind(t,629058))]).then(e=>{let[{singleEngineInstance:i},{VERTC:t}]=e;return{VERTC:t,singleEngineInstance:i}}),_=e=>h().then(async i=>{let{VERTC:t,singleEngineInstance:o}=i,{linkRoomType:a}=e||{};return await o({linkRoomType:a}),t.enumerateDevices().then(e=>{let i=(0,r.DT)()&&(0,l.O)(),t=n()(e.filter(e=>"audioinput"===e.kind&&("default"!==e.deviceId||i)),"groupId");return{audioInputs:t,videoInputs:n()(e.filter(e=>"videoinput"===e.kind&&e.deviceId&&("default"!==e.deviceId||i)),"groupId")}})}),m=async(e,i)=>"granted"===(await a.invoke("GET_MEDIA_ACCESS_STATUS",{data:e})).data||!!(await a.invoke("ASK_FOR_MEDIA_ACCESS",{data:e})).data||(i&&d.F.info(i),!1),v=async()=>{let{VERTC:e}=await h();return await e.enableDevices()},f=(0,u.ZP)(v),p=async e=>{var i,t;if((null===(t=(0,l.fV)())||void 0===t?void 0:null===(i=t.os)||void 0===i?void 0:i.toLowerCase())==="mac"&&(0,r.DT)()){let{data:i}=await a.invoke("GET_VERSION"),t=i?null==i?void 0:i.version:"",o=!1,n=!1;return(0,s.y)(t,">=","1.1.0")?(n=await m("microphone","请授权扬声器与麦克风权限, 否则无法连麦"))&&e===c.j5.CAMERA&&(o=(o=await m("camera","请授权摄像头权限, 否则无法连麦"))||await m("screen","请授权摄像头权限, 否则无法连麦")):d.F.info("当前版本暂不支持该功能，请升级至最新版本体验"),{video:o,audio:n}}return f().then(e=>{{var i,t,o,n;let{rtcEvent:r}=window.__STORE__.eventStore;r.livesdkRtcAudioVideoAuthEvent({audio:e.audio,video:e.video,audioErrorMessage:(null==e?void 0:null===(i=e.audioExceptionError)||void 0===i?void 0:i.message)||"",audioErrorName:(null==e?void 0:null===(t=e.audioExceptionError)||void 0===t?void 0:t.name)||"",videoErrorMessage:(null==e?void 0:null===(o=e.videoExceptionError)||void 0===o?void 0:o.message)||"",videoErrorName:(null==e?void 0:null===(n=e.videoExceptionError)||void 0===n?void 0:n.name)||""})}return e}).catch(e=>{{var i;let{rtcEvent:t}=window.__STORE__.eventStore;t.livesdkRtcAudioVideoAuthFailEvent({error:(null===(i=JSON)||void 0===i?void 0:i.stringify(e))||""})}return{video:!1,audio:!1}})}},445361:function(e,i,t){t.d(i,{Qx:function(){return a},ic:function(){return d},ut:function(){return s}});var o=t(520739),n=t(878389);t(874386),t(527785);var r=t(779145),l=t.n(r);let a=e=>{let i=l()(e),t=null==i?void 0:i.findIndex(e=>{var i,t,o;return null==e?void 0:null===(o=e.user)||void 0===o?void 0:null===(t=o.content)||void 0===t?void 0:null===(i=t.linkmic_audience_content)||void 0===i?void 0:i.is_enlarged});if(-1!==t&&0!==t){let[e,...r]=i,l=r.filter(e=>(null==e?void 0:e.idx)!==t).filter(i=>{var t,o,n,r;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)!==(null==e?void 0:null===(r=e.user)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:n.id_str)});return[i[t],e,...l].reduce((e,i,t)=>(0,n._)((0,o._)({},e),{[t]:i}),{})}return e},s=e=>{let i=l()(e);return null==i?void 0:i.findIndex(e=>{var i,t,o;return null==e?void 0:null===(o=e.user)||void 0===o?void 0:null===(t=o.content)||void 0===t?void 0:null===(i=t.linkmic_audience_content)||void 0===i?void 0:i.is_enlarged})},d=e=>-1!==s(e)},451047:function(e,i,t){t.d(i,{TC:function(){return h},Zi:function(){return c},fl:function(){return m},vD:function(){return _}}),t(675373),t(874386),t(209955);var o=t(563097),n=t(88648),r=t(797973),l=t(254575),a=t(96008),s=t.n(a),d=t(388862),u=t(235755);let c="default_pip_id",h=(0,n.createContext)({isSupported:!1,pipInfo:null,openPipWindow:()=>Promise.resolve({isSuccess:!1}),closePipWindow:s(),pipAnchorEleMapRef:{current:{}}}),_=e=>{let{children:i}=e,[t,a]=(0,n.useState)((0,d.ZV)()),s=(0,n.useRef)({}),[_,m]=(0,n.useState)(null),v=(0,r.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;(null==_?void 0:_.pipId)===e&&(_.window.close(),m(null))}),f=(0,l.Z)(async e=>{let{width:i,height:o,pipId:n=c}=e;try{if(!t)throw Error("Not Supported");if((null==_?void 0:_.pipId)===n)return{isSuccess:!0,pipInfo:_};let e=await (0,u.hp)({pipId:n,width:i,height:o});e.addEventListener("pagehide",()=>v(n));let r={window:e,pipId:n};return m(r),{isSuccess:!0,pipInfo:r}}catch(e){return e&&11===e.code&&a(!1),{isSuccess:!1,error:e}}}),p=(0,n.useMemo)(()=>({isSupported:t,pipInfo:_,openPipWindow:f,closePipWindow:v,pipAnchorEleMapRef:s}),[v,_,t,f,s]);return(0,o.jsx)(h.Provider,{value:p,children:i})},m=()=>(0,n.useContext)(h)},999108:function(e,i,t){t.d(i,{F6:function(){return c},TY:function(){return h},pu:function(){return _}});var o=t(520739),n=t(878389),r=t(368200),l=t(563097),a=t(88648),s=t(309931);t(96008);var d=t(451047),u=t(235755);let c=e=>{let{children:i,pipId:t=d.Zi}=e,{pipInfo:o}=(0,d.fl)();return o&&o.pipId===t?(0,s.createPortal)(i,o.window.document.body):null},h=e=>{var{children:i,pipAnchorId:t,placeholder:c,className:h}=e,_=(0,r._)(e,["children","pipAnchorId","placeholder","className"]);let{pipInfo:m,pipAnchorEleMapRef:v}=(0,d.fl)(),f=(0,a.useRef)(null),p=(0,a.useMemo)(u.ie,[]);return p&&(v.current[t]=p),(0,a.useEffect)(()=>()=>{delete v.current[t]},[t,v]),(0,a.useEffect)(()=>{var e;if(!m&&!!p)null===(e=f.current)||void 0===e||e.appendChild(p)},[p,m]),(0,l.jsxs)("div",(0,n._)((0,o._)({ref:f,"data-anchor-id":t,className:h},_),{children:[m?c:null,p?(0,s.createPortal)(i,p):i]}))},_=e=>{var{pipAnchorId:i}=e,t=(0,r._)(e,["pipAnchorId"]);let n=(0,a.useRef)(null),{pipAnchorEleMapRef:s,pipInfo:u}=(0,d.fl)();return(0,a.useEffect)(()=>{let e=s.current[i];if(!!u&&!!n.current&&!!e)n.current.appendChild(e)},[i,s,u]),(0,l.jsx)("div",(0,o._)({"data-anchor-id":i,ref:n},t))}},694872:function(e,i,t){var o=t(520739),n=t(878389),r=t(563097),l=t(88648);let a=(0,l.forwardRef)((e,i)=>(0,r.jsx)("svg",(0,n._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.5 10H10v11h6.25a1 1 0 1 1 0 2H10a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h12.5a2 2 0 0 1 2 2v4.5a1 1 0 1 1-2 0V10zm-4.883 2.384a.878.878 0 0 0-.877-.877h-3.51a.878.878 0 0 0-.878.877v3.511a.878.878 0 1 0 1.755 0v-1.348l2.695 2.696a.878.878 0 0 0 1.242-1.241l-2.74-2.74h1.436a.878.878 0 0 0 .878-.878zm1.491 6.116a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-4z",fill:"#fff"})})));i.Z=a}}]);