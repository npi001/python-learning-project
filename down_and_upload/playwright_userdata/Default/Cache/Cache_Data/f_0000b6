(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["21189"],{177948:function(e,t,n){"use strict";n.d(t,{f:function(){return i},w:function(){return s}});var o=n(985493),r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(){function e(e){this.enable=!1,this.traceID=this.getTraceId(),this.enable=!!(null==e?void 0:e.autoTrace)}return e.prototype.getUUID=function(){var e=new Date().getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx".replace(/[xy]/g,function(n){var o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===n?o:3&o|8).toString(16)})},e.prototype.getTraceId=function(){return this.getUUID().replace(/-/g,"")},e.prototype.start=function(){this.enable=!0},e.prototype.stop=function(){this.enable=!1},e}(),s=function(e){return function(t){return(null==e?void 0:e.enable)?((0,o.d8)("biz_trace_id",e.traceID||"","/",(0,o.Z_)()),t.headers=r(r({},t.headers||{}),{"x-tt-passport-trace-id":e.traceID||""}),t.params=r(r({},t.params||{}),{biz_trace_id:e.traceID||""})):(0,o.d8)("biz_trace_id","","/",(0,o.Z_)()),t}}},963212:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var o="x-tt-passport-aid-sign"},340699:function(e,t,n){"use strict";var o=n(539966),r=n.n(o),i=n(885774),s=function(){return(s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.Z=function(e){return function(t){var n=t.baseURL,o=t.url,a=t.method,c=void 0===a?"GET":a,u=t.params,d=void 0===u?{}:u,l=t.data,_=void 0===l?{}:l,p=null==e?void 0:e.fetch,v=(null==e?void 0:e.printLog)||!1,f=r().isValid(o)?o:n+o;return v&&(0,i.Jz)("".concat(c," ").concat(f," >>>>"),{"data >>>>":_,"params >>>>":d},!1),p({url:f,method:c.toUpperCase(),params:s(s({},d),{is_native_h5:1}),data:_,needCommonParams:!0,header:{"x-tt-passport-csrf-token":(0,i.ej)("passport_csrf_token")||(0,i.ej)("passport_csrf_token_default")||""}}).then(function(e){return{data:e,status:200,statusText:"ok",config:t}})}}},442664:function(e,t,n){"use strict";var o=n(428775),r=n.n(o),i=n(103356),s=n(177948),a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.Z=function(e,t){var n=e.host,o=e.isBoe,c=e.axiosConfig,u=e.requestInterceptors,d=e.responseInterceptors,l=r().create(a(a({},c),{xsrfCookieName:"passport_csrf_token",xsrfHeaderName:"x-tt-passport-csrf-token",baseURL:n||window&&"".concat(o?window.location.protocol:"https:","//").concat(window.location.hostname),withCredentials:!0}));return l.interceptors.request.use(function(t){return(0,i.bb)(t,e)},void 0),l.interceptors.request.use(function(t){return(0,i.IK)(t,e)},void 0),l.interceptors.request.use((0,s.w)(t)),u&&Array.isArray(u)&&u.forEach(function(e){l.interceptors.request.use(function(t){return e(t)},void 0)}),d&&Array.isArray(d)&&d.forEach(function(e){l.interceptors.response.use(function(t){return e(t)},function(t){return e(t)})}),l.interceptors.response.use(function(t){return(0,i.e4)(t,e)},function(t){return(0,i.nC)(t,e)}),l}},355469:function(e,t,n){"use strict";n.d(t,{ZP:function(){return v}});var o,r=n("515518"),i=function(e){var t,n;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return t?Promise.resolve(t):(!n&&(n=new Promise(function(r,i){e.apply(void 0,o).then(function(e){e&&(t=e),r(e),n=void 0}).catch(function(e){i(e),n=void 0})})),n)}},s=function(e,t){var n,o,r;return void 0===t&&(t=60),function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=(null==i?void 0:i[0]).force;return(void 0!==a&&a&&(r=0),n&&r&&Date.now()-r<1e3*t)?Promise.resolve(n):(!o&&(o=new Promise(function(t,s){e.apply(void 0,i).then(function(e){e&&(n=e),r=Date.now(),t(e),o=void 0}).catch(function(e){s(e),o=void 0})})),o)}};var a=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},d=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l="x-tt-verify-passport-decision",_="/passport/safe/get_identity_security_token/",p=function(e){function t(t){var n=e.call(this,"IdentitySecurityTokenError")||this;return n.name="IdentitySecurityTokenError",n.data=t,n}return a(t,e),t}(Error),v=function(){function e(e){var t=this;this.expireTime=1200,this.errorCount=0,this.initSecureSdk=function(){return u(t,void 0,void 0,function(){var e,t,o;return d(this,function(r){switch(r.label){case 0:if(!(null==window?void 0:window.secureSdk))return[3,1];return this.secureSdk=window.secureSdk,[3,3];case 1:return[4,Promise.resolve().then(n.bind(n,251354))];case 2:e=r.sent().SecureSDK,this.secureSdk=e,r.label=3;case 3:return null===(t=this.secureSdk)||void 0===t||t.setConfig({scene:"web_protect",consumerPathList:[_],certType:"cookie",signVersion:2,excludeSetCachePathList:[_]}),null===(o=this.secureSdk)||void 0===o||o.start(),[2]}})})},this.initSecondVerify=i(function(){return u(t,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,n.e("62579").then(n.bind(n,478767))];case 1:return(e=t.sent().default).init(c({aid:this.initProps.aid,isNewVerifyUI:!0},this.secondVerifyInitProps||{})),[2,e.verify.bind(e)]}})})}),this.secondVerify=function(e){return u(t,void 0,void 0,function(){var t,n,o;return d(this,function(o){switch(o.label){case 0:if(!e)return[2,!1];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.initSecondVerify()];case 2:return t=o.sent(),[4,t(JSON.parse(e))];case 3:if(!(n=o.sent())||!n.status)return[2,!1];return[2,!0];case 4:return o.sent(),[2,!1];case 5:return[2]}})})},this.getIdentitySecurityTokenRequest=function(e){var n=e.scene,o=e.skip_verify,r=void 0!==o&&o,i=e.auto_retry_req,s=void 0===i?0:i,a=e.force,l=void 0!==a&&a;return u(t,void 0,void 0,function(){var e,t,o,i,a,u,v,f,h,y;return d(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this.request({url:_,params:{scene:n||"default",auto_retry_req:s,skip_verify:r,identity_token_force_get_tag:l?1:0}})];case 1:if(null==(e=d.sent())?void 0:e.identity_security_token)return[2,{identity_security_param:JSON.stringify({token:null==e?void 0:e.identity_security_token}),real_device_id:null==e?void 0:e.device_id}];return[2,Promise.reject(new p(c(c({},e),{error_code:-999})))];case 2:return o=(null===(v=null===(u=null==(t=d.sent())?void 0:t.rawData)||void 0===u?void 0:u.headers)||void 0===v?void 0:v["x-tt-verify-passport-decision"])?1:0,i=(null===(f=null==t?void 0:t.rawData)||void 0===f?void 0:f.isAxiosError)?1:0,a=(null===(y=null===(h=null==t?void 0:t.rawData)||void 0===h?void 0:h.headers)||void 0===y?void 0:y["x-tt-identity-zt-err"])?1:0,[2,Promise.reject(new p(c(c({},t||{}),{need_verify:o,is_network_error:i,is_zti_timeout_error:a})))];case 3:return[2]}})})},this.getIdentitySecurityTokenWithCache=s(this.getIdentitySecurityTokenRequest,1200),this.getIdentitySecurityToken=function(e,n){return void 0===n&&(n=!1),new Promise(function(o,r){t.getIdentitySecurityTokenWithCache(c({force:t.errorCount>0||n},e||{})).then(function(e){return t.cacheErrData=null,t.errorCount=0,o(e)}).catch(function(n){return"cold_start"!==e.scene&&(t.errorCount=1),r(n)})})},this.expireTime=(null==e?void 0:e.expireTime)||1200,this.errorCount=0,this.cacheErrData=null,this.getIdentitySecurityTokenWithCache=s(this.getIdentitySecurityTokenRequest,this.expireTime),this.initProps=e,!("boolean"==typeof e.enableSecureSdk&&!1===e.enableSecureSdk)&&this.initSecureSdk(),this.secondVerifyInitProps=c(c({},e.secondVerifyInitProps),{aid:e.aid}),this.request=new r.c(c(c({},e.requestConfig||{}),{aid:this.initProps.aid,generalParams:{id_token_version:"1.2.10"},responseInterceptors:[function(e){return u(t,void 0,void 0,function(){var t,n,o,r,i,s,a,u;return d(this,function(d){switch(d.label){case 0:if(d.trys.push([0,4,,5]),t=e.headers,i=null==(r=(null==(o=void 0===(n=e.config)?{}:n)?void 0:o.params)||{})?void 0:r.auto_retry_req,s=null==r?void 0:r.skip_verify,i||s)return[2,Promise.resolve(e)];if(!(null==t?void 0:t[l]))return[3,3];return[4,this.secondVerify(null==t?void 0:t[l])];case 1:if(!d.sent())return[3,3];return[4,this.request(c(c({},o),{params:c(c({},r),{auto_retry_req:1})}))];case 2:return[2,Promise.resolve(null==(a=d.sent())?void 0:a.rawData)];case 3:return[2,Promise.resolve(e)];case 4:return[2,Promise.resolve(null==(u=d.sent())?void 0:u.rawData)];case 5:return[2]}})})},function(e){return u(t,void 0,void 0,function(){var t,n,o;return d(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),(null==(t=e.config.params||{})?void 0:t.auto_retry_req)||(null===(o=null==e?void 0:e.headers)||void 0===o?void 0:o[l]))return[2,Promise.resolve(e)];if(!(e.isAxiosError||"success"!==e.data.message))return[3,2];return[4,this.request(c(c({},e.config),{params:c(c({},t),{auto_retry_req:1})}))];case 1:return[2,Promise.resolve(r.sent().rawData)];case 2:return[2,Promise.resolve(e)];case 3:return[2,Promise.resolve(null==(n=r.sent())?void 0:n.rawData)];case 4:return[2]}})})}]})),e.immediately&&this.getIdentitySecurityTokenWithCache({scene:"cold_start",skip_verify:!1}).catch(function(e){})}return e.instance=function(t){return!e._instance&&(e._instance=new e(t)),e._instance},e}()},45064:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var o=n(101380),r=n(621631),i=n(651889),s=n(592242),a=n(435588);class c extends a.W{SendMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({send_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,content:e.content,mentioned_users:e.mentionedUsers,client_message_id:e.clientId,ticket:e.ticket,message_type:e.messageType,ext:e.ext,ref_msg_info:e.referenceInfo}});return this.sendWithRawBody(t,r.m.IMCMD.SEND_MESSAGE,{inboxType:e.inboxType,maxRetryTimes:this.ctx.option.maxSendMsgRetryTimes})})}GetMessagesByUser(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({messages_per_user_body:{cursor:e.cursor,limit:e.limit}});try{return yield this.sendWithRawBody(t,r.m.IMCMD.GET_MESSAGES_BY_USER,{inboxType:e.inboxType,maxRetryTimes:1})}catch(t){return s.Y.ctxWarn(this.ctx,`pull user error:${t}, ignore`),r.m.Response.create({body:r.m.ResponseBody.create({messages_per_user_body:r.m.MessagesPerUserResponseBody.create({next_cursor:e.cursor,has_more:!1,messages:[]})})})}})}GetMessagesByUserInitV2(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({messages_per_user_init_v2_body:{cursor:e.cursor,init_sub_type:e.initSubType,conv_limit:e.convLimit,msg_limit:e.msgLimit,biz_tag_ids:e.tagIds,user_custom_tag_ids:e.userCustomTagIds}});return this.sendWithRawBody(t,r.m.IMCMD.GET_MESSAGES_BY_USER_INIT_V2,{inboxType:e.inboxType,forceHttp:!0,maxRetryTimes:10})})}GetMessagesByInit(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({message_by_init:{version:e.version,page:e.page,conv_limit:e.convLimit,msg_limit:e.msgLimit}});return this.sendWithRawBody(t,r.m.IMCMD.GET_MESSAGE_BY_INIT,{inboxType:e.inboxType,forceHttp:!0,maxRetryTimes:10})})}GetMessagesByConversation(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({messages_in_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,anchor_index:e.anchorIndex,limit:e.limit,direction:e.direction}});return this.sendWithRawBody(t,r.m.IMCMD.GET_MESSAGES_BY_CONVERSATION,{inboxType:e.inboxType,forceHttp:!0})})}CreateConversationV2(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({create_conversation_v2_body:{conversation_type:e.type,participants:e.participants,persistent:e.persistent,idempotent_id:e.idempotentId,name:e.name,avatar_url:e.avatarUrl,description:e.desc,biz_ext:e.bizExt}});return this.sendWithRawBody(t,r.m.IMCMD.CREATE_CONVERSATION_V2,{inboxType:e.inboxType})})}GetConversationInfoListV2(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({get_conversation_info_list_v2_body:{conversation_info_list:e.conversations.map(e=>({conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}))}});return this.sendWithRawBody(t,r.m.IMCMD.GET_CONVERSATION_INFO_LIST_V2,{inboxType:e.inboxType})})}MarkConversationReadV3(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({mark_conversation_read_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,read_message_index:e.readIndex,conv_unread_count:e.unreadCount,total_unread_count:e.totalUnreadCount,mute_read_badge_count_infos:e.muteReadBadgeCountInfos,read_badge_count:e.readBadgeCount}});return this.send(t,r.m.IMCMD.MARK_CONVERSATION_READ_V3,{inboxType:e.inboxType,maxRetryTimes:1})})}BatchMarkConversationReadV3(e){return(0,o.mG)(this,void 0,void 0,function*(){if(!e.batch.length)return;let t=r.m.RequestBody.create({batch_mark_read_body:{mark_read_requests:e.batch.map(e=>({conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,read_message_index:e.readIndex,conv_unread_count:e.unreadCount,total_unread_count:e.totalUnreadCount,read_message_index_v2:e.readIndexV2,mute_read_badge_count_infos:e.muteReadBadgeCountInfos,read_badge_count:e.readBadgeCount}))}});return this.send(t,r.m.IMCMD.BATCH_MARK_CONVERSATION_READ_V3,{inboxType:e.batch[0].inboxType,maxRetryTimes:1})})}RecallMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({recall_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverId}});return this.sendWithRawBody(t,r.m.IMCMD.RECALL_MESSAGE,{inboxType:e.inboxType})})}GetTicket(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({get_ticket_body:{ticket_type:i.HF.ticketType,conversation_type:e.conversationType,conversation_short_id:e.shortId,to_id:e.toId,ext:e.ext}});return(yield this.send(t,r.m.IMCMD.GET_TICKET,{inboxType:e.inboxType})).get_ticket_body})}GetConversationParticipantsList(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({conversation_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit}});return this.sendWithRawBody(t,r.m.IMCMD.CONVERSATION_PARTICIPANTS_LIST,{inboxType:e.inboxType})})}GetConversationParticipantByUserId(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({mget_conversation_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,participants:e.participants}});return this.sendWithRawBody(t,r.m.IMCMD.MGET_CONVERSATION_PARTICIPANTS,{inboxType:e.inboxType})})}ClientAck(e){return(0,o.mG)(this,void 0,void 0,function*(){try{let t=r.m.RequestBody.create({client_ack_body:{start_time_stamp:e.startTimeStamp,cmd:e.cmd,network_type:e.NetworkType,logid:e.logid,client_time_stamp:e.clientTimeStamp,server_message_id:e.serverId,type:e.type}});yield this.send(t,r.m.IMCMD.CLIENT_ACK,{useBeacon:!0,inboxType:e.inboxType})}catch(e){s.Y.ctxWarn(this.ctx,`send ack error: ${e}, ignore`)}})}ClientBatchAck(e){var t,n;return(0,o.mG)(this,void 0,void 0,function*(){try{let o=null===(t=null==e?void 0:e.map)||void 0===t?void 0:t.call(e,e=>({start_time_stamp:e.startTimeStamp,cmd:e.cmd,network_type:e.NetworkType,logid:e.logid,client_time_stamp:e.clientTimeStamp,server_message_id:e.serverId,type:e.type})),i=r.m.RequestBody.create({client_batch_ack_body:{ack_list:o}});yield this.send(i,r.m.IMCMD.CLIENT_BATCH_ACK,{useBeacon:!0,inboxType:null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.inboxType})}catch(e){s.Y.ctxWarn(this.ctx,`send batch ack error: ${e}, ignore`)}})}BatchGetConversationParticipantsReadIndex(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({batch_get_conversation_participants_readindex:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,request_from:e.request_from,min_index_required:e.min_index_required}});return(yield this.send(t,r.m.IMCMD.BATCH_GAT_CONVERSATION_PARTICIPANTS_READINDEX)).batch_get_conversation_participants_readindex})}GetConversationParticipantsReadIndexV3(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({participants_read_index_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return(yield this.send(t,r.m.IMCMD.GET_CONVERSATION_PARTICIPANTS_READ_INDEX_V3,{inboxType:e.inboxType})).participants_read_index_body})}GetConversationParticipantsMinIndexV3(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({participants_min_index_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return(yield this.send(t,r.m.IMCMD.GET_CONVERSATION_PARTICIPANTS_MIN_INDEX_V3,{inboxType:e.inboxType})).participants_min_index_body})}GetConfigs(){return(0,o.mG)(this,void 0,void 0,function*(){let e=r.m.RequestBody.create();return(yield this.send(e,r.m.IMCMD.GET_CONFIGS)).get_configs_body})}GetUserMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=r.m.RequestBody.create({get_user_message:{version:e.version,cmd_index:e.cmdIndex,read_version:e.readVersion,source:e.source}});try{return yield this.sendWithRawBody(t,r.m.IMCMD.GET_USER_MESSAGE,{inboxType:e.inboxType,maxRetryTimes:1,forceHttp:!0})}catch(e){return s.Y.ctxWarn(this.ctx,`pull user error:${e}, ignore`),r.m.Response.create({body:r.m.ResponseBody.create({get_user_message:r.m.GetUserMessageResponseBody.create({})})})}})}}},651889:function(e,t,n){"use strict";n.d(t,{Bs:function(){return R},HF:function(){return q},I7:function(){return I},Lk:function(){return M},NI:function(){return B},O9:function(){return V},P6:function(){return x},_:function(){return k},b3:function(){return j},c5:function(){return S},k5:function(){return G},rb:function(){return E},uX:function(){return P},v$:function(){return T},v9:function(){return O},zn:function(){return N}});var o,r,i,s,a,c,u,d,l,_,p,v,f,h,y,g,m,b,k,O,x,w,C,P,I,R,M,E,T,S,B,j,A,L,N,G,U=n(621631),D=n(362012);let q={sdkVersion:D.G.version,refer:U.m.Refer.PC,buildNumber:`${D.G.commit}:${D.G.branch}`,wsProtocols:["binary","base64","pbbp2"],ticketType:U.m.TicketType.TICKET_TYPE_WEB,envKey:"X-Tt-Env",boeHeaderKey:"X-Use-Boe",ppeHeaderKey:"X-Use-Ppe",requestAccessName:"web_sdk",heartbeatInterval:15e3,maxHeartbeatEmptyWindow:3e4,conversationRefreshCount:10};(o=k||(k={}))[o.Default=0]="Default",o[o.PushOnly=1]="PushOnly",o[o.All=2]="All",o[o.Disable=3]="Disable",(r=O||(O={})).MessageMode="s:mode",r.SendResponseStatus="s:send_response_status",r.SendResponseExtraInfo="s:send_response_extra_info",r.SendResponseCheckCode="s:send_response_check_code",r.SendResponseCheckMessage="s:send_response_check_msg",r.ClientMessageId="s:client_message_id",r.MentionedUser="s:mentioned_users",r.DoNotIncreaseUnread="s:do_not_increase_unread",r.DoNotPopConversation="s:do_not_pop_conversation",r.IsRecalled="s:is_recalled",r.ServerMessageId="s:server_message_id",r.LocalLogId="s:local_logid",r.MessageVisible="s:visible",r.MessageInvisible="s:invisible",r.RelationIsMuted="s:relation_is_muted",r.RelationIsMutedServer="s:relation_is_muted_server",r.RelationNormalOnly="s:relation_normal_only",r.RelationMuteTime="s:relation_mute_time",r.RelationMuteExt="s:relation_mute_ext",r.MessageSourceAppId="s:biz_aid",r.ConversationSourceAppId="s:s_aid",r.MarkActionType="s:action_type",r.IsRootReference="s:is_root_ref",r.MarkMessageNewExt="s:mark_message_new_ext",r.AckSampling="s:is_ack_sampling",r.AckSamplingShow="s:is_ack_sampling_show",r.DoNotUpdateLastMessage="s:do_not_update_last_msg",r.DoNotMoveReadIndex="s:do_not_move_read_index",r.FileExtKeyAudioAsrText="s:file_ext_key_audio_asr_text",r.RecognitionResponseCheckCode="s:recognition_response_check_code",r.RecognitionResponseCheckMsg="s:recognition_response_check_msg",r.PushPartDisableConfig="s:push_part_disable_config",r.MustNotify="s:must_notify",r.SendTime="s:stime",r.ConversationTags="s:conversation_tag",r.UserCustomConversationTags="s:user_custom_conversation_tag",r.EditInfo="s:edit_info",r.RefContent="s:ref_content",r.RefIsEdited="s:ref_is_edited";let V="mute_wl";(i=x||(x={}))[i.Enable=0]="Enable",i[i.Disable=1]="Disable",(s=w||(w={}))[s.SingleChat=1]="SingleChat",s[s.GroupChat=2]="GroupChat",s[s.LiveChat=3]="LiveChat",(a=C||(C={}))[a.Normal=0]="Normal",a[a.Dissolved=1]="Dissolved",(c=P||(P={}))[c.Off=0]="Off",c[c.On=1]="On",(u=I||(I={}))[u.Off=0]="Off",u[u.On=1]="On",(d=R||(R={}))[d.Unknown=0]="Unknown",d[d.Allow=1]="Allow",d[d.Disable=2]="Disable",d[d.PartAllow=3]="PartAllow",(l=M||(M={}))[l.Off=0]="Off",l[l.On=1]="On",(_=E||(E={}))[_.NotAvailable=0]="NotAvailable",_[_.Start=1]="Start",_[_.Error=2]="Error",_[_.Succeeded=3]="Succeeded",(p=T||(T={}))[p.Unknown=0]="Unknown",p[p.Online=1]="Online",p[p.LoadMore=2]="LoadMore",p[p.Init=3]="Init",p[p.UserInbox=4]="UserInbox",p[p.BroadcastLoadMore=5]="BroadcastLoadMore",p[p.Offline=6]="Offline",(v=S||(S={})).Error="error",v.WebSocketConnected="websocket-connected",v.WebSocketDisconnected="websocket-disconnected",v.WebSocketReceiveUnexpectedFrame="websocket-receive-unexpected-frame",v.ReceiveNewMessage="receive-new-message",v.ReceiveSelfMessage="receive-self-message",v.ReceiveCommandMessage="receive-command-message",v.ReceiveBroadcastNewMessage="receive-broadcast-new-message",v.ReceiveBroadcastSelfMessage="receive-broadcast-self-message",v.ReceiveNewUpdateExtMessage="receive-new-update-ext-message",v.ReceiveNewP2PMessage="receive-new-p2p-message",v.MessageUpsert="message-upsert",v.ConversationChange="conversation-change",v.ConversationUpsert="conversation-upsert",v.ConversationDissolve="conversation-dissolve",v.ConversationBlock="conversation-block",v.ParticipantUpsert="participant-upsert",v.ParticipantJoin="participant-join",v.ParticipantLeave="participant-leave",v.ParticipantBlock="participant-block",v.ParticipantChange="participant-change",v.MessageSend="message-send",v.MessageRecall="message-recall",v.MessageDelete="message-delete",v.ConversationDelete="conversation-delete",v.ConversationLeave="conversation-leave",v.ConversationCreate="conversation-create",v.ConversationJoin="conversation-join",v.ReadReceiptChange="read-receipt-Change",v.ReceiveNewStrangerMessage="receive-new-stranger-message",v.StrangerUpgrade="stranger-upgrade",v.MessagePropertyUpsert="message-property-upsert",v.InitLoadPage="init-load-page",v.InitFinish="init-finish",v.InitParticipant="init-participant",v.TagListUpdate="tag-list-update",(f=B||(B={}))[f.Unknown=-1]="Unknown",f[f.Success=0]="Success",f[f.InvalidToken=1]="InvalidToken",f[f.InvalidTicket=2]="InvalidTicket",f[f.InvalidRequest=4]="InvalidRequest",f[f.InvalidCommand=5]="InvalidCommand",f[f.ServerError=6]="ServerError",f[f.UserForbidden=11]="UserForbidden",f[f.MessageTargetConversationNotExist=15]="MessageTargetConversationNotExist",f[f.Degradation=16]="Degradation",f[f.RecallTimeout=17]="RecallTimeout",f[f.CallbackDeny=19]="CallbackDeny",f[f.ExpiredToken=100]="ExpiredToken",f[f.InvalidParam=400]="InvalidParam",f[f.ResourceExhausted=429]="ResourceExhausted",f[f.InternalError=500]="InternalError",f[f.InvalidInboxType=1e3]="InvalidInboxType",f[f.ConversationNotExist=1001]="ConversationNotExist",f[f.MessageNotExist=1002]="MessageNotExist",f[f.MessageOffline=1003]="MessageOffline",f[f.UnknownMessageType=1004]="UnknownMessageType",f[f.InvalidServerId=1005]="InvalidServerId",f[f.MessageNotReady=1006]="MessageNotReady",f[f.TokenFuncError=1007]="TokenFuncError",f[f.NetworkError=1008]="NetworkError",f[f.AlreadyDispose=1009]="AlreadyDispose",f[f.NoAdapter=1010]="NoAdapter",f[f.ComponentNotFound=1011]="ComponentNotFound",f[f.NotImplemented=1012]="NotImplemented",f[f.MPInvalidArgument=10001]="MPInvalidArgument",f[f.MPServerUrlError=10002]="MPServerUrlError",f[f.MPNotFileMsg=10003]="MPNotFileMsg",f[f.MPUploadError=10004]="MPUploadError",f[f.MPNotSupportCipher=10005]="MPNotSupportCipher",f[f.DbOpError=2e4]="DbOpError",f[f.StorageCryptoError=20001]="StorageCryptoError",f[f.AuthSignError=10201]="AuthSignError",(h=j||(j={}))[h.Created=0]="Created",h[h.Preparing=1]="Preparing",h[h.Inflight=2]="Inflight",h[h.Succeeded=3]="Succeeded",h[h.Received=4]="Received",h[h.Failed=-1]="Failed",h[h.Rejected=-2]="Rejected",h[h.SelfVisible=-3]="SelfVisible",(y=A||(A={}))[y.Succeeded=0]="Succeeded",y[y.UserNotInConversation=1]="UserNotInConversation",y[y.CheckConversationNotPass=2]="CheckConversationNotPass",y[y.CheckMessageNotPass=3]="CheckMessageNotPass",y[y.CheckMessageNotPassButSelfVisible=4]="CheckMessageNotPassButSelfVisible",y[y.UserHasBeenBlock=5]="UserHasBeenBlock",(g=L||(L={}))[g.Succeeded=0]="Succeeded",g[g.Rejected=1]="Rejected",g[g.PartialRejected=2]="PartialRejected",(m=N||(N={}))[m.Immediate=0]="Immediate",m[m.Throttle=1]="Throttle",m[m.Debounce=2]="Debounce",m[m.ThrottleWithArgs=3]="ThrottleWithArgs",m[m.DebounceWithArgs=4]="DebounceWithArgs",(b=G||(G={}))[b.Default=0]="Default",b[b.AwemeMode=1]="AwemeMode"},400201:function(e,t,n){"use strict";n.d(t,{N:function(){return u}});var o=n(651889),r=n(592242),i=n(359756),s=n(557418),a=n(812026),c=n(835649);class u extends c.mA{constructor(){super(...arguments),this.subscriptions=new Map}subscribe(e,t){var n;if(!Object.values(o.c5).includes(e))throw new s.G({ctx:this.ctx,type:o.NI.InvalidParam,msg:`unknown event: ${e}`,sender:this});!this.subscriptions.has(e)&&this.subscriptions.set(e,new i.x(this.ctx));let c=this.subscriptions.get(e),u="number"==typeof this.ctx.option.throttle?this.ctx.option.throttle:100,d=null!==(n=this.ctx.option.triggerStrategy)&&void 0!==n?n:{};if(!1===this.ctx.option.throttle)return c.subscribe(t);if(void 0===d[e])return c.subscribe(t);switch(r.Y.ctxDebug(this.ctx,`apply strategy: ${o.zn[d[e]]} to event: ${e}`),d[e]){case o.zn.Throttle:return c.subscribe((0,a.P2)(t,u,u));case o.zn.Debounce:return c.subscribe((0,a.Ds)(t,u));case o.zn.ThrottleWithArgs:return c.subscribe((0,a.BJ)(t,u,u));case o.zn.DebounceWithArgs:return c.subscribe((0,a.Xo)(t,u));case o.zn.Immediate:default:return c.subscribe(t)}}unsubscribe(e,t){if(!!this.subscriptions.has(e))this.subscriptions.get(e).unsubscribe(t)}unsubscribeAll(){for(let e of Object.values(this.subscriptions))e.unsubscribeAll();this.subscriptions.clear()}emitEmpty(e,t){return this.emit(e,t,void 0)}emit(e,t,n){this.resolve(c.Uk.Monitor).emitEvent(e,t,n);let o=this.subscriptions.get(e);o&&(n?r.Y.ctxDebug(this.ctx,`emit event "${e}" with sender:`,t,", eventArgs:",n):r.Y.ctxDebug(this.ctx,`emit event "${e}" with sender:`,t),o.next(n,t))}}},359756:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var o=n(592242),r=n(835649);class i{constructor(e,t,n){this.index=e,this.subject=t,this.handler=n}unsubscribe(){this.subject.unsubscribe(this)}}class s extends r.mA{constructor(){super(...arguments),this.subscriptions=new Map,this.idx=0}subscribe(e){for(let t of this.subscriptions.values())if(e===t.handler)return o.Y.ctxDebug(this.ctx,"ignore duplicate handler:",e),t;let t=new i(this.idx,this,e);return this.subscriptions.set(this.idx,t),this.idx++,t}nextEmpty(e){for(let t of this.subscriptions.values())if(t&&t.handler)try{t.handler({},e)}catch(e){o.Y.ctxWarn(this.ctx,"error in event handler:",e)}}next(e,t){for(let n of this.subscriptions.values())if(n&&n.handler)try{n.handler(e,t)}catch(e){o.Y.ctxWarn(this.ctx,"error in event handler:",e)}}unsubscribe(e){if(!!e)this.subscriptions.delete(e.index)}unsubscribeAll(){this.subscriptions.clear()}}},592242:function(e,t,n){"use strict";n.d(t,{Y:function(){return c},h:function(){return r}});var o,r,i=n(835649);(o=r||(r={}))[o.debug=0]="debug",o[o.info=1]="info",o[o.warn=2]="warn",o[o.error=3]="error",o[o.none=4]="none";let s={[r.info]:"#1890ff",[r.debug]:"#19be6b",[r.warn]:"#ff9900",[r.error]:"#ed4014"},a={debug:r.debug,info:r.info,warn:r.warn,error:r.error,none:r.none};class c{static get isBrowser(){return"undefined"!=typeof navigator}static log(e,t,...n){if(t&&t.resolve(i.Uk.Monitor).emitLog(a[e],n),!!(null==t?void 0:t.option.debug)&&"none"!==e)this.level<=r[e]&&(t&&i.hi.Instance.instanceCount>1?c.isBrowser?console[e](`%c [Byted IM SDK][${t.id}] [${e}]:`,`color: ${s[r[e]]}; font-weight: 700`,...n):console[e](`[Byted IM SDK][${t.id}] [${e}]:`,...n):c.isBrowser?console[e](`%c [Byted IM SDK] [${e}]:`,`color: ${s[r[e]]}; font-weight: 700`,...n):console[e](`[Byted IM SDK] [${e}]:`,...n))}static debug(...e){this.log("debug",void 0,...e)}static info(...e){this.log("info",void 0,...e)}static warn(...e){this.log("warn",void 0,...e)}static error(...e){this.log("error",void 0,...e)}static ctxDebug(e,...t){this.log("debug",e,...t)}static ctxInfo(e,...t){this.log("info",e,...t)}static ctxWarn(e,...t){this.log("warn",e,...t)}static ctxError(e,...t){this.log("error",e,...t)}}c.level=r.debug},604307:function(e,t,n){"use strict";var o,r;n.d(t,{W:function(){return o}}),(r=o||(o={})).MultimediaMessageUpload="imsdk_upload_msg",r.InitHandler="imsdk_init_handler",r.Exception="imsdk_exception",r.SaveMessageError="imsdk_save_msg_error",r.MessageAck="imsdk_message_ack"},792243:function(e,t,n){"use strict";n.d(t,{R:function(){return r},v:function(){return _}});var o,r,i=n(193533),s=n(592242),a=n(651889),c=n(621631),u=n(835649),d=n(124125),l=n(358115);(o=r||(r={}))[o.Sending=0]="Sending",o[o.Success=1]="Success",o[o.Failed=2]="Failed";class _ extends u.mA{constructor(){super(...arguments),this.indexInConversation=i.ZERO,this.indexInConversationV2=i.ZERO,this.orderInConversation=i.ZERO,this.property={},this.source=a.v$.Unknown}get conversationType(){return 15&this.conversationBizType}set conversationType(e){this.conversationBizType=e}get clientId(){var e;return this.ext?null!==(e=this.ext[a.v9.ClientMessageId])&&void 0!==e?e:"":""}set clientId(e){!this.ext&&(this.ext={}),this.ext[a.v9.ClientMessageId]=e}static createClientMessage(e,t){var n;let o=new _(e);o.conversationId=t.conversationId,o.type=t.type,o.conversationType=t.conversationType,o.conversationShortId=t.conversationShortId,o.sender=e.option.userId,o.content=t.content,o.createdAt=new Date(Date.now());let r=Object.assign({},t.ext);for(let e of Object.keys(r))e.startsWith("s:")&&(s.Y.ctxDebug(o.ctx,`delete s: prefix ext key: '${e}: ${r[e]}'`),delete r[e]);if(o.ext=r,o.mentionedUsers=t.mentionedUsers,o.clientId=t.id,o.version=i.ZERO,o.serverStatus=a.P6.Enable,o.isOffline=!0,t.referenceMessage){let e=c.m.MessageStatus.AVAILABLE;t.referenceMessage.isRecalled?e=c.m.MessageStatus.RECALLED:!t.referenceMessage.visible&&(e=c.m.MessageStatus.INVISIBLE),o.referenceInfo={referenced_message_id:i.fromValue(t.referenceMessage.serverId),hint:null!==(n=t.referenceHint)&&void 0!==n?n:"",ref_message_type:i.fromValue(t.referenceMessage.type),referenced_message_status:e,ext:{[a.v9.RefContent]:t.referenceMessage.content,[a.v9.RefIsEdited]:String(t.referenceMessage.isEdited)}},void 0!==t.referenceMessage.referenceInfo?(o.referenceInfo.root_message_id=t.referenceMessage.referenceInfo.root_message_id,o.referenceInfo.root_message_conv_index=t.referenceMessage.referenceInfo.root_message_conv_index):(o.referenceInfo.root_message_id=i.fromValue(t.referenceMessage.serverId),o.referenceInfo.root_message_conv_index=t.referenceMessage.indexInConversation)}return o.ctx.option.secUid&&(o.secSender=o.ctx.option.secUid),o}static fromServerMessage(e,t,n){var o;let r=new _(e);return r.serverId=t.server_message_id.toString(),r.type=t.message_type,r.ext=Object.assign({},t.ext),r.conversationId=t.conversation_id,r.content=t.content,r.sender=t.sender.toString(),r.createdAt=new Date(t.create_time.toNumber()),r.indexInConversation=t.index_in_conversation,r.indexInConversationV2=null!==(o=t.index_in_conversation_v2)&&void 0!==o?o:i.ZERO,r.orderInConversation=t.order_in_conversation,r.serverStatus=t.status,r.conversationShortId=t.conversation_short_id.toString(),r.conversationType=t.conversation_type,r.version=t.version,r.secSender=t.sec_sender,r.isOffline=!1,r.property=_.fromServerProperty(t),t.reference_info&&(r.referenceInfo=t.reference_info),void 0!==n&&r.ctx.option.debug&&(r.ext[a.v9.LocalLogId]=n),r}static fromServerProperty(e){let t={};if(!e.property_list)return t;for(let n of Object.keys(e.property_list)){let o=e.property_list[n];o&&o.Items&&(t[n]=o.Items.map(t=>{var o,i,s,c,u;return{messageId:null!==(o=e.ext[a.v9.ClientMessageId])&&void 0!==o?o:"",conversationId:e.conversation_id,key:n,userId:null===(i=t.uid)||void 0===i?void 0:i.toString(),secUid:null!==(s=t.sec_uid)&&void 0!==s?s:"",createTime:new Date((null!==(u=null===(c=t.create_time)||void 0===c?void 0:c.toNumber())&&void 0!==u?u:0)*1e3),idempotentId:t.idempotent_id,value:t.value,version:e.version,status:r.Success}}))}return t}merge(e){if(e&&this.type===e.type){if(e.ext=Object.assign(this.ext||{},e.ext),""===e.content&&this.content&&(s.Y.ctxDebug(this.ctx,"ignore empty content replace:",e),e.content=this.content),e.clientId===this.clientId){if(e.indexInConversation.lt(this.indexInConversation))return this.indexInConversation=e.indexInConversation,this;if(e.indexInConversationV2.lt(this.indexInConversationV2))return this.indexInConversationV2=e.indexInConversationV2,this}Object.assign(this,e)}return this}get isNormalMsg(){return this.type<5e4}get isCommandMsg(){return this.type===c.m.MessageType.MESSAGE_TYPE_COMMAND}get isSpecialMessage(){return this.type>=5e4}get visible(){return this.serverStatus!==a.P6.Disable&&!this.isSpecialMessage&&(!this.ctx.option.userId||!this.ext||(this.ext[a.v9.MessageVisible]&&this.ext[a.v9.MessageVisible].length>0?-1!==this.ext[a.v9.MessageVisible].split(",").indexOf(this.ctx.option.userId):!this.ext[a.v9.MessageInvisible]||!(this.ext[a.v9.MessageInvisible].length>0)||-1===this.ext[a.v9.MessageInvisible].split(",").indexOf(this.ctx.option.userId)))}get unpop(){return!!this.ext&&(!!(!this.visible||(0,d.vP)(this.ext,a.v9.DoNotPopConversation))||!1)}get increaseUnread(){return!(this.isFromMe||!this.visible||this.isSpecialMessage||(0,d.vP)(this.ext,a.v9.DoNotIncreaseUnread))&&!0}get isFromMe(){return this.sender===this.ctx.option.userId}get isRecalled(){return this.ext&&!!this.ext[a.v9.IsRecalled]}get isMentioned(){return this.visible&&(this.mentionedUsers.includes(this.ctx.option.userId)||this.mentionedUsers.includes("0")&&!this.isFromMe)}get mentionedUsers(){return this.ext&&this.ext[a.v9.MentionedUser]?this.ext[a.v9.MentionedUser].split(","):[]}set mentionedUsers(e){!this.ext&&(this.ext={}),this.ext[a.v9.MentionedUser]=e.join(",")}get isStrangerMessage(){return!this.ext||["1","2","3"].includes(this.ext[a.v9.MessageMode])}get isRootReference(){return!!this.ext&&(0,d.vP)(this.ext,a.v9.IsRootReference)}get moveReadIndex(){return!this.ext||!(!this.visible||this.isFromMe||this.isSpecialMessage||(0,d.vP)(this.ext,a.v9.DoNotMoveReadIndex))&&!0}get updateLastMessage(){return!(!this.visible||this.isSpecialMessage||(0,d.vP)(this.ext,a.v9.DoNotUpdateLastMessage))&&!0}getReadReceipt(){return this.resolve(u.Uk.CoreInstance).getMessageReadReceipt({message:this})}get editInfo(){var e;if(!this.ext[a.v9.EditInfo])return null;try{let t=l.parse(this.ext[a.v9.EditInfo]),n=(null==t?void 0:t.content_edit_time)?new Date(null==t?void 0:t.content_edit_time):void 0;return{isEdited:!!(null==t?void 0:t.content_is_edited),editTime:n,editorUid:null===(e=null==t?void 0:t.content_editor)||void 0===e?void 0:e.toString()}}catch(e){return null}}get isEdited(){var e;return!!(null===(e=this.editInfo)||void 0===e?void 0:e.isEdited)}}},967027:function(e,t,n){"use strict";n.d(t,{E:function(){return l}});var o=n(101380),r=n(621631),i=n(651889),s=n(557418),a=n(592242),c=n(473614),u=n(59498),d=n(835649);class l extends d.mA{constructor(e){super(e)}prepareToken(){var e,t;return(0,o.mG)(this,void 0,void 0,function*(){let n=yield null===(e=this.resolve(d.Uk.DbProxy))||void 0===e?void 0:e.loadConfig(u.j.UserToken);n?this.isCertAuth&&!1===(yield null===(t=this.resolve(d.Uk.SecurityProxy))||void 0===t?void 0:t.getCert())?yield this.refreshToken():this.ctx.cachedToken=n:yield this.refreshToken()})}refreshToken(){var e,t,n;return(0,o.mG)(this,void 0,void 0,function*(){let{token:o,authType:l}=this.ctx.option;if(l===r.m.AuthType.PASSPORT_CERT_AUTH){let t="";try{t=(yield null===(e=this.resolve(d.Uk.SecurityProxy))||void 0===e?void 0:e.getTicket())||"",this.ctx.cachedToken=t}catch(e){throw new s.G({ctx:this.ctx,msg:"failed to get ticket",type:i.NI.TokenFuncError,sender:this})}return t}if("function"!=typeof o)return this.ctx.cachedToken=o,a.Y.ctxDebug(this.ctx,"token cached from const: ",this.ctx.cachedToken),yield null===(n=this.resolve(d.Uk.DbProxy))||void 0===n?void 0:n.saveConfig(u.j.UserToken,this.ctx.cachedToken),o;{let e;let n=c.u.performanceNow(),_=null;if(null!==(_=l===r.m.AuthType.CERT_AUTH?yield this.handleCertAuthToken(o):(e=o())instanceof Promise?yield e:e))return this.ctx.cachedToken=_,yield null===(t=this.resolve(d.Uk.DbProxy))||void 0===t?void 0:t.saveConfig(u.j.UserToken,_),this.resolve(d.Uk.Monitor).emitDuration(c.U.BizRefreshToken,n),a.Y.ctxDebug(this.ctx,"token cached from function: ",this.ctx.cachedToken),_;throw new s.G({ctx:this.ctx,msg:"token is null",type:i.NI.TokenFuncError,sender:this})}})}handleCertAuthToken(e){var t,n,r;return(0,o.mG)(this,void 0,void 0,function*(){let o="";o=this.ctx.option.certAuthZeroTrustUsePubKey?yield null===(t=this.resolve(d.Uk.SecurityProxy))||void 0===t?void 0:t.getPubKey():yield null===(n=this.resolve(d.Uk.SecurityProxy))||void 0===n?void 0:n.getCertSignRequest();let{tsSign:i,token:s,sdkCert:a}=yield e(o);return yield null===(r=this.resolve(d.Uk.SecurityProxy))||void 0===r?void 0:r.setSignValue({ts_sign:i,ticket:s,client_cert:a}),this.ctx.option.cert=a,this.ctx.option.tsSign=i,s})}get isCertAuth(){return this.ctx.option.authType&&[r.m.AuthType.CERT_AUTH,r.m.AuthType.PASSPORT_CERT_AUTH].includes(this.ctx.option.authType)}}},501297:function(e,t,n){"use strict";let o;n.d(t,{F:function(){return p}});var r,i,s=n(101380),a=n(621631),c=n(193533),u=n(651889),d=n(775073),l=n(835649);(r=i||(i={}))[r.RequestCreate=0]="RequestCreate",r[r.RequestSerialize=1]="RequestSerialize",r[r.BeforeSend=2]="BeforeSend",r[r.BeforeSendSingleFlight=3]="BeforeSendSingleFlight",r[r.AfterSendSingleFlight=4]="AfterSendSingleFlight",r[r.AfterSend=5]="AfterSend",r[r.ResponseDeserialize=6]="ResponseDeserialize",r[r.SendMethod=7]="SendMethod";let _=(o=1e4,()=>o+=1);class p extends l.mA{constructor(e,t,n,o){super(e),this._retryTimes=0,this.seqId=null!=o?o:_(),this.reqBody=n,this.cmd=t;let r=(0,d.G)(t),i=this.ctx.option.apiUrl;!i.endsWith("/")&&(i=`${i}/`),this.url=i+r}get retryTimes(){return this._retryTimes}set retryTimes(e){this._retryTimes=e,this.request&&(this.request.headers=Object.assign(Object.assign({},this.request.headers),this.isRetryHeader))}get isRetryHeader(){return{"is-retry":this.retryTimes>1?"1":"0"}}get logid(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.log_id)&&void 0!==t?t:""}prepareRequest(e){return(0,s.mG)(this,void 0,void 0,function*(){let t=100===this.cmd?Object.assign(Object.assign({},this.ctx.option.headers),this.ctx.option.sendMessageHeader):this.ctx.option.headers,n=a.m.Request.create({body:this.reqBody,cmd:this.cmd,sequence_id:c.fromNumber(this.seqId),refer:u.HF.refer,token:this.ctx.cachedToken,headers:t,device_id:this.ctx.option.deviceId,sdk_version:u.HF.sdkVersion,build_number:u.HF.buildNumber,inbox_type:e,device_platform:this.ctx.option.devicePlatform,channel:this.ctx.option.channel,device_type:this.ctx.option.deviceType,os_version:this.ctx.option.osVersion,version_code:this.ctx.option.versionCode,auth_type:this.ctx.option.authType,biz:this.ctx.option.biz,access:u.HF.requestAccessName});for(let e of this.ctx.plugin)n=yield e.sendPacket(n);this.request=n})}}},84105:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var o=n(101380),r=n(835649);class i extends r.mA{constructor(e){super(e),this.name="BasePlugin"}get instance(){return this.resolve(r.Uk.CoreInstance)}init(){return(0,o.mG)(this,void 0,void 0,function*(){})}sendPacket(e){return(0,o.mG)(this,void 0,void 0,function*(){return e})}receivePacket(e){return(0,o.mG)(this,void 0,void 0,function*(){})}receiveApiResponse(e){return(0,o.mG)(this,void 0,void 0,function*(){})}ticker(){return(0,o.mG)(this,void 0,void 0,function*(){})}extendFunc(e){return e.bind(this)}dispose(){return(0,o.mG)(this,void 0,void 0,function*(){})}}},470332:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var o=n(835649);class r extends o.mA{}},104524:function(e,t,n){"use strict";n.d(t,{U:function(){return f}});var o=n("101380"),r=n("651889"),i=n("557418"),s=n("792243"),a=n("170818"),c=n("190638"),u=n("621631"),d=n("592242"),l=n("835649");class _ extends c.f{process(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=e.data.conversationId;if(!t)return d.Y.ctxWarn(this.ctx,"no conversation provided in message, ignore",e.data),e.needContinue=!1,e;let n=this.resolve(l.Uk.ConversationManager).getRaw(t);if(e.data.type===u.m.MessageType.MESSAGE_TYPE_CONVERSATION_DESTROY&&n)return this.resolve(l.Uk.ConversationManager).delete(t),this.resolve(l.Uk.EventBus).emit(r.c5.ConversationDissolve,this,n),this.resolve(l.Uk.EventBus).emitEmpty(r.c5.ConversationChange,this),e.needContinue=!1,e;if(!e.data.isNormalMsg&&void 0===n)return e.needContinue=!1,this.ctx.initResult===r.rb.Succeeded&&d.Y.ctxDebug(this.ctx,`ignore process, conv: ${e.data.conversationId} not exist for cmd msg`,e.data),e;let o=e.data,i=this.resolve(l.Uk.ConversationManager).getWithCreateLocal(o.conversationId,o.conversationShortId,o.conversationType);return e.conv=i,e})}}var p=n("303009");class v extends c.f{process(e){return(0,o.mG)(this,void 0,void 0,function*(){return e.data.type===u.m.MessageType.MESSAGE_TYPE_UPDATE_MESSAGE_EXT&&(e.needContinue=!1,this.handleUpdateExt(e)),e})}handleUpdateExt(e){var t,n,o,s,a,c,_;let p=null===(t=e.data)||void 0===t?void 0:t.ext[r.v9.ServerMessageId];if(!p)throw new i.G({ctx:this.ctx,type:r.NI.InvalidServerId,msg:`message ${e.data} has no s:server_message_id`,sender:this});let v=this.resolve(l.Uk.MessageManager).getByServerIdRaw(null===(n=e.conv)||void 0===n?void 0:n.id,p);if(!!v){if(v.version.gt(e.data.version)){d.Y.ctxWarn(this.ctx,`local msg version: ${v.version.toString()} > online msg version: ${e.data.version.toString()}, ignore, local msg:`,v,"online msg:",e.data);return}if(v.ext=e.data.ext,v.version=e.data.version,e.data.content&&(v.content=e.data.content),this.resolve(l.Uk.MessageManager).upsert(v),!v.visible)for(let t of this.resolve(l.Uk.MessageManager).getList(e.conv.id))(null===(s=null===(o=t.referenceInfo)||void 0===o?void 0:o.referenced_message_id)||void 0===s?void 0:s.toString())===v.serverId&&(t.referenceInfo.referenced_message_status=u.m.MessageStatus.INVISIBLE,this.resolve(l.Uk.MessageManager).upsert(t));if(v.isEdited)for(let t of this.resolve(l.Uk.MessageManager).getList(e.conv.id))(null===(c=null===(a=t.referenceInfo)||void 0===a?void 0:a.referenced_message_id)||void 0===c?void 0:c.toString())===v.serverId&&(t.referenceInfo=Object.assign(Object.assign({},t.referenceInfo),{ext:Object.assign(Object.assign({},null!==(_=t.referenceInfo.ext)&&void 0!==_?_:{}),{[r.v9.RefIsEdited]:"true",[r.v9.RefContent]:v.content})}),this.resolve(l.Uk.MessageManager).upsert(t));this.resolve(l.Uk.EventBus).emit(r.c5.ReceiveNewUpdateExtMessage,this,e.data),"true"===e.data.ext[r.v9.IsRecalled]&&this.resolve(l.Uk.MessageManager).markRecalled(e.conv.id,v.serverId)}}}class f extends l.mA{constructor(e){super(e),this.messages=new Map,this.processors=[new _(this.ctx),new a.W(this.ctx),new v(this.ctx),new p.n(this.ctx)]}applyLocal(e){e.forEach(e=>{!this.messages.has(e.conversationId)&&this.messages.set(e.conversationId,new Map),this.messages.get(e.conversationId).set(e.clientId,e)})}clearAll(){this.messages.clear()}get(e,t){let n=this.getRaw(e,t);if(!n)throw new i.G({ctx:this.ctx,type:r.NI.MessageNotExist,msg:`message ${t} @ ${e} not exist in local`,sender:this});return n}getRaw(e,t){return this.getConversationMap(e).get(t)}getRawMap(){return this.messages}getByServerIdRaw(e,t){let n=Array.from(this.getConversationMap(e).values()).filter(e=>e.serverId===t);if(0!==n.length)return this.get(e,n[0].clientId)}getByServerId(e,t){let n=Array.from(this.getConversationMap(e).values()).filter(e=>e.serverId===t);if(0===n.length)throw new i.G({ctx:this.ctx,type:r.NI.MessageNotExist,msg:`message ${t} @ ${e} not exist in local`,sender:this});return this.get(e,n[0].clientId)}getList(e){return Array.from(this.getConversationMap(e).values()).sort(f.messageComparator)}upsert(e){var t;if(e.isSpecialMessage){d.Y.ctxWarn(this.ctx,"unexpected special message to upsert:",e);return}if(!e.clientId){d.Y.ctxDebug(this.ctx,"not found message clientId:",e);return}let n=this.getConversationMap(e.conversationId);if(this.ctx.option.maxMessageCount){let e=Math.max(200,this.ctx.option.maxMessageCount);if(n.size>=e){let t=~~(e/5);for(let e of n.keys()){if(t<=0)break;n.delete(e),t--}}}let o=n.get(e.clientId);if(o&&o.type===e.type?(["referenceInfo"].forEach(t=>{void 0===e[t]&&delete o[t]}),e=o.merge(e)):o&&o.type!==e.type&&d.Y.ctxWarn(this.ctx,"try to merge different msg:",o,e),n.set(e.clientId,e),null===(t=this.resolve(l.Uk.DbProxy))||void 0===t||t.upsertMessage(e),this.resolve(l.Uk.EventBus).emit(r.c5.MessageUpsert,this,e),this.ctx.initResult===r.rb.Succeeded){this.resolve(l.Uk.EventBus).emitEmpty(r.c5.ConversationChange,this);let t=this.getContext().resolve(l.Uk.ConversationManager).getRaw(e.conversationId);this.resolve(l.Uk.EventBus).emit(r.c5.ConversationUpsert,this,t),void 0!==o&&(null==t||t.forceRefreshUnreadCount())}}getConversationMap(e){let t=this.messages.get(e);return!t&&(t=new Map,this.messages.set(e,t)),t}clearConversationMessages(e,t=900){return(0,o.mG)(this,void 0,void 0,function*(){if(!((null==e?void 0:e.length)<0))e.forEach(e=>{let n=this.getConversationMap(e);if(n.size>=t){let e=~~(t/5);for(let t of n.keys()){if(e<=0)break;n.delete(t),e--}}})})}processNewMessage(e,t){return(0,o.mG)(this,void 0,void 0,function*(){if(!e.ext&&(e.ext={}),e.source=t,e.type>=0)return this.processMessage(e);throw new i.G({ctx:this.ctx,type:r.NI.UnknownMessageType,msg:`unknown message type: ${e.type} for msg:${e.clientId}`,sender:this})})}processNewMessagesFromPull(e,t,n){var r;return(0,o.mG)(this,void 0,void 0,function*(){let o=e.map(e=>s.v.fromServerMessage(this.ctx,e,n)),i=new Map;for(let e of o){!e.ext&&(e.ext={});let n=null===(r=i.get(e.conversationShortId))||void 0===r?void 0:r.indexInConversation;(!n||e.indexInConversation.lt(n))&&i.set(e.conversationShortId,e),yield this.processNewMessage(e,t)}return{msgs:o,conMap:i}})}delete(e,t){var n,o,i;let s=this.getConversationMap(e),a=Array.from(s.values()).filter(e=>e.serverId===t);if(0===a.length){d.Y.ctxDebug(this.ctx,`delete not exist msg: ${e}::${t}`);return}for(let r of(s.delete(a[0].clientId),null===(n=this.resolve(l.Uk.DbProxy))||void 0===n||n.deleteMessage(a[0]),this.getList(e)))(null===(i=null===(o=r.referenceInfo)||void 0===o?void 0:o.referenced_message_id)||void 0===i?void 0:i.toString())===t&&(r.referenceInfo.referenced_message_status=u.m.MessageStatus.DELETED,this.upsert(r));this.getContext().resolve(l.Uk.ConversationManager).get(e),this.resolve(l.Uk.EventBus).emit(r.c5.MessageUpsert,this,a[0]),this.resolve(l.Uk.EventBus).emit(r.c5.MessageDelete,this,a[0])}markRecalled(e,t,n){var o,i;let s=this.getByServerId(e,t);for(let a of(!s.ext&&(s.ext={}),s.ext[r.v9.IsRecalled]="true",n&&this.ctx.option.debug&&(s.ext[r.v9.LocalLogId]=n),this.upsert(s),this.getList(e)))(null===(i=null===(o=a.referenceInfo)||void 0===o?void 0:o.referenced_message_id)||void 0===i?void 0:i.toString())===t&&(a.referenceInfo.referenced_message_status=u.m.MessageStatus.RECALLED,this.upsert(a));this.getContext().resolve(l.Uk.ConversationManager).get(e),this.resolve(l.Uk.EventBus).emit(r.c5.MessageRecall,this,s)}clearConversation(e){var t;let n=this.getContext().resolve(l.Uk.ConversationManager).get(e);if(!!n)this.messages.set(e,new Map),null===(t=this.resolve(l.Uk.DbProxy))||void 0===t||t.clearConversation(n),this.resolve(l.Uk.EventBus).emitEmpty(r.c5.ConversationChange,this),this.resolve(l.Uk.EventBus).emit(r.c5.ConversationUpsert,this,n)}injectProcessorBefore(e){this.processors.unshift(e)}injectProcessor(e){this.processors.push(e)}processMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t={needContinue:!0,data:e};for(let e of this.processors)if(!(t=yield e.process(t)).needContinue)break;return t.data})}dispose(){this.messages.clear(),this.processors=[]}}f.messageComparator=(e,t)=>e.orderInConversation.gt(t.orderInConversation)?1:-1},835649:function(e,t,n){"use strict";n.d(t,{Uk:function(){return r},hi:function(){return a},jO:function(){return c},mA:function(){return u}});var o,r,i=n(10672),s=n(91113);(o=r||(r={})).CoreInstance="coreInstance",o.NetworkManager="netManager",o.ConversationManager="conversationManger",o.MessageManager="messageManager",o.ParticipantManager="participantManager",o.AuthManager="authManager",o.EventBus="eventBus",o.Monitor="montior",o.DbProxy="dbProxy",o.SecurityProxy="securityProxy",o.CoreApi="coreApi",o.InboxType="inboxType",o.HybridLink="hybridLink",o.ExtensionPlugin="extensionPlugin",o.ExtensionApi="extensionApi",o.BroadcastManager="broadcastManager",o.EmojiPlugin="emojiPlugin",o.MetricsPlugin="metricsPlugin",o.MetricsApi="metricsApi",o.MultimediaPlugin="multimediaPlugin",o.MultimediaApi="multimediaApi",o.SharkPlugin="sharkPlugin",o.StoragePlugin="storagePlugin",o.StorageApi="storageApi",o.StrangerPlugin="strangerPlugin",o.StrangerApi="strangerApi";class a{constructor(){this.services=new Map,this.plugins=new Map}register(e,t,n){!this.services.has(e)&&this.services.set(e,new Map),this.services.get(e).set(t,n)}resolve(e,t){var n;return null===(n=this.services.get(e))||void 0===n?void 0:n.get(t)}get instanceCount(){return this.services.size}}a.Instance=new a;class c{constructor(){this.initResult=0,this.cachedToken="",this.id="",this.config=new Map(i.u_),this.id=(0,s.k)()}get plugin(){var e;return null!==(e=a.Instance.plugins.get(this.id))&&void 0!==e?e:[]}set plugin(e){a.Instance.plugins.set(this.id,e)}register(e,t){let n=t;return"function"==typeof t&&(n=new t(this)),a.Instance.register(this.id,e,n),n}resolve(e){return a.Instance.resolve(this.id,e)}}class u{constructor(e){this.__internal_ctx=e}get ctx(){return this.getContext()}bindContext(e){this.__internal_ctx=e}getContext(){return this.__internal_ctx}resolve(e){return this.getContext().resolve(e)}register(e,t){return this.getContext().register(e,t)}}},190638:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var o=n(101380),r=n(835649);class i extends r.mA{execute(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=e;return t=yield this.before(t),t=yield this.process(t),t=yield this.after(t)})}before(e){return(0,o.mG)(this,void 0,void 0,function*(){return e})}after(e){return(0,o.mG)(this,void 0,void 0,function*(){return e})}}},124125:function(e,t,n){"use strict";n.d(t,{F3:function(){return function e(t,n){return t.length>n?[t.slice(0,n),...e(t.slice(n),n)]:[t]}},sS:function(){return r},vM:function(){return o},vP:function(){return i}}),n(193533);function o(e,t){let n={};for(let o of e){let e=t(o);void 0===n[e]&&(n[e]=[]),n[e].push(o)}return n}function r(e,t){if(Array.isArray(e))return e;if(void 0!==e)return[e];if(void 0!==t)return[t];return[]}function i(e,t){return void 0!==e&&void 0!==t&&("true"===e[t]||"1"===e[t])}},812026:function(e,t,n){"use strict";function o(e,t,n){let o,r;return function(){let i=this,s=+new Date,a=arguments;clearTimeout(o),!r&&(r=s),s-r>=n?(e.apply(i,a),r=s):o=setTimeout(()=>{e.apply(i,a)},t)}}function r(e,t,n=!1){let o,i,s;let a=0,c=function(){e.apply(i,s),a=Date.now()};return function(){let e=Date.now();if(i=this,s=arguments,o&&(clearTimeout(o),o=null),n&&0===a)return o=setTimeout(()=>{c()},t),c();let r=t-(e-a);if(r>0)o=setTimeout(()=>{c()},r);else{if(n)return c();o=setTimeout(()=>{c()},t)}}}function i(e,t,n){let o={},r={},i=new Map,s=0;return function(){let a=this,c=+new Date,u=arguments,d=u[0],l=i.get(d);!i.has(d)&&(l=s++,i.set(d,l)),clearTimeout(o[l]),!r[l]&&(r[l]=c),c-r[l]>=n?(r[l]=c,e.apply(a,u)):o[l]=setTimeout(()=>{e.apply(a,u),delete r[l],delete o[l],i.delete(d)},t)}}function s(e,t){let n=new Map,o={},r={},i=0;return function(){let s=Date.now(),a=arguments,c=a[0],u=n.get(c);!n.has(c)&&(u=i++,n.set(c,u));let d=()=>{e.apply(this,a),delete r[u],delete o[u],n.delete(c)};void 0===r[u]&&(r[u]=0),o[u]&&(clearTimeout(o[u]),delete o[u]);let l=t-(s-r[u]);l>0?o[u]=setTimeout(()=>{d()},l):o[u]=setTimeout(()=>{d()},t)}}n.d(t,{BJ:function(){return i},Ds:function(){return r},P2:function(){return o},Xo:function(){return s}})},355132:function(e,t,n){"use strict";n.d(t,{D:function(){return I}});var o=n("101380"),r=n("193533"),i=n("621631"),s=n("651889"),a=n("592242"),c=n("557418"),u=n("835649"),d=n("597552"),l=n("792243");n("689845");var _=n("419707"),p=n("84105"),v=n("358115"),f=n("504025"),h=n("124125"),y=n("435588");class g extends y.W{LeaveConversation(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({leave_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return this.send(t,i.m.IMCMD.LEAVE_CONVERSATION,{inboxType:e.inboxType})})}DeleteMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({delete_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,message_id:e.serverId}});return this.send(t,i.m.IMCMD.DELETE_MESSAGE,{inboxType:e.inboxType})})}GetMessageByServerId(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({get_message_by_id_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverId}});return this.sendWithRawBody(t,i.m.IMCMD.GET_MESSAGE_INFO_BY_SERVER_ID,{inboxType:e.inboxType})})}MarkConversationDelete(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({delete_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,last_message_index:e.lastPullIndex,badge_count:e.badgeCount,mute_badge_count_infos:e.muteBadgeCountInfos}});return this.send(t,i.m.IMCMD.MARK_CONVERSATION_DELETE,{inboxType:e.inboxType})})}AddConversationParticipants(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({conversation_add_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,participants:e.participants,biz_ext:e.bizExt}});return(yield this.send(t,i.m.IMCMD.ADD_CONVERSATION_PARTICIPANTS,{inboxType:e.inboxType})).conversation_add_participants_body})}SetConversationSettingInfo(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({set_conversation_setting_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,set_stick_on_top:e.stickOnTop,set_mute:e.mute,set_favorite:e.favorite,push_status:e.pushStatus}});return(yield this.send(t,i.m.IMCMD.SET_CONVERSATION_SETTING_INFO,{inboxType:e.inboxType})).set_conversation_setting_info_body})}UpsertConversationSettingExtInfo(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({upsert_conversation_setting_ext_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,ext:e.ext}});return(yield this.send(t,i.m.IMCMD.UPSERT_CONVERSATION_SETTING_EXT_INFO,{inboxType:e.inboxType})).upsert_conversation_setting_ext_info_body})}GetConversationParticipantsList(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({conversation_participants_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit}});return this.sendWithRawBody(t,i.m.IMCMD.CONVERSATION_PARTICIPANTS_LIST,{inboxType:e.inboxType})})}DissolveConversation(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({dissolve_conversation_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return this.send(t,i.m.IMCMD.DISSOLVE_CONVERSATION,{inboxType:e.inboxType})})}GetUserConversationList(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({get_conversation_list_body:{con_type:e.type,cursor:e.cursor,limit:e.limit,sort_type:e.sortType,include_role:e.includeRole,exclude_role:e.excludeRole,with_cold:e.withCold,push_status:e.pushStatus}});return this.sendWithRawBody(t,i.m.IMCMD.GET_USER_CONVERSATION_LIST,{inboxType:e.inboxType})})}UnreadCountReport(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({unread_count_report_body:{conv_unread_count:e.conv.map(e=>({conv_short_id:e.shortId,conversation_type:e.type,unread_count:e.count})),total_unread_count:e.total}});return this.send(t,i.m.IMCMD.UNREAD_COUNT_REPORT,{inboxType:e.inboxType})})}BroadcastReceiveMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({broadcast_recv_message_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,cursor:e.cursor,limit:e.limit,reverse:e.reverse,pull_type:e.pullType}});return this.sendWithRawBody(t,i.m.IMCMD.BROADCAST_RECV_MESSAGE,{inboxType:e.inboxType})})}ModifyMessageProperty(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({modify_message_property_body:{property_list:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType,server_message_id:e.serverId,client_message_id:e.clientId,modify_property_content:e.modifyContent.map(e=>({operation:e.operation,key:e.key,value:e.value,idempotent_id:e.idempotentId}))},ticket:e.ticket}});return(yield this.send(t,i.m.IMCMD.SET_MESSAGE_PROPERTY,{inboxType:e.inboxType})).modify_message_property_body})}GetConversationCoreInfo(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({get_conversation_core_info_body:{conversation_id:e.conversationId,conversation_short_id:e.conversationShortId,conversation_type:e.conversationType}});return this.send(t,i.m.IMCMD.GET_CONVERSATION_CORE_INFO,{inboxType:e.inboxType})})}}var m=n("223818"),b=n("751448"),k=n("902687"),O=n("190638");class x extends O.f{process(e){return(0,o.mG)(this,void 0,void 0,function*(){return e.data.type===i.m.MessageType.MESSAGE_TYPE_MARK_COMMAND?(e.needContinue=!1,this.handlePinCmd(e.data,e.conv)):e.data.type===i.m.MessageType.MESSAGE_TYPE_BATCH_UNMARK_COMMAND&&(e.needContinue=!1,this.handleBatchUnmarkCmd(e.data,e.conv)),e})}handlePinCmd(e,t){let n=v.parse(e.content).server_message_id.toString(),o=this.resolve(u.Uk.MessageManager).getByServerIdRaw(t.id,n);if(!o){a.Y.ctxWarn(this.ctx,"local message not exist, serverMsg=",e);return}if(o.version.gt(e.version)){a.Y.ctxWarn(this.ctx,"server message is older, localMsg=",o,"serverMsg=",e);return}o.ext=e.ext,o.version=e.version,this.resolve(u.Uk.MessageManager).upsert(o)}handleBatchUnmarkCmd(e,t){var n,o;let r=v.parse(null!==(o=null===(n=null==e?void 0:e.ext)||void 0===n?void 0:n[s.v9.MarkMessageNewExt])&&void 0!==o?o:"{}");for(let n of Object.keys(r)){let o=this.resolve(u.Uk.MessageManager).getByServerIdRaw(t.id,n.toString());if(!o){a.Y.ctxWarn(this.ctx,"local message not exist, serverMsg=",e);continue}o.ext=Object.assign(o.ext,r[n]),o.version=e.version,this.resolve(u.Uk.MessageManager).upsert(o)}}}class w{}var C=n("156356"),P=n("206637");class I extends p.v{constructor(){super(...arguments),this.name="ExtensionPlugin"}leaveConversation(e){return(0,o.mG)(this,void 0,void 0,function*(){yield this.api.LeaveConversation({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,inboxType:e.conversation.inboxType}),this.resolve(u.Uk.ParticipantManager).delete(e.conversation.id,[this.ctx.option.userId])})}deleteMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){if(!e.message.serverId)throw new c.G({ctx:this.ctx,type:s.NI.MessageNotReady,msg:`message ${e.message} is not ready`,reachServer:!1,sender:this});try{if(this.resolve(u.Uk.MessageManager).delete(e.message.conversationId,e.message.serverId),e.localOnly)return;let t=this.resolve(u.Uk.ConversationManager).get(e.message.conversationId);yield this.api.DeleteMessage({conversationId:e.message.conversationId,conversationShortId:r.fromString(e.message.conversationShortId),conversationType:e.message.conversationType,serverId:r.fromString(e.message.serverId),inboxType:t.inboxType})}catch(e){a.Y.ctxWarn(this.ctx,"delete message error, may lost server operation",e)}})}deleteConversation(e){var t;return(0,o.mG)(this,void 0,void 0,function*(){try{let n=e.conversation.lastMessageIndex;if(this.resolve(u.Uk.ConversationManager).delete(e.conversation.id),e.localOnly)return;yield this.api.MarkConversationDelete({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,lastPullIndex:n,inboxType:e.conversation.inboxType,badgeCount:e.conversation.badgeCount,muteBadgeCountInfos:null===(t=e.conversation.muteBadgeCountInfos)||void 0===t?void 0:t.map(e=>({message_type:e.message_type,badge_count:e.badge_count}))})}catch(e){a.Y.ctxWarn(this.ctx,"delete conversation error, may lost server operation",e)}})}addParticipants(e){var t,n;return(0,o.mG)(this,void 0,void 0,function*(){let o=Array.isArray(e.participant)?e.participant:[e.participant],i=yield this.api.AddConversationParticipants({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,participants:o.map(e=>r.fromValue(e)),bizExt:e.bizExt,inboxType:e.conversation.inboxType});return(null==i?void 0:i.status)!==0?{success:!1,failedParticipant:o,payload:e.conversation,checkCode:i.check_code,checkMsg:i.check_message,statusCode:i.status,statusMsg:i.extra_info}:{success:!0,failedParticipant:null!==(n=null===(t=i.failed_participants)||void 0===t?void 0:t.map(e=>e.toString()))&&void 0!==n?n:[],payload:e.conversation,checkCode:i.check_code,checkMsg:i.check_message,statusCode:i.status,statusMsg:i.extra_info}})}setConversationSettingInfo(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=yield this.api.SetConversationSettingInfo({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,stickOnTop:e.stickOnTop,mute:e.mute,favorite:e.favorite,inboxType:e.conversation.inboxType,pushStatus:e.pushStatus});return(null==t?void 0:t.status)!==0?{success:!1,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info}:(yield this.resolve(u.Uk.ConversationManager).refreshAsync(e.conversation),{success:!0,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info})})}upsertConversationSettingExtInfo(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=yield this.api.UpsertConversationSettingExtInfo({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,ext:e.ext,inboxType:e.conversation.inboxType});return(null==t?void 0:t.status)!==0?{success:!1,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info}:(yield this.resolve(u.Uk.ConversationManager).refreshAsync(e.conversation),{success:!0,payload:e.conversation,checkCode:t.check_code,checkMsg:t.check_message,statusCode:t.status,statusMsg:t.extra_info})})}getConversationParticipants(e){return this.resolve(u.Uk.ParticipantManager).getParticipants(e.conversation)}getConversationParticipantsAsync(e){var t,n;return(0,o.mG)(this,void 0,void 0,function*(){let o=!0,i=r.ZERO;for(;o;){let s=yield this.getConversationParticipantsByPage({cursor:i,limit:50,conversation:e.conversation});o=null!==(t=null==s?void 0:s.hasMore)&&void 0!==t&&t,i=null!==(n=null==s?void 0:s.cursor)&&void 0!==n?n:r.ZERO}return this.resolve(u.Uk.ParticipantManager).get(e.conversation.id)})}getConversationParticipantsByPage(e){var t,n,i,s,a,c;return(0,o.mG)(this,void 0,void 0,function*(){let o=null!==(t=e.cursor)&&void 0!==t?t:r.ZERO,d=null!==(n=e.limit)&&void 0!==n?n:50,l=yield this.api.GetConversationParticipantsList({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,cursor:o?r.fromValue(o):r.ZERO,limit:d,inboxType:e.conversation.inboxType}),p=null===(s=null===(i=l.body)||void 0===i?void 0:i.conversation_participants_body)||void 0===s?void 0:s.participants_page,v=null!==(a=null==p?void 0:p.has_more)&&void 0!==a&&a;o=null!==(c=null==p?void 0:p.cursor)&&void 0!==c?c:r.ZERO;let f=[];return null==p||p.participants.forEach(t=>{f.push(_.Q.fromServerParticipant(this.ctx,t,e.conversation,l.log_id))}),this.resolve(u.Uk.ParticipantManager).upsertBatch(e.conversation.id,f),this.resolve(u.Uk.ConversationManager).upsert(e.conversation),{participants:f,hasMore:v,cursor:o}})}dissolveConversation(e){return(0,o.mG)(this,void 0,void 0,function*(){yield this.api.DissolveConversation({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,inboxType:e.conversation.inboxType}),this.resolve(u.Uk.ConversationManager).delete(e.conversation.id),this.resolve(u.Uk.EventBus).emit(s.c5.ConversationDissolve,this,e.conversation),this.resolve(u.Uk.EventBus).emitEmpty(s.c5.ConversationChange,this)})}getUserConversationList(e){var t,n;return(0,o.mG)(this,void 0,void 0,function*(){if(void 0===e.inboxType&&(e.inboxType=this.resolve(u.Uk.InboxType).getDefaultInbox()),e.type!==i.m.ConversationType.GROUP_CHAT&&(void 0!==e.includeRole||void 0!==e.excludeRole))throw new c.G({ctx:this.ctx,type:s.NI.InvalidParam,msg:"role filter only available in group chat",sender:this,reachServer:!1});if(void 0!==e.includeRole&&void 0!==e.excludeRole)throw new c.G({ctx:this.ctx,type:s.NI.InvalidParam,msg:"conflict include and exclude",sender:this,reachServer:!1});let o=yield this.api.GetUserConversationList({type:e.type,cursor:e.cursor?r.fromValue(e.cursor):r.ZERO,limit:e.limit?r.fromValue(e.limit):r.fromNumber(20),sortType:null!==(t=e.sortType)&&void 0!==t?t:i.m.SortType.JOIN_TIME,includeRole:e.includeRole,excludeRole:e.excludeRole,withCold:e.withCold,inboxType:e.inboxType}),a=null===(n=o.body)||void 0===n?void 0:n.get_conversation_list_body,l=a.list.map(e=>d.r.fromServerConversation(this.ctx,e,o.log_id));return l.forEach(e=>this.resolve(u.Uk.ConversationManager).upsert(e)),{conversation:l,hasMore:null==a?void 0:a.has_more,cursor:null==a?void 0:a.next_cursor}})}unreadCountReport(){return(0,o.mG)(this,void 0,void 0,function*(){if(!this.ctx.option.unreadCountReport)throw new c.G({ctx:this.ctx,msg:"unread count report not enabled",sender:this,type:s.NI.InvalidParam,reachServer:!1});let e=this.resolve(u.Uk.ConversationManager).getConversationArray(),t=(0,h.vM)(e,e=>e.inboxType.toString());for(let e of Object.keys(t)){let n=t[e],o=[],i=0;for(let t of(n.forEach(e=>{let t=this.getNormalMsgUnreadCount(e);i+=t,o.push({shortId:r.fromString(e.shortId),count:r.fromNumber(t),type:e.type})}),(0,h.F3)(o,30)))try{yield this.api.UnreadCountReport({total:r.fromValue(i),conv:t,inboxType:Number.parseInt(e,10)})}catch(e){a.Y.ctxWarn(this.ctx,"report unread error:",e,"conv:",n)}}0===e.length&&(yield this.api.UnreadCountReport({total:r.fromValue(0),conv:[],inboxType:this.resolve(u.Uk.InboxType).getDefaultInbox()}))})}modifyMessageProperty(e){var t,n,a,c;return(0,o.mG)(this,void 0,void 0,function*(){let o;let d={success:!1,payload:e.message},_=this.resolve(u.Uk.ConversationManager).getRaw(e.message.conversationId);if(!_)return d;for(let o of e.modifyContent){let r=null!==(n=null===(t=e.message.property[o.key])||void 0===t?void 0:t.findIndex(e=>{var t;return e.idempotentId===(null!==(t=o.idempotentId)&&void 0!==t?t:this.ctx.option.userId)}))&&void 0!==n?n:-1;!o.operation&&(-1===r?o.operation=i.m.OPERATION_TYPE.ADD_PROPERTY_ITEM:o.operation=i.m.OPERATION_TYPE.REMOVE_PROPERTY_ITEM)}let p=e.modifyContent.map(e=>{var t;return Object.assign(Object.assign({},e),{idempotentId:null!==(t=e.idempotentId)&&void 0!==t?t:this.ctx.option.userId,operation:e.operation})});f.z.mergeOperationToCurrent(e.message,p),this.resolve(u.Uk.MessageManager).upsert(e.message),this.resolve(u.Uk.EventBus).emit(s.c5.MessagePropertyUpsert,this,e.message);try{o=yield this.api.ModifyMessageProperty({conversationId:_.id,conversationShortId:r.fromValue(_.shortId),conversationType:_.type,serverId:r.fromValue(e.message.serverId),clientId:e.message.clientId,ticket:_.ticket,modifyContent:p,inboxType:_.inboxType})}catch(t){for(let n of(d.success=!1,d.statusCode=null==o?void 0:o.status,d.statusMsg=t.msg,d.body=o,e.modifyContent)){let t=null!==(c=null===(a=e.message.property[n.key])||void 0===a?void 0:a.findIndex(e=>{var t;return e.idempotentId===(null!==(t=n.idempotentId)&&void 0!==t?t:this.ctx.option.userId)}))&&void 0!==c?c:-1;-1!==t&&(e.message.property[n.key][t].status=l.R.Failed)}return this.resolve(u.Uk.MessageManager).upsert(e.message),this.resolve(u.Uk.EventBus).emit(s.c5.MessagePropertyUpsert,this,e.message),d}return[i.m.ModifyMessagePropertyStatus.MODIFY_PROPERTY_SUCCESS,i.m.ModifyMessagePropertyStatus.MODIFY_PROPERTY_REPEAT_REQUEST].includes(null==o?void 0:o.status)&&(d.success=!0),e.message.version=null==o?void 0:o.version,this.resolve(u.Uk.MessageManager).upsert(e.message),this.resolve(u.Uk.EventBus).emit(s.c5.MessagePropertyUpsert,this,e.message),d.checkCode=r.ZERO,d.checkMsg="",d.statusCode=o.status,d.statusMsg="",d.body=o,d})}getMessageByServerId(e){var t,n;return(0,o.mG)(this,void 0,void 0,function*(){let o=this.resolve(u.Uk.MessageManager).getByServerIdRaw(e.conversation.id,e.serverMessageId);if(o)return o;try{let o=yield this.api.GetMessageByServerId({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,serverId:r.fromString(e.serverMessageId),inboxType:e.conversation.inboxType}),i=null===(n=null===(t=o.body)||void 0===t?void 0:t.get_message_by_id_body)||void 0===n?void 0:n.msg_info;if(!i.body)return null;return l.v.fromServerMessage(this.ctx,i.body,o.log_id)}catch(e){return null}})}install(){this.api=new g(this.getContext()),this.ctx.register(u.Uk.BroadcastManager,new m.Q(this.ctx)),this.ctx.register(u.Uk.ExtensionApi,this.api),this.ctx.register(u.Uk.ExtensionPlugin,this),this.instance.deleteConversation=this.extendFunc(this.deleteConversation),this.instance.deleteMessage=this.extendFunc(this.deleteMessage),this.instance.leaveConversation=this.extendFunc(this.leaveConversation),this.instance.addParticipants=this.extendFunc(this.addParticipants),this.instance.setConversationSettingInfo=this.extendFunc(this.setConversationSettingInfo),this.instance.upsertConversationSettingExtInfo=this.extendFunc(this.upsertConversationSettingExtInfo),this.instance.getConversationParticipants=this.extendFunc(this.getConversationParticipants),this.instance.getConversationParticipantsAsync=this.extendFunc(this.getConversationParticipantsAsync),this.instance.getConversationParticipantsByPage=this.extendFunc(this.getConversationParticipantsByPage),this.instance.dissolveConversation=this.extendFunc(this.dissolveConversation),this.instance.modifyMessageProperty=this.extendFunc(this.modifyMessageProperty),this.instance.unreadCountReport=this.extendFunc(this.unreadCountReport),this.instance.getUserConversationList=this.extendFunc(this.getUserConversationList),this.instance.getMessageByServerId=this.extendFunc(this.getMessageByServerId),this.instance.getConversationBots=this.extendFunc(this.getConversationBots),this.addEventHandler(),this.resolve(u.Uk.MessageManager).injectProcessor(new b.N(this.ctx)),this.resolve(u.Uk.MessageManager).injectProcessor(new k.y(this.ctx)),this.resolve(u.Uk.MessageManager).injectProcessor(new x(this.ctx)),this.resolve(u.Uk.MessageManager).injectProcessorBefore(new C.m(this.ctx)),this.resolve(u.Uk.MessageManager).injectProcessor(new P.W(this.ctx))}receivePacket(e){return(0,o.mG)(this,void 0,void 0,function*(){e.cmd===i.m.IMCMD.NEW_BROADCAST_MSG_NOTIFY&&(yield this.receiveBroadcastPacket(e)),e.cmd===i.m.IMCMD.NEW_P2P_MSG_NOTIFY&&(yield this.receiveP2PMessage(e))})}receiveP2PMessage(e){var t;return(0,o.mG)(this,void 0,void 0,function*(){if(null===(t=e.body)||void 0===t?void 0:t.has_new_p2p_message_notify){let t=e.body.has_new_p2p_message_notify,n=new w;n.sendType=t.send_type,n.sender=t.sender.toString(),n.secSender=t.sec_sender,n.conversationId=t.conversation_id,n.conversationShortId=t.conversation_short_id.toString(),n.conversationType=t.conversation_type,n.type=t.message_type,n.content=t.content,n.ext=t.ext,n.createTime=new Date(t.create_time.toNumber()),this.resolve(u.Uk.EventBus).emit(s.c5.ReceiveNewP2PMessage,this,n)}})}receiveBroadcastPacket(e){var t;return(0,o.mG)(this,void 0,void 0,function*(){let n=e.body.has_new_message_notify,o=n.message,i=l.v.fromServerMessage(this.ctx,o,e.log_id);!i.ext&&(i.ext={}),yield this.resolve(u.Uk.BroadcastManager).processNewMessage(i,s.v$.Online);let a=this.resolve(u.Uk.BroadcastManager).getConversation(i.conversationId),c=a.localIndex;if(a.setConversationCursor(n.next_cursor),c.gt(r.ZERO)&&(null===(t=n.previous_cursor)||void 0===t?void 0:t.gt(c))){let e=!0,t=c,n=0;for(;e&&n<5;){let o=yield this.broadcastReceiveMessageWithType({conversation:a,cursor:t,limit:50,reverse:!1,pullType:1});e=o.hasMore,t=o.cursor,yield this.resolve(u.Uk.BroadcastManager).processNewMessagesFromPull(o.msgs,s.v$.BroadcastLoadMore,o.log_id),n++}}})}dispose(){return(0,o.mG)(this,void 0,void 0,function*(){this.resolve(u.Uk.ParticipantManager).dispose(),this.resolve(u.Uk.BroadcastManager).dispose()})}addEventHandler(){this.ctx.option.autoReadIndex&&this.resolve(u.Uk.EventBus).subscribe(s.c5.MessageUpsert,e=>(0,o.mG)(this,void 0,void 0,function*(){if(e.flightStatus===s.b3.Inflight)return;let t=this.resolve(u.Uk.ConversationManager).getRaw(e.conversationId);if(!t||0===this.resolve(u.Uk.ParticipantManager).getRaw(t.id).length)return;let n=this.resolve(u.Uk.ParticipantManager).getByUserIdRaw(t.id,e.sender);n&&e.moveReadIndex&&(n.readIndex=e.indexInConversation,n.readOrder=e.orderInConversation,this.resolve(u.Uk.ParticipantManager).upsert(t.id,n),a.Y.ctxDebug(this.ctx,`auto readindex with read:${n.readIndex.toString()} & order:${n.readOrder.toString()}`))})),this.resolve(u.Uk.EventBus).subscribe(s.c5.ReceiveNewP2PMessage,e=>(0,o.mG)(this,void 0,void 0,function*(){if(e.type===i.m.MessageType.MESSAGE_TYPE_READ_COMMAND){let t=this.resolve(u.Uk.ConversationManager).getWithShortIdRaw(e.conversationShortId);if(!t)return;let n=v.parse(e.content),o=r.fromValue(n.P2PSender).toString(),i=this.resolve(u.Uk.ParticipantManager).getByUserIdRaw(t.id,o);if(!i)return;let c=i.readIndex,d=r.fromValue(n.P2PSenderReadIndex);if(!c.gte(d))i.readIndex=d,this.resolve(u.Uk.ParticipantManager).upsert(t.id,i),this.resolve(u.Uk.EventBus).emit(s.c5.ConversationUpsert,this,t),this.resolve(u.Uk.EventBus).emitEmpty(s.c5.ConversationChange,this),a.Y.ctxDebug(this.ctx,`p2p update ${i.userId} readindex: ${c.toString()} to ${d.toString()}`)}}))}broadcastReceiveMessageWithType(e){var t,n,i,a,c;return(0,o.mG)(this,void 0,void 0,function*(){let o=yield this.api.BroadcastReceiveMessage({conversationId:e.conversation.id,conversationShortId:r.fromString(e.conversation.shortId),conversationType:e.conversation.type,cursor:e.cursor?r.fromValue(e.cursor):e.conversation.localIndex,limit:e.limit?r.fromValue(e.limit):r.fromNumber(20),reverse:null!==(t=e.reverse)&&void 0!==t&&t,pullType:null!==(n=e.pullType)&&void 0!==n?n:0,inboxType:e.conversation.inboxType}),d=null===(i=o.body)||void 0===i?void 0:i.broadcast_recv_message_body,_=null!==(c=null===(a=d.messages)||void 0===a?void 0:a.map(e=>l.v.fromServerMessage(this.ctx,e,o.log_id)))&&void 0!==c?c:[];return yield this.resolve(u.Uk.BroadcastManager).processNewMessagesFromPull(_,s.v$.BroadcastLoadMore,o.log_id),d.next_cursor&&e.conversation.setConversationCursor(d.next_cursor),{msgs:_,hasMore:d.has_more,cursor:d.next_cursor,log_id:o.log_id}})}getNormalMsgUnreadCount(e){return e.isMuted?0:e.pushStatus===s.Bs.PartAllow?e.unreadCountWithWhiteList:e.unreadCount}getConversationBots(e){var t,n,i,s;return(0,o.mG)(this,void 0,void 0,function*(){return null!==(s=null===(i=null===(n=null===(t=(yield this.resolve(u.Uk.CoreApi).GetConversationInfoListV2({conversations:[e.conversation].map(e=>({conversationId:e.id,conversationShortId:r.fromString(e.shortId),conversationType:e.type})),inboxType:e.conversation.inboxType})).body)||void 0===t?void 0:t.get_conversation_info_list_v2_body)||void 0===n?void 0:n.conversation_info_list)||void 0===i?void 0:i[0].bots)&&void 0!==s?s:[]})}}},46874:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var o=n(193533),r=n(835649),i=n(597552);n(689845);var s=n(832141);n(358115);class a extends i.r{constructor(){super(...arguments),this.localIndex=o.ZERO}get isMuted(){return!1}get isStickOnTop(){return!1}get isFavorite(){return!1}get toParticipantUserId(){}static fromServerConversation(e,t,n){let o=new a(e);return o.id=t.conversation_id,o.shortId=t.conversation_short_id.toString(),o.type=t.conversation_type,o.isOffline=!1,o.coreInfo=new s._(o,t),o}setConversationCursor(e){e>this.localIndex&&(this.localIndex=e),this.localIndex=e}getMessageList(e=e=>e.visible){return this.resolve(r.Uk.BroadcastManager).getList(this.id).filter(e)}get unreadCount(){return 0}}},642337:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var o=n(101380),r=n(470332),i=n(592242),s=n(557418),a=n(651889),c=n(835649),u=n(193533);class d extends r.v{constructor(){super(...arguments),this.hasHybridLinkFunction=!0,this.name="AwemeHybridLinkPlugin",this.innerConvListVersion=[],this.innerNextCmdIndex=[],this.innerReadConvListVersion=[],this.lastPullPromise=null}get coreApi(){return this.resolve(c.Uk.CoreApi)}get inboxType(){return this.resolve(c.Uk.InboxType)}get instance(){return this.resolve(c.Uk.CoreInstance)}getConvListVersion(e){var t;return null!==(t=this.innerConvListVersion[null!=e?e:this.inboxType.getDefaultInbox()])&&void 0!==t?t:u.ZERO}setConvListVersion(e,t){var n;return(0,o.mG)(this,void 0,void 0,function*(){let o=null!=t?t:this.inboxType.getDefaultInbox(),r=this.innerConvListVersion[o];if(!!(!r||r.lt(e)))i.Y.ctxDebug(this.ctx,`update conv list version for inbox:${o} from ${null==r?void 0:r.toString()} to ${e.toString()}`),this.innerConvListVersion[o]=e,yield null===(n=this.resolve(c.Uk.DbProxy))||void 0===n?void 0:n.saveConvListVersion(o,e)})}getNextCmdIndex(e){var t;return null!==(t=this.innerNextCmdIndex[null!=e?e:this.inboxType.getDefaultInbox()])&&void 0!==t?t:u.ZERO}setNextCmdIndex(e,t){var n;return(0,o.mG)(this,void 0,void 0,function*(){let o=null!=t?t:this.inboxType.getDefaultInbox(),r=this.innerNextCmdIndex[o];if(!!(!r||r.lt(e)))i.Y.ctxDebug(this.ctx,`update cmd index for inbox:${o} from ${null==r?void 0:r.toString()} to ${e.toString()}`),this.innerNextCmdIndex[o]=e,yield null===(n=this.resolve(c.Uk.DbProxy))||void 0===n?void 0:n.saveNextCmdIndex(o,e)})}getReadConvListVersion(e){var t;return null!==(t=this.innerReadConvListVersion[null!=e?e:this.inboxType.getDefaultInbox()])&&void 0!==t?t:u.ZERO}setReadConvListVersion(e,t){var n;return(0,o.mG)(this,void 0,void 0,function*(){let o=null!=t?t:this.inboxType.getDefaultInbox(),r=this.innerReadConvListVersion[o];if(!!(!r||r.lt(e)))i.Y.ctxDebug(this.ctx,`update read conv list version for inbox:${o} from ${null==r?void 0:r.toString()} to ${e.toString()}`),this.innerReadConvListVersion[o]=e,yield null===(n=this.resolve(c.Uk.DbProxy))||void 0===n?void 0:n.saveReadConvListVersion(o,e)})}getMessagesByUserInit(e={}){var t,n,r,i,d;return(0,o.mG)(this,void 0,void 0,function*(){let o=null!==(t=e.inboxType)&&void 0!==t?t:this.inboxType.getDefaultInbox(),l=e.page;if(!this.inboxType.isValidInbox(o))throw new s.G({ctx:this.ctx,msg:"invalid inbox",type:a.NI.InvalidInboxType,sender:this});let _=yield this.coreApi.GetMessagesByInit({inboxType:o,convLimit:e.convLimit,msgLimit:e.msgLimit,page:l,version:e.versionForNextQuery}),p=null===(n=_.body)||void 0===n?void 0:n.message_by_init,v=null===(r=p.messages)||void 0===r?void 0:r.map(e=>e.conversations),f=[];null===(i=p.messages)||void 0===i||i.forEach(e=>e.messages&&(null==f?void 0:f.push(...e.messages)));let h=p.has_more,y=p.next_init_version,g=_.log_id;return this.instance.processInitConversation(v,g),yield this.instance.processInitMessage(f,g),!e.versionForNextQuery&&(yield this.setConvListVersion(p.version,o),yield this.setNextCmdIndex(null!==(d=p.cmd_index)&&void 0!==d?d:u.ZERO,o),yield this.setReadConvListVersion(p.readconv_version,o)),this.resolve(c.Uk.EventBus).emitEmpty(a.c5.InitLoadPage,this),{hasMore:h,page:(null!=l?l:0)+1,versionForNextQuery:y}})}getMessagesByUser({inboxType:e,source:t,convVersion:n,cmdIndex:r,readVersion:d}={}){var l,_,p;return(0,o.mG)(this,void 0,void 0,function*(){if(void 0===e&&(e=this.inboxType.getDefaultInbox()),!this.inboxType.isValidInbox(e))throw new s.G({ctx:this.ctx,msg:"invalid inbox",type:a.NI.InvalidInboxType,sender:this});if(!0===this.ctx.option.disableInitPull&&0===this.instance.getConversationList().length&&this.getConvListVersion(e).eq(u.ZERO)){i.Y.ctxWarn(this.ctx,"try to pull history from 0, preventing");return}let o=void 0!==n?u.fromValue(n):this.getConvListVersion(e),v=void 0!==r?u.fromValue(r):this.getNextCmdIndex(e),f=void 0!==d?u.fromValue(d):this.getReadConvListVersion(e);for(;o||v||f;){let n=yield this.coreApi.GetUserMessage({inboxType:e,version:o,cmdIndex:v,readVersion:f,source:null!=t?t:""}),r=null===(l=n.body)||void 0===l?void 0:l.get_user_message,i=r.messages,s=r.cmd_messages,u=r.read_info;if(i){if(o=i.has_more?i.next_conversation_version:void 0,i.messages)for(let e of i.messages){yield this.resolve(c.Uk.MessageManager).processNewMessagesFromPull(e.messages,a.v$.UserInbox,n.log_id);let t=this.resolve(c.Uk.ConversationManager).getRaw(e.conversation_id.toString());this.instance.handleBadgeCount({badge_count:e.badge_count,mute_badge_count_info:e.mute_badge_count_infos},t)}yield this.setConvListVersion(i.next_conversation_version,e)}else o=void 0;if(s?(v=s.has_more&&s.next_cmd_index?s.next_cmd_index:void 0,(null===(_=s.messages)||void 0===_?void 0:_.length)&&(yield this.instance.processInitMessage(s.messages,n.log_id),s.next_cmd_index&&(yield this.setNextCmdIndex(s.next_cmd_index,e)))):v=void 0,u){if(f=u.has_more?u.next_version:void 0,u.read_info)for(let e of u.read_info)this.resolve(c.Uk.ConversationManager).markRead(e.ConversationShortId.toString(),e.read_index,e.read_badge_count.toNumber(),null!==(p=e.mute_read_badge_count_infos)&&void 0!==p?p:[]);yield this.setReadConvListVersion(u.next_version,e)}else f=void 0;this.instance.initResult===a.rb.Start&&this.resolve(c.Uk.EventBus).emitEmpty(a.c5.InitLoadPage,this)}this.resolve(c.Uk.ConversationManager).refreshLocal()})}getInitMesages({inboxType:e,convLimit:t,msgLimit:n,convTotal:r}){return(0,o.mG)(this,void 0,void 0,function*(){i.Y.ctxDebug(this.ctx,`load history for inbox ${e} by full init`);let o={hasMore:!0,page:0,versionForNextQuery:void 0};for(;o.hasMore&&(o=yield this.getMessagesByUserInit(Object.assign({inboxType:e,convLimit:t,msgLimit:n},o)),!r||!(this.resolve(c.Uk.ConversationManager).getConversationArray().length>=r)););})}prepareHistoryForInbox({inboxType:e,convLimit:t,msgLimit:n,convTotal:r}){var s,a,d,l,_;return(0,o.mG)(this,void 0,void 0,function*(){try{let o=yield null===(s=this.resolve(c.Uk.DbProxy))||void 0===s?void 0:s.loadConvListVersion(e),p=yield null===(a=this.resolve(c.Uk.DbProxy))||void 0===a?void 0:a.loadNextCmdIndex(e),v=yield null===(d=this.resolve(c.Uk.DbProxy))||void 0===d?void 0:d.loadReadConvListVersion(e);if(o||p||v)return i.Y.ctxDebug(this.ctx,`load history for inbox ${e} by db`),yield this.setConvListVersion(null!=o?o:u.ZERO,e),yield this.setNextCmdIndex(null!=p?p:u.ZERO,e),yield this.setReadConvListVersion(null!=v?v:u.ZERO,e),yield this.getMessagesByUser({inboxType:e,source:"init"}),this.getInitMesages({inboxType:e,convLimit:t,msgLimit:n,convTotal:r}),!0;if(this.ctx.option.disableInitPull){i.Y.ctxDebug(this.ctx,`load history for inbox ${e} by disable init`);let o=yield this.coreApi.GetMessagesByInit({inboxType:e,convLimit:t,msgLimit:n}),r=null===(l=o.body)||void 0===l?void 0:l.message_by_init;return yield this.setConvListVersion(r.version,e),yield this.setNextCmdIndex(null!==(_=r.cmd_index)&&void 0!==_?_:u.ZERO,e),yield this.setReadConvListVersion(r.readconv_version,e),!0}return i.Y.ctxDebug(this.ctx,`load history for inbox ${e} by full init`),yield this.getInitMesages({inboxType:e,convLimit:t,msgLimit:n,convTotal:r}),yield this.getMessagesByUser({inboxType:e,source:"init"}),!0}catch(t){return i.Y.ctxError(this.ctx,`load history failed for inbox:${e}`,t),!1}})}receivePacket(e){var t,n,r,s;return(0,o.mG)(this,void 0,void 0,function*(){let o=!1,a=e.inbox_type,d=null===(t=e.body)||void 0===t?void 0:t.has_new_message_notify;if(!this.resolve(c.Uk.InboxType).getInboxTypeArray().includes(a)){i.Y.ctxDebug(this.ctx,`inbox type ${a} mismatch, drop, logid:${e.log_id}`);return}if(this.ctx.option.checkLastPullFinished&&this.lastPullPromise)try{yield this.lastPullPromise}catch(t){i.Y.ctxWarn(this.ctx,`lastPullPromise error, continue, current packet logid:${e.log_id}`)}d?(null===(n=null==d?void 0:d.conversation_version)||void 0===n?void 0:n.neq(u.ZERO))?o||(o=yield this.parseConvVersion(d,a,e)):(null===(r=null==d?void 0:d.cmd_message_index)||void 0===r?void 0:r.neq(u.ZERO))?o||(o=yield this.parseCmdIndex(d,a,e)):(null===(s=null==d?void 0:d.readconv_version)||void 0===s?void 0:s.neq(u.ZERO))?o||(o=yield this.parseReadConvVersion(d,a,e)):i.Y.ctxWarn(this.ctx,`push body doesn't match any link, skip, logid:${e.log_id}`):(o=!0,i.Y.ctxWarn(this.ctx,`push body is missing, logid:${e.log_id}`)),o&&(this.lastPullPromise=this.getMessagesByUser({inboxType:e.inbox_type,source:"cursor"}),yield this.lastPullPromise)})}parseConvVersion(e,t,n){var r,s,a,c,d,l;return(0,o.mG)(this,void 0,void 0,function*(){let o=null!==(r=null==e?void 0:e.conversation_version)&&void 0!==r?r:u.ZERO,_=null!==(s=null==e?void 0:e.previous_conversation_version)&&void 0!==s?s:u.ZERO,p=this.getConvListVersion(t),v=!1;return(null==p?void 0:p.lt(_))||(null==_?void 0:_.eq(u.ZERO))?(v=!0,i.Y.ctxWarn(this.ctx,`inbox ${t} push previousConvVersion is greater than local clientConvVersion, push:${_}, local:${p}, msgid:${null===(a=e.message)||void 0===a?void 0:a.server_message_id}, logid:${n.log_id}`)):!this.ctx.option.triggerPullWhenReceiveEmptyContent||(null===(c=e.message)||void 0===c?void 0:c.content)?((null==p?void 0:p.gt(_))&&i.Y.ctxWarn(this.ctx,`inbox ${t} push previousConvVersion is lower than local clientConvVersion, push:${_}, local:${p}, msgid:${null===(l=e.message)||void 0===l?void 0:l.server_message_id}, logid:${n.log_id}`),yield this.instance.processPushMessage(e,n),yield this.setConvListVersion(o,t)):(v=!0,i.Y.ctxWarn(this.ctx,`receive empty content push, msgid:${null===(d=e.message)||void 0===d?void 0:d.server_message_id}, logid:${n.log_id}`)),v})}parseCmdIndex(e,t,n){var r,s;return(0,o.mG)(this,void 0,void 0,function*(){let o=e.cmd_message_index;if(!o)return!1;let a=this.getNextCmdIndex(t),c=!1;return o&&o.gt(a)?(c=!0,i.Y.ctxWarn(this.ctx,`inbox ${t} push serverCmdIndex is greater than expected , push:${o}, expect:${a}, msgid:${null===(r=e.message)||void 0===r?void 0:r.server_message_id}, logid:${n.log_id}`)):(null==a?void 0:a.eq(o))?(yield this.instance.processPushMessage(e,n),yield this.setNextCmdIndex(o.add(1),t)):i.Y.ctxWarn(this.ctx,`inbox ${t} push serverCmdIndex is lower than expected , push:${o}, local:${a}, msgid:${null===(s=e.message)||void 0===s?void 0:s.server_message_id}, logid:${n.log_id}`),c})}parseReadConvVersion(e,t,n){var r;return(0,o.mG)(this,void 0,void 0,function*(){let o=e.readconv_version,s=e.pre_readconv_version;if(!o||!s)return!1;let a=this.getReadConvListVersion(t),c=!1;return!s.eq(a)&&(i.Y.ctxWarn(this.ctx,`inbox ${t} push serverPreReadConvVersion is not equal clientReadConvVersion , push:${s}, local:${a}, msgid:${null===(r=e.message)||void 0===r?void 0:r.server_message_id}, logid:${n.log_id}`),c=!0),yield this.setReadConvListVersion(o,t),c})}getReportParams(e){return Object.assign({hybrid_type:"aweme"},void 0!==e?{conv_list_version:this.getConvListVersion(e).toString(),cmd_index:this.getNextCmdIndex(e).toString(),read_conv_list_version:this.getReadConvListVersion(e).toString()}:{})}}},454333:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var o=n(84105),r=n(835649),i=n(379831);class s extends o.v{constructor(){super(...arguments),this.name="IMCloudHybridLinkPlugin"}install(){this.hybridLinkInstance=new i.T(this.ctx),this.register(r.Uk.HybridLink,this.hybridLinkInstance)}}},9:function(e,t,n){"use strict";n.d(t,{b:function(){return d}});var o=n(101380);n(193533);var r=n(651889),i=n(592242),s=n(473614),a=n(835649);n(358115),n(689845);var c=n(84105),u=n(604307);class d extends c.v{constructor(){super(...arguments),this.name="MetricsPlugin",this.ignoreMethods=["getStrangerTotalUnread","getLocalStrangerConversation","checkRtcRequirements","parseContent","unreadCountReport","getMessageReferencedInfo","initAdapter","getConversationParticipants","broadcastGetConversation","getConversationMessages","createMessage","createTextMessage","createFileMessage","sendMessage","getMessageReadReceipt","createConversation","getConversationOnline","getConversationListOnline","getStrangerPreview","emojify","randomEmoji","getAllEmoji","constructor","getUserCursor","setUserCursor","init","getConversation","getConversationList","dispose","intervalFunc","receivePacket","messageFilter","sendMessageObject","tickerUpdate","prepareHistoryForInbox","prepareToken","clearCache","resolve","getContext","processInitMessage","processInitConversation","patchMessage","clientAck","handleBadgeCount","calcBadgeCount","processPushMessage"]}beforeHook(e,t){if(this.ctx.option.aspectBefore)return this.ctx.option.aspectBefore({name:e,params:t})}afterHook(e,t,n,o){let r=this.resolve(a.Uk.Monitor).emitDuration(s.U.BizApiInvoke+s.U.SuccessSuffix,n,{name:e});this.ctx.option.aspectAfter&&this.ctx.option.aspectAfter({name:e,params:t,duration:r,result:o})}errorHook(e,t,n,o){let i=this.resolve(a.Uk.Monitor).emitDuration(s.U.BizApiInvoke+s.U.ErrorSuffix,o,{name:e,error:n.type?`${n.type}:${r.NI[n.type]}`:"unknown"});if(this.ctx.option.aspectError){let o=this.ctx.option.aspectError({name:e,params:t,duration:i,error:n});if(void 0!==o)return!!o}return!0}wrapMetricsAsync(e,t){let n=0;return r=>(0,o.mG)(this,void 0,void 0,function*(){try{let o=this.beforeHook(e,r);if(!1===o)return;n=s.u.performanceNow();let i=yield t.call(this.instance,r);return this.afterHook(e,r,n,i),i}catch(t){if(this.errorHook(e,r,t,n))throw t}})}getFuncs(){let e=[],{instance:t}=this,n=Object.getOwnPropertyNames(t);e=e.concat(n);let o=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(o);e=e.concat(r);let i=Object.getOwnPropertyNames(Object.getPrototypeOf(o));return(e=e.concat(i)).filter(e=>"function"==typeof this.instance[e]&&!this.ignoreMethods.includes(e)&&!e.startsWith("__internal"))}install(){this.register(a.Uk.MetricsPlugin,this),this.ctx.option.monitor=this.unifyMonitorConfig();let e=this.instance;for(let t of this.getFuncs()){let n=e[t];i.Y.ctxDebug(this.ctx,`wrapping metrics for ${t}`),e[t]=this.wrapMetricsAsync(t,n)}this.subscribeTrackerEvent()}receivePacket(e){return(0,o.mG)(this,void 0,void 0,function*(){})}subscribeTrackerEvent(){this.resolve(a.Uk.EventBus).subscribe(r.c5.Error,e=>{this.resolve(a.Uk.Monitor).emitTracker(u.W.Exception,{error_stack:e.stack})}),this.resolve(a.Uk.EventBus).subscribe(r.c5.InitFinish,e=>{let t=this.instance.getConversationList(),n=t.map(e=>e.getMessageList().length).reduce((e,t)=>e+t,0);this.resolve(a.Uk.Monitor).emitTracker(u.W.InitHandler,{conv_count:t.length,total_msg_count:n,is_success:"1"})})}unifyMonitorConfig(){let e=this.ctx.option.monitor;return Array.isArray(e)?e:void 0!==e?(this.ctx.option.monitor=[e],this.ctx.option.monitor):(this.ctx.option.monitor=[],this.ctx.option.monitor)}}},621631:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var o=n(846551),r=n(193533),i=n.n(r);o.util.Long=i(),o.configure();let s=o.Reader,a=o.Writer,c=o.util,u=o.roots.default||(o.roots.default={}),d=u.im_proto=(()=>{let e={};return e.Frame=function(){function e(e){if(this.headers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seqid=c.Long?c.Long.fromBits(0,0,!0):0,e.prototype.logid=c.Long?c.Long.fromBits(0,0,!0):0,e.prototype.service=0,e.prototype.method=0,e.prototype.headers=c.emptyArray,e.prototype.payload_encoding="",e.prototype.payload_type="",e.prototype.payload=c.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).uint64(e.seqid),t.uint32(16).uint64(e.logid),t.uint32(24).int32(e.service),t.uint32(32).int32(e.method),null!=e.headers&&e.headers.length)for(var n=0;n<e.headers.length;++n)u.im_proto.Frame.ExtendedEntry.encode(e.headers[n],t.uint32(42).fork()).ldelim();return null!=e.payload_encoding&&Object.hasOwnProperty.call(e,"payload_encoding")&&t.uint32(50).string(e.payload_encoding),null!=e.payload_type&&Object.hasOwnProperty.call(e,"payload_type")&&t.uint32(58).string(e.payload_type),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.Frame;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.seqid=e.uint64();break;case 2:o.logid=e.uint64();break;case 3:o.service=e.int32();break;case 4:o.method=e.int32();break;case 5:!(o.headers&&o.headers.length)&&(o.headers=[]),o.headers.push(u.im_proto.Frame.ExtendedEntry.decode(e,e.uint32()));break;case 6:o.payload_encoding=e.string();break;case 7:o.payload_type=e.string();break;case 8:o.payload=e.bytes();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("seqid"))throw c.ProtocolError("missing required 'seqid'",{instance:o});if(!o.hasOwnProperty("logid"))throw c.ProtocolError("missing required 'logid'",{instance:o});if(!o.hasOwnProperty("service"))throw c.ProtocolError("missing required 'service'",{instance:o});if(!o.hasOwnProperty("method"))throw c.ProtocolError("missing required 'method'",{instance:o});return o},e.ExtendedEntry=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t.uint32(10).string(e.key),t.uint32(18).string(e.value),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.Frame.ExtendedEntry;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.key=e.string();break;case 2:o.value=e.string();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("key"))throw c.ProtocolError("missing required 'key'",{instance:o});if(!o.hasOwnProperty("value"))throw c.ProtocolError("missing required 'value'",{instance:o});return o},e}(),e}(),e.IMCMD=function(){let e={},t=Object.create(e);return t[e[100]="SEND_MESSAGE"]=100,t[e[200]="GET_MESSAGES_BY_USER"]=200,t[e[203]="GET_MESSAGES_BY_USER_INIT_V2"]=203,t[e[211]="GET_MESSAGE_INFO_BY_SERVER_ID"]=211,t[e[301]="GET_MESSAGES_BY_CONVERSATION"]=301,t[e[302]="GET_MESSAGES_CHECKINFO_IN_CONVERSATION"]=302,t[e[410]="SEND_USER_ACTION"]=410,t[e[411]="SEND_INPUT_STATUS"]=411,t[e[500]="NEW_MSG_NOTIFY"]=500,t[e[504]="NEW_P2P_MSG_NOTIFY"]=504,t[e[505]="NEW_BROADCAST_MSG_NOTIFY"]=505,t[e[603]="MARK_CONVERSATION_DELETE"]=603,t[e[609]="CREATE_CONVERSATION_V2"]=609,t[e[610]="GET_CONVERSATION_INFO_LIST_V2"]=610,t[e[611]="GET_CONVERSATION_INFO_LIST_BY_FAVORITE_V2"]=611,t[e[612]="GET_CONVERSATION_INFO_LIST_BY_TOP_V2"]=612,t[e[614]="DISSOLVE_CONVERSATION"]=614,t[e[615]="GET_CONVERSATIONS_CHECKINFO"]=615,t[e[605]="CONVERSATION_PARTICIPANTS_LIST"]=605,t[e[650]="ADD_CONVERSATION_PARTICIPANTS"]=650,t[e[651]="REMOVE_CONVERSATION_PARTICIPANTS"]=651,t[e[652]="LEAVE_CONVERSATION"]=652,t[e[654]="MGET_CONVERSATION_PARTICIPANTS"]=654,t[e[655]="UPDATE_CONVERSATION_PARTICIPANT"]=655,t[e[670]="ADD_CONVERSATION_BOTS"]=670,t[e[671]="REMOVE_CONVERSATION_BOTS"]=671,t[e[701]="DELETE_MESSAGE"]=701,t[e[702]="RECALL_MESSAGE"]=702,t[e[705]="SET_MESSAGE_PROPERTY"]=705,t[e[901]="GET_CONVERSATION_CORE_INFO"]=901,t[e[902]="SET_CONVERSATION_CORE_INFO"]=902,t[e[904]="UPSERT_CONVERSATION_CORE_EXT_INFO"]=904,t[e[921]="SET_CONVERSATION_SETTING_INFO"]=921,t[e[922]="UPSERT_CONVERSATION_SETTING_EXT_INFO"]=922,t[e[1001]="GET_STRANGER_CONVERSATION_LIST"]=1001,t[e[1002]="GET_STRANGER_MESSAGES_IN_CONVERSATION"]=1002,t[e[1003]="DELETE_STRANGER_MESSAGE"]=1003,t[e[1004]="DELETE_STRANGER_CONVERSATION"]=1004,t[e[1005]="DELETE_ALL_STRANGER_CONVERSATIONS"]=1005,t[e[1006]="MARK_STRANGER_CONVERSATION_READ"]=1006,t[e[1007]="MARK_ALL_STRANGER_CONVERSATIONS_READ"]=1007,t[e[1099]="STRANGER_NEW_MSG_NOTIFY"]=1099,t[e[2e3]="GET_CONVERSATION_PARTICIPANTS_READ_INDEX_V3"]=2e3,t[e[2001]="GET_CONVERSATION_PARTICIPANTS_MIN_INDEX_V3"]=2001,t[e[2002]="MARK_CONVERSATION_READ_V3"]=2002,t[e[2003]="GET_MEDIA_UPLOAD_TOKEN"]=2003,t[e[2004]="GET_MEDIA_URLS"]=2004,t[e[2005]="GET_TICKET"]=2005,t[e[2006]="GET_USER_CONVERSATION_LIST"]=2006,t[e[2007]="BROADCAST_SEND_MESSAGE"]=2007,t[e[2008]="BROADCAST_RECV_MESSAGE"]=2008,t[e[2009]="BROADCAST_USER_COUNTER"]=2009,t[e[2010]="CLIENT_ACK"]=2010,t[e[2011]="CREATE_VOIP"]=2011,t[e[2012]="CALL_VOIP"]=2012,t[e[2013]="UPDATE_VOIP"]=2013,t[e[2014]="HEARTBEAT_CHANNEL"]=2014,t[e[2015]="PROFILE_GET_INFO"]=2015,t[e[2016]="REPORT_CLIENT_METRICS"]=2016,t[e[2017]="GET_CONFIGS"]=2017,t[e[2021]="MODIFY_MESSAGE_EXT"]=2021,t[e[2018]="UNREAD_COUNT_REPORT"]=2018,t[e[2019]="BLOCK_MEMBERS"]=2019,t[e[2020]="BLOCK_CONVERSATION"]=2020,t[e[2030]="GET_UNREAD_COUNT"]=2030,t[e[2031]="SEND_MESSAGE_P2P"]=2031,t[e[2032]="GET_BLOCKLIST"]=2032,t[e[2033]="SET_BLOCKLIST"]=2033,t[e[2034]="CHECK_IN_BLOCKLIST"]=2034,t[e[2036]="MARK_MESSAGE"]=2036,t[e[2037]="PULL_MARK_MESSAGE"]=2037,t[e[2038]="BATCH_GAT_CONVERSATION_PARTICIPANTS_READINDEX"]=2038,t[e[2043]="GET_MESSAGE_BY_INIT"]=2043,t[e[2048]="GET_USER_MESSAGE"]=2048,t[e[2054]="MARK_MSG_UNREAD_COUNT_REPORT"]=2054,t[e[2055]="MARK_MSG_GET_UNREAD_COUNT"]=2055,t[e[2056]="BATCH_UNMARK_MESSAGE"]=2056,t[e[2057]="CLIENT_BATCH_ACK"]=2057,t[e[2059]="AUDIO_RECOGNITION"]=2059,t[e[2105]="BATCH_MARK_CONVERSATION_READ_V3"]=2105,t[e[2200]="GET_TAG_META_INFO"]=2200,t[e[2201]="SET_CONVERSATION_TAG"]=2201,t[e[2202]="MANAGE_TAG_META_INFO"]=2202,t[e[2203]="GET_CONVERSATIONS_BY_TAG"]=2203,t}(),e.StatusCode=function(){let e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1]="INVALID_TOKEN"]=1,t[e[100]="EXPIRED_TOKEN"]=100,t[e[2]="INVALID_TICKET"]=2,t[e[4]="INVALID_REQUEST"]=4,t[e[5]="INVALID_CMD"]=5,t[e[6]="SERVER_ERR"]=6,t[e[11]="USER_FORBIDDEN"]=11,t[e[500]="INTERNAL_ERROR"]=500,t[e[15]="MESSAGE_TARGET_CONVERSATION_NOT_EXIST"]=15,t[e[16]="DEGRADATION_ERROR"]=16,t[e[17]="RECALL_TIMEOUT"]=17,t[e[19]="CALLBACK_DENY"]=19,t}(),e.SendMessageStatus=function(){let e={},t=Object.create(e);return t[e[0]="SEND_SUCCEED"]=0,t[e[1]="USER_NOT_IN_CONVERSATION"]=1,t[e[2]="CHECK_CONV_NOT_PASS"]=2,t[e[3]="CHECK_MSG_NOT_PASS"]=3,t[e[4]="CHECK_MSG_NOT_PASS_BUT_SELF_VISIBLE"]=4,t}(),e.Refer=function(){let e={},t=Object.create(e);return t[e[1]="ANDROID"]=1,t[e[2]="IOS"]=2,t[e[3]="PC"]=3,t[e[4]="SERVER"]=4,t}(),e.ConversationType=function(){let e={},t=Object.create(e);return t[e[1]="ONE_TO_ONE_CHAT"]=1,t[e[2]="GROUP_CHAT"]=2,t[e[3]="LIVE_CHAT"]=3,t[e[4]="BROADCAST_CHAT"]=4,t[e[17]="AI_DOUBLE_CHAT"]=17,t}(),e.MessageType=function(){let e={},t=Object.create(e);return t[e[1]="LEGACY_MESSAGE_TYPE_SYSTEM"]=1,t[e[2]="LEGACY_MESSAGE_TYPE_IMAGE"]=2,t[e[3]="LEGACY_MESSAGE_TYPE_AUDIO"]=3,t[e[4]="LEGACY_MESSAGE_TYPE_VIDEO"]=4,t[e[5]="LEGACY_MESSAGE_TYPE_EMOJI"]=5,t[e[6]="LEGACY_MESSAGE_TYPE_FILE"]=6,t[e[7]="LEGACY_MESSAGE_TYPE_TEXT"]=7,t[e[8]="LEGACY_MESSAGE_TYPE_USER_CARD"]=8,t[e[9]="LEGACY_MESSAGE_TYPE_TOAST"]=9,t[e[10]="LEGACY_MESSAGE_TYPE_GROUP_CARD"]=10,t[e[10001]="MESSAGE_TYPE_TEXT"]=10001,t[e[10002]="MESSAGE_TYPE_STICKER"]=10002,t[e[10003]="MESSAGE_TYPE_IMAGE"]=10003,t[e[10004]="MESSAGE_TYPE_VIDEO"]=10004,t[e[10005]="MESSAGE_TYPE_FILE"]=10005,t[e[10006]="MESSAGE_TYPE_AUDIO"]=10006,t[e[10007]="MESSAGE_TYPE_LOCATION"]=10007,t[e[10008]="MESSAGE_TYPE_SYSTEM"]=10008,t[e[10009]="MESSAGE_TYPE_LINK"]=10009,t[e[50001]="MESSAGE_TYPE_COMMAND"]=50001,t[e[50002]="MESSAGE_TYPE_UPDATE_MESSAGE_EXT"]=50002,t[e[50010]="MESSAGE_TYPE_MODE_CHANGE"]=50010,t[e[50003]="MESSAGE_TYPE_UPDATE_MIN_INDEX"]=50003,t[e[50004]="MESSAGE_TYPE_USER_ACTION"]=50004,t[e[50005]="MESSAGE_TYPE_CONVERSATION_DESTROY"]=50005,t[e[50011]="MESSAGE_TYPE_BLOCK_COMMAND"]=50011,t[e[50012]="MESSAGE_TYPE_MARK_COMMAND"]=50012,t[e[50013]="MESSAGE_TYPE_READ_COMMAND"]=50013,t[e[50016]="MESSAGE_TYPE_BATCH_UNMARK_COMMAND"]=50016,t[e[50017]="MESSAGE_TYPE_VISIBLE_MESSAGE_COMMAND"]=50017,t[e[50022]="MESSAGE_TYPE_NOTIFY_USER_CUSTOM_CONVERSATION_TAG_UPDATE_COMMAND"]=50022,t[e[60001]="MESSAGE_TYPE_NOTIFY_COMMAND"]=60001,t[e[70001]="MESSAGE_TYPE_MESSAGE_PROPERTY"]=70001,t[e[70002]="MESSAGE_TYPE_UPDATE_MESSAGE_PROPERTY"]=70002,t[e[80001]="MESSAGE_TYPE_VOIP_COMMAND"]=80001,t[e[80002]="MESSAGE_TYPE_VOIP_CARD_COMMAND"]=80002,t[e[80003]="MESSAGE_TYPE_VOIP_SINGLE_CHAT_STATUS_COMMAND"]=80003,t[e[80004]="MESSAGE_TYPE_VOIP_CALLEE_LIST_UPDATE_NOTIFY"]=80004,t}(),e.GroupRole=function(){let e={},t=Object.create(e);return t[e[0]="ORDINARY"]=0,t[e[1]="OWNER"]=1,t[e[2]="MANAGER"]=2,t[e[3]="VISITOR"]=3,t}(),e.TicketType=function(){let e={},t=Object.create(e);return t[e[1]="TICKET_TYPE_APP"]=1,t[e[2]="TICKET_TYPE_PC"]=2,t[e[3]="TICKET_TYPE_WEB"]=3,t}(),e.MuteMessageType=function(){let e={},t=Object.create(e);return t[e[50]="TYPE_PART_MUTE"]=50,t}(),e.MuteBadgeCountInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.message_type=50,e.prototype.badge_count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t.uint32(8).int32(e.message_type),t.uint32(16).int32(e.badge_count),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MuteBadgeCountInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.message_type=e.int32();break;case 2:o.badge_count=e.int32();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("message_type"))throw c.ProtocolError("missing required 'message_type'",{instance:o});if(!o.hasOwnProperty("badge_count"))throw c.ProtocolError("missing required 'badge_count'",{instance:o});return o},e}(),e.PropertyItem=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uid=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.idempotent_id="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.uid&&Object.hasOwnProperty.call(e,"uid")&&t.uint32(8).int64(e.uid),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(24).int64(e.create_time),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(34).string(e.idempotent_id),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(42).string(e.value),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.PropertyItem;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.uid=e.int64();break;case 2:o.sec_uid=e.string();break;case 3:o.create_time=e.int64();break;case 4:o.idempotent_id=e.string();break;case 5:o.value=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.PropertyItemList=function(){function e(e){if(this.Items=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Items=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.Items&&e.Items.length)for(var n=0;n<e.Items.length;++n)u.im_proto.PropertyItem.encode(e.Items[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.PropertyItemList;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.Items&&o.Items.length)&&(o.Items=[]),o.Items.push(u.im_proto.PropertyItem.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.MessageBody=function(){function e(e){if(this.ext={},this.property_list={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_in_conversation=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.message_type=0,e.prototype.sender=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.status=0,e.prototype.order_in_conversation=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_sender="",e.prototype.property_list=c.emptyObject,e.prototype.index_in_conversation_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.reference_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(24).int64(e.server_message_id),null!=e.index_in_conversation&&Object.hasOwnProperty.call(e,"index_in_conversation")&&t.uint32(32).int64(e.index_in_conversation),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(40).int64(e.conversation_short_id),null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(48).int32(e.message_type),null!=e.sender&&Object.hasOwnProperty.call(e,"sender")&&t.uint32(56).int64(e.sender),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(66).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(74).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();if(null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(80).int64(e.create_time),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(88).int64(e.version),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(96).int32(e.status),null!=e.order_in_conversation&&Object.hasOwnProperty.call(e,"order_in_conversation")&&t.uint32(104).int64(e.order_in_conversation),null!=e.sec_sender&&Object.hasOwnProperty.call(e,"sec_sender")&&t.uint32(114).string(e.sec_sender),null!=e.property_list&&Object.hasOwnProperty.call(e,"property_list"))for(var n=Object.keys(e.property_list),o=0;o<n.length;++o)t.uint32(122).fork().uint32(10).string(n[o]),u.im_proto.PropertyItemList.encode(e.property_list[n[o]],t.uint32(18).fork()).ldelim().ldelim();return null!=e.index_in_conversation_v2&&Object.hasOwnProperty.call(e,"index_in_conversation_v2")&&t.uint32(136).int64(e.index_in_conversation_v2),null!=e.reference_info&&Object.hasOwnProperty.call(e,"reference_info")&&u.im_proto.ReferenceInfo.encode(e.reference_info,t.uint32(146).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.MessageBody;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.server_message_id=e.int64();break;case 4:i.index_in_conversation=e.int64();break;case 5:i.conversation_short_id=e.int64();break;case 6:i.message_type=e.int32();break;case 7:i.sender=e.int64();break;case 8:i.content=e.string();break;case 9:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;case 10:i.create_time=e.int64();break;case 11:i.version=e.int64();break;case 12:i.status=e.int32();break;case 13:i.order_in_conversation=e.int64();break;case 14:i.sec_sender=e.string();break;case 15:i.property_list===c.emptyObject&&(i.property_list={});var d=e.uint32()+e.pos;for(n="",o=null;e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=u.im_proto.PropertyItemList.decode(e,e.uint32());break;default:e.skipType(7&l)}}i.property_list[n]=o;break;case 17:i.index_in_conversation_v2=e.int64();break;case 18:i.reference_info=u.im_proto.ReferenceInfo.decode(e,e.uint32());break;default:e.skipType(7&a)}}return i},e}(),e.ReferenceInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.referenced_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.hint="",e.prototype.ref_message_type=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.referenced_message_status=0,e.prototype.root_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.root_message_conv_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.referenced_message_id),t.uint32(18).string(e.hint),t.uint32(24).int64(e.ref_message_type),t.uint32(32).int32(e.referenced_message_status),null!=e.root_message_id&&Object.hasOwnProperty.call(e,"root_message_id")&&t.uint32(40).int64(e.root_message_id),null!=e.root_message_conv_index&&Object.hasOwnProperty.call(e,"root_message_conv_index")&&t.uint32(48).int64(e.root_message_conv_index),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(58).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.ReferenceInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.referenced_message_id=e.int64();break;case 2:i.hint=e.string();break;case 3:i.ref_message_type=e.int64();break;case 4:i.referenced_message_status=e.int32();break;case 5:i.root_message_id=e.int64();break;case 6:i.root_message_conv_index=e.int64();break;case 7:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}if(!i.hasOwnProperty("referenced_message_id"))throw c.ProtocolError("missing required 'referenced_message_id'",{instance:i});if(!i.hasOwnProperty("hint"))throw c.ProtocolError("missing required 'hint'",{instance:i});if(!i.hasOwnProperty("ref_message_type"))throw c.ProtocolError("missing required 'ref_message_type'",{instance:i});if(!i.hasOwnProperty("referenced_message_status"))throw c.ProtocolError("missing required 'referenced_message_status'",{instance:i});return i},e}(),e.ParticipantRole=function(){let e={},t=Object.create(e);return t[e[0]="PARTICIPANT_ROLE_NORMAL"]=0,t[e[1]="PARTICIPANT_ROLE_OWNER"]=1,t[e[2]="PARTICIPANT_ROLE_ADMIN"]=2,t[e[3]="PARTICIPANT_ROLE_VISITOR"]=3,t}(),e.Participant=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sort_order=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.role=0,e.prototype.alias="",e.prototype.sec_uid="",e.prototype.blocked=0,e.prototype.left_block_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sort_order&&Object.hasOwnProperty.call(e,"sort_order")&&t.uint32(16).int64(e.sort_order),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).int32(e.role),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(34).string(e.alias),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(42).string(e.sec_uid),null!=e.blocked&&Object.hasOwnProperty.call(e,"blocked")&&t.uint32(48).int32(e.blocked),null!=e.left_block_time&&Object.hasOwnProperty.call(e,"left_block_time")&&t.uint32(56).int64(e.left_block_time),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(66).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.Participant;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.user_id=e.int64();break;case 2:i.sort_order=e.int64();break;case 3:i.role=e.int32();break;case 4:i.alias=e.string();break;case 5:i.sec_uid=e.string();break;case 6:i.blocked=e.int32();break;case 7:i.left_block_time=e.int64();break;case 8:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.ParticipantsPage=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participants=c.emptyArray,e.prototype.has_more=!1,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)u.im_proto.Participant.encode(e.participants[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(24).int64(e.cursor),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ParticipantsPage;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.participants&&o.participants.length)&&(o.participants=[]),o.participants.push(u.im_proto.Participant.decode(e,e.uint32()));break;case 2:o.has_more=e.bool();break;case 3:o.cursor=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationInfoV2=function(){function e(e){if(this.mute_badge_count_infos=[],this.bots=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.ticket="",e.prototype.first_page_participants=null,e.prototype.participants_count=0,e.prototype.is_participant=!1,e.prototype.inbox_type=0,e.prototype.badge_count=0,e.prototype.mute_badge_count_infos=c.emptyArray,e.prototype.user_info=null,e.prototype.conversation_core_info=null,e.prototype.conversation_setting_info=null,e.prototype.bots=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(34).string(e.ticket),null!=e.first_page_participants&&Object.hasOwnProperty.call(e,"first_page_participants")&&u.im_proto.ParticipantsPage.encode(e.first_page_participants,t.uint32(50).fork()).ldelim(),null!=e.participants_count&&Object.hasOwnProperty.call(e,"participants_count")&&t.uint32(56).int32(e.participants_count),null!=e.is_participant&&Object.hasOwnProperty.call(e,"is_participant")&&t.uint32(64).bool(e.is_participant),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(72).int32(e.inbox_type),null!=e.badge_count&&Object.hasOwnProperty.call(e,"badge_count")&&t.uint32(80).int32(e.badge_count),null!=e.mute_badge_count_infos&&e.mute_badge_count_infos.length)for(var n=0;n<e.mute_badge_count_infos.length;++n)u.im_proto.MuteBadgeCountInfo.encode(e.mute_badge_count_infos[n],t.uint32(90).fork()).ldelim();if(null!=e.user_info&&Object.hasOwnProperty.call(e,"user_info")&&u.im_proto.Participant.encode(e.user_info,t.uint32(162).fork()).ldelim(),null!=e.conversation_core_info&&Object.hasOwnProperty.call(e,"conversation_core_info")&&u.im_proto.ConversationCoreInfo.encode(e.conversation_core_info,t.uint32(402).fork()).ldelim(),null!=e.conversation_setting_info&&Object.hasOwnProperty.call(e,"conversation_setting_info")&&u.im_proto.ConversationSettingInfo.encode(e.conversation_setting_info,t.uint32(410).fork()).ldelim(),null!=e.bots&&e.bots.length)for(var n=0;n<e.bots.length;++n)u.im_proto.RobotInfo.encode(e.bots[n],t.uint32(482).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationInfoV2;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.ticket=e.string();break;case 6:o.first_page_participants=u.im_proto.ParticipantsPage.decode(e,e.uint32());break;case 7:o.participants_count=e.int32();break;case 8:o.is_participant=e.bool();break;case 9:o.inbox_type=e.int32();break;case 10:o.badge_count=e.int32();break;case 11:!(o.mute_badge_count_infos&&o.mute_badge_count_infos.length)&&(o.mute_badge_count_infos=[]),o.mute_badge_count_infos.push(u.im_proto.MuteBadgeCountInfo.decode(e,e.uint32()));break;case 20:o.user_info=u.im_proto.Participant.decode(e,e.uint32());break;case 50:o.conversation_core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());break;case 51:o.conversation_setting_info=u.im_proto.ConversationSettingInfo.decode(e,e.uint32());break;case 60:!(o.bots&&o.bots.length)&&(o.bots=[]),o.bots.push(u.im_proto.RobotInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.RobotInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(794).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.RobotInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.user_id=e.int64();break;case 2:i.sec_uid=e.string();break;case 99:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.ConversationCoreInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.info_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.name="",e.prototype.desc="",e.prototype.icon="",e.prototype.inbox_type=0,e.prototype.notice="",e.prototype.ext=c.emptyObject,e.prototype.owner=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_owner="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.info_version&&Object.hasOwnProperty.call(e,"info_version")&&t.uint32(32).int64(e.info_version),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(42).string(e.name),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&t.uint32(50).string(e.desc),null!=e.icon&&Object.hasOwnProperty.call(e,"icon")&&t.uint32(58).string(e.icon),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(64).int32(e.inbox_type),null!=e.notice&&Object.hasOwnProperty.call(e,"notice")&&t.uint32(74).string(e.notice),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(90).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&t.uint32(96).int64(e.owner),null!=e.sec_owner&&Object.hasOwnProperty.call(e,"sec_owner")&&t.uint32(106).string(e.sec_owner),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationCoreInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.info_version=e.int64();break;case 5:i.name=e.string();break;case 6:i.desc=e.string();break;case 7:i.icon=e.string();break;case 8:i.inbox_type=e.int32();break;case 9:i.notice=e.string();break;case 11:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;case 12:i.owner=e.int64();break;case 13:i.sec_owner=e.string();break;default:e.skipType(7&a)}}return i},e}(),e.ConversationSettingInfo=function(){function e(e){if(this.ext={},this.mute_read_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.min_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.mute=0,e.prototype.stick_on_top=0,e.prototype.inbox_type=0,e.prototype.ext=c.emptyObject,e.prototype.setting_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.favorite=0,e.prototype.set_top_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.set_favorite_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.min_index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_badge_count=0,e.prototype.mute_read_badge_count_infos=c.emptyArray,e.prototype.push_status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.min_index&&Object.hasOwnProperty.call(e,"min_index")&&t.uint32(32).int64(e.min_index),null!=e.read_index&&Object.hasOwnProperty.call(e,"read_index")&&t.uint32(40).int64(e.read_index),null!=e.mute&&Object.hasOwnProperty.call(e,"mute")&&t.uint32(48).int32(e.mute),null!=e.stick_on_top&&Object.hasOwnProperty.call(e,"stick_on_top")&&t.uint32(56).int32(e.stick_on_top),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(64).int32(e.inbox_type),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(74).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();if(null!=e.setting_version&&Object.hasOwnProperty.call(e,"setting_version")&&t.uint32(80).int64(e.setting_version),null!=e.favorite&&Object.hasOwnProperty.call(e,"favorite")&&t.uint32(88).int32(e.favorite),null!=e.set_top_time&&Object.hasOwnProperty.call(e,"set_top_time")&&t.uint32(96).int64(e.set_top_time),null!=e.set_favorite_time&&Object.hasOwnProperty.call(e,"set_favorite_time")&&t.uint32(104).int64(e.set_favorite_time),null!=e.read_index_v2&&Object.hasOwnProperty.call(e,"read_index_v2")&&t.uint32(112).int64(e.read_index_v2),null!=e.min_index_v2&&Object.hasOwnProperty.call(e,"min_index_v2")&&t.uint32(120).int64(e.min_index_v2),null!=e.read_badge_count&&Object.hasOwnProperty.call(e,"read_badge_count")&&t.uint32(128).int32(e.read_badge_count),null!=e.mute_read_badge_count_infos&&e.mute_read_badge_count_infos.length)for(var o=0;o<e.mute_read_badge_count_infos.length;++o)u.im_proto.MuteReadBadgeCountInfo.encode(e.mute_read_badge_count_infos[o],t.uint32(138).fork()).ldelim();return null!=e.push_status&&Object.hasOwnProperty.call(e,"push_status")&&t.uint32(240).int32(e.push_status),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationSettingInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.min_index=e.int64();break;case 5:i.read_index=e.int64();break;case 6:i.mute=e.int32();break;case 7:i.stick_on_top=e.int32();break;case 8:i.inbox_type=e.int32();break;case 9:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;case 10:i.setting_version=e.int64();break;case 11:i.favorite=e.int32();break;case 12:i.set_top_time=e.int64();break;case 13:i.set_favorite_time=e.int64();break;case 14:i.read_index_v2=e.int64();break;case 15:i.min_index_v2=e.int64();break;case 16:i.read_badge_count=e.int32();break;case 17:!(i.mute_read_badge_count_infos&&i.mute_read_badge_count_infos.length)&&(i.mute_read_badge_count_infos=[]),i.mute_read_badge_count_infos.push(u.im_proto.MuteReadBadgeCountInfo.decode(e,e.uint32()));break;case 30:i.push_status=e.int32();break;default:e.skipType(7&a)}}return i},e}(),e.MessagesPerUserRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=50,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).int32(e.limit),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesPerUserRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.cursor=e.int64();break;case 2:o.limit=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.MessagesPerUserResponseBody=function(){function e(e){if(this.messages=[],this.conversation_badge_count=[],this.hasmore_message_conv_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.prototype.next_interval=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_conversation_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_badge_count=c.emptyArray,e.prototype.next_cmd_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.hasmore_message_conv_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();if(null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(16).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(24).bool(e.has_more),null!=e.next_interval&&Object.hasOwnProperty.call(e,"next_interval")&&t.uint32(32).int64(e.next_interval),null!=e.next_conversation_version&&Object.hasOwnProperty.call(e,"next_conversation_version")&&t.uint32(40).int64(e.next_conversation_version),null!=e.conversation_badge_count&&e.conversation_badge_count.length)for(var n=0;n<e.conversation_badge_count.length;++n)u.im_proto.ConversationBadgeCountInfo.encode(e.conversation_badge_count[n],t.uint32(50).fork()).ldelim();if(null!=e.next_cmd_index&&Object.hasOwnProperty.call(e,"next_cmd_index")&&t.uint32(56).int64(e.next_cmd_index),null!=e.hasmore_message_conv_list&&e.hasmore_message_conv_list.length)for(var n=0;n<e.hasmore_message_conv_list.length;++n)t.uint32(64).int64(e.hasmore_message_conv_list[n]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesPerUserResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:o.next_cursor=e.int64();break;case 3:o.has_more=e.bool();break;case 4:o.next_interval=e.int64();break;case 5:o.next_conversation_version=e.int64();break;case 6:!(o.conversation_badge_count&&o.conversation_badge_count.length)&&(o.conversation_badge_count=[]),o.conversation_badge_count.push(u.im_proto.ConversationBadgeCountInfo.decode(e,e.uint32()));break;case 7:o.next_cmd_index=e.int64();break;case 8:if(!(o.hasmore_message_conv_list&&o.hasmore_message_conv_list.length)&&(o.hasmore_message_conv_list=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.hasmore_message_conv_list.push(e.int64())}else o.hasmore_message_conv_list.push(e.int64());break;default:e.skipType(7&r)}}return o},e}(),e.ConversationBadgeCountInfo=function(){function e(e){if(this.mute_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.badge_count=0,e.prototype.conversation_index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_id="",e.prototype.mute_badge_count_infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.conversation_short_id),t.uint32(16).int32(e.badge_count),t.uint32(24).int64(e.conversation_index_v2),t.uint32(34).string(e.conversation_id),null!=e.mute_badge_count_infos&&e.mute_badge_count_infos.length)for(var n=0;n<e.mute_badge_count_infos.length;++n)u.im_proto.MuteBadgeCountInfo.encode(e.mute_badge_count_infos[n],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationBadgeCountInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_short_id=e.int64();break;case 2:o.badge_count=e.int32();break;case 3:o.conversation_index_v2=e.int64();break;case 4:o.conversation_id=e.string();break;case 5:!(o.mute_badge_count_infos&&o.mute_badge_count_infos.length)&&(o.mute_badge_count_infos=[]),o.mute_badge_count_infos.push(u.im_proto.MuteBadgeCountInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("conversation_short_id"))throw c.ProtocolError("missing required 'conversation_short_id'",{instance:o});if(!o.hasOwnProperty("badge_count"))throw c.ProtocolError("missing required 'badge_count'",{instance:o});if(!o.hasOwnProperty("conversation_index_v2"))throw c.ProtocolError("missing required 'conversation_index_v2'",{instance:o});if(!o.hasOwnProperty("conversation_id"))throw c.ProtocolError("missing required 'conversation_id'",{instance:o});return o},e}(),e.MessagesPerUserInitV2RequestBody=function(){function e(e){if(this.biz_tag_ids=[],this.user_custom_tag_ids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.new_user=0,e.prototype.init_sub_type=0,e.prototype.conv_limit=0,e.prototype.msg_limit=0,e.prototype.biz_tag_ids=c.emptyArray,e.prototype.user_custom_tag_ids=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.new_user&&Object.hasOwnProperty.call(e,"new_user")&&t.uint32(16).int32(e.new_user),null!=e.init_sub_type&&Object.hasOwnProperty.call(e,"init_sub_type")&&t.uint32(24).int32(e.init_sub_type),null!=e.conv_limit&&Object.hasOwnProperty.call(e,"conv_limit")&&t.uint32(32).int32(e.conv_limit),null!=e.msg_limit&&Object.hasOwnProperty.call(e,"msg_limit")&&t.uint32(40).int32(e.msg_limit),null!=e.biz_tag_ids&&e.biz_tag_ids.length)for(var n=0;n<e.biz_tag_ids.length;++n)t.uint32(56).int64(e.biz_tag_ids[n]);if(null!=e.user_custom_tag_ids&&e.user_custom_tag_ids.length)for(var n=0;n<e.user_custom_tag_ids.length;++n)t.uint32(64).int64(e.user_custom_tag_ids[n]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesPerUserInitV2RequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.cursor=e.int64();break;case 2:o.new_user=e.int32();break;case 3:o.init_sub_type=e.int32();break;case 4:o.conv_limit=e.int32();break;case 5:o.msg_limit=e.int32();break;case 7:if(!(o.biz_tag_ids&&o.biz_tag_ids.length)&&(o.biz_tag_ids=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.biz_tag_ids.push(e.int64())}else o.biz_tag_ids.push(e.int64());break;case 8:if(!(o.user_custom_tag_ids&&o.user_custom_tag_ids.length)&&(o.user_custom_tag_ids=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.user_custom_tag_ids.push(e.int64())}else o.user_custom_tag_ids.push(e.int64());break;default:e.skipType(7&r)}}return o},e}(),e.MessagesPerUserInitV2ResponseBody=function(){function e(e){if(this.messages=[],this.conversations=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.conversations=c.emptyArray,e.prototype.per_user_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();if(null!=e.conversations&&e.conversations.length)for(var n=0;n<e.conversations.length;++n)u.im_proto.ConversationInfoV2.encode(e.conversations[n],t.uint32(18).fork()).ldelim();return null!=e.per_user_cursor&&Object.hasOwnProperty.call(e,"per_user_cursor")&&t.uint32(24).int64(e.per_user_cursor),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(32).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(40).bool(e.has_more),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesPerUserInitV2ResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:!(o.conversations&&o.conversations.length)&&(o.conversations=[]),o.conversations.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));break;case 3:o.per_user_cursor=e.int64();break;case 4:o.next_cursor=e.int64();break;case 5:o.has_more=e.bool();break;default:e.skipType(7&r)}}return o},e}(),e.MessageDirection=function(){let e={},t=Object.create(e);return t[e[1]="OLDER"]=1,t[e[2]="NEWER"]=2,t[e[3]="FROM_LATEST"]=3,t}(),e.MessagesInConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.direction=1,e.prototype.anchor_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=50,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.direction&&Object.hasOwnProperty.call(e,"direction")&&t.uint32(32).int32(e.direction),null!=e.anchor_index&&Object.hasOwnProperty.call(e,"anchor_index")&&t.uint32(40).int64(e.anchor_index),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(48).int32(e.limit),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesInConversationRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_type=e.int32();break;case 3:o.conversation_short_id=e.int64();break;case 4:o.direction=e.int32();break;case 5:o.anchor_index=e.int64();break;case 6:o.limit=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.MessagesInConversationResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();return null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(16).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(24).bool(e.has_more),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesInConversationResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:o.next_cursor=e.int64();break;case 3:o.has_more=e.bool();break;default:e.skipType(7&r)}}return o},e}(),e.CreateConversationV2RequestBody=function(){function e(e){if(this.participants=[],this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.prototype.persistent=!1,e.prototype.idempotent_id="",e.prototype.name="",e.prototype.avatar_url="",e.prototype.description="",e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(8).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(16).int64(e.participants[n]);if(null!=e.persistent&&Object.hasOwnProperty.call(e,"persistent")&&t.uint32(24).bool(e.persistent),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(34).string(e.idempotent_id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(50).string(e.name),null!=e.avatar_url&&Object.hasOwnProperty.call(e,"avatar_url")&&t.uint32(58).string(e.avatar_url),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(66).string(e.description),null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext"))for(var o=Object.keys(e.biz_ext),n=0;n<o.length;++n)t.uint32(90).fork().uint32(10).string(o[n]).uint32(18).string(e.biz_ext[o[n]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.CreateConversationV2RequestBody;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_type=e.int32();break;case 2:if(!(i.participants&&i.participants.length)&&(i.participants=[]),(7&a)==2){for(var d=e.uint32()+e.pos;e.pos<d;)i.participants.push(e.int64())}else i.participants.push(e.int64());break;case 3:i.persistent=e.bool();break;case 4:i.idempotent_id=e.string();break;case 6:i.name=e.string();break;case 7:i.avatar_url=e.string();break;case 8:i.description=e.string();break;case 11:i.biz_ext===c.emptyObject&&(i.biz_ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.biz_ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.CreateConversationV2ResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation=null,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.prototype.status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation&&Object.hasOwnProperty.call(e,"conversation")&&u.im_proto.ConversationInfoV2.encode(e.conversation,t.uint32(10).fork()).ldelim(),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(16).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(26).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(34).string(e.extra_info),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(40).int32(e.status),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.CreateConversationV2ResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation=u.im_proto.ConversationInfoV2.decode(e,e.uint32());break;case 2:o.check_code=e.int64();break;case 3:o.check_message=e.string();break;case 4:o.extra_info=e.string();break;case 5:o.status=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.UserActionType=function(){let e={},t=Object.create(e);return t[e[1]="ENTER_CONVERSATION"]=1,t[e[2]="EXIT_CONVERSATION"]=2,t}(),e.InputStatus=function(){let e={},t=Object.create(e);return t[e[3]="TYPING"]=3,t[e[4]="CLEAR_INPUT"]=4,t}(),e.DeleteConversationRequestBody=function(){function e(e){if(this.mute_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.last_message_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.badge_count=0,e.prototype.mute_badge_count_infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.last_message_index&&Object.hasOwnProperty.call(e,"last_message_index")&&t.uint32(32).int64(e.last_message_index),null!=e.badge_count&&Object.hasOwnProperty.call(e,"badge_count")&&t.uint32(48).int32(e.badge_count),null!=e.mute_badge_count_infos&&e.mute_badge_count_infos.length)for(var n=0;n<e.mute_badge_count_infos.length;++n)u.im_proto.MuteBadgeCountInfo.encode(e.mute_badge_count_infos[n],t.uint32(58).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.DeleteConversationRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.last_message_index=e.int64();break;case 6:o.badge_count=e.int32();break;case 7:!(o.mute_badge_count_infos&&o.mute_badge_count_infos.length)&&(o.mute_badge_count_infos=[]),o.mute_badge_count_infos.push(u.im_proto.MuteBadgeCountInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.DissolveConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.DissolveConversationRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.DeleteMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.message_id&&Object.hasOwnProperty.call(e,"message_id")&&t.uint32(32).int64(e.message_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.DeleteMessageRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.message_id=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.MarkConversationReadRequestBody=function(){function e(e){if(this.mute_read_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.read_message_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conv_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.total_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_message_index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_badge_count=0,e.prototype.mute_read_badge_count_infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.read_message_index&&Object.hasOwnProperty.call(e,"read_message_index")&&t.uint32(32).int64(e.read_message_index),null!=e.conv_unread_count&&Object.hasOwnProperty.call(e,"conv_unread_count")&&t.uint32(40).int64(e.conv_unread_count),null!=e.total_unread_count&&Object.hasOwnProperty.call(e,"total_unread_count")&&t.uint32(48).int64(e.total_unread_count),null!=e.read_message_index_v2&&Object.hasOwnProperty.call(e,"read_message_index_v2")&&t.uint32(56).int64(e.read_message_index_v2),null!=e.read_badge_count&&Object.hasOwnProperty.call(e,"read_badge_count")&&t.uint32(64).int32(e.read_badge_count),null!=e.mute_read_badge_count_infos&&e.mute_read_badge_count_infos.length)for(var n=0;n<e.mute_read_badge_count_infos.length;++n)u.im_proto.MuteReadBadgeCountInfo.encode(e.mute_read_badge_count_infos[n],t.uint32(90).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MarkConversationReadRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.read_message_index=e.int64();break;case 5:o.conv_unread_count=e.int64();break;case 6:o.total_unread_count=e.int64();break;case 7:o.read_message_index_v2=e.int64();break;case 8:o.read_badge_count=e.int32();break;case 11:!(o.mute_read_badge_count_infos&&o.mute_read_badge_count_infos.length)&&(o.mute_read_badge_count_infos=[]),o.mute_read_badge_count_infos.push(u.im_proto.MuteReadBadgeCountInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.MuteReadBadgeCountInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.message_type=50,e.prototype.read_badge_count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t.uint32(8).int32(e.message_type),t.uint32(16).int32(e.read_badge_count),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MuteReadBadgeCountInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.message_type=e.int32();break;case 2:o.read_badge_count=e.int32();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("message_type"))throw c.ProtocolError("missing required 'message_type'",{instance:o});if(!o.hasOwnProperty("read_badge_count"))throw c.ProtocolError("missing required 'read_badge_count'",{instance:o});return o},e}(),e.BatchMarkConversationReadRequestBody=function(){function e(e){if(this.mark_read_requests=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.mark_read_requests=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.mark_read_requests&&e.mark_read_requests.length)for(var n=0;n<e.mark_read_requests.length;++n)u.im_proto.MarkConversationReadRequestBody.encode(e.mark_read_requests[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.BatchMarkConversationReadRequestBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.mark_read_requests&&o.mark_read_requests.length)&&(o.mark_read_requests=[]),o.mark_read_requests.push(u.im_proto.MarkConversationReadRequestBody.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.GetConversationParticipantsReadIndexV3RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.conversation_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(26).string(e.conversation_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationParticipantsReadIndexV3RequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_short_id=e.int64();break;case 2:o.conversation_type=e.int32();break;case 3:o.conversation_id=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationParticipantsReadIndexV3ResponseBody=function(){function e(e){if(this.indexes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.indexes=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.indexes&&e.indexes.length)for(var n=0;n<e.indexes.length;++n)u.im_proto.ParticipantReadIndex.encode(e.indexes[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationParticipantsReadIndexV3ResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.indexes&&o.indexes.length)&&(o.indexes=[]),o.indexes.push(u.im_proto.ParticipantReadIndex.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.ParticipantReadIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_min=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&t.uint32(24).int64(e.index),null!=e.index_v2&&Object.hasOwnProperty.call(e,"index_v2")&&t.uint32(32).int64(e.index_v2),null!=e.index_min&&Object.hasOwnProperty.call(e,"index_min")&&t.uint32(40).int64(e.index_min),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ParticipantReadIndex;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.user_id=e.int64();break;case 2:o.sec_uid=e.string();break;case 3:o.index=e.int64();break;case 4:o.index_v2=e.int64();break;case 5:o.index_min=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.BatchGetConversationParticipantsReadIndexRequestBody=function(){function e(e){if(this.conversation_id=[],this.conversation_short_id=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id=c.emptyArray,e.prototype.conversation_short_id=c.emptyArray,e.prototype.request_from="",e.prototype.min_index_required=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&e.conversation_id.length)for(var n=0;n<e.conversation_id.length;++n)t.uint32(10).string(e.conversation_id[n]);if(null!=e.conversation_short_id&&e.conversation_short_id.length)for(var n=0;n<e.conversation_short_id.length;++n)t.uint32(16).int64(e.conversation_short_id[n]);return null!=e.request_from&&Object.hasOwnProperty.call(e,"request_from")&&t.uint32(26).string(e.request_from),null!=e.min_index_required&&Object.hasOwnProperty.call(e,"min_index_required")&&t.uint32(32).bool(e.min_index_required),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.BatchGetConversationParticipantsReadIndexRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.conversation_id&&o.conversation_id.length)&&(o.conversation_id=[]),o.conversation_id.push(e.string());break;case 2:if(!(o.conversation_short_id&&o.conversation_short_id.length)&&(o.conversation_short_id=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.conversation_short_id.push(e.int64())}else o.conversation_short_id.push(e.int64());break;case 3:o.request_from=e.string();break;case 4:o.min_index_required=e.bool();break;default:e.skipType(7&r)}}return o},e}(),e.BatchGetConversationParticipantsReadIndexResponseBody=function(){function e(e){if(this.conversationParticipantsReadIndex=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversationParticipantsReadIndex=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversationParticipantsReadIndex&&e.conversationParticipantsReadIndex.length)for(var n=0;n<e.conversationParticipantsReadIndex.length;++n)u.im_proto.ConversationParticipantReadIndex.encode(e.conversationParticipantsReadIndex[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.BatchGetConversationParticipantsReadIndexResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.conversationParticipantsReadIndex&&o.conversationParticipantsReadIndex.length)&&(o.conversationParticipantsReadIndex=[]),o.conversationParticipantsReadIndex.push(u.im_proto.ConversationParticipantReadIndex.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.ConversationParticipantReadIndex=function(){function e(e){if(this.participantReadIndex=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.participantReadIndex=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.participantReadIndex&&e.participantReadIndex.length)for(var n=0;n<e.participantReadIndex.length;++n)u.im_proto.ParticipantReadIndex.encode(e.participantReadIndex[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationParticipantReadIndex;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:!(o.participantReadIndex&&o.participantReadIndex.length)&&(o.participantReadIndex=[]),o.participantReadIndex.push(u.im_proto.ParticipantReadIndex.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationParticipantsMinIndexV3RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.conversation_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(26).string(e.conversation_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationParticipantsMinIndexV3RequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_short_id=e.int64();break;case 2:o.conversation_type=e.int32();break;case 3:o.conversation_id=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationParticipantsMinIndexV3ResponseBody=function(){function e(e){if(this.indexes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.indexes=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.indexes&&e.indexes.length)for(var n=0;n<e.indexes.length;++n)u.im_proto.ParticipantMinIndex.encode(e.indexes[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationParticipantsMinIndexV3ResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.indexes&&o.indexes.length)&&(o.indexes=[]),o.indexes.push(u.im_proto.ParticipantMinIndex.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.ParticipantMinIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.prototype.index=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(8).int64(e.user_id),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&t.uint32(24).int64(e.index),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ParticipantMinIndex;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.user_id=e.int64();break;case 2:o.sec_uid=e.string();break;case 3:o.index=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.SendMessageRequestBody=function(){function e(e){if(this.ext={},this.mentioned_users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.message_type=0,e.prototype.ticket="",e.prototype.client_message_id="",e.prototype.mentioned_users=c.emptyArray,e.prototype.ignore_badge_count=!1,e.prototype.ref_msg_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(34).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(42).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();if(null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(48).int32(e.message_type),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(58).string(e.ticket),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(66).string(e.client_message_id),null!=e.mentioned_users&&e.mentioned_users.length)for(var o=0;o<e.mentioned_users.length;++o)t.uint32(72).int64(e.mentioned_users[o]);return null!=e.ignore_badge_count&&Object.hasOwnProperty.call(e,"ignore_badge_count")&&t.uint32(80).bool(e.ignore_badge_count),null!=e.ref_msg_info&&Object.hasOwnProperty.call(e,"ref_msg_info")&&u.im_proto.ReferencedMessageInfo.encode(e.ref_msg_info,t.uint32(90).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.SendMessageRequestBody;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_type=e.int32();break;case 3:i.conversation_short_id=e.int64();break;case 4:i.content=e.string();break;case 5:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;case 6:i.message_type=e.int32();break;case 7:i.ticket=e.string();break;case 8:i.client_message_id=e.string();break;case 9:if(!(i.mentioned_users&&i.mentioned_users.length)&&(i.mentioned_users=[]),(7&a)==2){for(var d=e.uint32()+e.pos;e.pos<d;)i.mentioned_users.push(e.int64())}else i.mentioned_users.push(e.int64());break;case 10:i.ignore_badge_count=e.bool();break;case 11:i.ref_msg_info=u.im_proto.ReferencedMessageInfo.decode(e,e.uint32());break;default:e.skipType(7&a)}}return i},e}(),e.ReferencedMessageInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.referenced_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.hint="",e.prototype.root_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.root_message_conv_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.referenced_message_id),t.uint32(18).string(e.hint),null!=e.root_message_id&&Object.hasOwnProperty.call(e,"root_message_id")&&t.uint32(24).int64(e.root_message_id),null!=e.root_message_conv_index&&Object.hasOwnProperty.call(e,"root_message_conv_index")&&t.uint32(32).int64(e.root_message_conv_index),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(42).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.ReferencedMessageInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.referenced_message_id=e.int64();break;case 2:i.hint=e.string();break;case 3:i.root_message_id=e.int64();break;case 4:i.root_message_conv_index=e.int64();break;case 5:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}if(!i.hasOwnProperty("referenced_message_id"))throw c.ProtocolError("missing required 'referenced_message_id'",{instance:i});if(!i.hasOwnProperty("hint"))throw c.ProtocolError("missing required 'hint'",{instance:i});return i},e}(),e.SendMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.extra_info="",e.prototype.status=0,e.prototype.client_message_id="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(18).string(e.extra_info),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(34).string(e.client_message_id),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(40).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(50).string(e.check_message),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.SendMessageResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.server_message_id=e.int64();break;case 2:o.extra_info=e.string();break;case 3:o.status=e.int32();break;case 4:o.client_message_id=e.string();break;case 5:o.check_code=e.int64();break;case 6:o.check_message=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.NewMessageNotifyType=function(){let e={},t=Object.create(e);return t[e[1]="PER_USER"]=1,t[e[2]="PER_CONVERSATION"]=2,t}(),e.MsgTracePath=function(){let e={},t=Object.create(e);return t[e[0]="FROM_UNKNOWN"]=0,t[e[1]="FROM_FRONTIER"]=1,t[e[2]="FROM_HTTP"]=2,t[e[3]="FROM_SERVER"]=3,t}(),e.MsgTrace=function(){function e(e){if(this.metrics={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metrics=c.emptyObject,e.prototype.path=0,e.prototype.connStatus=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.metrics&&Object.hasOwnProperty.call(e,"metrics"))for(var n=Object.keys(e.metrics),o=0;o<n.length;++o)t.uint32(10).fork().uint32(8).int32(n[o]).uint32(16).int64(e.metrics[n[o]]).ldelim();return null!=e.path&&Object.hasOwnProperty.call(e,"path")&&t.uint32(16).int32(e.path),null!=e.connStatus&&Object.hasOwnProperty.call(e,"connStatus")&&t.uint32(24).int32(e.connStatus),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.MsgTrace;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.metrics===c.emptyObject&&(i.metrics={});var d=e.uint32()+e.pos;for(n=0,o=0;e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.int32();break;case 2:o=e.int64();break;default:e.skipType(7&l)}}i.metrics[n]=o;break;case 2:i.path=e.int32();break;case 3:i.connStatus=e.int32();break;default:e.skipType(7&a)}}return i},e}(),e.NewMessageNotify=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.notify_type=1,e.prototype.message=null,e.prototype.previous_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_in_conversation=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.index_in_conversation_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.previous_conversation_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cmd_message_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.badge_count=0,e.prototype.trace=null,e.prototype.ref_msg_info=null,e.prototype.previous_msg_index_in_conv=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.readconv_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.pre_readconv_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.mute_badge_count_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(18).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.notify_type&&Object.hasOwnProperty.call(e,"notify_type")&&t.uint32(32).int32(e.notify_type),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&u.im_proto.MessageBody.encode(e.message,t.uint32(42).fork()).ldelim(),null!=e.previous_cursor&&Object.hasOwnProperty.call(e,"previous_cursor")&&t.uint32(48).int64(e.previous_cursor),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(56).int64(e.next_cursor),null!=e.index_in_conversation&&Object.hasOwnProperty.call(e,"index_in_conversation")&&t.uint32(64).int64(e.index_in_conversation),null!=e.index_in_conversation_v2&&Object.hasOwnProperty.call(e,"index_in_conversation_v2")&&t.uint32(72).int64(e.index_in_conversation_v2),null!=e.conversation_version&&Object.hasOwnProperty.call(e,"conversation_version")&&t.uint32(80).int64(e.conversation_version),null!=e.previous_conversation_version&&Object.hasOwnProperty.call(e,"previous_conversation_version")&&t.uint32(88).int64(e.previous_conversation_version),null!=e.cmd_message_index&&Object.hasOwnProperty.call(e,"cmd_message_index")&&t.uint32(96).int64(e.cmd_message_index),null!=e.badge_count&&Object.hasOwnProperty.call(e,"badge_count")&&t.uint32(104).int32(e.badge_count),null!=e.trace&&Object.hasOwnProperty.call(e,"trace")&&u.im_proto.MsgTrace.encode(e.trace,t.uint32(114).fork()).ldelim(),null!=e.ref_msg_info&&Object.hasOwnProperty.call(e,"ref_msg_info")&&u.im_proto.ReferenceInfo.encode(e.ref_msg_info,t.uint32(122).fork()).ldelim(),null!=e.previous_msg_index_in_conv&&Object.hasOwnProperty.call(e,"previous_msg_index_in_conv")&&t.uint32(128).int64(e.previous_msg_index_in_conv),null!=e.readconv_version&&Object.hasOwnProperty.call(e,"readconv_version")&&t.uint32(136).int64(e.readconv_version),null!=e.pre_readconv_version&&Object.hasOwnProperty.call(e,"pre_readconv_version")&&t.uint32(144).int64(e.pre_readconv_version),null!=e.mute_badge_count_info&&Object.hasOwnProperty.call(e,"mute_badge_count_info")&&u.im_proto.MuteBadgeCountInfo.encode(e.mute_badge_count_info,t.uint32(154).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.NewMessageNotify;e.pos<n;){var r=e.uint32();switch(r>>>3){case 2:o.conversation_id=e.string();break;case 3:o.conversation_type=e.int32();break;case 4:o.notify_type=e.int32();break;case 5:o.message=u.im_proto.MessageBody.decode(e,e.uint32());break;case 6:o.previous_cursor=e.int64();break;case 7:o.next_cursor=e.int64();break;case 8:o.index_in_conversation=e.int64();break;case 9:o.index_in_conversation_v2=e.int64();break;case 10:o.conversation_version=e.int64();break;case 11:o.previous_conversation_version=e.int64();break;case 12:o.cmd_message_index=e.int64();break;case 13:o.badge_count=e.int32();break;case 14:o.trace=u.im_proto.MsgTrace.decode(e,e.uint32());break;case 15:o.ref_msg_info=u.im_proto.ReferenceInfo.decode(e,e.uint32());break;case 16:o.previous_msg_index_in_conv=e.int64();break;case 17:o.readconv_version=e.int64();break;case 18:o.pre_readconv_version=e.int64();break;case 19:o.mute_badge_count_info=u.im_proto.MuteBadgeCountInfo.decode(e,e.uint32());break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationInfoV2RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationInfoV2RequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationInfoListV2RequestBody=function(){function e(e){if(this.conversation_info_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_info_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_info_list&&e.conversation_info_list.length)for(var n=0;n<e.conversation_info_list.length;++n)u.im_proto.GetConversationInfoV2RequestBody.encode(e.conversation_info_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationInfoListV2RequestBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.conversation_info_list&&o.conversation_info_list.length)&&(o.conversation_info_list=[]),o.conversation_info_list.push(u.im_proto.GetConversationInfoV2RequestBody.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.GetConversationInfoListV2ResponseBody=function(){function e(e){if(this.conversation_info_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_info_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_info_list&&e.conversation_info_list.length)for(var n=0;n<e.conversation_info_list.length;++n)u.im_proto.ConversationInfoV2.encode(e.conversation_info_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationInfoListV2ResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.conversation_info_list&&o.conversation_info_list.length)&&(o.conversation_info_list=[]),o.conversation_info_list.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.RecallMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.RecallMessageRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.server_message_id=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationAddParticipantsRequestBody=function(){function e(e){if(this.participants=[],this.biz_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.prototype.biz_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(32).int64(e.participants[n]);if(null!=e.biz_ext&&Object.hasOwnProperty.call(e,"biz_ext"))for(var o=Object.keys(e.biz_ext),n=0;n<o.length;++n)t.uint32(42).fork().uint32(10).string(o[n]).uint32(18).string(e.biz_ext[o[n]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.ConversationAddParticipantsRequestBody;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:if(!(i.participants&&i.participants.length)&&(i.participants=[]),(7&a)==2){for(var d=e.uint32()+e.pos;e.pos<d;)i.participants.push(e.int64())}else i.participants.push(e.int64());break;case 5:i.biz_ext===c.emptyObject&&(i.biz_ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.biz_ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.SecUidPair=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uid=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_uid="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.uid&&Object.hasOwnProperty.call(e,"uid")&&t.uint32(8).int64(e.uid),null!=e.sec_uid&&Object.hasOwnProperty.call(e,"sec_uid")&&t.uint32(18).string(e.sec_uid),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.SecUidPair;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.uid=e.int64();break;case 2:o.sec_uid=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationAddParticipantsResponseBody=function(){function e(e){if(this.success_participants=[],this.failed_participants=[],this.sec_success_participants=[],this.sec_failed_participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.success_participants=c.emptyArray,e.prototype.failed_participants=c.emptyArray,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.sec_success_participants=c.emptyArray,e.prototype.sec_failed_participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.success_participants&&e.success_participants.length)for(var n=0;n<e.success_participants.length;++n)t.uint32(8).int64(e.success_participants[n]);if(null!=e.failed_participants&&e.failed_participants.length)for(var n=0;n<e.failed_participants.length;++n)t.uint32(16).int64(e.failed_participants[n]);if(null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(34).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(40).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(50).string(e.check_message),null!=e.sec_success_participants&&e.sec_success_participants.length)for(var n=0;n<e.sec_success_participants.length;++n)u.im_proto.SecUidPair.encode(e.sec_success_participants[n],t.uint32(58).fork()).ldelim();if(null!=e.sec_failed_participants&&e.sec_failed_participants.length)for(var n=0;n<e.sec_failed_participants.length;++n)u.im_proto.SecUidPair.encode(e.sec_failed_participants[n],t.uint32(66).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationAddParticipantsResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:if(!(o.success_participants&&o.success_participants.length)&&(o.success_participants=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.success_participants.push(e.int64())}else o.success_participants.push(e.int64());break;case 2:if(!(o.failed_participants&&o.failed_participants.length)&&(o.failed_participants=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.failed_participants.push(e.int64())}else o.failed_participants.push(e.int64());break;case 3:o.status=e.int32();break;case 4:o.extra_info=e.string();break;case 5:o.check_code=e.int64();break;case 6:o.check_message=e.string();break;case 7:!(o.sec_success_participants&&o.sec_success_participants.length)&&(o.sec_success_participants=[]),o.sec_success_participants.push(u.im_proto.SecUidPair.decode(e,e.uint32()));break;case 8:!(o.sec_failed_participants&&o.sec_failed_participants.length)&&(o.sec_failed_participants=[]),o.sec_failed_participants.push(u.im_proto.SecUidPair.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.ConversationRemoveParticipantsResponseBody=function(){function e(e){if(this.failed_participants=[],this.failed_sec_participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.failed_participants=c.emptyArray,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.failed_sec_participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.failed_participants&&e.failed_participants.length)for(var n=0;n<e.failed_participants.length;++n)t.uint32(8).int64(e.failed_participants[n]);if(null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(26).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(32).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(42).string(e.check_message),null!=e.failed_sec_participants&&e.failed_sec_participants.length)for(var n=0;n<e.failed_sec_participants.length;++n)u.im_proto.SecUidPair.encode(e.failed_sec_participants[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationRemoveParticipantsResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:if(!(o.failed_participants&&o.failed_participants.length)&&(o.failed_participants=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.failed_participants.push(e.int64())}else o.failed_participants.push(e.int64());break;case 2:o.status=e.int32();break;case 3:o.extra_info=e.string();break;case 4:o.check_code=e.int64();break;case 5:o.check_message=e.string();break;case 6:!(o.failed_sec_participants&&o.failed_sec_participants.length)&&(o.failed_sec_participants=[]),o.failed_sec_participants.push(u.im_proto.SecUidPair.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.ConversationLeaveRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationLeaveRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationParticipantsListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=100,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(32).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(40).int32(e.limit),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationParticipantsListRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.cursor=e.int64();break;case 5:o.limit=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationParticipantsListResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participants_page=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.participants_page&&Object.hasOwnProperty.call(e,"participants_page")&&u.im_proto.ParticipantsPage.encode(e.participants_page,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationParticipantsListResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)o.participants_page=u.im_proto.ParticipantsPage.decode(e,e.uint32());else e.skipType(7&r)}return o},e}(),e.MgetConversationParticipantsRequestBody=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)t.uint32(32).int64(e.participants[n]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MgetConversationParticipantsRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:if(!(o.participants&&o.participants.length)&&(o.participants=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.participants.push(e.int64())}else o.participants.push(e.int64());break;default:e.skipType(7&r)}}return o},e}(),e.MgetConversationParticipantsResponseBody=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participants=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)u.im_proto.Participant.encode(e.participants[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MgetConversationParticipantsResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.participants&&o.participants.length)&&(o.participants=[]),o.participants.push(u.im_proto.Participant.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.UpdateConversationParticipantResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participant=null,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.participant&&Object.hasOwnProperty.call(e,"participant")&&u.im_proto.Participant.encode(e.participant,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(26).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(32).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(42).string(e.check_message),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.UpdateConversationParticipantResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.participant=u.im_proto.Participant.decode(e,e.uint32());break;case 2:o.status=e.int32();break;case 3:o.extra_info=e.string();break;case 4:o.check_code=e.int64();break;case 5:o.check_message=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationCoreInfoRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationCoreInfoRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationCoreInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_core_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_core_info&&Object.hasOwnProperty.call(e,"conversation_core_info")&&u.im_proto.ConversationCoreInfo.encode(e.conversation_core_info,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationCoreInfoResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)o.conversation_core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());else e.skipType(7&r)}return o},e}(),e.SetConversationCoreInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_core_info=null,e.prototype.status=0,e.prototype.extra_info="",e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_core_info&&Object.hasOwnProperty.call(e,"conversation_core_info")&&u.im_proto.ConversationCoreInfo.encode(e.conversation_core_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(26).string(e.extra_info),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(32).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(42).string(e.check_message),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.SetConversationCoreInfoResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());break;case 2:o.status=e.int32();break;case 3:o.extra_info=e.string();break;case 4:o.check_code=e.int64();break;case 5:o.check_message=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.UpsertConversationCoreExtInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.core_info=null,e.prototype.status=0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.core_info&&Object.hasOwnProperty.call(e,"core_info")&&u.im_proto.ConversationCoreInfo.encode(e.core_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(24).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(34).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).string(e.extra_info),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.UpsertConversationCoreExtInfoResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.core_info=u.im_proto.ConversationCoreInfo.decode(e,e.uint32());break;case 2:o.status=e.int32();break;case 3:o.check_code=e.int64();break;case 4:o.check_message=e.string();break;case 5:o.extra_info=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.SetConversationSettingInfoRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.set_stick_on_top=!1,e.prototype.set_mute=!1,e.prototype.set_favorite=!1,e.prototype.push_status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.set_stick_on_top&&Object.hasOwnProperty.call(e,"set_stick_on_top")&&t.uint32(32).bool(e.set_stick_on_top),null!=e.set_mute&&Object.hasOwnProperty.call(e,"set_mute")&&t.uint32(40).bool(e.set_mute),null!=e.set_favorite&&Object.hasOwnProperty.call(e,"set_favorite")&&t.uint32(48).bool(e.set_favorite),null!=e.push_status&&Object.hasOwnProperty.call(e,"push_status")&&t.uint32(56).int32(e.push_status),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.SetConversationSettingInfoRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_short_id=e.int64();break;case 3:o.conversation_type=e.int32();break;case 4:o.set_stick_on_top=e.bool();break;case 5:o.set_mute=e.bool();break;case 6:o.set_favorite=e.bool();break;case 7:o.push_status=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.SetConversationSettingInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.setting_info=null,e.prototype.status=0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.setting_info&&Object.hasOwnProperty.call(e,"setting_info")&&u.im_proto.ConversationSettingInfo.encode(e.setting_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(24).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(34).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).string(e.extra_info),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.SetConversationSettingInfoResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.setting_info=u.im_proto.ConversationSettingInfo.decode(e,e.uint32());break;case 2:o.status=e.int32();break;case 3:o.check_code=e.int64();break;case 4:o.check_message=e.string();break;case 5:o.extra_info=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.UpsertConversationSettingExtInfoRequestBody=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(34).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.UpsertConversationSettingExtInfoRequestBody;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_id=e.string();break;case 2:i.conversation_short_id=e.int64();break;case 3:i.conversation_type=e.int32();break;case 4:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.UpsertConversationSettingExtInfoResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.setting_info=null,e.prototype.status=0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.extra_info="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.setting_info&&Object.hasOwnProperty.call(e,"setting_info")&&u.im_proto.ConversationSettingInfo.encode(e.setting_info,t.uint32(10).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(24).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(34).string(e.check_message),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).string(e.extra_info),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.UpsertConversationSettingExtInfoResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.setting_info=u.im_proto.ConversationSettingInfo.decode(e,e.uint32());break;case 2:o.status=e.int32();break;case 3:o.check_code=e.int64();break;case 4:o.check_message=e.string();break;case 5:o.extra_info=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.StrangerConversation=function(){function e(e){if(this.participants=[],this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.unread=0,e.prototype.last_message=null,e.prototype.conversation_id="",e.prototype.participants=c.emptyArray,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.unread&&Object.hasOwnProperty.call(e,"unread")&&t.uint32(16).int32(e.unread),null!=e.last_message&&Object.hasOwnProperty.call(e,"last_message")&&u.im_proto.MessageBody.encode(e.last_message,t.uint32(26).fork()).ldelim(),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(34).string(e.conversation_id),null!=e.participants&&e.participants.length)for(var n=0;n<e.participants.length;++n)u.im_proto.Participant.encode(e.participants[n],t.uint32(42).fork()).ldelim();if(null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var o=Object.keys(e.ext),n=0;n<o.length;++n)t.uint32(58).fork().uint32(10).string(o[n]).uint32(18).string(e.ext[o[n]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.StrangerConversation;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.conversation_short_id=e.int64();break;case 2:i.unread=e.int32();break;case 3:i.last_message=u.im_proto.MessageBody.decode(e,e.uint32());break;case 4:i.conversation_id=e.string();break;case 5:!(i.participants&&i.participants.length)&&(i.participants=[]),i.participants.push(u.im_proto.Participant.decode(e,e.uint32()));break;case 7:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.GetStrangerConversationListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.count=c.Long?c.Long.fromBits(50,0,!1):50,e.prototype.show_total_unread=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(8).int64(e.cursor),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(16).int64(e.count),null!=e.show_total_unread&&Object.hasOwnProperty.call(e,"show_total_unread")&&t.uint32(24).bool(e.show_total_unread),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetStrangerConversationListRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.cursor=e.int64();break;case 2:o.count=e.int64();break;case 3:o.show_total_unread=e.bool();break;default:e.skipType(7&r)}}return o},e}(),e.GetStrangerConversationListResponseBody=function(){function e(e){if(this.conversation_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.has_more=!1,e.prototype.total_unread=0,e.prototype.conversation_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(8).int64(e.next_cursor),null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.total_unread&&Object.hasOwnProperty.call(e,"total_unread")&&t.uint32(24).int32(e.total_unread),null!=e.conversation_list&&e.conversation_list.length)for(var n=0;n<e.conversation_list.length;++n)u.im_proto.StrangerConversation.encode(e.conversation_list[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetStrangerConversationListResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.next_cursor=e.int64();break;case 2:o.has_more=e.bool();break;case 3:o.total_unread=e.int32();break;case 4:!(o.conversation_list&&o.conversation_list.length)&&(o.conversation_list=[]),o.conversation_list.push(u.im_proto.StrangerConversation.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.GetStrangerMessagesRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.reset_unread_count=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.reset_unread_count&&Object.hasOwnProperty.call(e,"reset_unread_count")&&t.uint32(16).bool(e.reset_unread_count),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetStrangerMessagesRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_short_id=e.int64();break;case 2:o.reset_unread_count=e.bool();break;default:e.skipType(7&r)}}return o},e}(),e.GetStrangerMessagesResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetStrangerMessagesResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==3)!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.DeleteStrangerMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.DeleteStrangerMessageRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.server_message_id=e.int64();break;case 2:o.conversation_short_id=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.DeleteStrangerConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.DeleteStrangerConversationRequestBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)o.conversation_short_id=e.int64();else e.skipType(7&r)}return o},e}(),e.DeleteStrangerAllConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.DeleteStrangerAllConversationRequestBody;e.pos<n;){var r=e.uint32();e.skipType(7&r)}return o},e}(),e.MarkStrangerConversationReadRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MarkStrangerConversationReadRequestBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)o.conversation_short_id=e.int64();else e.skipType(7&r)}return o},e}(),e.MarkStrangerAllConversationReadRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MarkStrangerAllConversationReadRequestBody;e.pos<n;){var r=e.uint32();e.skipType(7&r)}return o},e}(),e.OPERATION_TYPE=function(){let e={},t=Object.create(e);return t[e[0]="ADD_PROPERTY_ITEM"]=0,t[e[1]="REMOVE_PROPERTY_ITEM"]=1,t[e[2]="SET_PROPERTY"]=2,t[e[3]="DEL_PROPERTY"]=3,t}(),e.ModifyPropertyContent=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.operation=0,e.prototype.key="",e.prototype.value="",e.prototype.idempotent_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.operation&&Object.hasOwnProperty.call(e,"operation")&&t.uint32(8).int32(e.operation),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(18).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(26).string(e.value),null!=e.idempotent_id&&Object.hasOwnProperty.call(e,"idempotent_id")&&t.uint32(34).string(e.idempotent_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ModifyPropertyContent;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.operation=e.int32();break;case 2:o.key=e.string();break;case 3:o.value=e.string();break;case 4:o.idempotent_id=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.ModifyPropertyBody=function(){function e(e){if(this.modify_property_content=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.client_message_id="",e.prototype.modify_property_content=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),null!=e.client_message_id&&Object.hasOwnProperty.call(e,"client_message_id")&&t.uint32(42).string(e.client_message_id),null!=e.modify_property_content&&e.modify_property_content.length)for(var n=0;n<e.modify_property_content.length;++n)u.im_proto.ModifyPropertyContent.encode(e.modify_property_content[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ModifyPropertyBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_type=e.int32();break;case 3:o.conversation_short_id=e.int64();break;case 4:o.server_message_id=e.int64();break;case 5:o.client_message_id=e.string();break;case 6:!(o.modify_property_content&&o.modify_property_content.length)&&(o.modify_property_content=[]),o.modify_property_content.push(u.im_proto.ModifyPropertyContent.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.ModifyMessagePropertyRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.property_list=null,e.prototype.ticket="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.property_list&&Object.hasOwnProperty.call(e,"property_list")&&u.im_proto.ModifyPropertyBody.encode(e.property_list,t.uint32(10).fork()).ldelim(),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(18).string(e.ticket),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ModifyMessagePropertyRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.property_list=u.im_proto.ModifyPropertyBody.decode(e,e.uint32());break;case 2:o.ticket=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.ModifyMessagePropertyStatus=function(){let e={},t=Object.create(e);return t[e[0]="MODIFY_PROPERTY_SUCCESS"]=0,t[e[1]="MODIFY_PROPERTY_REPEAT_REQUEST"]=1,t[e[2]="MODIFY_PROPERTY_INVALID_LENGTH"]=2,t[e[3]="MODIFY_PROPERTY_INVALID_REQUEST"]=3,t[e[4]="MODIFY_PROPERTY_CALLBACK_ERROR"]=4,t[e[500]="MODIFY_PROPERTY_INTERNAL_ERROR"]=500,t}(),e.ModifyMessagePropertyResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ModifyMessagePropertyResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.status=e.int32();break;case 2:o.version=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.MediaType=function(){let e={},t=Object.create(e);return t[e[1]="IMG"]=1,t[e[2]="VIDEO"]=2,t[e[3]="AUDIO"]=3,t[e[4]="FILE"]=4,t[e[10]="OTHER"]=10,t}(),e.MediaTokenType=function(){let e={},t=Object.create(e);return t[e[1]="VSDK"]=1,t[e[2]="IMAGEX"]=2,t[e[3]="VSDK_V5"]=3,t[e[4]="IMAGEX_V5"]=4,t}(),e.ReadURLFrom=function(){let e={},t=Object.create(e);return t[e[1]="URL_VSDK"]=1,t[e[2]="URL_IMAGEX"]=2,t}(),e.GetTicketRequestBody=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ticket_type=1,e.prototype.conversation_type=1,e.prototype.to_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.ticket_type&&Object.hasOwnProperty.call(e,"ticket_type")&&t.uint32(8).int32(e.ticket_type),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.to_id&&Object.hasOwnProperty.call(e,"to_id")&&t.uint32(32).int64(e.to_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(40).int64(e.conversation_short_id),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(82).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.GetTicketRequestBody;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.ticket_type=e.int32();break;case 2:i.conversation_type=e.int32();break;case 4:i.to_id=e.int64();break;case 5:i.conversation_short_id=e.int64();break;case 10:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}return i},e}(),e.GetTicketResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ticket="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(10).string(e.ticket),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetTicketResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)o.ticket=e.string();else e.skipType(7&r)}return o},e}(),e.SortType=function(){let e={},t=Object.create(e);return t[e[1]="JOIN_TIME"]=1,t[e[2]="CREATED_TIME"]=2,t[e[3]="GROUP_NAME"]=3,t[e[4]="ACTIVE_TIME"]=4,t}(),e.GetUserConversationListRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sort_type=1,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.con_type=1,e.prototype.limit=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.include_role=0,e.prototype.exclude_role=0,e.prototype.with_cold=!1,e.prototype.push_status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(8).int32(e.sort_type),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(16).int64(e.cursor),null!=e.con_type&&Object.hasOwnProperty.call(e,"con_type")&&t.uint32(24).int32(e.con_type),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(32).int64(e.limit),null!=e.include_role&&Object.hasOwnProperty.call(e,"include_role")&&t.uint32(40).int32(e.include_role),null!=e.exclude_role&&Object.hasOwnProperty.call(e,"exclude_role")&&t.uint32(48).int32(e.exclude_role),null!=e.with_cold&&Object.hasOwnProperty.call(e,"with_cold")&&t.uint32(64).bool(e.with_cold),null!=e.push_status&&Object.hasOwnProperty.call(e,"push_status")&&t.uint32(80).int32(e.push_status),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetUserConversationListRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.sort_type=e.int32();break;case 2:o.cursor=e.int64();break;case 3:o.con_type=e.int32();break;case 4:o.limit=e.int64();break;case 5:o.include_role=e.int32();break;case 6:o.exclude_role=e.int32();break;case 8:o.with_cold=e.bool();break;case 10:o.push_status=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.GetUserConversationListResponseBody=function(){function e(e){if(this.list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.list=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.list&&e.list.length)for(var n=0;n<e.list.length;++n)u.im_proto.ConversationInfoV2.encode(e.list[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetUserConversationListResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.list&&o.list.length)&&(o.list=[]),o.list.push(u.im_proto.ConversationInfoV2.decode(e,e.uint32()));break;case 2:o.has_more=e.bool();break;case 3:o.next_cursor=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.RequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_message_body=null,e.prototype.messages_per_user_body=null,e.prototype.messages_per_user_init_v2_body=null,e.prototype.get_message_by_id_body=null,e.prototype.messages_in_conversation_body=null,e.prototype.get_messages_checkinfo_in_conversation_body=null,e.prototype.delete_conversation_body=null,e.prototype.mark_conversation_read_body=null,e.prototype.conversation_participants_body=null,e.prototype.batch_mark_read_body=null,e.prototype.dissolve_conversation_body=null,e.prototype.create_conversation_v2_body=null,e.prototype.get_conversation_info_list_v2_body=null,e.prototype.conversation_add_participants_body=null,e.prototype.leave_conversation_body=null,e.prototype.mget_conversation_participants_body=null,e.prototype.delete_message_body=null,e.prototype.recall_message_body=null,e.prototype.modify_message_property_body=null,e.prototype.get_conversation_core_info_body=null,e.prototype.set_conversation_setting_info_body=null,e.prototype.upsert_conversation_setting_ext_info_body=null,e.prototype.get_stranger_conversation_body=null,e.prototype.get_stranger_messages_body=null,e.prototype.delete_stranger_message_body=null,e.prototype.delete_stranger_conversation_body=null,e.prototype.delete_stranger_all_conversation_body=null,e.prototype.mark_stranger_conversation_read_body=null,e.prototype.mark_stranger_all_conversation_read_body=null,e.prototype.participants_read_index_body=null,e.prototype.participants_min_index_body=null,e.prototype.get_ticket_body=null,e.prototype.get_conversation_list_body=null,e.prototype.broadcast_recv_message_body=null,e.prototype.client_ack_body=null,e.prototype.get_configs_body=null,e.prototype.unread_count_report_body=null,e.prototype.batch_get_conversation_participants_readindex=null,e.prototype.message_by_init=null,e.prototype.get_user_message=null,e.prototype.client_batch_ack_body=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.send_message_body&&Object.hasOwnProperty.call(e,"send_message_body")&&u.im_proto.SendMessageRequestBody.encode(e.send_message_body,t.uint32(802).fork()).ldelim(),null!=e.messages_per_user_body&&Object.hasOwnProperty.call(e,"messages_per_user_body")&&u.im_proto.MessagesPerUserRequestBody.encode(e.messages_per_user_body,t.uint32(1602).fork()).ldelim(),null!=e.messages_per_user_init_v2_body&&Object.hasOwnProperty.call(e,"messages_per_user_init_v2_body")&&u.im_proto.MessagesPerUserInitV2RequestBody.encode(e.messages_per_user_init_v2_body,t.uint32(1626).fork()).ldelim(),null!=e.get_message_by_id_body&&Object.hasOwnProperty.call(e,"get_message_by_id_body")&&u.im_proto.GetMessageByIdRequestBody.encode(e.get_message_by_id_body,t.uint32(1690).fork()).ldelim(),null!=e.messages_in_conversation_body&&Object.hasOwnProperty.call(e,"messages_in_conversation_body")&&u.im_proto.MessagesInConversationRequestBody.encode(e.messages_in_conversation_body,t.uint32(2410).fork()).ldelim(),null!=e.get_messages_checkinfo_in_conversation_body&&Object.hasOwnProperty.call(e,"get_messages_checkinfo_in_conversation_body")&&u.im_proto.GetMessagesCheckInfoInConversationRequestBody.encode(e.get_messages_checkinfo_in_conversation_body,t.uint32(2418).fork()).ldelim(),null!=e.delete_conversation_body&&Object.hasOwnProperty.call(e,"delete_conversation_body")&&u.im_proto.DeleteConversationRequestBody.encode(e.delete_conversation_body,t.uint32(4826).fork()).ldelim(),null!=e.mark_conversation_read_body&&Object.hasOwnProperty.call(e,"mark_conversation_read_body")&&u.im_proto.MarkConversationReadRequestBody.encode(e.mark_conversation_read_body,t.uint32(4834).fork()).ldelim(),null!=e.conversation_participants_body&&Object.hasOwnProperty.call(e,"conversation_participants_body")&&u.im_proto.ConversationParticipantsListRequestBody.encode(e.conversation_participants_body,t.uint32(4842).fork()).ldelim(),null!=e.create_conversation_v2_body&&Object.hasOwnProperty.call(e,"create_conversation_v2_body")&&u.im_proto.CreateConversationV2RequestBody.encode(e.create_conversation_v2_body,t.uint32(4874).fork()).ldelim(),null!=e.get_conversation_info_list_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_v2_body")&&u.im_proto.GetConversationInfoListV2RequestBody.encode(e.get_conversation_info_list_v2_body,t.uint32(4882).fork()).ldelim(),null!=e.batch_mark_read_body&&Object.hasOwnProperty.call(e,"batch_mark_read_body")&&u.im_proto.BatchMarkConversationReadRequestBody.encode(e.batch_mark_read_body,t.uint32(4906).fork()).ldelim(),null!=e.dissolve_conversation_body&&Object.hasOwnProperty.call(e,"dissolve_conversation_body")&&u.im_proto.DissolveConversationRequestBody.encode(e.dissolve_conversation_body,t.uint32(4914).fork()).ldelim(),null!=e.conversation_add_participants_body&&Object.hasOwnProperty.call(e,"conversation_add_participants_body")&&u.im_proto.ConversationAddParticipantsRequestBody.encode(e.conversation_add_participants_body,t.uint32(5202).fork()).ldelim(),null!=e.leave_conversation_body&&Object.hasOwnProperty.call(e,"leave_conversation_body")&&u.im_proto.ConversationLeaveRequestBody.encode(e.leave_conversation_body,t.uint32(5218).fork()).ldelim(),null!=e.mget_conversation_participants_body&&Object.hasOwnProperty.call(e,"mget_conversation_participants_body")&&u.im_proto.MgetConversationParticipantsRequestBody.encode(e.mget_conversation_participants_body,t.uint32(5234).fork()).ldelim(),null!=e.delete_message_body&&Object.hasOwnProperty.call(e,"delete_message_body")&&u.im_proto.DeleteMessageRequestBody.encode(e.delete_message_body,t.uint32(5610).fork()).ldelim(),null!=e.recall_message_body&&Object.hasOwnProperty.call(e,"recall_message_body")&&u.im_proto.RecallMessageRequestBody.encode(e.recall_message_body,t.uint32(5618).fork()).ldelim(),null!=e.modify_message_property_body&&Object.hasOwnProperty.call(e,"modify_message_property_body")&&u.im_proto.ModifyMessagePropertyRequestBody.encode(e.modify_message_property_body,t.uint32(5642).fork()).ldelim(),null!=e.get_conversation_core_info_body&&Object.hasOwnProperty.call(e,"get_conversation_core_info_body")&&u.im_proto.GetConversationCoreInfoRequestBody.encode(e.get_conversation_core_info_body,t.uint32(7210).fork()).ldelim(),null!=e.set_conversation_setting_info_body&&Object.hasOwnProperty.call(e,"set_conversation_setting_info_body")&&u.im_proto.SetConversationSettingInfoRequestBody.encode(e.set_conversation_setting_info_body,t.uint32(7370).fork()).ldelim(),null!=e.upsert_conversation_setting_ext_info_body&&Object.hasOwnProperty.call(e,"upsert_conversation_setting_ext_info_body")&&u.im_proto.UpsertConversationSettingExtInfoRequestBody.encode(e.upsert_conversation_setting_ext_info_body,t.uint32(7378).fork()).ldelim(),null!=e.get_stranger_conversation_body&&Object.hasOwnProperty.call(e,"get_stranger_conversation_body")&&u.im_proto.GetStrangerConversationListRequestBody.encode(e.get_stranger_conversation_body,t.uint32(8002).fork()).ldelim(),null!=e.get_stranger_messages_body&&Object.hasOwnProperty.call(e,"get_stranger_messages_body")&&u.im_proto.GetStrangerMessagesRequestBody.encode(e.get_stranger_messages_body,t.uint32(8010).fork()).ldelim(),null!=e.delete_stranger_message_body&&Object.hasOwnProperty.call(e,"delete_stranger_message_body")&&u.im_proto.DeleteStrangerMessageRequestBody.encode(e.delete_stranger_message_body,t.uint32(8018).fork()).ldelim(),null!=e.delete_stranger_conversation_body&&Object.hasOwnProperty.call(e,"delete_stranger_conversation_body")&&u.im_proto.DeleteStrangerConversationRequestBody.encode(e.delete_stranger_conversation_body,t.uint32(8026).fork()).ldelim(),null!=e.delete_stranger_all_conversation_body&&Object.hasOwnProperty.call(e,"delete_stranger_all_conversation_body")&&u.im_proto.DeleteStrangerAllConversationRequestBody.encode(e.delete_stranger_all_conversation_body,t.uint32(8034).fork()).ldelim(),null!=e.mark_stranger_conversation_read_body&&Object.hasOwnProperty.call(e,"mark_stranger_conversation_read_body")&&u.im_proto.MarkStrangerConversationReadRequestBody.encode(e.mark_stranger_conversation_read_body,t.uint32(8042).fork()).ldelim(),null!=e.mark_stranger_all_conversation_read_body&&Object.hasOwnProperty.call(e,"mark_stranger_all_conversation_read_body")&&u.im_proto.MarkStrangerAllConversationReadRequestBody.encode(e.mark_stranger_all_conversation_read_body,t.uint32(8050).fork()).ldelim(),null!=e.participants_read_index_body&&Object.hasOwnProperty.call(e,"participants_read_index_body")&&u.im_proto.GetConversationParticipantsReadIndexV3RequestBody.encode(e.participants_read_index_body,t.uint32(16002).fork()).ldelim(),null!=e.participants_min_index_body&&Object.hasOwnProperty.call(e,"participants_min_index_body")&&u.im_proto.GetConversationParticipantsMinIndexV3RequestBody.encode(e.participants_min_index_body,t.uint32(16010).fork()).ldelim(),null!=e.get_ticket_body&&Object.hasOwnProperty.call(e,"get_ticket_body")&&u.im_proto.GetTicketRequestBody.encode(e.get_ticket_body,t.uint32(16042).fork()).ldelim(),null!=e.get_conversation_list_body&&Object.hasOwnProperty.call(e,"get_conversation_list_body")&&u.im_proto.GetUserConversationListRequestBody.encode(e.get_conversation_list_body,t.uint32(16050).fork()).ldelim(),null!=e.broadcast_recv_message_body&&Object.hasOwnProperty.call(e,"broadcast_recv_message_body")&&u.im_proto.BroadcastRecvMessageRequestBody.encode(e.broadcast_recv_message_body,t.uint32(16066).fork()).ldelim(),null!=e.client_ack_body&&Object.hasOwnProperty.call(e,"client_ack_body")&&u.im_proto.ClientACKRequestBody.encode(e.client_ack_body,t.uint32(16082).fork()).ldelim(),null!=e.get_configs_body&&Object.hasOwnProperty.call(e,"get_configs_body")&&u.im_proto.GetConfigsRequestBody.encode(e.get_configs_body,t.uint32(16138).fork()).ldelim(),null!=e.unread_count_report_body&&Object.hasOwnProperty.call(e,"unread_count_report_body")&&u.im_proto.UnReadCountReportRequestBody.encode(e.unread_count_report_body,t.uint32(16146).fork()).ldelim(),null!=e.batch_get_conversation_participants_readindex&&Object.hasOwnProperty.call(e,"batch_get_conversation_participants_readindex")&&u.im_proto.BatchGetConversationParticipantsReadIndexRequestBody.encode(e.batch_get_conversation_participants_readindex,t.uint32(16306).fork()).ldelim(),null!=e.message_by_init&&Object.hasOwnProperty.call(e,"message_by_init")&&u.im_proto.MessageByInitRequestBody.encode(e.message_by_init,t.uint32(16346).fork()).ldelim(),null!=e.get_user_message&&Object.hasOwnProperty.call(e,"get_user_message")&&u.im_proto.GetUserMessageRequestBody.encode(e.get_user_message,t.uint32(16386).fork()).ldelim(),null!=e.client_batch_ack_body&&Object.hasOwnProperty.call(e,"client_batch_ack_body")&&u.im_proto.ClientBatchACKRequestBody.encode(e.client_batch_ack_body,t.uint32(16458).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.RequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 100:o.send_message_body=u.im_proto.SendMessageRequestBody.decode(e,e.uint32());break;case 200:o.messages_per_user_body=u.im_proto.MessagesPerUserRequestBody.decode(e,e.uint32());break;case 203:o.messages_per_user_init_v2_body=u.im_proto.MessagesPerUserInitV2RequestBody.decode(e,e.uint32());break;case 211:o.get_message_by_id_body=u.im_proto.GetMessageByIdRequestBody.decode(e,e.uint32());break;case 301:o.messages_in_conversation_body=u.im_proto.MessagesInConversationRequestBody.decode(e,e.uint32());break;case 302:o.get_messages_checkinfo_in_conversation_body=u.im_proto.GetMessagesCheckInfoInConversationRequestBody.decode(e,e.uint32());break;case 603:o.delete_conversation_body=u.im_proto.DeleteConversationRequestBody.decode(e,e.uint32());break;case 604:o.mark_conversation_read_body=u.im_proto.MarkConversationReadRequestBody.decode(e,e.uint32());break;case 605:o.conversation_participants_body=u.im_proto.ConversationParticipantsListRequestBody.decode(e,e.uint32());break;case 613:o.batch_mark_read_body=u.im_proto.BatchMarkConversationReadRequestBody.decode(e,e.uint32());break;case 614:o.dissolve_conversation_body=u.im_proto.DissolveConversationRequestBody.decode(e,e.uint32());break;case 609:o.create_conversation_v2_body=u.im_proto.CreateConversationV2RequestBody.decode(e,e.uint32());break;case 610:o.get_conversation_info_list_v2_body=u.im_proto.GetConversationInfoListV2RequestBody.decode(e,e.uint32());break;case 650:o.conversation_add_participants_body=u.im_proto.ConversationAddParticipantsRequestBody.decode(e,e.uint32());break;case 652:o.leave_conversation_body=u.im_proto.ConversationLeaveRequestBody.decode(e,e.uint32());break;case 654:o.mget_conversation_participants_body=u.im_proto.MgetConversationParticipantsRequestBody.decode(e,e.uint32());break;case 701:o.delete_message_body=u.im_proto.DeleteMessageRequestBody.decode(e,e.uint32());break;case 702:o.recall_message_body=u.im_proto.RecallMessageRequestBody.decode(e,e.uint32());break;case 705:o.modify_message_property_body=u.im_proto.ModifyMessagePropertyRequestBody.decode(e,e.uint32());break;case 901:o.get_conversation_core_info_body=u.im_proto.GetConversationCoreInfoRequestBody.decode(e,e.uint32());break;case 921:o.set_conversation_setting_info_body=u.im_proto.SetConversationSettingInfoRequestBody.decode(e,e.uint32());break;case 922:o.upsert_conversation_setting_ext_info_body=u.im_proto.UpsertConversationSettingExtInfoRequestBody.decode(e,e.uint32());break;case 1e3:o.get_stranger_conversation_body=u.im_proto.GetStrangerConversationListRequestBody.decode(e,e.uint32());break;case 1001:o.get_stranger_messages_body=u.im_proto.GetStrangerMessagesRequestBody.decode(e,e.uint32());break;case 1002:o.delete_stranger_message_body=u.im_proto.DeleteStrangerMessageRequestBody.decode(e,e.uint32());break;case 1003:o.delete_stranger_conversation_body=u.im_proto.DeleteStrangerConversationRequestBody.decode(e,e.uint32());break;case 1004:o.delete_stranger_all_conversation_body=u.im_proto.DeleteStrangerAllConversationRequestBody.decode(e,e.uint32());break;case 1005:o.mark_stranger_conversation_read_body=u.im_proto.MarkStrangerConversationReadRequestBody.decode(e,e.uint32());break;case 1006:o.mark_stranger_all_conversation_read_body=u.im_proto.MarkStrangerAllConversationReadRequestBody.decode(e,e.uint32());break;case 2e3:o.participants_read_index_body=u.im_proto.GetConversationParticipantsReadIndexV3RequestBody.decode(e,e.uint32());break;case 2001:o.participants_min_index_body=u.im_proto.GetConversationParticipantsMinIndexV3RequestBody.decode(e,e.uint32());break;case 2005:o.get_ticket_body=u.im_proto.GetTicketRequestBody.decode(e,e.uint32());break;case 2006:o.get_conversation_list_body=u.im_proto.GetUserConversationListRequestBody.decode(e,e.uint32());break;case 2008:o.broadcast_recv_message_body=u.im_proto.BroadcastRecvMessageRequestBody.decode(e,e.uint32());break;case 2010:o.client_ack_body=u.im_proto.ClientACKRequestBody.decode(e,e.uint32());break;case 2017:o.get_configs_body=u.im_proto.GetConfigsRequestBody.decode(e,e.uint32());break;case 2018:o.unread_count_report_body=u.im_proto.UnReadCountReportRequestBody.decode(e,e.uint32());break;case 2038:o.batch_get_conversation_participants_readindex=u.im_proto.BatchGetConversationParticipantsReadIndexRequestBody.decode(e,e.uint32());break;case 2043:o.message_by_init=u.im_proto.MessageByInitRequestBody.decode(e,e.uint32());break;case 2048:o.get_user_message=u.im_proto.GetUserMessageRequestBody.decode(e,e.uint32());break;case 2057:o.client_batch_ack_body=u.im_proto.ClientBatchACKRequestBody.decode(e,e.uint32());break;default:e.skipType(7&r)}}return o},e}(),e.Request=function(){function e(e){if(this.headers={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cmd=0,e.prototype.sequence_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sdk_version="",e.prototype.token="",e.prototype.refer=1,e.prototype.inbox_type=0,e.prototype.build_number="",e.prototype.body=null,e.prototype.device_id="",e.prototype.channel="",e.prototype.device_platform="",e.prototype.device_type="",e.prototype.os_version="",e.prototype.version_code="",e.prototype.headers=c.emptyObject,e.prototype.config_id=0,e.prototype.token_info=null,e.prototype.auth_type=0,e.prototype.biz="",e.prototype.access="",e.prototype.ts_sign="",e.prototype.sdk_cert="",e.prototype.reuqest_sign="",e.prototype.iter_version="",e.prototype.timestamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.pdes_version=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(8).int32(e.cmd),null!=e.sequence_id&&Object.hasOwnProperty.call(e,"sequence_id")&&t.uint32(16).int64(e.sequence_id),null!=e.sdk_version&&Object.hasOwnProperty.call(e,"sdk_version")&&t.uint32(26).string(e.sdk_version),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(34).string(e.token),null!=e.refer&&Object.hasOwnProperty.call(e,"refer")&&t.uint32(40).int32(e.refer),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(48).int32(e.inbox_type),null!=e.build_number&&Object.hasOwnProperty.call(e,"build_number")&&t.uint32(58).string(e.build_number),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&u.im_proto.RequestBody.encode(e.body,t.uint32(66).fork()).ldelim(),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(74).string(e.device_id),null!=e.channel&&Object.hasOwnProperty.call(e,"channel")&&t.uint32(82).string(e.channel),null!=e.device_platform&&Object.hasOwnProperty.call(e,"device_platform")&&t.uint32(90).string(e.device_platform),null!=e.device_type&&Object.hasOwnProperty.call(e,"device_type")&&t.uint32(98).string(e.device_type),null!=e.os_version&&Object.hasOwnProperty.call(e,"os_version")&&t.uint32(106).string(e.os_version),null!=e.version_code&&Object.hasOwnProperty.call(e,"version_code")&&t.uint32(114).string(e.version_code),null!=e.headers&&Object.hasOwnProperty.call(e,"headers"))for(var n=Object.keys(e.headers),o=0;o<n.length;++o)t.uint32(122).fork().uint32(10).string(n[o]).uint32(18).string(e.headers[n[o]]).ldelim();return null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(128).int32(e.config_id),null!=e.token_info&&Object.hasOwnProperty.call(e,"token_info")&&u.im_proto.TokenInfo.encode(e.token_info,t.uint32(138).fork()).ldelim(),null!=e.auth_type&&Object.hasOwnProperty.call(e,"auth_type")&&t.uint32(144).int32(e.auth_type),null!=e.biz&&Object.hasOwnProperty.call(e,"biz")&&t.uint32(170).string(e.biz),null!=e.access&&Object.hasOwnProperty.call(e,"access")&&t.uint32(178).string(e.access),null!=e.ts_sign&&Object.hasOwnProperty.call(e,"ts_sign")&&t.uint32(186).string(e.ts_sign),null!=e.sdk_cert&&Object.hasOwnProperty.call(e,"sdk_cert")&&t.uint32(194).string(e.sdk_cert),null!=e.reuqest_sign&&Object.hasOwnProperty.call(e,"reuqest_sign")&&t.uint32(202).string(e.reuqest_sign),null!=e.iter_version&&Object.hasOwnProperty.call(e,"iter_version")&&t.uint32(826).string(e.iter_version),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(832).int64(e.timestamp),null!=e.pdes_version&&Object.hasOwnProperty.call(e,"pdes_version")&&t.uint32(880).int32(e.pdes_version),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.Request;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.cmd=e.int32();break;case 2:i.sequence_id=e.int64();break;case 3:i.sdk_version=e.string();break;case 4:i.token=e.string();break;case 5:i.refer=e.int32();break;case 6:i.inbox_type=e.int32();break;case 7:i.build_number=e.string();break;case 8:i.body=u.im_proto.RequestBody.decode(e,e.uint32());break;case 9:i.device_id=e.string();break;case 10:i.channel=e.string();break;case 11:i.device_platform=e.string();break;case 12:i.device_type=e.string();break;case 13:i.os_version=e.string();break;case 14:i.version_code=e.string();break;case 15:i.headers===c.emptyObject&&(i.headers={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.headers[n]=o;break;case 16:i.config_id=e.int32();break;case 17:i.token_info=u.im_proto.TokenInfo.decode(e,e.uint32());break;case 18:i.auth_type=e.int32();break;case 21:i.biz=e.string();break;case 22:i.access=e.string();break;case 23:i.ts_sign=e.string();break;case 24:i.sdk_cert=e.string();break;case 25:i.reuqest_sign=e.string();break;case 103:i.iter_version=e.string();break;case 104:i.timestamp=e.int64();break;case 110:i.pdes_version=e.int32();break;default:e.skipType(7&a)}}return i},e}(),e.AuthType=function(){let e={},t=Object.create(e);return t[e[0]="UNKNOWN_AUTH"]=0,t[e[1]="SESSION_AUTH"]=1,t[e[2]="TOKEN_AUTH"]=2,t[e[3]="CERT_AUTH"]=3,t[e[4]="PASSPORT_CERT_AUTH"]=4,t}(),e.TokenType=function(){let e={},t=Object.create(e);return t[e[0]="DEFAULT_TOKEN"]=0,t[e[1]="APP_TOKEN"]=1,t[e[2]="SERVER_TOKEN"]=2,t}(),e.TokenInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.mark_id=0,e.prototype.type=0,e.prototype.app_id=0,e.prototype.user_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.timestamp=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.mark_id&&Object.hasOwnProperty.call(e,"mark_id")&&t.uint32(8).int32(e.mark_id),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(24).int32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(32).int64(e.user_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(40).int64(e.timestamp),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.TokenInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.mark_id=e.int32();break;case 2:o.type=e.int32();break;case 3:o.app_id=e.int32();break;case 4:o.user_id=e.int64();break;case 5:o.timestamp=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.SendType=function(){let e={},t=Object.create(e);return t[e[0]="BY_CONVERSATION"]=0,t[e[1]="BY_USER"]=1,t}(),e.NewP2PMessageNotify=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_type=0,e.prototype.sender=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.sec_sender="",e.prototype.conversation_id="",e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=0,e.prototype.message_type=0,e.prototype.content="",e.prototype.ext=c.emptyObject,e.prototype.create_time=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.send_type&&Object.hasOwnProperty.call(e,"send_type")&&t.uint32(8).int32(e.send_type),null!=e.sender&&Object.hasOwnProperty.call(e,"sender")&&t.uint32(16).int64(e.sender),null!=e.sec_sender&&Object.hasOwnProperty.call(e,"sec_sender")&&t.uint32(26).string(e.sec_sender),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(34).string(e.conversation_id),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(40).int64(e.conversation_short_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(48).int32(e.conversation_type),null!=e.message_type&&Object.hasOwnProperty.call(e,"message_type")&&t.uint32(56).int32(e.message_type),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(66).string(e.content),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(74).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(80).int64(e.create_time),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.NewP2PMessageNotify;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.send_type=e.int32();break;case 2:i.sender=e.int64();break;case 3:i.sec_sender=e.string();break;case 4:i.conversation_id=e.string();break;case 5:i.conversation_short_id=e.int64();break;case 6:i.conversation_type=e.int32();break;case 7:i.message_type=e.int32();break;case 8:i.content=e.string();break;case 9:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;case 10:i.create_time=e.int64();break;default:e.skipType(7&a)}}return i},e}(),e.MessageInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.body=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&u.im_proto.MessageBody.encode(e.body,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessageInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.status=e.int32();break;case 2:o.body=u.im_proto.MessageBody.decode(e,e.uint32());break;default:e.skipType(7&r)}}return o},e}(),e.GetMessageByIdRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(32).int64(e.server_message_id),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetMessageByIdRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_type=e.int32();break;case 3:o.conversation_short_id=e.int64();break;case 4:o.server_message_id=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.GetMessageByIdResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.msg_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.msg_info&&Object.hasOwnProperty.call(e,"msg_info")&&u.im_proto.MessageInfo.encode(e.msg_info,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetMessageByIdResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)o.msg_info=u.im_proto.MessageInfo.decode(e,e.uint32());else e.skipType(7&r)}return o},e}(),e.ResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.send_message_body=null,e.prototype.messages_per_user_body=null,e.prototype.messages_per_user_init_v2_body=null,e.prototype.get_message_by_id_body=null,e.prototype.messages_in_conversation_body=null,e.prototype.get_messages_checkinfo_in_conversation_body=null,e.prototype.has_new_message_notify=null,e.prototype.has_new_p2p_message_notify=null,e.prototype.get_conversations_checkinfo_body=null,e.prototype.create_conversation_v2_body=null,e.prototype.get_conversation_info_list_v2_body=null,e.prototype.conversation_participants_body=null,e.prototype.conversation_add_participants_body=null,e.prototype.mget_conversation_participants_body=null,e.prototype.modify_message_property_body=null,e.prototype.get_conversation_core_info_body=null,e.prototype.set_conversation_setting_info_body=null,e.prototype.upsert_conversation_setting_ext_info_body=null,e.prototype.get_stranger_conversation_body=null,e.prototype.get_stranger_messages_body=null,e.prototype.participants_read_index_body=null,e.prototype.participants_min_index_body=null,e.prototype.batch_get_conversation_participants_readindex=null,e.prototype.get_ticket_body=null,e.prototype.get_conversation_list_body=null,e.prototype.broadcast_recv_message_body=null,e.prototype.get_configs_body=null,e.prototype.unread_count_report_body=null,e.prototype.message_by_init=null,e.prototype.get_user_message=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.send_message_body&&Object.hasOwnProperty.call(e,"send_message_body")&&u.im_proto.SendMessageResponseBody.encode(e.send_message_body,t.uint32(802).fork()).ldelim(),null!=e.messages_per_user_body&&Object.hasOwnProperty.call(e,"messages_per_user_body")&&u.im_proto.MessagesPerUserResponseBody.encode(e.messages_per_user_body,t.uint32(1602).fork()).ldelim(),null!=e.messages_per_user_init_v2_body&&Object.hasOwnProperty.call(e,"messages_per_user_init_v2_body")&&u.im_proto.MessagesPerUserInitV2ResponseBody.encode(e.messages_per_user_init_v2_body,t.uint32(1626).fork()).ldelim(),null!=e.get_message_by_id_body&&Object.hasOwnProperty.call(e,"get_message_by_id_body")&&u.im_proto.GetMessageByIdResponseBody.encode(e.get_message_by_id_body,t.uint32(1690).fork()).ldelim(),null!=e.messages_in_conversation_body&&Object.hasOwnProperty.call(e,"messages_in_conversation_body")&&u.im_proto.MessagesInConversationResponseBody.encode(e.messages_in_conversation_body,t.uint32(2410).fork()).ldelim(),null!=e.get_messages_checkinfo_in_conversation_body&&Object.hasOwnProperty.call(e,"get_messages_checkinfo_in_conversation_body")&&u.im_proto.GetMessagesCheckInfoInConversationResponseBody.encode(e.get_messages_checkinfo_in_conversation_body,t.uint32(2418).fork()).ldelim(),null!=e.has_new_message_notify&&Object.hasOwnProperty.call(e,"has_new_message_notify")&&u.im_proto.NewMessageNotify.encode(e.has_new_message_notify,t.uint32(4002).fork()).ldelim(),null!=e.has_new_p2p_message_notify&&Object.hasOwnProperty.call(e,"has_new_p2p_message_notify")&&u.im_proto.NewP2PMessageNotify.encode(e.has_new_p2p_message_notify,t.uint32(4034).fork()).ldelim(),null!=e.conversation_participants_body&&Object.hasOwnProperty.call(e,"conversation_participants_body")&&u.im_proto.ConversationParticipantsListResponseBody.encode(e.conversation_participants_body,t.uint32(4842).fork()).ldelim(),null!=e.create_conversation_v2_body&&Object.hasOwnProperty.call(e,"create_conversation_v2_body")&&u.im_proto.CreateConversationV2ResponseBody.encode(e.create_conversation_v2_body,t.uint32(4874).fork()).ldelim(),null!=e.get_conversation_info_list_v2_body&&Object.hasOwnProperty.call(e,"get_conversation_info_list_v2_body")&&u.im_proto.GetConversationInfoListV2ResponseBody.encode(e.get_conversation_info_list_v2_body,t.uint32(4882).fork()).ldelim(),null!=e.get_conversations_checkinfo_body&&Object.hasOwnProperty.call(e,"get_conversations_checkinfo_body")&&u.im_proto.GetConversationsCheckInfoResponseBody.encode(e.get_conversations_checkinfo_body,t.uint32(4922).fork()).ldelim(),null!=e.conversation_add_participants_body&&Object.hasOwnProperty.call(e,"conversation_add_participants_body")&&u.im_proto.ConversationAddParticipantsResponseBody.encode(e.conversation_add_participants_body,t.uint32(5202).fork()).ldelim(),null!=e.mget_conversation_participants_body&&Object.hasOwnProperty.call(e,"mget_conversation_participants_body")&&u.im_proto.MgetConversationParticipantsResponseBody.encode(e.mget_conversation_participants_body,t.uint32(5234).fork()).ldelim(),null!=e.modify_message_property_body&&Object.hasOwnProperty.call(e,"modify_message_property_body")&&u.im_proto.ModifyMessagePropertyResponseBody.encode(e.modify_message_property_body,t.uint32(5642).fork()).ldelim(),null!=e.get_conversation_core_info_body&&Object.hasOwnProperty.call(e,"get_conversation_core_info_body")&&u.im_proto.GetConversationCoreInfoResponseBody.encode(e.get_conversation_core_info_body,t.uint32(7210).fork()).ldelim(),null!=e.set_conversation_setting_info_body&&Object.hasOwnProperty.call(e,"set_conversation_setting_info_body")&&u.im_proto.SetConversationSettingInfoResponseBody.encode(e.set_conversation_setting_info_body,t.uint32(7370).fork()).ldelim(),null!=e.upsert_conversation_setting_ext_info_body&&Object.hasOwnProperty.call(e,"upsert_conversation_setting_ext_info_body")&&u.im_proto.UpsertConversationSettingExtInfoResponseBody.encode(e.upsert_conversation_setting_ext_info_body,t.uint32(7378).fork()).ldelim(),null!=e.get_stranger_conversation_body&&Object.hasOwnProperty.call(e,"get_stranger_conversation_body")&&u.im_proto.GetStrangerConversationListResponseBody.encode(e.get_stranger_conversation_body,t.uint32(8002).fork()).ldelim(),null!=e.get_stranger_messages_body&&Object.hasOwnProperty.call(e,"get_stranger_messages_body")&&u.im_proto.GetStrangerMessagesResponseBody.encode(e.get_stranger_messages_body,t.uint32(8010).fork()).ldelim(),null!=e.participants_read_index_body&&Object.hasOwnProperty.call(e,"participants_read_index_body")&&u.im_proto.GetConversationParticipantsReadIndexV3ResponseBody.encode(e.participants_read_index_body,t.uint32(16002).fork()).ldelim(),null!=e.participants_min_index_body&&Object.hasOwnProperty.call(e,"participants_min_index_body")&&u.im_proto.GetConversationParticipantsMinIndexV3ResponseBody.encode(e.participants_min_index_body,t.uint32(16010).fork()).ldelim(),null!=e.get_ticket_body&&Object.hasOwnProperty.call(e,"get_ticket_body")&&u.im_proto.GetTicketResponseBody.encode(e.get_ticket_body,t.uint32(16042).fork()).ldelim(),null!=e.get_conversation_list_body&&Object.hasOwnProperty.call(e,"get_conversation_list_body")&&u.im_proto.GetUserConversationListResponseBody.encode(e.get_conversation_list_body,t.uint32(16050).fork()).ldelim(),null!=e.broadcast_recv_message_body&&Object.hasOwnProperty.call(e,"broadcast_recv_message_body")&&u.im_proto.BroadcastRecvMessageResponseBody.encode(e.broadcast_recv_message_body,t.uint32(16066).fork()).ldelim(),null!=e.get_configs_body&&Object.hasOwnProperty.call(e,"get_configs_body")&&u.im_proto.GetConfigsResponseBody.encode(e.get_configs_body,t.uint32(16138).fork()).ldelim(),null!=e.unread_count_report_body&&Object.hasOwnProperty.call(e,"unread_count_report_body")&&u.im_proto.UnReadCountReportResponseBody.encode(e.unread_count_report_body,t.uint32(16146).fork()).ldelim(),null!=e.batch_get_conversation_participants_readindex&&Object.hasOwnProperty.call(e,"batch_get_conversation_participants_readindex")&&u.im_proto.BatchGetConversationParticipantsReadIndexResponseBody.encode(e.batch_get_conversation_participants_readindex,t.uint32(16306).fork()).ldelim(),null!=e.message_by_init&&Object.hasOwnProperty.call(e,"message_by_init")&&u.im_proto.MessageByInitResponseBody.encode(e.message_by_init,t.uint32(16346).fork()).ldelim(),null!=e.get_user_message&&Object.hasOwnProperty.call(e,"get_user_message")&&u.im_proto.GetUserMessageResponseBody.encode(e.get_user_message,t.uint32(16386).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 100:o.send_message_body=u.im_proto.SendMessageResponseBody.decode(e,e.uint32());break;case 200:o.messages_per_user_body=u.im_proto.MessagesPerUserResponseBody.decode(e,e.uint32());break;case 203:o.messages_per_user_init_v2_body=u.im_proto.MessagesPerUserInitV2ResponseBody.decode(e,e.uint32());break;case 211:o.get_message_by_id_body=u.im_proto.GetMessageByIdResponseBody.decode(e,e.uint32());break;case 301:o.messages_in_conversation_body=u.im_proto.MessagesInConversationResponseBody.decode(e,e.uint32());break;case 302:o.get_messages_checkinfo_in_conversation_body=u.im_proto.GetMessagesCheckInfoInConversationResponseBody.decode(e,e.uint32());break;case 500:o.has_new_message_notify=u.im_proto.NewMessageNotify.decode(e,e.uint32());break;case 504:o.has_new_p2p_message_notify=u.im_proto.NewP2PMessageNotify.decode(e,e.uint32());break;case 615:o.get_conversations_checkinfo_body=u.im_proto.GetConversationsCheckInfoResponseBody.decode(e,e.uint32());break;case 609:o.create_conversation_v2_body=u.im_proto.CreateConversationV2ResponseBody.decode(e,e.uint32());break;case 610:o.get_conversation_info_list_v2_body=u.im_proto.GetConversationInfoListV2ResponseBody.decode(e,e.uint32());break;case 605:o.conversation_participants_body=u.im_proto.ConversationParticipantsListResponseBody.decode(e,e.uint32());break;case 650:o.conversation_add_participants_body=u.im_proto.ConversationAddParticipantsResponseBody.decode(e,e.uint32());break;case 654:o.mget_conversation_participants_body=u.im_proto.MgetConversationParticipantsResponseBody.decode(e,e.uint32());break;case 705:o.modify_message_property_body=u.im_proto.ModifyMessagePropertyResponseBody.decode(e,e.uint32());break;case 901:o.get_conversation_core_info_body=u.im_proto.GetConversationCoreInfoResponseBody.decode(e,e.uint32());break;case 921:o.set_conversation_setting_info_body=u.im_proto.SetConversationSettingInfoResponseBody.decode(e,e.uint32());break;case 922:o.upsert_conversation_setting_ext_info_body=u.im_proto.UpsertConversationSettingExtInfoResponseBody.decode(e,e.uint32());break;case 1e3:o.get_stranger_conversation_body=u.im_proto.GetStrangerConversationListResponseBody.decode(e,e.uint32());break;case 1001:o.get_stranger_messages_body=u.im_proto.GetStrangerMessagesResponseBody.decode(e,e.uint32());break;case 2e3:o.participants_read_index_body=u.im_proto.GetConversationParticipantsReadIndexV3ResponseBody.decode(e,e.uint32());break;case 2001:o.participants_min_index_body=u.im_proto.GetConversationParticipantsMinIndexV3ResponseBody.decode(e,e.uint32());break;case 2038:o.batch_get_conversation_participants_readindex=u.im_proto.BatchGetConversationParticipantsReadIndexResponseBody.decode(e,e.uint32());break;case 2005:o.get_ticket_body=u.im_proto.GetTicketResponseBody.decode(e,e.uint32());break;case 2006:o.get_conversation_list_body=u.im_proto.GetUserConversationListResponseBody.decode(e,e.uint32());break;case 2008:o.broadcast_recv_message_body=u.im_proto.BroadcastRecvMessageResponseBody.decode(e,e.uint32());break;case 2017:o.get_configs_body=u.im_proto.GetConfigsResponseBody.decode(e,e.uint32());break;case 2018:o.unread_count_report_body=u.im_proto.UnReadCountReportResponseBody.decode(e,e.uint32());break;case 2043:o.message_by_init=u.im_proto.MessageByInitResponseBody.decode(e,e.uint32());break;case 2048:o.get_user_message=u.im_proto.GetUserMessageResponseBody.decode(e,e.uint32());break;default:e.skipType(7&r)}}return o},e}(),e.Response=function(){function e(e){if(this.headers={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cmd=0,e.prototype.sequence_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.status_code=0,e.prototype.error_desc="",e.prototype.inbox_type=0,e.prototype.body=null,e.prototype.log_id="",e.prototype.headers=c.emptyObject,e.prototype.start_time_stamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.request_arrived_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_execution_end_time=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.pdes_key="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(8).int32(e.cmd),null!=e.sequence_id&&Object.hasOwnProperty.call(e,"sequence_id")&&t.uint32(16).int64(e.sequence_id),null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.error_desc&&Object.hasOwnProperty.call(e,"error_desc")&&t.uint32(34).string(e.error_desc),null!=e.inbox_type&&Object.hasOwnProperty.call(e,"inbox_type")&&t.uint32(40).int32(e.inbox_type),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&u.im_proto.ResponseBody.encode(e.body,t.uint32(50).fork()).ldelim(),null!=e.log_id&&Object.hasOwnProperty.call(e,"log_id")&&t.uint32(58).string(e.log_id),null!=e.headers&&Object.hasOwnProperty.call(e,"headers"))for(var n=Object.keys(e.headers),o=0;o<n.length;++o)t.uint32(66).fork().uint32(10).string(n[o]).uint32(18).string(e.headers[n[o]]).ldelim();return null!=e.start_time_stamp&&Object.hasOwnProperty.call(e,"start_time_stamp")&&t.uint32(72).int64(e.start_time_stamp),null!=e.request_arrived_time&&Object.hasOwnProperty.call(e,"request_arrived_time")&&t.uint32(80).int64(e.request_arrived_time),null!=e.server_execution_end_time&&Object.hasOwnProperty.call(e,"server_execution_end_time")&&t.uint32(88).int64(e.server_execution_end_time),null!=e.pdes_key&&Object.hasOwnProperty.call(e,"pdes_key")&&t.uint32(882).string(e.pdes_key),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.Response;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.cmd=e.int32();break;case 2:i.sequence_id=e.int64();break;case 3:i.status_code=e.int32();break;case 4:i.error_desc=e.string();break;case 5:i.inbox_type=e.int32();break;case 6:i.body=u.im_proto.ResponseBody.decode(e,e.uint32());break;case 7:i.log_id=e.string();break;case 8:i.headers===c.emptyObject&&(i.headers={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.headers[n]=o;break;case 9:i.start_time_stamp=e.int64();break;case 10:i.request_arrived_time=e.int64();break;case 11:i.server_execution_end_time=e.int64();break;case 110:i.pdes_key=e.string();break;default:e.skipType(7&a)}}return i},e}(),e.BroadcastRecvMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.limit=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.reverse=!1,e.prototype.pull_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(10).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(16).int32(e.conversation_type),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(24).int64(e.conversation_short_id),null!=e.cursor&&Object.hasOwnProperty.call(e,"cursor")&&t.uint32(32).int64(e.cursor),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(40).int64(e.limit),null!=e.reverse&&Object.hasOwnProperty.call(e,"reverse")&&t.uint32(48).bool(e.reverse),null!=e.pull_type&&Object.hasOwnProperty.call(e,"pull_type")&&t.uint32(56).int32(e.pull_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.BroadcastRecvMessageRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_id=e.string();break;case 2:o.conversation_type=e.int32();break;case 3:o.conversation_short_id=e.int64();break;case 4:o.cursor=e.int64();break;case 5:o.limit=e.int64();break;case 6:o.reverse=e.bool();break;case 7:o.pull_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.BroadcastRecvMessageResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();return null!=e.has_more&&Object.hasOwnProperty.call(e,"has_more")&&t.uint32(16).bool(e.has_more),null!=e.next_cursor&&Object.hasOwnProperty.call(e,"next_cursor")&&t.uint32(24).int64(e.next_cursor),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.BroadcastRecvMessageResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:o.has_more=e.bool();break;case 3:o.next_cursor=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.NetworkType=function(){let e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="WIFI"]=1,t[e[2]="MOBILE_2G"]=2,t[e[3]="MOBILE_3G"]=3,t[e[4]="MOBILE_4G"]=4,t[e[5]="MOBILE_5G"]=5,t}(),e.MsgReportType=function(){let e={},t=Object.create(e);return t[e[0]="NOT_USE"]=0,t[e[1]="MSG_RECEIVE_BY_WS"]=1,t[e[2]="MSG_RECEIVE_BY_USER"]=2,t[e[3]="MSG_RECEIVE_BY_INIT"]=3,t[e[4]="MSG_RECEIVE_BY_LOAD_HISTORY"]=4,t[e[5]="MSG_RECEIVE_BY_LOAD_NEWER"]=5,t[e[6]="MSG_RECEIVE_BY_CHECK_MSG_V1"]=6,t[e[7]="MSG_RECEIVE_BY_CHECK_MSG_V2"]=7,t[e[8]="MSG_RECEIVE_BY_STRANGER"]=8,t[e[9]="MSG_SHOW"]=9,t}(),e.ClientACKRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.start_time_stamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cmd=0,e.prototype.network_type=0,e.prototype.logid="",e.prototype.client_time_stamp=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t.uint32(8).int64(e.start_time_stamp),t.uint32(16).int32(e.cmd),null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(24).int32(e.network_type),null!=e.logid&&Object.hasOwnProperty.call(e,"logid")&&t.uint32(34).string(e.logid),null!=e.client_time_stamp&&Object.hasOwnProperty.call(e,"client_time_stamp")&&t.uint32(40).int64(e.client_time_stamp),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(48).int64(e.server_message_id),t.uint32(56).int32(e.type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ClientACKRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.start_time_stamp=e.int64();break;case 2:o.cmd=e.int32();break;case 3:o.network_type=e.int32();break;case 4:o.logid=e.string();break;case 5:o.client_time_stamp=e.int64();break;case 6:o.server_message_id=e.int64();break;case 7:o.type=e.int32();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("start_time_stamp"))throw c.ProtocolError("missing required 'start_time_stamp'",{instance:o});if(!o.hasOwnProperty("cmd"))throw c.ProtocolError("missing required 'cmd'",{instance:o});if(!o.hasOwnProperty("type"))throw c.ProtocolError("missing required 'type'",{instance:o});return o},e}(),e.ClientBatchACKRequestBody=function(){function e(e){if(this.ack_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ack_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.ack_list&&e.ack_list.length)for(var n=0;n<e.ack_list.length;++n)u.im_proto.ClientACKRequestBody.encode(e.ack_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ClientBatchACKRequestBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.ack_list&&o.ack_list.length)&&(o.ack_list=[]),o.ack_list.push(u.im_proto.ClientACKRequestBody.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.VoipMode=function(){let e={},t=Object.create(e);return t[e[0]="VOIP_MODE_DOUBLE"]=0,t[e[1]="VOIP_MODE_MULTIPLAYER"]=1,t}(),e.VoipStatusCode=function(){let e={},t=Object.create(e);return t[e[0]="SUCCESS"]=0,t[e[4]="VOIP_PARAMS_ERROR"]=4,t[e[18]="VOIP_STATUS_ERROR"]=18,t[e[19]="VOIP_CANCEL_ERROR"]=19,t[e[20]="VOIP_OTHER_RESPONSE_ERROR"]=20,t[e[21]="VOIP_CALLBACK_ERROR"]=21,t}(),e.VoipStatus=function(){let e={},t=Object.create(e);return t[e[0]="IDLE"]=0,t[e[1]="CALLING"]=1,t[e[2]="RINGING"]=2,t[e[3]="ACCEPTED"]=3,t[e[4]="ONTHECALL"]=4,t[e[101]="TERMINATED"]=101,t[e[102]="OCCUPIED"]=102,t[e[103]="REFUSED"]=103,t[e[104]="CANCELLED"]=104,t[e[105]="UNAVAILABLE"]=105,t[e[106]="RTCERROR"]=106,t[e[107]="RTC_ENGINE_MISMATCH"]=107,t}(),e.VoipType=function(){let e={},t=Object.create(e);return t[e[0]="VOIP_TYPE_NOT_USED"]=0,t[e[1]="VOIP_TYPE_ALL"]=1,t[e[2]="VOIP_TYPE_VIDEOONLY"]=2,t[e[3]="VOIP_TYPE_AUDIOONLY"]=3,t}(),e.ChannelStatus=function(){let e={},t=Object.create(e);return t[e[0]="CHANNEL_STATUS_NOT_USED"]=0,t[e[1]="ONLINE"]=1,t[e[2]="OFFLINE"]=2,t}(),e.ClientMetricType=function(){let e={},t=Object.create(e);return t[e[0]="COUNTER"]=0,t[e[1]="TIMER"]=1,t}(),e.GetConfigsRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConfigsRequestBody;e.pos<n;){var r=e.uint32();e.skipType(7&r)}return o},e}(),e.GetConfigsResponseBody=function(){function e(e){if(this.configs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.configs=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int32(e.version),null!=e.configs&&e.configs.length)for(var n=0;n<e.configs.length;++n)u.im_proto.Config.encode(e.configs[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConfigsResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.version=e.int32();break;case 2:!(o.configs&&o.configs.length)&&(o.configs=[]),o.configs.push(u.im_proto.Config.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.Config=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conf_name="",e.prototype.conf_value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conf_name&&Object.hasOwnProperty.call(e,"conf_name")&&t.uint32(10).string(e.conf_name),null!=e.conf_value&&Object.hasOwnProperty.call(e,"conf_value")&&t.uint32(18).string(e.conf_value),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.Config;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conf_name=e.string();break;case 2:o.conf_value=e.string();break;default:e.skipType(7&r)}}return o},e}(),e.ConvCountReport=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conv_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_type=1,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conv_short_id&&Object.hasOwnProperty.call(e,"conv_short_id")&&t.uint32(8).int64(e.conv_short_id),null!=e.unread_count&&Object.hasOwnProperty.call(e,"unread_count")&&t.uint32(16).int64(e.unread_count),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConvCountReport;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conv_short_id=e.int64();break;case 2:o.unread_count=e.int64();break;case 3:o.conversation_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.UnReadCountReportRequestBody=function(){function e(e){if(this.conv_unread_count=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.total_unread_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conv_unread_count=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.total_unread_count&&Object.hasOwnProperty.call(e,"total_unread_count")&&t.uint32(8).int64(e.total_unread_count),null!=e.conv_unread_count&&e.conv_unread_count.length)for(var n=0;n<e.conv_unread_count.length;++n)u.im_proto.ConvCountReport.encode(e.conv_unread_count[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.UnReadCountReportRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.total_unread_count=e.int64();break;case 2:!(o.conv_unread_count&&o.conv_unread_count.length)&&(o.conv_unread_count=[]),o.conv_unread_count.push(u.im_proto.ConvCountReport.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.UnReadCountReportResponseBody=function(){function e(e){if(this.failed_conv_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.set_total_status=!1,e.prototype.failed_conv_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).bool(e.set_total_status),null!=e.failed_conv_list&&e.failed_conv_list.length)for(var n=0;n<e.failed_conv_list.length;++n)t.uint32(16).int64(e.failed_conv_list[n]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.UnReadCountReportResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.set_total_status=e.bool();break;case 2:if(!(o.failed_conv_list&&o.failed_conv_list.length)&&(o.failed_conv_list=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.failed_conv_list.push(e.int64())}else o.failed_conv_list.push(e.int64());break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("set_total_status"))throw c.ProtocolError("missing required 'set_total_status'",{instance:o});return o},e}(),e.BlockStatus=function(){let e={},t=Object.create(e);return t[e[0]="UNBLOCK"]=0,t[e[1]="BLOCK"]=1,t}(),e.GetMessagesCheckInfoInConversationRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_id="",e.prototype.conversation_type=0,e.prototype.cursor_reverse_begin=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cursor_reverse_end=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.expect_msg_total_count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(16).int64(e.conversation_short_id),null!=e.cursor_reverse_begin&&Object.hasOwnProperty.call(e,"cursor_reverse_begin")&&t.uint32(24).int64(e.cursor_reverse_begin),null!=e.expect_msg_total_count&&Object.hasOwnProperty.call(e,"expect_msg_total_count")&&t.uint32(32).int32(e.expect_msg_total_count),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(42).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(48).int32(e.conversation_type),null!=e.cursor_reverse_end&&Object.hasOwnProperty.call(e,"cursor_reverse_end")&&t.uint32(56).int64(e.cursor_reverse_end),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetMessagesCheckInfoInConversationRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 2:o.conversation_short_id=e.int64();break;case 5:o.conversation_id=e.string();break;case 6:o.conversation_type=e.int32();break;case 3:o.cursor_reverse_begin=e.int64();break;case 7:o.cursor_reverse_end=e.int64();break;case 4:o.expect_msg_total_count=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.MessagesCheckInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.head_msg_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tail_msg_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.msg_count=0,e.prototype.indexes_checksum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.head_msg_index&&Object.hasOwnProperty.call(e,"head_msg_index")&&t.uint32(8).int64(e.head_msg_index),null!=e.tail_msg_index&&Object.hasOwnProperty.call(e,"tail_msg_index")&&t.uint32(16).int64(e.tail_msg_index),null!=e.msg_count&&Object.hasOwnProperty.call(e,"msg_count")&&t.uint32(24).int32(e.msg_count),null!=e.indexes_checksum&&Object.hasOwnProperty.call(e,"indexes_checksum")&&t.uint32(32).uint32(e.indexes_checksum),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessagesCheckInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.head_msg_index=e.int64();break;case 2:o.tail_msg_index=e.int64();break;case 3:o.msg_count=e.int32();break;case 4:o.indexes_checksum=e.uint32();break;default:e.skipType(7&r)}}return o},e}(),e.GetMessagesCheckInfoInConversationResponseBody=function(){function e(e){if(this.msgs_checkinfo_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.msgs_checkinfo_list=c.emptyArray,e.prototype.real_msg_total_count=0,e.prototype.cursor_reverse_next=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.msgs_checkinfo_list&&e.msgs_checkinfo_list.length)for(var n=0;n<e.msgs_checkinfo_list.length;++n)u.im_proto.MessagesCheckInfo.encode(e.msgs_checkinfo_list[n],t.uint32(10).fork()).ldelim();return null!=e.real_msg_total_count&&Object.hasOwnProperty.call(e,"real_msg_total_count")&&t.uint32(16).int32(e.real_msg_total_count),null!=e.cursor_reverse_next&&Object.hasOwnProperty.call(e,"cursor_reverse_next")&&t.uint32(32).int64(e.cursor_reverse_next),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetMessagesCheckInfoInConversationResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.msgs_checkinfo_list&&o.msgs_checkinfo_list.length)&&(o.msgs_checkinfo_list=[]),o.msgs_checkinfo_list.push(u.im_proto.MessagesCheckInfo.decode(e,e.uint32()));break;case 2:o.real_msg_total_count=e.int32();break;case 4:o.cursor_reverse_next=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationCheckInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.conversation_id="",e.prototype.conversation_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.conversation_short_id&&Object.hasOwnProperty.call(e,"conversation_short_id")&&t.uint32(8).int64(e.conversation_short_id),null!=e.conversation_id&&Object.hasOwnProperty.call(e,"conversation_id")&&t.uint32(18).string(e.conversation_id),null!=e.conversation_type&&Object.hasOwnProperty.call(e,"conversation_type")&&t.uint32(24).int32(e.conversation_type),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationCheckInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_short_id=e.int64();break;case 2:o.conversation_id=e.string();break;case 3:o.conversation_type=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.GetConversationsCheckInfoResponseBody=function(){function e(e){if(this.conversation_checkinfo_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_checkinfo_list=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.conversation_checkinfo_list&&e.conversation_checkinfo_list.length)for(var n=0;n<e.conversation_checkinfo_list.length;++n)u.im_proto.ConversationCheckInfo.encode(e.conversation_checkinfo_list[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetConversationsCheckInfoResponseBody;e.pos<n;){var r=e.uint32();if(r>>>3==1)!(o.conversation_checkinfo_list&&o.conversation_checkinfo_list.length)&&(o.conversation_checkinfo_list=[]),o.conversation_checkinfo_list.push(u.im_proto.ConversationCheckInfo.decode(e,e.uint32()));else e.skipType(7&r)}return o},e}(),e.ActionType=function(){let e={},t=Object.create(e);return t[e[0]="UNKNOWN_ACTION"]=0,t[e[1]="FAVORITE"]=1,t[e[2]="PIN"]=2,t[e[3]="UNREAD"]=3,t[e[4]="CONV_TOP_MSG"]=4,t}(),e.MessageByInitRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.page=0,e.prototype.conv_limit=0,e.prototype.msg_limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int64(e.version),null!=e.page&&Object.hasOwnProperty.call(e,"page")&&t.uint32(16).int32(e.page),null!=e.conv_limit&&Object.hasOwnProperty.call(e,"conv_limit")&&t.uint32(24).int32(e.conv_limit),null!=e.msg_limit&&Object.hasOwnProperty.call(e,"msg_limit")&&t.uint32(32).int32(e.msg_limit),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessageByInitRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.version=e.int64();break;case 2:o.page=e.int32();break;case 3:o.conv_limit=e.int32();break;case 4:o.msg_limit=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.MessageByInitResponseBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_init_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.user_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cmd_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.readconv_version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.ConversationMessage.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t.uint32(16).bool(e.has_more),t.uint32(24).int64(e.next_init_version),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(32).int64(e.version),null!=e.user_cursor&&Object.hasOwnProperty.call(e,"user_cursor")&&t.uint32(40).int64(e.user_cursor),null!=e.cmd_index&&Object.hasOwnProperty.call(e,"cmd_index")&&t.uint32(48).int64(e.cmd_index),null!=e.readconv_version&&Object.hasOwnProperty.call(e,"readconv_version")&&t.uint32(56).int64(e.readconv_version),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.MessageByInitResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.ConversationMessage.decode(e,e.uint32()));break;case 2:o.has_more=e.bool();break;case 3:o.next_init_version=e.int64();break;case 4:o.version=e.int64();break;case 5:o.user_cursor=e.int64();break;case 6:o.cmd_index=e.int64();break;case 7:o.readconv_version=e.int64();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("has_more"))throw c.ProtocolError("missing required 'has_more'",{instance:o});if(!o.hasOwnProperty("next_init_version"))throw c.ProtocolError("missing required 'next_init_version'",{instance:o});return o},e}(),e.ConversationMessage=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversations=null,e.prototype.messages=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),u.im_proto.ConversationInfoV2.encode(e.conversations,t.uint32(10).fork()).ldelim(),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationMessage;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversations=u.im_proto.ConversationInfoV2.decode(e,e.uint32());break;case 2:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("conversations"))throw c.ProtocolError("missing required 'conversations'",{instance:o});return o},e}(),e.MessageStatus=function(){let e={},t=Object.create(e);return t[e[0]="AVAILABLE"]=0,t[e[1]="NOT_EXIST"]=1,t[e[2]="INVISIBLE"]=2,t[e[3]="RECALLED"]=3,t[e[4]="DELETED"]=4,t}(),e.BatchUnmarkMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.server_message_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_code=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.check_message="",e.prototype.status=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.server_message_id&&Object.hasOwnProperty.call(e,"server_message_id")&&t.uint32(8).int64(e.server_message_id),null!=e.check_code&&Object.hasOwnProperty.call(e,"check_code")&&t.uint32(16).int64(e.check_code),null!=e.check_message&&Object.hasOwnProperty.call(e,"check_message")&&t.uint32(26).string(e.check_message),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(32).int32(e.status),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.BatchUnmarkMessageResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.server_message_id=e.int64();break;case 2:o.check_code=e.int64();break;case 3:o.check_message=e.string();break;case 4:o.status=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.TagMetaInfo=function(){function e(e){if(this.ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tag_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tag_name="",e.prototype.status=0,e.prototype.ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.tag_id),t.uint32(18).string(e.tag_name),t.uint32(24).int32(e.status),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(34).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.TagMetaInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.tag_id=e.int64();break;case 2:i.tag_name=e.string();break;case 3:i.status=e.int32();break;case 4:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;default:e.skipType(7&a)}}if(!i.hasOwnProperty("tag_id"))throw c.ProtocolError("missing required 'tag_id'",{instance:i});if(!i.hasOwnProperty("tag_name"))throw c.ProtocolError("missing required 'tag_name'",{instance:i});if(!i.hasOwnProperty("status"))throw c.ProtocolError("missing required 'status'",{instance:i});return i},e}(),e.SetConversationTagResponseBody=function(){function e(e){if(this.failed_conv_short_ids=[],this.settings=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.failed_conv_short_ids=c.emptyArray,e.prototype.settings=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.failed_conv_short_ids&&e.failed_conv_short_ids.length)for(var n=0;n<e.failed_conv_short_ids.length;++n)t.uint32(8).int64(e.failed_conv_short_ids[n]);if(null!=e.settings&&e.settings.length)for(var n=0;n<e.settings.length;++n)u.im_proto.ConversationSettingInfo.encode(e.settings[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.SetConversationTagResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:if(!(o.failed_conv_short_ids&&o.failed_conv_short_ids.length)&&(o.failed_conv_short_ids=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.failed_conv_short_ids.push(e.int64())}else o.failed_conv_short_ids.push(e.int64());break;case 2:!(o.settings&&o.settings.length)&&(o.settings=[]),o.settings.push(u.im_proto.ConversationSettingInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return o},e}(),e.GetUserMessageRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.cmd_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.stranger_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.source="",e.prototype.consult_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.notify_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.get_recent_conv_and_msg=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int64(e.version),null!=e.cmd_index&&Object.hasOwnProperty.call(e,"cmd_index")&&t.uint32(16).int64(e.cmd_index),null!=e.stranger_version&&Object.hasOwnProperty.call(e,"stranger_version")&&t.uint32(24).int64(e.stranger_version),null!=e.read_version&&Object.hasOwnProperty.call(e,"read_version")&&t.uint32(32).int64(e.read_version),null!=e.source&&Object.hasOwnProperty.call(e,"source")&&t.uint32(42).string(e.source),null!=e.consult_version&&Object.hasOwnProperty.call(e,"consult_version")&&t.uint32(48).int64(e.consult_version),null!=e.notify_version&&Object.hasOwnProperty.call(e,"notify_version")&&t.uint32(136).int64(e.notify_version),null!=e.get_recent_conv_and_msg&&Object.hasOwnProperty.call(e,"get_recent_conv_and_msg")&&u.im_proto.GetRecentConvAndMsgRequestBody.encode(e.get_recent_conv_and_msg,t.uint32(146).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetUserMessageRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.version=e.int64();break;case 2:o.cmd_index=e.int64();break;case 3:o.stranger_version=e.int64();break;case 4:o.read_version=e.int64();break;case 5:o.source=e.string();break;case 6:o.consult_version=e.int64();break;case 17:o.notify_version=e.int64();break;case 18:o.get_recent_conv_and_msg=u.im_proto.GetRecentConvAndMsgRequestBody.decode(e,e.uint32());break;default:e.skipType(7&r)}}return o},e}(),e.GetRecentConvAndMsgRequestBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.left_side=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.right_side=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.direction=1,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.left_side&&Object.hasOwnProperty.call(e,"left_side")&&t.uint32(8).int64(e.left_side),null!=e.right_side&&Object.hasOwnProperty.call(e,"right_side")&&t.uint32(16).int64(e.right_side),null!=e.direction&&Object.hasOwnProperty.call(e,"direction")&&t.uint32(24).int32(e.direction),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetRecentConvAndMsgRequestBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.left_side=e.int64();break;case 2:o.right_side=e.int64();break;case 3:o.direction=e.int32();break;default:e.skipType(7&r)}}return o},e}(),e.GetUserMessageResponseBody=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=null,e.prototype.cmd_messages=null,e.prototype.has_stranger_message=!1,e.prototype.read_info=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.messages&&Object.hasOwnProperty.call(e,"messages")&&u.im_proto.GetRecentMessageRespBody.encode(e.messages,t.uint32(10).fork()).ldelim(),null!=e.cmd_messages&&Object.hasOwnProperty.call(e,"cmd_messages")&&u.im_proto.GetCmdMessageRespBody.encode(e.cmd_messages,t.uint32(18).fork()).ldelim(),null!=e.has_stranger_message&&Object.hasOwnProperty.call(e,"has_stranger_message")&&t.uint32(24).bool(e.has_stranger_message),null!=e.read_info&&Object.hasOwnProperty.call(e,"read_info")&&u.im_proto.ConversationReadInfoRespBody.encode(e.read_info,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetUserMessageResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.messages=u.im_proto.GetRecentMessageRespBody.decode(e,e.uint32());break;case 2:o.cmd_messages=u.im_proto.GetCmdMessageRespBody.decode(e,e.uint32());break;case 3:o.has_stranger_message=e.bool();break;case 4:o.read_info=u.im_proto.ConversationReadInfoRespBody.decode(e,e.uint32());break;default:e.skipType(7&r)}}return o},e}(),e.GetRecentMessageRespBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.next_conversation_version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.range=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.next_conversation_version),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.ConversationRecentMessage.encode(e.messages[n],t.uint32(18).fork()).ldelim();return t.uint32(24).bool(e.has_more),null!=e.range&&Object.hasOwnProperty.call(e,"range")&&u.im_proto.GetRecentMsgVersionRange.encode(e.range,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetRecentMessageRespBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.next_conversation_version=e.int64();break;case 2:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.ConversationRecentMessage.decode(e,e.uint32()));break;case 3:o.has_more=e.bool();break;case 4:o.range=u.im_proto.GetRecentMsgVersionRange.decode(e,e.uint32());break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("next_conversation_version"))throw c.ProtocolError("missing required 'next_conversation_version'",{instance:o});if(!o.hasOwnProperty("has_more"))throw c.ProtocolError("missing required 'has_more'",{instance:o});return o},e}(),e.GetCmdMessageRespBody=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_cmd_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.next_user_message_cursor=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.readconv_version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t.uint32(16).bool(e.has_more),null!=e.next_cmd_index&&Object.hasOwnProperty.call(e,"next_cmd_index")&&t.uint32(24).int64(e.next_cmd_index),null!=e.next_user_message_cursor&&Object.hasOwnProperty.call(e,"next_user_message_cursor")&&t.uint32(32).int64(e.next_user_message_cursor),null!=e.readconv_version&&Object.hasOwnProperty.call(e,"readconv_version")&&t.uint32(40).int64(e.readconv_version),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetCmdMessageRespBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 2:o.has_more=e.bool();break;case 3:o.next_cmd_index=e.int64();break;case 4:o.next_user_message_cursor=e.int64();break;case 5:o.readconv_version=e.int64();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("has_more"))throw c.ProtocolError("missing required 'has_more'",{instance:o});return o},e}(),e.ConversationReadInfoRespBody=function(){function e(e){if(this.read_info=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.read_info=c.emptyArray,e.prototype.has_more=!1,e.prototype.next_version=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.read_info&&e.read_info.length)for(var n=0;n<e.read_info.length;++n)u.im_proto.ConversationReadInfo.encode(e.read_info[n],t.uint32(10).fork()).ldelim();return t.uint32(16).bool(e.has_more),t.uint32(24).int64(e.next_version),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationReadInfoRespBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.read_info&&o.read_info.length)&&(o.read_info=[]),o.read_info.push(u.im_proto.ConversationReadInfo.decode(e,e.uint32()));break;case 2:o.has_more=e.bool();break;case 3:o.next_version=e.int64();break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("has_more"))throw c.ProtocolError("missing required 'has_more'",{instance:o});if(!o.hasOwnProperty("next_version"))throw c.ProtocolError("missing required 'next_version'",{instance:o});return o},e}(),e.ConversationRecentMessage=function(){function e(e){if(this.messages=[],this.ext_messages=[],this.mute_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversation_short_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.messages=c.emptyArray,e.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.badge_count=0,e.prototype.conversation_id="",e.prototype.ext_messages=c.emptyArray,e.prototype.mute_badge_count_infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.conversation_short_id),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)u.im_proto.MessageBody.encode(e.messages[n],t.uint32(18).fork()).ldelim();if(t.uint32(24).int64(e.version),null!=e.badge_count&&Object.hasOwnProperty.call(e,"badge_count")&&t.uint32(32).int32(e.badge_count),t.uint32(42).string(e.conversation_id),null!=e.ext_messages&&e.ext_messages.length)for(var n=0;n<e.ext_messages.length;++n)u.im_proto.MessageBody.encode(e.ext_messages[n],t.uint32(50).fork()).ldelim();if(null!=e.mute_badge_count_infos&&e.mute_badge_count_infos.length)for(var n=0;n<e.mute_badge_count_infos.length;++n)u.im_proto.MuteBadgeCountInfo.encode(e.mute_badge_count_infos[n],t.uint32(74).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationRecentMessage;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.conversation_short_id=e.int64();break;case 2:!(o.messages&&o.messages.length)&&(o.messages=[]),o.messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 3:o.version=e.int64();break;case 4:o.badge_count=e.int32();break;case 5:o.conversation_id=e.string();break;case 6:!(o.ext_messages&&o.ext_messages.length)&&(o.ext_messages=[]),o.ext_messages.push(u.im_proto.MessageBody.decode(e,e.uint32()));break;case 9:!(o.mute_badge_count_infos&&o.mute_badge_count_infos.length)&&(o.mute_badge_count_infos=[]),o.mute_badge_count_infos.push(u.im_proto.MuteBadgeCountInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("conversation_short_id"))throw c.ProtocolError("missing required 'conversation_short_id'",{instance:o});if(!o.hasOwnProperty("version"))throw c.ProtocolError("missing required 'version'",{instance:o});if(!o.hasOwnProperty("conversation_id"))throw c.ProtocolError("missing required 'conversation_id'",{instance:o});return o},e}(),e.GetRecentMsgVersionRange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.left_side=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.right_side=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return!t&&(t=a.create()),null!=e.left_side&&Object.hasOwnProperty.call(e,"left_side")&&t.uint32(8).int64(e.left_side),null!=e.right_side&&Object.hasOwnProperty.call(e,"right_side")&&t.uint32(16).int64(e.right_side),t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.GetRecentMsgVersionRange;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.left_side=e.int64();break;case 2:o.right_side=e.int64();break;default:e.skipType(7&r)}}return o},e}(),e.ConversationReadInfo=function(){function e(e){if(this.mute_read_badge_count_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.read_index=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_badge_count=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.read_index_v2=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ConversationShortId=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.ConversationId="",e.prototype.mute_read_badge_count_infos=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.read_index),t.uint32(16).int64(e.read_badge_count),t.uint32(24).int64(e.read_index_v2),t.uint32(32).int64(e.ConversationShortId),null!=e.ConversationId&&Object.hasOwnProperty.call(e,"ConversationId")&&t.uint32(42).string(e.ConversationId),null!=e.mute_read_badge_count_infos&&e.mute_read_badge_count_infos.length)for(var n=0;n<e.mute_read_badge_count_infos.length;++n)u.im_proto.MuteReadBadgeCountInfo.encode(e.mute_read_badge_count_infos[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ConversationReadInfo;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.read_index=e.int64();break;case 2:o.read_badge_count=e.int64();break;case 3:o.read_index_v2=e.int64();break;case 4:o.ConversationShortId=e.int64();break;case 5:o.ConversationId=e.string();break;case 6:!(o.mute_read_badge_count_infos&&o.mute_read_badge_count_infos.length)&&(o.mute_read_badge_count_infos=[]),o.mute_read_badge_count_infos.push(u.im_proto.MuteReadBadgeCountInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("read_index"))throw c.ProtocolError("missing required 'read_index'",{instance:o});if(!o.hasOwnProperty("read_badge_count"))throw c.ProtocolError("missing required 'read_badge_count'",{instance:o});if(!o.hasOwnProperty("read_index_v2"))throw c.ProtocolError("missing required 'read_index_v2'",{instance:o});if(!o.hasOwnProperty("ConversationShortId"))throw c.ProtocolError("missing required 'ConversationShortId'",{instance:o});return o},e}(),e.AddUserCustomTagMetaInfo=function(){function e(e){if(this.ext={},this.init_conv_short_ids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tag_name="",e.prototype.ext=c.emptyObject,e.prototype.init_conv_short_ids=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(10).string(e.tag_name),null!=e.ext&&Object.hasOwnProperty.call(e,"ext"))for(var n=Object.keys(e.ext),o=0;o<n.length;++o)t.uint32(18).fork().uint32(10).string(n[o]).uint32(18).string(e.ext[n[o]]).ldelim();if(null!=e.init_conv_short_ids&&e.init_conv_short_ids.length)for(var o=0;o<e.init_conv_short_ids.length;++o)t.uint32(24).int64(e.init_conv_short_ids[o]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.AddUserCustomTagMetaInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.tag_name=e.string();break;case 2:i.ext===c.emptyObject&&(i.ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.ext[n]=o;break;case 3:if(!(i.init_conv_short_ids&&i.init_conv_short_ids.length)&&(i.init_conv_short_ids=[]),(7&a)==2){for(var d=e.uint32()+e.pos;e.pos<d;)i.init_conv_short_ids.push(e.int64())}else i.init_conv_short_ids.push(e.int64());break;default:e.skipType(7&a)}}if(!i.hasOwnProperty("tag_name"))throw c.ProtocolError("missing required 'tag_name'",{instance:i});return i},e}(),e.AddUserCustomTagMetaInfoResult=function(){function e(e){if(this.failed_conversation_ids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tag_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.failed_conversation_ids=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.tag_id),null!=e.failed_conversation_ids&&e.failed_conversation_ids.length)for(var n=0;n<e.failed_conversation_ids.length;++n)t.uint32(16).int64(e.failed_conversation_ids[n]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.AddUserCustomTagMetaInfoResult;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:o.tag_id=e.int64();break;case 2:if(!(o.failed_conversation_ids&&o.failed_conversation_ids.length)&&(o.failed_conversation_ids=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.failed_conversation_ids.push(e.int64())}else o.failed_conversation_ids.push(e.int64());break;default:e.skipType(7&r)}}if(!o.hasOwnProperty("tag_id"))throw c.ProtocolError("missing required 'tag_id'",{instance:o});return o},e}(),e.UpdateUserCustomTagMetaInfo=function(){function e(e){if(this.upsert_ext={},this.delete_ext={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tag_id=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.tag_name="",e.prototype.upsert_ext=c.emptyObject,e.prototype.delete_ext=c.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),t.uint32(8).int64(e.tag_id),null!=e.tag_name&&Object.hasOwnProperty.call(e,"tag_name")&&t.uint32(18).string(e.tag_name),null!=e.upsert_ext&&Object.hasOwnProperty.call(e,"upsert_ext"))for(var n=Object.keys(e.upsert_ext),o=0;o<n.length;++o)t.uint32(26).fork().uint32(10).string(n[o]).uint32(18).string(e.upsert_ext[n[o]]).ldelim();if(null!=e.delete_ext&&Object.hasOwnProperty.call(e,"delete_ext"))for(var n=Object.keys(e.delete_ext),o=0;o<n.length;++o)t.uint32(34).fork().uint32(10).string(n[o]).uint32(18).string(e.delete_ext[n[o]]).ldelim();return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n,o,r=void 0===t?e.len:e.pos+t,i=new u.im_proto.UpdateUserCustomTagMetaInfo;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:i.tag_id=e.int64();break;case 2:i.tag_name=e.string();break;case 3:i.upsert_ext===c.emptyObject&&(i.upsert_ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.upsert_ext[n]=o;break;case 4:i.delete_ext===c.emptyObject&&(i.delete_ext={});var d=e.uint32()+e.pos;for(n="",o="";e.pos<d;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.delete_ext[n]=o;break;default:e.skipType(7&a)}}if(!i.hasOwnProperty("tag_id"))throw c.ProtocolError("missing required 'tag_id'",{instance:i});return i},e}(),e.ManageTagMetaInfoResponseBody=function(){function e(e){if(this.add_results=[],this.delete_failed_tag_ids=[],this.update_failed_tag_ids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.add_results=c.emptyArray,e.prototype.delete_failed_tag_ids=c.emptyArray,e.prototype.update_failed_tag_ids=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(!t&&(t=a.create()),null!=e.add_results&&e.add_results.length)for(var n=0;n<e.add_results.length;++n)u.im_proto.AddUserCustomTagMetaInfoResult.encode(e.add_results[n],t.uint32(10).fork()).ldelim();if(null!=e.delete_failed_tag_ids&&e.delete_failed_tag_ids.length)for(var n=0;n<e.delete_failed_tag_ids.length;++n)t.uint32(16).int64(e.delete_failed_tag_ids[n]);if(null!=e.update_failed_tag_ids&&e.update_failed_tag_ids.length)for(var n=0;n<e.update_failed_tag_ids.length;++n)t.uint32(24).int64(e.update_failed_tag_ids[n]);return t},e.decode=function(e,t){!(e instanceof s)&&(e=s.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new u.im_proto.ManageTagMetaInfoResponseBody;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:!(o.add_results&&o.add_results.length)&&(o.add_results=[]),o.add_results.push(u.im_proto.AddUserCustomTagMetaInfoResult.decode(e,e.uint32()));break;case 2:if(!(o.delete_failed_tag_ids&&o.delete_failed_tag_ids.length)&&(o.delete_failed_tag_ids=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.delete_failed_tag_ids.push(e.int64())}else o.delete_failed_tag_ids.push(e.int64());break;case 3:if(!(o.update_failed_tag_ids&&o.update_failed_tag_ids.length)&&(o.update_failed_tag_ids=[]),(7&r)==2){for(var i=e.uint32()+e.pos;e.pos<i;)o.update_failed_tag_ids.push(e.int64())}else o.update_failed_tag_ids.push(e.int64());break;default:e.skipType(7&r)}}return o},e}(),e})()},261582:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var o=n(101380);n(193533);var r=n(592242),i=n(835649);n(358115),n(689845);var s=n(84105);class a extends s.v{constructor(){super(...arguments),this.name="SharkPlugin",this.enabled=!0}install(){this.register(i.Uk.SharkPlugin,this);try{(void 0===this.ctx.option.sharkAppName||void 0===this.ctx.option.sharkPriorityRegion)&&(r.Y.ctxWarn(this.ctx,"shark required field not provided, ignore shark params"),this.enabled=!1),"undefined"==typeof navigator&&r.Y.ctxWarn(this.ctx,"window.navigator not available, may missing param"),"undefined"==typeof screen&&r.Y.ctxWarn(this.ctx,"window.screen not available, may missing param"),"undefined"==typeof document&&r.Y.ctxWarn(this.ctx,"window.document not available, may missing param"),("undefined"==typeof Intl||!("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat&&"function"==typeof Intl.DateTimeFormat().resolvedOptions))&&r.Y.ctxWarn(this.ctx,"window.Intl not available, may missing param")}catch(e){r.Y.ctxError(this.ctx,"shark init error:",e),this.enabled=!1}}sendPacket(e){return(0,o.mG)(this,void 0,void 0,function*(){return this.enabled&&this.fillSharkParam(e),e})}fillSharkParam(e){var t,n,o,i,s,a,c,u,d,l,_,p,v,f,h,y,g;let m={};try{m.session_aid=null!==(t=this.ctx.option.appId.toString())&&void 0!==t?t:"",m.session_did=null!==(n=this.ctx.option.deviceId.toString())&&void 0!==n?n:"",m.app_name=this.ctx.option.sharkAppName,m.priority_region=this.ctx.option.sharkPriorityRegion,"undefined"!=typeof navigator&&(m.user_agent=null!==(o=navigator.userAgent)&&void 0!==o?o:"",m.cookie_enabled=null!==(s=null===(i=navigator.cookieEnabled)||void 0===i?void 0:i.toString())&&void 0!==s?s:"",m.browser_language=null!==(a=navigator.language)&&void 0!==a?a:"",m.browser_platform=null!==(c=navigator.platform)&&void 0!==c?c:"",m.browser_name=null!==(u=navigator.appCodeName)&&void 0!==u?u:"",m.browser_version=null!==(d=navigator.appVersion)&&void 0!==d?d:"",m.browser_online=null!==(_=null===(l=navigator.onLine)||void 0===l?void 0:l.toString())&&void 0!==_?_:""),"undefined"!=typeof screen&&(m.screen_width=null!==(v=null===(p=screen.width)||void 0===p?void 0:p.toString())&&void 0!==v?v:"",m.screen_height=null!==(h=null===(f=screen.height)||void 0===f?void 0:f.toString())&&void 0!==h?h:""),"undefined"!=typeof document&&(m.referer=null!==(y=document.referrer)&&void 0!==y?y:""),"undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat&&"function"==typeof Intl.DateTimeFormat().resolvedOptions&&(m.timezone_name=null!==(g=Intl.DateTimeFormat().resolvedOptions().timeZone)&&void 0!==g?g:"")}catch(e){r.Y.ctxWarn(this.ctx,"load shark param error, may missing param",e)}e.headers=Object.assign(Object.assign({},e.headers),m)}}},173489:function(e,t,n){"use strict";n.d(t,{C:function(){return M}});var o,r,i=n("101380"),s=n("193533"),a=n("592242"),c=n("835649");n("358115"),n("689845");var u=n("84105"),d=n("52185"),l=n("59498"),_=n("987232"),p=n("36472"),v=n("927275"),f=n("716983"),h=n("790137"),y=n("651889"),g=n("557418"),m=n("473614");function b(e,t,n){let o=n.value;return n.value=function(...e){return(0,i.mG)(this,void 0,void 0,function*(){let n=0;try{n=m.u.performanceNow();let i=yield o.call(this,...e);return this.resolve(c.Uk.Monitor).emitDuration(r.ProxyInvoke+m.U.SuccessSuffix,n,{name:t}),i}catch(e){throw this.resolve(c.Uk.Monitor).emitDuration(r.ProxyInvoke+m.U.ErrorSuffix,n,{name:t}),a.Y.ctxError(this.ctx,`db proxy op: ${t} error:`,e),new g.G({ctx:this.ctx,type:y.NI.DbOpError,innerError:e,sender:o,msg:`db proxy op: ${t} error`})}})},n}(o=r||(r={})).ProxyInvoke="storage.proxy.invoke",o.IntegrityConversationCheckBefore="storage.integrity.conversation.before",o.IntegrityConversationCheckFix="storage.integrity.conversation.fix",o.CacheInit="storage.cache.init",o.CachePrune="storage.cache.prune",o.CacheRetention="storage.cache.retention",o.PassphraseError="storage.passphrase.error",o.EncryptError="storage.encrypt.error",o.DecryptError="storage.decrypt.error",o.CheckMsg="storage.check.msg",o.CheckConv="storage.check.conv";function k(e,t,n){var o,s;return(0,i.mG)(this,void 0,void 0,function*(){try{let e=h.Buffer.from(window.crypto.getRandomValues(new Uint8Array(16)),0,16),r=yield null===(s=null===(o=window.crypto)||void 0===o?void 0:o.subtle)||void 0===s?void 0:s.encrypt({name:"AES-CTR",counter:e,length:128},t,h.Buffer.from(JSON.stringify(n)));return{ciphertext:h.Buffer.from(r).toString("hex"),iv:e.toString("hex")}}catch(t){return a.Y.ctxWarn(e,"encrypt error, using fallback hex, error:",t,"data:",n),e.resolve(c.Uk.Monitor).emitCounter(r.EncryptError),{ciphertext:h.Buffer.from(JSON.stringify(n)).toString("hex")}}})}function O(e,t,n){return(0,i.mG)(this,void 0,void 0,function*(){try{let o;if(n.iv){let e=h.Buffer.from(n.ciphertext,"hex"),r=h.Buffer.from(n.iv,"hex"),i=yield window.crypto.subtle.decrypt({name:"AES-CTR",counter:r,length:128},t,e);o=JSON.parse(h.Buffer.from(new Uint8Array(i)).toString())}else if(n.ciphertext)o=JSON.parse(h.Buffer.from(n.ciphertext).toString());else throw new g.G({ctx:e,type:y.NI.StorageCryptoError,sender:n,msg:"unhandled decrypted data"});return o}catch(t){if(e.resolve(c.Uk.Monitor).emitCounter(r.DecryptError),t instanceof g.G)throw t;throw new g.G({ctx:e,type:y.NI.StorageCryptoError,sender:n,msg:"decryption failed"})}})}class x extends l.T{init(e){return new Promise((t,n)=>(0,i.mG)(this,void 0,void 0,function*(){this.currentUserId=e,setTimeout(()=>{t(!1)},1e3),this.db=yield(0,_.X3)(`${x.DbNamePrefix}:${this.ctx.option.boe?"boe":"prod"}:${this.ctx.option.appId}:${e}`,x.DbVersion,{upgrade(e,t,n,o){e.createObjectStore("config"),e.createObjectStore("conversation",{keyPath:"id",autoIncrement:!1}),e.createObjectStore("message",{autoIncrement:!1}).createIndex("__index_con_id","conversationId"),e.createObjectStore("participant",{autoIncrement:!1}).createIndex("__index_con_id","conversationId"),e.createObjectStore("cursor"),e.createObjectStore("nextCmdIndex"),e.createObjectStore("readConvListVersion"),e.createObjectStore("convListVersion")}});let n=(yield this.db.get("config",l.j.DbVersion))!==void 0,o=(yield this.db.get("config",l.j.DbEncyption))==="true";if(this.ctx.option.encryption?(this.encryptionEnabled=!0,a.Y.ctxDebug(this.ctx,"storage encryption enabled")):(yield this.deleteConfig(l.j.DbEncyption),this.encryptionEnabled=!1),this.encryptionEnabled){let e=yield function(e,t){var n,o,s,u;return(0,i.mG)(this,void 0,void 0,function*(){let i=yield null===(o=null===(n=window.crypto)||void 0===n?void 0:n.subtle)||void 0===o?void 0:o.digest("SHA-256",h.Buffer.from(t));return null===(u=null===(s=window.crypto)||void 0===s?void 0:s.subtle)||void 0===u?void 0:u.importKey("raw",i,"AES-CTR",!1,["encrypt","decrypt"]).catch(t=>{e.resolve(c.Uk.Monitor).emitCounter(r.PassphraseError),a.Y.ctxWarn(e,"generateKeyFromPassPhrase error",t)})})}(this.ctx,this.currentUserId);e?this._key=e:(a.Y.ctxError(this.ctx,"load encryption key failed"),this.encryptionEnabled=!1)}n&&!o&&this.encryptionEnabled&&(yield this.clear(!0),a.Y.ctxWarn(this.ctx,"try to load unencrypted data but encryption enabled, clear local data"),n=!1),n&&o&&!this.encryptionEnabled&&(yield this.clear(!0),a.Y.ctxWarn(this.ctx,"try to load encrpyted data but not enabled, clear local data"),n=!1),yield this.db.put("config",x.DbVersion.toString(),l.j.DbVersion),yield this.db.put("config",Date.now().toString(),l.j.DbLastOpen),yield this.db.put("config",this.encryptionEnabled.toString(),l.j.DbEncyption),t(n)}))}loadConversation(){var e,t;return(0,i.mG)(this,void 0,void 0,function*(){let n=yield this.db.getAll("conversation");if(!this.encryptionEnabled)return n.map(e=>p.J.fromStore(this.ctx,e));{let o=n.map(e=>O(this.ctx,this._key,e)),r=yield Promise.allSettled(o),i=[];for(let n of r)if("fulfilled"===n.status)i.push(p.J.fromStore(this.ctx,n.value));else{let{id:o}=null===(e=n.reason)||void 0===e?void 0:e.sender;a.Y.ctxWarn(this.ctx,`decrypt conversation ${o} error, ${null===(t=n.reason)||void 0===t?void 0:t.message}`),yield this.db.delete("conversation",o)}return i}})}loadMessage(){var e,t;return(0,i.mG)(this,void 0,void 0,function*(){let n=yield this.db.getAll("message");if(!this.encryptionEnabled)return n.map(e=>v.$.fromStore(this.ctx,e));{let o=n.map(e=>O(this.ctx,this._key,e)),r=yield Promise.allSettled(o),i=[];for(let n of r)if("fulfilled"===n.status)i.push(v.$.fromStore(this.ctx,n.value));else{let{clientId:o,conversationId:r}=null===(e=n.reason)||void 0===e?void 0:e.sender;a.Y.ctxWarn(this.ctx,`decrypt message ${o} error, ${null===(t=n.reason)||void 0===t?void 0:t.message}`),yield this.db.delete("message",v.$.formatMessageKey({clientId:o,conversationId:r}))}return i}})}loadParticipants(){var e,t;return(0,i.mG)(this,void 0,void 0,function*(){let n=yield this.db.getAll("participant");if(!this.encryptionEnabled)return n.map(e=>f.h.fromStore(this.ctx,e));{let o=n.map(e=>O(this.ctx,this._key,e)),r=yield Promise.allSettled(o),i=[];for(let n of r)if("fulfilled"===n.status)i.push(f.h.fromStore(this.ctx,n.value));else{let{conversationId:o,userId:r}=null===(e=n.reason)||void 0===e?void 0:e.sender;a.Y.ctxWarn(this.ctx,`decrypt participant ${r} error, ${null===(t=n.reason)||void 0===t?void 0:t.message}`),yield this.db.delete("participant",f.h.formatParticipantKey({conversationId:o,userId:r}))}return i}})}upsertMessage(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=v.$.toStore(e);if(this.encryptionEnabled){let n=yield k(this.ctx,this._key,t),o=Object.assign({conversationId:t.conversationId,clientId:t.clientId},n);yield this.db.put("message",o,v.$.formatMessageKey(e))}else yield this.db.put("message",t,v.$.formatMessageKey(e))})}upsertConversation(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=p.J.toStore(e);if(this.encryptionEnabled){let n=yield k(this.ctx,this._key,p.J.toStore(e)),o=Object.assign({id:t.id},n);yield this.db.put("conversation",o)}else yield this.db.put("conversation",t)})}upsertParticipant(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=f.h.toStore(e);if(this.encryptionEnabled){let e=yield k(this.ctx,this._key,t),n=Object.assign({conversationId:t.conversationId,userId:t.userId},e);yield this.db.put("participant",n,f.h.formatParticipantKey(n))}else yield this.db.put("participant",t,f.h.formatParticipantKey(t))})}deleteMessage(e){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.delete("message",v.$.formatMessageKey(e))})}deleteConversation(e){return(0,i.mG)(this,void 0,void 0,function*(){yield this.clearConversation(e),yield this.db.delete("conversation",e.id)})}deleteParticipant(e){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.delete("participant",f.h.formatParticipantKey(e))})}clearConversation(e){return(0,i.mG)(this,void 0,void 0,function*(){yield Promise.all([(0,i.mG)(this,void 0,void 0,function*(){var t,n;let o=this.db.transaction("message","readwrite"),r=o.store.index("__index_con_id");try{for(var s,a=(0,i.KL)(r.iterate(e.id));!(s=yield a.next()).done;){let t=s.value;t.value.conversationId===e.id&&(yield t.delete())}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&(yield n.call(a))}finally{if(t)throw t.error}}yield o.done}),(0,i.mG)(this,void 0,void 0,function*(){var t,n;let o=this.db.transaction("participant","readwrite"),r=o.store.index("__index_con_id");try{for(var s,a=(0,i.KL)(r.iterate(e.id));!(s=yield a.next()).done;){let t=s.value;t.value.conversationId===e.id&&(yield t.delete())}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&(yield n.call(a))}finally{if(t)throw t.error}}yield o.done})])})}clear(e){return(0,i.mG)(this,void 0,void 0,function*(){yield Promise.all([this.db.clear("config"),this.db.clear("conversation"),this.db.clear("cursor"),this.db.clear("message"),this.db.clear("participant"),this.db.clear("nextCmdIndex"),this.db.clear("convListVersion"),this.db.clear("readConvListVersion")]),!e&&(yield(0,_.Lj)(x.DbNamePrefix+this.currentUserId))})}loadNextCmdIndex(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=yield this.db.get("nextCmdIndex",e);return void 0!==t?s.fromValue(t):void 0})}saveNextCmdIndex(e,t){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.put("nextCmdIndex",t.toString(),e)})}loadUserCursor(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=yield this.db.get("cursor",e);return void 0!==t?s.fromValue(t):void 0})}saveUserCursor(e,t){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.put("cursor",t.toString(),e)})}loadConvListVersion(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=yield this.db.get("convListVersion",e);return void 0!==t?s.fromValue(t):void 0})}saveConvListVersion(e,t){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.put("convListVersion",t.toString(),e)})}loadReadConvListVersion(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=yield this.db.get("readConvListVersion",e);return void 0!==t?s.fromValue(t):void 0})}saveReadConvListVersion(e,t){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.put("readConvListVersion",t.toString(),e)})}saveConfig(e,t){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.put("config",t,e)})}loadConfig(e){var t;return(0,i.mG)(this,void 0,void 0,function*(){return null!==(t=yield this.db.get("config",e))&&void 0!==t?t:""})}deleteConfig(e){return(0,i.mG)(this,void 0,void 0,function*(){yield this.db.delete("config",e)})}checkMessages(){return(0,i.mG)(this,void 0,void 0,function*(){})}}x.DbNamePrefix="imsdk",x.DbVersion=2;var w=n("621631"),C=n("124125"),P=n("10672"),I=n("604307");class R extends l.T{constructor(e,t){super(e),this.installed=!1,this.isUsingDb=!1,this.maxConversationCount=1e3,this.minMessageCount=200,this.driver=t}init(e){return(0,i.mG)(this,void 0,void 0,function*(){this.installed=!0;let t=m.u.performanceNow();try{return this.isUsingDb=yield this.driver.init(e),this.isUsingDb&&(yield this.fillData(),a.Y.ctxDebug(this.ctx,`load data from cache for user: ${e}`)),this.resolve(c.Uk.Monitor).emitDuration(r.CacheInit+m.U.SuccessSuffix,t),this.isUsingDb}catch(e){return a.Y.ctxError(this.ctx,"init db error:",e),this.resolve(c.Uk.MessageManager).clearAll(),this.resolve(c.Uk.ConversationManager).clearAll(),this.resolve(c.Uk.ParticipantManager).clearAll(),this.resolve(c.Uk.Monitor).emitDuration(r.CacheInit+m.U.ErrorSuffix,t),this.isUsingDb=!1,!1}})}clear(e){return this.isUsingDb?this.driver.clear(e):Promise.resolve()}loadMessage(){return this.isUsingDb?this.driver.loadMessage():Promise.resolve([])}loadConversation(){return this.isUsingDb?this.driver.loadConversation():Promise.resolve([])}loadParticipants(){return this.isUsingDb?this.driver.loadParticipants():Promise.resolve([])}upsertMessage(e){var t;return(0,i.mG)(this,void 0,void 0,function*(){try{this.isUsingDb&&(yield this.driver.upsertMessage(e))}catch(n){throw void 0!==n&&this.resolve(c.Uk.Monitor).emitTracker(I.W.SaveMessageError,{error_msg:n.message,error_stack:n.stack,msg_source:Number.parseInt(null!==(t=e.source.toString())&&void 0!==t?t:"-1",10)}),n}})}upsertConversation(e){return this.isUsingDb?this.driver.upsertConversation(e):Promise.resolve()}upsertParticipant(e){return this.isUsingDb?this.driver.upsertParticipant(e):Promise.resolve()}deleteMessage(e){return this.isUsingDb?this.driver.deleteMessage(e):Promise.resolve()}deleteConversation(e){return this.isUsingDb?this.driver.deleteConversation(e):Promise.resolve()}deleteParticipant(e){return this.isUsingDb?this.driver.deleteParticipant(e):Promise.resolve()}clearConversation(e){return this.isUsingDb?this.driver.clearConversation(e):Promise.resolve()}loadUserCursor(e){return(0,i.mG)(this,void 0,void 0,function*(){return this.isUsingDb?this.driver.loadUserCursor(e):Promise.resolve(void 0)})}saveUserCursor(e,t){return this.isUsingDb?this.driver.saveUserCursor(e,t):Promise.resolve()}loadReadConvListVersion(e){return(0,i.mG)(this,void 0,void 0,function*(){return this.isUsingDb?this.driver.loadReadConvListVersion(e):Promise.resolve(void 0)})}saveReadConvListVersion(e,t){return this.isUsingDb?this.driver.saveReadConvListVersion(e,t):Promise.resolve(void 0)}loadNextCmdIndex(e){return(0,i.mG)(this,void 0,void 0,function*(){return this.isUsingDb?this.driver.loadNextCmdIndex(e):Promise.resolve(void 0)})}saveNextCmdIndex(e,t){return this.isUsingDb?this.driver.saveNextCmdIndex(e,t):Promise.resolve(void 0)}loadConvListVersion(e){return(0,i.mG)(this,void 0,void 0,function*(){return this.isUsingDb?this.driver.loadConvListVersion(e):Promise.resolve(void 0)})}saveConvListVersion(e,t){return this.isUsingDb?this.driver.saveConvListVersion(e,t):Promise.resolve(void 0)}saveConfig(e,t){return this.isUsingDb?this.driver.saveConfig(e,t):Promise.resolve(void 0)}loadConfig(e){return this.isUsingDb?this.driver.loadConfig(e):Promise.resolve("")}checkMessages(e){return(0,i.mG)(this,void 0,void 0,function*(){if(this.ctx.initResult!==y.rb.Succeeded||!(yield this.isNeedCheck(e.id)))return;let{id:t,shortId:n,type:o}=e,r=this.ctx.config.get(P.IL.conversationMsgRepairCount);for(let i of this.resolve(c.Uk.InboxType).getInboxTypeArray()){let s=(yield this.resolve(c.Uk.StorageApi).GetMessagesCheckInfoInConversation({conversationId:t,conversationShortId:n,conversationType:o,inboxType:i,cursorReverseEnd:e.minIndex.toString(),expectedTotalMessageCount:r})).msgs_checkinfo_list;a.Y.ctxDebug(this.ctx,`msgs check: ${e.id}, msgs checkinfo list:`,s);let u=e.getMessageList(()=>!0);for(let t of(a.Y.ctxDebug(this.ctx,`msgs check: ${e.id}, local msg list:`,u),s)){let{isMissingQuantity:n,isMissTail:o}=this.getDiffMsg({minIndex:e.minIndex,headIndex:t.head_msg_index,tailIndex:t.tail_msg_index,serverCount:t.msg_count,localMsgList:u});yield this.syncMissMessages({isMissTail:o,isMissingQuantity:n,conversation:e,localMsgList:u,msgsCheckinfo:t,msgsCheckinfoList:s})}}})}isNeedCheck(e){return(0,i.mG)(this,void 0,void 0,function*(){let t=yield this.loadConfig(l.j.ConversationMsgCheckTime),n=t?JSON.parse(t):{},o=this.ctx.config.get(P.IL.conversationMsgRepairInterval);return a.Y.ctxDebug(this.ctx,`msgs check: ${e}, config.interval ${o}, db.checkTimeConfig, ${n[e]}`),!!(!n[e]||Date.now()-n[e]>o)&&(n[e]=Date.now(),this.saveConfig(l.j.ConversationMsgCheckTime,JSON.stringify(n)),!0)})}getDiffMsg(e){let{minIndex:t,headIndex:n,tailIndex:o,serverCount:r,localMsgList:i}=e,s=0,a=!0;for(let e of i)e.indexInConversation.eq(o)?(a=!1,s++):e.indexInConversation.gte(n)&&e.indexInConversation.lt(o)&&s++;return{isMissingQuantity:s<r+(t.eq(n)?-1:0),isMissTail:a}}syncMissMessages(e){return(0,i.mG)(this,void 0,void 0,function*(){let{isMissTail:t,isMissingQuantity:n,conversation:o,msgsCheckinfoList:i,msgsCheckinfo:s,localMsgList:u}=e,d=[];if(t){let e=i.map(e=>e.head_msg_index).find(e=>null==e?void 0:e.gt(s.tail_msg_index));if(e){let{messages:t}=yield this.resolve(c.Uk.CoreInstance).getMessagesByConversation({conversation:o,cursor:e,direction:w.m.MessageDirection.OLDER,limit:1});Array.prototype.push.apply(d,t)}}if(n){let{messages:e}=yield this.resolve(c.Uk.CoreInstance).getMessagesByConversation({conversation:o,cursor:s.tail_msg_index,direction:w.m.MessageDirection.OLDER,limit:s.msg_count});a.Y.ctxDebug(this.ctx,`msgs check: ${o.id}, get messages by conversation:`,e),Array.prototype.push.apply(d,e.filter(e=>!e.isSpecialMessage&&!u.find(t=>t.serverId===e.serverId)))}a.Y.ctxDebug(this.ctx,`msgs check: ${o.id}, miss msg list:`,d),this.resolve(c.Uk.Monitor).emitMetrics(r.CheckMsg,{leak_count:d.length},{conversation_id:o.id})})}isOlderThan(e,t){return e.getTime()+864e5*t<Date.now()}fillData(){return(0,i.mG)(this,void 0,void 0,function*(){let e=yield this.driver.loadConversation(),t=e.filter(e=>this.resolve(c.Uk.InboxType).isValidInbox(e.inboxType));this.resolve(c.Uk.ConversationManager).applyLocal(t),e.length!==t.length&&0!==e.length&&a.Y.ctxWarn(this.ctx,`skip ${e.length-t.length} conversation for invalid inbox`);let n=yield this.driver.loadMessage(),o=n.filter(e=>t.some(t=>t.id===e.conversationId));if(this.resolve(c.Uk.MessageManager).applyLocal(o),n.length!==o.length&&0!==n.length&&a.Y.ctxWarn(this.ctx,`skip ${n.length-o.length} message for invalid inbox`),this.resolve(c.Uk.ParticipantManager)){let e=yield this.driver.loadParticipants(),n=e.filter(e=>t.some(t=>t.id===e.conversationId));e.length!==n.length&&0!==e.length&&a.Y.ctxWarn(this.ctx,`skip ${e.length-n.length} participant for invalid inbox`),this.resolve(c.Uk.ParticipantManager).applyLocal(n)}this.pruneData();let r=-1;"number"==typeof this.ctx.option.retention?r=this.ctx.option.retention:!0===this.ctx.option.retention&&(r=0),r>=0&&this.retention(r,o)})}pruneData(){let e=m.u.performanceNow(),t=this.resolve(c.Uk.ConversationManager).getConversationArray(()=>!0),n=this.resolve(c.Uk.MessageManager).getRawMap(),o=t.map(e=>e.id).reduce((e,t)=>(e[t]=!0,e),{}),s=[];n.forEach((e,t)=>{void 0===o[t]&&s.push(t)}),s.length>0&&(a.Y.ctxWarn(this.ctx,"prune conversations:",s),setTimeout(()=>(0,i.mG)(this,void 0,void 0,function*(){for(let e of s)yield this.deleteConversation({id:e})}),0)),this.resolve(c.Uk.Monitor).emitDuration(r.CachePrune,e)}retention(e,t){let n=m.u.performanceNow(),o=this.resolve(c.Uk.ConversationManager).getConversationArray(()=>!0);if(o.length>this.maxConversationCount){let e=[];for(;o.length>this.maxConversationCount;)e.push(o.pop());e.length>0&&(setTimeout(()=>(0,i.mG)(this,void 0,void 0,function*(){for(let t of e)yield this.deleteConversation(t)})),a.Y.ctxWarn(this.ctx,`retention ${e.length} overflow conversations`))}let s=[];if(e>=0&&void 0!==t&&t.length>0){let n=(0,C.vM)(t,e=>e.conversationId);for(let t of Object.keys(n)){let o=n[t];if(o.length<=this.minMessageCount)continue;let r=o.length;for(let t of o){if(r<=this.minMessageCount)break;this.isOlderThan(t.createdAt,e)&&(s.push(t),r--)}}s.length>0&&(setTimeout(()=>(0,i.mG)(this,void 0,void 0,function*(){for(let e of s)yield this.deleteMessage(e)}),0),a.Y.ctxWarn(this.ctx,`retention ${s.length} overflow messages`))}this.resolve(c.Uk.Monitor).emitDuration(r.CacheRetention,n)}}(0,i.gn)([b],R.prototype,"clear",null),(0,i.gn)([b],R.prototype,"loadMessage",null),(0,i.gn)([b],R.prototype,"loadConversation",null),(0,i.gn)([b],R.prototype,"loadParticipants",null),(0,i.gn)([b],R.prototype,"upsertMessage",null),(0,i.gn)([b],R.prototype,"upsertConversation",null),(0,i.gn)([b],R.prototype,"upsertParticipant",null),(0,i.gn)([b],R.prototype,"deleteMessage",null),(0,i.gn)([b],R.prototype,"deleteConversation",null),(0,i.gn)([b],R.prototype,"deleteParticipant",null),(0,i.gn)([b],R.prototype,"clearConversation",null),(0,i.gn)([b],R.prototype,"loadUserCursor",null),(0,i.gn)([b],R.prototype,"saveUserCursor",null),(0,i.gn)([b],R.prototype,"loadReadConvListVersion",null),(0,i.gn)([b],R.prototype,"saveReadConvListVersion",null),(0,i.gn)([b],R.prototype,"loadNextCmdIndex",null),(0,i.gn)([b],R.prototype,"saveNextCmdIndex",null),(0,i.gn)([b],R.prototype,"loadConvListVersion",null),(0,i.gn)([b],R.prototype,"saveConvListVersion",null),(0,i.gn)([b],R.prototype,"saveConfig",null),(0,i.gn)([b],R.prototype,"loadConfig",null),(0,i.gn)([b],R.prototype,"checkMessages",null);class M extends u.v{constructor(){super(...arguments),this.name="StoragePlugin"}install(){if(this.instance.clearCache=this.extendFunc(this.clearCache),!0===this.ctx.option.storage){let e=this.selectDriver();if(!e){a.Y.ctxWarn(this.ctx,"no support driver found, disable db integration");return}this.driver=new R(this.ctx,e),this.register(c.Uk.DbProxy,this.driver),void 0===this.ctx.option.integrityCheck&&(this.ctx.option.integrityCheck=!0)}this.api=this.register(c.Uk.StorageApi,d.S),this.register(c.Uk.StoragePlugin,this)}clearCache(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this.dispose(),this.driver.clear()})}selectDriver(){return void 0!==this.ctx.option.driver?this.ctx.option.driver:function(){if("undefined"==typeof window)return!1;for(let e of["indexedDB","IDBDatabase","IDBObjectStore","IDBTransaction","IDBIndex","IDBCursor","IDBKeyRange","IDBRequest"])if(!window.hasOwnProperty(e)||!window[e])return!1;return!0}()?new x(this.ctx):void 0}init(){return(0,i.mG)(this,void 0,void 0,function*(){if(this.driver&&this.ctx.option.integrityCheck)try{yield this.checkConversation()}catch(e){a.Y.ctxWarn(this.ctx,"conversation integrity check err, be careful for conversation missing:",e)}})}checkConversation(){return(0,i.mG)(this,void 0,void 0,function*(){let e=this.resolve(c.Uk.ConversationManager).getConversationArray(e=>!e.isOffline).length,t=[];for(let e of this.resolve(c.Uk.InboxType).getInboxTypeArray()){if(void 0!==this.driver.loadUserCursor(e))(yield this.api.GetConversationsCheckInfo({inboxType:e})).conversation_checkinfo_list.forEach(e=>{let n=this.resolve(c.Uk.ConversationManager).getRaw(e.conversation_id);(void 0===n||0===n.getMessageList().length)&&t.push(e)})}let n=0;if(0!==t.length){a.Y.ctxWarn(this.ctx,"conversation missing:",t);let e=t.map(e=>this.resolve(c.Uk.ConversationManager).getWithCreateLocal(e.conversation_id,e.conversation_short_id.toString(),e.conversation_type));for(let t of yield this.resolve(c.Uk.ConversationManager).refreshAsync(e))try{yield this.resolve(c.Uk.CoreInstance).getMessagesByConversation({conversation:t})}catch(e){a.Y.ctxError(this.ctx,"pulling integrity check message error:",e)}n=e.map(e=>this.resolve(c.Uk.ConversationManager).getRaw(e.id)).map(e=>void 0!==e&&0!==e.getMessageList().length).filter(e=>!e).length}this.resolve(c.Uk.Monitor).emitMetrics(r.CheckConv,{leak_count:t.length,link_mode:0},{is_pre_check:"1",bad_check:0===n?"false":"true"}),this.resolve(c.Uk.Monitor).emitCounter(r.IntegrityConversationCheckBefore,e),this.resolve(c.Uk.Monitor).emitCounter(r.IntegrityConversationCheckFix,t.length),yield this.resolve(c.Uk.ConversationManager).refreshLocalAsync()})}}},379407:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var o=n(101380),r=n(193533),i=n(621631),s=n(435588);n(358115),n(689845);class a extends s.W{GetStrangerConversationList(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({get_stranger_conversation_body:{cursor:e.cursor,count:r.fromValue(e.limit),show_total_unread:!0}});return this.sendWithRawBody(t,i.m.IMCMD.GET_STRANGER_CONVERSATION_LIST)})}GetStrangerConversationMessage(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({get_stranger_messages_body:{conversation_short_id:e.shortId,reset_unread_count:e.resetUnreadCount}});return this.sendWithRawBody(t,i.m.IMCMD.GET_STRANGER_MESSAGES_IN_CONVERSATION)})}DeleteStrangerConversation(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({delete_stranger_conversation_body:{conversation_short_id:e.shortId}});return this.send(t,i.m.IMCMD.DELETE_STRANGER_CONVERSATION)})}MarkStrangerConversationRead(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=i.m.RequestBody.create({mark_stranger_conversation_read_body:{conversation_short_id:e.shortId}});return this.send(t,i.m.IMCMD.MARK_STRANGER_CONVERSATION_READ)})}MarkAllStrangerConversationRead(){return(0,o.mG)(this,void 0,void 0,function*(){let e=i.m.RequestBody.create({mark_stranger_all_conversation_read_body:{}});return this.send(e,i.m.IMCMD.MARK_ALL_STRANGER_CONVERSATIONS_READ)})}DeleteAllStrangerConversation(){return(0,o.mG)(this,void 0,void 0,function*(){let e=i.m.RequestBody.create({delete_stranger_all_conversation_body:{}});return this.send(e,i.m.IMCMD.DELETE_ALL_STRANGER_CONVERSATIONS)})}}},986293:function(e,t,n){"use strict";n.d(t,{C:function(){return r}}),n(193533);var o=n(597552);n(689845),n(358115);class r extends o.r{get unreadCount(){return this.internalUnreadCount}set unreadCount(e){this.internalUnreadCount=e}get mode(){let e=this.toParticipantUserId,t=this.id.split(":");return t[2]===e?1:t[3]===e?2:3}get ext(){return this.coreInfo.ext}set ext(e){this.coreInfo.ext=e}}},614261:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var o=n(101380),r=n(428775),i=n.n(r),s=n(829727);class a extends s.Z{constructor(e){super(e),this.instance=i().create({timeout:this.option.timeout,withCredentials:!!this.option.withCredentials,headers:this.headers,responseType:this.dataType,method:this.method})}send(e,t,n){return(0,o.mG)(this,void 0,void 0,function*(){return(yield this.instance.request({url:e,data:n,method:t})).data})}sendByBeacon(e,t){return void 0!==navigator.sendBeacon&&navigator.sendBeacon(e,t)}}},116645:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var o=n(101380),r=n(198721);class i extends r.KE{getConnectionStatus(){return(0,o.mG)(this,void 0,void 0,function*(){return"undefined"==typeof navigator||void 0===navigator.onLine?r.QK.Unknown:navigator.onLine?r.QK.Connected:r.QK.Disconnected})}getNetworkType(){return(0,o.mG)(this,void 0,void 0,function*(){if((yield this.getConnectionStatus())===r.QK.Disconnected)return r.td.None;if("undefined"==typeof navigator||!navigator.connection||!navigator.connection.type)return r.td.Unknown;switch(navigator.connection.type){case"cellular":if(!navigator.connection.effectiveType)return r.td.Unknown;switch(navigator.connection.effectiveType){case"2g":case"slow-2g":return r.td.Cellular_2G;case"3g":return r.td.Cellular_3G;case"4g":return r.td.Cellular_4G;case"5g":return r.td.Cellular_5G;default:return r.td.Unknown}case"wifi":return r.td.Wifi;case"other":return r.td.Other;case"none":return r.td.None;default:return r.td.Unknown}})}}},568161:function(e,t,n){"use strict";n.d(t,{v:function(){return u}});var o=n(737074),r=n(952489);let{setIntervalWarp:i,clearIntervalWarp:s,setTimeoutWarp:a,clearTimeoutWarp:c}=o.Z;class u extends r.f{restart(){this.tickTimer&&this.stop(),this.state=r.N.Running;let{enableHackTimer:e}=this.ctx.option,t=e?i:setInterval,n=e?a:setTimeout;this.tickTimer=t(()=>{this.update()},this.refreshRate),void 0!==this.doneDuration&&(this.doneTimer=n(()=>{this.done()},this.doneDuration)),this.startTime=Date.now(),this.lastStopTime=0,this.update()}stop(){if(this.state===r.N.Stopped)return;let{enableHackTimer:e}=this.ctx.option,t=e?s:clearInterval,n=e?c:clearTimeout;t(this.tickTimer),n(this.doneTimer),this.state=r.N.Stopped,this.lastStopTime=Date.now(),this.onStop.nextEmpty()}}},173471:function(e,t,n){"use strict";n.d(t,{y:function(){return v}});var o=n("101380"),r=n("689845"),i=n.n(r),s=n("621631"),a=n("651889"),c=n("557418"),u=n("359756"),d=n("473614"),l=n("835649");class _ extends l.mA{constructor(e){super(e),this.openTime=0,this.createTime=0,this.option=e.option,this.url=this.option.frontierUrl,this.onClose=new u.x(e),this.onOpen=new u.x(e),this.onError=new u.x(e),this.onMessage=new u.x(e),this.onOpen.subscribe(()=>{var e;this.openTime=d.u.performanceNow(),this.resolve(l.Uk.Monitor).emitMetrics(d.U.FrontierOpen,{duration:this.openTime-this.createTime},{url:null!==(e=this.url)&&void 0!==e?e:"unknown"})}),this.onClose.subscribe(e=>{var t,n,o,r;"undefined"!=typeof CloseEvent&&e instanceof CloseEvent?this.resolve(l.Uk.Monitor).emitMetrics(d.U.FrontierClose,{count:1},{url:null!==(t=this.url)&&void 0!==t?t:"unknown",code:null===(n=e.code)||void 0===n?void 0:n.toString(),reason:e.reason}):this.resolve(l.Uk.Monitor).emitMetrics(d.U.FrontierClose,{count:1},{url:null!==(o=this.url)&&void 0!==o?o:"unknown"}),0!==this.openTime&&!Number.isNaN(this.openTime)&&this.resolve(l.Uk.Monitor).emitMetrics(d.U.FrontierLive,{duration:d.u.performanceNow()-this.openTime},{url:null!==(r=this.url)&&void 0!==r?r:"unknown"}),this.openTime=0}),this.onMessage.subscribe(e=>{var t;if("hi"!==e.toString())this.resolve(l.Uk.Monitor).emitMetrics(d.U.FrontierReceive,{count:1},{url:null!==(t=this.url)&&void 0!==t?t:"unknown"})}),this.onError.subscribe(()=>{var e;this.resolve(l.Uk.Monitor).emitMetrics(d.U.FrontierError,{count:1},{url:null!==(e=this.url)&&void 0!==e?e:"unknown"})})}get paramUrl(){let{headers:e,authType:t,cert:n,tsSign:o}=this.option,r={};(null==e?void 0:e[a.HF.envKey])!==void 0&&(r[a.HF.envKey]=e[a.HF.envKey]),(null==e?void 0:e[a.HF.boeHeaderKey])!==void 0&&(r[a.HF.boeHeaderKey]=e[a.HF.boeHeaderKey]),(null==e?void 0:e[a.HF.ppeHeaderKey])!==void 0&&(r[a.HF.ppeHeaderKey]=e[a.HF.ppeHeaderKey]);let c=Object.assign(Object.assign({token:this.option.disableWsUrlToken?"":this.ctx.cachedToken,sid:this.option.sessionId,aid:this.option.appId,fpid:this.option.fpId,device_id:this.option.deviceId,access_key:i()(`${this.option.fpId+this.option.appKey+this.option.deviceId}f8a69f1719916z`),device_platform:this.option.devicePlatform,version_code:this.option.versionCode},this.option.extended),r);return s.m.AuthType.CERT_AUTH===t&&(c.sdk_cert=encodeURIComponent(null!=n?n:""),c.ts_sign=encodeURIComponent(null!=o?o:"")),`${this.url}?${function(e){let t=[];for(let n of Object.keys(e))void 0!==e[n]&&""!==e[n]&&t.push(`${n}=${e[n]}`);return t.join("&")}(c)}`}performOpen(){let e=!1;this.createTime=d.u.performanceNow();let t=new Promise((t,n)=>{setTimeout(()=>{if(!e)n(new c.G({ctx:this.ctx,msg:"frontier connect timeout",type:a.NI.NetworkError,sender:this}))},this.ctx.option.timeout)});return Promise.race([t,(0,o.mG)(this,void 0,void 0,function*(){try{yield this.open()}catch(e){throw new c.G({ctx:this.ctx,msg:"ws connect error",innerError:e,sender:this,type:a.NI.NetworkError})}finally{e=!0}})])}dispose(){this.onOpen.unsubscribeAll(),this.onClose.unsubscribeAll(),this.onError.unsubscribeAll(),this.onMessage.unsubscribeAll()}}var p=n("592242");class v extends _{registerEvents(){this.ws.onclose=e=>{this.onClose.next(e,this)},this.ws.onopen=()=>{this.onOpen.nextEmpty(this)},this.ws.onmessage=e=>{this.onMessage.next(e.data,this)},this.ws.onerror=e=>{this.onError.next(e,this)}}open(){let e,t;if(this.isOpen())return p.Y.ctxWarn(this.ctx,"ws already open, close first"),Promise.resolve(!0);this.ws=new WebSocket(this.paramUrl,a.HF.wsProtocols),this.ws.binaryType="arraybuffer",this.registerEvents();let n=this.onOpen.subscribe(()=>{e(!0),this.onOpen.unsubscribe(n)}),o=this.onError.subscribe(e=>{t(e),this.onError.unsubscribe(o)});return new Promise((n,o)=>{e=n,t=o})}close(){this.ws&&(this.ws.onmessage=null,this.ws.close()),this.ws=void 0}send(e){this.ws.send(e)}isOpen(){return void 0!==this.ws&&this.ws.readyState===WebSocket.OPEN}}},768438:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var o=n("101380"),r=n("835649");class i extends r.mA{}var s=n("621631"),a=n("329022"),c=n("251354");class u extends i{constructor(e){super(e)}init(){let{appId:e,securityStoreType:t="local",securitySignVersion:n,securityCertType:o="request",securityScene:r=""}=this.ctx.option;this.ctx.option.authType===s.m.AuthType.CERT_AUTH?(this.sdk=(0,a.P)(),this.sdk.setDisableCrossStorage(!0),this.sdk.setNamespace("token")):this.sdk=c.SecureSDK,this.sdk.setStorageType(t),this.sdk.setConfig({aid:e,scene:r,certType:o,signVersion:n}),this.sdk.start(),this.securityCertType=o,this.securityScene=r}sign(e){return(0,o.mG)(this,void 0,void 0,function*(){let t=yield this.sdk.cryptoSDK.sign({sign_data:e,certType:this.securityCertType,scene:this.securityScene});return JSON.parse(this.sdk.convertBase64ToString(t))})}getCert(){return(0,o.mG)(this,void 0,void 0,function*(){return this.sdk.cryptoSDK.getCertificate({certType:this.securityCertType,scene:this.securityScene})})}getTsSign(){return(0,o.mG)(this,void 0,void 0,function*(){return this.sdk.cryptoSDK.getTSSign({certType:this.securityCertType,scene:this.securityScene})})}getTicket(){return(0,o.mG)(this,void 0,void 0,function*(){return this.sdk.cryptoSDK.getTicket({certType:this.securityCertType,scene:this.securityScene})})}setSignValue(e){return(0,o.mG)(this,void 0,void 0,function*(){this.sdk.cryptoSDK.setSignValue({sign:e,scene:this.securityScene})})}getCertSignRequest(){return(0,o.mG)(this,void 0,void 0,function*(){return this.sdk.cryptoSDK.getCertSignRequest()})}getPubKey(){return(0,o.mG)(this,void 0,void 0,function*(){return this.sdk.cryptoSDK.getPubKey()})}}},577603:function(e){var t,n;t=0,n=function(){"use strict";var e,t,n=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,r={years:31536e6,months:2628e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},i=function(e){return e instanceof l},s=function(e,t,n){return new l(e,n,t.$l)},a=function(e){return t.p(e)+"s"},c=function(e){return e<0},u=function(e){return c(e)?Math.ceil(e):Math.floor(e)},d=function(e,t){return e?c(e)?{negative:!0,format:""+Math.abs(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},l=function(){function c(e,t,n){var i=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return s(e*r[a(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach(function(t){i.$d[a(t)]=e[t]}),this.calMilliseconds(),this;if("string"==typeof e){var c=e.match(o);if(c){var u=c.slice(2).map(function(e){return null!=e?Number(e):0});return this.$d.years=u[0],this.$d.months=u[1],this.$d.weeks=u[2],this.$d.days=u[3],this.$d.hours=u[4],this.$d.minutes=u[5],this.$d.seconds=u[6],this.calMilliseconds(),this}}return this}var l=c.prototype;return l.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(t,n){return t+(e.$d[n]||0)*r[n]},0)},l.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=u(e/31536e6),e%=31536e6,this.$d.months=u(e/2628e6),e%=2628e6,this.$d.days=u(e/864e5),e%=864e5,this.$d.hours=u(e/36e5),e%=36e5,this.$d.minutes=u(e/6e4),e%=6e4,this.$d.seconds=u(e/1e3),e%=1e3,this.$d.milliseconds=e},l.toISOString=function(){var e=d(this.$d.years,"Y"),t=d(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var o=d(n,"D"),r=d(this.$d.hours,"H"),i=d(this.$d.minutes,"M"),s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3,s=Math.round(1e3*s)/1e3);var a=d(s,"S"),c=e.negative||t.negative||o.negative||r.negative||i.negative||a.negative,u=r.format||i.format||a.format?"T":"",l=(c?"-":"")+"P"+e.format+t.format+o.format+u+r.format+i.format+a.format;return"P"===l||"-P"===l?"P0D":l},l.toJSON=function(){return this.toISOString()},l.format=function(e){var o={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return(e||"YYYY-MM-DDTHH:mm:ss").replace(n,function(e,t){return t||String(o[e])})},l.as=function(e){return this.$ms/r[a(e)]},l.get=function(e){var t=this.$ms,n=a(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?u(t/r[n]):this.$d[n],t||0},l.add=function(e,t,n){var o;return o=t?e*r[a(t)]:i(e)?e.$ms:s(e,this).$ms,s(this.$ms+o*(n?-1:1),this)},l.subtract=function(e,t){return this.add(e,t,!0)},l.locale=function(e){var t=this.clone();return t.$l=e,t},l.clone=function(){return s(this.$ms,this)},l.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},l.valueOf=function(){return this.asMilliseconds()},l.milliseconds=function(){return this.get("milliseconds")},l.asMilliseconds=function(){return this.as("milliseconds")},l.seconds=function(){return this.get("seconds")},l.asSeconds=function(){return this.as("seconds")},l.minutes=function(){return this.get("minutes")},l.asMinutes=function(){return this.as("minutes")},l.hours=function(){return this.get("hours")},l.asHours=function(){return this.as("hours")},l.days=function(){return this.get("days")},l.asDays=function(){return this.as("days")},l.weeks=function(){return this.get("weeks")},l.asWeeks=function(){return this.as("weeks")},l.months=function(){return this.get("months")},l.asMonths=function(){return this.as("months")},l.years=function(){return this.get("years")},l.asYears=function(){return this.as("years")},c}(),_=function(e,t,n){return e.add(t.years()*n,"y").add(t.months()*n,"M").add(t.days()*n,"d").add(t.hours()*n,"h").add(t.minutes()*n,"m").add(t.seconds()*n,"s").add(t.milliseconds()*n,"ms")};return function(n,o,r){e=r,t=r().$utils(),r.duration=function(e,t){return s(e,{$l:r.locale()},t)},r.isDuration=i;var a=o.prototype.add,c=o.prototype.subtract;o.prototype.add=function(e,t){return i(e)?_(this,e,1):a.bind(this)(e,t)},o.prototype.subtract=function(e,t){return i(e)?_(this,e,-1):c.bind(this)(e,t)}}},e.exports=n()},730543:function(e,t){var n;n=0,function(e){"use strict";var t=Object.keys;function n(e,t){return e===t||e!=e&&t!=t}function o(e){return e.constructor===Object||null==e.constructor}function r(e){return!!e&&"function"==typeof e.then}function i(e){return!!(e&&e.$$typeof)}function s(){var e=[];return{delete:function(t){for(var n=0;n<e.length;++n)if(e[n][0]===t){e.splice(n,1);return}},get:function(t){for(var n=0;n<e.length;++n)if(e[n][0]===t)return e[n][1]},set:function(t,n){for(var o=0;o<e.length;++o)if(e[o][0]===t){e[o][1]=n;return}e.push([t,n])}}}var a="function"==typeof WeakMap?function(){return new WeakMap}:s;function c(e){return function(t){var n=e||t;return function(e,t,o,r,i,s,c){void 0===c&&(c=a());var u=!!e&&"object"==typeof e,d=!!t&&"object"==typeof t;if(u!==d)return!1;if(!u&&!d)return n(e,t,c);var l=c.get(e);if(l&&c.get(t))return l===t;c.set(e,t),c.set(t,e);var _=n(e,t,c);return c.delete(e),c.delete(t),_}}}var u=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function d(e,n,o,r){var s=t(e),a=s.length;if(t(n).length!==a)return!1;if(a){for(var c=void 0;a-- >0;){if("_owner"===(c=s[a])){var d=i(e),l=i(n);if((d||l)&&d!==l)return!1}if(!u(n,c)||!o(e[c],n[c],c,c,e,n,r))return!1}}return!0}var l="g"===/foo/g.flags?function(e,t){return e.source===t.source&&e.flags===t.flags}:function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex},_="function"==typeof Map,p="function"==typeof Set,v=Object.prototype.valueOf;function f(e){var t="function"==typeof e?e(i):function(e,t,n,o,r,s,a){return i(e,t,a)};function i(e,i,s){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(o(e)&&o(i))return d(e,i,t,s);var a=Array.isArray(e),c=Array.isArray(i);return a||c?a===c&&function(e,t,n,o){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n(e[r],t[r],r,r,e,t,o))return!1;return!0}(e,i,t,s):(a=e instanceof Date,c=i instanceof Date,a||c)?a===c&&n(e.getTime(),i.getTime()):(a=e instanceof RegExp,c=i instanceof RegExp,a||c)?a===c&&l(e,i):r(e)||r(i)?e===i:_&&(a=e instanceof Map,c=i instanceof Map,a||c)?a===c&&function(e,t,n,o){var r=e.size===t.size;if(r&&e.size){var i={},s=0;e.forEach(function(a,c){if(r){var u=!1,d=0;t.forEach(function(r,l){!u&&!i[d]&&(u=n(c,l,s,d,e,t,o)&&n(a,r,c,l,e,t,o))&&(i[d]=!0),d++}),s++,r=u}})}return r}(e,i,t,s):p&&(a=e instanceof Set,c=i instanceof Set,a||c)?a===c&&function(e,t,n,o){var r=e.size===t.size;if(r&&e.size){var i={};e.forEach(function(s,a){if(r){var c=!1,u=0;t.forEach(function(r,d){!c&&!i[u]&&(c=n(s,r,a,d,e,t,o))&&(i[u]=!0),u++}),r=c}})}return r}(e,i,t,s):e.valueOf!==v||i.valueOf!==v?n(e.valueOf(),i.valueOf()):d(e,i,t,s)}return e!=e&&i!=i}return i}var h=f(),y=f(function(){return n}),g=f(c()),m=f(c(n));e.circularDeepEqual=g,e.circularShallowEqual=m,e.createCustomEqual=f,e.deepEqual=h,e.sameValueZeroEqual=n,e.shallowEqual=y,Object.defineProperty(e,"__esModule",{value:!0})}(t)},171479:function(e,t,n){"use strict";var o=n(52886);let r=["continue","continuePrimaryKey","advance"],i={},s=new WeakMap,a=new WeakMap,c={get(e,t){if(!r.includes(t))return e[t];let n=i[t];return!n&&(n=i[t]=function(...e){s.set(this,a.get(this)[t](...e))}),n}};async function*u(...e){let t=this;if(!(t instanceof IDBCursor)&&(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,c);for(a.set(n,t),o.a.set(n,(0,o.u)(t));t;)yield n,t=await (s.get(n)||t.continue()),s.delete(n)}function d(e,t){return t===Symbol.asyncIterator&&(0,o.i)(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&(0,o.i)(e,[IDBIndex,IDBObjectStore])}(0,o.r)(e=>({...e,get:(t,n,o)=>d(t,n)?u:e.get(t,n,o),has:(t,n)=>d(t,n)||e.has(t,n)}))},876265:function(e,t,n){"use strict";n.d(t,{Lj:function(){return i},X3:function(){return r}});var o=n(52886);function r(e,t,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){let c=indexedDB.open(e,t),u=(0,o.w)(c);return i&&c.addEventListener("upgradeneeded",e=>{i((0,o.w)(c.result),e.oldVersion,e.newVersion,(0,o.w)(c.transaction))}),n&&c.addEventListener("blocked",()=>n()),u.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",()=>s())}).catch(()=>{}),u}function i(e,{blocked:t}={}){let n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),(0,o.w)(n).then(()=>void 0)}let s=["get","getKey","getAll","getAllKeys","count"],a=["put","add","delete","clear"],c=new Map;function u(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(c.get(t))return c.get(t);let n=t.replace(/FromIndex$/,""),o=t!==n,r=a.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||s.includes(n)))return;let i=async function(e,...t){let i=this.transaction(e,r?"readwrite":"readonly"),s=i.store;return o&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&i.done]))[0]};return c.set(t,i),i}(0,o.r)(e=>({...e,get:(t,n,o)=>u(t,n)||e.get(t,n,o),has:(t,n)=>!!u(t,n)||e.has(t,n)}))},539966:function(e,t,n){"use strict";var o=n(199584),r={Uri:{createUriRegex:function(e){if("object"!=typeof(e=e||{})||Array.isArray(e))throw Error("options must be an object");var t="";if(e.scheme){if(!Array.isArray(e.scheme)&&(e.scheme=[e.scheme]),e.scheme.length<=0)throw Error("scheme must have at least 1 scheme specified");for(var n=0;n<e.scheme.length;++n){var r=e.scheme[n];if(!(r instanceof RegExp||"string"==typeof r))throw Error("scheme must only contain Regular Expressions or Strings");if(t+=t?"|":"",r instanceof RegExp)t+=r.source;else{if(!/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(r))throw Error("scheme at position "+n+" must be a valid scheme");t+=r.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}}}return RegExp("^(?:"+("(?:"+(t||o.scheme)+")")+":"+o.hierPart+")(?:\\?"+o.query+")?(?:#"+o.fragment+")?$")},uriRegex:new RegExp(o.uri)}};r.Uri.isValid=function(e){return r.Uri.uriRegex.test(e)},e.exports={createUriRegex:r.Uri.createUriRegex,uriRegex:r.Uri.uriRegex,isValid:r.Uri.isValid}},502044:function(e,t,n){var o=n(193533),r=e.exports;!function(){"use strict";var e,t,n,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof r.stringify&&(r.stringify=function(r,i,s){var c;if(e="",t="","number"==typeof s)for(c=0;c<s;c+=1)t+=" ";else"string"==typeof s&&(t=s);if(n=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw Error("JSON.stringify");return function r(i,s){var c,u,d,l,_,p=e,v=s[i],f=null!=v&&(v instanceof o||o.isLong(v));switch(v&&"object"==typeof v&&"function"==typeof v.toJSON&&(v=v.toJSON(i)),"function"==typeof n&&(v=n.call(s,i,v)),typeof v){case"string":return a(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":return String(v);case"object":if(!v)return"null";if(f)return v.toString();if(e+=t,_=[],"[object Array]"===Object.prototype.toString.apply(v)){for(c=0,l=v.length;c<l;c+=1)_[c]=r(c,v)||"null";return d=0===_.length?"[]":e?"[\n"+e+_.join(",\n"+e)+"\n"+p+"]":"["+_.join(",")+"]",e=p,d}if(n&&"object"==typeof n)for(c=0,l=n.length;c<l;c+=1)"string"==typeof n[c]&&(d=r(u=n[c],v))&&_.push(a(u)+(e?": ":":")+d);else Object.keys(v).forEach(function(t){var n=r(t,v);n&&_.push(a(t)+(e?": ":":")+n)});return d=0===_.length?"{}":e?"{\n"+e+_.join(",\n"+e)+"\n"+p+"}":"{"+_.join(",")+"}",e=p,d}}("",{"":r})})}()},461819:function(e,t,n){var o=n(420669),r=n(164321);e.exports=function(e,t){return e&&e.length?r(e,o(t,2)):0}},586539:function(e,t,n){var o,r;o=0,r=function(e,t){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var o={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return"function"==typeof e?"function"==typeof t?function(){e.apply(this,arguments),t.apply(this,arguments)}:e:"function"==typeof t?t:void 0})}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return"function"==typeof e?"function"==typeof t?function(){return e(t.apply(this,arguments))}:e:"function"==typeof t?t:void 0})}function s(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return n;return -1}function a(e,t){var n="function"==typeof t?t:function(t,n){for(var o=0;o<n.length;o++)if(!e(t[o],n[o]))return!1;return!0};return function(e,t){for(var o=0;o<e.length;o++)if(e[o].length===t.length&&n(e[o],t))return o;return -1}}function c(e,t){return t&&t!==o?n({},e,t,{onCacheAdd:r(e.onCacheAdd,t.onCacheAdd),onCacheChange:r(e.onCacheChange,t.onCacheChange),onCacheHit:r(e.onCacheHit,t.onCacheHit),transformArgs:i(e.transformArgs,t.transformArgs)}):e}function u(e,t,n){try{Object.defineProperty(e,"name",{configurable:!0,enumerable:!1,value:"moized("+(n||t||"anonymous")+")",writable:!0})}catch(e){}}function d(e,t,n){var o=s(e,t);-1!==o&&(clearTimeout(e[o].timeoutId),n&&e.splice(o,1))}function l(e,t){var n=setTimeout(e,t);return"function"==typeof n.unref&&n.unref(),n}var _={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},p=!1;function v(e){e?delete _.profiles[e]:_.profiles={}}function f(e,t){return e?(t/e*100).toFixed(4)+"%":"0.0000%"}function h(e){!_.isCollectingStats&&!p&&(p=!0);var t=_.profiles;if(e){if(!t[e])return{calls:0,hits:0,usage:"0.0000%"};var o=t[e];return n({},o,{usage:f(o.calls,o.hits)})}var r=Object.keys(_.profiles).reduce(function(e,n){return e.calls+=t[n].calls,e.hits+=t[n].hits,e},{calls:0,hits:0});return n({},r,{profiles:Object.keys(t).reduce(function(e,t){return e[t]=h(t),e},{}),usage:f(r.calls,r.hits)})}var y={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function g(e,t,n){void 0===n&&(n=[]),Object.getOwnPropertyNames(e).forEach(function(o){if(!y[o]&&-1===n.indexOf(o)){var r=Object.getOwnPropertyDescriptor(e,o);r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}})}var m="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function b(e,t){for(var n=e.length,o=0;o<n;++o)if(e[o]===t)return o+1;return 0}function k(e){for(var t="|",n=0;n<e.length;n++)t+=function(e){var t,n,o=typeof e;return e&&("object"===o||"function"===o)?JSON.stringify(e,(t=[],n=[],function(e,o){var r=typeof o;if("function"===r||"symbol"===r)return o.toString();if("object"==typeof o){if(t.length){var i=b(t,this);0===i?t[t.length]=this:(t.splice(i),n.splice(i)),n[n.length]=e;var s=b(t,o);if(0!==s)return"[ref="+(n.slice(0,s).join(".")||".")+"]"}else t[0]=o,n[0]=e;return o}return""+o})):e}(e[n])+"|";return[t]}function O(e,t){return e[0]===t[0]}function x(e){if("function"==typeof e)return function(t,n,o){return e(o.cache,o.options,o)}}var w=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],C=function p(f,y){var b,C,P,I,R,M,E,T,S,B,j,A,L,N,G,U,D,q,V,Y,$,F,K,W,z,H,Z,X,J,Q,ee,et,en,eo,er=y||o;if("function"==typeof(b=f)&&b.isMoized)return p(f.originalFunction,c(f.options,er));if("object"==typeof f)return function(e,t){return"function"==typeof e?p(e,c(f,t)):p(c(f,e))};if(er.isReact)return function(e,t,o){var r=e(n({maxArgs:2,isShallowEqual:!0},o,{isReact:!1}));function i(e,n,o){this.props=e,this.context=n,this.updater=o,this.MoizedComponent=r(t)}return!t.displayName&&(t.displayName=t.name||"Component"),i.prototype.isReactComponent={},i.prototype.render=function(){return{$$typeof:m,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},g(t,i,["contextType","contextTypes"]),i.displayName="Moized("+(t.displayName||t.name||"Component")+")",u(i,t.name,o.profileName),i}(p,f,er);var ei=n({},o,er,{maxAge:"number"==typeof er.maxAge&&er.maxAge>=0?er.maxAge:o.maxAge,maxArgs:"number"==typeof er.maxArgs&&er.maxArgs>=0?er.maxArgs:o.maxArgs,maxSize:"number"==typeof er.maxSize&&er.maxSize>=0?er.maxSize:o.maxSize,profileName:er.profileName||(C=f).displayName||C.name||"Anonymous "+_.anonymousProfileNameCounter++}),es=[];ei.matchesArg,ei.isDeepEqual;var ea=ei.isPromise;ei.isReact,ei.isSerialized,ei.isShallowEqual,ei.matchesKey,ei.maxAge,ei.maxArgs;var ec=ei.maxSize,eu=ei.onCacheAdd,ed=ei.onCacheChange,el=ei.onCacheHit;ei.onExpire,ei.profileName,ei.serializer;var e_=ei.updateCacheForKey;ei.transformArgs,ei.updateExpire;var ep=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}(ei,w);var ev=(P=ei).matchesArg||P.isDeepEqual&&t.deepEqual||P.isShallowEqual&&t.shallowEqual||t.sameValueZeroEqual;var ef=(I=ei).matchesKey||I.isSerialized&&O||void 0;var eh=(R=es,M=ei,E=ev,T=ef,{onCacheAdd:N="number"==typeof M.maxAge&&isFinite(M.maxAge)?(S=R,B=M,j=E,A=T,L=B.maxAge,function e(t,n,o){var r=t.keys[0];if(-1===s(S,r)){var i=function(){var i=a(j,A)(t.keys,r),s=t.values[i];~i&&(t.keys.splice(i,1),t.values.splice(i,1),"function"==typeof B.onCacheChange&&B.onCacheChange(t,n,o)),d(S,r,!0),"function"==typeof B.onExpire&&!1===B.onExpire(r)&&(t.keys.unshift(r),t.values.unshift(s),e(t,n,o),"function"==typeof B.onCacheChange&&B.onCacheChange(t,n,o))};S.push({expirationMethod:i,key:r,timeoutId:l(i,L)})}}):void 0,onCacheHit:N&&M.updateExpire?(G=R,U=M,function(e){var t=e.keys[0],n=s(G,t);~n&&(d(G,t,!1),G[n].timeoutId=l(G[n].expirationMethod,U.maxAge))}):void 0}),ey=function(e){var t,n;return _.isCollectingStats?{onCacheAdd:(t=e.profileName,function(){t&&!_.profiles[t]&&(_.profiles[t]={calls:0,hits:0}),_.profiles[t].calls++}),onCacheHit:(n=e,function(){var e=_.profiles,t=n.profileName;!e[t]&&(e[t]={calls:0,hits:0}),e[t].calls++,e[t].hits++})}:{}}(ei);var eg=i((D=ei).isSerialized&&("function"==typeof(q=D).serializer?q.serializer:k),"function"==typeof D.transformArgs&&D.transformArgs,"number"==typeof D.maxArgs&&(V=D.maxArgs,function(e){if(V>=e.length)return e;if(0===V)return[];if(1===V)return[e[0]];if(2===V)return[e[0],e[1]];if(3===V)return[e[0],e[1],e[2]];for(var t=[],n=0;n<V;n++)t[n]=e[n];return t}));var em=(Y=e(f,n({},ep,{isEqual:ev,isMatchingKey:ef,isPromise:ea,maxSize:ec,onCacheAdd:x(r(eu,eh.onCacheAdd,ey.onCacheAdd)),onCacheChange:x(ed),onCacheHit:x(r(el,eh.onCacheHit,ey.onCacheHit)),transformKey:eg})),$={expirations:es,options:ei,originalFunction:f},F=Y,K=$.expirations,z=a((W=F.options).isEqual,W.isMatchingKey),F.clear=function(){var e=F._microMemoizeOptions.onCacheChange,t=F.cache;return t.keys.length=0,t.values.length=0,e&&e(t,F.options,F),!0},F.clearStats=function(){v(F.options.profileName)},F.get=function(e){var t=F._microMemoizeOptions.transformKey,n=F.cache,o=t?t(e):e;return -1!==z(n.keys,o)?F.apply(this,e):void 0},F.getStats=function(){return h(F.options.profileName)},F.has=function(e){var t=F._microMemoizeOptions.transformKey,n=t?t(e):e;return -1!==z(F.cache.keys,n)},F.keys=function(){return F.cacheSnapshot.keys},F.remove=function(e){var t=F._microMemoizeOptions,n=t.onCacheChange,o=t.transformKey,r=F.cache,i=z(r.keys,o?o(e):e);if(-1===i)return!1;var s=r.keys[i];return r.keys.splice(i,1),r.values.splice(i,1),n&&n(r,F.options,F),d(K,s,!0),!0},F.set=function(e,t){var n=F._microMemoizeOptions,o=F.cache,r=F.options,i=n.onCacheAdd,s=n.onCacheChange,a=n.transformKey,c=a?a(e):e,u=z(o.keys,c);if(-1===u){var d=r.maxSize-1;o.size>d&&(o.keys.length=d,o.values.length=d),o.keys.unshift(c),o.values.unshift(t),r.isPromise&&o.updateAsyncCache(F),i&&i(o,r,F),s&&s(o,r,F)}else{var l=o.keys[u];o.values[u]=t,u>0&&o.orderByLru(l,t,u),r.isPromise&&o.updateAsyncCache(F),"function"==typeof s&&s(o,r,F)}},F.values=function(){return F.cacheSnapshot.values},H=Y,X=(Z=$).expirations,J=Z.options,Q=Z.originalFunction,ee=H.options,Object.defineProperties(H,{_microMemoizeOptions:{configurable:!0,get:function(){return ee}},cacheSnapshot:{configurable:!0,get:function(){var e=H.cache;return{keys:e.keys.slice(0),size:e.size,values:e.values.slice(0)}}},expirations:{configurable:!0,get:function(){return X}},expirationsSnapshot:{configurable:!0,get:function(){return X.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return J}},originalFunction:{configurable:!0,get:function(){return Q}}}),g(Q,H),Y);if(e_){;en=(et=em).options.updateCacheForKey,eo=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!en(t))return et.apply(this,t);var o=et.fn.apply(this,t);return et.set(t,o),o},g(et,eo),em=eo}return u(em,f.name,er.profileName),em};return C.clearStats=v,C.collectStats=function(e){void 0===e&&(e=!0),_.isCollectingStats=e},C.compose=function(){return i.apply(void 0,arguments)||C},C.deep=C({isDeepEqual:!0}),C.getStats=h,C.infinite=C({maxSize:1/0}),C.isCollectingStats=function(){return _.isCollectingStats},C.isMoized=function(e){return"function"==typeof e&&!!e.isMoized},C.matchesArg=function(e){return C({matchesArg:e})},C.matchesKey=function(e){return C({matchesKey:e})},C.maxAge=function(e,t){return!0===t?C({maxAge:e,updateExpire:t}):"object"==typeof t?C({maxAge:e,onExpire:t.onExpire,updateExpire:t.updateExpire}):"function"==typeof t?C({maxAge:e,onExpire:t,updateExpire:!0}):C({maxAge:e})},C.maxArgs=function(e){return C({maxArgs:e})},C.maxSize=function(e){return C({maxSize:e})},C.profile=function(e){return C({profileName:e})},C.promise=C({isPromise:!0,updateExpire:!0}),C.react=C({isReact:!0}),C.serialize=C({isSerialized:!0}),C.serializeWith=function(e){return C({isSerialized:!0,serializer:e})},C.shallow=C({isShallowEqual:!0}),C.transformArgs=function(e){return C({transformArgs:e})},C.updateCacheForKey=function(e){return C({updateCacheForKey:e})},Object.defineProperty(C,"default",{configurable:!1,enumerable:!1,value:C,writable:!1}),C},e.exports=r(n(812736),n(730543))},199584:function(e){"use strict";var t={rfc3986:{}};t.generate=function(){var e="[0-9]",n="a-zA-Z";t.rfc3986.cidr=e+"|[1-2]"+e+"|3[0-2]";var o="0-9A-Fa-f",r="["+o+"]",i=n+"0-9-\\._~",s="!\\$&'\\(\\)\\*\\+,;=",a="%"+o,c=i+a+s+":@",u="["+c+"]",d="(?:0?0?"+e+"|0?[1-9]"+e+"|1"+e+e+"|2[0-4]"+e+"|25[0-5])";t.rfc3986.IPv4address="(?:"+d+"\\.){3}"+d;var l=r+"{1,4}",_="(?:"+l+":"+l+"|"+t.rfc3986.IPv4address+")";t.rfc3986.IPv6address="(?:"+("(?:"+l+":){6}")+_+"|"+("::(?:"+l+":){5}")+_+"|"+("(?:"+l+")?::(?:"+l+":){4}")+_+"|"+("(?:(?:"+l+":){0,1}"+l+")?::(?:"+l+":){3}")+_+"|"+("(?:(?:"+l+":){0,2}"+l+")?::(?:"+l+":){2}")+_+"|"+("(?:(?:"+l+":){0,3}"+l+")?::"+l+":")+_+"|"+("(?:(?:"+l+":){0,4}"+l+")?::")+_+"|"+("(?:(?:"+l+":){0,5}"+l+")?::")+l+"|"+("(?:(?:"+l+":){0,6}"+l)+")?::)",t.rfc3986.IPvFuture="v"+r+"+\\.["+i+s+":]+",t.rfc3986.scheme="["+n+"]["+n+"0-9+-\\.]*";t.rfc3986.IPLiteral="\\[(?:"+t.rfc3986.IPv6address+"|"+t.rfc3986.IPvFuture+")\\]";var p="(?:"+t.rfc3986.IPLiteral+"|"+t.rfc3986.IPv4address+"|"+("["+i+a+s)+"]{0,255})",v=u+"+",f="(?:\\/"+u+"*)*";t.rfc3986.hierPart="(?:(?:\\/\\/"+("(?:"+("["+i+a+s)+":]*@)?"+p+"(?::"+e+"*")+")?"+f+")|"+("\\/(?:"+v+f)+")?|"+(v+f)+")",t.rfc3986.query="["+c+"\\/\\?]*(?=#|$)",t.rfc3986.fragment="["+c+"\\/\\?]*",t.rfc3986.uri="^(?:"+t.rfc3986.scheme+":"+t.rfc3986.hierPart+")(?:\\?"+t.rfc3986.query+")?(?:#"+t.rfc3986.fragment+")?$"},t.generate(),e.exports=t.rfc3986},245580:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var o=n(464786);function r(e,t,n){return(0,o._)(e,t),n}}}]);